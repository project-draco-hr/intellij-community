{
  ProtocolFrame response;
  long until=System.currentTimeMillis() + myTimeout;
synchronized (myResponseQueue) {
    do {
      try {
        myResponseQueue.wait(1000);
      }
 catch (      InterruptedException ignore) {
      }
      response=myResponseQueue.get(sequence);
    }
 while (response == null && isConnected() && System.currentTimeMillis() < until);
    myResponseQueue.remove(sequence);
  }
  return response;
}
