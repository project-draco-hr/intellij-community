{
  if (file == null) {
    return;
  }
  final RootUrlInfo wcRoot=SvnVcs.getInstance(project).getSvnFileUrlMapping().getWcRootForFilePath(VfsUtilCore.virtualToIoFile(file));
  if (wcRoot == null) {
    return;
  }
  SvnBranchConfigurationNew configuration;
  try {
    configuration=SvnBranchConfigurationManager.getInstance(project).get(file);
  }
 catch (  VcsException ex) {
    Messages.showErrorDialog(project,"Error loading branch configuration: " + ex.getMessage(),SvnBundle.message("configure.branches.title"));
    return;
  }
  final SvnBranchConfigurationNew clonedConfiguration=configuration.copy();
  BranchConfigurationDialog dlg=new BranchConfigurationDialog(project,clonedConfiguration,wcRoot.getRepositoryUrlUrl(),file,wcRoot.getUrl());
  if (dlg.showAndGet()) {
    SvnBranchConfigurationManager.getInstance(project).setConfiguration(file,clonedConfiguration);
  }
}
