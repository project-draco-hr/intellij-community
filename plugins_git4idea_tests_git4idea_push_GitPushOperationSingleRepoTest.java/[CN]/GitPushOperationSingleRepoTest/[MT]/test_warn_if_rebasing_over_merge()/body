{
  generateUnpushedMergedCommitProblem();
  final Ref<Boolean> rebaseOverMergeProblemDetected=Ref.create(false);
  myDialogManager.registerDialogHandler(GitRejectedPushUpdateDialog.class,new TestDialogHandler<GitRejectedPushUpdateDialog>(){
    @Override public int handleDialog(    @NotNull GitRejectedPushUpdateDialog dialog){
      rebaseOverMergeProblemDetected.set(dialog.warnsAboutRebaseOverMerge());
      return DialogWrapper.CANCEL_EXIT_CODE;
    }
  }
);
  push("master","origin/master");
  assertTrue(rebaseOverMergeProblemDetected.get());
}
