{
  generateUpdateNeeded();
  myGitSettings.setUpdateType(UpdateMethod.BRANCH_DEFAULT);
  git("config branch.master.rebase true");
  myDialogManager.registerDialogHandler(GitRejectedPushUpdateDialog.class,new TestDialogHandler<GitRejectedPushUpdateDialog>(){
    @Override public int handleDialog(    @NotNull GitRejectedPushUpdateDialog dialog){
      return GitRejectedPushUpdateDialog.REBASE_EXIT_CODE;
    }
  }
);
  push("master","origin/master");
  assertEquals(UpdateMethod.BRANCH_DEFAULT,myGitSettings.getUpdateType());
}
