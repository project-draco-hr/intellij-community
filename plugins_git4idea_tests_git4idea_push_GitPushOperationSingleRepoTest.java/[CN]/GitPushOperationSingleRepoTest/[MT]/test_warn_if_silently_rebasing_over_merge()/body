{
  generateUnpushedMergedCommitProblem();
  myGitSettings.setAutoUpdateIfPushRejected(true);
  myGitSettings.setUpdateType(UpdateMethod.REBASE);
  final Ref<Boolean> rebaseOverMergeProblemDetected=Ref.create(false);
  myDialogManager.registerMessageHandler(new TestMessageHandler(){
    @Override public int handleMessage(    @NotNull String description){
      rebaseOverMergeProblemDetected.set(description.contains(GitRebaseOverMergeProblem.DESCRIPTION));
      return Messages.CANCEL;
    }
  }
);
  push("master","origin/master");
  assertTrue(rebaseOverMergeProblemDetected.get());
}
