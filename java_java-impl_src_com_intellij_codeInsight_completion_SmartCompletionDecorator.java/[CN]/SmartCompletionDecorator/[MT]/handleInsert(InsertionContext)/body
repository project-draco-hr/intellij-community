{
  if (getObject() instanceof PsiVariable && context.getCompletionChar() == Lookup.REPLACE_SELECT_CHAR) {
    context.commitDocument();
    final Document document=context.getDocument();
    JavaCompletionUtil.initOffsets(context.getFile(),context.getOffsetMap());
    document.deleteString(context.getSelectionEndOffset(),context.getOffsetMap().getOffset(CompletionInitializationContext.IDENTIFIER_END_OFFSET));
    if (context.getOffsetMap().getOffset(JavaCompletionUtil.LPAREN_OFFSET) > 0) {
      document.deleteString(context.getOffsetMap().getOffset(JavaCompletionUtil.LPAREN_OFFSET),context.getOffsetMap().getOffset(JavaCompletionUtil.ARG_LIST_END_OFFSET));
      JavaCompletionUtil.resetParensInfo(context.getOffsetMap());
    }
    context.commitDocument();
  }
  myPosition=getPosition(context,this);
  TailType tailType=computeTailType(context);
  super.handleInsert(context);
  if (tailType == TailType.COMMA) {
    AutoPopupController.getInstance(context.getProject()).autoPopupParameterInfo(context.getEditor(),null);
  }
}
