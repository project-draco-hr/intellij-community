{
  if (element instanceof PsiPackage) {
    return ((PsiPackage)element).getQualifiedName();
  }
  if (element instanceof PsiJavaModule) {
    return ((PsiJavaModule)element).getModuleName();
  }
  if (element instanceof PsiJavaModuleReferenceElement) {
    PsiReference reference=element.getReference();
    if (reference != null) {
      PsiElement target=reference.resolve();
      if (target instanceof PsiJavaModule) {
        return ((PsiJavaModule)target).getModuleName();
      }
    }
  }
  element=getMember(element);
  if (element instanceof PsiClass) {
    return ((PsiClass)element).getQualifiedName();
  }
 else   if (element instanceof PsiMember) {
    final PsiMember member=(PsiMember)element;
    PsiClass containingClass=member.getContainingClass();
    if (containingClass instanceof PsiAnonymousClass)     containingClass=((PsiAnonymousClass)containingClass).getBaseClassType().resolve();
    if (containingClass == null)     return null;
    String classFqn=containingClass.getQualifiedName();
    if (classFqn == null)     return member.getName();
    if (member instanceof PsiMethod && containingClass.findMethodsByName(member.getName(),false).length > 1) {
      return classFqn + "#" + member.getName()+ getParameterString((PsiMethod)member);
    }
    return classFqn + "#" + member.getName();
  }
  return null;
}
