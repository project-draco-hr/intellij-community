{
  List<LocalInspectionToolWrapper> enabled=new ArrayList<LocalInspectionToolWrapper>();
  final InspectionToolWrapper[] toolWrappers=profile.getInspectionTools(element);
  InspectionProfileWrapper.checkInspectionsDuplicates(toolWrappers);
  for (  InspectionToolWrapper toolWrapper : toolWrappers) {
    if (!profile.isToolEnabled(HighlightDisplayKey.find(toolWrapper.getShortName()),element))     continue;
    LocalInspectionToolWrapper wrapper=null;
    if (toolWrapper instanceof LocalInspectionToolWrapper) {
      wrapper=(LocalInspectionToolWrapper)toolWrapper;
    }
    if (wrapper == null)     continue;
    if (myIgnoreSuppressed && InspectionManagerEx.inspectionResultSuppressed(myFile,wrapper.getTool())) {
      continue;
    }
    enabled.add(wrapper);
  }
  return enabled;
}
