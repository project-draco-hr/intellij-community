{
  List<LocalInspectionToolWrapper> enabled=new ArrayList<LocalInspectionToolWrapper>();
  final InspectionToolWrapper[] toolWrappers=profile.getInspectionTools(myFile);
  InspectionProfileWrapper.checkInspectionsDuplicates(toolWrappers);
  for (  InspectionToolWrapper toolWrapper : toolWrappers) {
    ProgressManager.checkCanceled();
    if (!profile.isToolEnabled(HighlightDisplayKey.find(toolWrapper.getShortName()),myFile))     continue;
    LocalInspectionToolWrapper wrapper=null;
    if (toolWrapper instanceof LocalInspectionToolWrapper) {
      wrapper=(LocalInspectionToolWrapper)toolWrapper;
    }
 else     if (toolWrapper instanceof GlobalInspectionToolWrapper) {
      final GlobalInspectionToolWrapper globalInspectionToolWrapper=(GlobalInspectionToolWrapper)toolWrapper;
      wrapper=globalInspectionToolWrapper.getSharedLocalInspectionToolWrapper();
    }
    if (wrapper == null)     continue;
    String language=wrapper.getLanguage();
    if (language != null && Language.findLanguageByID(language) == null) {
      continue;
    }
    if (myIgnoreSuppressed && SuppressionUtil.inspectionResultSuppressed(myFile,wrapper.getTool())) {
      continue;
    }
    enabled.add(wrapper);
  }
  return enabled;
}
