{
  final String configurationName=dependency.getDeclaredConfiguration().getName();
  final GradleDependencyScope scope=GradleDependencyScope.fromName(configurationName);
  if (scope == null)   return;
  final Project project=dependency.getProject();
  final String version=project.hasProperty("version") ? str(project.property("version")) : "";
  final String group=project.hasProperty("group") ? str(project.property("group")) : "";
  DependencyVersionId versionId=new DependencyVersionId(dependency,project.getName(),group,version);
  Scopes scopes=map.get(versionId);
  if (scopes == null) {
    map.put(versionId,new Scopes(scope));
  }
 else {
    scopes.add(scope);
  }
}
