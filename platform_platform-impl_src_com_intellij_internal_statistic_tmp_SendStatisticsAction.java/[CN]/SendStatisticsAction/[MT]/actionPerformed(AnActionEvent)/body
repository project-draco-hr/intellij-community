{
  final Project project=CommonDataKeys.PROJECT.getData(e.getDataContext());
  if (project == null) {
    return;
  }
  ProgressManager.getInstance().run(new Task.Backgroundable(project,"Sending statistics...",false){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      StatisticsService service=StatisticsUploadAssistant.getStatisticsService();
      final StatisticsResult result=service.send();
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          Messages.showMultilineInputDialog(project,"Result: " + result.getCode(),"Statistics Result",StringUtil.replace(result.getDescription(),";","\n"),null,null);
        }
      }
,ModalityState.NON_MODAL,project.getDisposed());
    }
  }
);
}
