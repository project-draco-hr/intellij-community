{
  if (message instanceof ByteBuf) {
    ByteBuf input=(ByteBuf)message;
    try {
      messageReceived(context,input);
    }
  finally {
      if (input.refCnt() > 0) {
        input.release();
      }
    }
  }
 else {
    context.fireChannelRead(message);
  }
}
