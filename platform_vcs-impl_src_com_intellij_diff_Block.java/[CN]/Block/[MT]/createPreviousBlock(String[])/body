{
  int start=-1;
  int end=-1;
  int shift=0;
  Diff.Change change=Diff.buildChangesSomehow(prevContent,getSource());
  while (change != null) {
    int startLine1=change.line0;
    int startLine2=change.line1;
    int endLine1=startLine1 + change.deleted;
    int endLine2=startLine2 + change.inserted;
    if (Math.max(myStart,startLine2) < Math.min(myEnd,endLine2)) {
      if (startLine2 <= myStart)       start=startLine1;
      if (endLine2 > myEnd)       end=endLine1;
    }
    if (start == -1 && startLine2 > myStart)     start=myStart - shift;
    if (end == -1 && startLine2 >= myEnd)     end=myEnd - shift;
    shift+=change.inserted - change.deleted;
    change=change.link;
  }
  if (start == -1)   start=myStart - shift;
  if (end == -1)   end=myEnd - shift;
  return new Block(prevContent,start,end);
}
