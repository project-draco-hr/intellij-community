{
  GitResetDialog d=new GitResetDialog(project,gitRoots,defaultRoot);
  if (!d.showAndGet()) {
    return;
  }
  GitLineHandler h=d.handler();
  AccessToken token=DvcsUtil.workingTreeChangeStarted(project);
  try {
    GitHandlerUtil.doSynchronously(h,GitBundle.getString("resetting.title"),h.printableCommandLine());
  }
  finally {
    DvcsUtil.workingTreeChangeFinished(project,token);
  }
  GitRepositoryManager manager=GitUtil.getRepositoryManager(project);
  manager.updateRepository(d.getGitRoot());
  VfsUtil.markDirtyAndRefresh(true,true,false,d.getGitRoot());
  showErrors(project,getActionName(),exceptions);
}
