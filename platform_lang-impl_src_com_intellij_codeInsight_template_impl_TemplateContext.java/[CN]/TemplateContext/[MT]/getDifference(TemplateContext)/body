{
  Map<TemplateContextType,Boolean> result=ContainerUtil.newLinkedHashMap();
synchronized (myContextStates) {
synchronized (defaultContext == null ? myContextStates : defaultContext.myContextStates) {
      for (      TemplateContextType contextType : TemplateManagerImpl.getAllContextTypes()) {
        Boolean ownValue=getOwnValue(contextType);
        if (ownValue != null && shouldSaveContextValue(defaultContext,contextType,ownValue)) {
          result.put(contextType,ownValue);
        }
      }
    }
  }
  return result;
}
