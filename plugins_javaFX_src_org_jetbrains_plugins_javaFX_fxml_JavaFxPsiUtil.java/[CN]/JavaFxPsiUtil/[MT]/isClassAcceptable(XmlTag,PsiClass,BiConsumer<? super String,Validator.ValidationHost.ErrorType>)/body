{
  if (targetTag == null || fromClass == null || !fromClass.isValid()) {
    return true;
  }
  XmlElementDescriptor tagDescriptor=targetTag.getDescriptor();
  if (tagDescriptor instanceof JavaFxDefaultPropertyElementDescriptor) {
    tagDescriptor=((JavaFxDefaultPropertyElementDescriptor)tagDescriptor).getFxRootTagDescriptor(targetTag);
  }
  if (tagDescriptor instanceof JavaFxPropertyElementDescriptor) {
    final PsiClass containingClass=((JavaFxPropertyElementDescriptor)tagDescriptor).getPsiClass();
    final PsiType targetType=getWritablePropertyType(containingClass,tagDescriptor.getDeclaration());
    return canCoerce(targetType,fromClass,targetTag,messageConsumer);
  }
 else   if (tagDescriptor instanceof JavaFxClassBackedElementDescriptor) {
    final PsiElement tagDeclaration=tagDescriptor.getDeclaration();
    if (tagDeclaration instanceof PsiClass) {
      PsiClass defaultPropertyOwnerClass=(PsiClass)tagDeclaration;
      final XmlAttribute factoryAttr=targetTag.getAttribute(FxmlConstants.FX_FACTORY);
      if (factoryAttr != null) {
        final PsiClass factoryReturnClass=getFactoryProducedClass((PsiClass)tagDeclaration,factoryAttr.getValue());
        if (factoryReturnClass == null) {
          return true;
        }
        defaultPropertyOwnerClass=factoryReturnClass;
      }
      final PsiType targetType=getDefaultPropertyExpectedType(defaultPropertyOwnerClass);
      if (targetType != null) {
        return canCoerce(targetType,fromClass,targetTag,messageConsumer);
      }
      if (!isObservableCollection(defaultPropertyOwnerClass)) {
        return noDefaultPropertyError(messageConsumer);
      }
    }
  }
  return true;
}
