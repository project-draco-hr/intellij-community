{
  final Map<String,XmlAttributeValue> fileIds=new HashMap<String,XmlAttributeValue>();
  currentTag.getContainingFile().accept(new XmlRecursiveElementVisitor(){
    @Override public void visitXmlTag(    XmlTag tag){
      super.visitXmlTag(tag);
      if (currentTag != tag) {
        final XmlAttribute attribute=tag.getAttribute(FxmlConstants.FX_ID);
        if (attribute != null) {
          fileIds.put(attribute.getValue(),attribute.getValueElement());
        }
      }
    }
  }
);
  final PsiFile containingFile=currentTag.getContainingFile();
  if (containingFile instanceof XmlFile) {
    final XmlTag rootTag=((XmlFile)containingFile).getRootTag();
    if (rootTag != null) {
      final XmlAttribute attribute=rootTag.getAttribute(FxmlConstants.FX_CONTROLLER);
      if (attribute != null) {
        fileIds.put(FxmlConstants.CONTROLLER,attribute.getValueElement());
      }
    }
  }
  return fileIds;
}
