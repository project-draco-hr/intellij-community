{
  MessageBusConnection connection=myProject.getMessageBus().connect();
  connection.subscribe(ProjectTopics.MODULES,new ModuleAdapter(){
    @Override public void moduleAdded(    @NotNull Project project,    @NotNull Module module){
      refreshPointers(module);
    }
    @Override public void modulesRenamed(    @NotNull Project project,    @NotNull List<Module> modules,    @NotNull Function<Module,String> oldNameProvider){
      for (      Module module : modules) {
        refreshPointers(module);
      }
    }
  }
);
  connection.subscribe(FacetManager.FACETS_TOPIC,new FacetManagerAdapter(){
    @Override public void facetAdded(    @NotNull Facet facet){
      refreshPointers(facet.getModule());
    }
    @Override public void beforeFacetRenamed(    @NotNull Facet facet){
      final FacetPointerImpl pointer=myPointers.get(constructId(facet));
      if (pointer != null) {
        pointer.refresh();
      }
    }
    @Override public void facetRenamed(    @NotNull final Facet facet,    @NotNull final String oldName){
      refreshPointers(facet.getModule());
    }
  }
);
  for (  Module module : ModuleManager.getInstance(myProject).getModules()) {
    refreshPointers(module);
  }
}
