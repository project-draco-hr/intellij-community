{
  StudyEditor.deleteGuardedBlocks(document);
  taskFile.setTrackChanges(false);
  clearDocument(document);
  Task task=taskFile.getTask();
  String lessonDir=StudyNames.LESSON_DIR + String.valueOf(task.getLesson().getIndex() + 1);
  String taskDir=Task.TASK_DIR + String.valueOf(task.getIndex() + 1);
  Course course=task.getLesson().getCourse();
  File resourceFile=new File(course.getCourseDirectory());
  if (!resourceFile.exists()) {
    showBalloon(project,"Course was deleted",MessageType.ERROR);
    return false;
  }
  String patternPath=FileUtil.join(resourceFile.getPath(),lessonDir,taskDir,fileName);
  VirtualFile patternFile=VfsUtil.findFileByIoFile(new File(patternPath),true);
  if (patternFile == null) {
    return false;
  }
  final Document patternDocument=FileDocumentManager.getInstance().getDocument(patternFile);
  if (patternDocument == null) {
    return false;
  }
  document.setText(patternDocument.getCharsSequence());
  taskFile.setTrackChanges(true);
  return true;
}
