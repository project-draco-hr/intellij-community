{
  StudyEditor.deleteGuardedBlocks(document);
  StudyDocumentListener listener=StudyEditor.getListener(document);
  if (listener != null) {
    document.removeDocumentListener(listener);
  }
  clearDocument(document);
  String lessonDir=Lesson.LESSON_DIR + String.valueOf(task.getLesson().getIndex() + 1);
  String taskDir=Task.TASK_DIR + String.valueOf(task.getIndex() + 1);
  File resourceFile=new File(course.getResourcePath());
  File resourceRoot=resourceFile.getParentFile();
  String patternPath=FileUtil.join(resourceRoot.getPath(),lessonDir,taskDir,fileName);
  VirtualFile patternFile=VfsUtil.findFileByIoFile(new File(patternPath),true);
  if (patternFile == null) {
    return;
  }
  Document patternDocument=FileDocumentManager.getInstance().getDocument(patternFile);
  if (patternDocument == null) {
    return;
  }
  document.setText(patternDocument.getCharsSequence());
  if (listener != null) {
    document.addDocumentListener(listener);
  }
}
