{
  final Editor editor=studyState.getEditor();
  final TaskFile taskFile=studyState.getTaskFile();
  if (!resetTaskFile(editor.getDocument(),project,taskFile,studyState.getVirtualFile().getName())) {
    return;
  }
  WolfTheProblemSolver.getInstance(project).clearProblems(studyState.getVirtualFile());
  taskFile.setHighlightErrors(false);
  StudyPainter.drawAllWindows(editor,taskFile);
  StudyPainter.createGuardedBlocks(editor,taskFile);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      IdeFocusManager.getInstance(project).requestFocus(editor.getContentComponent(),true);
    }
  }
);
  StudyNavigator.navigateToFirstTaskWindow(editor,taskFile);
  showBalloon(project,"You can start again now",MessageType.INFO);
}
