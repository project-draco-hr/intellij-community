{
  if (wrapLen <= 0)   throw new IllegalArgumentException("Invalid wrapping parameter");
  StringTokenizer st=new StringTokenizer(str," \n\r");
  StringBuilder result=new StringBuilder();
  if (st.hasMoreTokens()) {
    String word=st.nextToken();
    result.append(word);
    int lineLen=word.length();
    while (st.hasMoreTokens()) {
      word=st.nextToken();
      int wordLen=word.length();
      if (lineLen + wordLen > wrapLen) {
        result.append('\n');
        lineLen=wordLen;
      }
 else {
        result.append(' ');
        lineLen+=wordLen + 1;
      }
      result.append(word);
    }
  }
  return result.toString();
}
