{
  ProgressIndicatorBase pib=new ProgressIndicatorBase();
  pib.cancel();
  try {
    pib.checkCanceled();
    fail("Please restore ProgressIndicatorBase.checkCanceled() check!");
  }
 catch (  ProcessCanceledException ex) {
    boolean isInternal=SystemProperties.getBooleanProperty("idea.is.internal",false);
    assertTrue("Should have no stackframe",isInternal ? ex.getStackTrace().length != 0 : ex.getStackTrace().length == 0);
  }
}
