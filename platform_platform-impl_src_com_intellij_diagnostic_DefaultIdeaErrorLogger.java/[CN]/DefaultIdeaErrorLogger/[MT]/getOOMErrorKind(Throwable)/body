{
  String message=t.getMessage();
  if (t instanceof OutOfMemoryError) {
    if (message != null && message.contains("unable to create new native thread"))     return null;
    if (message != null && message.contains("PermGen"))     return MemoryKind.PERM_GEN;
    return MemoryKind.HEAP;
  }
  if (t instanceof VirtualMachineError && message != null && message.contains("CodeCache")) {
    return MemoryKind.CODE_CACHE;
  }
  return null;
}
