{
  if (t instanceof OutOfMemoryError) {
    return t.getMessage() != null && t.getMessage().contains("PermGen") ? MemoryKind.PERM_GEN : MemoryKind.HEAP;
  }
  if (t instanceof VirtualMachineError && t.getMessage() != null && t.getMessage().contains("CodeCache")) {
    return MemoryKind.CODE_CACHE;
  }
  return null;
}
