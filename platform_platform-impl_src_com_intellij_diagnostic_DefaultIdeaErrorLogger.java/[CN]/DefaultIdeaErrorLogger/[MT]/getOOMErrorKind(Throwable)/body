{
  String message=t.getMessage();
  if (message == null)   return null;
  if (t instanceof OutOfMemoryError) {
    if (message.contains("unable to create new native thread")) {
      return null;
    }
    return message.contains("PermGen") ? MemoryKind.PERM_GEN : MemoryKind.HEAP;
  }
  if (t instanceof VirtualMachineError && message.contains("CodeCache")) {
    return MemoryKind.CODE_CACHE;
  }
  return null;
}
