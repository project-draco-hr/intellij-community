{
  final PsiElement parent=PsiUtil.skipParenthesizedExprUp(methodCall.getParent());
  if (parent instanceof PsiVariable) {
    if (PsiUtil.checkSameExpression(methodCall,((PsiVariable)parent).getInitializer())) {
      return ((PsiVariable)parent).getType();
    }
  }
 else   if (parent instanceof PsiAssignmentExpression) {
    if (PsiUtil.checkSameExpression(methodCall,((PsiAssignmentExpression)parent).getRExpression())) {
      return ((PsiAssignmentExpression)parent).getLExpression().getType();
    }
  }
 else   if (parent instanceof PsiReturnStatement) {
    final PsiElement psiElement=PsiTreeUtil.getParentOfType(parent,PsiLambdaExpression.class,PsiMethod.class);
    if (psiElement instanceof PsiLambdaExpression) {
      return null;
    }
 else     if (psiElement instanceof PsiMethod) {
      return ((PsiMethod)psiElement).getReturnType();
    }
  }
 else   if (PsiUtil.isCondition(methodCall,parent)) {
    return PsiType.BOOLEAN.getBoxedType(parent);
  }
 else   if (parent instanceof PsiArrayInitializerExpression) {
    final PsiElement gParent=parent.getParent();
    if (gParent instanceof PsiNewExpression) {
      final PsiType type=((PsiNewExpression)gParent).getType();
      if (type instanceof PsiArrayType) {
        return ((PsiArrayType)type).getComponentType();
      }
    }
 else     if (gParent instanceof PsiArrayInitializerExpression) {
      final PsiType expectedTypeByParent=getExpectedTypeByParent((PsiExpression)parent);
      return expectedTypeByParent != null && expectedTypeByParent instanceof PsiArrayType ? ((PsiArrayType)expectedTypeByParent).getComponentType() : null;
    }
  }
  return null;
}
