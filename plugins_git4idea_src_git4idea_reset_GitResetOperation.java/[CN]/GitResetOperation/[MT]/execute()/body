{
  saveAllDocuments();
  GitUtil.workingTreeChangeStarted(myProject);
  Map<GitRepository,GitCommandResult> results=ContainerUtil.newHashMap();
  try {
    for (    Map.Entry<GitRepository,VcsFullCommitDetails> entry : myCommits.entrySet()) {
      GitRepository repository=entry.getKey();
      VcsFullCommitDetails target=entry.getValue();
      results.put(repository,myGit.reset(repository,myMode,target.getId().asString()));
      repository.update();
      VfsUtil.markDirtyAndRefresh(true,true,false,repository.getRoot());
    }
  }
  finally {
    GitUtil.workingTreeChangeFinished(myProject);
  }
  notifyResult(results);
}
