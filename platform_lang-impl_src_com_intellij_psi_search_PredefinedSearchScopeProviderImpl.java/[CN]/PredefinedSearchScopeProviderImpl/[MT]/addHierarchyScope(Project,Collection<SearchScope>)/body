{
  final ToolWindow toolWindow=ToolWindowManager.getInstance(project).getToolWindow(ToolWindowId.HIERARCHY);
  if (toolWindow == null) {
    return;
  }
  final ContentManager contentManager=toolWindow.getContentManager();
  final Content content=contentManager.getSelectedContent();
  if (content == null) {
    return;
  }
  final String name=content.getDisplayName();
  final JComponent component=content.getComponent();
  if (!(component instanceof HierarchyBrowserBase)) {
    return;
  }
  final HierarchyBrowserBase hierarchyBrowserBase=(HierarchyBrowserBase)component;
  final PsiElement[] elements=hierarchyBrowserBase.getAvailableElements();
  if (elements.length > 0) {
    result.add(new LocalSearchScope(elements,"Hierarchy '" + name + "' (visible nodes only)"));
  }
}
