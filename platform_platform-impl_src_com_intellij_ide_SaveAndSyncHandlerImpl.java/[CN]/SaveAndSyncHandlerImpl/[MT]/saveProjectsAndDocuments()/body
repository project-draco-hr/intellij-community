{
  LOG.debug("enter: save()");
  if (!ApplicationManager.getApplication().isDisposed() && mySettings.isSaveOnFrameDeactivation() && myBlockSaveOnFrameDeactivationCount.get() == 0) {
    FileDocumentManager.getInstance().saveAllDocuments();
    for (    Project project : ProjectManagerEx.getInstanceEx().getOpenProjects()) {
      if (LOG.isDebugEnabled())       LOG.debug("saving project: " + project);
      project.save();
    }
    LOG.debug("saving application settings");
    ApplicationManagerEx.getApplicationEx().saveSettings();
    LOG.debug("exit: save()");
  }
}
