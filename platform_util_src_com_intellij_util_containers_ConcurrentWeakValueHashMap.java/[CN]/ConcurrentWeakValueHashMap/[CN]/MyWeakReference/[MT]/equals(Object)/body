{
  if (this == o)   return true;
  if (o == null || getClass() != o.getClass())   return false;
  @SuppressWarnings("unchecked") ValueReference<K,V> that=(ValueReference)o;
  V v=get();
  V thatV=that.get();
  return key.equals(that.getKey()) && v != null && thatV != null && v.equals(thatV);
}
