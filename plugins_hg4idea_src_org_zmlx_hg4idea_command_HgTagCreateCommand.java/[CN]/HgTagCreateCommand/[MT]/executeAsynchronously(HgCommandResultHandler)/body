{
  if (StringUtil.isEmptyOrSpaces(tagName)) {
    throw new HgCommandException("tag name is empty");
  }
  List<String> arguments=new ArrayList<>();
  arguments.add(tagName);
  if (!StringUtil.isEmptyOrSpaces(revisionNumberOrHash)) {
    arguments.add("--rev");
    arguments.add(revisionNumberOrHash);
  }
  new HgCommandExecutor(project).execute(repo,"tag",arguments,resultHandler);
  if (!project.isDisposed()) {
    HgRepositoryManager manager=HgUtil.getRepositoryManager(project);
    manager.updateRepository(repo);
  }
}
