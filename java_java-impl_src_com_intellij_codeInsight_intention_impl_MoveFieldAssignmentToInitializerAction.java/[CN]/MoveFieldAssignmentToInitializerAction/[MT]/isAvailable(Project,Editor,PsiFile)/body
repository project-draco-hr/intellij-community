{
  PsiAssignmentExpression assignment=getAssignmentUnderCaret(editor,file);
  if (assignment == null)   return false;
  PsiElement parent=assignment.getParent();
  if (!(parent instanceof PsiExpressionStatement))   return false;
  PsiField field=getAssignedField(assignment);
  if (field == null || field.hasInitializer())   return false;
  PsiClass psiClass=field.getContainingClass();
  if (psiClass == null || psiClass.isInterface())   return false;
  if (psiClass.getContainingFile() != file)   return false;
  PsiModifierListOwner ctrOrInitializer=enclosingMethodOrClassInitializer(assignment,field);
  if (ctrOrInitializer == null)   return false;
  if (ctrOrInitializer.hasModifierProperty(PsiModifier.STATIC) != field.hasModifierProperty(PsiModifier.STATIC))   return false;
  if (!isValidAsFieldInitializer(assignment.getRExpression(),ctrOrInitializer))   return false;
  if (!isInitializedWithSameExpression(field,assignment,new ArrayList<PsiAssignmentExpression>()))   return false;
  return true;
}
