{
  final PsiExpression expression=assignment.getRExpression();
  if (expression == null)   return false;
  PsiClass containingClass=field.getContainingClass();
  if (containingClass == null)   return false;
  final Ref<Boolean> result=new Ref<Boolean>(Boolean.TRUE);
  final List<PsiAssignmentExpression> totalUsages=new ArrayList<PsiAssignmentExpression>();
  containingClass.accept(new JavaRecursiveElementVisitor(){
    private PsiCodeBlock currentInitializingBlock;
    @Override public void visitCodeBlock(    PsiCodeBlock block){
      PsiElement parent=block.getParent();
      if (parent instanceof PsiClassInitializer || parent instanceof PsiMethod && ((PsiMethod)parent).isConstructor()) {
        currentInitializingBlock=block;
        super.visitCodeBlock(block);
        currentInitializingBlock=null;
      }
 else {
        super.visitCodeBlock(block);
      }
    }
    @Override public void visitReferenceExpression(    PsiReferenceExpression reference){
      if (!result.get().booleanValue())       return;
      super.visitReferenceExpression(reference);
      if (!PsiUtil.isOnAssignmentLeftHand(reference))       return;
      PsiElement resolved=reference.resolve();
      if (resolved != field)       return;
      PsiAssignmentExpression assignmentExpression=PsiTreeUtil.getParentOfType(reference,PsiAssignmentExpression.class);
      PsiExpression rValue=assignmentExpression.getRExpression();
      if (currentInitializingBlock != null) {
        if (rValue == null || !PsiEquivalenceUtil.areElementsEquivalent(rValue,expression)) {
          result.set(Boolean.FALSE);
        }
        initializingAssignments.add(assignmentExpression);
      }
      totalUsages.add(assignment);
    }
  }
);
  if (totalUsages.size() == 1 && initializingAssignments.isEmpty()) {
    initializingAssignments.addAll(totalUsages);
    return true;
  }
  return result.get().booleanValue();
}
