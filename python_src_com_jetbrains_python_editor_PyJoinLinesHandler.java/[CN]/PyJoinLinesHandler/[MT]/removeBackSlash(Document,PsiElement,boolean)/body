{
  String[] substrings=element.getText().split("\n");
  if (substrings.length != 1) {
    StringBuilder replacement=new StringBuilder();
    for (    String string : substrings) {
      if (trim)       string=StringUtil.trimLeading(string);
      if (string.trim().endsWith("\\"))       replacement.append(string.substring(0,string.length() - 1));
 else       replacement.append(string);
    }
    document.replaceString(element.getTextOffset(),element.getTextOffset() + element.getTextLength(),replacement);
    return true;
  }
  return false;
}
