{
  int cutIntoRight=rightNodeInfo.getContentRange().getStartOffset();
  String lineEnd="";
  if (!replacement.isEmpty()) {
    cutIntoRight=replacement.length() + rightNodeInfo.getQuote().length();
    int contentWithQuoteStartColumn=leftNodeInfo.getAbsoluteContentRange().getStartOffset() - getLeftLineStartOffset(req) - leftNodeInfo.getQuote().length();
    int quotePos=rightNodeInfo.getAbsoluteContentRange().getStartOffset() + replacement.length();
    req.document.insertString(quotePos,rightNodeInfo.getQuote());
    req.document.insertString(quotePos,StringUtil.repeat(" ",contentWithQuoteStartColumn));
    lineEnd=quote + "\\\n";
  }
  return new Result(replacement + lineEnd,0,leftNodeInfo.getQuote().length(),cutIntoRight);
}
