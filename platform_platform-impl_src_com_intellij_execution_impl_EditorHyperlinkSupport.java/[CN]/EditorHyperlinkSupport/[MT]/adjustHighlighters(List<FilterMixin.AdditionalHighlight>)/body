{
  for (  FilterMixin.AdditionalHighlight highlight : highlights) {
    RangeHighlighter found=null;
    for (    RangeHighlighter rangeHighlighter : myHighlighterToMessageInfoMap.keySet()) {
      if (rangeHighlighter.getStartOffset() <= highlight.getStart() && rangeHighlighter.getEndOffset() >= highlight.getEnd()) {
        found=rangeHighlighter;
        break;
      }
    }
    if (found != null) {
      TextAttributes textAttributes=highlight.getTextAttributes(found.getTextAttributes());
      final HyperlinkInfo hyperlinkInfo=myHighlighterToMessageInfoMap.remove(found);
      if (found.getStartOffset() != highlight.getStart()) {
        addHyperlink(found.getStartOffset(),highlight.getEnd(),found.getTextAttributes(),hyperlinkInfo);
      }
      if (found.getEndOffset() != highlight.getEnd()) {
        addHyperlink(highlight.getEnd(),found.getEndOffset(),found.getTextAttributes(),hyperlinkInfo);
      }
      addHyperlink(highlight.getStart(),highlight.getEnd(),textAttributes,hyperlinkInfo);
      myEditor.getMarkupModel().removeHighlighter(found);
      return;
    }
    final TextAttributes textAttributes=highlight.getTextAttributes(null);
    addHighlighter(highlight.getStart(),highlight.getEnd(),textAttributes);
  }
}
