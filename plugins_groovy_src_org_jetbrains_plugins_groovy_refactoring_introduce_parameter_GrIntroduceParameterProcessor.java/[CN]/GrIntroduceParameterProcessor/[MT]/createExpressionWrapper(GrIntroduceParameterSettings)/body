{
  LOG.assertTrue(settings.getToReplaceIn() instanceof GrMethod);
  LOG.assertTrue(settings.getToSearchFor() instanceof PsiMethod);
  final StringPartInfo stringPartInfo=settings.getStringPartInfo();
  GrVariable var=settings.getVar();
  final GrExpression expression=stringPartInfo != null ? stringPartInfo.createLiteralFromSelected() : var != null ? var.getInitializerGroovy() : settings.getExpression();
  return new GrExpressionWrapper(expression);
}
