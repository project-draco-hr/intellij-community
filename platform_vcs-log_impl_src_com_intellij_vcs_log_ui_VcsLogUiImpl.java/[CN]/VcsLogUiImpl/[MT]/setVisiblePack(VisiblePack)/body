{
  ApplicationManager.getApplication().assertIsDispatchThread();
  PermanentGraph<Integer> previousPermGraph=myVisiblePack.getPermanentGraph();
  TIntHashSet previouslySelected=getSelectedCommits();
  myVisiblePack=pack;
  boolean permGraphChanged=previousPermGraph != myVisiblePack.getPermanentGraph();
  GraphTableModel currentModel=getModel();
  if (currentModel == null) {
    VcsLogGraphTable table=getTable();
    table.setModel(new GraphTableModel(myVisiblePack,myLogDataHolder,this));
    table.setPaintBusy(false);
  }
 else {
    currentModel.setVisiblePack(myVisiblePack);
    restoreSelection(currentModel,myVisiblePack.getVisibleGraph(),previouslySelected,getTable());
  }
  myMainFrame.updateDataPack(myVisiblePack);
  setLongEdgeVisibility(myUiProperties.areLongEdgesVisible());
  fireFilterChangeEvent(myVisiblePack,permGraphChanged);
  repaintUI();
}
