{
  myProject=project;
  myColorManager=manager;
  myUiProperties=uiProperties;
  Disposer.register(logDataManager,this);
  myFilterer=filterer;
  myLog=new VcsLogImpl(logDataManager,this);
  myVisiblePack=VisiblePack.EMPTY;
  myMainFrame=new MainFrame(logDataManager,this,project,uiProperties,myLog,myVisiblePack);
  for (  VcsLogHighlighterFactory factory : Extensions.getExtensions(LOG_HIGHLIGHTER_FACTORY_EP,myProject)) {
    getTable().addHighlighter(factory.createHighlighter(logDataManager,this));
  }
  myVisiblePackChangeListener=new VisiblePackChangeListener(){
    @Override public void onVisiblePackChange(    @NotNull final VisiblePack visiblePack){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          if (!Disposer.isDisposed(VcsLogUiImpl.this)) {
            setVisiblePack(visiblePack);
          }
        }
      }
);
    }
  }
;
  myFilterer.addVisiblePackChangeListener(myVisiblePackChangeListener);
}
