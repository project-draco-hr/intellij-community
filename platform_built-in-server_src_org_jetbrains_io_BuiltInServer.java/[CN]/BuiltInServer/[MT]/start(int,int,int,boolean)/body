{
  EventLoopGroup eventLoopGroup=new NioEventLoopGroup(workerCount,PooledThreadExecutor.INSTANCE);
  ChannelRegistrar channelRegistrar=new ChannelRegistrar();
  ServerBootstrap bootstrap=NettyUtil.nioServerBootstrap(eventLoopGroup);
  configureChildHandler(bootstrap,channelRegistrar);
  int port=bind(firstPort,portsCount,tryAnyPort,bootstrap,channelRegistrar);
  BuiltInServer server=new BuiltInServer(eventLoopGroup,port);
  bindCustomPorts(server);
  return server;
}
