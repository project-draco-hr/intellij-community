{
  if (!(refEntity instanceof RefPackage)) {
    return null;
  }
  final List<RefEntity> children=refEntity.getChildren();
  if (children == null) {
    return null;
  }
  int numClasses=0;
  boolean subpackage=false;
  for (  RefEntity child : children) {
    if (child instanceof RefClass) {
      numClasses++;
    }
 else     if (child instanceof RefPackage) {
      subpackage=true;
    }
  }
  if (numClasses >= limit || (numClasses == 0 && subpackage)) {
    return null;
  }
  final String errorString=InspectionGadgetsBundle.message("package.with.too.few.classes.problem.descriptor",refEntity.getQualifiedName(),Integer.valueOf(numClasses),Integer.valueOf(limit));
  return new CommonProblemDescriptor[]{inspectionManager.createProblemDescriptor(errorString)};
}
