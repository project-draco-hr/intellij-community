{
  if (element instanceof PyFile) {
    final PyFile pyFile=(PyFile)element;
    final Project project=element.getProject();
    final Boolean showingFlag=project.getUserData(DONT_SHOW_BALLOON);
    if (showingFlag != null && showingFlag.booleanValue()) {
      return;
    }
    if (!moduleUsesPythonSdk(pyFile)) {
      return;
    }
    final int inspectionVersion=getSettings(project).version;
    if (inspectionVersion < PyCompatibilityInspection.LATEST_INSPECTION_VERSION) {
      if (isCompatibilityInspectionEnabled(element)) {
        final LanguageLevel pyVersion=getLatestConfiguredCompatiblePython3Version(element);
        if (pyVersion != null && pyVersion.isOlderThan(LanguageLevel.getLatest())) {
          showStalePython3VersionWarning(pyFile,project,pyVersion);
        }
      }
 else       if (containsFutureImports(pyFile)) {
        showInspectionAdvertisement(project,USING_FUTURE_IMPORTS);
      }
 else       if (containsSixImport(pyFile)) {
        showInspectionAdvertisement(project,USING_SIX);
      }
    }
  }
}
