{
  final FileSystemTreeImpl fileSystemTree=field("myFileSystemTree").ofType(FileSystemTreeImpl.class).in(getDialogWrapper()).get();
  assertNotNull(fileSystemTree);
  final AtomicBoolean fileSelected=new AtomicBoolean();
  execute(new GuiTask(){
    @Override protected void executeInEDT() throws Throwable {
      fileSystemTree.select(file,new Runnable(){
        @Override public void run(){
          fileSelected.set(true);
        }
      }
);
    }
  }
);
  pause(new Condition("File " + quote(file.getPath()) + " is selected"){
    @Override public boolean test(){
      return fileSelected.get();
    }
  }
,SHORT_TIMEOUT);
  return this;
}
