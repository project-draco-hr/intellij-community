{
  final String indentation=getDocStringIndentation();
  final DocStringFormat format=getDocStringFormat();
  DocStringBuilder builder=null;
  if (format == DocStringFormat.EPYTEXT || format == DocStringFormat.REST) {
    builder=new TagBasedDocStringBuilder(format == DocStringFormat.EPYTEXT ? "@" : ":");
    TagBasedDocStringBuilder tagBuilder=(TagBasedDocStringBuilder)builder;
    if (myAddFirstEmptyLine) {
      tagBuilder.addEmptyLine();
    }
    for (    DocstringParam param : myParams) {
      if (param.isReturnValue()) {
        if (param.getType() != null) {
          tagBuilder.addReturnValueType(param.getType());
        }
 else {
          tagBuilder.addReturnValueDescription("");
        }
      }
 else {
        if (param.getType() != null) {
          tagBuilder.addParameterType(param.getName(),param.getType());
        }
 else {
          tagBuilder.addParameterDescription(param.getName(),"");
        }
      }
    }
  }
 else   if (format == DocStringFormat.GOOGLE || format == DocStringFormat.NUMPY) {
    builder=format == DocStringFormat.GOOGLE ? new GoogleCodeStyleDocStringBuilder() : new NumpyDocStringBuilder();
    final SectionBasedDocStringBuilder sectionBuilder=(SectionBasedDocStringBuilder)builder;
    if (myAddFirstEmptyLine) {
      sectionBuilder.addEmptyLine();
    }
    final List<DocstringParam> parameters=ContainerUtil.findAll(myParams,new Condition<DocstringParam>(){
      @Override public boolean value(      DocstringParam param){
        return !param.isReturnValue();
      }
    }
);
    if (!parameters.isEmpty()) {
      sectionBuilder.startParametersSection();
      for (      DocstringParam param : parameters) {
        sectionBuilder.addParameter(param.getName(),param.getType(),"");
      }
    }
    final List<DocstringParam> returnValues=ContainerUtil.findAll(myParams,new Condition<DocstringParam>(){
      @Override public boolean value(      DocstringParam param){
        return param.isReturnValue();
      }
    }
);
    if (!returnValues.isEmpty()) {
      sectionBuilder.startReturnsSection();
      boolean hasTypedReturns=false;
      for (      DocstringParam returnValue : returnValues) {
        if (returnValue.getType() != null) {
          sectionBuilder.addReturnValue(null,getDefaultType(returnValue),"");
          hasTypedReturns=true;
        }
      }
      if (!hasTypedReturns) {
        sectionBuilder.addEmptyLine();
      }
    }
  }
  if (builder != null && !builder.getLines().isEmpty()) {
    return myQuotes + '\n' + builder.buildContent(indentation,true)+ '\n'+ indentation+ myQuotes;
  }
  return myQuotes + '\n' + indentation+ myQuotes;
}
