{
  myVcsManager=vcsManager;
  myLock=new Object();
  myQueue=new ArrayList<>();
  myDirtReporter=new Runnable(){
    @Override public void run(){
      ArrayList<FilesAndDirs> list;
synchronized (myLock) {
        list=new ArrayList<>(myQueue);
        myQueue.clear();
      }
      for (      FilesAndDirs filesAndDirs : list) {
        dirtyScopeManager.filePathsDirty(filesAndDirs.dirtyFiles,filesAndDirs.dirtyDirs);
      }
    }
  }
;
  myZipperUpdater=new ConstantZipperUpdater(300,Alarm.ThreadToUse.POOLED_THREAD,this,myDirtReporter);
  Disposer.register(project,this);
  project.getMessageBus().connect().subscribe(VirtualFileManager.VFS_CHANGES,this);
}
