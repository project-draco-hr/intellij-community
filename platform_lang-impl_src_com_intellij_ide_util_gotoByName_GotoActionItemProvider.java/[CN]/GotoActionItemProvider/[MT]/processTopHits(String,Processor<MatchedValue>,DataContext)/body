{
  final CollectConsumer<Object> collector=new CollectConsumer<Object>();
  for (  SearchTopHitProvider provider : SearchTopHitProvider.EP_NAME.getExtensions()) {
    if (provider instanceof OptionsTopHitProvider) {
      String prefix="#" + ((OptionsTopHitProvider)provider).getId() + " ";
      provider.consumeTopHits(prefix + pattern,collector,CommonDataKeys.PROJECT.getData(dataContext));
    }
    provider.consumeTopHits(pattern,collector,CommonDataKeys.PROJECT.getData(dataContext));
  }
  final Collection<Object> result=collector.getResult();
  final List<Comparable> c=new ArrayList<Comparable>();
  for (  Object o : result) {
    if (o instanceof Comparable) {
      c.add((Comparable)o);
    }
  }
  if (!processItems(pattern,c,consumer))   return true;
  return false;
}
