{
  if (lineNumberTable == null) {
    return Collections.emptyMap();
  }
  Map<Integer,Integer> res=new HashMap<Integer,Integer>();
  int[] data=lineNumberTable.getRawData();
  for (int i=0; i < data.length; i+=2) {
    int originalOffset=data[i];
    int originalLine=data[i + 1];
    Integer newLine=mapping.get(originalOffset);
    if (newLine != null) {
      res.put(originalLine,newLine);
    }
 else {
      unmappedLines.add(originalLine);
    }
  }
  for (  Entry<Integer,Integer> entry : mapping.entrySet()) {
    int originalLine=lineNumberTable.findLineNumber(entry.getKey());
    if (originalLine > -1 && !res.containsKey(originalLine)) {
      res.put(originalLine,entry.getValue());
      unmappedLines.remove(originalLine);
    }
  }
  return res;
}
