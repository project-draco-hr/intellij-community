{
  if (!fragment.isVisible()) {
    throw new IllegalArgumentException("is hide fragment: " + fragment);
  }
  Edge edge=graph.getEdgeController().createEdge(fragment.getUpNode(),fragment.getDownNode(),fragment.getUpNode().getBranch(),Edge.Type.HIDE_FRAGMENT);
  hideFragments.put(edge,fragment);
  graph.getVisibilityController().hide(fragment.getIntermediateNodes());
  fragment.setVisibility(false);
  return graph.intermediateUpdate(fragment.getUpNode(),fragment.getDownNode());
}
