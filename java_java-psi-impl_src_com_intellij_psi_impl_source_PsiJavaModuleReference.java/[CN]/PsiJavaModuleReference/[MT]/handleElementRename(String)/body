{
  PsiJavaModuleReferenceElement element=getElement();
  if (element instanceof PsiCompiledElement) {
    throw new IncorrectOperationException(JavaCoreBundle.message("psi.error.attempt.to.edit.class.file",element.getContainingFile()));
  }
  PsiElementFactory factory=PsiElementFactory.SERVICE.getInstance(element.getProject());
  PsiJavaModuleReferenceElement newElement=factory.createModuleFromText("module " + newName + " {}").getNameElement();
  return element.replace(newElement);
}
