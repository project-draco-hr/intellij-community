{
  myProject=project;
  myLogProviders=logProviders;
  myDataLoaderQueue=new BackgroundTaskQueue(project,"Loading history...");
  myUserRegistry=(VcsUserRegistryImpl)ServiceManager.getService(project,VcsUserRegistry.class);
  myHashMap=createLogHashMap();
  myMiniDetailsGetter=new MiniDetailsGetter(myHashMap,logProviders,myTopCommitsDetailsCache,this);
  myDetailsGetter=new CommitDetailsGetter(myHashMap,logProviders,this);
  myRefresher=new VcsLogRefresherImpl(myProject,myHashMap,myLogProviders,myUserRegistry,myTopCommitsDetailsCache,new Consumer<DataPack>(){
    @Override public void consume(    DataPack dataPack){
      fireDataPackChangeEvent(dataPack);
    }
  }
,new Consumer<Exception>(){
    @Override public void consume(    Exception e){
      if (!(e instanceof ProcessCanceledException)) {
        LOG.error(e);
      }
    }
  }
,RECENT_COMMITS_COUNT);
  myContainingBranchesGetter=new ContainingBranchesGetter(this,this);
}
