{
  LinkedList<BasicBlock> stack=new LinkedList<BasicBlock>();
  HashSet<BasicBlock> setStacked=new HashSet<BasicBlock>();
  stack.add(graph.getFirst());
  setStacked.add(graph.getFirst());
  while (!stack.isEmpty()) {
    BasicBlock block=stack.removeFirst();
    List<BasicBlock> lstSuccs=new ArrayList<BasicBlock>(block.getSuccs());
    lstSuccs.addAll(block.getSuccExceptions());
    for (    BasicBlock succ : lstSuccs) {
      if (!setStacked.contains(succ)) {
        stack.add(succ);
        setStacked.add(succ);
      }
    }
  }
  HashSet<BasicBlock> setAllBlocks=new HashSet<BasicBlock>(graph.getBlocks());
  setAllBlocks.removeAll(setStacked);
  for (  BasicBlock block : setAllBlocks) {
    graph.removeBlock(block);
  }
}
