{
  if (!isScratch(file))   return null;
  Language language=ScratchFileServiceImpl.Substitutor.substituteLanguage(project,file);
  LanguageFileType fileType=language != null ? language.getAssociatedFileType() : null;
  if (fileType != null)   return fileType;
  return getOriginalFileTypeFromScratchName(file);
}
