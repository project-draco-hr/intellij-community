{
  int caretOffset=caretOffsetRef.get();
  if (!isApplicable(file,caretOffset)) {
    return Result.Continue;
  }
  int maxRBraceCount=getMaxRBraceCount(file,editor,caretOffset);
  if (maxRBraceCount > 0) {
    insertRBraces(file,editor,caretOffset,getRBraceOffset(file,editor,caretOffset),adjustRBraceCountForPosition(editor,caretOffset,maxRBraceCount));
    return Result.DefaultForceIndent;
  }
  return Result.Continue;
}
