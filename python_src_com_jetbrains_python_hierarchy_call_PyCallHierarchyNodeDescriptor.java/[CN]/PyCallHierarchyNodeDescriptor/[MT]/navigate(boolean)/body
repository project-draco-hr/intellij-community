{
  if (!myNavigateToReference) {
    if (myElement instanceof Navigatable && ((Navigatable)myElement).canNavigate()) {
      ((Navigatable)myElement).navigate(requestFocus);
    }
    return;
  }
  final PsiReference firstReference=myReferences.get(0);
  final PsiElement element=firstReference.getElement();
  if (element == null)   return;
  final PsiElement callElement=element.getParent();
  if (callElement instanceof Navigatable && ((Navigatable)callElement).canNavigate()) {
    ((Navigatable)callElement).navigate(requestFocus);
  }
 else {
    final PsiFile file=callElement.getContainingFile();
    if (file == null || file.getVirtualFile() == null)     return;
    FileEditorManager.getInstance(myProject).openFile(file.getVirtualFile(),requestFocus);
  }
  Editor editor=PsiUtilBase.findEditor(callElement);
  if (editor != null) {
    HighlightManager highlightManager=HighlightManager.getInstance(myProject);
    EditorColorsManager colorsManager=EditorColorsManager.getInstance();
    TextAttributes attributes=colorsManager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
    List<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
    for (    PsiReference reference : myReferences) {
      final PsiElement eachElement=reference.getElement();
      if (eachElement != null) {
        PsiElement eachCallElement=eachElement.getParent();
        if (eachCallElement != null) {
          final TextRange textRange=eachCallElement.getTextRange();
          highlightManager.addRangeHighlight(editor,textRange.getStartOffset(),textRange.getEndOffset(),attributes,false,highlighters);
        }
      }
    }
  }
}
