{
  EditorSettingsExternalizable.getInstance().setLineNumbersShown(state);
  Editor editor=CommonDataKeys.EDITOR.getData(e.getDataContext());
  if (editor != null && editor.getSettings().isLineNumbersShown() != state) {
    editor.getSettings().setLineNumbersShown(state);
  }
  EditorFactory.getInstance().refreshAllEditors();
}
