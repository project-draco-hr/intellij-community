{
  ExtensionPoint<Integer> extensionPoint=buildExtensionPoint();
  final boolean[] added=new boolean[1];
  extensionPoint.registerExtension(new Integer(123));
  assertFalse(added[0]);
  extensionPoint.addExtensionPointListener(new ExtensionPointListener<Integer>(){
    @Override public void extensionAdded(    @NotNull Integer extension,    final PluginDescriptor pluginDescriptor){
      added[0]=true;
    }
    @Override public void extensionRemoved(    @NotNull Integer extension,    final PluginDescriptor pluginDescriptor){
    }
  }
);
  assertTrue(added[0]);
}
