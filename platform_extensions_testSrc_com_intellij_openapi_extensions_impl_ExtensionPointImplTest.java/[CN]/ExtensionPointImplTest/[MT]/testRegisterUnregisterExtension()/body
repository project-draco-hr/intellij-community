{
  final AreaInstance area=new AreaInstance(){
  }
;
  final ExtensionPoint<Object> extensionPoint=new ExtensionPointImpl<Object>("an.extension.point",Object.class.getName(),ExtensionPoint.Kind.INTERFACE,buildExtensionArea(),area,new Extensions.SimpleLogProvider(),new UndefinedPluginDescriptor());
  final boolean[] flags=new boolean[2];
  Extension extension=new Extension(){
    @Override public void extensionAdded(    @NotNull ExtensionPoint extensionPoint1){
      assertSame(extensionPoint,extensionPoint1);
      assertSame(area,extensionPoint1.getArea());
      flags[0]=true;
    }
    @Override public void extensionRemoved(    @NotNull ExtensionPoint extensionPoint1){
      assertSame(extensionPoint,extensionPoint1);
      assertSame(area,extensionPoint1.getArea());
      flags[1]=true;
    }
  }
;
  extensionPoint.registerExtension(extension);
  assertTrue("Register call is missed",flags[0]);
  assertFalse(flags[1]);
  extensionPoint.unregisterExtension(extension);
  assertTrue("Unregister call is missed",flags[1]);
}
