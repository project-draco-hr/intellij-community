{
  Connection connection=null;
  int userVersion=0;
  try {
    Class.forName("org.sqlite.JDBC");
    connection=DriverManager.getConnection("jdbc:sqlite:" + FileUtil.toSystemIndependentName(myDbFile.getPath()));
    ResultSet resultSet=connection.createStatement().executeQuery("pragma user_version");
    if (resultSet.next()) {
      userVersion=resultSet.getInt(1);
    }
 else {
      LOG.info("No result while getting user version for " + myDbFile.getPath());
    }
  }
 catch (  ClassNotFoundException|SQLException e) {
    LOG.info(e);
  }
 finally {
    close(connection);
  }
  WorkingCopyFormat format=WorkingCopyFormat.getInstance(userVersion);
  return !WorkingCopyFormat.UNKNOWN.equals(format) ? format : null;
}
