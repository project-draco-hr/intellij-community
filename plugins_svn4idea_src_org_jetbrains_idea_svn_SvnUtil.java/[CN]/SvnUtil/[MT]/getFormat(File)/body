{
  WorkingCopyFormat result=null;
  File dbFile=resolveDatabase(path);
  if (dbFile != null) {
    result=FileUtilRt.doIOOperation(Registry.is("svn.use.sqlite.jdbc") ? new SqLiteJdbcWorkingCopyFormatOperation(dbFile) : new WorkingCopyFormatOperation(dbFile));
    if (result == null) {
      notifyDatabaseError();
    }
  }
  return result != null ? result : WorkingCopyFormat.UNKNOWN;
}
