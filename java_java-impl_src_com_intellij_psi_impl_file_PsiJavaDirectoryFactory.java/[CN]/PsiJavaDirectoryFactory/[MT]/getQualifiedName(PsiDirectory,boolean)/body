{
  final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (aPackage != null) {
    final String qualifiedName=aPackage.getQualifiedName();
    if (!qualifiedName.isEmpty())     return qualifiedName;
    if (presentable) {
      return PsiBundle.message("default.package.presentation") + " (" + directory.getVirtualFile().getPresentableUrl()+ ")";
    }
    return "";
  }
  return presentable ? StringUtil.notNullize(FileUtil.getLocationRelativeToUserHome(directory.getVirtualFile().getPresentableUrl()),"") : "";
}
