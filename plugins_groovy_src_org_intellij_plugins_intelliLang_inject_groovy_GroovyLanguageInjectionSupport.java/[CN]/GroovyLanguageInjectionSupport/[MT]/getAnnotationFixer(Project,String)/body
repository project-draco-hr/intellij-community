{
  return new Processor<PsiLanguageInjectionHost>(){
    @Override public boolean process(    @Nullable PsiLanguageInjectionHost host){
      if (host == null)       return false;
      final Configuration.AdvancedConfiguration configuration=Configuration.getProjectInstance(project).getAdvancedConfiguration();
      boolean allowed=configuration.isSourceModificationAllowed();
      configuration.setSourceModificationAllowed(true);
      try {
        return doInject(languageId,host,host);
      }
  finally {
        configuration.setSourceModificationAllowed(allowed);
      }
    }
  }
;
}
