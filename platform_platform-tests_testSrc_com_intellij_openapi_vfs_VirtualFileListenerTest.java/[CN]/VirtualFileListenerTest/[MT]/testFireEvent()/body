{
  VirtualFile dir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(myTempDir.newFolder("vDir"));
  assertNotNull(dir);
  dir.getChildren();
  Ref<Boolean> eventFired=Ref.create(false);
  VirtualFileManager.getInstance().addVirtualFileListener(new VirtualFileAdapter(){
    @Override public void fileCreated(    @NotNull VirtualFileEvent event){
      eventFired.set(true);
    }
  }
,getTestRootDisposable());
  new WriteAction(){
    @Override protected void run(    @NotNull Result result) throws IOException {
      dir.createChildData(this,"x.txt");
    }
  }
.execute();
  assertTrue(eventFired.get());
}
