{
  final VirtualFile vFile=toImport.getVirtualFile();
  if (vFile == null) {
    return ImportPriority.PROJECT;
  }
  final ProjectRootManager projectRootManager=ProjectRootManager.getInstance(toImport.getProject());
  if (projectRootManager.getFileIndex().isInContent(vFile)) {
    return ImportPriority.PROJECT;
  }
  Module module=ModuleUtil.findModuleForPsiElement(importLocation);
  Sdk pythonSdk=module != null ? PythonSdkType.findPythonSdk(module) : projectRootManager.getProjectSdk();
  if (pythonSdk != null) {
    final VirtualFile libDir=PyClassNameIndex.findLibDir(pythonSdk.getRootProvider().getFiles(OrderRootType.CLASSES));
    if (libDir != null && VfsUtil.isAncestor(libDir,vFile,false)) {
      return ImportPriority.BUILTIN;
    }
  }
  return ImportPriority.THIRD_PARTY;
}
