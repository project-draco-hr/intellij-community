{
  RemoteServer<SC> server=getServer();
  if (server == null) {
    return null;
  }
  ServerConnection<DC> connection=ServerConnectionManager.getInstance().getOrCreateConnection(server);
  final Semaphore semaphore=new Semaphore();
  semaphore.down();
  final Progressive progressive=new Progressive(){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      indicator.setIndeterminate(true);
      while (!indicator.isCanceled()) {
        if (semaphore.waitFor(500)) {
          break;
        }
      }
    }
  }
;
  Project project=getProject();
  Task task;
  if (myModal) {
    task=new Task.Modal(project,myTitle,myCancellable){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        progressive.run(indicator);
      }
    }
;
  }
 else {
    task=new Task.Backgroundable(project,myTitle,myCancellable){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        progressive.run(indicator);
      }
    }
;
  }
  AtomicReference<T> result=new AtomicReference<T>();
  run(connection,semaphore,result);
  task.queue();
  return result.get();
}
