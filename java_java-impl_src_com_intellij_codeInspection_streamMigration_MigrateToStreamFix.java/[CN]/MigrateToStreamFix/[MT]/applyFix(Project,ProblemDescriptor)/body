{
  PsiElement element=descriptor.getPsiElement();
  if (element instanceof PsiLoopStatement) {
    PsiLoopStatement loopStatement=(PsiLoopStatement)element;
    StreamSource source=StreamSource.tryCreate(loopStatement);
    PsiStatement body=loopStatement.getBody();
    if (body == null || source == null)     return;
    TerminalBlock tb=TerminalBlock.from(source,body);
    if (!FileModificationService.getInstance().preparePsiElementForWrite(loopStatement))     return;
    PsiElement result=migrate(project,loopStatement,body,tb);
    if (result != null) {
      source.cleanUpSource();
      simplifyAndFormat(project,result);
    }
  }
}
