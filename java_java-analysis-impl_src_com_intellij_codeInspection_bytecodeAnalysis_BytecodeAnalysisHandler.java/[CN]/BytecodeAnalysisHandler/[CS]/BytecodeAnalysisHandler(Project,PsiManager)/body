{
  super(project);
  myPsiManager=psiManager;
  StartupManager.getInstance(project).registerPostStartupActivity(new Runnable(){
    @Override public void run(){
      doIndex();
    }
  }
);
  final MessageBusConnection connection=myProject.getMessageBus().connect();
  connection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    @Override public void rootsChanged(    ModuleRootEvent event){
      doIndex();
    }
  }
);
  Enumerators enumerators;
  try {
    enumerators=new Enumerators(getEnumerator(project,"internalKeys"),getEnumerator(project,"signatures"));
  }
 catch (  IOException e) {
    LOG.error("Cannot initialize enumerators",e);
    enumerators=null;
  }
  myEnumerators=enumerators;
}
