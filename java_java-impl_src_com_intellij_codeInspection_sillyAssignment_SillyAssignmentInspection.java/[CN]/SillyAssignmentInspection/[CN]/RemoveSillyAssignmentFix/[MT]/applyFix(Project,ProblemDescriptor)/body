{
  final PsiElement element=descriptor.getPsiElement();
  if (!(element instanceof PsiReferenceExpression)) {
    return;
  }
  final PsiElement parent=PsiUtil.skipParenthesizedExprUp(element.getParent());
  if (parent instanceof PsiVariable) {
    element.delete();
  }
  if (!(parent instanceof PsiAssignmentExpression)) {
    return;
  }
  final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)parent;
  final PsiExpression lhs=assignmentExpression.getLExpression();
  final PsiExpression rhs=assignmentExpression.getRExpression();
  if (PsiTreeUtil.isAncestor(lhs,element,false)) {
    if (rhs != null) {
      assignmentExpression.replace(rhs);
    }
 else {
      assignmentExpression.delete();
    }
  }
 else {
    final PsiElement grandParent=assignmentExpression.getParent();
    if (grandParent instanceof PsiExpressionStatement) {
      grandParent.delete();
    }
 else {
      assignmentExpression.replace(element);
    }
  }
}
