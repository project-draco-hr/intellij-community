{
  boolean result;
  long deadline=System.currentTimeMillis() + timeout;
  while (!(result=runInReadActionWithWriteActionPriority(action,progressIndicator)) && (progressIndicator == null || !progressIndicator.isCanceled()) && System.currentTimeMillis() < deadline) {
    try {
      TimeUnit.MILLISECONDS.sleep(pauseBetweenRetries);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      return false;
    }
  }
  return result;
}
