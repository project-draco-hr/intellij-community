{
  final Object value=extractRawValue(selector,source);
  if (value == null) {
    return null;
  }
  if (!(cls.isInstance(value))) {
    throw new Exception(String.format("JsonPath expression '%s' should match %s. Got '%s' instead",selector.getPath(),JSON_TYPES.get(cls),value));
  }
  @SuppressWarnings("unchecked") T casted=(T)value;
  return casted;
}
