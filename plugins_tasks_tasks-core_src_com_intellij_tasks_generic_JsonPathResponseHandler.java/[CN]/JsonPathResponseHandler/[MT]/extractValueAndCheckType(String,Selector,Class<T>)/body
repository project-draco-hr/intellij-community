{
  if (selector == null || StringUtil.isEmpty(selector.getPath())) {
    return null;
  }
  Object value;
  try {
    value=JsonPath.read(source,selector.getPath());
  }
 catch (  InvalidPathException e) {
    throw new Exception(String.format("JsonPath expression '%s' is malformed or didn't match",selector.getPath()),e);
  }
  if (value == null) {
    return null;
  }
  if (!(cls.isInstance(value))) {
    throw new Exception(String.format("Selector '%s' should match %s. Got '%s' instead",selector.getName(),JSON_TYPES.get(cls),value.toString()));
  }
  return (T)value;
}
