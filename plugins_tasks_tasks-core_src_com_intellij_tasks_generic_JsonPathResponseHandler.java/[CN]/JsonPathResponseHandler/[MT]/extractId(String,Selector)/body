{
  Object rawId;
  try {
    rawId=JsonPath.read(task,idSelector.getPath());
  }
 catch (  InvalidPathException e) {
    throw new Exception(String.format("JsonPath expression '%s' is malformed or didn't match",idSelector.getPath()),e);
  }
  if (!(rawId instanceof String) && !(rawId instanceof Long)) {
    throw new Exception(String.format("Selector 'id' should match either JSON string or JSON number value. Got '%s' instead",rawId.toString()));
  }
  return String.valueOf(rawId);
}
