{
  LOG.assertTrue(!descriptor.isChooseMultiple());
  chooseFiles(descriptor,project,parent,toSelect,new Consumer<List<VirtualFile>>(){
    @Override public void consume(    List<VirtualFile> files){
      if (files.isEmpty()) {
        if (callback instanceof ChooseFileHandler) {
          ((ChooseFileHandler)callback).cancelled();
        }
 else {
          callback.consume(null);
        }
      }
 else {
        callback.consume(files.get(0));
      }
    }
  }
);
}
