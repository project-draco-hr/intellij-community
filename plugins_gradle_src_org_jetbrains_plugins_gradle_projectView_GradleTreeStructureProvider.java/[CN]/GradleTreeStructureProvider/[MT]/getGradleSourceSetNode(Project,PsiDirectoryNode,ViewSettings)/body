{
  PsiDirectory psiDirectory=directoryNode.getValue();
  if (psiDirectory == null)   return null;
  final VirtualFile virtualFile=psiDirectory.getVirtualFile();
  if (!ProjectRootsUtil.isModuleContentRoot(virtualFile,project))   return null;
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  final Module module=fileIndex.getModuleForFile(virtualFile);
  String sourceSetName=GradleProjectResolverUtil.getSourceSetName(module);
  if (sourceSetName == null)   return null;
  return new GradleSourceSetDirectoryNode(project,psiDirectory,settings,module,sourceSetName,directoryNode.getFilter());
}
