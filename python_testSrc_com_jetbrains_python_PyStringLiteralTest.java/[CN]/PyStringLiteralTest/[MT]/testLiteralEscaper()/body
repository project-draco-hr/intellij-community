{
  PyStringLiteralExpression expr=createLiteralFromText("'\\nfoo'");
  assertNotNull(expr);
  final LiteralTextEscaper<? extends PsiLanguageInjectionHost> escaper=expr.createLiteralTextEscaper();
  StringBuilder builder=new StringBuilder();
  escaper.decode(new TextRange(3,5),builder);
  assertEquals("fo",builder.toString());
  builder.setLength(0);
  escaper.decode(new TextRange(1,3),builder);
  assertEquals("\n",builder.toString());
  assertEquals(1,escaper.getOffsetInHost(0,new TextRange(1,5)));
  assertEquals(2,escaper.getOffsetInHost(1,new TextRange(1,5)));
  assertEquals(5,escaper.getOffsetInHost(4,new TextRange(1,5)));
}
