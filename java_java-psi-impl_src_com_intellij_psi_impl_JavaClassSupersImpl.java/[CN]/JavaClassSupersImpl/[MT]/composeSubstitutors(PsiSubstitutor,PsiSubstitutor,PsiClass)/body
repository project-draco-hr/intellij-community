{
  PsiSubstitutor answer=PsiSubstitutor.EMPTY;
  Map<PsiTypeParameter,PsiType> outerMap=outer.getSubstitutionMap();
  Map<PsiTypeParameter,PsiType> innerMap=inner.getSubstitutionMap();
  for (  PsiTypeParameter parameter : PsiUtil.typeParametersIterable(onClass)) {
    if (outerMap.containsKey(parameter) || innerMap.containsKey(parameter)) {
      answer=answer.put(parameter,outer.substitute(inner.substitute(parameter)));
    }
  }
  return answer;
}
