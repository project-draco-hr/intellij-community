{
  final ModuleRootListener rootListener=new ModuleRootAdapter(){
    public void rootsChanged(    ModuleRootEvent event){
      if (!myProject.isDisposed()) {
        checkToolWindowStatuses(myProject);
      }
    }
  }
;
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      if (!myProject.isDisposed()) {
        checkToolWindowStatuses(myProject);
        final MessageBusConnection connection=myProject.getMessageBus().connect(myProject);
        connection.subscribe(ProjectTopics.PROJECT_ROOTS,rootListener);
      }
    }
  }
);
}
