{
  final ModuleRootListener rootListener=new ModuleRootAdapter(){
    public void rootsChanged(    ModuleRootEvent event){
      DumbService.getInstance(myProject).smartInvokeLater(new Runnable(){
        public void run(){
          checkToolWindowStatuses();
        }
      }
);
    }
  }
;
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      checkToolWindowStatuses();
      final MessageBusConnection connection=myProject.getMessageBus().connect(myProject);
      connection.subscribe(ProjectTopics.PROJECT_ROOTS,rootListener);
    }
  }
);
}
