{
  if (target_dir != null) {
    for (    PsiElement dir_item : target_dir.getChildren()) {
      if (dir_item != source_file) {
        if (dir_item instanceof PsiDirectory) {
          final PsiDirectory dir=(PsiDirectory)dir_item;
          if (dir.findFile(PyNames.INIT_DOT_PY) != null) {
            final String name=dir.getName();
            if (PyNames.isIdentifier(name) && filter.value(name))             variants.add(name);
          }
        }
 else         if (dir_item instanceof PsiFile) {
          String filename=((PsiFile)dir_item).getName();
          if (!PyNames.INIT_DOT_PY.equals(filename) && filename.endsWith(PyNames.DOT_PY)) {
            final String name=filename.substring(0,filename.length() - PyNames.DOT_PY.length());
            if (PyNames.isIdentifier(name) && filter.value(name))             variants.add(name);
          }
        }
      }
    }
  }
}
