{
  final PsiDirectory subdir=dir.findSubdirectory(referencedName);
  if (subdir != null && (!checkForPackage || PyUtil.isPackage(subdir,containingFile))) {
    return ResolveResultList.to(subdir);
  }
  final PsiFile module=findPyFileInDir(dir,referencedName);
  if (module != null) {
    return ResolveResultList.to(module);
  }
  if (!isFileOnly) {
    final PsiFile initPy=dir.findFile(PyNames.INIT_DOT_PY);
    if (initPy == containingFile) {
      return Collections.emptyList();
    }
    if (initPy instanceof PyFile) {
      return ((PyFile)initPy).multiResolveName(referencedName);
    }
  }
  return Collections.emptyList();
}
