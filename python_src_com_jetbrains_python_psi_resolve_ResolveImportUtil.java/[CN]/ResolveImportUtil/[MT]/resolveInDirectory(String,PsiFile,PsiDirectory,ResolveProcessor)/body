{
  if (referencedName == null)   return null;
  final PsiFile file=dir.findFile(referencedName + PY_SUFFIX);
  if (file != null)   return file;
  final PsiDirectory subdir=dir.findSubdirectory(referencedName);
  if (subdir != null)   return subdir;
 else {
    final PsiFile initPy=dir.findFile(INIT_PY);
    if (initPy == containingFile)     return null;
    if (initPy != null) {
      if (processor == null)       processor=new ResolveProcessor(referencedName);
      return PyResolveUtil.treeCrawlUp(processor,true,initPy);
    }
  }
  return null;
}
