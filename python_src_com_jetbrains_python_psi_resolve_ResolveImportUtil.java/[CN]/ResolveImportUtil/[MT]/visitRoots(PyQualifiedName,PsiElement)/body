{
  PsiFile footholdFile=foothold.getContainingFile();
  boolean has_djando_facet=false;
  final Module source_module=ModuleUtil.findModuleForPsiElement(foothold);
  if (source_module != null) {
    has_djando_facet=FacetManager.getInstance(source_module).getFacetByType(DjangoFacetType.ID) != null;
  }
  ResolveInRootVisitor visitor;
  if (has_djando_facet) {
    visitor=new ResolveInRootAsTopPackageVisitor(moduleQualifiedName,foothold.getManager(),footholdFile,true);
  }
 else {
    visitor=new ResolveInRootVisitor(moduleQualifiedName,foothold.getManager(),footholdFile,true);
  }
  visitRoots(foothold,visitor);
  return visitor.results;
}
