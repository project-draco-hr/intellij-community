{
  final List<String> qName=import_element.getImportedQName();
  if (qName == null) {
    return null;
  }
  final PsiFile file=import_element.getContainingFile();
  final PsiElement grandparent=import_element.getParent();
  boolean absolute_import_enabled=isAbsoluteImportEnabledFor(import_element);
  List<String> moduleQName=null;
  if (grandparent instanceof PyFromImportStatement) {
    PsiElement imported_from_module;
    PyFromImportStatement from_import_statement=(PyFromImportStatement)grandparent;
    moduleQName=from_import_statement.getImportSourceQName();
    final int relative_level=from_import_statement.getRelativeLevel();
    if (relative_level > 0 && moduleQName == null) {
      return resolveChild(stepBackFrom(file,relative_level),qName.get(0),file,false);
    }
    if (moduleQName != null) {
      imported_from_module=resolveModule(moduleQName,file,absolute_import_enabled,relative_level);
      PsiElement result=resolveChild(imported_from_module,qName.get(0),file,false);
      if (result != null)       return result;
    }
  }
 else   if (grandparent instanceof PyImportStatement) {
    PsiElement result=resolveModule(qName,file,absolute_import_enabled,0);
    if (result != null)     return result;
  }
  if (moduleQName != null) {
    return resolveForeignImport(import_element,StringUtil.join(qName,"."),resolveModule(moduleQName,file,false,0));
  }
  return null;
}
