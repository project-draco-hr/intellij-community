{
  final File tempFile=File.createTempFile("fork","test");
  final String testOutputPath=tempFile.getAbsolutePath();
  final ProcessBuilder builder=new ProcessBuilder();
  builder.add(parameters);
  builder.add(JUnitForkedStarter.class.getName());
  builder.add(testOutputPath);
  builder.add(startIndex);
  builder.add(String.valueOf(isJUnit4));
  builder.add(description);
  builder.add(listeners);
  builder.setWorkingDir(workingDir);
  final Process exec=builder.createProcess();
  final int result=exec.waitFor();
  ForkedVMWrapper.readWrapped(testOutputPath,out.getPrintStream(),err.getPrintStream());
  return result;
}
