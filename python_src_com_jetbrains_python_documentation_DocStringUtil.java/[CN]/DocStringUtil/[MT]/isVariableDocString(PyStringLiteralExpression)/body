{
  final Module module=ModuleUtilCore.findModuleForPsiElement(expr);
  if (module == null)   return false;
  final PyDocumentationSettings settings=PyDocumentationSettings.getInstance(module);
  if (settings.isEpydocFormat(expr.getContainingFile()) || settings.isReSTFormat(expr.getContainingFile())) {
    final PsiElement parent=expr.getParent();
    if (!(parent instanceof PyExpressionStatement)) {
      return false;
    }
    PsiElement prevElement=parent.getPrevSibling();
    while (prevElement instanceof PsiWhiteSpace || prevElement instanceof PsiComment) {
      prevElement=prevElement.getPrevSibling();
    }
    if (prevElement instanceof PyAssignmentStatement) {
      if (expr.getText().contains("type:"))       return true;
      final PyAssignmentStatement assignmentStatement=(PyAssignmentStatement)prevElement;
      final ScopeOwner scope=PsiTreeUtil.getParentOfType(prevElement,ScopeOwner.class);
      if (scope instanceof PyClass || scope instanceof PyFile) {
        return true;
      }
      if (scope instanceof PyFunction) {
        for (        PyExpression target : assignmentStatement.getTargets()) {
          if (PyUtil.isInstanceAttribute(target)) {
            return true;
          }
        }
      }
    }
  }
  return false;
}
