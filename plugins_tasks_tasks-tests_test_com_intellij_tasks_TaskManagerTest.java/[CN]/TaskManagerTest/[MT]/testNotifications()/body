{
  final Ref<Notification> notificationRef=new Ref<Notification>();
  getProject().getMessageBus().connect(getTestRootDisposable()).subscribe(Notifications.TOPIC,new NotificationsAdapter(){
    @Override public void notify(    @NotNull Notification notification){
      notificationRef.set(notification);
    }
  }
);
  TestRepository repository=new TestRepository(){
    @Override public Task[] getIssues(    @Nullable String query,    int max,    long since) throws Exception {
      throw new Exception();
    }
  }
;
  myTaskManager.setRepositories(Collections.singletonList(repository));
  myTaskManager.updateIssues(null);
  assertNull(notificationRef.get());
  myTaskManager.getIssues("");
  assertNotNull(notificationRef.get());
}
