{
  if (PyConsoleUtil.detectIPythonEnd(text)) {
    myIsIPythonOutput=false;
    mySourceHighlighter=null;
  }
 else   if (PyConsoleUtil.detectIPythonStart(text)) {
    myIsIPythonOutput=true;
  }
 else {
    if (mySourceHighlighter == null || attributes == ProcessOutputTypes.STDERR) {
      if (myHyperlink) {
        printHyperlink(text,attributes);
      }
 else {
        print(text,outputTypeForAttributes(attributes));
      }
      myHyperlink=detectHyperlink(text,attributes);
      if (mySourceHighlighter == null && myIsIPythonOutput && PyConsoleUtil.detectSourcePrinting(text)) {
        mySourceHighlighter=new ConsoleSourceHighlighter(this,myScheme,myPyHighlighter);
      }
    }
 else {
      try {
        mySourceHighlighter.printHighlightedSource(text);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
}
