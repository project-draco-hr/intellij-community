{
  if (PyConsoleUtil.detectIPythonEnd(text)) {
    myIsIPythonOutput=false;
    mySourceHighlighter=null;
  }
 else   if (PyConsoleUtil.detectIPythonStart(text)) {
    myIsIPythonOutput=true;
  }
 else {
    if (mySourceHighlighter == null) {
      print(text,outputTypeForAttributes(attributes));
      if (myIsIPythonOutput && PyConsoleUtil.detectSourcePrinting(text)) {
        mySourceHighlighter=new ConsoleSourceHighlighter(this,myScheme,myPyHighlighter);
      }
    }
 else {
      try {
        mySourceHighlighter.printHighlightedSource(text);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
}
