{
  ProgressManager.getInstance().run(new Task.Backgroundable(null,"Executing code in console...",false){
    public void run(    @NotNull final ProgressIndicator indicator){
      while (!myExecuteActionHandler.isEnabled() || !myExecuteActionHandler.canExecuteNow()) {
        if (indicator.isCanceled()) {
          break;
        }
        try {
          Thread.sleep(300);
        }
 catch (        InterruptedException e) {
        }
      }
      if (!indicator.isCanceled()) {
        UIUtil.invokeLaterIfNeeded(new Runnable(){
          @Override public void run(){
            doExecute(code);
          }
        }
);
      }
    }
  }
);
}
