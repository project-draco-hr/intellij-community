{
  flushDeferredText();
  EditorEx viewer=getHistoryViewer();
  DocumentEx document=viewer.getDocument();
  RangeHighlighter highlighter=getHistoryViewer().getMarkupModel().addRangeHighlighter(document.getTextLength(),document.getTextLength(),0,null,HighlighterTargetArea.EXACT_RANGE);
  final String prompt;
  if (isMainPrompt) {
    prompt=myPromptView.getMainPrompt();
    print(prompt + " ",myPromptView.getPromptAttributes());
  }
 else {
    prompt=myPromptView.getIndentPrompt();
    print(prompt + " ",ConsoleViewContentType.USER_INPUT);
  }
  highlighter.putUserData(PyConsoleCopyHandler.PROMPT_LENGTH_MARKER,prompt.length() + 1);
}
