{
  final String forkMode=getForkMode();
  if (Comparing.strEqual(forkMode,"none")) {
    if (forkPerModule()) {
      if (isExecutorDisabledInForkedMode()) {
        final String actionName=UIUtil.removeMnemonic(executor.getStartActionText());
        throw new CantRunException("'" + actionName + "' is disabled when per-module working directory is configured.<br/>"+ "Please specify single working directory, or change test scope to single module.");
      }
    }
 else {
      return;
    }
  }
 else   if (isExecutorDisabledInForkedMode()) {
    final String actionName=executor.getActionName();
    throw new CantRunException(actionName + " is disabled in fork mode.<br/>Please change fork mode to &lt;none&gt; to " + actionName.toLowerCase(Locale.ENGLISH)+ ".");
  }
  final JavaParameters javaParameters=getJavaParameters();
  final Sdk jdk=javaParameters.getJdk();
  if (jdk == null) {
    throw new ExecutionException(ExecutionBundle.message("run.configuration.error.no.jdk.specified"));
  }
}
