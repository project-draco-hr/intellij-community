{
  for (  final CompilerOutputIndexFeature feature : CompilerOutputIndexFeature.values()) {
    final RegistryValue registryValue=feature.getRegistryValue();
    registryValue.addListener(new RegistryValueListener.Adapter(){
      @Override public void afterValueChanged(      final RegistryValue rawValue){
        final Collection<Class<? extends CompilerOutputBaseIndex>> requiredIndexes=feature.getRequiredIndexes();
        if (rawValue.asBoolean()) {
          if (myCurrentEnabledFeatures.add(feature)) {
            if (myCurrentEnabledFeatures.size() == 1) {
              doEnable();
            }
            addIndexes(requiredIndexes);
          }
        }
 else {
          removeIndexes(requiredIndexes);
          myCurrentEnabledFeatures.remove(feature);
        }
      }
    }
,myProject);
    if (registryValue.asBoolean()) {
      if (myCurrentEnabledFeatures.add(feature)) {
        if (myCurrentEnabledFeatures.size() == 1) {
          doEnable();
        }
        addIndexes(feature.getRequiredIndexes());
      }
    }
  }
}
