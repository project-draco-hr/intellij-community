{
  int myprec=getPrecedence();
  int exprprec=expr.getPrecedence();
  boolean parentheses=exprprec > myprec;
  if (!parentheses && eq) {
    parentheses=(exprprec == myprec);
    if (parentheses) {
      if (expr.type == Exprent.EXPRENT_FUNCTION && ((FunctionExprent)expr).getFunctype() == functype) {
        parentheses=!associativity.contains(functype);
      }
    }
  }
  TextBuffer res=expr.toJava(indent,tracer);
  if (parentheses) {
    res.enclose("(",")");
  }
  return res;
}
