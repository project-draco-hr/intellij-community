{
  if (!myTarget.isValid()) {
    return false;
  }
  final List<PsiReference> references=ourReferenceService.getReferences(element,new PsiReferenceService.Hints(myTarget,offsetInElement));
  for (int i=0; i < references.size(); i++) {
    PsiReference ref=references.get(i);
    ProgressManager.checkCanceled();
    if (ReferenceRange.containsOffsetInElement(ref,offsetInElement) && ref.isReferenceTo(myTarget) && !consumer.process(ref)) {
      return false;
    }
  }
  return true;
}
