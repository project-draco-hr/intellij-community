{
  substitutor=OverrideImplementUtil.correctSubstitutor(method,substitutor);
  PsiMethod methodToAdd=GenerateMembersUtil.substituteGenericMethod(method,substitutor);
  final PsiModifierList modifierList=methodToAdd.getModifierList();
  final NullableNotNullManager manager=NullableNotNullManager.getInstance(myProject);
  modifierList.setModifierProperty(PsiModifier.ABSTRACT,false);
  final PsiAnnotation nullable=manager.copyNullableAnnotation(method);
  if (nullable != null) {
    modifierList.addAfter(nullable,null);
  }
 else {
    final PsiAnnotation notNull=manager.copyNotNullAnnotation(method);
    if (notNull != null) {
      modifierList.addAfter(notNull,null);
    }
  }
  final String delegationBody=getDelegationBody(methodToAdd,delegationTarget);
  PsiCodeBlock newBody=myFactory.createCodeBlockFromText(delegationBody,method);
  PsiCodeBlock oldBody=methodToAdd.getBody();
  if (oldBody != null) {
    oldBody.replace(newBody);
  }
 else {
    methodToAdd.addBefore(newBody,null);
  }
  if (methodToAdd.getDocComment() != null)   methodToAdd.getDocComment().delete();
  methodToAdd=(PsiMethod)CodeStyleManager.getInstance(myProject).reformat(methodToAdd);
  methodToAdd=(PsiMethod)JavaCodeStyleManager.getInstance(myProject).shortenClassReferences(methodToAdd);
  return methodToAdd;
}
