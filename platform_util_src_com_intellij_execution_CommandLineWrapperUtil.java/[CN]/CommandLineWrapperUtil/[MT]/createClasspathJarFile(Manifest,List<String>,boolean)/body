{
  manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION,"1.0");
  StringBuilder classPath=new StringBuilder();
  for (  String path : pathList) {
    if (classPath.length() > 0)     classPath.append(' ');
    File classpathElement=new File(path);
    String url=(notEscape ? classpathElement.toURL() : classpathElement.toURI().toURL()).toString();
    classPath.append(url);
  }
  manifest.getMainAttributes().put(Attributes.Name.CLASS_PATH,classPath.toString());
  File jarFile=FileUtil.createTempFile("classpath",".jar",true);
  new JarOutputStream(new BufferedOutputStream(new FileOutputStream(jarFile)),manifest).close();
  return jarFile;
}
