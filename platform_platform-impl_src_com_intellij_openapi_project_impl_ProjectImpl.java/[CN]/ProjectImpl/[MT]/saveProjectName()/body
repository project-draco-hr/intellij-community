{
  if (isDefault()) {
    return;
  }
  IProjectStore stateStore=getStateStore();
  if (!stateStore.getStorageScheme().equals(StorageScheme.DIRECTORY_BASED)) {
    return;
  }
  String basePath=stateStore.getProjectBasePath();
  File baseDir=basePath == null ? null : new File(basePath);
  if (baseDir == null || !baseDir.isDirectory()) {
    return;
  }
  boolean update=false;
  if (myOldName != null && !myOldName.equals(myName)) {
    update=true;
  }
 else   if (!PathUtilRt.getFileName(basePath).equals(myName)) {
    return;
  }
  File ideaDir=new File(baseDir,DIRECTORY_STORE_FOLDER);
  if (ideaDir.isDirectory()) {
    File nameFile=new File(ideaDir,NAME_FILE);
    if (update) {
      FileUtil.writeToFile(nameFile,getName());
      myOldName=null;
      RecentProjectsManager.getInstance().clearNameCache();
    }
 else     if (nameFile.isFile()) {
      FileUtil.delete(nameFile);
    }
  }
}
