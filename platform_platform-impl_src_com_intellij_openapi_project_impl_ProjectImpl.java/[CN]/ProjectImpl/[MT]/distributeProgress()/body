{
  ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  if (indicator == null)   return;
  double toDistribute=1 - indicator.getFraction();
  ModuleManagerImpl moduleManager=(ModuleManagerImpl)ModuleManager.getInstance(this);
  int modulesCount=moduleManager.getModulePathsCount();
  EditorsSplitters splitters=((FileEditorManagerImpl)FileEditorManager.getInstance(this)).getMainSplitters();
  int editors=splitters.getEditorsCount();
  double modulesPart=(ourClassesAreLoaded || editors == 0) ? toDistribute : toDistribute * 0.5;
  if (modulesCount != 0) {
    double step=modulesPart / modulesCount;
    moduleManager.setProgressStep(step);
  }
  if (editors != 0) {
    splitters.setProgressStep(toDistribute - modulesPart / editors);
  }
}
