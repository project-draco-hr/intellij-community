{
  final Map<K,V> map=getMap();
  V value=map.get(getKey(key));
  if (value == null) {
    RecursionGuard.StackStamp stamp=ourGuard.markStack();
    value=create((K)key);
    if (stamp.mayCacheNow()) {
      map.put((K)getKey(key),value == null ? (V)NULL : value);
    }
  }
  return value == NULL ? null : value;
}
