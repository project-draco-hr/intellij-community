{
  final PsiType boxedType=boxedExpression.getType();
  if (boxedType == null) {
    return null;
  }
  final PsiType expressionType=unboxedExpression.getType();
  if (expressionType == null) {
    return null;
  }
  final PsiType unboxedType=PsiPrimitiveType.getUnboxedType(boxedType);
  if (unboxedType == null) {
    return null;
  }
  final String text=unboxedExpression.getText();
  if (expressionType.equals(unboxedType)) {
    final PsiElement parent=boxedExpression.getParent();
    if (parent instanceof PsiExpression && ParenthesesUtils.areParenthesesNeeded(unboxedExpression,(PsiExpression)parent,false)) {
      return '(' + text + ')';
    }
 else {
      return text;
    }
  }
  if (unboxedExpression instanceof PsiLiteralExpression) {
    if (unboxedType.equals(PsiType.LONG) && expressionType.equals(PsiType.INT)) {
      return text + 'L';
    }
 else     if (unboxedType.equals(PsiType.FLOAT) && (expressionType.equals(PsiType.INT) || (expressionType.equals(PsiType.DOUBLE)) && !StringUtil.endsWithIgnoreCase(text,"d"))) {
      return text + 'f';
    }
 else     if (unboxedType.equals(PsiType.DOUBLE) && expressionType.equals(PsiType.INT)) {
      return text + 'd';
    }
  }
  if (ParenthesesUtils.getPrecedence(unboxedExpression) > ParenthesesUtils.TYPE_CAST_PRECEDENCE) {
    return '(' + unboxedType.getCanonicalText() + ")("+ text+ ')';
  }
 else {
    return '(' + unboxedType.getCanonicalText() + ')'+ text;
  }
}
