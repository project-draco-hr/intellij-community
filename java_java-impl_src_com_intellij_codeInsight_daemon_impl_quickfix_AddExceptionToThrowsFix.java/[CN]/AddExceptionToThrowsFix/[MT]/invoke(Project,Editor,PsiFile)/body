{
  if (!FileModificationService.getInstance().prepareFileForWrite(file))   return;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final List<PsiClassType> exceptions=new ArrayList<PsiClassType>();
  final PsiMethod targetMethod=collectExceptions(exceptions);
  if (targetMethod == null)   return;
  Set<PsiClassType> unhandledExceptions=new THashSet<PsiClassType>(exceptions);
  addExceptionsToThrowsList(project,targetMethod,unhandledExceptions);
}
