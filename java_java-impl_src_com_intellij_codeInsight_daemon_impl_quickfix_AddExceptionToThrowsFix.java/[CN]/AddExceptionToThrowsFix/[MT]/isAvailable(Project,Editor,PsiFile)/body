{
  if (!(file instanceof PsiJavaFile))   return false;
  if (myWrongElement == null || !myWrongElement.isValid())   return false;
  PsiElement targetElement=null;
  PsiMethod targetMethod=null;
  final PsiElement psiElement=PsiTreeUtil.getParentOfType(myWrongElement,PsiLambdaExpression.class,PsiMethod.class);
  if (psiElement instanceof PsiLambdaExpression) {
    targetMethod=LambdaUtil.getFunctionalInterfaceMethod(psiElement);
    targetElement=((PsiLambdaExpression)psiElement).getBody();
  }
 else   if (psiElement instanceof PsiMethod) {
    targetMethod=(PsiMethod)psiElement;
    targetElement=psiElement;
  }
  if (targetElement == null || targetMethod == null || !targetMethod.getThrowsList().isPhysical())   return false;
  List<PsiClassType> unhandled=getUnhandledExceptions(myWrongElement,targetElement,targetMethod);
  if (unhandled == null || unhandled.isEmpty())   return false;
  setText(QuickFixBundle.message("add.exception.to.throws.text",unhandled.size()));
  return true;
}
