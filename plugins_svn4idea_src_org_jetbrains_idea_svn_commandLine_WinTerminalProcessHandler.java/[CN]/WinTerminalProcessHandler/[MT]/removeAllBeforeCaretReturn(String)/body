{
  int caretReturn=line.lastIndexOf("\r");
  while (caretReturn >= 0) {
    if (caretReturn + 1 < line.length() && line.charAt(caretReturn + 1) != '\n') {
      line=line.substring(caretReturn + 1);
      break;
    }
    caretReturn=line.lastIndexOf("\r",caretReturn - 1);
  }
  return line;
}
