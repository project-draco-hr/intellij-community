{
  return CachedValuesManager.getCachedValue(codeBlock,new CachedValueProvider<Map<PsiElement,ValuableInstructionVisitor.PlaceResult>>(){
    @Override public Result<Map<PsiElement,ValuableInstructionVisitor.PlaceResult>> compute(){
      final ValuableInstructionVisitor visitor=new ValuableInstructionVisitor();
      RunnerResult runnerResult=new ValuableDataFlowRunner().analyzeMethod(codeBlock,visitor);
      return Result.create(runnerResult == RunnerResult.OK ? visitor.myResults : null,codeBlock);
    }
  }
);
}
