{
  final MutableGraph graph=GraphTestUtils.getNewMutableGraph(inputGraph);
  FragmentManagerImpl fragmentManager=new FragmentManagerImpl(graph,new FragmentManagerImpl.CallBackFunction(){
    @Override public UpdateRequest runIntermediateUpdate(    @NotNull Node upNode,    @NotNull Node downNode){
      graph.updateVisibleRows();
      return UpdateRequest.ID_UpdateRequest;
    }
    @Override public void fullUpdate(){
      graph.updateVisibleRows();
    }
  }
);
  graph.setGraphDecorator(fragmentManager.getGraphDecorator());
  Node node=getCommitNode(graph,nodeRowIndex);
  GraphFragment fragment=fragmentManager.relateFragment(node);
  assertEquals(fragmentStr,toStr(fragment));
  if (fragment == null) {
    return;
  }
  String saveGraphStr=toStr(graph);
  assertTrue(fragment.isVisible());
  fragmentManager.hide(fragment);
  assertFalse(fragment.isVisible());
  assertEquals(hideGraphStr,toStr(graph));
  fragmentManager.show(fragment);
  assertTrue(fragment.isVisible());
  assertEquals(saveGraphStr,toStr(graph));
}
