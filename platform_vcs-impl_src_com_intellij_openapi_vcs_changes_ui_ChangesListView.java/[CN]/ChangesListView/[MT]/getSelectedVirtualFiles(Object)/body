{
  Set<VirtualFile> files=new HashSet<VirtualFile>();
  final TreePath[] paths=getSelectionPaths();
  if (paths != null) {
    for (    TreePath path : paths) {
      if (isUnderTag(path,tag)) {
        ChangesBrowserNode<?> node=(ChangesBrowserNode)path.getLastPathComponent();
        files.addAll(node.getAllFilesUnder());
      }
    }
  }
  return ContainerUtil.newArrayList(files);
}
