{
  final Sdk configuredJdk=ProjectJdkTable.getInstance().findJdk(jreHome);
  if (configuredJdk != null) {
    return configuredJdk;
  }
  final boolean isJdk=JavaSdk.checkForJdk(new File(jreHome));
  if (isJdk) {
    throw new CantRunException("Alternative JRE path needs to point to a JRE, not to a complete JDK installation");
  }
  final Sdk jdk=JavaSdk.getInstance().createJdk("",jreHome);
  if (jdk == null)   throw CantRunException.noJdkConfigured();
  return jdk;
}
