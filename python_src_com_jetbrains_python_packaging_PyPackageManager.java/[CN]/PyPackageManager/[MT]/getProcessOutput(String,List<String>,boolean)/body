{
  final SdkAdditionalData sdkData=mySdk.getSdkAdditionalData();
  if (sdkData instanceof PythonRemoteSdkAdditionalData) {
    final PythonRemoteSdkAdditionalData remoteSdkData=(PythonRemoteSdkAdditionalData)sdkData;
    final PythonRemoteInterpreterManager manager=PythonRemoteInterpreterManager.getInstance();
    if (manager != null) {
      final List<String> cmdline=new ArrayList<String>();
      cmdline.add(mySdk.getHomePath());
      cmdline.add(new RemoteFile(remoteSdkData.getPyCharmHelpersPath(),helper).getPath());
      cmdline.addAll(args);
      try {
        return manager.runRemoteProcess(null,remoteSdkData,ArrayUtil.toStringArray(cmdline));
      }
 catch (      PyRemoteInterpreterException e) {
        throw new PyExternalProcessException(ERROR_INVALID_SDK,helper,args,"Error running SDK");
      }
    }
 else {
      throw new PyExternalProcessException(ERROR_INVALID_SDK,helper,args,PythonRemoteInterpreterManager.WEB_DEPLOYMENT_PLUGIN_IS_DISABLED);
    }
  }
 else {
    final String homePath=mySdk.getHomePath();
    if (homePath == null) {
      throw new PyExternalProcessException(ERROR_INVALID_SDK,helper,args,"Cannot find interpreter for SDK");
    }
    final String helperPath=PythonHelpersLocator.getHelperPath(helper);
    if (helperPath == null) {
      throw new PyExternalProcessException(ERROR_TOOL_NOT_FOUND,helper,args,"Cannot find external tool");
    }
    final String parentDir=new File(homePath).getParent();
    final List<String> cmdline=new ArrayList<String>();
    cmdline.add(homePath);
    cmdline.add(helperPath);
    cmdline.addAll(args);
    final boolean canCreate=FileUtil.ensureCanCreateFile(new File(mySdk.getHomePath()));
    if (!canCreate && !SystemInfo.isWindows && askForSudo) {
      try {
        final ProcessOutput result=ExecUtil.sudoAndGetOutput(StringUtil.join(cmdline," "),"Please enter your password to uninstall system packages: ");
        if (result.getExitCode() != 0) {
          final String stdout=result.getStdout();
          String message=result.getStderr();
          if (message.trim().isEmpty()) {
            message=stdout;
          }
          throw new PyExternalProcessException(result.getExitCode(),helper,args,message);
        }
        return result;
      }
 catch (      InterruptedException e) {
        throw new PyExternalProcessException(ERROR_INTERRUPTED,helper,args,e.getMessage());
      }
catch (      ExecutionException e) {
        throw new PyExternalProcessException(ERROR_EXECUTION,helper,args,e.getMessage());
      }
catch (      ScriptException e) {
        throw new PyExternalProcessException(ERROR_TOOL_NOT_FOUND,helper,args,e.getMessage());
      }
catch (      IOException e) {
        throw new PyExternalProcessException(ERROR_ACCESS_DENIED,helper,args,e.getMessage());
      }
    }
 else     return PySdkUtil.getProcessOutput(parentDir,ArrayUtil.toStringArray(cmdline),TIMEOUT);
  }
}
