{
  List<Variable> list=filterAndSort(variables,context,true);
  if (list.isEmpty()) {
    if (defaultIsLast) {
      node.addChildren(XValueChildrenList.EMPTY,true);
    }
    return null;
  }
  int to=Math.min(maxChildrenToAdd,list.size());
  boolean isLast=to == list.size();
  node.addChildren(createVariablesList(list,0,to,context),defaultIsLast && isLast);
  if (isLast) {
    return null;
  }
 else {
    node.tooManyChildren(list.size() - to);
    return list;
  }
}
