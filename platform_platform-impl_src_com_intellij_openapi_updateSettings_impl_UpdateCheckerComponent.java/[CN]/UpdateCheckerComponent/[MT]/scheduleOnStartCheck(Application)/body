{
  if (!mySettings.CHECK_NEEDED || mySettings.SECURE_CONNECTION && !NetUtils.isSniEnabled()) {
    return;
  }
  app.getMessageBus().connect(app).subscribe(AppLifecycleListener.TOPIC,new AppLifecycleListener.Adapter(){
    @Override public void appFrameCreated(    String[] commandLineArgs,    @NotNull Ref<Boolean> willOpenProject){
      String currentBuild=ApplicationInfo.getInstance().getBuild().asString();
      long timeToNextCheck=mySettings.LAST_TIME_CHECKED + CHECK_INTERVAL - System.currentTimeMillis();
      if (StringUtil.compareVersionNumbers(mySettings.LAST_BUILD_CHECKED,currentBuild) < 0 || timeToNextCheck <= 0) {
        myCheckRunnable.run();
      }
 else {
        queueNextCheck(timeToNextCheck);
      }
    }
  }
);
}
