{
  ChannelStatus current=mySettings.getSelectedChannelStatus();
  LOG.info("channel: " + current.getCode());
  boolean eap=ApplicationInfoEx.getInstanceEx().isEAP();
  if (eap && current != ChannelStatus.EAP && UpdateStrategyCustomization.getInstance().forceEapUpdateChannelForEapBuilds()) {
    mySettings.setSelectedChannelStatus(ChannelStatus.EAP);
    LOG.info("channel forced to 'eap'");
    if (!ConfigImportHelper.isFirstSession()) {
      String title=IdeBundle.message("update.notifications.title");
      String message=IdeBundle.message("update.channel.enforced",ChannelStatus.EAP);
      notify(app,UpdateChecker.NOTIFICATIONS.createNotification(title,message,NotificationType.INFORMATION,null));
    }
  }
  if (!eap && current == ChannelStatus.EAP && ConfigImportHelper.isConfigImported()) {
    mySettings.setSelectedChannelStatus(ChannelStatus.RELEASE);
    LOG.info("channel set to 'release'");
  }
}
