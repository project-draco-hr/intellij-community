{
  CredentialsProvider provider=new BasicCredentialsProvider();
  if (isUseHttpAuthentication()) {
    provider.setCredentials(BASIC_AUTH_SCOPE,new UsernamePasswordCredentials(getUsername(),getPassword()));
  }
  HttpConfigurable proxySettings=HttpConfigurable.getInstance();
  if (isUseProxy() && proxySettings.PROXY_AUTHENTICATION) {
    provider.setCredentials(new AuthScope(proxySettings.PROXY_HOST,proxySettings.PROXY_PORT),new UsernamePasswordCredentials(proxySettings.PROXY_LOGIN,proxySettings.getPlainProxyPassword()));
  }
  return provider;
}
