{
  CredentialsProvider provider=new BasicCredentialsProvider();
  HttpConfigurable proxySettings=HttpConfigurable.getInstance();
  if (isUseHttpAuthentication()) {
    provider.setCredentials(AuthScope.ANY,new UsernamePasswordCredentials(getUsername(),getPassword()));
  }
  if (isUseProxy() && proxySettings.PROXY_AUTHENTICATION) {
    provider.setCredentials(new AuthScope(new HttpHost(proxySettings.PROXY_HOST)),new UsernamePasswordCredentials(proxySettings.PROXY_LOGIN,proxySettings.getPlainProxyPassword()));
  }
  return provider;
}
