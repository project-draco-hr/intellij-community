{
  CredentialsProvider provider=new BasicCredentialsProvider();
  if (isUseHttpAuthentication()) {
    provider.setCredentials(BASIC_AUTH_SCOPE,new UsernamePasswordCredentials(getUsername(),getPassword()));
  }
  if (isUseProxy()) {
    IdeHttpClientHelpers.ApacheHttpClient4.setProxyCredentialsForUrlIfEnabled(provider,getUrl());
  }
  return provider;
}
