{
  final MethodNodeBase<M> parentNode=getCalleeNode(node);
  final MethodNodeBase<M> callerNode=getCallerNode(node);
  final String callerText=node != myRoot ? getText(callerNode.getMethod()) : getEmptyCallerText();
  final Document callerDocument=myCallerEditor.getDocument();
  final String calleeText=node != myRoot ? getText(parentNode.getMethod()) : getEmptyCalleeText();
  final Document calleeDocument=myCalleeEditor.getDocument();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      callerDocument.setText(callerText);
      calleeDocument.setText(calleeText);
    }
  }
);
  final M caller=callerNode.getMethod();
  final PsiElement callee=parentNode != null ? parentNode.getElementToSearch() : null;
  if (caller != null && caller.isPhysical() && callee != null) {
    HighlightManager highlighter=HighlightManager.getInstance(myProject);
    EditorColorsManager colorManager=EditorColorsManager.getInstance();
    TextAttributes attributes=colorManager.getGlobalScheme().getAttributes(EditorColors.TEXT_SEARCH_RESULT_ATTRIBUTES);
    int start=getStartOffset(caller);
    for (    PsiElement element : findElementsToHighlight(caller,callee)) {
      highlighter.addRangeHighlight(myCallerEditor,element.getTextRange().getStartOffset() - start,element.getTextRange().getEndOffset() - start,attributes,false,null);
    }
  }
}
