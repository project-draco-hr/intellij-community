{
  new WriteAction(){
    protected void run(    final Result result){
      CompilerWorkspaceConfiguration.getInstance(project).USE_OUT_OF_PROCESS_BUILD=true;
      project.getMessageBus().syncPublisher(ExternalBuildOptionListener.TOPIC).externalBuildOptionChanged(true);
      ApplicationManagerEx.getApplicationEx().doNotSave(false);
      JavaAwareProjectJdkTableImpl table=JavaAwareProjectJdkTableImpl.getInstanceEx();
      table.addJdk(table.getInternalJdk());
    }
  }
.execute();
}
