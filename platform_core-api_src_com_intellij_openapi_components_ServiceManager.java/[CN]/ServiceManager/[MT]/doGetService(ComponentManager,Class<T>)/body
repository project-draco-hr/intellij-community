{
  PicoContainer picoContainer=componentManager.getPicoContainer();
  @SuppressWarnings("unchecked") T instance=(T)picoContainer.getComponentInstance(serviceClass.getName());
  if (instance == null) {
    instance=componentManager.getComponent(serviceClass);
    if (instance != null) {
      Application app=ApplicationManager.getApplication();
      String message=serviceClass.getName() + " requested as a service, but it is a component - convert it to a service or change call to " + (componentManager == app ? "ApplicationManager.getApplication().getComponent()" : "project.getComponent()");
      if (app.isUnitTestMode()) {
        LOG.error(message);
      }
 else {
        LOG.warn(message);
      }
    }
  }
  return instance;
}
