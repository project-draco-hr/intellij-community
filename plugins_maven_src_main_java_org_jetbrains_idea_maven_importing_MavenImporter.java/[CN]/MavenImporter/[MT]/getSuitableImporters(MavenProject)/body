{
  List<MavenImporter> result=null;
  Set<ModuleType> moduleTypes=null;
  for (  MavenImporter importer : EXTENSION_POINT_NAME.getExtensions()) {
    if (importer.isApplicable(p)) {
      if (result == null) {
        result=new ArrayList<MavenImporter>();
        moduleTypes=new THashSet<ModuleType>();
      }
      result.add(importer);
      moduleTypes.add(importer.getModuleType());
    }
  }
  if (result == null) {
    return Collections.emptyList();
  }
  if (moduleTypes.size() <= 1) {
    return result;
  }
  ModuleType moduleType=result.get(0).getModuleType();
  List<String> supportedPackagings=new ArrayList<String>();
  for (  MavenImporter importer : result) {
    supportedPackagings.clear();
    importer.getSupportedPackagings(supportedPackagings);
    if (supportedPackagings.contains(p.getPackaging())) {
      moduleType=importer.getModuleType();
      break;
    }
  }
  final ModuleType finalModuleType=moduleType;
  return ContainerUtil.filter(result,new Condition<MavenImporter>(){
    public boolean value(    final MavenImporter importer){
      return importer.getModuleType() == finalModuleType;
    }
  }
);
}
