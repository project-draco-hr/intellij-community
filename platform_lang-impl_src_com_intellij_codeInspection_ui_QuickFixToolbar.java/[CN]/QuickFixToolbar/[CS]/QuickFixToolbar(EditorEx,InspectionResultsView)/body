{
  myFoldings=editor == null ? null : new ProblemPreviewEditorFoldings(editor);
  myView=view;
  myWrapper=view.getTree().getSelectedToolWrapper();
  LOG.assertTrue(myWrapper != null);
  CommonProblemDescriptor[] descriptors=myView.getTree().getSelectedDescriptors();
  int problemCount=descriptors.length;
  setLayout(new FlowLayout(FlowLayout.LEFT,0,0));
  if (view.isUpdating() && !areDescriptorNodesSelected()) {
    setBorder(IdeBorderFactory.createEmptyBorder(16,9,13,0));
    AsyncProcessIcon waitingIcon=new AsyncProcessIcon("Inspection preview panel updating...");
    Disposer.register(this,waitingIcon);
    myWaitingLabel=getLabel(problemCount);
    add(myWaitingLabel);
    add(waitingIcon);
  }
 else {
    setBorder(IdeBorderFactory.createEmptyBorder(2,8,0,0));
    QuickFixAction[] fixes=view.getProvider().getQuickFixes(myWrapper,view.getTree());
    fillPanel(fixes,descriptors);
  }
}
