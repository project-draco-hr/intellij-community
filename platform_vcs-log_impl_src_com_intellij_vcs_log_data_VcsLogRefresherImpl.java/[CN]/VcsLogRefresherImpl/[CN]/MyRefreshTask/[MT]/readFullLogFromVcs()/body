{
  final StopWatch sw=StopWatch.start("read full log from VCS");
  final Collection<List<? extends TimedVcsCommit>> commits=ContainerUtil.newArrayList();
  new ProviderIterator(){
    @Override void each(    @NotNull VirtualFile root,    @NotNull VcsLogProvider provider) throws VcsException {
      commits.add(provider.readAllHashes(root,new Consumer<VcsUser>(){
        @Override public void consume(        @NotNull VcsUser user){
          myUserRegistry.addUser(user);
        }
      }
));
      sw.rootCompleted(root);
    }
  }
.iterate(myProviders);
  sw.report();
  return commits;
}
