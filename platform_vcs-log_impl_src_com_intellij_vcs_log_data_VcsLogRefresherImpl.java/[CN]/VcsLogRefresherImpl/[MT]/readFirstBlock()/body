{
  try {
    Map<VirtualFile,Collection<VcsRef>> refs=loadRefsFromVcs(myProviders);
    Set<VirtualFile> roots=myProviders.keySet();
    Map<VirtualFile,VcsLogProvider.Requirements> requirements=prepareSimpleRequirements(roots,myRecentCommitCount);
    Map<VirtualFile,List<? extends GraphCommit<Integer>>> commits=loadRecentCommitsFromVcs(myProviders,requirements,myUserRegistry,myTopCommitsDetailsCache,myHashMap);
    List<? extends GraphCommit<Integer>> compoundLog=compound(commits.values());
    DataPack dataPack=DataPack.build(compoundLog,new RefsModel(refs,myHashMap.asIndexGetter()),myHashMap.asIndexGetter(),myHashMap.asHashGetter(),myProviders,false);
    mySingleTaskController.request(RefreshRequest.RELOAD_ALL);
    return dataPack;
  }
 catch (  VcsException e) {
    myExceptionHandler.consume(e);
    return EmptyDataPack.getInstance();
  }
}
