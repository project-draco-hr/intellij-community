{
  if (!ui.getFilterUi().getFilters().getDetailsFilters().isEmpty()) {
    e.getPresentation().setEnabled(false);
  }
  if (ui.getBekType() == PermanentGraph.SortType.LinearBek) {
    e.getPresentation().setIcon(VcsLogIcons.CollapseMerges);
    e.getPresentation().setText("Collapse all merges");
    e.getPresentation().setDescription("Collapse all merges");
  }
 else {
    e.getPresentation().setIcon(VcsLogIcons.CollapseBranches);
    e.getPresentation().setText("Collapse all linear branches");
    e.getPresentation().setDescription("Collapse all linear branches");
  }
}
