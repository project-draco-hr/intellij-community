{
  if (containsWriteAccess(refs)) {
    if (expression instanceof GrReferenceExpression) {
      final PsiElement resolved=((GrReferenceExpression)expression).resolve();
      if (resolved instanceof GrVariable && !(resolved instanceof PsiField)) {
        final boolean isFinal=((GrVariable)resolved).hasModifierProperty(PsiModifier.FINAL);
        if (!isFinal) {
          final PsiReference lastRef=Collections.max(ReferencesSearch.search(resolved).findAll(),new Comparator<PsiReference>(){
            @Override public int compare(            PsiReference o1,            PsiReference o2){
              return o1.getElement().getTextRange().getStartOffset() - o2.getElement().getTextRange().getStartOffset();
            }
          }
);
          return lastRef.getElement() == expression;
        }
      }
    }
    return false;
  }
  return true;
}
