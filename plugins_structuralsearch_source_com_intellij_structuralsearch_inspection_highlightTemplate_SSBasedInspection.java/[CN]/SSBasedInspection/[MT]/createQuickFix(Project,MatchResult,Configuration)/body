{
  if (!(configuration instanceof ReplaceConfiguration))   return null;
  ReplaceConfiguration replaceConfiguration=(ReplaceConfiguration)configuration;
  final Replacer replacer=new Replacer(project,replaceConfiguration.getOptions());
  final ReplacementInfo replacementInfo=replacer.buildReplacement(matchResult);
  return new LocalQuickFix(){
    @NotNull public String getName(){
      return SSRBundle.message("SSRInspection.replace.with",replacementInfo.getReplacement());
    }
    public void applyFix(    @NotNull Project project,    @NotNull ProblemDescriptor descriptor){
      PsiElement element=descriptor.getPsiElement();
      if (element != null && FileModificationService.getInstance().preparePsiElementsForWrite(element)) {
        replacer.replace(replacementInfo);
      }
    }
    @NotNull public String getFamilyName(){
      return SSRBundle.message("SSRInspection.family.name");
    }
  }
;
}
