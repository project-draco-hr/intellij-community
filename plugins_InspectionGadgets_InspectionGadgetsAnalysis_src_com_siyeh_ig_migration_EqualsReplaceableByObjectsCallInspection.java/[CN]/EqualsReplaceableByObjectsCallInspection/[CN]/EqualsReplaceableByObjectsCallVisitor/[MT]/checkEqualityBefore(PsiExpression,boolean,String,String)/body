{
  final PsiElement parent=PsiTreeUtil.skipParentsOfType(expression,PsiParenthesizedExpression.class);
  if (parent instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)parent;
    final IElementType tokenType=binaryExpression.getOperationTokenType();
    if (equal && JavaTokenType.OROR.equals(tokenType) || !equal && JavaTokenType.ANDAND.equals(tokenType)) {
      if (PsiTreeUtil.isAncestor(binaryExpression.getROperand(),expression,false)) {
        final PsiExpression lhs=binaryExpression.getLOperand();
        if (isEquality(lhs,equal,qualifiedName1,qualifiedName2)) {
          return binaryExpression;
        }
      }
    }
  }
  return expression;
}
