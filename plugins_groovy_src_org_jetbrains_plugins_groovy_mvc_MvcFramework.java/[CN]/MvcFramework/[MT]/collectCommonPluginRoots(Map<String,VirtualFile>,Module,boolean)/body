{
  if (isCommonPluginsModule(module)) {
    for (    VirtualFile root : ModuleRootManager.getInstance(module).getContentRoots()) {
      String pluginName=getInstalledPluginNameByPath(module.getProject(),root);
      if (pluginName != null) {
        result.put(pluginName,root);
      }
    }
  }
 else {
    VirtualFile root=findAppRoot(module);
    if (root == null)     return;
    extractPlugins(module.getProject(),root.findChild(MvcModuleStructureUtil.PLUGINS_DIRECTORY),false,result);
    extractPlugins(module.getProject(),MvcModuleStructureUtil.findFile(getCommonPluginsDir(module),refresh),refresh,result);
    extractPlugins(module.getProject(),MvcModuleStructureUtil.findFile(getGlobalPluginsDir(module),refresh),refresh,result);
  }
}
