{
  if (myTokenEndOffset == myBufferEndOffset) {
    myTokenType=null;
    myBufferIndex=myBufferEndOffset;
    return;
  }
  myBufferIndex=myTokenEndOffset;
  final char c=myBufferArray != null ? myBufferArray[myBufferIndex] : myBuffer.charAt(myBufferIndex);
switch (c) {
case ' ':
case '\t':
case '\n':
case '\r':
case '\f':
    myTokenType=TokenType.WHITE_SPACE;
  myTokenEndOffset=getWhitespaces(myBufferIndex + 1);
break;
case '/':
if (myBufferIndex + 1 >= myBufferEndOffset) {
myTokenType=JavaTokenType.DIV;
myTokenEndOffset=myBufferEndOffset;
}
 else {
char nextChar=myBufferArray != null ? myBufferArray[myBufferIndex + 1] : myBuffer.charAt(myBufferIndex + 1);
if (nextChar == '/') {
  myTokenType=JavaTokenType.END_OF_LINE_COMMENT;
  myTokenEndOffset=getLineTerminator(myBufferIndex + 2);
}
 else if (nextChar == '*') {
  if (myBufferIndex + 2 >= myBufferEndOffset || (myBufferArray != null ? myBufferArray[myBufferIndex + 2] : myBuffer.charAt(myBufferIndex + 2)) != '*' || (myBufferIndex + 3 < myBufferEndOffset && (myBufferArray != null ? myBufferArray[myBufferIndex + 3] : myBuffer.charAt(myBufferIndex + 3)) == '/')) {
    myTokenType=JavaTokenType.C_STYLE_COMMENT;
    myTokenEndOffset=getClosingComment(myBufferIndex + 2);
  }
 else {
    myTokenType=JavaDocElementType.DOC_COMMENT;
    myTokenEndOffset=getClosingComment(myBufferIndex + 3);
  }
}
 else {
  flexLocateToken();
}
}
break;
case '"':
case '\'':
myTokenType=c == '"' ? JavaTokenType.STRING_LITERAL : JavaTokenType.CHARACTER_LITERAL;
myTokenEndOffset=getClosingParenthesis(myBufferIndex + 1,c);
break;
default :
flexLocateToken();
}
if (myTokenEndOffset > myBufferEndOffset) {
myTokenEndOffset=myBufferEndOffset;
}
}
