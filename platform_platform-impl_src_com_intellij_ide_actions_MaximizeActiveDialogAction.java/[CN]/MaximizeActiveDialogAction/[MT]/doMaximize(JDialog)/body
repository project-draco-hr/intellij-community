{
  JRootPane rootPane=dialog != null ? dialog.getRootPane() : null;
  if (rootPane == null)   return;
  Rectangle screenRectangle=ScreenUtil.getScreenRectangle(dialog);
  if (dialog.getBounds().equals(screenRectangle)) {
    Object value=rootPane.getClientProperty("NORMAL_BOUNDS");
    if (value instanceof Rectangle) {
      Rectangle bounds=(Rectangle)value;
      ScreenUtil.fitToScreen(bounds);
      dialog.setBounds(bounds);
      rootPane.putClientProperty("NORMAL_BOUNDS",null);
    }
  }
 else {
    rootPane.putClientProperty("NORMAL_BOUNDS",dialog.getBounds());
    dialog.setBounds(screenRectangle);
  }
}
