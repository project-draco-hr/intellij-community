{
  if (myStack.isEmpty())   return;
  Block current=myStack.peek();
  TextRange range=current.getTextRange();
  int currentStartOffset=range.getStartOffset();
  int currentEndOffset=range.getEndOffset();
  if (currentStartOffset < lineStartOffset) {
    myStack.pop();
    if (currentEndOffset > lineStartOffset) {
      pushAll(current);
    }
    popUntilTopBlockStartOffsetGreaterOrEqual(lineStartOffset);
  }
}
