{
  if (myKey != state.getKey()) {
    myKey=state.getKey();
    myCache.clear();
  }
  final SoftReference<Pair<R,State>> ref=myCache.get(state.getPos());
  final Pair<R,State> cached=SoftReference.dereference(ref);
  if (cached != null) {
    return cached;
  }
  final Pair<R,State> result=myParser.parse(tokens,state);
  myCache.put(state.getPos(),new SoftReference<Pair<R,State>>(result));
  return result;
}
