{
  JavaParametersUtil.checkAlternativeJRE(getConfiguration());
  ProgramParametersUtil.checkWorkingDirectoryExist(getConfiguration(),getConfiguration().getProject(),getConfiguration().getConfigurationModule().getModule());
  final String category=getConfiguration().getPersistentData().getCategory();
  if (category == null || category.isEmpty()) {
    throw new RuntimeConfigurationError("Category is not specified");
  }
  final JavaRunConfigurationModule configurationModule=getConfiguration().getConfigurationModule();
  if (getSourceScope() == null) {
    configurationModule.checkForWarning();
  }
  final Module module=configurationModule.getModule();
  if (module != null) {
    final PsiClass psiClass=JavaExecutionUtil.findMainClass(getConfiguration().getProject(),category,GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module));
    if (psiClass == null) {
      throw new RuntimeConfigurationWarning(ExecutionBundle.message("class.not.found.in.module.error.message",category,configurationModule.getModuleName()));
    }
  }
}
