{
  final String name=psi.getName();
  final PyExpression assignedValue=psi.findAssignedValue();
  final String docString=DocStringUtil.getDocStringValue(psi);
  final String typeComment=psi.getTypeCommentAnnotation();
  for (  CustomTargetExpressionStubType customStubType : getCustomStubTypes()) {
    CustomTargetExpressionStub customStub=customStubType.createStub(psi);
    if (customStub != null) {
      return new PyTargetExpressionStubImpl(name,docString,typeComment,customStub,parentStub);
    }
  }
  PyTargetExpressionStub.InitializerType initializerType=PyTargetExpressionStub.InitializerType.Other;
  QualifiedName initializer=null;
  if (assignedValue instanceof PyReferenceExpression) {
    initializerType=PyTargetExpressionStub.InitializerType.ReferenceExpression;
    initializer=((PyReferenceExpression)assignedValue).asQualifiedName();
  }
 else   if (assignedValue instanceof PyCallExpression) {
    initializerType=PyTargetExpressionStub.InitializerType.CallExpression;
    final PyExpression callee=((PyCallExpression)assignedValue).getCallee();
    if (callee instanceof PyReferenceExpression) {
      initializer=((PyReferenceExpression)callee).asQualifiedName();
    }
  }
  return new PyTargetExpressionStubImpl(name,docString,initializerType,initializer,psi.isQualified(),typeComment,parentStub);
}
