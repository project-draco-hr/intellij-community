{
  final boolean noBorder=c.getClientProperty("JTextField.Search.noBorderRing") == Boolean.TRUE;
  int radius=r.height - 1;
  if (noBorder) {
    g.setColor(c.getBackground());
    RectanglePainter.FILL.paint(g,r.x,r.y,r.width,r.height,radius);
  }
 else   if (c.hasFocus()) {
    g.setColor(c.getBackground());
    RectanglePainter.FILL.paint(g,r.x,r.y,r.width,r.height,radius);
    DarculaUIUtil.paintSearchFocusRing(g,r,c);
  }
 else {
    RectanglePainter.paint(g,r.x,r.y,r.width,r.height,radius,c.getBackground(),c.isEnabled() ? Gray._100 : Gray._83);
  }
  Point p=getSearchIconCoord();
  Icon searchIcon=myTextField.getClientProperty("JTextField.Search.FindPopup") instanceof JPopupMenu ? UIManager.getIcon("TextField.darcula.searchWithHistory.icon") : UIManager.getIcon("TextField.darcula.search.icon");
  if (searchIcon == null) {
    searchIcon=IconLoader.findIcon("/com/intellij/ide/ui/laf/icons/search.png",DarculaTextFieldUI.class,true);
  }
  searchIcon.paintIcon(null,g,p.x,p.y);
  if (hasText()) {
    p=getClearIconCoord();
    Icon clearIcon=UIManager.getIcon("TextField.darcula.clear.icon");
    if (clearIcon == null) {
      clearIcon=IconLoader.findIcon("/com/intellij/ide/ui/laf/icons/clear.png",DarculaTextFieldUI.class,true);
    }
    clearIcon.paintIcon(null,g,p.x,p.y);
  }
}
