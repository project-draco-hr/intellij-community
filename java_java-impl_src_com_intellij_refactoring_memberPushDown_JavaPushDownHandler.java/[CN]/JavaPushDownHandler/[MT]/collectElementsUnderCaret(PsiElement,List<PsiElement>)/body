{
  while (true) {
    if (element == null || element instanceof PsiFile) {
      return RefactoringBundle.getCannotRefactorMessage(RefactoringBundle.message("the.caret.should.be.positioned.inside.a.class.to.push.members.from"));
    }
    if (element instanceof PsiClass && ((PsiClass)element).getQualifiedName() != null || element instanceof PsiField || element instanceof PsiMethod) {
      if (element instanceof JspClass) {
        return RefactoringBundle.getCannotRefactorMessage(RefactoringBundle.message("refactoring.is.not.supported.for.jsp.classes"));
      }
      elements.add(element);
      return null;
    }
    element=element.getParent();
  }
}
