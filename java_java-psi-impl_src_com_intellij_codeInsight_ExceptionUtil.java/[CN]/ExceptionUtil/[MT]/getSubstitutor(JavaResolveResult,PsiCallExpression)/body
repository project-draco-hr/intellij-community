{
  final PsiLambdaExpression expression=PsiTreeUtil.getParentOfType(methodCall,PsiLambdaExpression.class);
  final PsiSubstitutor substitutor;
  if (expression != null) {
    substitutor=ourThrowsGuard.doPreventingRecursion(expression,false,new Computable<PsiSubstitutor>(){
      @Override public PsiSubstitutor compute(){
        return result.getSubstitutor();
      }
    }
);
  }
 else {
    substitutor=result.getSubstitutor();
  }
  return substitutor == null ? ((MethodCandidateInfo)result).getSiteSubstitutor() : substitutor;
}
