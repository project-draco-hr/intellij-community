{
  PsiMethod method=PsiUtil.getResourceCloserMethod(resource);
  if (method != null) {
    PsiClass closerClass=method.getContainingClass();
    if (closerClass != null) {
      PsiClassType.ClassResolveResult resourceType=PsiUtil.resolveGenericsClassInType(resource.getType());
      if (resourceType != null) {
        PsiClass resourceClass=resourceType.getElement();
        if (resourceClass != null) {
          PsiSubstitutor substitutor=TypeConversionUtil.getClassSubstitutor(closerClass,resourceClass,resourceType.getSubstitutor());
          if (substitutor != null) {
            return pair(method,substitutor);
          }
        }
      }
    }
  }
  return null;
}
