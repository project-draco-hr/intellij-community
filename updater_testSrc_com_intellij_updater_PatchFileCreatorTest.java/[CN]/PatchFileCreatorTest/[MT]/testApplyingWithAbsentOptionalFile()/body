{
  FileUtil.writeToFile(new File(myNewerDir,"bin/idea.bat"),"new content".getBytes());
  PatchFileCreator.create(myOlderDir,myNewerDir,myFile,Collections.<String>emptyList(),Collections.<String>emptyList(),Collections.singletonList("bin/idea.bat"),TEST_UI);
  new File(myOlderDir,"bin/idea.bat").delete();
  PatchFileCreator.PreparationResult preparationResult=PatchFileCreator.prepareAndValidate(myFile,myOlderDir,TEST_UI);
  assertTrue(preparationResult.validationResults.isEmpty());
  assertAppliedAndRevertedCorrectly(preparationResult);
}
