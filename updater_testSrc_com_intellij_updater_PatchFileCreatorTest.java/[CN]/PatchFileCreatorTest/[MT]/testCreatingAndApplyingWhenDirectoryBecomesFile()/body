{
  File file=new File(myOlderDir,"Readme.txt");
  file.delete();
  file.mkdirs();
  new File(file,"subFile.txt").createNewFile();
  new File(file,"subDir").mkdir();
  new File(file,"subDir/subFile.txt").createNewFile();
  FileUtil.copy(new File(myOlderDir,"lib/boot.jar"),new File(myOlderDir,"lib/boot_with_directory_becomes_file.jar"));
  Patch patch=PatchFileCreator.create(myPatchSpec,myFile,TEST_UI);
  assertAppliedAndRevertedCorrectly(patch,PatchFileCreator.prepareAndValidate(myFile,myOlderDir,TEST_UI));
}
