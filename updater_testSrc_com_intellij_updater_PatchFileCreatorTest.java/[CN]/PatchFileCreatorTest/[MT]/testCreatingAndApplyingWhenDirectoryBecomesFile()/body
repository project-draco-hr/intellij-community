{
  File file=new File(myOlderDir,"Readme.txt");
  file.delete();
  file.mkdirs();
  new File(file,"subFile.txt").createNewFile();
  new File(file,"subDir").mkdir();
  new File(file,"subDir/subFile.txt").createNewFile();
  FileUtil.copy(new File(myOlderDir,"lib/boot.jar"),new File(myOlderDir,"lib/boot_with_directory_becomes_file.jar"));
  PatchFileCreator.create(myOlderDir,myNewerDir,myFile,Collections.<String>emptyList(),Collections.<String>emptyList(),Collections.<String>emptyList(),TEST_UI);
  assertAppliedAndRevertedCorrectly(PatchFileCreator.prepareAndValidate(myFile,myOlderDir,TEST_UI));
}
