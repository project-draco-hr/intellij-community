{
  if (!(expression instanceof PsiBinaryExpression))   return null;
  PsiBinaryExpression binOp=(PsiBinaryExpression)expression;
  IElementType tokenType=binOp.getOperationTokenType();
  if (!isComparisonOperation(tokenType))   return null;
  PsiExpression left=binOp.getLOperand();
  PsiExpression right=binOp.getROperand();
  PsiType lType=left.getType();
  PsiType rType=right == null ? null : right.getType();
  if (lType == null || rType == null)   return null;
  if (lType.equals(rType))   return lType;
  return TypeConversionUtil.unboxAndBalanceTypes(lType,rType);
}
