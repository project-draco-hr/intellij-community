{
  final PsiElement codeFragment=ControlFlowUtil.findCodeFragment(myElements[0]);
  final int offsetInBlock=myElements[myElements.length - 1].getTextRange().getEndOffset() - codeFragment.getTextRange().getStartOffset();
  final PsiCodeBlock block=myElementFactory.createCodeBlockFromText("{}",myElements[0]);
  PsiIfStatement statementFromText=(PsiIfStatement)myElementFactory.createStatementFromText("if (" + exprText + " == null);",null);
  final PsiElement copy=codeFragment.copy();
  final PsiElement lastElementInSelection=copy.getContainingFile().findElementAt(offsetInBlock + copy.getTextRange().getStartOffset());
  final PsiElement parent=lastElementInSelection.getParent().getParent();
  statementFromText=(PsiIfStatement)parent.addAfter(statementFromText,lastElementInSelection.getParent());
  block.add(copy);
  final StandardDataFlowRunner dfaRunner=new StandardDataFlowRunner();
  final StandardInstructionVisitor visitor=new StandardInstructionVisitor();
  final RunnerResult rc=dfaRunner.analyzeMethod(copy,visitor);
  if (rc == RunnerResult.OK) {
    final Pair<Set<Instruction>,Set<Instruction>> expressions=dfaRunner.getConstConditionalExpressions();
    final Set<Instruction> set=trueSet ? expressions.getFirst() : expressions.getSecond();
    for (    Instruction instruction : set) {
      if (instruction instanceof BranchingInstruction) {
        if (((BranchingInstruction)instruction).getPsiAnchor().getText().equals(statementFromText.getCondition().getText())) {
          return true;
        }
      }
    }
  }
  return false;
}
