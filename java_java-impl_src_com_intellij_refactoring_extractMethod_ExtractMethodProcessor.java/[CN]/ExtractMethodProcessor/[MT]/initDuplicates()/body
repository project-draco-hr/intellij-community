{
  List<PsiElement> elements=new ArrayList<PsiElement>();
  for (  PsiElement element : myElements) {
    if (!(element instanceof PsiWhiteSpace || element instanceof PsiComment)) {
      elements.add(element);
    }
  }
  if (myExpression != null) {
    DuplicatesFinder finder=new DuplicatesFinder(PsiUtilCore.toPsiElementArray(elements),myInputVariables.copy(),new ArrayList<PsiVariable>());
    myDuplicates=finder.findDuplicates(myTargetClass);
    return finder;
  }
 else   if (elements.size() > 0) {
    DuplicatesFinder myDuplicatesFinder=new DuplicatesFinder(PsiUtilCore.toPsiElementArray(elements),myInputVariables.copy(),myOutputVariable != null ? new VariableReturnValue(myOutputVariable) : null,Arrays.asList(myOutputVariables));
    myDuplicates=myDuplicatesFinder.findDuplicates(myTargetClass);
    return myDuplicatesFinder;
  }
 else {
    myDuplicates=new ArrayList<Match>();
  }
  return null;
}
