{
  myProject=project;
  myEditor=editor;
  if (elements.length != 1 || !(elements[0] instanceof PsiBlockStatement)) {
    myElements=elements.length == 1 && elements[0] instanceof PsiParenthesizedExpression ? new PsiElement[]{PsiUtil.skipParenthesizedExprDown((PsiExpression)elements[0])} : elements;
    myEnclosingBlockStatement=null;
  }
 else {
    myEnclosingBlockStatement=(PsiBlockStatement)elements[0];
    PsiElement[] codeBlockChildren=myEnclosingBlockStatement.getCodeBlock().getChildren();
    myElements=processCodeBlockChildren(codeBlockChildren);
  }
  myForcedReturnType=forcedReturnType;
  myRefactoringName=refactoringName;
  myInitialMethodName=initialMethodName;
  myHelpId=helpId;
  myManager=PsiManager.getInstance(myProject);
  myElementFactory=JavaPsiFacade.getInstance(myManager.getProject()).getElementFactory();
  myStyleManager=CodeStyleManager.getInstance(myProject);
}
