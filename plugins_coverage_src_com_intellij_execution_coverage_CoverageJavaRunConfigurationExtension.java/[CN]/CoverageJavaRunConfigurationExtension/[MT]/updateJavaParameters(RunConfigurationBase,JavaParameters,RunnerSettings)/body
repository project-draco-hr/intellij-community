{
  if (!isApplicableFor(configuration)) {
    return;
  }
  final JavaCoverageEnabledConfiguration coverageConfig=JavaCoverageEnabledConfiguration.getFrom(configuration);
  coverageConfig.setCurrentCoverageSuite(null);
  final CoverageRunner coverageRunner=coverageConfig.getCoverageRunner();
  if (coverageConfig.isCoverageEnabled() && coverageRunner != null) {
    if (!(runnerSettings.getData() instanceof DebuggingRunnerData) || coverageRunner instanceof IDEACoverageRunner) {
      final CoverageDataManager coverageDataManager=CoverageDataManager.getInstance(configuration.getProject());
      coverageConfig.setCurrentCoverageSuite(coverageDataManager.addCoverageSuite(coverageConfig));
      coverageConfig.appendCoverageArgument(params);
    }
 else     if (runnerSettings.getData() instanceof DebuggingRunnerData) {
      Notifications.Bus.notify(new Notification("Coverage","Coverage was not enabled",coverageRunner.getPresentableName() + " coverage is disabled in the debug mode",NotificationType.WARNING));
    }
    if (!(coverageRunner instanceof IDEACoverageRunner)) {
      final Sdk jdk=params.getJdk();
      if (jdk != null && JavaSdk.getInstance().isOfVersionOrHigher(jdk,JavaSdkVersion.JDK_1_7)) {
        Notifications.Bus.notify(new Notification("Coverage","Coverage instrumentation is not fully compatible with JDK 7",coverageRunner.getPresentableName() + " coverage instrumentation can lead to java.lang.VerifyError errors with JDK 7. If so, please try IDEA coverage runner.",NotificationType.WARNING));
      }
    }
  }
}
