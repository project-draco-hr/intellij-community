{
  if (done instanceof ObsolescentFunction && ((ObsolescentFunction)done).isObsolete()) {
    return Promise.reject("obsolete");
  }
 else {
    return Promise.resolve(done.fun(result));
  }
}
