{
  final File jarFile=new File(args[0]);
  final MainPair mainPair=args[0].endsWith(".jar") ? loadMainClassFromClasspathJar(jarFile,args) : loadMainClassWithOldCustomLoader(jarFile,args);
  String[] mainArgs=mainPair.getArgs();
  Class mainClass=mainPair.getMainClass();
  System.arraycopy(args,2,mainArgs,0,mainArgs.length);
  Class mainArgType=(new String[0]).getClass();
  Method main=mainClass.getMethod("main",new Class[]{mainArgType});
  ensureAccess(main);
  main.invoke(null,new Object[]{mainArgs});
}
