{
  GitHttpAuthService service=ServiceManager.getService(GitHttpAuthService.class);
  myEnv.put(GitAskPassXmlRpcHandler.GIT_ASK_PASS_ENV,service.getScriptPath().getPath());
  GitHttpAuthenticator httpAuthenticator=service.createAuthenticator(myProject,myCommand,ObjectUtils.assertNotNull(myUrls));
  myHttpHandler=service.registerHandler(httpAuthenticator,myProject);
  myEnvironmentCleanedUp=false;
  myEnv.put(GitAskPassXmlRpcHandler.GIT_ASK_PASS_HANDLER_ENV,Integer.toString(myHttpHandler));
  int port=service.getXmlRcpPort();
  myEnv.put(GitAskPassXmlRpcHandler.GIT_ASK_PASS_PORT_ENV,Integer.toString(port));
  LOG.debug(String.format("handler=%s, port=%s",myHttpHandler,port));
  addAuthListener(httpAuthenticator);
}
