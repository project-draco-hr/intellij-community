{
  if (this instanceof GitLineHandler) {
    ((GitLineHandler)this).addLineListener(new GitLineHandlerAdapter(){
      @Override public void onLineAvailable(      @NonNls String line,      Key outputType){
        String lowerCaseLine=line.toLowerCase();
        if (lowerCaseLine.contains("authentication failed") || lowerCaseLine.contains("403 forbidden")) {
          LOG.debug("auth listener: auth failure detected: " + line);
          myHttpAuthFailed=true;
        }
      }
      @Override public void processTerminated(      int exitCode){
        LOG.debug("auth listener: process terminated. auth failed=" + myHttpAuthFailed + ", cancelled="+ authenticator.wasCancelled());
        if (!authenticator.wasCancelled()) {
          if (myHttpAuthFailed) {
            authenticator.forgetPassword();
          }
 else {
            authenticator.saveAuthData();
          }
        }
 else {
          myHttpAuthFailed=false;
        }
      }
    }
);
  }
}
