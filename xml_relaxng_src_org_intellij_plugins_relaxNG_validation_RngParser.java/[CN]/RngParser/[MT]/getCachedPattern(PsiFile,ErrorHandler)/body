{
  final VirtualFile file=descriptorFile.getVirtualFile();
  if (file == null) {
    return parsePattern(descriptorFile,eh,false);
  }
  String url=file.getUrl();
  DPattern pattern=ourCache.get(url);
  if (pattern == null) {
    pattern=parsePattern(descriptorFile,eh,false);
  }
  if (pattern != null) {
    DPattern oldPattern=ourCache.putIfAbsent(url,pattern);
    if (oldPattern != null) {
      return oldPattern;
    }
  }
  return pattern;
}
