{
  if (!"true".equals(System.getProperty("groovyc.reuse.compiler.classes","true"))) {
    return null;
  }
  String groovyAll=ContainerUtil.find(compilationClassPath,new Condition<String>(){
    @Override public boolean value(    String s){
      return GROOVY_ALL_JAR_PATTERN.matcher(StringUtil.getShortName(s,'/')).matches();
    }
  }
);
  if (groovyAll == null) {
    return null;
  }
  Pair<String,ClassLoader> pair=SoftReference.dereference(ourParentLoaderCache);
  if (pair != null && pair.first.equals(groovyAll)) {
    return pair.second;
  }
  UrlClassLoader groovyAllLoader=UrlClassLoader.build().urls(toUrls(Arrays.asList(GroovyBuilder.getGroovyRtRoot().getPath(),groovyAll))).useCache(ourLoaderCachePool,new UrlClassLoader.CachingCondition(){
    @Override public boolean shouldCacheData(    @NotNull URL url){
      return true;
    }
  }
).get();
  ClassLoader wrapper=new URLClassLoader(new URL[0],groovyAllLoader){
    @Override protected Class<?> loadClass(    String name,    boolean resolve) throws ClassNotFoundException {
      try {
        return super.loadClass(name,resolve);
      }
 catch (      NoClassDefFoundError e) {
        throw new ClassNotFoundException(name,e);
      }
    }
  }
;
  ourParentLoaderCache=new SoftReference<Pair<String,ClassLoader>>(Pair.create(groovyAll,wrapper));
  return wrapper;
}
