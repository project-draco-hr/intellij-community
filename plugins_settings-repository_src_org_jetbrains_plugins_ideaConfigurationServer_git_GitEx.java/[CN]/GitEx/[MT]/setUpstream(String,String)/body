{
  String localBranchName=Constants.MASTER;
  StoredConfig config=getRepository().getConfig();
  String remoteName=Constants.DEFAULT_REMOTE_NAME;
  if (StringUtil.isEmptyOrSpaces(url)) {
    LOG.debug("Unset remote");
    config.unsetSection(ConfigConstants.CONFIG_REMOTE_SECTION,remoteName);
    config.unsetSection(ConfigConstants.CONFIG_BRANCH_SECTION,localBranchName);
  }
 else {
    if (branchName == null) {
      branchName=Constants.MASTER;
    }
    LOG.debug("Set remote " + url);
    config.setString(ConfigConstants.CONFIG_REMOTE_SECTION,remoteName,ConfigConstants.CONFIG_KEY_URL,url);
    config.setString(ConfigConstants.CONFIG_REMOTE_SECTION,remoteName,ConfigConstants.CONFIG_FETCH_SECTION,'+' + Constants.R_HEADS + branchName+ ':'+ Constants.R_REMOTES+ remoteName+ '/'+ branchName);
    config.setString(ConfigConstants.CONFIG_BRANCH_SECTION,localBranchName,ConfigConstants.CONFIG_KEY_REMOTE,remoteName);
    config.setString(ConfigConstants.CONFIG_BRANCH_SECTION,localBranchName,ConfigConstants.CONFIG_KEY_MERGE,Constants.R_HEADS + branchName);
  }
  config.save();
}
