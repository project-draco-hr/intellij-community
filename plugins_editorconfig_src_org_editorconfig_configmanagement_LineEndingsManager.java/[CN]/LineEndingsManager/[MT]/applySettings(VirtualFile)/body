{
  if (file == null || !file.isInLocalFileSystem())   return;
  if (!Utils.isEnabled(CodeStyleSettingsManager.getInstance(myProject).getCurrentSettings()))   return;
  final String filePath=file.getCanonicalPath();
  final List<EditorConfig.OutPair> outPairs=SettingsProviderComponent.getInstance().getOutPairs(myProject,filePath);
  final String lineEndings=Utils.configValueForKey(outPairs,lineEndingsKey);
  if (!lineEndings.isEmpty()) {
    try {
      LineSeparator separator=LineSeparator.valueOf(lineEndings.toUpperCase(Locale.US));
      String oldSeparator=file.getDetectedLineSeparator();
      String newSeparator=separator.getSeparatorString();
      if (!StringUtil.equals(oldSeparator,newSeparator)) {
        file.setDetectedLineSeparator(newSeparator);
        if (!statusBarUpdated) {
          statusBarUpdated=true;
          updateStatusBar();
        }
        Utils.appliedConfigMessage(myProject,lineEndings,lineEndingsKey,filePath);
      }
    }
 catch (    IllegalArgumentException e) {
      Utils.invalidConfigMessage(myProject,lineEndings,lineEndingsKey,filePath);
    }
  }
}
