{
  HgRepository repository;
  if (selectedRepo != null) {
    repository=HgUtil.getRepositoryManager(project).getRepositoryForRoot(selectedRepo);
  }
 else {
    VirtualFile selectedRoot=HgUtil.getRootForSelectedFile(project);
    if (selectedRoot != null) {
      repository=HgUtil.getRepositoryManager(project).getRepositoryForRoot(selectedRoot);
    }
 else {
      return;
    }
  }
  if (repository != null) {
    HgBranchPopup.getInstance(project,repository).asListPopup().showInFocusCenter();
  }
}
