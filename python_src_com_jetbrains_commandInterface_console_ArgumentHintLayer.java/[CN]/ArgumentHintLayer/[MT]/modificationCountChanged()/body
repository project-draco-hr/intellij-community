{
  ApplicationManager.getApplication().assertIsDispatchThread();
  final String newText=myConsole.getFile().getText();
  if (newText.equals(myLastText)) {
    return;
  }
  myLastText=newText;
  myNextArg=null;
  myDocumentLengthInChars=StringUtil.trim(newText).length();
  final PsiFile consoleFile=myConsole.getFile();
  if (consoleFile instanceof CommandLineFile) {
    final ValidationResult result=((CommandLineFile)consoleFile).getValidationResult();
    myNextArg=result != null ? result.getNextArg() : null;
    repaint();
  }
}
