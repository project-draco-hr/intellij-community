{
  final FontMetrics metrics=console.getFontMetrics(console.getFont());
  myCharWidthPx=metrics.charWidth('A');
  myLineHeightPx=metrics.getHeight();
  final String prompt=console.getPrompt();
  myPromptWidthPx=(prompt != null ? prompt.length() * myCharWidthPx : 0);
  myConsole=console;
  myDocumentLengthInChars=console.getEditorDocument().getTextLength();
  myLastText=console.getFile().getText();
  final EditorColorsScheme scheme=EditorColorsManager.getInstance().getGlobalScheme();
  myRequiredColor=scheme.getAttributes(ConsoleViewContentType.ERROR_OUTPUT_KEY).getForegroundColor();
  myOptionalColor=scheme.getAttributes(EditorColors.FOLDED_TEXT_ATTRIBUTES).getForegroundColor();
}
