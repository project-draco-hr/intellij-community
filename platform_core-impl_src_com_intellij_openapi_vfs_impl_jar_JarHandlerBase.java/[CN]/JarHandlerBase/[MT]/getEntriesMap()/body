{
  Map<String,EntryInfo> map=SoftReference.dereference(myRelPathsToEntries);
  if (map == null) {
synchronized (lock) {
      map=SoftReference.dereference(myRelPathsToEntries);
      if (map == null) {
        JarFile zip=getJar();
        if (zip != null) {
          LogUtil.debug(LOG,"mapping %s",myBasePath);
          map=new THashMap<String,EntryInfo>();
          map.put("",new EntryInfo(null,"",true,DEFAULT_LENGTH,DEFAULT_TIMESTAMP));
          Enumeration<? extends JarFile.JarEntry> entries=zip.entries();
          while (entries.hasMoreElements()) {
            JarFile.JarEntry entry=entries.nextElement();
            if (entry == null)             break;
            getOrCreate(entry,map,zip);
          }
          myRelPathsToEntries=new SoftReference<Map<String,EntryInfo>>(Collections.unmodifiableMap(map));
        }
 else {
          map=Collections.emptyMap();
        }
      }
    }
  }
  return map;
}
