{
  final ContentRevision beforeRevision=change.getBeforeRevision();
  final ContentRevision afterRevision=change.getAfterRevision();
  File beforeFile=beforeRevision == null ? null : beforeRevision.getFile().getIOFile();
  File afterFile=afterRevision == null ? null : afterRevision.getFile().getIOFile();
  String shelvedPath=null;
  if (afterFile != null) {
    String shelvedFileName=afterFile.getName();
    String name=FileUtil.getNameWithoutExtension(shelvedFileName);
    String extension=FileUtilRt.getExtension(shelvedFileName);
    File shelvedFile=FileUtil.findSequentNonexistentFile(schemePatchDir,name,extension);
    FileUtil.copy(afterRevision.getFile().getIOFile(),shelvedFile);
    shelvedPath=shelvedFile.getPath();
  }
  String beforePath=ChangesUtil.getProjectRelativePath(myProject,beforeFile);
  String afterPath=ChangesUtil.getProjectRelativePath(myProject,afterFile);
  return new ShelvedBinaryFile(beforePath,afterPath,shelvedPath);
}
