{
  Document document=editor.getDocument();
  if (document instanceof DocumentImpl) {
    DocumentImpl documentImpl=(DocumentImpl)document;
    List<RangeMarker> blocks=documentImpl.getGuardedBlocks();
    if (useLength && !placeholder.isValid(document))     return;
    int start=placeholder.getRealStartOffset(document);
    final int length=useLength ? placeholder.getLength() : placeholder.getPossibleAnswerLength();
    int end=start + length;
    if (start != 0) {
      createGuardedBlock(editor,blocks,start - 1,start);
    }
    if (end != document.getTextLength()) {
      createGuardedBlock(editor,blocks,end,end + 1);
    }
  }
}
