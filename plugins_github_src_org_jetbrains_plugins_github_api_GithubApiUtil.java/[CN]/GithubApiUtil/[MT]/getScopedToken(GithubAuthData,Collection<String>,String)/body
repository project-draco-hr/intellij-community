{
  String path="/authorizations";
  JsonObject request=new JsonObject();
  JsonArray json=new JsonArray();
  for (  String scope : scopes) {
    json.add(new JsonPrimitive(scope));
  }
  request.add("scopes",json);
  request.addProperty("note",note != null ? note : "Intellij GitHub plugin");
  JsonElement result=postRequest(auth,path,request.toString());
  if (result == null || !result.isJsonObject()) {
    return null;
  }
  JsonElement token=result.getAsJsonObject().get("token");
  if (token == null) {
    return null;
  }
  return token.getAsString();
}
