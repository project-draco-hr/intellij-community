{
  GithubAuthorization token=findToken(auth,note);
  if (token == null) {
    return getNewScopedToken(auth,scopes,note).getToken();
  }
  if (token.getScopes().containsAll(scopes)) {
    return token.getToken();
  }
  return updateTokenScopes(auth,token,scopes).getToken();
}
