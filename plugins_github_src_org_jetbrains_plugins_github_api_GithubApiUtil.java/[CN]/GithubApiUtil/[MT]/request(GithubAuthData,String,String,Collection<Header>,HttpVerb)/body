{
  if (EventQueue.isDispatchThread() && !ApplicationManager.getApplication().isUnitTestMode()) {
    LOG.warn("Network operation in EDT");
  }
  HttpMethod method=null;
  try {
    String uri=GithubUrlUtil.getApiUrl(auth.getHost()) + path;
    method=doREST(auth,uri,requestBody,headers,verb);
    checkStatusCode(method);
    InputStream resp=method.getResponseBodyAsStream();
    if (resp == null) {
      return new ResponsePage();
    }
    JsonElement ret=parseResponse(resp);
    if (ret.isJsonNull()) {
      return new ResponsePage();
    }
    Header header=method.getResponseHeader("Link");
    if (header != null) {
      String value=header.getValue();
      int end=value.indexOf(">; rel=\"next\"");
      int begin=value.lastIndexOf('<',end);
      if (begin >= 0 && end >= 0) {
        String newPath=GithubUrlUtil.removeProtocolPrefix(value.substring(begin + 1,end));
        int index=newPath.indexOf('/');
        return new ResponsePage(ret,newPath.substring(index));
      }
    }
    return new ResponsePage(ret);
  }
  finally {
    if (method != null) {
      method.releaseConnection();
    }
  }
}
