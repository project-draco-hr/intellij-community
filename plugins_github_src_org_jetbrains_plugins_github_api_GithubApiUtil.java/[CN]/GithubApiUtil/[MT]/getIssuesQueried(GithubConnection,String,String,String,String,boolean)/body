{
  try {
    String state=withClosed ? "" : " state:open";
    String assignee=StringUtil.isEmptyOrSpaces(assignedUser) ? "" : " assignee:" + assignedUser;
    query=URLEncoder.encode("repo:" + user + "/"+ repo+ state+ assignee+ " "+ query,CharsetToolkit.UTF8);
    String path="/search/issues?q=" + query;
    JsonElement result=connection.getRequest(path,ACCEPT_V3_JSON);
    return fromJson(result,GithubIssuesSearchResult.class).getIssues();
  }
 catch (  GithubConfusingException e) {
    e.setDetails("Can't get queried issues: " + user + "/"+ repo+ " - "+ query);
    throw e;
  }
}
