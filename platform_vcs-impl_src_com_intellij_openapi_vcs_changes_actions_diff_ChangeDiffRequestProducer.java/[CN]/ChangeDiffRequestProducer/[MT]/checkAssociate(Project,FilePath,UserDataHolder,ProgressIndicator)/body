{
  final String pattern=FileUtilRt.getExtension(file.getName()).toLowerCase();
  if (getSkippedExtensionsFromContext(context).contains(pattern))   return;
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      int result=Messages.showOkCancelDialog(project,VcsBundle.message("diff.unknown.file.type.prompt",file.getName()),VcsBundle.message("diff.unknown.file.type.title"),VcsBundle.message("diff.unknown.file.type.associate"),CommonBundle.getCancelButtonText(),Messages.getQuestionIcon());
      if (result == Messages.OK) {
        FileTypeChooser.associateFileType(file.getName());
      }
 else {
        getSkippedExtensionsFromContext(context).add(pattern);
      }
    }
  }
,indicator.getModalityState());
}
