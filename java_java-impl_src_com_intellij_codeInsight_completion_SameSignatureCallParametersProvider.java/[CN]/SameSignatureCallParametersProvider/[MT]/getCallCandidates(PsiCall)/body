{
  Set<Pair<PsiMethod,PsiSubstitutor>> candidates=ContainerUtil.newLinkedHashSet();
  JavaResolveResult[] results;
  if (expression instanceof PsiMethodCallExpression) {
    results=((PsiMethodCallExpression)expression).getMethodExpression().multiResolve(false);
  }
 else {
    results=new JavaResolveResult[]{expression.resolveMethodGenerics()};
  }
  for (  final JavaResolveResult candidate : results) {
    final PsiElement element=candidate.getElement();
    if (element instanceof PsiMethod) {
      final PsiClass psiClass=((PsiMethod)element).getContainingClass();
      if (psiClass != null) {
        for (        Pair<PsiMethod,PsiSubstitutor> overload : psiClass.findMethodsAndTheirSubstitutorsByName(((PsiMethod)element).getName(),true)) {
          candidates.add(Pair.create(overload.first,candidate.getSubstitutor().putAll(overload.second)));
        }
        break;
      }
    }
  }
  return candidates;
}
