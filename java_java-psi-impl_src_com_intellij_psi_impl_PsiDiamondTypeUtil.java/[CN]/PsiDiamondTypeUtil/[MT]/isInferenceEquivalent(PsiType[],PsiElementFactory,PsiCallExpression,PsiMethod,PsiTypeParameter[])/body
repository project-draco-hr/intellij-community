{
  PsiReferenceParameterList list=((PsiCallExpression)elementFactory.createExpressionFromText("foo()",null)).getTypeArgumentList();
  exprCopy.getTypeArgumentList().replace(list);
  final JavaResolveResult copyResult=exprCopy.resolveMethodGenerics();
  if (method != copyResult.getElement())   return false;
  final PsiSubstitutor psiSubstitutor=copyResult.getSubstitutor();
  for (int i=0, length=typeParameters.length; i < length; i++) {
    PsiTypeParameter typeParameter=typeParameters[i];
    final PsiType inferredType=psiSubstitutor.getSubstitutionMap().get(typeParameter);
    if (!typeArguments[i].equals(inferredType)) {
      return false;
    }
    if (PsiUtil.resolveClassInType(method.getReturnType()) == typeParameter && PsiPrimitiveType.getUnboxedType(inferredType) != null) {
      return false;
    }
  }
  return true;
}
