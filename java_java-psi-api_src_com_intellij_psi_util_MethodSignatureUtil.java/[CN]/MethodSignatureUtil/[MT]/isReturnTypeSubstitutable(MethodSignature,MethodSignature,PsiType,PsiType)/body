{
  if (PsiType.VOID.equals(r1)) {
    return PsiType.VOID.equals(r2);
  }
  if (r1 instanceof PsiPrimitiveType) {
    return r1.equals(r2);
  }
  if (r1 instanceof PsiClassType && r2 != null) {
    final PsiSubstitutor adaptingSubstitutor=getSuperMethodSignatureSubstitutor(d1,d2);
    if (adaptingSubstitutor != null && r2.isAssignableFrom(adaptingSubstitutor.substitute(r1))) {
      return true;
    }
    if (!areSignaturesEqual(d1,d2)) {
      return r1.equals(TypeConversionUtil.erasure(r2));
    }
  }
  return Comparing.equal(r1,r2);
}
