{
  PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  if (myAnnotation != null) {
    final PyAnnotation annotation=myAnnotation.getElement();
    if (annotation != null) {
      final PyExpression annotationExpr=annotation.getValue();
      if (annotationExpr == null)       return;
      annotationExpr.replace(elementGenerator.createExpressionFromText(LanguageLevel.PYTHON30,myReturnTypeName));
    }
  }
 else   if (myTypeCommentAnnotation != null) {
    final PsiComment typeComment=myTypeCommentAnnotation.getElement();
    if (typeComment != null) {
      final StringBuilder typeCommentAnnotation=new StringBuilder(typeComment.getText());
      typeCommentAnnotation.delete(typeCommentAnnotation.indexOf("->"),typeCommentAnnotation.length());
      typeCommentAnnotation.append("-> ").append(myReturnTypeName);
      final PsiComment newTypeComment=elementGenerator.createFromText(LanguageLevel.PYTHON27,PsiComment.class,typeCommentAnnotation.toString());
      typeComment.replace(newTypeComment);
    }
  }
}
