{
  for (int i=0; i < 100; i++) {
    final File f=new File(myClientRoot,"f" + i + ".txt");
    f.createNewFile();
  }
  myWorkingCopyDir.refresh(false,true);
  myChangeListManager.ensureUpToDate(false);
  final List<VirtualFile> unversionedFiles=((ChangeListManagerImpl)myChangeListManager).getUnversionedFiles();
  final Pattern pattern=Pattern.compile("f([0-9])+\\.txt");
  int cnt=0;
  for (  VirtualFile unversionedFile : unversionedFiles) {
    if (VfsUtil.isAncestor(myWorkingCopyDir,unversionedFile,true)) {
      ++cnt;
      Assert.assertTrue(pattern.matcher(unversionedFile.getName()).matches());
    }
  }
  Assert.assertEquals(100,cnt);
}
