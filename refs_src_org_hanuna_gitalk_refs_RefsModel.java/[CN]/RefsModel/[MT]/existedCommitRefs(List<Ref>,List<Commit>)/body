{
  Set<Hash> refCommits=new HashSet<Hash>();
  for (  Ref ref : allRefs) {
    refCommits.add(ref.getCommitHash());
  }
  Set<Hash> existedCommitsRefs=new HashSet<Hash>();
  List<Commit> orderedLogExistedCommits=new ArrayList<Commit>();
  for (  Commit commit : commits) {
    if (refCommits.contains(commit.getCommitHash())) {
      existedCommitsRefs.add(commit.getCommitHash());
      orderedLogExistedCommits.add(commit);
    }
  }
  List<Ref> existedRef=new ArrayList<Ref>();
  for (  Ref ref : allRefs) {
    if (existedCommitsRefs.contains(ref.getCommitHash())) {
      existedRef.add(ref);
    }
  }
  return new RefsModel(existedRef,orderedLogExistedCommits);
}
