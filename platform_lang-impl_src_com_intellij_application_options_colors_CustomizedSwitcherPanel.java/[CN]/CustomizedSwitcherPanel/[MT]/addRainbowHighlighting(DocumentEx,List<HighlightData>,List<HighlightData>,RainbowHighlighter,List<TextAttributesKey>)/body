{
  if (!rainbowTempKeys.isEmpty()) {
    List<HighlightData> newData=new ArrayList<HighlightData>();
    if (showLineData != null)     newData.addAll(showLineData);
    HashMap<String,Integer> id2index=new HashMap<String,Integer>();
    for (    HighlightData d : data) {
      if (((RainbowColorSettingsPage)myPage).isRainbowType(d.getHighlightKey())) {
        String id=document.getText(TextRange.create(d.getStartOffset(),d.getEndOffset()));
        int index=rainbowHighlighter.getColorIndex(id2index,id,RainbowHighlighter.getRainbowHash(id));
        HighlightData rainbow=new HighlightData(d.getStartOffset(),d.getEndOffset(),rainbowTempKeys.get(index));
        newData.add(rainbow);
        newData.add(d);
        newData.add(rainbow);
      }
 else       if (!RainbowHighlighter.isRainbowTempKey(d.getHighlightKey())) {
        newData.add(d);
      }
    }
    data.clear();
    data.addAll(newData);
  }
}
