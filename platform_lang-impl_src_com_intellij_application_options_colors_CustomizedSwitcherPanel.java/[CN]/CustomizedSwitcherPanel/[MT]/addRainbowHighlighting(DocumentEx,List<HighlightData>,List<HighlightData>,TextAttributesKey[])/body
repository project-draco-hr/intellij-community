{
  int colorCount=rainbowTempKeys.length;
  if (colorCount != 0) {
    List<HighlightData> newData=new ArrayList<>();
    if (showLineData != null)     newData.addAll(showLineData);
    int[] index2usage=new int[colorCount];
    for (    HighlightData d : data) {
      if (((RainbowColorSettingsPage)myPage).isRainbowType(d.getHighlightKey())) {
        String id=document.getText(TextRange.create(d.getStartOffset(),d.getEndOffset()));
        int index=RainbowHighlighter.getColorIndex(index2usage,RainbowHighlighter.hashColor(id,colorCount),colorCount);
        ++index2usage[index];
        HighlightData rainbow=new HighlightData(d.getStartOffset(),d.getEndOffset(),rainbowTempKeys[index]);
        newData.add(rainbow);
        newData.add(d);
        newData.add(rainbow);
      }
 else {
        newData.add(d);
      }
    }
    data.clear();
    data.addAll(newData);
  }
}
