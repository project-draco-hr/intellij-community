{
  if (!(myPreviewPanel instanceof SimpleEditorPreview))   return;
  SimpleEditorPreview simpleEditorPreview=(SimpleEditorPreview)myPreviewPanel;
  if (myActive == myRainbowPanel && myPage instanceof RainbowColorSettingsPage && descriptor instanceof RainbowAttributeDescriptor) {
    if (myRainbowPanel.myGlobalState.isRainbowOn) {
      RainbowHighlighter highlighter=new RainbowHighlighter(descriptor.getScheme());
      List<TextAttributesKey> tempKeys=highlighter.getRainbowTempKeys();
      Pair<String,List<HighlightData>> demo=getColorDemoLine(highlighter,tempKeys);
      simpleEditorPreview.setDemoText(demo.first + "\n" + ((RainbowColorSettingsPage)myPage).getRainbowDemoText());
      addRainbowHighlighting(simpleEditorPreview.getEditor().getDocument(),demo.second,simpleEditorPreview.getHighlightDataForExtension(),highlighter,tempKeys);
    }
 else {
      simpleEditorPreview.setDemoText(((RainbowColorSettingsPage)myPage).getRainbowDemoText());
      removeRainbowHighlighting(simpleEditorPreview.getHighlightDataForExtension());
    }
  }
 else {
    simpleEditorPreview.setDemoText(myPage.getDemoText());
  }
}
