{
  PsiElement elementAt=PyUtil.findNonWhitespaceAtOffset(file,editor.getCaretModel().getOffset());
  PyExpression problemElement=getProblemElement(elementAt);
  PsiReference reference=problemElement == null ? null : problemElement.getReference();
  final PsiElement resolved=reference != null ? reference.resolve() : null;
  PyParameter parameter=getParameter(problemElement,resolved);
  String kind=parameter != null ? "type" : "rtype";
  final Callable callable;
  if (parameter != null) {
    callable=PsiTreeUtil.getParentOfType(parameter,PyFunction.class);
  }
 else {
    callable=getCallable(elementAt);
  }
  if (callable instanceof PyFunction) {
    generateDocstring(kind,(PyFunction)callable,problemElement);
  }
}
