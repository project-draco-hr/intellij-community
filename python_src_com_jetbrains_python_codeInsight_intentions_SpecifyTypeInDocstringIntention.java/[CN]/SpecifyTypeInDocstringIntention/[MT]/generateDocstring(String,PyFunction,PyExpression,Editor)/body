{
  String name="rtype".equals(kind) ? "" : StringUtil.notNullize(problemElement.getName());
  final PyDocstringGenerator docstringGenerator=new PyDocstringGenerator(pyFunction);
  PySignature signature=PySignatureCacheManager.getInstance(pyFunction.getProject()).findSignature(pyFunction);
  if (signature != null) {
    docstringGenerator.withParamTypedByQualifiedName(kind,name,signature.getArgTypeQualifiedName(name),pyFunction);
  }
 else {
    docstringGenerator.withParam(kind,name);
  }
  final Module module=ModuleManager.getInstance(pyFunction.getProject()).getModules()[0];
  final PyDocumentationSettings documentationSettings=PyDocumentationSettings.getInstance(module);
  if (documentationSettings.isPlain(pyFunction.getContainingFile())) {
    final String[] values={DocStringFormat.EPYTEXT,DocStringFormat.REST};
    final int i=Messages.showChooseDialog("Docstring format:","Select Docstring Type",values,DocStringFormat.EPYTEXT,null);
    if (i < 0)     return;
    final String value=values[i];
    documentationSettings.setFormat(value);
  }
  docstringGenerator.build();
  docstringGenerator.startTemplate();
}
