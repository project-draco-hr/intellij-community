{
  final Set<File> pathsToMark=new THashSet<File>(FileUtil.FILE_HASHING_STRATEGY);
  processRecursively(file,false,false,new FileProcessor(){
    public void execute(    final VirtualFile file){
      pathsToMark.add(new File(file.getPath()));
    }
  }
);
  if (fromMove) {
    notifyFilesDeleted(pathsToMark);
  }
 else   if (!isIgnoredOrUnderIgnoredDirectory(file)) {
    notifyFilesChanged(pathsToMark);
  }
}
