{
  if (!isIgnoredOrUnderIgnoredDirectory(file)) {
    final Set<File> pathsToMark=new THashSet<File>(FileUtil.FILE_HASHING_STRATEGY);
    boolean dbOnly=!isInContentOfOpenedProject(file,false);
    processRecursively(file,dbOnly,false,new FileProcessor(){
      @Override public void execute(      VirtualFile file){
        pathsToMark.add(new File(file.getPath()));
      }
    }
);
    notifyFilesChanged(pathsToMark);
  }
}
