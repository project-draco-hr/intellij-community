{
  final VirtualFile eventFile=event.getFile();
  if ((LOG.isDebugEnabled() && eventFile.isDirectory()) || ourDebugMode) {
    final String message="Processing file deletion: " + eventFile.getPresentableUrl();
    LOG.debug(message);
    if (ourDebugMode) {
      System.out.println(message);
    }
  }
  final Set<File> pathsToMark=new THashSet<File>(FileUtil.FILE_HASHING_STRATEGY);
  processRecursively(eventFile,true,false,new FileProcessor(){
    public void execute(    final VirtualFile file){
      pathsToMark.add(new File(file.getPath()));
    }
  }
);
  notifyFilesDeleted(pathsToMark);
}
