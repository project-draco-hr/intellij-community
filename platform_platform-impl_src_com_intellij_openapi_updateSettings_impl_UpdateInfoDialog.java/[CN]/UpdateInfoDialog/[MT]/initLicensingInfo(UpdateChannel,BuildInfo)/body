{
  LicensingFacade facade=LicensingFacade.getInstance();
  if (facade == null)   return null;
  if (channel.getLicensing().equals(UpdateChannel.LICENSING_EAP)) {
    return pair(IdeBundle.message("updates.channel.bundled.key"),null);
  }
  Date releaseDate=build.getReleaseDate();
  Boolean applicable=releaseDate == null ? null : facade.isApplicableForProduct(releaseDate);
  if (applicable == null) {
    return null;
  }
  if (applicable == Boolean.FALSE) {
    return pair(IdeBundle.message("updates.paid.upgrade",channel.getEvalDays()),JBColor.RED);
  }
  if (facade.isPerpetualForProduct(releaseDate) == Boolean.TRUE) {
    return pair(IdeBundle.message("updates.fallback.build"),null);
  }
  Date expiration=facade.getLicenseExpirationDate();
  if (expiration != null) {
    return pair(IdeBundle.message("updates.interim.build",DateFormatUtil.formatAboutDialogDate(expiration)),null);
  }
 else {
    return null;
  }
}
