{
  Extension extension=new WriteCommandAction<Extension>(project,file){
    @Override protected void run(    @NotNull Result<Extension> result) throws Throwable {
      final Extensions extensions=PluginDescriptorChooser.findOrCreateExtensionsForEP(selectedValue,myEp.getName());
      Extension extension=extensions.addExtension(myEp.getName());
      XmlTag tag=extension.getXmlTag();
      tag.setAttribute("implementationClass",myPsiClass.getQualifiedName());
      result.setResult(extension);
    }
  }
.execute().throwException().getResultObject();
  PsiNavigateUtil.navigate(extension.getXmlTag());
}
