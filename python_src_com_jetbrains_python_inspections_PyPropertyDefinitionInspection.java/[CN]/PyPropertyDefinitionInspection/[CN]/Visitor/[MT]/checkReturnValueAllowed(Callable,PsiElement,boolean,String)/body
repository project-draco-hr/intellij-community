{
  boolean hasReturns;
  if (callable instanceof PyFunction) {
    final PsiElement[] returnStatements=PsiTreeUtil.collectElements(callable,new PsiElementFilter(){
      @Override public boolean isAccepted(      PsiElement element){
        return (element instanceof PyReturnStatement && ((PyReturnStatement)element).getExpression() != null) || (element instanceof PyYieldExpression);
      }
    }
);
    hasReturns=returnStatements.length > 0;
  }
 else {
    final PyType type=myTypeEvalContext.getReturnType(callable);
    hasReturns=!(type instanceof PyNoneType);
  }
  if (allowed ^ hasReturns) {
    if (allowed && callable instanceof PyFunction) {
      if (PyUtil.isDecoratedAsAbstract(((PyFunction)callable))) {
        return;
      }
      PyStatementList statementList=((PyFunction)callable).getStatementList();
      for (      PyStatement stmt : statementList.getStatements()) {
        if (stmt instanceof PyRaiseStatement) {
          return;
        }
      }
    }
    registerProblem(beingChecked,message);
  }
}
