{
  boolean hasReturns;
  if (callable instanceof PyFunction) {
    final PsiElement[] returnStatements=PsiTreeUtil.collectElements(callable,new PsiElementFilter(){
      @Override public boolean isAccepted(      PsiElement element){
        return element instanceof PyReturnStatement;
      }
    }
);
    hasReturns=returnStatements.length > 0;
  }
 else {
    hasReturns=!(callable.getReturnType(myTypeEvalContext) instanceof PyNoneType);
  }
  if (allowed ^ hasReturns) {
    registerProblem(being_checked,message);
  }
}
