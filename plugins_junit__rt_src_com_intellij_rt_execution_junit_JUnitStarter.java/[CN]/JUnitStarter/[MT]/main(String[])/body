{
  Vector argList=new Vector();
  for (int i=0; i < args.length; i++) {
    String arg=args[i];
    argList.addElement(arg);
  }
  final ArrayList listeners=new ArrayList();
  final String[] name=new String[1];
  boolean isJUnit4=processParameters(argList,listeners,name);
  if (!canWorkWithJUnitVersion(System.err,isJUnit4)) {
    System.exit(-3);
  }
  if (!checkVersion(args,System.err)) {
    System.exit(-3);
  }
  String[] array=new String[argList.size()];
  argList.copyInto(array);
  int exitCode=prepareStreamsAndStart(array,isJUnit4,listeners,name[0]);
  System.exit(exitCode);
}
