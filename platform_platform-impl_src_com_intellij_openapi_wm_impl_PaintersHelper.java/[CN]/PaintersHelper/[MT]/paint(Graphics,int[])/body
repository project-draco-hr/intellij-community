{
  if (myPainters.isEmpty())   return;
  Graphics2D g=(Graphics2D)gg;
  int i=0;
  AffineTransform transform=g.getTransform();
  int dx=offsets[i++] - (int)transform.getTranslateX();
  int dy=offsets[i++] - (int)transform.getTranslateY();
  for (  Painter painter : myPainters) {
    if (!painter.needsRepaint())     continue;
    Component cur=myPainter2Component.get(painter);
    int x=offsets[i++] + dx;
    int y=offsets[i++] + dy;
    g.translate(x,y);
    painter.paint(cur,g);
    g.translate(-x,-y);
  }
}
