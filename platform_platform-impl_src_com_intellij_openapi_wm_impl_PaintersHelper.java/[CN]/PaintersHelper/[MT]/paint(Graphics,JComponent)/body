{
  if (myPainters.isEmpty())   return;
  Graphics2D g2d=(Graphics2D)g;
  for (  Painter painter : myPainters) {
    Rectangle clip=g.getClipBounds();
    Component component=myPainter2Component.get(painter);
    if (component.getParent() == null)     continue;
    Rectangle componentBounds=SwingUtilities.convertRectangle(component.getParent(),component.getBounds(),current);
    if (!painter.needsRepaint()) {
      continue;
    }
    if (clip.contains(componentBounds) || clip.intersects(componentBounds)) {
      Point targetPoint=SwingUtilities.convertPoint(current,0,0,component);
      Rectangle targetRect=new Rectangle(targetPoint,component.getSize());
      g2d.setClip(clip.intersection(componentBounds));
      g2d.translate(-targetRect.x,-targetRect.y);
      painter.paint(component,g2d);
      g2d.translate(targetRect.x,targetRect.y);
    }
  }
}
