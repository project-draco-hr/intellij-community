{
  if (target instanceof PsiPackage) {
    if (!target.processDeclarations(processor,substitutor,null,place)) {
      return false;
    }
  }
 else   if (target instanceof PsiClass) {
    PsiClass[] inners=((PsiClass)target).getInnerClasses();
    if (((PsiClass)target).hasTypeParameters()) {
      substitutor=substitutor.put(PsiSubstitutor.KEY,createRawSubstitutor((PsiClass)target));
    }
    for (    PsiClass inner : inners) {
      if (!processor.execute(inner,substitutor))       return false;
    }
  }
 else {
    LOG.assertTrue(false);
  }
  return true;
}
