{
  final PyReferenceExpression referenceExpression=PsiTreeUtil.getParentOfType(element,PyReferenceExpression.class);
  if (referenceExpression != null) {
    final PsiReference reference=referenceExpression.getReference();
    final PsiElement resolved=reference.resolve();
    if (resolved instanceof PyFunction)     return resolved;
  }
  final PyFunction function=PsiTreeUtil.getParentOfType(element,PyFunction.class);
  if (function != null)   return function;
 else {
    final PyCallExpression callExpression=PsiTreeUtil.getParentOfType(element,PyCallExpression.class);
    if (callExpression != null) {
      return callExpression.resolveCalleeFunction(PyResolveContext.defaultContext());
    }
  }
  return null;
}
