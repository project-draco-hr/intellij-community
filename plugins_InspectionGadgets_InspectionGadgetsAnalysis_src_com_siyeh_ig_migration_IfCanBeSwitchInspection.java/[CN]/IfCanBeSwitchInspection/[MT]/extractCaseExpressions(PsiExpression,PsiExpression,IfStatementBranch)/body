{
  if (expression instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)expression;
    final PsiExpressionList argumentList=methodCallExpression.getArgumentList();
    final PsiExpression[] arguments=argumentList.getExpressions();
    final PsiExpression argument=arguments[0];
    final PsiExpression secondArgument=arguments.length > 1 ? arguments[1] : null;
    final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    final boolean stringType=ExpressionUtils.hasStringType(qualifierExpression);
    if (EquivalenceChecker.getCanonicalPsiEquivalence().expressionsAreEquivalent(switchExpression,argument)) {
      branch.addCaseExpression(stringType ? qualifierExpression : secondArgument);
    }
 else {
      branch.addCaseExpression(argument);
    }
  }
 else   if (expression instanceof PsiPolyadicExpression) {
    final PsiPolyadicExpression polyadicExpression=(PsiPolyadicExpression)expression;
    final PsiExpression[] operands=polyadicExpression.getOperands();
    final IElementType tokenType=polyadicExpression.getOperationTokenType();
    if (JavaTokenType.OROR.equals(tokenType)) {
      for (      PsiExpression operand : operands) {
        extractCaseExpressions(operand,switchExpression,branch);
      }
    }
 else     if (operands.length == 2) {
      final PsiExpression lhs=operands[0];
      final PsiExpression rhs=operands[1];
      if (EquivalenceChecker.getCanonicalPsiEquivalence().expressionsAreEquivalent(switchExpression,rhs)) {
        branch.addCaseExpression(lhs);
      }
 else {
        branch.addCaseExpression(rhs);
      }
    }
  }
 else   if (expression instanceof PsiParenthesizedExpression) {
    final PsiParenthesizedExpression parenthesizedExpression=(PsiParenthesizedExpression)expression;
    final PsiExpression contents=parenthesizedExpression.getExpression();
    extractCaseExpressions(contents,switchExpression,branch);
  }
}
