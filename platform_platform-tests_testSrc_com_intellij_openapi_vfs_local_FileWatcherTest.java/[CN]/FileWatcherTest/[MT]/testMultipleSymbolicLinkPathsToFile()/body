{
  File rootDir=createTestDir("root");
  File aDir=createTestDir(rootDir,"A");
  File bDir=createTestDir(aDir,"B");
  File cDir=createTestDir(bDir,"C");
  File file=createTestFile(cDir,"test.txt");
  File bLink=createSymLink(bDir.getPath(),rootDir.getPath() + "/bLink");
  File cLink=createSymLink(cDir.getPath(),rootDir.getPath() + "/cLink");
  refresh(rootDir);
  String bFilePath=bLink.getPath() + "/" + cDir.getName()+ "/"+ file.getName();
  String cFilePath=cLink.getPath() + "/" + file.getName();
  LocalFileSystem.WatchRequest bRequest=watch(bLink);
  LocalFileSystem.WatchRequest cRequest=watch(cLink);
  try {
    myAccept=true;
    FileUtil.writeToFile(file,"new content");
    assertEvent(VFileContentChangeEvent.class,bFilePath,cFilePath);
    myAccept=true;
    FileUtil.delete(file);
    assertEvent(VFileDeleteEvent.class,bFilePath,cFilePath);
    myAccept=true;
    FileUtil.writeToFile(file,"re-creation");
    assertEvent(VFileCreateEvent.class,bFilePath,cFilePath);
  }
  finally {
    unwatch(bRequest,cRequest);
    delete(rootDir);
  }
}
