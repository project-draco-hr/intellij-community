{
  PsiManager.getInstance(project).addPsiTreeChangeListener(new PsiTreeChangeAdapter(){
    @Override public void childAdded(    @NotNull PsiTreeChangeEvent event){
      process(event.getFile());
    }
    @Override public void childRemoved(    @NotNull PsiTreeChangeEvent event){
      process(event.getFile());
    }
    @Override public void childReplaced(    @NotNull PsiTreeChangeEvent event){
      process(event.getFile());
    }
    @Override public void childMoved(    @NotNull PsiTreeChangeEvent event){
      process(event.getFile());
    }
    @Override public void childrenChanged(    @NotNull PsiTreeChangeEvent event){
      process(event.getFile());
    }
    private void process(    PsiFile file){
      if (file != null && PsiJavaModule.MODULE_INFO_FILE.equals(file.getName())) {
        myCount++;
      }
    }
    @Override public void propertyChanged(    @NotNull PsiTreeChangeEvent event){
      String name=event.getPropertyName();
      if (name == PROP_FILE_NAME || name == PROP_DIRECTORY_NAME || name == PROP_ROOTS) {
        myCount++;
      }
    }
  }
,project);
}
