{
  final CodeStyleSettings settings=CodeStyleSettingsManager.getInstance(myFixture.getProject()).getCurrentSettings();
  final CommonCodeStyleSettings pythonSettings=settings.getCommonSettings(PythonLanguage.getInstance());
  int oldValue=pythonSettings.RIGHT_MARGIN;
  boolean oldMarginValue=settings.isWrapOnTyping(PythonLanguage.getInstance());
  pythonSettings.RIGHT_MARGIN=100;
  settings.setWrapOnTyping(PythonLanguage.getInstance(),true);
  try {
    final String testName="wrap/" + getTestName(true);
    myFixture.configureByFile(testName + ".py");
    for (int i=0; i != 45; ++i) {
      myFixture.type(' ');
    }
    myFixture.checkResultByFile(testName + ".after.py");
  }
  finally {
    pythonSettings.RIGHT_MARGIN=oldValue;
    settings.setWrapOnTyping(PythonLanguage.getInstance(),oldMarginValue);
  }
}
