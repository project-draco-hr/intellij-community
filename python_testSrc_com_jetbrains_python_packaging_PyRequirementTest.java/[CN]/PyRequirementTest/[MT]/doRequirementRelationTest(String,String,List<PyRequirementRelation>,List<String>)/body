{
  assertEquals(versions.size(),relations.size());
  final StringBuilder sb=new StringBuilder(name);
  final List<PyRequirementVersionSpec> expectedVersionSpecs=new ArrayList<>();
  if (extras != null)   sb.append(extras);
  final int initialLength=sb.length();
  for (  Pair<PyRequirementRelation,String> pair : ContainerUtil.zip(relations,versions)) {
    final PyRequirementRelation relation=pair.getFirst();
    final String version=pair.getSecond();
    sb.append(relation).append(version).append(",");
    expectedVersionSpecs.add(new PyRequirementVersionSpec(relation,version));
  }
  if (sb.length() != initialLength) {
    sb.setLength(sb.length() - 1);
  }
  final String options=sb.toString();
  if (extras == null) {
    assertEquals(new PyRequirement(name,expectedVersionSpecs,Collections.singletonList(options)),PyRequirement.fromLine(options));
  }
 else {
    assertEquals(new PyRequirement(name,expectedVersionSpecs,Collections.singletonList(options),StringUtil.trimLeading(extras)),PyRequirement.fromLine(options));
  }
}
