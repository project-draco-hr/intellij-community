{
  long lastModified=System.currentTimeMillis();
  SsiProcessingState.SsiConditionalState state=ssiProcessingState.conditionalState;
  if ("if".equalsIgnoreCase(commandName)) {
    if (state.processConditionalCommandsOnly) {
      state.nestingCount++;
      return lastModified;
    }
    state.nestingCount=0;
    if (evaluateArguments(paramNames,paramValues,ssiProcessingState)) {
      state.branchTaken=true;
    }
 else {
      state.processConditionalCommandsOnly=true;
      state.branchTaken=false;
    }
  }
 else   if ("elif".equalsIgnoreCase(commandName)) {
    if (state.nestingCount > 0)     return lastModified;
    if (state.branchTaken) {
      state.processConditionalCommandsOnly=true;
      return lastModified;
    }
    if (evaluateArguments(paramNames,paramValues,ssiProcessingState)) {
      state.processConditionalCommandsOnly=false;
      state.branchTaken=true;
    }
 else {
      state.processConditionalCommandsOnly=true;
      state.branchTaken=false;
    }
  }
 else   if ("else".equalsIgnoreCase(commandName)) {
    if (state.nestingCount > 0)     return lastModified;
    state.processConditionalCommandsOnly=state.branchTaken;
    state.branchTaken=true;
  }
 else   if ("endif".equalsIgnoreCase(commandName)) {
    if (state.nestingCount > 0) {
      state.nestingCount--;
      return lastModified;
    }
    state.processConditionalCommandsOnly=false;
    state.branchTaken=true;
  }
 else {
    throw new SsiStopProcessingException();
  }
  return lastModified;
}
