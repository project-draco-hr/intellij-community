{
  super(project);
  new ClickListener(){
    @Override public boolean onClick(    @NotNull MouseEvent e,    int clickCount){
      Project project=getProject();
      Editor editor=getEditor();
      final LightVirtualFile selectedFile=getScratchFile();
      if (project == null || editor == null || selectedFile == null)       return false;
      ListPopup popup=NewScratchFileAction.buildLanguagePopup(project,selectedFile.getLanguage(),new Consumer<Language>(){
        @Override public void consume(        Language language){
          selectedFile.setLanguage(LanguageSubstitutors.INSTANCE.substituteLanguage(language,selectedFile,myProject));
          FileContentUtilCore.reparseFiles(selectedFile);
          update();
        }
      }
);
      Dimension dimension=popup.getContent().getPreferredSize();
      Point at=new Point(0,-dimension.height);
      popup.show(new RelativePoint(myPanel,at));
      return true;
    }
  }
.installOn(myPanel);
}
