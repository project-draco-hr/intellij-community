{
  final VirtualFile virtualFile=CommonDataKeys.VIRTUAL_FILE.getData(context);
  boolean enabled=checkEnabled(virtualFile);
  if (!enabled)   return null;
  List<Language> languages=CreateScratchFileAction.getLanguages();
  DefaultActionGroup group=createActionGroup(virtualFile,languages);
  ListPopup popup=JBPopupFactory.getInstance().createActionGroupPopup("Choose language",group,context,JBPopupFactory.ActionSelectionAid.SPEEDSEARCH,false);
  return CreateScratchFileAction.updatePopupSize(popup,languages);
}
