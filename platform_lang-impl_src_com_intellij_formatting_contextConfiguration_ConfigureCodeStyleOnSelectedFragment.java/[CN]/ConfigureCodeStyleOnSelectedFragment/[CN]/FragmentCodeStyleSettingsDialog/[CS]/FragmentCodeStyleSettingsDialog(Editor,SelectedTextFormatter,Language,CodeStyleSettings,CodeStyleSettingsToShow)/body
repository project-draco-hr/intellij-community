{
  super(editor.getContentComponent(),true);
  mySettings=settings;
  mySelectedTextFormatter=selectedTextFormatter;
  myTabbedLanguagePanel=new CodeFragmentCodeStyleSettingsPanel(settings,settingsToShow,language,selectedTextFormatter);
  myEditor=editor;
  myDocument=editor.getDocument();
  String title=CodeInsightBundle.message("configure.code.style.on.fragment.dialog.title");
  setTitle(StringUtil.capitalizeWords(title,true) + ": " + language.getDisplayName());
  setOKButtonText("Save");
  setInitialLocationCallback(new Computable<Point>(){
    @Override public Point compute(){
      return new DialogPositionProvider().calculateLocation();
    }
  }
);
  init();
}
