{
  super(editor.getContentComponent(),true);
  mySettings=settings;
  mySelectedTextFormatter=selectedTextFormatter;
  myTabbedLanguagePanel=new CodeFragmentCodeStyleSettingsPanel(settings,settingsToShow,language,selectedTextFormatter);
  myOKAction=new ApplyToSettings();
  myOKAction.setEnabled(false);
  myTabbedLanguagePanel.setOnSomethingChangedCallback(new Runnable(){
    @Override public void run(){
      boolean isModified=myTabbedLanguagePanel.isModified(mySettings);
      myOKAction.setEnabled(isModified);
    }
  }
);
  myEditor=editor;
  myDocument=editor.getDocument();
  String title=CodeInsightBundle.message("configure.code.style.on.fragment.dialog.title");
  setTitle(StringUtil.capitalizeWords(title,true) + ": " + language.getDisplayName());
  setInitialLocationCallback(new Computable<Point>(){
    @Override public Point compute(){
      return new DialogPositionProvider().calculateLocation();
    }
  }
);
  init();
}
