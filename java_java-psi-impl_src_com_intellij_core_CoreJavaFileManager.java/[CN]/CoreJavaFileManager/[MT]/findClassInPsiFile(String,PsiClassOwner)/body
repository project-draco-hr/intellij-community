{
  final PsiClass[] classes=file.getClasses();
  if (classes.length != 1) {
    return null;
  }
  PsiClass curClass=classes[0];
  Iterator<String> segments=StringUtil.split(classNameWithInnerClassesDotSeparated,".").iterator();
  if (!segments.hasNext() || !segments.next().equals(curClass.getName())) {
    return null;
  }
  while (segments.hasNext()) {
    String innerClassName=segments.next();
    PsiClass innerClass=curClass.findInnerClassByName(innerClassName,false);
    if (innerClass == null) {
      return null;
    }
    curClass=innerClass;
  }
  return curClass;
}
