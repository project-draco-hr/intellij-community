{
  if (myPropertiesMap != null)   return;
  final ASTNode[] props=getPropertiesList().getChildren(PropertiesElementTypes.PROPERTIES);
  MostlySingularMultiMap<String,IProperty> propertiesMap=new MostlySingularMultiMap<String,IProperty>();
  List<IProperty> properties=new ArrayList<IProperty>(props.length);
  for (  final ASTNode prop : props) {
    final Property property=(Property)prop.getPsi();
    String key=property.getUnescapedKey();
    propertiesMap.add(key,property);
    properties.add(property);
  }
  final boolean isAlphaSorted=PropertiesImplUtil.isAlphaSorted(properties);
synchronized (lock) {
    if (myPropertiesMap != null)     return;
    myProperties=properties;
    myPropertiesMap=propertiesMap;
    myAlphaSorted=isAlphaSorted;
  }
}
