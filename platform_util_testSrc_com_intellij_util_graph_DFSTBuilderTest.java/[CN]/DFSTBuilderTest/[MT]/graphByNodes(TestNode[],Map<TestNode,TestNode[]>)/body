{
  final GraphGenerator<TestNode> graph=new GraphGenerator<>(new GraphGenerator.SemiGraph<TestNode>(){
    @Override public Collection<TestNode> getNodes(){
      return Arrays.asList(allNodes);
    }
    @Override public Iterator<TestNode> getIn(    TestNode n){
      return GraphTestUtil.iteratorOfArray(ObjectUtils.notNull(mapIn.get(n),new TestNode[0]));
    }
  }
);
  return graph;
}
