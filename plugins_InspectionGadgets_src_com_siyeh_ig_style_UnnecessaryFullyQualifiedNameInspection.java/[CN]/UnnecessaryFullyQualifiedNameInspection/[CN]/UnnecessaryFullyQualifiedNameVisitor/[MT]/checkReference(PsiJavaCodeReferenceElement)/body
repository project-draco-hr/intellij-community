{
  final PsiElement qualifier=reference.getQualifier();
  if (!(qualifier instanceof PsiJavaCodeReferenceElement)) {
    return;
  }
  final PsiElement parent=reference.getParent();
  if (parent instanceof PsiMethodCallExpression || parent instanceof PsiAssignmentExpression || parent instanceof PsiVariable) {
    return;
  }
  final PsiElement element=PsiTreeUtil.getParentOfType(reference,PsiImportStatementBase.class,PsiPackageStatement.class,JavaCodeFragment.class,PsiAnnotation.class);
  if (element != null && !(element instanceof PsiAnnotation)) {
    return;
  }
  final PsiFile containingFile=reference.getContainingFile();
  if (!(containingFile instanceof PsiJavaFile)) {
    return;
  }
  final PsiElement target=reference.resolve();
  if (!(target instanceof PsiClass)) {
    return;
  }
  final CodeStyleSettings styleSettings=CodeStyleSettingsManager.getSettings(reference.getProject());
  PsiDocComment containingComment=PsiTreeUtil.getParentOfType(reference,PsiDocComment.class);
  if (containingComment != null && acceptFqnInJavadoc((PsiJavaFile)containingFile,reference.getQualifiedName(),styleSettings)) {
    return;
  }
  final PsiJavaCodeReferenceElement qualifierReference=(PsiJavaCodeReferenceElement)qualifier;
  final PsiElement qualifierTarget=qualifierReference.resolve();
  if (!(qualifierTarget instanceof PsiPackage)) {
    return;
  }
  List<PsiJavaCodeReferenceElement> references=new ArrayList<PsiJavaCodeReferenceElement>(2);
  references.add(reference);
  if (styleSettings.INSERT_INNER_CLASS_IMPORTS) {
    collectInnerClassNames(reference,references);
  }
  Collections.reverse(references);
  for (  final PsiJavaCodeReferenceElement aReference : references) {
    final PsiElement referenceTarget=aReference.resolve();
    if (!(referenceTarget instanceof PsiClass)) {
      continue;
    }
    final PsiClass aClass=(PsiClass)referenceTarget;
    final String qualifiedName=aClass.getQualifiedName();
    if (qualifiedName == null) {
      continue;
    }
    if (!ImportUtils.nameCanBeImported(qualifiedName,reference)) {
      continue;
    }
    final boolean inSameFile=aClass.getContainingFile() == containingFile;
    registerError(aReference.getQualifier(),ProblemHighlightType.LIKE_UNUSED_SYMBOL,inSameFile);
    break;
  }
}
