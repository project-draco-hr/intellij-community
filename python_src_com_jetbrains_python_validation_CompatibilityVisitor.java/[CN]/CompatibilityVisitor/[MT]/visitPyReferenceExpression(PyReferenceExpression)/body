{
  super.visitPyElement(node);
  if (shouldBeCompatibleWithPy3()) {
    if (PyNames.BASESTRING.equals(node.getText())) {
      PsiElement res=node.getReference().resolve();
      if (res != null) {
        ProjectFileIndex ind=ProjectRootManager.getInstance(node.getProject()).getFileIndex();
        PsiFile file=res.getContainingFile();
        if (file != null && ind.isInLibraryClasses(file.getVirtualFile())) {
          registerProblem(node,"basestring type is not available in py3");
        }
      }
 else {
        registerProblem(node,"basestring type is not available in py3");
      }
    }
  }
}
