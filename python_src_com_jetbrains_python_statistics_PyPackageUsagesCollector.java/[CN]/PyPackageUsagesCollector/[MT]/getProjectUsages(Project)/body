{
  Set<UsageDescriptor> result=new HashSet<UsageDescriptor>();
  for (  Module m : ModuleManager.getInstance(project).getModules()) {
    Sdk pythonSdk=PythonSdkType.findPythonSdk(m);
    if (pythonSdk != null) {
      List<PyRequirement> requirements=PyPackageManagerImpl.getRequirements(m);
      if (requirements != null) {
        Collection<String> packages;
        try {
          packages=new HashSet<String>(PyPIPackageUtil.INSTANCE.getPackageNames());
        }
 catch (        IOException e) {
          continue;
        }
        for (        PyRequirement requirement : requirements) {
          String name=requirement.getName();
          if (packages.contains(name)) {
            result.add(new UsageDescriptor(name,1));
          }
        }
      }
    }
  }
  return result;
}
