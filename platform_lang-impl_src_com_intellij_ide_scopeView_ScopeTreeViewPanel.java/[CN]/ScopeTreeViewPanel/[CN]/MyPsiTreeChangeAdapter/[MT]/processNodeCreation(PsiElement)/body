{
  if (psiElement instanceof PsiFile && !isInjected((PsiFile)psiElement)) {
    final PackageDependenciesNode rootToReload=myBuilder.addFileNode((PsiFile)psiElement);
    if (rootToReload != null) {
      reload(rootToReload);
    }
  }
 else   if (psiElement instanceof PsiDirectory) {
    final PsiElement[] children=psiElement.getChildren();
    if (children.length > 0) {
      queueRefreshScope(getCurrentScope(),(PsiDirectory)psiElement);
    }
 else {
      final PackageDependenciesNode node=myBuilder.addDirNode((PsiDirectory)psiElement);
      if (node != null) {
        reload((DefaultMutableTreeNode)node.getParent());
      }
    }
  }
}
