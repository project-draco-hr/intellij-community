{
  final TreePath[] treePaths=myTree.getSelectionPaths();
  if (treePaths != null) {
    Set<PsiElement> result=new HashSet<PsiElement>();
    for (    TreePath path : treePaths) {
      final Object component=path.getLastPathComponent();
      if (component instanceof PackageDependenciesNode) {
        PackageDependenciesNode node=(PackageDependenciesNode)component;
        final PsiElement psiElement=node.getPsiElement();
        if (psiElement != null && psiElement.isValid()) {
          result.add(psiElement);
        }
      }
    }
    return PsiUtilCore.toPsiElementArray(result);
  }
  return PsiElement.EMPTY_ARRAY;
}
