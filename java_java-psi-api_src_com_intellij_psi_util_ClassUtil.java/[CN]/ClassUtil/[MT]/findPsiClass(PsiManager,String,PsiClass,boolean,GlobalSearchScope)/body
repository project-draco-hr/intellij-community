{
  for (int pos=0; pos < externalName.length(); pos++) {
    if (externalName.charAt(pos) == '$') {
      PsiClass parentClass=psiClass;
      if (parentClass == null) {
        parentClass=JavaPsiFacade.getInstance(psiManager.getProject()).findClass(externalName.substring(0,pos),scope);
      }
      if (parentClass == null)       continue;
      PsiClass res=findSubclass(psiManager,externalName.substring(pos + 1),parentClass,jvmCompatible);
      if (res != null)       return res;
    }
  }
  return JavaPsiFacade.getInstance(psiManager.getProject()).findClass(externalName,scope);
}
