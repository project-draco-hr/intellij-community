{
  final InspectionResultsView view=getView(e);
  final InspectionProjectProfileManager profileManager=InspectionProjectProfileManager.getInstance(view.getProject());
  final InspectionToolWrapper toolWrapper=view.getTree().getSelectedToolWrapper();
  InspectionProfile inspectionProfile=view.getCurrentProfile();
  final boolean profileIsDefined=view.isProfileDefined();
  if (!profileIsDefined) {
    inspectionProfile=guessProfileToSelect(view,profileManager);
  }
  if (toolWrapper != null) {
    final HighlightDisplayKey key=HighlightDisplayKey.find(toolWrapper.getShortName());
    if (key != null) {
      if (new EditInspectionToolsSettingsAction(key).editToolSettings(view.getProject(),(InspectionProfileImpl)inspectionProfile,profileIsDefined) && profileIsDefined) {
        view.updateCurrentProfile();
      }
      return;
    }
  }
  if (EditInspectionToolsSettingsAction.editToolSettings(view.getProject(),inspectionProfile,profileIsDefined,null) && profileIsDefined) {
    view.updateCurrentProfile();
  }
}
