{
  if (cell instanceof CodeCell) {
    c.gridwidth=2;
    c.gridx=0;
    CodeCell codeCell=(CodeCell)cell;
    addPromptPanel(codeCell.getPromptNumber(),"In",new CodeSourcePanel(myProject,myParent,codeCell.getSourceAsString()),c);
    c.gridx=1;
    c.gridwidth=1;
    for (    CellOutput cellOutput : codeCell.getCellOutputs()) {
      c.gridy++;
      if (cellOutput instanceof PngCellOutput) {
        addPromptPanel(codeCell.getPromptNumber(),"Out",new PngPanel(myProject,(PngCellOutput)cellOutput),c);
      }
 else       if (cellOutput.getSourceAsString() != null) {
        addPromptPanel(codeCell.getPromptNumber(),"Out",new CodeOutputPanel(cellOutput.getSourceAsString()),c);
      }
    }
  }
 else   if (cell instanceof MarkdownCell) {
    final MarkdownPanel comp=new MarkdownPanel(myProject,(MarkdownCell)cell);
    add(comp,c);
    myRenderedCells.add(RenderedCell.create(comp));
  }
 else   if (cell instanceof HeadingCell) {
    final HeadingPanel comp=new HeadingPanel(myProject,(HeadingCell)cell);
    add(comp,c);
    myRenderedCells.add(RenderedCell.create(comp));
  }
 else {
    throw new UnsupportedOperationException(cell.getClass().toString());
  }
  return c.gridy + 1;
}
