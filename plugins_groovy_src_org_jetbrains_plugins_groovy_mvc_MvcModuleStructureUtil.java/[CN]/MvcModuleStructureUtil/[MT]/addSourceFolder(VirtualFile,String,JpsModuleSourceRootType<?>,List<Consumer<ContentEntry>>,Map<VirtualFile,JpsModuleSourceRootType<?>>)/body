{
  final VirtualFile src=root.findFileByRelativePath(relativePath);
  if (src == null) {
    return;
  }
  JpsModuleSourceRootType<?> existingRootType=sourceRoots.get(src);
  if (rootType == JavaSourceRootType.TEST_SOURCE && (existingRootType != null && existingRootType != JavaSourceRootType.TEST_SOURCE)) {
    actions.add(new Consumer<ContentEntry>(){
      @Override public void consume(      ContentEntry entry){
        for (        SourceFolder folder : entry.getSourceFolders()) {
          if (Comparing.equal(folder.getFile(),src)) {
            entry.removeSourceFolder(folder);
            entry.addSourceFolder(src,rootType);
            break;
          }
        }
      }
    }
);
    return;
  }
  actions.add(new Consumer<ContentEntry>(){
    @Override public void consume(    ContentEntry contentEntry){
      contentEntry.addSourceFolder(src,rootType);
    }
  }
);
}
