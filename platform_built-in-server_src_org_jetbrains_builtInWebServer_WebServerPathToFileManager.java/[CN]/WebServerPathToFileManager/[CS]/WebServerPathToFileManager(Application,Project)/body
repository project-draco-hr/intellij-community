{
  this.project=project;
  application.getMessageBus().connect(project).subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener.Adapter(){
    @Override public void after(    @NotNull List<? extends VFileEvent> events){
      for (      VFileEvent event : events) {
        if (event instanceof VFileContentChangeEvent) {
          VirtualFile file=((VFileContentChangeEvent)event).getFile();
          for (          WebServerRootsProvider rootsProvider : WebServerRootsProvider.EP_NAME.getExtensions()) {
            if (rootsProvider.isClearCacheOnFileContentChanged(file)) {
              clearCache();
              break;
            }
          }
        }
 else {
          clearCache();
          break;
        }
      }
    }
  }
);
  project.getMessageBus().connect().subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    @Override public void rootsChanged(    ModuleRootEvent event){
      clearCache();
    }
  }
);
}
