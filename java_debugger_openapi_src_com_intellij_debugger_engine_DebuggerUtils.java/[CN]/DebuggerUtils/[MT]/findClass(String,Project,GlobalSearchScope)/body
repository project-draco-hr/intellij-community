{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  final PsiManager psiManager=PsiManager.getInstance(project);
  final JavaPsiFacade javaPsiFacade=JavaPsiFacade.getInstance(psiManager.getProject());
  if (getArrayClass(className) != null) {
    return javaPsiFacade.getElementFactory().getArrayClass(LanguageLevelProjectExtension.getInstance(psiManager.getProject()).getLanguageLevel());
  }
  if (project.isDefault()) {
    return null;
  }
  PsiClass psiClass=ClassUtil.findPsiClass(PsiManager.getInstance(project),className,null,true,scope);
  if (psiClass == null) {
    GlobalSearchScope globalScope=GlobalSearchScope.allScope(project);
    if (!globalScope.equals(scope)) {
      psiClass=ClassUtil.findPsiClass(PsiManager.getInstance(project),className,null,true,globalScope);
    }
  }
  return psiClass;
}
