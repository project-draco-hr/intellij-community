{
  final String name=getTestName(true);
  final Map<String,PsiElement> map=configureByFile("/refactoring/inlinelocal/" + name + ".before.py");
  try {
    PsiElement element=map.values().iterator().next().getParent();
    if (element instanceof PyReferenceExpression)     element=((PyReferenceExpression)element).resolve();
    PyInlineLocalHandler.inline(myFixture.getProject(),myFixture.getEditor(),element);
    if (expectedError != null)     fail("expected error: '" + expectedError + "', got none");
  }
 catch (  Exception e) {
    assertEquals(expectedError,e.getMessage());
    return;
  }
  myFixture.checkResultByFile("/refactoring/inlinelocal/" + name + ".after.py");
}
