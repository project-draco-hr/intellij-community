{
  final String name=getTestName(true);
  myFixture.configureByFile("/refactoring/inlinelocal/" + name + ".before.py");
  try {
    PsiElement element=TargetElementUtilBase.findTargetElement(myFixture.getEditor(),TargetElementUtilBase.getInstance().getReferenceSearchFlags());
    PyInlineLocalHandler handler=PyInlineLocalHandler.getInstance();
    handler.inlineElement(myFixture.getProject(),myFixture.getEditor(),element);
    if (expectedError != null)     fail("expected error: '" + expectedError + "', got none");
  }
 catch (  Exception e) {
    if (!Comparing.equal(e.getMessage(),expectedError)) {
      e.printStackTrace();
    }
    assertEquals(expectedError,e.getMessage());
    return;
  }
  myFixture.checkResultByFile("/refactoring/inlinelocal/" + name + ".after.py");
}
