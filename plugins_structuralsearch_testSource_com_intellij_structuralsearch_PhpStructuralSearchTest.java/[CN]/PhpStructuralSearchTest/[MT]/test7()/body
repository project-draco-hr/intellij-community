{
  String s="<?php\n" + "foreach ($names as $name) {\n" + "  $command = 1;"+ "}\n"+ "foreach ($names as $name) {}\n"+ "foreach ($a as $b) {\n"+ "  $command = 1;\n"+ "  echo 'hello';\n"+ "}\n"+ "foreach ($a as $b) {\n"+ "  f('hello');\n"+ "  $mu = 1;\n"+ "  f('abacaba');\n"+ "}\n"+ "foreach ($a as $b) {\n"+ "  echo '1';\n"+ "  echo '2';\n"+ "  $mu = 1;\n"+ "}";
  doTest(s,"foreach('_T as '_T1)",5,5);
  doTest(s,"foreach('_T as '_T1) {$command = 1;}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2 = 1;}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2 = '_T3;}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2;}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2*}",5,5);
  doTest(s,"foreach('_T as '_T1) {'_T2+}",4,4);
  doTest(s,"foreach('_T as '_T1) {'_T2 '_T3}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2 '_T3 '_T4}",2,2);
  doTest(s,"foreach('_T as '_T1) {'_T2 $mu = 1; '_T3}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2; $mu = 1; '_T3;}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2* $var$ = 1; '_T3*}",4,4);
  doTest(s,"foreach('_T as '_T1) {'_T2* $var$ = $value$; '_T3*}",4,4);
  doTest(s,"foreach('_T as '_T1) {'_T2+ $var$ = $value$; '_T3*}",2,2);
  doTest(s,"foreach('_T as '_T1) {'_T2+ $var$ = $value$; '_T3+}",1,1);
  doTest(s,"foreach('_T as '_T1) {'_T2* $var$ = $value$; '_T3+}",2,2);
}
