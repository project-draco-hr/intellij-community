{
  WorkingCopyFormat format=getWorkingCopyFormat(file);
  boolean is18=WorkingCopyFormat.ONE_DOT_EIGHT.equals(format);
  boolean isUnknown=WorkingCopyFormat.UNKNOWN.equals(format);
  return is18 ? cmdClientFactory : (isUnknown ? getFactory() : getFactoryFromSettings());
}
