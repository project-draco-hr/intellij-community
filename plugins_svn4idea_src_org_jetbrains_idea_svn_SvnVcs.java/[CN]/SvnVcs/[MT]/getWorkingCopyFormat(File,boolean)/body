{
  WorkingCopyFormat format=WorkingCopyFormat.UNKNOWN;
  if (useMapping) {
    RootUrlInfo rootInfo=getSvnFileUrlMapping().getWcRootForFilePath(ioFile);
    format=rootInfo != null ? rootInfo.getFormat() : WorkingCopyFormat.UNKNOWN;
  }
  return WorkingCopyFormat.UNKNOWN.equals(format) ? SvnFormatSelector.findRootAndGetFormat(ioFile) : format;
}
