{
  boolean is18OrGreater=format.isOrGreater(WorkingCopyFormat.ONE_DOT_EIGHT);
  boolean isUnknown=WorkingCopyFormat.UNKNOWN.equals(format);
  return is18OrGreater ? cmdClientFactory : (!isUnknown && !isSupportedByCommandLine(format) ? svnKitClientFactory : (useProjectRootForUnknown && isUnknown ? getFactory() : getFactoryFromSettings()));
}
