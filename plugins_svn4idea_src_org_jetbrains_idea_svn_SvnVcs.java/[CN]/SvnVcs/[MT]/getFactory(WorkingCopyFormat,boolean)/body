{
  boolean is18OrGreater=format.isOrGreater(WorkingCopyFormat.ONE_DOT_EIGHT);
  boolean is16=WorkingCopyFormat.ONE_DOT_SIX.equals(format);
  boolean isUnknown=WorkingCopyFormat.UNKNOWN.equals(format);
  return is18OrGreater ? cmdClientFactory : (is16 ? svnKitClientFactory : (useProjectRootForUnknown && isUnknown ? getFactory() : getFactoryFromSettings()));
}
