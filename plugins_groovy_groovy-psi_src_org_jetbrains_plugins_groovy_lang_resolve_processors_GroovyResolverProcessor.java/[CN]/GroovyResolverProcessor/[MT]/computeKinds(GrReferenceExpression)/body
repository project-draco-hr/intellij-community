{
  if (ref.hasAt())   return EnumSet.of(GroovyResolveKind.FIELD);
  if (ref.hasMemberPointer())   return EnumSet.of(GroovyResolveKind.METHOD);
  final EnumSet<GroovyResolveKind> result=EnumSet.allOf(GroovyResolveKind.class);
  if (!ResolveUtil.canBeClass(ref))   result.remove(GroovyResolveKind.CLASS);
  if (!ResolveUtil.canBePackage(ref))   result.remove(GroovyResolveKind.PACKAGE);
  if (ref.isQualified())   result.remove(GroovyResolveKind.VARIABLE);
  if (!(ref.getParent() instanceof GrMethodCall))   result.remove(GroovyResolveKind.METHOD);
  return result;
}
