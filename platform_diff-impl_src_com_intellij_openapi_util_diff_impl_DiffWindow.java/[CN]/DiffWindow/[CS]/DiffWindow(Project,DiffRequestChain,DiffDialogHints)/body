{
  myProject=project;
  myHints=hints;
  String dialogGroupKey=requestChain.getUserData(DiffUserDataKeys.DIALOG_GROUP_KEY);
  if (dialogGroupKey == null)   dialogGroupKey="DiffContextDialog";
  myProcessor=new MyCacheDiffRequestChainProcessor(project,requestChain);
  myWrapper=new WindowWrapperBuilder(DiffUtil.getWindowMode(hints),myProcessor.getComponent()).setProject(project).setParent(hints.getParent()).setDimensionServiceKey(dialogGroupKey).setOnShowCallback(new Runnable(){
    @Override public void run(){
      myProcessor.updateRequest();
      myProcessor.requestFocus();
    }
  }
).build();
  myProcessor.init();
  myWrapper.setImage(ImageLoader.loadFromResource("/diff/Diff.png"));
  Disposer.register(myWrapper,myProcessor);
}
