{
  if (myShouldScroll && myScrollToChange != null) {
    myShouldScroll=!doScrollToChange(myScrollToChange);
  }
  if (myShouldScroll && myNavigationContext != null) {
    myShouldScroll=!doScrollToContext(myNavigationContext);
  }
  if (myShouldScroll && myCaretPosition != null && myCaretPosition.length == 2) {
    LogicalPosition twosidePosition=myMasterSide.selectNotNull(myCaretPosition);
    int onesideLine=transferLineToOneside(myMasterSide,twosidePosition.line);
    LogicalPosition position=new LogicalPosition(onesideLine,twosidePosition.column);
    myEditor.getCaretModel().moveToLogicalPosition(position);
    if (myEditorPosition != null && myEditorPosition.isSame(position)) {
      DiffUtil.scrollToPoint(myEditor,myEditorPosition.myPoints[0]);
    }
 else {
      DiffUtil.scrollToCaret(myEditor);
    }
    myShouldScroll=false;
  }
  if (myShouldScroll) {
    doScrollToChange(ScrollToPolicy.FIRST_CHANGE);
  }
  myShouldScroll=false;
}
