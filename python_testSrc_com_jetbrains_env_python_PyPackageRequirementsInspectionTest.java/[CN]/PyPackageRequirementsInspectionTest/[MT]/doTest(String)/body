{
  final String dir=String.format("inspections/PyPackageRequirementsInspection/%s",getTestName(false));
  myFixture.enableInspections(PyPackageRequirementsInspection.class);
  PyEnvTestCase.runTest(new PyTestTask(){
    @Override public void runTestOn(    String sdkHome) throws Exception {
      final Sdk sdk=createTempSdk(sdkHome);
      final String perSdkDir=Integer.toHexString(System.identityHashCode(sdk));
      final VirtualFile root=myFixture.copyDirectoryToProject(dir,perSdkDir);
      assertNotNull(root);
      final Module module=getSingleModule(myFixture.getProject());
      setupModuleSdk(module,sdk,root);
      try {
        final VirtualFile file=root.findFileByRelativePath(filename);
        assertNotNull(file);
        myFixture.testHighlighting(true,true,true,file);
      }
  finally {
        PsiTestUtil.removeAllRoots(module,sdk);
      }
    }
    @Override public Set<String> getTags(){
      return TAGS;
    }
  }
,getTestName(false));
}
