{
  try {
    writeIdeaConfig2SubversionConfig(repositoryUrl);
    Command command=new Command(commandName);
    command.setConfigDir(myAuthCallback.getSpecialConfigDir());
    command.setWorkingDirectory(workingDirectory);
    command.setResultBuilder(listener);
    command.addParameters(parameters);
    command.saveOriginalParameters();
    while (true) {
      command.addParameters("--non-interactive");
      final CommandExecutor executor=newExecutor(command);
      executor.run();
      final Integer exitCode=executor.getExitCodeReference();
      if (exitCode == null || exitCode != 0) {
        logNullExitCode(executor,exitCode);
        if (executor.getErrorOutput().length() > 0) {
          final String errText=executor.getErrorOutput().trim();
          final AuthCallbackCase callback=createCallback(errText,repositoryUrl);
          if (callback != null) {
            cleanup(executor,workingDirectory);
            if (callback.getCredentials(errText)) {
              if (myAuthCallback.getSpecialConfigDir() != null) {
                command.setConfigDir(myAuthCallback.getSpecialConfigDir());
              }
              command.setParameters(updateParameters(callback,parameters));
              continue;
            }
          }
          throw new SvnBindException(errText);
        }
 else {
          if (exitCode != null) {
            throw new SvnBindException("Svn process exited with error code: " + exitCode);
          }
        }
      }
 else       if (executor.getErrorOutput().length() > 0) {
        LOG.info("Detected warning - " + executor.getErrorOutput());
      }
      return executor;
    }
  }
  finally {
    myAuthCallback.reset();
  }
}
