{
  final CommandExecutor executor;
  if (!(Registry.is("svn.use.terminal") && isForSshRepository(command)) || isLocal(command)) {
    command.putIfNotPresent("--non-interactive");
    executor=new CommandExecutor(exePath,command);
  }
 else {
    executor=newTerminalExecutor(command);
    ((TerminalExecutor)executor).addInteractiveListener(new TerminalSshModule(this,executor));
  }
  return executor;
}
