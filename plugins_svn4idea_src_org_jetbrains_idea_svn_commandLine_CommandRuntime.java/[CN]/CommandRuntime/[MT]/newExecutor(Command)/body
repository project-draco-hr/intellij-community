{
  final CommandExecutor executor;
  if (!Registry.is("svn.use.terminal") || isLocal(command)) {
    command.putIfNotPresent("--non-interactive");
    executor=new CommandExecutor(exePath,command);
  }
 else {
    executor=newTerminalExecutor(command);
    ((TerminalExecutor)executor).addInteractiveListener(new TerminalSshModule(this,executor));
    ((TerminalExecutor)executor).addInteractiveListener(new TerminalSslCertificateModule(this,executor));
    ((TerminalExecutor)executor).addInteractiveListener(new TerminalUserNamePasswordModule(this,executor));
  }
  return executor;
}
