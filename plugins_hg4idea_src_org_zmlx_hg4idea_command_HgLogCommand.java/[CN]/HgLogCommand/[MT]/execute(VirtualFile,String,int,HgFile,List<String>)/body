{
  List<String> arguments=new LinkedList<String>();
  if (myIncludeRemoved) {
    if (!(myFollowCopies && myLogFile)) {
      arguments.add("--removed");
    }
  }
  if (myFollowCopies) {
    arguments.add("--follow");
    if (!myLargeFilesWithFollowSupported) {
      arguments.add("--config");
      arguments.add("extensions.largefiles=!");
    }
  }
  arguments.add("--template");
  arguments.add(template);
  if (limit != -1) {
    arguments.add("--limit");
    arguments.add(String.valueOf(limit));
  }
  if (argsForCmd != null) {
    arguments.addAll(argsForCmd);
  }
  if (myLogFile && hgFile != null) {
    arguments.add(hgFile.getRelativePath());
  }
  return new HgCommandExecutor(myProject).executeInCurrentThread(repo,"log",arguments);
}
