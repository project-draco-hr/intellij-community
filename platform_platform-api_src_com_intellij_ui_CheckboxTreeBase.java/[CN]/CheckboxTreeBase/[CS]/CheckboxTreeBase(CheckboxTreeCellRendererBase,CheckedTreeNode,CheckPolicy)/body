{
  myEventDispatcher=EventDispatcher.create(CheckboxTreeListener.class);
  myEventDispatcher.addListener(new CheckboxTreeListener(){
    @Override public void mouseDoubleClicked(    @NotNull CheckedTreeNode node){
      onDoubleClick(node);
    }
    @Override public void nodeStateChanged(    @NotNull CheckedTreeNode node){
      CheckboxTreeBase.this.onNodeStateChanged(node);
    }
    @Override public void beforeNodeStateChanged(    @NotNull CheckedTreeNode node){
      CheckboxTreeBase.this.nodeStateWillChange(node);
    }
  }
);
  myHelper=new CheckboxTreeHelper(checkPolicy,myEventDispatcher);
  myHelper.initTree(this,this,cellRenderer);
  if (root != null) {
    setModel(new DefaultTreeModel(root));
    setSelectionRow(0);
  }
}
