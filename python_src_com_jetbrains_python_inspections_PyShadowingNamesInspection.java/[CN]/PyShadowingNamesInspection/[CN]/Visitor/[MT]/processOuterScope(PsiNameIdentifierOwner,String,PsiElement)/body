{
  if ("_".equals(name)) {
    return;
  }
  final ScopeOwner owner=ScopeUtil.getScopeOwner(element);
  if (owner != null) {
    final ScopeOwner nextOwner=ScopeUtil.getScopeOwner(owner);
    if (nextOwner != null) {
      final ResolveProcessor processor=new ResolveProcessor(name);
      PyResolveUtil.scopeCrawlUp(processor,nextOwner,null,name,null);
      final PsiElement resolved=processor.getResult();
      if (resolved != null) {
        final Scope scope=ControlFlowCache.getScope(owner);
        if (scope.isGlobal(name) || scope.isNonlocal(name)) {
          return;
        }
        registerProblem(problemElement,String.format("Shadows name '%s' from outer scope",name),ProblemHighlightType.WEAK_WARNING,null,new PyRenameElementQuickFix());
      }
    }
  }
}
