{
  startElement(expression);
  PsiExpression rExpr=expression.getRExpression();
  myStartStatementStack.pushStatement(rExpr == null ? expression : rExpr,false);
  myEndStatementStack.pushStatement(rExpr == null ? expression : rExpr,false);
  PsiExpression lExpr=PsiUtil.skipParenthesizedExprDown(expression.getLExpression());
  if (lExpr instanceof PsiReferenceExpression) {
    if (rExpr != null) {
      rExpr.accept(this);
    }
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)lExpr;
    PsiExpression qualifierExpression=referenceExpression.getQualifierExpression();
    PsiVariable variable=getUsedVariable(referenceExpression);
    if (qualifierExpression == null || qualifierExpression instanceof PsiThisExpression || variable instanceof PsiField && variable.hasModifierProperty(PsiModifier.STATIC)) {
      if (variable != null) {
        if (myAssignmentTargetsAreElements) {
          startElement(lExpr);
        }
        if (expression.getOperationTokenType() != JavaTokenType.EQ) {
          generateReadInstruction(variable);
        }
        generateWriteInstruction(variable);
        if (myAssignmentTargetsAreElements)         finishElement(lExpr);
      }
    }
 else {
      lExpr.accept(this);
    }
  }
 else   if (lExpr != null) {
    lExpr.accept(this);
    if (rExpr != null) {
      rExpr.accept(this);
    }
  }
  myStartStatementStack.popStatement();
  myEndStatementStack.popStatement();
  finishElement(expression);
}
