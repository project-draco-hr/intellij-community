{
  if (file instanceof IpnbPyFragment) {
    if (problem.getCode().equals("W292")) {
      return true;
    }
    if (problem.getCode().equals("E402") && targetElement != null) {
      final PyImportStatementBase importStatement=PsiTreeUtil.getParentOfType(targetElement,PyImportStatementBase.class);
      if (importStatement != null && importStatement.getParent() == file) {
        boolean containsMagicCommandsBefore=false;
        PsiElement prev=PyPsiUtils.getPrevNonCommentSibling(importStatement,true);
        while (prev != null) {
          if (prev instanceof PyEmptyExpression && prev.getText().startsWith("%")) {
            containsMagicCommandsBefore=true;
          }
 else           if (!(isModuleLevelDocstring(prev,(PyFile)file) || prev instanceof PyImportStatementBase)) {
            return false;
          }
          prev=PyPsiUtils.getPrevNonCommentSibling(prev,true);
        }
        return containsMagicCommandsBefore;
      }
    }
  }
  return false;
}
