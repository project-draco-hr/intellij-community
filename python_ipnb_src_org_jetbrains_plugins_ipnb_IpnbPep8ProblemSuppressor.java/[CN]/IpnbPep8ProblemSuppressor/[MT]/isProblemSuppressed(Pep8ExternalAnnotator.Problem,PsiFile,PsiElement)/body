{
  if (file instanceof IpnbPyFragment) {
    if (problem.getCode().equals("W292")) {
      return true;
    }
    if (problem.getCode().equals("E402") && targetElement != null) {
      final PyImportStatement importStatement=PsiTreeUtil.getParentOfType(targetElement,PyImportStatement.class);
      if (importStatement != null && importStatement.getParent() == file) {
        boolean containsMagicCommandsBefore=false;
        PsiElement prev=PyPsiUtils.getPrevNonWhitespaceSibling(importStatement);
        while (prev != null) {
          if (prev instanceof PyEmptyExpression && prev.getText().startsWith("%")) {
            containsMagicCommandsBefore=true;
          }
 else           if (!isModuleLevelDocstring(prev,(PyFile)file)) {
            return false;
          }
          prev=PyPsiUtils.getPrevNonWhitespaceSibling(prev);
        }
        return containsMagicCommandsBefore;
      }
    }
  }
  return false;
}
