{
  final File[] files=new File(tracesDirectory).listFiles();
  if (files == null) {
    System.out.println("No traces found.");
    return;
  }
  System.out.println("Preparing zip.");
  try (ZipOutputStream zipOutputStream=new ZipOutputStream(new FileOutputStream(tracesDirectory + File.separator + "out.zip"))){
    for (    File file : files) {
      ZipUtil.addFileToZip(zipOutputStream,file,"/" + file.getName(),null,null);
    }
    System.out.println("Zip prepared.");
    for (    File file : files) {
      FileUtil.delete(file);
    }
  }
 catch (  Throwable ex) {
    ex.printStackTrace();
  }
}
