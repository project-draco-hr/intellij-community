{
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(myProject).getFileIndex();
  VirtualFile fileExcludeRoot=mySrcDir1.createChildData(this,"fileExcludeRoot.txt");
  assertTrue(fileIndex.isInContent(fileExcludeRoot));
  assertTrue(fileIndex.isInSource(fileExcludeRoot));
  checkInfoNull(fileExcludeRoot);
  assertIteratedContent(fileIndex,Arrays.asList(fileExcludeRoot),null);
  PsiTestUtil.addExcludedRoot(myModule,fileExcludeRoot);
  assertFalse(fileIndex.isInContent(fileExcludeRoot));
  assertFalse(fileIndex.isInSource(fileExcludeRoot));
  checkInfoNull(fileExcludeRoot);
  assertIteratedContent(fileIndex,null,Arrays.asList(fileExcludeRoot));
  PsiTestUtil.removeExcludedRoot(myModule,fileExcludeRoot);
  assertTrue(fileIndex.isInContent(fileExcludeRoot));
  assertTrue(fileIndex.isInSource(fileExcludeRoot));
  checkInfoNull(fileExcludeRoot);
  assertIteratedContent(fileIndex,Arrays.asList(fileExcludeRoot),null);
}
