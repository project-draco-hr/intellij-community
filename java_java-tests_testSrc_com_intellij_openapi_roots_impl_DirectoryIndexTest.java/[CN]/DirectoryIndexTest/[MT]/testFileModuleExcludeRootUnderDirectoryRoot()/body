{
  VirtualFile fileExcludeRoot=createChildData(mySrcDir1,"fileExcludeRoot.txt");
  assertTrue(myFileIndex.isInContent(fileExcludeRoot));
  assertTrue(myFileIndex.isInSource(fileExcludeRoot));
  assertIteratedContent(myFileIndex,Arrays.asList(fileExcludeRoot),null);
  PsiTestUtil.addExcludedRoot(myModule,fileExcludeRoot);
  assertFalse(myFileIndex.isInContent(fileExcludeRoot));
  assertFalse(myFileIndex.isInSource(fileExcludeRoot));
  assertNull(myFileIndex.getContentRootForFile(fileExcludeRoot));
  assertEquals(myModule1Dir,myFileIndex.getContentRootForFile(fileExcludeRoot,false));
  assertNull(myFileIndex.getModuleForFile(fileExcludeRoot));
  assertEquals(myModule,myFileIndex.getModuleForFile(fileExcludeRoot,false));
  assertExcluded(fileExcludeRoot,myModule);
  assertIteratedContent(myFileIndex,null,Arrays.asList(fileExcludeRoot));
  PsiTestUtil.removeExcludedRoot(myModule,fileExcludeRoot);
  assertTrue(myFileIndex.isInContent(fileExcludeRoot));
  assertTrue(myFileIndex.isInSource(fileExcludeRoot));
  assertIteratedContent(myFileIndex,Arrays.asList(fileExcludeRoot),null);
}
