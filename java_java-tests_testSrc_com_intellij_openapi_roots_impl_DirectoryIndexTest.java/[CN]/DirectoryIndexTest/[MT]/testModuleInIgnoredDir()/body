{
  final VirtualFile ignored=createChildDirectory(myRootVFile,"RCS");
  assertTrue(FileTypeManager.getInstance().isFileIgnored(ignored));
  new WriteCommandAction.Simple(getProject()){
    @Override protected void run() throws Throwable {
      ModuleManager moduleManager=ModuleManager.getInstance(myProject);
      ModifiableModuleModel model=moduleManager.getModifiableModel();
      model.disposeModule(myModule);
      model.disposeModule(myModule2);
      model.disposeModule(myModule3);
      model.commit();
      Module module=moduleManager.newModule(myRootVFile.getPath() + "/newModule.iml",StdModuleTypes.JAVA.getId());
      PsiTestUtil.addContentRoot(module,ignored);
      checkInfo(ignored,module,false,false,null,null);
    }
  }
.execute().throwException();
}
