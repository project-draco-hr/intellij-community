{
  assertNotInProject(myRootVFile);
  VirtualFile temp=createChildDirectory(myRootVFile,"temp");
  VirtualFile fileSourceRoot=createChildData(myRootVFile,"fileSourceRoot.txt");
  assertNotInProject(fileSourceRoot);
  PsiTestUtil.addContentRoot(myModule,fileSourceRoot);
  PsiTestUtil.addSourceRoot(myModule,fileSourceRoot);
  checkInfo(fileSourceRoot,myModule,false,false,"",JavaSourceRootType.SOURCE,myModule);
  assertTrue(myFileIndex.isInContent(fileSourceRoot));
  assertTrue(myFileIndex.isInSource(fileSourceRoot));
  delete(fileSourceRoot);
  assertNotInProject(fileSourceRoot);
  assertFalse(myFileIndex.isInContent(fileSourceRoot));
  assertFalse(myFileIndex.isInSource(fileSourceRoot));
  fileSourceRoot=createChildData(myRootVFile,"fileSourceRoot.txt");
  checkInfo(fileSourceRoot,myModule,false,false,"",JavaSourceRootType.SOURCE,myModule);
  assertTrue(myFileIndex.isInContent(fileSourceRoot));
  assertTrue(myFileIndex.isInSource(fileSourceRoot));
  delete(fileSourceRoot);
  assertNotInProject(fileSourceRoot);
  assertFalse(myFileIndex.isInContent(fileSourceRoot));
  assertFalse(myFileIndex.isInSource(fileSourceRoot));
  fileSourceRoot=createChildData(temp,"fileSourceRoot.txt");
  assertNotInProject(fileSourceRoot);
  move(fileSourceRoot,myRootVFile);
  checkInfo(fileSourceRoot,myModule,false,false,"",JavaSourceRootType.SOURCE,myModule);
  assertTrue(myFileIndex.isInContent(fileSourceRoot));
  assertTrue(myFileIndex.isInSource(fileSourceRoot));
  delete(fileSourceRoot);
  assertNotInProject(fileSourceRoot);
  assertFalse(myFileIndex.isInContent(fileSourceRoot));
  assertFalse(myFileIndex.isInSource(fileSourceRoot));
  fileSourceRoot=createChildData(temp,"fileSourceRoot.txt");
  assertNotInProject(fileSourceRoot);
  fileSourceRoot=copy(fileSourceRoot,myRootVFile,"fileSourceRoot.txt");
  checkInfo(fileSourceRoot,myModule,false,false,"",JavaSourceRootType.SOURCE,myModule);
  assertTrue(myFileIndex.isInContent(fileSourceRoot));
  assertTrue(myFileIndex.isInSource(fileSourceRoot));
  delete(fileSourceRoot);
  assertNotInProject(fileSourceRoot);
  assertFalse(myFileIndex.isInContent(fileSourceRoot));
  assertFalse(myFileIndex.isInSource(fileSourceRoot));
  fileSourceRoot=createChildData(myRootVFile,"temp_file.txt");
  assertNotInProject(fileSourceRoot);
  rename(fileSourceRoot,"fileSourceRoot.txt");
  checkInfo(fileSourceRoot,myModule,false,false,"",JavaSourceRootType.SOURCE,myModule);
  assertTrue(myFileIndex.isInContent(fileSourceRoot));
  assertTrue(myFileIndex.isInSource(fileSourceRoot));
}
