{
  myProject=project;
  myModule2ClassLoader=ContainerUtil.createConcurrentWeakMap();
  myConnection=myProject.getMessageBus().connect();
  myConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    public void rootsChanged(    final ModuleRootEvent event){
      clearClassLoaderCache();
    }
  }
);
  Disposer.register(project,new Disposable(){
    public void dispose(){
      myConnection.disconnect();
      myModule2ClassLoader.clear();
    }
  }
);
}
