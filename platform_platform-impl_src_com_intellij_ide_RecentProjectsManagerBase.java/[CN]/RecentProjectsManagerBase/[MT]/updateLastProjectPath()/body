{
  final Project[] openProjects=ProjectManager.getInstance().getOpenProjects();
synchronized (myStateLock) {
    if (openProjects.length == 0) {
      myState.lastPath=null;
      myState.openPaths=Collections.emptyList();
    }
 else {
      myState.lastPath=getProjectPath(openProjects[openProjects.length - 1]);
      myState.openPaths=ContainerUtil.newArrayList();
      for (      Project openProject : openProjects) {
        String path=getProjectPath(openProject);
        if (path != null) {
          myState.openPaths.add(path);
          myState.names.put(path,getProjectDisplayName(openProject));
        }
      }
    }
  }
}
