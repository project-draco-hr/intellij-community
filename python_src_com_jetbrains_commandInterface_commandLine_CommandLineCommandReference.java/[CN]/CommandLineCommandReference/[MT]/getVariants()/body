{
  final CommandLineFile file=getCommandLineFile();
  if (file == null) {
    return EMPTY_ARRAY;
  }
  final Pair<List<Command>,CommandExecutor> commandsAndExecutor=file.getCommandsAndDefaultExecutor();
  if (commandsAndExecutor == null) {
    return EMPTY_ARRAY;
  }
  final LookupWithIndentsBuilder result=new LookupWithIndentsBuilder();
  for (  final Command command : commandsAndExecutor.first) {
    final LookupElementBuilder lookupElementBuilder=LookupElementBuilder.create(command.getName());
    final Help help=command.getHelp(true);
    result.addElement(lookupElementBuilder,(help != null ? help.getHelpString() : null));
  }
  return result.getResult();
}
