{
  PsiElement parent=getParent();
  if (parent instanceof PyStatement && lastParent == null && PsiTreeUtil.isAncestor(parent,place,true)) {
    return true;
  }
  PyStatement[] statements=getStatements();
  if (lastParent != null) {
    for (int i=0; i < statements.length; i++) {
      if (statements[i] == lastParent) {
        for (int j=i - 1; j >= 0; j--) {
          if (!statements[j].processDeclarations(processor,substitutor,lastParent,place)) {
            return false;
          }
        }
      }
    }
  }
  for (  PyStatement statement : getStatements()) {
    if (!statement.processDeclarations(processor,substitutor,lastParent,place)) {
      return false;
    }
  }
  return true;
}
