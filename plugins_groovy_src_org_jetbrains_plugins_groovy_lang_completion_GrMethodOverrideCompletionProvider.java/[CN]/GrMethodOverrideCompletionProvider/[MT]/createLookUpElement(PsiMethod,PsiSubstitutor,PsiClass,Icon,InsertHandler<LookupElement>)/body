{
  String parameters=PsiFormatUtil.formatMethod(method,substitutor,PsiFormatUtilBase.SHOW_PARAMETERS,PsiFormatUtilBase.SHOW_NAME);
  String visibility=VisibilityUtil.getVisibilityModifier(method.getModifierList());
  String modifiers=(visibility == PsiModifier.PACKAGE_LOCAL ? "" : visibility + " ");
  PsiType type=substitutor.substitute(method.getReturnType());
  String parentClassName=currentClass == null ? "" : currentClass.getName();
  String signature=modifiers + (type == null ? "" : type.getPresentableText() + " ") + method.getName();
  LookupElementBuilder elementBuilder=LookupElementBuilder.create(method,signature).withLookupString(signature).appendTailText(parameters,false).appendTailText("{...}",true).withTypeText(parentClassName).withIcon(icon).withInsertHandler(insertHandler);
  return elementBuilder;
}
