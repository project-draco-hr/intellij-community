{
  int errorCount=collectErrors(codeSmells);
  int warningCount=codeSmells.size() - errorCount;
  String commitButtonText=executor != null ? executor.getActionText() : myCheckinPanel.getCommitActionName();
  commitButtonText=StringUtil.trimEnd(commitButtonText,"...");
  final int answer=Messages.showYesNoCancelDialog(myProject,VcsBundle.message("before.commit.files.contain.code.smells.edit.them.confirm.text",errorCount,warningCount),VcsBundle.message("code.smells.error.messages.tab.name"),VcsBundle.message("code.smells.review.button"),commitButtonText,CommonBundle.getCancelButtonText(),UIUtil.getWarningIcon());
  if (answer == Messages.YES) {
    CodeSmellDetector.getInstance(myProject).showCodeSmellErrors(codeSmells);
    return ReturnResult.CLOSE_WINDOW;
  }
 else   if (answer == Messages.CANCEL) {
    return ReturnResult.CANCEL;
  }
 else {
    return ReturnResult.COMMIT;
  }
}
