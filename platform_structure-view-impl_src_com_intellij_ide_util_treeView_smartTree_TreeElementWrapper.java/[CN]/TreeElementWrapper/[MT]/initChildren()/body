{
  clearChildren();
  TreeElement value=getValue();
  TreeElement[] children=value.getChildren();
  for (  TreeElement child : children) {
    if (child == null) {
      LOG.error(value + " returned null child: " + Arrays.toString(children));
    }
    addSubElement(createChildNode(child));
  }
  if (myTreeModel instanceof ProvidingTreeModel) {
    final Collection<NodeProvider> providers=((ProvidingTreeModel)myTreeModel).getNodeProviders();
    for (    NodeProvider provider : providers) {
      if (((ProvidingTreeModel)myTreeModel).isEnabled(provider)) {
        final Collection<TreeElement> nodes=provider.provideNodes(value);
        for (        TreeElement node : nodes) {
          if (node == null) {
            LOG.error(provider + " returned null node: " + nodes);
          }
          addSubElement(createChildNode(node));
        }
      }
    }
  }
}
