{
  myDataManager=dataManager;
  myVisiblePackBuilder=myDataManager.createVisiblePackBuilder();
  myFilters=new VcsLogFilterCollectionImpl(null,null,null,null,null,null,null);
  mySortType=initialSortType;
  myTaskController=new SingleTaskController<Request,VisiblePack>(visiblePackConsumer){
    @Override protected void startNewBackgroundTask(){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          ((ProgressManagerImpl)ProgressManager.getInstance()).runProcessWithProgressAsynchronously(new MyTask(project,"Applying filters..."));
        }
      }
);
    }
  }
;
  myDataPackConsumer=new Consumer<DataPack>(){
    @Override public void consume(    DataPack dataPack){
      onRefresh(dataPack);
    }
  }
;
  myDataManager.addConsumer(myDataPackConsumer);
}
