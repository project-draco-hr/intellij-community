{
  if (fileName.indexOf("%") >= 0) {
    fileName=fileName.substring(0,fileName.lastIndexOf("%"));
  }
  final List<Location> locations=new ArrayList<Location>();
  for (  PyClass cls : PyClassNameIndex.find(className,project,false)) {
    ProgressManager.checkCanceled();
    final String clsFileName=FileUtil.getNameWithoutExtension(cls.getContainingFile().getName());
    if (!clsFileName.equalsIgnoreCase(fileName)) {
      continue;
    }
    if (methodName == null) {
      locations.add(new PsiLocation<PyClass>(project,cls));
    }
 else {
      final PyFunction method=cls.findMethodByName(methodName,true);
      if (method == null) {
        continue;
      }
      locations.add(new PsiLocation<PyFunction>(project,method));
    }
  }
  return locations;
}
