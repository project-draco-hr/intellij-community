{
  ProjectSetReader reader=new ProjectSetReader();
  final Ref<List<Pair<String,String>>> ref=Ref.create();
  PlatformTestUtil.registerExtension(ProjectSetProcessor.EXTENSION_POINT_NAME,new ProjectSetProcessor(){
    @Override public String getId(){
      return "test";
    }
    @Override public void processEntries(    @NotNull List<Pair<String,String>> entries,    Object param,    @NotNull Consumer<Object> onFinish){
      ref.set(entries);
    }
  }
,myTestRootDisposable);
  @Language("JSON") String descriptor=FileUtil.loadFile(new File(getTestDataPath() + "descriptor.json"));
  reader.readDescriptor(descriptor,getSourceRoot());
  List<Pair<String,String>> entries=ref.get();
  assertEquals(2,entries.size());
  assertEquals("git://foo.bar",entries.get(0).getSecond());
  assertEquals("{\"foo\":\"bar\"}",entries.get(1).getSecond());
}
