{
  if (offset < 0 || file instanceof JspFile) {
    return null;
  }
  if (file instanceof PsiClassOwner) {
    return ApplicationManager.getApplication().runReadAction(new Computable<OwnerMethod>(){
      @Override public OwnerMethod compute(){
        final PsiMethod method=DebuggerUtilsEx.findPsiMethod(file,offset);
        return method != null ? new OwnerMethod(method,file instanceof PsiJavaFile && JavaLanguage.INSTANCE.equals(file.getLanguage())) : null;
      }
    }
);
  }
  return null;
}
