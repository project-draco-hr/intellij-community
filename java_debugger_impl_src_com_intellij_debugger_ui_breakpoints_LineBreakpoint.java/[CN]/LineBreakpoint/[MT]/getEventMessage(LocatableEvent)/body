{
  final Location location=event.location();
  String sourceName;
  try {
    sourceName=location.sourceName();
  }
 catch (  AbsentInformationException e) {
    sourceName=getFileName();
  }
  final boolean printFullTrace=Registry.is("debugger.breakpoint.message.full.trace");
  StringBuilder builder=new StringBuilder();
  if (printFullTrace) {
    builder.append(DebuggerBundle.message("status.line.breakpoint.reached.full.trace",DebuggerUtilsEx.getLocationMethodQName(location)));
    try {
      final List<StackFrame> frames=event.thread().frames();
      renderTrace(frames,builder);
    }
 catch (    IncompatibleThreadStateException e) {
      builder.append("Stacktrace not available: ").append(e.getMessage());
    }
  }
 else {
    builder.append(DebuggerBundle.message("status.line.breakpoint.reached",DebuggerUtilsEx.getLocationMethodQName(location),sourceName,getLineIndex() + 1));
  }
  return builder.toString();
}
