{
  if (value == null) {
    return;
  }
  Object serialized=binding == null ? TextBinding.convertToString(value) : binding.serialize(value,entry,filter);
  if (serialized instanceof String) {
    entry.setAttribute(attributeName,(String)serialized);
  }
 else   if (serialized != null) {
    if (myMapAnnotation != null && !myMapAnnotation.surroundKeyWithTag()) {
      entry.addContent((Content)serialized);
    }
 else {
      Element container=new Element(attributeName);
      container.addContent((Content)serialized);
      entry.addContent(container);
    }
  }
}
