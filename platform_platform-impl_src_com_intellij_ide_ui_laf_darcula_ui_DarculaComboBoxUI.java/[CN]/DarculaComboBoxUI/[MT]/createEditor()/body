{
  final ComboBoxEditor comboBoxEditor=super.createEditor();
  Component editor=comboBoxEditor == null ? null : comboBoxEditor.getEditorComponent();
  if (editor instanceof JComponent) {
    ((JComponent)editor).setBorder(JBUI.Borders.empty());
  }
  if (editor != null) {
    editor.addKeyListener(new KeyAdapter(){
      @Override public void keyPressed(      KeyEvent e){
        process(e);
      }
      private void process(      KeyEvent e){
        final int code=e.getKeyCode();
        if ((code == KeyEvent.VK_UP || code == KeyEvent.VK_DOWN) && e.getModifiers() == 0) {
          comboBox.dispatchEvent(e);
        }
      }
      @Override public void keyReleased(      KeyEvent e){
        process(e);
      }
    }
);
    editor.addFocusListener(new FocusAdapter(){
      @Override public void focusGained(      FocusEvent e){
        update();
      }
      void update(){
        if (comboBox != null) {
          comboBox.revalidate();
          comboBox.repaint();
        }
      }
      @Override public void focusLost(      FocusEvent e){
        update();
      }
    }
);
  }
  return comboBoxEditor;
}
