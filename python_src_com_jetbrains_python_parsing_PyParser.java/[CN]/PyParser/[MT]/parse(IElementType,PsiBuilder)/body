{
  long start=System.currentTimeMillis();
  final PsiBuilder.Marker rootMarker=builder.mark();
  ParsingContext context=createParsingContext(builder,myLanguageLevel,myFutureFlag);
  StatementParsing statementParser=context.getStatementParser();
  builder.setTokenTypeRemapper(statementParser);
  boolean lastAfterSemicolon=false;
  while (!builder.eof()) {
    context.pushScope(context.emptyParsingScope());
    if (lastAfterSemicolon) {
      statementParser.parseSimpleStatement();
    }
 else {
      statementParser.parseStatement();
    }
    lastAfterSemicolon=context.getScope().isAfterSemicolon();
    context.popScope();
  }
  rootMarker.done(root);
  ASTNode ast=builder.getTreeBuilt();
  long diff=System.currentTimeMillis() - start;
  double kb=builder.getCurrentOffset() / 1000.0;
  LOGGER.debug("Parsed " + String.format("%.1f",kb) + "K file in "+ diff+ "ms");
  return ast;
}
