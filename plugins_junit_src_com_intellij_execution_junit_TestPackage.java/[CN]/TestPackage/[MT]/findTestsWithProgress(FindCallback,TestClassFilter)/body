{
  if (isSyncSearch()) {
    THashSet<PsiClass> classes=new THashSet<PsiClass>();
    ConfigurationUtil.findAllTestClasses(classFilter,classes);
    callback.found(classes);
    return null;
  }
  final THashSet<PsiClass> classes=new THashSet<PsiClass>();
  final MySearchForTestsTask task=new MySearchForTestsTask(classFilter,classes,callback,myServerSocket);
  mySearchForTestsIndicator=new BackgroundableProcessIndicator(task);
  ProgressManager.getInstance().runProcessWithProgressAsynchronously(task,mySearchForTestsIndicator);
  return task;
}
