{
  List<TextRange> ranges=ContainerUtil.newArrayList();
  List<TextRange> insertedRanges=ContainerUtil.newArrayList();
  for (  Range range : changedRanges) {
    if (range.getType() != Range.DELETED) {
      int changeStartLine=range.getLine1();
      int changeEndLine=range.getLine2();
      int lineStartOffset=document.getLineStartOffset(changeStartLine);
      int lineEndOffset=document.getLineEndOffset(changeEndLine - 1);
      TextRange changedTextRange=new TextRange(lineStartOffset,lineEndOffset);
      ranges.add(changedTextRange);
      if (range.getType() == Range.INSERTED) {
        insertedRanges.add(changedTextRange);
      }
    }
  }
  return new VcsAwareFormatRangesInfo(ranges,insertedRanges);
}
