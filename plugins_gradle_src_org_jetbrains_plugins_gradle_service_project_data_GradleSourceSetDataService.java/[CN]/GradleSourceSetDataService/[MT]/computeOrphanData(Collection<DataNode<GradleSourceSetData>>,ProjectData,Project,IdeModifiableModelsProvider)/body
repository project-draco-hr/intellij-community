{
  return new Computable<Collection<Module>>(){
    @Override public Collection<Module> compute(){
      List<Module> orphanIdeModules=ContainerUtil.newSmartList();
      for (      Module module : modelsProvider.getModules()) {
        if (module.isDisposed())         continue;
        if (!ExternalSystemApiUtil.isExternalSystemAwareModule(projectData.getOwner(),module))         continue;
        if (!GradleConstants.GRADLE_SOURCE_SET_MODULE_TYPE_KEY.equals(ExternalSystemApiUtil.getExternalModuleType(module)))         continue;
        final String rootProjectPath=ExternalSystemApiUtil.getExternalRootProjectPath(module);
        if (projectData.getLinkedExternalProjectPath().equals(rootProjectPath)) {
          final String projectId=ExternalSystemApiUtil.getExternalProjectId(module);
          final DataNode<GradleSourceSetData> found=ContainerUtil.find(toImport,new Condition<DataNode<GradleSourceSetData>>(){
            @Override public boolean value(            DataNode<GradleSourceSetData> node){
              return node.getData().getId().equals(projectId);
            }
          }
);
          if (found == null) {
            orphanIdeModules.add(module);
          }
        }
      }
      return orphanIdeModules;
    }
  }
;
}
