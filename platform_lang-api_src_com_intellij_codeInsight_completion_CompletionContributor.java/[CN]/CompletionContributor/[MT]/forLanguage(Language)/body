{
  List<CompletionContributor> contributors=MyExtensionPointManager.INSTANCE.forKey(language);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    final List<Class> classes=ContainerUtil.map(contributors,new Function<CompletionContributor,Class>(){
      @Override public Class fun(      CompletionContributor contributor){
        return contributor.getClass();
      }
    }
);
    final Set<Class> uniques=new THashSet<Class>(classes);
    if (uniques.size() != classes.size()) {
      Class duplicate=ContainerUtil.find(classes,new Condition<Class>(){
        @Override public boolean value(        Class aClass){
          return !uniques.remove(aClass);
        }
      }
);
      if (duplicate != null) {
        throw new AssertionError("Duplicate completion contributor registered: " + duplicate);
      }
    }
  }
  return contributors;
}
