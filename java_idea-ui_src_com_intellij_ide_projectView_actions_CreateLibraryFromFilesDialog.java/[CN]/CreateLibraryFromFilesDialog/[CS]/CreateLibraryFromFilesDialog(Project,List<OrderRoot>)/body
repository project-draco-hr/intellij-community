{
  super(project,true);
  setTitle("Create Library");
  myProject=project;
  myRoots=roots;
  final FormBuilder builder=LibraryNameAndLevelPanel.createFormBuilder();
  myDefaultName=LibrariesContainerFactory.createContainer(project).suggestUniqueLibraryName(LibraryTypeServiceImpl.suggestLibraryName(roots));
  myNameAndLevelPanel=new LibraryNameAndLevelPanel(builder,myDefaultName,Arrays.asList(LibrariesContainer.LibraryLevel.values()),LibrariesContainer.LibraryLevel.PROJECT);
  myNameAndLevelPanel.setDefaultName(myDefaultName);
  myModulesComboBox=new ModulesComboBox();
  myModulesComboBox.fillModules(myProject);
  myModulesComboBox.setSelectedModule(findModule(roots));
  builder.addLabeledComponent("&Add to module:",myModulesComboBox);
  myPanel=builder.getPanel();
  myNameAndLevelPanel.getLibraryNameField().selectAll();
  myNameAndLevelPanel.getLevelComboBox().addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      onLevelChanged();
    }
  }
);
  myNameAndLevelPanel.getLibraryNameField().getDocument().addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      updateOkAction();
    }
  }
);
  init();
}
