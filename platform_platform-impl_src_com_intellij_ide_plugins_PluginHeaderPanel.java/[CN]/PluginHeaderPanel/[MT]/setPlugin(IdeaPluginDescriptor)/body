{
  myPlugin=plugin;
  myRoot.setVisible(true);
  myRoot.setBackground(UIUtil.getTextFieldBackground());
  myCategory.setVisible(true);
  myDownloadsPanel.setVisible(true);
  myButtonPanel.setVisible(true);
  myUpdated.setVisible(true);
  myName.setFont(UIUtil.getLabelFont().deriveFont(4f + UIUtil.getLabelFont().getSize()));
  myName.setText("<html><body>" + plugin.getName() + "</body></html>");
  myCategory.setText(plugin.getCategory() == null ? "UNKNOWN" : plugin.getCategory().toUpperCase());
  final boolean hasNewerVersion=InstalledPluginsTableModel.hasNewerVersion(plugin.getPluginId());
  if (plugin instanceof PluginNode) {
    final PluginNode node=(PluginNode)plugin;
    myRating.setRate(node.getRating());
    myDownloads.setText(node.getDownloads() + " downloads");
    myVersion.setText(" ver " + node.getVersion());
    myUpdated.setText("Updated " + DateFormatUtil.formatDate(node.getDate()));
switch (node.getStatus()) {
case PluginNode.STATUS_INSTALLED:
      myActionId=hasNewerVersion ? ACTION_ID.UPDATE : ACTION_ID.UNINSTALL;
    break;
case PluginNode.STATUS_DOWNLOADED:
  myActionId=ACTION_ID.RESTART;
break;
default :
myActionId=ACTION_ID.INSTALL;
}
if (node.getRepositoryName() != null) {
myCategory.setVisible(false);
myDownloadsPanel.setVisible(false);
myUpdated.setVisible(false);
}
final IdeaPluginDescriptor installed=PluginManager.getPlugin(plugin.getPluginId());
if ((PluginManagerColumnInfo.isDownloaded(node)) || (installed != null && InstalledPluginsTableModel.wasUpdated(installed.getPluginId())) || (installed instanceof IdeaPluginDescriptorImpl && !plugin.isBundled() && ((IdeaPluginDescriptorImpl)installed).isDeleted())) {
myActionId=ACTION_ID.RESTART;
}
}
 else {
myActionId=null;
myVersionInfoPanel.remove(myUpdated);
myCategory.setVisible(false);
myDownloadsPanel.setVisible(false);
final String version=plugin.getVersion();
myVersion.setText("Version: " + (version == null ? "N/A" : version));
myUpdated.setVisible(false);
if (!plugin.isBundled() || hasNewerVersion) {
if (((IdeaPluginDescriptorImpl)plugin).isDeleted()) {
myActionId=ACTION_ID.RESTART;
}
 else if (hasNewerVersion) {
myActionId=ACTION_ID.UPDATE;
}
 else {
myActionId=ACTION_ID.UNINSTALL;
}
}
if (myActionId == ACTION_ID.RESTART && myManager != null && !myManager.isRequireShutdown()) {
myActionId=null;
}
}
if (myManager == null || myActionId == null || (myManager.getInstalled() != myManager.getAvailable() && myActionId == ACTION_ID.UNINSTALL)) {
myActionId=ACTION_ID.INSTALL;
myButtonPanel.setVisible(false);
}
myRoot.revalidate();
((JComponent)myInstallButton.getParent()).revalidate();
myInstallButton.revalidate();
((JComponent)myVersion.getParent()).revalidate();
myVersion.revalidate();
}
