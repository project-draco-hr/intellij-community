{
  if (!new File(homePath).exists()) {
    return null;
  }
  try {
    Process process=Runtime.getRuntime().exec(command);
    VersionParsingThread parsingThread=new VersionParsingThread(process.getErrorStream(),versionLineMarker);
    final Future<?> parsingThreadFuture=actionRunner.run(parsingThread);
    ReadStreamThread readThread=new ReadStreamThread(process.getInputStream());
    actionRunner.run(readThread);
    try {
      try {
        process.waitFor();
      }
 catch (      InterruptedException e) {
        LOG.info(e);
        process.destroy();
      }
    }
  finally {
      try {
        parsingThreadFuture.get();
      }
 catch (      Exception e) {
        LOG.info(e);
      }
    }
    String version=parsingThread.getVersion();
    if (version != null) {
      return new JdkVersionInfo(version,parsingThread.getBitness());
    }
  }
 catch (  IOException ex) {
    LOG.info(ex);
  }
  return null;
}
