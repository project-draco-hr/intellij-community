{
  final File path=new File(homePath,"jre/lib/rt.jar");
  try {
    JarFile runtimeArchive;
    try {
      runtimeArchive=new JarFile(path,false);
    }
 catch (    IOException e) {
      try {
        runtimeArchive=new JarFile(path.getParentFile(),false);
      }
 catch (      IOException e1) {
        runtimeArchive=new JarFile(new File(homePath,"jrt-fs.jar"));
      }
    }
    try {
      final Manifest manifest=runtimeArchive.getManifest();
      if (manifest != null) {
        final String version=manifest.getMainAttributes().getValue("Implementation-Version");
        if (version != null) {
          return "java version \"" + version + "\"";
        }
      }
    }
  finally {
      runtimeArchive.close();
    }
  }
 catch (  IOException ignored) {
  }
  JdkVersionInfo info=detectJdkVersionInfo(homePath,actionRunner);
  if (info != null) {
    return info.getVersion();
  }
  return null;
}
