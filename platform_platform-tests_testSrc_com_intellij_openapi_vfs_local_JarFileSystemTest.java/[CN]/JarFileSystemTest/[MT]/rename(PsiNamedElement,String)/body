{
  final DataContext psiDataContext=SimpleDataContext.getSimpleContext(CommonDataKeys.PSI_ELEMENT.getName(),file);
  final RenameHandler renameHandler=RenameHandlerRegistry.getInstance().getRenameHandler(psiDataContext);
  assertNotNull(renameHandler);
  new WriteCommandAction.Simple(file.getProject()){
    @Override public void run(){
      PsiElementRenameHandler.rename(file,file.getProject(),file,null,newName);
    }
  }
.execute();
}
