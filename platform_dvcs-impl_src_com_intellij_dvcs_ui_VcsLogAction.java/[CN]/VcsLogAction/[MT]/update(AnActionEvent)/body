{
  Project project=e.getProject();
  VcsLog log=e.getData(VcsLogDataKeys.VCS_LOG);
  if (project == null || log == null) {
    e.getPresentation().setEnabledAndVisible(false);
    return;
  }
  MultiMap<Repo,Hash> grouped=groupFirstPackOfCommits(project,log);
  if (grouped == null) {
    e.getPresentation().setEnabledAndVisible(false);
  }
 else {
    e.getPresentation().setVisible(isVisible(project,grouped));
    e.getPresentation().setEnabled(!grouped.isEmpty() && isEnabled(grouped));
  }
}
