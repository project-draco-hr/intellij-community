{
  super(project,true);
  myProject=project;
  myEditor=editor;
  myNavigatable=navigatable;
  myBaseTreeModel=structureViewModel;
  if (applySortAndFilter) {
    myTreeActionsOwner=new TreeStructureActionsOwner(myBaseTreeModel);
    myTreeModel=new TreeModelWrapper(structureViewModel,myTreeActionsOwner);
  }
 else {
    myTreeActionsOwner=null;
    myTreeModel=structureViewModel;
  }
  PsiFile psiFile=getPsiFile(project);
  final PsiElement psiElement=getCurrentElement(psiFile);
  init();
  if (psiElement != null) {
    if (structureViewModel.shouldEnterElement(psiElement)) {
      myCommanderPanel.getBuilder().enterElement(psiElement,PsiUtilCore.getVirtualFile(psiElement));
    }
 else {
      myCommanderPanel.getBuilder().selectElement(psiElement,PsiUtilCore.getVirtualFile(psiElement));
    }
  }
  Disposer.register(myDisposable,auxDisposable);
}
