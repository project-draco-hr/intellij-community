{
  if (myClass == null) {
    return null;
  }
  final PyTargetExpression metaClassAttribute=myClass.findClassAttribute(PyNames.DUNDER_METACLASS,true);
  if (metaClassAttribute != null) {
    final PyExpression metaclass=metaClassAttribute.findAssignedValue();
    if (metaclass instanceof PyReferenceExpression) {
      final QualifiedResolveResult result=((PyReferenceExpression)metaclass).followAssignmentsChain(PyResolveContext.noImplicits());
      if (result.getElement() instanceof PyClass) {
        return new PyClassTypeImpl((PyClass)result.getElement(),false);
      }
    }
  }
  return PyBuiltinCache.getInstance(myClass).getObjectType("type");
}
