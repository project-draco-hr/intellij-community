{
  final PyTargetExpression metaClassAttribute=myClass.findClassAttribute(PyNames.DUNDER_METACLASS,true);
  if (metaClassAttribute != null) {
    final PyExpression metaclass=metaClassAttribute.findAssignedValue();
    if (metaclass instanceof PyReferenceExpression) {
      final QualifiedResolveResult result=((PyReferenceExpression)metaclass).followAssignmentsChain(PyResolveContext.noImplicits());
      PsiElement element=result.getElement();
      if (element instanceof PyClass) {
        return new PyClassTypeImpl((PyClass)element,false);
      }
    }
  }
  return PyBuiltinCache.getInstance(myClass).getObjectType("type");
}
