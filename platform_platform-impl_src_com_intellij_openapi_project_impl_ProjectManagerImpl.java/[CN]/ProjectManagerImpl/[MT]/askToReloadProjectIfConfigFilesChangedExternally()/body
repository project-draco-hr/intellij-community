{
  List<Project> projectsToReload=new SmartList<Project>();
  for (  Project project : getOpenProjects()) {
    if (project.isDisposed()) {
      continue;
    }
    MultiMap<StateStorage,VirtualFile> changes=CHANGED_FILES_KEY.get(project);
    if (changes == null) {
      continue;
    }
    CHANGED_FILES_KEY.set(project,null);
    if (!changes.isEmpty() && StoreUtil.reloadStore(changes,ComponentsPackage.getStateStore(project)) == ReloadComponentStoreStatus.RESTART_AGREED) {
      projectsToReload.add(project);
    }
  }
  for (  Project project : projectsToReload) {
    doReloadProject(project);
  }
}
