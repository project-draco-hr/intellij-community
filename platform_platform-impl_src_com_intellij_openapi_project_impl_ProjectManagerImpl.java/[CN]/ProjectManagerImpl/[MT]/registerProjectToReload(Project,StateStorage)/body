{
  if (LOG.isDebugEnabled()) {
    LOG.debug("[RELOAD] Registering project to reload: " + storage,new Exception());
  }
  Set<StateStorage> changes;
  if (project == null) {
    changes=myChangedApplicationFiles;
  }
 else {
    changes=CHANGED_FILES_KEY.get(project);
    if (changes == null) {
      changes=new LinkedHashSet<StateStorage>();
      CHANGED_FILES_KEY.set(project,changes);
    }
  }
synchronized (changes) {
    changes.add(storage);
  }
  if (storage instanceof StateStorageBase) {
    ((StateStorageBase)storage).disableSaving();
  }
  if (isReloadUnblocked()) {
    myChangedFilesAlarm.cancelAndRequest();
  }
}
