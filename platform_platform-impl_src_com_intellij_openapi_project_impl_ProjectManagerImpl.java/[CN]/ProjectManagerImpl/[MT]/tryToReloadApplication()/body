{
  if (ApplicationManager.getApplication().isDisposed()) {
    return false;
  }
  if (myChangedApplicationFiles.isEmpty()) {
    return true;
  }
  MultiMap<StateStorage,VirtualFile> changes=MultiMap.createLinkedSet();
  changes.putAllValues(myChangedApplicationFiles);
  myChangedApplicationFiles.clear();
  ReloadComponentStoreStatus status=ComponentStoreImpl.reloadStore(changes,ComponentsPackage.getStateStore(ApplicationManager.getApplication()));
  if (status == ReloadComponentStoreStatus.RESTART_AGREED) {
    ApplicationManagerEx.getApplicationEx().restart(true);
    return false;
  }
 else {
    return status == ReloadComponentStoreStatus.SUCCESS || status == ReloadComponentStoreStatus.RESTART_CANCELLED;
  }
}
