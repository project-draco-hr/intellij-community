{
  if (logger.isDebugEnabled() && response.hasBeenUsed()) {
    try {
      String content=TaskResponseUtil.getResponseContentAsString(response);
      Header header=response.getRequestHeader(HTTP.CONTENT_TYPE);
      String contentType=header == null ? "text/plain" : header.getElements()[0].getName().toLowerCase(Locale.ENGLISH);
      if (contentType.contains("xml")) {
        prettyFormatXmlToLog(logger,content);
      }
 else       if (contentType.contains("json")) {
        prettyFormatJsonToLog(logger,content);
      }
 else {
        logger.debug(content);
      }
    }
 catch (    IOException e) {
      logger.error(e);
    }
  }
}
