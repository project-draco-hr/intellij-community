{
  final XppReader reader=openReader(text,true);
  reader.moveDown();
  if (!"thread".equals(reader.getNodeName())) {
    throw new PyDebuggerException("Expected <thread>, found " + reader.getNodeName());
  }
  final String id=readString(reader,"id",null);
  final String name=readString(reader,"name","");
  final int stopReason=readInt(reader,"stop_reason",0);
  String logExpression=readString(reader,"log_expression","None");
  if ("None".equals(logExpression)) {
    logExpression=null;
  }
  final List<PyStackFrameInfo> frames=new LinkedList<PyStackFrameInfo>();
  while (reader.hasMoreChildren()) {
    reader.moveDown();
    frames.add(parseFrame(reader,id,positionConverter));
    reader.moveUp();
  }
  return new PyThreadInfo(id,name,frames,(stopReason == AbstractCommand.SET_BREAKPOINT),logExpression);
}
