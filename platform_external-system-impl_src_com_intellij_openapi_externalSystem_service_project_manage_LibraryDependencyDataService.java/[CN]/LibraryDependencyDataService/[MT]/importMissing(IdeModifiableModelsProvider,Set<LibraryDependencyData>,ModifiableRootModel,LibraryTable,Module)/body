{
  for (  final LibraryDependencyData dependencyData : toImport) {
    final LibraryData libraryData=dependencyData.getTarget();
    final String libraryName=libraryData.getInternalName();
switch (dependencyData.getLevel()) {
case MODULE:
      final Library moduleLib=moduleLibraryTable.createLibrary(libraryName);
    syncExistingLibraryDependency(modelsProvider,dependencyData,moduleLib,moduleRootModel,module);
  break;
case PROJECT:
final Library projectLib=modelsProvider.getLibraryByName(libraryName);
if (projectLib == null) {
syncExistingLibraryDependency(modelsProvider,dependencyData,moduleLibraryTable.createLibrary(libraryName),moduleRootModel,module);
break;
}
LibraryOrderEntry orderEntry=moduleRootModel.addLibraryEntry(projectLib);
setLibraryScope(orderEntry,projectLib,module,dependencyData);
}
}
}
