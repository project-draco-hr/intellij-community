{
  LibraryOrderEntry candidate=null;
  for (  OrderEntry orderEntry : moduleRootModel.getOrderEntries()) {
    if (orderEntry instanceof LibraryOrderEntry) {
      final LibraryOrderEntry libraryOrderEntry=(LibraryOrderEntry)orderEntry;
      if (library == libraryOrderEntry.getLibrary()) {
        return libraryOrderEntry;
      }
      if (library.equals(libraryOrderEntry.getLibrary())) {
        if (libraryOrderEntry.getScope() == scope) {
          return libraryOrderEntry;
        }
 else {
          candidate=libraryOrderEntry;
        }
      }
    }
  }
  return candidate;
}
