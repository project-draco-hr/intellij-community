{
  mySelector=new TypeSelectorManagerImpl(myProject,myReturnType,findOccurrences(),areTypesDirected()).getTypeSelector();
  final JComponent component=mySelector.getComponent();
  if (component instanceof JComboBox) {
    final JPanel returnTypePanel=new JPanel(new BorderLayout(2,0));
    final JLabel label=new JLabel(RefactoringBundle.message("changeSignature.return.type.prompt"));
    returnTypePanel.add(label,BorderLayout.NORTH);
    returnTypePanel.add(component,BorderLayout.SOUTH);
    DialogUtil.registerMnemonic(label,component);
    ((JComboBox)component).addActionListener(new ActionListener(){
      @Override public void actionPerformed(      ActionEvent e){
        if (myGenerateAnnotations != null) {
          final PsiType selectedType=mySelector.getSelectedType();
          final boolean enabled=PsiUtil.resolveClassInType(selectedType) != null;
          if (!enabled) {
            myGenerateAnnotations.setSelected(false);
          }
          myGenerateAnnotations.setEnabled(enabled);
        }
        updateSignature();
      }
    }
);
    return returnTypePanel;
  }
  return null;
}
