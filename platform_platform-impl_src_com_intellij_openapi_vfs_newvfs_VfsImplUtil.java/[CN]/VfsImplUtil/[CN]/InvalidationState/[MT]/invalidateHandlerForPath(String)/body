{
  Pair<ArchiveFileSystem,ArchiveHandler> handlerPair=ourHandlers.remove(path);
  if (handlerPair != null) {
    forEachDirectoryComponent(path,new Processor<String>(){
      @Override public boolean process(      String containingDirectoryPath){
        Set<String> handlers=ourDominatorsMap.get(containingDirectoryPath);
        if (handlers != null) {
          if (handlers.remove(path) && handlers.size() == 0) {
            ourDominatorsMap.remove(containingDirectoryPath);
          }
        }
        return true;
      }
    }
);
    registerPathToRefresh(handlerPair,path);
  }
  return handlerPair != null;
}
