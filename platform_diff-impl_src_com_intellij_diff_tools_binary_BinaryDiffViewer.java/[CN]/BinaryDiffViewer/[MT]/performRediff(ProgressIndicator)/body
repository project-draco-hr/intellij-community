{
  try {
    indicator.checkCanceled();
    List<DiffContent> contents=myRequest.getContents();
    if (contents.get(0) instanceof EmptyContent) {
      return new Runnable(){
        @Override public void run(){
          clearDiffPresentation();
          myPanel.addInsertedContentNotification();
        }
      }
;
    }
    if (contents.get(1) instanceof EmptyContent) {
      return new Runnable(){
        @Override public void run(){
          clearDiffPresentation();
          myPanel.addRemovedContentNotification();
        }
      }
;
    }
    if (!(contents.get(0) instanceof BinaryFileContent) || !(contents.get(1) instanceof BinaryFileContent)) {
      return new Runnable(){
        @Override public void run(){
          clearDiffPresentation();
        }
      }
;
    }
    final BinaryFileContent content1=(BinaryFileContent)contents.get(0);
    final BinaryFileContent content2=(BinaryFileContent)contents.get(1);
    byte[] bytes1=content1.getBytes();
    byte[] bytes2=content2.getBytes();
    final boolean equal=Arrays.equals(bytes1,bytes2);
    return new Runnable(){
      @Override public void run(){
        clearDiffPresentation();
        if (equal)         myPanel.addContentsEqualNotification();
      }
    }
;
  }
 catch (  ProcessCanceledException ignore) {
    return new Runnable(){
      @Override public void run(){
        clearDiffPresentation();
        myPanel.addOperationCanceledNotification();
      }
    }
;
  }
catch (  Throwable e) {
    LOG.error(e);
    return new Runnable(){
      @Override public void run(){
        clearDiffPresentation();
        myPanel.addDiffErrorNotification();
      }
    }
;
  }
}
