{
  myDebugProcess.getManagerThread().schedule(new DebuggerContextCommandImpl(myDebugProcess.getDebuggerContext()){
    @Override public Priority getPriority(){
      return Priority.NORMAL;
    }
    @Override public void threadAction(){
      WatchItemDescriptor descriptor=new WatchItemDescriptor(myDebugProcess.getProject(),TextWithImportsImpl.fromXExpression(expression));
      EvaluationContextImpl evalContext=myStackFrame.getFrameDebuggerContext().createEvaluationContext();
      if (evalContext == null) {
        callback.errorOccurred("Context is not available");
        return;
      }
      descriptor.setContext(evalContext);
      @SuppressWarnings("ThrowableResultOfMethodCallIgnored") EvaluateException exception=descriptor.getEvaluateException();
      if (exception != null) {
        callback.errorOccurred(exception.getMessage());
        return;
      }
      JavaDebugProcess process=myDebugProcess.getXdebugProcess();
      if (process == null) {
        callback.errorOccurred("No debug process");
        return;
      }
      callback.evaluated(JavaValue.create(null,descriptor,evalContext,process.getNodeManager(),true));
    }
  }
);
}
