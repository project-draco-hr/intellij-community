{
  final PsiType type=lambdaHandler.getReturnType();
  if (type instanceof PsiArrayType) {
    final PsiType arrayComponentType=((PsiArrayType)type).getComponentType();
    return "toArray(" + arrayComponentType.getCanonicalText() + "[]::new)";
  }
 else   if (type instanceof PsiClassType) {
    final PsiClass resolvedClass=((PsiClassType)type).resolve();
    if (resolvedClass == null) {
      return null;
    }
    final String qName=resolvedClass.getQualifiedName();
    if (qName == null) {
      return null;
    }
    if (qName.equals(CommonClassNames.JAVA_UTIL_LIST) || qName.equals(CommonClassNames.JAVA_UTIL_COLLECTION) || qName.equals(CommonClassNames.JAVA_LANG_ITERABLE)) {
      return "collect(" + StreamApiConstants.JAVA_UTIL_STREAM_COLLECTORS + ".toList())";
    }
 else     if (qName.equals(CommonClassNames.JAVA_UTIL_SET)) {
      return "collect(" + StreamApiConstants.JAVA_UTIL_STREAM_COLLECTORS + ".toSet())";
    }
 else     if (qName.equals(CommonClassNames.JAVA_UTIL_ITERATOR)) {
      return "iterator()";
    }
  }
  return null;
}
