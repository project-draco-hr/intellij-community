{
  Element element=new Element("state");
  for (  Map.Entry<GroupDescriptor,Map<String,CollectedUsages>> appData : getApplicationData().entrySet()) {
    Element groupElement=new Element(GROUP_TAG);
    groupElement.setAttribute(GROUP_NAME_ATTR,appData.getKey().getId());
    boolean isEmptyGroup=true;
    for (    Map.Entry<String,CollectedUsages> projectData : appData.getValue().entrySet()) {
      Element projectElement=new Element(PROJECT_TAG);
      projectElement.setAttribute(PROJECT_ID_ATTR,projectData.getKey());
      final CollectedUsages projectDataValue=projectData.getValue();
      if (!projectDataValue.usages.isEmpty()) {
        projectElement.setAttribute(VALUES_ATTR,joinUsages(projectDataValue.usages));
        projectElement.setAttribute(COLLECTION_TIME_TAG,String.valueOf(projectDataValue.collectionTime));
        groupElement.addContent(projectElement);
        isEmptyGroup=false;
      }
    }
    if (!isEmptyGroup) {
      element.addContent(groupElement);
    }
  }
  return element;
}
