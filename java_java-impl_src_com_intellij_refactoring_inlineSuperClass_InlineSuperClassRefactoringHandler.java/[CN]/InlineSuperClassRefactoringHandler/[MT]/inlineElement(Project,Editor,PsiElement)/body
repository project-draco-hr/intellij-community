{
  PsiClass superClass=(PsiClass)element;
  if (!superClass.getManager().isInProject(superClass)) {
    CommonRefactoringUtil.showErrorHint(project,editor,"Cannot inline non-project class",REFACTORING_NAME,null);
    return;
  }
  PsiClass chosen=null;
  PsiReference reference=editor != null ? TargetElementUtil.findReference(editor,editor.getCaretModel().getOffset()) : null;
  if (reference != null) {
    final PsiElement resolve=reference.resolve();
    if (resolve == superClass) {
      final PsiElement referenceElement=reference.getElement();
      if (referenceElement != null) {
        final PsiElement parent=referenceElement.getParent();
        if (parent instanceof PsiReferenceList) {
          final PsiElement gParent=parent.getParent();
          if (gParent instanceof PsiClass) {
            chosen=(PsiClass)gParent;
          }
        }
      }
    }
  }
  new InlineSuperClassRefactoringDialog(project,superClass,chosen).show();
}
