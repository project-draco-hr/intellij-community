{
  String pluginDirName=StringUtil.getShortName(plugin.getPluginId().getIdString());
  String extraDir=System.getProperty("idea.external.build.development.plugins.dir");
  if (extraDir != null) {
    File extraDirFile=new File(extraDir,pluginDirName);
    if (extraDirFile.isDirectory()) {
      return extraDirFile;
    }
  }
  File pluginHome=PluginPathManager.getPluginHome(pluginDirName);
  if (!pluginHome.isDirectory() && StringUtil.isCapitalized(pluginDirName)) {
    pluginHome=PluginPathManager.getPluginHome(StringUtil.decapitalize(pluginDirName));
  }
  return pluginHome.isDirectory() ? pluginHome : null;
}
