{
  TrackingPathMacroSubstitutor macroSubstitutor=new ApplicationPathMacroManager().createTrackingSubstitutor();
  stateStorageManager=new StateStorageManagerImpl(macroSubstitutor,"application",this,ApplicationManager.getApplication().getPicoContainer()){
    @Override protected StorageData createStorageData(    String storageSpec){
      return new FileBasedStorage.FileStorageData("application");
    }
    @Nullable @Override protected String getOldStorageSpec(    @NotNull Object component,    @NotNull String componentName,    @NotNull StateStorageOperation operation){
      return null;
    }
    @Override protected String getVersionsFilePath(){
      return testAppConfigPath + "/options/appComponentVersions.xml";
    }
    @Override protected TrackingPathMacroSubstitutor getMacroSubstitutor(    @NotNull final String fileSpec){
      if (fileSpec.equals(StoragePathMacros.APP_CONFIG + "/" + PathMacrosImpl.EXT_FILE_NAME+ ".xml")) {
        return null;
      }
      return super.getMacroSubstitutor(fileSpec);
    }
  }
;
  stateStorageManager.addMacro(StoragePathMacros.APP_CONFIG,testAppConfigPath);
}
