{
  SeveralStoragesConfigured component=new SeveralStoragesConfigured();
  MyStreamProvider streamProvider=new MyStreamProvider();
  THashMap<String,String> map=new THashMap<String,String>();
  map.put(StoragePathMacros.APP_CONFIG + "/proxy.settings.xml","<application>\n" + "  <component name=\"HttpConfigurable\">\n" + "    <option name=\"foo\" value=\"newValue\" />\n"+ "  </component>\n"+ "</application>");
  streamProvider.data.put(RoamingType.PER_USER,map);
  componentStore.getStateStorageManager().setStreamProvider(streamProvider);
  componentStore.initComponent(component,false);
  assertThat(component.foo,equalTo("newValue"));
}
