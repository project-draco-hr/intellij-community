{
  SeveralStoragesConfigured component=new SeveralStoragesConfigured();
  MyStreamProvider streamProvider=new MyStreamProvider();
  componentStore.getStateStorageManager().setStreamProvider(streamProvider);
  componentStore.initComponent(component,false);
  component.foo="newValue";
  StoreUtil.save(componentStore,null);
  assertThat(streamProvider.data.get(RoamingType.PER_USER).get(StoragePathMacros.APP_CONFIG + "/proxy.settings.xml"),equalTo("<application>\n" + "  <component name=\"HttpConfigurable\">\n" + "    <option name=\"foo\" value=\"newValue\" />\n"+ "  </component>\n"+ "</application>"));
}
