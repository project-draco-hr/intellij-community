{
  LOG.info("Abort rebase. " + (myRepositoryToAbort == null ? "Nothing to abort" : getShortRepositoryName(myRepositoryToAbort)) + ". Roots to rollback: "+ DvcsUtil.joinShortNames(myRepositoriesToRollback.keySet()));
  final Ref<AbortChoice> ref=Ref.create();
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      ref.set(confirmAbort());
    }
  }
,ModalityState.defaultModalityState());
  LOG.info("User choice: " + ref.get());
  if (ref.get() == AbortChoice.ROLLBACK_AND_ABORT) {
    doAbort(true);
  }
 else   if (ref.get() == AbortChoice.ABORT) {
    doAbort(false);
  }
}
