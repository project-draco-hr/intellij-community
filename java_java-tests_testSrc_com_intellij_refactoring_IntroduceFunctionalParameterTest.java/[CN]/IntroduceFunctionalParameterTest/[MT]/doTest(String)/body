{
  boolean enabled=true;
  try {
    configureByFile("/refactoring/introduceFunctionalParameter/before" + getTestName(false) + ".java");
    enabled=myEditor.getSettings().isVariableInplaceRenameEnabled();
    myEditor.getSettings().setVariableInplaceRenameEnabled(false);
    new IntroduceParameterHandler().introduceStrategy(getProject(),getEditor(),getFile());
    checkResultByFile("/refactoring/introduceFunctionalParameter/after" + getTestName(false) + ".java");
    if (conflict != null) {
      fail("Conflict expected");
    }
  }
 catch (  BaseRefactoringProcessor.ConflictsInTestsException e) {
    if (conflict == null) {
      throw e;
    }
    assertEquals(conflict,e.getMessage());
  }
 finally {
    myEditor.getSettings().setVariableInplaceRenameEnabled(enabled);
  }
}
