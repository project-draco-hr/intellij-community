{
  if (isConnected()) {
    disconnect();
  }
  if (getSession().isSuspended()) {
    getSession().resume();
  }
  if (!isWaitingForConnection()) {
    setWaitingForConnection(true);
    UIUtil.invokeLaterIfNeeded(new Runnable(){
      @Override public void run(){
        waitForConnection(getCurrentStateMessage(),getConnectionTitle());
      }
    }
);
  }
}
