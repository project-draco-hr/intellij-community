{
  try {
    final VirtualFile wrapperPropertiesFile=GradleUtil.findDefaultWrapperPropertiesFile(linkedProjectPath);
    if (wrapperPropertiesFile == null)     return;
    final WrapperConfiguration wrapperConfiguration=GradleUtil.getWrapperConfiguration(linkedProjectPath);
    if (wrapperConfiguration == null)     return;
    String currentDistributionUri=wrapperConfiguration.getDistribution().toString();
    if (StringUtil.endsWith(currentDistributionUri,ALL_ZIP_DISTRIBUTION_URI_SUFFIX))     return;
    final String distributionUri=currentDistributionUri.substring(0,currentDistributionUri.lastIndexOf('-')) + ALL_ZIP_DISTRIBUTION_URI_SUFFIX;
    wrapperConfiguration.setDistribution(new URI(distributionUri));
    Properties wrapperProperties=new Properties();
    wrapperProperties.setProperty(WrapperExecutor.DISTRIBUTION_URL_PROPERTY,wrapperConfiguration.getDistribution().toString());
    wrapperProperties.setProperty(WrapperExecutor.DISTRIBUTION_BASE_PROPERTY,wrapperConfiguration.getDistributionBase());
    wrapperProperties.setProperty(WrapperExecutor.DISTRIBUTION_PATH_PROPERTY,wrapperConfiguration.getDistributionPath());
    wrapperProperties.setProperty(WrapperExecutor.ZIP_STORE_BASE_PROPERTY,wrapperConfiguration.getZipBase());
    wrapperProperties.setProperty(WrapperExecutor.ZIP_STORE_PATH_PROPERTY,wrapperConfiguration.getZipPath());
    GUtil.saveProperties(wrapperProperties,new File(wrapperPropertiesFile.getPath()));
    LocalFileSystem.getInstance().refreshFiles(Collections.singletonList(wrapperPropertiesFile));
  }
 catch (  Exception e) {
    LOG.error(e);
  }
}
