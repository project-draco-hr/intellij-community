{
  final int iconWidth=getIconWidth();
  final int partWidth=iconWidth / myScopeToAverageSeverityMap.size();
  final Collection<HighlightSeverity> values=myScopeToAverageSeverityMap.values();
  int idx=0;
  for (  final HighlightSeverity severity : values) {
    final HighlightDisplayLevel level=HighlightDisplayLevel.find(severity);
    if (level == null) {
      LOG.error(String.format("Level for severity \"%s\" not found",severity));
      continue;
    }
    final Icon icon=level.getIcon();
    g.setColor(icon instanceof HighlightDisplayLevel.SingleColorIconWithMask ? ((HighlightDisplayLevel.SingleColorIconWithMask)icon).getColor() : MIXED_SEVERITY_COLOR);
    final int x=i + partWidth * idx;
    g.fillRect(x,j,partWidth,getIconHeight());
    idx++;
  }
  g.drawImage(HighlightDisplayLevel.ImageHolder.ourErrorMaskImage,i,j,null);
}
