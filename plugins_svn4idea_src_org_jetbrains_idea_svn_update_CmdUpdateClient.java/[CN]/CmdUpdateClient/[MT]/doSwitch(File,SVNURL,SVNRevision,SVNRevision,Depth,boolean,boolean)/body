{
  checkWorkingCopy(path);
  List<String> parameters=new ArrayList<String>();
  CommandUtil.put(parameters,SvnTarget.fromURL(url,pegRevision));
  CommandUtil.put(parameters,path,false);
  fillParameters(parameters,revision,depth,depthIsSticky,allowUnversionedObstructions);
  if (!myVcs.is16SupportedByCommandLine() || WorkingCopyFormat.from(myFactory.createVersionClient().getVersion()).isOrGreater(WorkingCopyFormat.ONE_DOT_SEVEN)) {
    parameters.add("--ignore-ancestry");
  }
  long[] revisions=run(path,parameters,SvnCommandName.switchCopy);
  return revisions != null && revisions.length > 0 ? revisions[0] : -1;
}
