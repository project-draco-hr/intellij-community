{
  boolean ignoreSpaces=policy != ComparisonPolicy.DEFAULT;
  int last1=0;
  int last2=0;
  for (  DiffFragment fragment : fragments) {
    CharSequence chunk1=text1.subSequence(last1,fragment.getStartOffset1());
    CharSequence chunk2=text2.subSequence(last2,fragment.getStartOffset2());
    assertEqualsCharSequences(chunk1,chunk2,ignoreSpaces,skipNewline);
    last1=fragment.getEndOffset1();
    last2=fragment.getEndOffset2();
  }
  CharSequence chunk1=text1.subSequence(last1,text1.length());
  CharSequence chunk2=text2.subSequence(last2,text2.length());
  assertEqualsCharSequences(chunk1,chunk2,ignoreSpaces,skipNewline);
}
