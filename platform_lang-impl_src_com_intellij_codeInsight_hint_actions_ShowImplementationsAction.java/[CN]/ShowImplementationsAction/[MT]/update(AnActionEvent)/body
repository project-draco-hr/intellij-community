{
  Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null) {
    e.getPresentation().setEnabled(false);
    return;
  }
  DataContext dataContext=e.getDataContext();
  Editor editor=getEditor(dataContext);
  PsiFile file=CommonDataKeys.PSI_FILE.getData(dataContext);
  PsiElement element=CommonDataKeys.PSI_ELEMENT.getData(dataContext);
  element=getElement(project,file,editor,element);
  PsiFile containingFile=element != null ? element.getContainingFile() : file;
  boolean enabled=!(containingFile == null || !containingFile.getViewProvider().isPhysical());
  e.getPresentation().setEnabled(enabled);
}
