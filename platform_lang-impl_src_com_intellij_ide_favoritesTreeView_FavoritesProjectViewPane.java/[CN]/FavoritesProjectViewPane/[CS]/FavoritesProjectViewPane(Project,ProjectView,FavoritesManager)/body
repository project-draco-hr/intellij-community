{
  super(project);
  myProjectView=projectView;
  myFavoritesManager=favoritesManager;
  FavoritesListener favoritesListener=new FavoritesListener(){
    private boolean enabled=true;
    @Override public void rootsChanged(){
    }
    @Override public void listAdded(    String listName){
      refreshMySubIdsAndSelect(listName);
    }
    @Override public void listRemoved(    String listName){
      String selectedSubId=getSubId();
      refreshMySubIdsAndSelect(selectedSubId);
    }
    private void refreshMySubIdsAndSelect(    String listName){
      if (enabled) {
        try {
          enabled=false;
          myProjectView.removeProjectPane(FavoritesProjectViewPane.this);
          myProjectView.addProjectPane(FavoritesProjectViewPane.this);
          if (!myFavoritesManager.getAvailableFavoritesListNames().contains(listName)) {
            listName=null;
          }
          myProjectView.changeView(ID,listName);
        }
  finally {
          enabled=true;
        }
      }
    }
  }
;
  myFavoritesManager.addFavoritesListener(favoritesListener,this);
}
