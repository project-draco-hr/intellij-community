{
  Object state=states.get(key);
  if (!(state instanceof Element)) {
    return null;
  }
  if (states.replace(key,state,archiveState((Element)state))) {
    return (Element)state;
  }
 else {
    return getStateAndArchive(key);
  }
}
