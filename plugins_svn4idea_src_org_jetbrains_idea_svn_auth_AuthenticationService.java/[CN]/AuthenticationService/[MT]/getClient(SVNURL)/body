{
  SSLContext sslContext=createSslContext(repositoryUrl);
  List<String> supportedProtocols=getSupportedSslProtocols();
  SSLConnectionSocketFactory socketFactory=new SSLConnectionSocketFactory(sslContext,ArrayUtil.toStringArray(supportedProtocols),null,SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
  final RequestConfig.Builder requestConfigBuilder=RequestConfig.custom();
  final BasicCredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  if (haveDataForTmpConfig()) {
    IdeHttpClientHelpers.ApacheHttpClient4.setProxyIfEnabled(requestConfigBuilder);
    IdeHttpClientHelpers.ApacheHttpClient4.setProxyCredentialsIfEnabled(credentialsProvider);
  }
  return HttpClients.custom().setSSLSocketFactory(socketFactory).setDefaultSocketConfig(SocketConfig.custom().setSoTimeout(getAuthenticationManager().getReadTimeout(repositoryUrl)).build()).setDefaultRequestConfig(requestConfigBuilder.setConnectTimeout(getAuthenticationManager().getConnectTimeout(repositoryUrl)).build()).setDefaultCredentialsProvider(credentialsProvider).build();
}
