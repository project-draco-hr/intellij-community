{
  Set<VirtualFile> roots=getAllRoots();
  List<AnAction> rootActions=new ArrayList<AnAction>();
  if (roots.size() <= 10 && myColorManager.isMultipleRoots()) {
    for (    VirtualFile root : ContainerUtil.sorted(roots,FILE_BY_NAME_COMPARATOR)) {
      rootActions.add(new SelectVisibleRootAction(root));
    }
  }
  List<AnAction> structureActions=new ArrayList<AnAction>();
  for (  VcsLogStructureFilter filter : myHistory) {
    structureActions.add(new SelectFromHistoryAction(filter));
  }
  return new DefaultActionGroup(createAllAction(),new Separator("Roots"),new DefaultActionGroup(rootActions),new Separator("Folders"),new DefaultActionGroup(structureActions),new SelectAction());
}
