{
  Collection<VirtualFile> result=ContainerUtil.newArrayList();
  for (  VirtualFile root : dataPack.getLogProviders().keySet()) {
    Collection<VirtualFile> files=filter.getFiles(root);
    result.addAll(files);
    if (files.isEmpty() && filter.getRoots().contains(root)) {
      result.add(root);
    }
  }
  return result;
}
