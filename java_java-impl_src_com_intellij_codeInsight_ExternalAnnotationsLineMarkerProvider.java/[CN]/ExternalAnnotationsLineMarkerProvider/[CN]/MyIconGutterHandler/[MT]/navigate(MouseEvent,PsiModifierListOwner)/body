{
  final PsiFile containingFile=listOwner.getContainingFile();
  final VirtualFile virtualFile=PsiUtilCore.getVirtualFile(listOwner);
  if (virtualFile != null && containingFile != null) {
    final Project project=listOwner.getProject();
    final OpenFileDescriptor openFileDescriptor=new OpenFileDescriptor(project,virtualFile,listOwner.getTextOffset());
    final Editor editor=FileEditorManager.getInstance(project).openTextEditor(openFileDescriptor,true);
    if (editor != null) {
      final DefaultActionGroup group=new DefaultActionGroup();
      for (      final IntentionAction action : IntentionManager.getInstance().getAvailableIntentionActions()) {
        if (action.isAvailable(project,editor,containingFile)) {
          group.add(new ApplyIntentionAction(action,action.getText(),editor,containingFile));
        }
      }
      if (group.getChildrenCount() > 0) {
        editor.getScrollingModel().runActionOnScrollingFinished(new Runnable(){
          @Override public void run(){
            JBPopupFactory.getInstance().createActionGroupPopup(null,group,SimpleDataContext.getProjectContext(null),JBPopupFactory.ActionSelectionAid.SPEEDSEARCH,true).showInBestPositionFor(editor);
          }
        }
);
      }
    }
  }
}
