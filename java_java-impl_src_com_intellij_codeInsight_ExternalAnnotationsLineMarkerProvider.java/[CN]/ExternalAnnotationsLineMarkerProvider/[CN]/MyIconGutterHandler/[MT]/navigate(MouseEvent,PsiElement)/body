{
  final PsiElement listOwner=nameIdentifier.getParent();
  final PsiFile containingFile=listOwner.getContainingFile();
  final VirtualFile virtualFile=PsiUtilCore.getVirtualFile(listOwner);
  if (virtualFile != null && containingFile != null) {
    final Project project=listOwner.getProject();
    final Editor editor=FileEditorManager.getInstance(project).getSelectedTextEditor();
    if (editor != null) {
      editor.getCaretModel().moveToOffset(nameIdentifier.getTextOffset());
      final PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
      if (file != null && virtualFile.equals(file.getVirtualFile())) {
        final JBPopup popup=createActionGroupPopup(containingFile,project,editor);
        if (popup != null) {
          popup.show(new RelativePoint(e));
        }
      }
    }
  }
}
