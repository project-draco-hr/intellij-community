{
  EventLoopGroup eventLoopGroup=null;
  if (shutdownEventLoopGroup) {
    for (    Channel channel : openChannels) {
      if (channel instanceof ServerChannel) {
        eventLoopGroup=channel.eventLoop().parent();
        break;
      }
    }
  }
  Future<?> result;
  try {
    ChannelGroupFuture groupFuture=openChannels.close();
    groupFuture.awaitUninterruptibly(30,TimeUnit.SECONDS);
    result=groupFuture;
  }
  finally {
    if (eventLoopGroup != null) {
      result=eventLoopGroup.shutdownGracefully(1,2,TimeUnit.NANOSECONDS);
    }
  }
  return result;
}
