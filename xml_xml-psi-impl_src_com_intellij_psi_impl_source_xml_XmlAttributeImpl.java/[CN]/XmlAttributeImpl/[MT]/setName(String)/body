{
  final ASTNode name=XmlChildRole.ATTRIBUTE_NAME_FINDER.findChild(this);
  final String oldName=name.getText();
  final PomModel model=PomManager.getModel(getProject());
  final XmlAttribute attribute=XmlElementFactory.getInstance(getProject()).createAttribute(nameText,"",this);
  final ASTNode newName=XmlChildRole.ATTRIBUTE_NAME_FINDER.findChild((ASTNode)attribute);
  final XmlAspect aspect=model.getModelAspect(XmlAspect.class);
  model.runTransaction(new PomTransactionBase(getParent(),aspect){
    @Override public PomModelEvent runInner(){
      final PomModelEvent event=new PomModelEvent(model);
      PsiFile file=getContainingFile();
      XmlChangeSet xmlAspectChangeSet=new XmlAspectChangeSetImpl(model,file instanceof XmlFile ? (XmlFile)file : null);
      xmlAspectChangeSet.add(new XmlAttributeSetImpl(getParent(),oldName,null));
      xmlAspectChangeSet.add(new XmlAttributeSetImpl(getParent(),nameText,getValue()));
      event.registerChangeSet(model.getModelAspect(XmlAspect.class),xmlAspectChangeSet);
      CodeEditUtil.replaceChild(XmlAttributeImpl.this,name,newName);
      return event;
    }
  }
);
  return this;
}
