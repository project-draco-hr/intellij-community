{
  File dir;
  if (targetDirectoryPath != null) {
    dir=new File(targetDirectoryPath);
  }
 else {
    VirtualFile virtualDir=chooseDirectoryForFiles(project,parentComponent);
    if (virtualDir != null) {
      dir=VfsUtilCore.virtualToIoFile(virtualDir);
    }
 else {
      return null;
    }
  }
  return downloadWithProcess(dir,project,parentComponent);
}
