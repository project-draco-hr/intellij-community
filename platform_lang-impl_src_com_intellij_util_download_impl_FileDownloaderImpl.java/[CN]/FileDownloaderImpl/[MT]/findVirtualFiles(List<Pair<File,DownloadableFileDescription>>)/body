{
  List<Pair<VirtualFile,DownloadableFileDescription>> result=new ArrayList<Pair<VirtualFile,DownloadableFileDescription>>();
  for (  final Pair<File,DownloadableFileDescription> pair : ioFiles) {
    final File ioFile=pair.getFirst();
    VirtualFile libraryRootFile=new WriteAction<VirtualFile>(){
      @Override protected void run(      @NotNull Result<VirtualFile> result){
        final String url=VfsUtil.getUrlForLibraryRoot(ioFile);
        LocalFileSystem.getInstance().refreshAndFindFileByIoFile(ioFile);
        result.setResult(VirtualFileManager.getInstance().refreshAndFindFileByUrl(url));
      }
    }
.execute().getResultObject();
    if (libraryRootFile != null) {
      result.add(Pair.create(libraryRootFile,pair.getSecond()));
    }
  }
  return result;
}
