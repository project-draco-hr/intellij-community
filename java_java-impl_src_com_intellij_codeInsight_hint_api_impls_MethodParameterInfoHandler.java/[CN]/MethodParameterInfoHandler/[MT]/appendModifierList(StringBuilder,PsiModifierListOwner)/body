{
  int lastSize=buffer.length();
  Set<String> shownAnnotations=ContainerUtil.newHashSet();
  for (  PsiAnnotation annotation : AnnotationUtil.getAllAnnotations(owner,false,null,!DumbService.isDumb(owner.getProject()))) {
    final PsiJavaCodeReferenceElement element=annotation.getNameReferenceElement();
    if (element != null) {
      final PsiElement resolved=element.resolve();
      if (resolved instanceof PsiClass && (!JavaDocInfoGenerator.isDocumentedAnnotationType(resolved) || AnnotationTargetUtil.findAnnotationTarget((PsiClass)resolved,PsiAnnotation.TargetType.TYPE_USE) != null)) {
        continue;
      }
      String referenceName=element.getReferenceName();
      if (shownAnnotations.add(referenceName) || JavaDocInfoGenerator.isRepeatableAnnotationType(resolved)) {
        if (lastSize != buffer.length())         buffer.append(' ');
        buffer.append('@').append(referenceName);
      }
    }
  }
  if (lastSize != buffer.length())   buffer.append(' ');
}
