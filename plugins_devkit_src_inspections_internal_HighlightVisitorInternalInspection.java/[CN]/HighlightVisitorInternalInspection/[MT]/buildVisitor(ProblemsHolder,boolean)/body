{
  return new HighlightVisitorImpl(JavaPsiFacade.getInstance(holder.getProject()).getResolveHelper()){
{
      final PsiFile file=holder.getFile();
      prepareToRunAsInspection(new HighlightInfoHolder(file){
        @Override public boolean add(        @Nullable HighlightInfo info){
          if (super.add(info)) {
            if (info != null && info.getSeverity() == HighlightSeverity.ERROR) {
              final int startOffset=info.getStartOffset();
              final PsiElement element=file.findElementAt(startOffset);
              if (element != null) {
                holder.registerProblem(element,info.getDescription());
              }
            }
            return true;
          }
          return false;
        }
        @Override public boolean hasErrorResults(){
          return false;
        }
      }
);
    }
  }
;
}
