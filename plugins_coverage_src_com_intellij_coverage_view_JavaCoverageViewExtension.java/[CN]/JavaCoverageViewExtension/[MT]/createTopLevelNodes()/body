{
  final List<AbstractTreeNode> topLevelNodes=new ArrayList<AbstractTreeNode>();
  for (  CoverageSuite suite : mySuitesBundle.getSuites()) {
    final List<PsiPackage> packages=((JavaCoverageSuite)suite).getCurrentSuitePackages(myProject);
    for (    PsiPackage aPackage : packages) {
      final GlobalSearchScope searchScope=getSearchScope(mySuitesBundle,myProject);
      if (aPackage.getDirectories(searchScope).length == 0)       continue;
      if (aPackage.getClasses(searchScope).length == 0)       continue;
      final CoverageListNode node=new CoverageListNode(aPackage,mySuitesBundle,myStateBean);
      topLevelNodes.add(node);
      collectSubPackages(topLevelNodes,aPackage,mySuitesBundle,myStateBean);
    }
    final List<PsiClass> classes=((JavaCoverageSuite)suite).getCurrentSuiteClasses(myProject);
    for (    PsiClass aClass : classes) {
      topLevelNodes.add(new CoverageListNode(aClass,mySuitesBundle,myStateBean));
    }
  }
  return topLevelNodes;
}
