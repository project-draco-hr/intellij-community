{
  if (ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      return isInCoverageScope(aPackage);
    }
  }
)) {
    final CoverageListNode node=new CoverageListNode(aPackage.getProject(),aPackage,mySuitesBundle,myStateBean);
    children.add(node);
  }
 else   if (!myStateBean.myFlattenPackages) {
    collectSubPackages(children,aPackage);
  }
  if (myStateBean.myFlattenPackages) {
    collectSubPackages(children,aPackage);
  }
}
