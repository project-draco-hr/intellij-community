{
  AbstractLayoutCodeProcessor processor=new ReformatCodeProcessor(project,dir,options.isIncludeSubdirectories(),options.isProcessOnlyChangedText());
  registerScopeFilter(processor,options.getSearchScope());
  registerFileMaskFilter(processor,options.getFileTypeMask());
  if (options.isOptimizeImports()) {
    processor=new OptimizeImportsProcessor(processor);
  }
  if (options.isRearrangeEntries()) {
    processor=new RearrangeCodeProcessor(processor);
  }
  processor.run();
}
