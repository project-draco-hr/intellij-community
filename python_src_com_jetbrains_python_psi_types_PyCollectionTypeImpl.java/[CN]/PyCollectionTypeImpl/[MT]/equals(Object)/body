{
  if (this == o)   return true;
  if (!(o instanceof PyCollectionType))   return false;
  if (!super.equals(o))   return false;
  PyCollectionType type=(PyCollectionType)o;
  final TypeEvalContext context=TypeEvalContext.codeInsightFallback(myClass.getProject());
  final List<PyType> otherElementTypes=type.getElementTypes(context);
  if (myElementTypes.size() != otherElementTypes.size())   return false;
  for (int i=0; i < myElementTypes.size(); i++) {
    final PyType elementType=myElementTypes.get(i);
    final PyType otherElementType=otherElementTypes.get(i);
    if (elementType == null && otherElementType != null)     return false;
    if (elementType != null && !elementType.equals(otherElementType))     return false;
  }
  return true;
}
