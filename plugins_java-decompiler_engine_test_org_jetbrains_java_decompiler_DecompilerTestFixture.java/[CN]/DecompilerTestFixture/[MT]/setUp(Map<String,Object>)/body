{
  testDataDir=new File("testData");
  if (!isTestDataDir(testDataDir))   testDataDir=new File("community/plugins/java-decompiler/engine/testData");
  if (!isTestDataDir(testDataDir))   testDataDir=new File("plugins/java-decompiler/engine/testData");
  if (!isTestDataDir(testDataDir))   testDataDir=new File("../community/plugins/java-decompiler/engine/testData");
  if (!isTestDataDir(testDataDir))   testDataDir=new File("../plugins/java-decompiler/engine/testData");
  assertTrue("current dir: " + new File("").getAbsolutePath(),isTestDataDir(testDataDir));
  testDataDir=testDataDir.getAbsoluteFile();
  tempDir=File.createTempFile("decompiler_test_","_dir");
  assertTrue(tempDir.delete());
  targetDir=new File(tempDir,"decompiled");
  assertTrue(targetDir.mkdirs());
  decompiler=new ConsoleDecompiler(this.targetDir,new HashMap<String,Object>(){
{
      put(IFernflowerPreferences.LOG_LEVEL,"warn");
      put(IFernflowerPreferences.DECOMPILE_GENERIC_SIGNATURES,"1");
      put(IFernflowerPreferences.REMOVE_SYNTHETIC,"1");
      put(IFernflowerPreferences.REMOVE_BRIDGE,"1");
      put(IFernflowerPreferences.LITERALS_AS_IS,"1");
      put(IFernflowerPreferences.UNIT_TEST_MODE,"1");
      putAll(options);
    }
  }
);
}
