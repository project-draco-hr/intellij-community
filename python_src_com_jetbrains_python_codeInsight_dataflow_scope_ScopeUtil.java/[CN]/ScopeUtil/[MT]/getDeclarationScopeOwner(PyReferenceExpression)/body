{
  final String name=node.getName();
  PsiElement element=node;
  if (name != null) {
    if (PsiTreeUtil.getParentOfType(node,PyParameter.class) != null) {
      element=PsiTreeUtil.getParentOfType(node,ScopeOwner.class);
    }
    ScopeOwner owner=PsiTreeUtil.getParentOfType(element,ScopeOwner.class);
    while (owner != null) {
      Scope scope=ControlFlowCache.getScope(owner);
      if (scope.containsDeclaration(name)) {
        return owner;
      }
      owner=PsiTreeUtil.getParentOfType(owner,ScopeOwner.class);
    }
  }
  return null;
}
