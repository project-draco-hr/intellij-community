{
  SVNInfo info=mySvnVcs.getInfo(file);
  if (info != null) {
    if (info.getKind() == SVNNodeKind.FILE) {
      doRevert(file,false);
    }
 else {
      if (SVNProperty.SCHEDULE_ADD.equals(info.getSchedule())) {
        doRevert(file,true);
      }
 else {
        boolean is17OrGreater=is17OrGreaterCopy(file,info);
        if (is17OrGreater) {
          doRevert(file,true);
        }
 else {
          mySvnVcs.createUpdateClient().doUpdate(file,SVNRevision.HEAD,true);
        }
      }
    }
  }
 else {
    throw new VcsException("Can not get 'svn info' for " + file.getPath());
  }
}
