{
  HighlighterIterator iterator=editor.getHighlighter().createIterator(0);
  while (!iterator.atEnd()) {
    int start=iterator.getStart();
    int end=iterator.getEnd();
    if ((start > caretOffset || end < caretOffset) && end - start > matcher.getPrefix().length() && isWordLike(chars,start,end)) {
      final String word=chars.subSequence(start,end).toString();
      if (matcher.prefixMatches(word)) {
        CompletionVariant v=new CompletionVariant(word,start);
        if (end > caretOffset) {
          afterWords.add(v);
        }
 else {
          words.add(v);
        }
      }
    }
    iterator.advance();
  }
}
