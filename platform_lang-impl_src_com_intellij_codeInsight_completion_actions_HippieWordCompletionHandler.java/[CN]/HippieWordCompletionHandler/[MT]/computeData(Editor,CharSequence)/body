{
  final int offset=editor.getCaretModel().getOffset();
  final CompletionData data=new CompletionData();
  processWords(editor,offset - 1,new TokenProcessor(){
    @Override public boolean processToken(    int start,    int end){
      if (start > offset) {
        return false;
      }
      if (end >= offset) {
        data.myPrefix=charsSequence.subSequence(start,offset).toString();
        data.myWordUnderCursor=charsSequence.subSequence(start,end).toString();
        data.startOffset=start;
        return false;
      }
      return true;
    }
  }
);
  if (data.myPrefix == null) {
    data.myPrefix="";
    data.myWordUnderCursor="";
    data.startOffset=offset;
  }
  return data;
}
