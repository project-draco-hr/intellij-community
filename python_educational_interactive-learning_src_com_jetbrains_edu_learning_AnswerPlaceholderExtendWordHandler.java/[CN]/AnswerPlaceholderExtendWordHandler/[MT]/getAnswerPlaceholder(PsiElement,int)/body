{
  PsiFile file=e.getContainingFile();
  if (file == null) {
    return null;
  }
  VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile == null) {
    return null;
  }
  TaskFile taskFile=StudyUtils.getTaskFile(e.getProject(),virtualFile);
  if (taskFile == null) {
    return null;
  }
  Document document=FileDocumentManager.getInstance().getDocument(virtualFile);
  if (document == null) {
    return null;
  }
  Editor editor=FileEditorManager.getInstance(e.getProject()).getSelectedTextEditor();
  return editor == null ? null : taskFile.getAnswerPlaceholder(document,editor.offsetToLogicalPosition(offset));
}
