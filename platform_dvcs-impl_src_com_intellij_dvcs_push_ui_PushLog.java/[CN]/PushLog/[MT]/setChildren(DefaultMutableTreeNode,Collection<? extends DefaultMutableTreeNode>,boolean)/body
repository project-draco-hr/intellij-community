{
  try {
    TREE_CONSTRUCTION_LOCK.writeLock().lock();
    parentNode.removeAllChildren();
    for (    DefaultMutableTreeNode child : childrenNodes) {
      parentNode.add(child);
    }
    final DefaultTreeModel model=((DefaultTreeModel)myTree.getModel());
    model.nodeStructureChanged(parentNode);
    TreePath path=TreeUtil.getPathFromRoot(parentNode);
    if (shouldExpand) {
      myTree.expandPath(path);
    }
 else {
      myTree.collapsePath(path);
    }
  }
  finally {
    TREE_CONSTRUCTION_LOCK.writeLock().unlock();
  }
}
