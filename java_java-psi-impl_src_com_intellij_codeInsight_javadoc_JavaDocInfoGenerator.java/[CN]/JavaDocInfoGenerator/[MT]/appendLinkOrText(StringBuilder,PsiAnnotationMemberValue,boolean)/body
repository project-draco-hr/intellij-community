{
  if (generateLink && memberValue instanceof PsiQualifiedReferenceElement) {
    String text=((PsiQualifiedReferenceElement)memberValue).getCanonicalText();
    PsiElement resolve=((PsiQualifiedReferenceElement)memberValue).resolve();
    if (resolve instanceof PsiField) {
      PsiField field=(PsiField)resolve;
      PsiClass aClass=field.getContainingClass();
      int startOfPropertyNamePosition=text.lastIndexOf('.');
      if (startOfPropertyNamePosition != -1) {
        text=text.substring(0,startOfPropertyNamePosition) + '#' + text.substring(startOfPropertyNamePosition + 1);
      }
 else {
        if (aClass != null)         text=aClass.getQualifiedName() + '#' + field.getName();
      }
      generateLink(buffer,text,aClass != null ? aClass.getName() + '.' + field.getName() : null,memberValue,false);
      return;
    }
  }
  buffer.append(XmlStringUtil.escapeString(memberValue.getText()));
}
