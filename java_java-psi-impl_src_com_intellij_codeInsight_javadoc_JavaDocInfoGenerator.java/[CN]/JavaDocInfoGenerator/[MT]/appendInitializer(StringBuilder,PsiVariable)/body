{
  PsiExpression initializer=variable.getInitializer();
  if (initializer != null) {
    buffer.append(" = ");
    String text=initializer.getText();
    text=text.trim();
    int index1=text.indexOf('\n');
    if (index1 < 0)     index1=text.length();
    int index2=text.indexOf('\r');
    if (index2 < 0)     index2=text.length();
    int index=Math.min(index1,index2);
    boolean trunc=index < text.length();
    if (trunc) {
      text=text.substring(0,index);
      buffer.append(StringUtil.escapeXml(text));
      buffer.append("...");
    }
 else {
      initializer.accept(new MyVisitor(buffer));
    }
    PsiExpression constantInitializer=calcInitializerExpression(variable);
    if (constantInitializer != null) {
      buffer.append("\n");
      appendExpressionValue(buffer,constantInitializer,CodeInsightBundle.message("javadoc.resolved.value"));
    }
  }
}
