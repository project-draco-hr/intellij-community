{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      Project project=view.getProject();
      CommandProcessor.getInstance().executeCommand(project,new Runnable(){
        @Override public void run(){
          final InspectionToolWrapper wrapper=view.getTree().getSelectedToolWrapper();
          for (          InspectionTreeNode node : getNodesToSuppress(view)) {
            final Pair<PsiElement,CommonProblemDescriptor> content=getContentToSuppress(node);
            if (content.first == null)             break;
            final PsiElement element=content.first;
            RefEntity refEntity=null;
            if (node instanceof RefElementNode) {
              refEntity=((RefElementNode)node).getElement();
            }
 else             if (node instanceof ProblemDescriptionNode) {
              refEntity=((ProblemDescriptionNode)node).getElement();
            }
            if (!suppress(element,content.second,mySuppressAction,refEntity,wrapper))             break;
          }
          final Set<GlobalInspectionContextImpl> globalInspectionContexts=((InspectionManagerEx)InspectionManager.getInstance(project)).getRunningContexts();
          for (          GlobalInspectionContextImpl context : globalInspectionContexts) {
            context.refreshViews();
          }
          CommandProcessor.getInstance().markCurrentCommandAsGlobal(project);
        }
      }
,getTemplatePresentation().getText(),null);
    }
  }
);
}
