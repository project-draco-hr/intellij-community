{
  FileType type=null;
  Element element=typeElement.getChild(AbstractFileType.ELEMENT_HIGHLIGHTING);
  if (element != null) {
    SyntaxTable table=AbstractFileType.readSyntaxTable(element);
    if (info == null) {
      type=new AbstractFileType(table);
    }
 else {
      type=new ImportedFileType(table);
      ((ImportedFileType)type).getExternalInfo().copy(info);
      ((ImportedFileType)type).readOriginalMatchers(typeElement);
    }
    ((AbstractFileType)type).initSupport();
    return type;
  }
  for (  CustomFileTypeFactory factory : CustomFileTypeFactory.EP_NAME.getExtensions()) {
    type=factory.createFileType(typeElement);
    if (type != null) {
      break;
    }
  }
  if (type == null) {
    type=new UserBinaryFileType();
  }
  return type;
}
