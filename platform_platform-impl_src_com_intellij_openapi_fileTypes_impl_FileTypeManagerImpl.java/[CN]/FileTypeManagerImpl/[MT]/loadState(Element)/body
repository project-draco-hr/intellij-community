{
  int savedVersion=getVersion(parentNode);
  String previousIgnores=getIgnoredFilesList();
  for (  final Object o : parentNode.getChildren()) {
    final Element e=(Element)o;
    if (ELEMENT_FILE_TYPES.equals(e.getName())) {
      List children=e.getChildren(ELEMENT_FILETYPE);
      for (      final Object aChildren : children) {
        Element element=(Element)aChildren;
        loadFileType(element,true,null,false,null);
      }
    }
 else     if (ELEMENT_IGNORE_FILES.equals(e.getName())) {
      myIgnoredPatterns.setIgnoreMasks(e.getAttributeValue(ATTRIBUTE_LIST));
    }
 else     if (AbstractFileType.ELEMENT_EXTENSIONMAP.equals(e.getName())) {
      readGlobalMappings(e);
    }
  }
  if (savedVersion == 0) {
    addIgnore(".svn");
  }
  if (savedVersion < 2) {
    restoreStandardFileExtensions();
  }
  if (savedVersion < 4) {
    addIgnore("*.pyc");
    addIgnore("*.pyo");
    addIgnore(".git");
  }
  if (savedVersion < 5) {
    addIgnore("*.hprof");
  }
  if (savedVersion < 6) {
    addIgnore("_svn");
  }
  if (savedVersion < 7) {
    addIgnore(".hg");
  }
  if (savedVersion < 8) {
    addIgnore("*.lib");
    addIgnore("*~");
  }
  if (savedVersion < 9) {
    addIgnore("__pycache__");
  }
  if (savedVersion < 10) {
    addIgnore(".bundle");
  }
  if (savedVersion < 11) {
    addIgnore("*.rbc");
  }
  if (savedVersion == 11 && PlatformUtils.isCLion()) {
    myIgnoredPatterns.setIgnoreMasks(StringUtil.join(Arrays.asList(previousIgnores,getIgnoredFilesList()),";"));
  }
  myIgnoredFileCache.clearCache();
  fileTypeChangedCount.set(JDOMExternalizer.readInteger(parentNode,"fileTypeChangedCounter",0));
  autoDetectedAttribute=autoDetectedAttribute.newVersion(fileTypeChangedCount.get());
}
