{
  PsiElement cap=PyResolveUtil.getConcealingParent(node);
  if (cap instanceof PyClass) {
    PyParameterList plist=node.getParameterList();
    PyParameter[] params=plist.getParameters();
    Set<PyFunction.Flag> flags=PyUtil.detectDecorationsAndWrappersOf(node);
    if (params.length == 0) {
      if (flags.contains(PyFunction.Flag.STATICMETHOD))       return;
      ASTNode name_node=node.getNameNode();
      if (name_node != null) {
        PsiElement open_paren=plist.getFirstChild();
        PsiElement close_paren=plist.getLastChild();
        if (open_paren != null && close_paren != null && "(".equals(open_paren.getText()) && ")".equals(close_paren.getText())) {
          registerProblem(plist,PyBundle.message("INSP.must.have.first.parameter"),ProblemHighlightType.GENERIC_ERROR,null,new AddSelfQuickFix());
        }
      }
    }
 else {
      PyNamedParameter first_param=params[0].getAsNamed();
      if (first_param != null) {
        String pname=first_param.getText();
        @NonNls String[] mangled={"eslf","sself","elf","felf","slef","seelf","slf","sslf","sefl","sellf","sef","seef"};
        for (        String typo : mangled) {
          if (typo.equals(pname)) {
            registerProblem(params[0].getNode().getPsi(),PyBundle.message("INSP.probably.mistyped.self"),new RenameToSelfQuickFix());
            return;
          }
        }
        if (flags.contains(PyFunction.Flag.CLASSMETHOD)) {
          if (!"cls".equals(pname)) {
            registerProblem(plist,PyBundle.message("INSP.usually.named.cls"));
          }
        }
 else         if (!"self".equals(pname) && !flags.contains(PyFunction.Flag.STATICMETHOD)) {
          registerProblem(plist,PyBundle.message("INSP.usually.named.self"));
        }
      }
 else {
        if (!flags.contains(PyFunction.Flag.STATICMETHOD)) {
          registerProblem(plist,PyBundle.message("INSP.first.param.must.not.be.tuple"));
        }
      }
    }
  }
}
