{
  PsiElement cap=PyResolveUtil.getConcealingParent(node);
  if (cap instanceof PyClass) {
    PyParameterList plist=node.getParameterList();
    PyParameter[] params=plist.getParameters();
    Set<PyFunction.Flag> flags=PyUtil.detectDecorationsAndWrappersOf(node);
    if (params.length == 0) {
      if (flags.contains(STATICMETHOD))       return;
      ASTNode name_node=node.getNameNode();
      if (name_node != null) {
        PsiElement open_paren=plist.getFirstChild();
        PsiElement close_paren=plist.getLastChild();
        if (open_paren != null && close_paren != null && "(".equals(open_paren.getText()) && ")".equals(close_paren.getText())) {
          registerProblem(plist,PyBundle.message("INSP.must.have.first.parameter"),ProblemHighlightType.GENERIC_ERROR,null,new AddSelfQuickFix());
        }
      }
    }
 else {
      PyNamedParameter first_param=params[0].getAsNamed();
      if (first_param != null) {
        String pname=first_param.getText();
        @NonNls String[] mangled={"eslf","sself","elf","felf","slef","seelf","slf","sslf","sefl","sellf","sef","seef"};
        for (        String typo : mangled) {
          if (typo.equals(pname)) {
            registerProblem(PyUtil.sure(params[0].getNode()).getPsi(),PyBundle.message("INSP.probably.mistyped.self"),new RenameParameterQuickFix(PyNames.CANONICAL_SELF));
            return;
          }
        }
        if (flags.contains(CLASSMETHOD)) {
          String CLS="cls";
          if (!CLS.equals(pname)) {
            registerProblem(PyUtil.sure(params[0].getNode()).getPsi(),PyBundle.message("INSP.usually.named.cls"),new RenameParameterQuickFix(CLS));
          }
        }
 else         if (!PyNames.CANONICAL_SELF.equals(pname) && !flags.contains(STATICMETHOD)) {
          registerProblem(PyUtil.sure(params[0].getNode()).getPsi(),PyBundle.message("INSP.usually.named.self"),new RenameParameterQuickFix(PyNames.CANONICAL_SELF));
        }
      }
 else {
        if (!flags.contains(STATICMETHOD)) {
          registerProblem(plist,PyBundle.message("INSP.first.param.must.not.be.tuple"));
        }
      }
    }
  }
}
