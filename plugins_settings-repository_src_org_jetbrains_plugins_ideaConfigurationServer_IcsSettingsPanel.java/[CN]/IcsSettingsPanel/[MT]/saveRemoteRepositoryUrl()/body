{
  String url=StringUtil.nullize(urlTextField.getText());
  if (url != null) {
    boolean isFile;
    if (url.startsWith(StandardFileSystems.FILE_PROTOCOL_PREFIX)) {
      url=url.substring(StandardFileSystems.FILE_PROTOCOL_PREFIX.length());
      isFile=true;
    }
 else {
      isFile=!URLUtil.containsScheme(url);
    }
    if (isFile) {
      File file=new File(url);
      if (file.exists()) {
        if (!file.isDirectory()) {
          Messages.showErrorDialog(getContentPane(),"Specified path is not a directory","Specified path is invalid");
          return false;
        }
      }
 else       if (Messages.showYesNoDialog(getContentPane(),IcsBundle.message("init.dialog.message"),IcsBundle.message("init.dialog.title"),Messages.getQuestionIcon()) == 0) {
        try {
          IcsManager.getInstance().getRepositoryManager().initRepository(file);
        }
 catch (        IOException e) {
          Messages.showErrorDialog(getContentPane(),IcsBundle.message("init.failed.message",e.getMessage()),IcsBundle.message("init.failed.title"));
          return false;
        }
      }
 else {
        return false;
      }
    }
  }
  IcsManager.getInstance().getRepositoryManager().setRemoteRepositoryUrl(url);
  return true;
}
