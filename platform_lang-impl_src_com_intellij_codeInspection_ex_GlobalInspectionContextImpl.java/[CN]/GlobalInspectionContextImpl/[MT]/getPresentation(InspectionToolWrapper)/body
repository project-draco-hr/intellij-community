{
  final String shortName=toolWrapper.getShortName();
  InspectionToolPresentation presentation=myPresentationMap.get(shortName);
  if (presentation == null) {
    String presentationClass=StringUtil.notNullize(toolWrapper.myEP == null ? null : toolWrapper.myEP.presentation,DefaultInspectionToolPresentation.class.getName());
    try {
      Constructor<?> constructor=Class.forName(presentationClass).getConstructor(InspectionToolWrapper.class,GlobalInspectionContextImpl.class);
      presentation=(InspectionToolPresentation)constructor.newInstance(toolWrapper,this);
    }
 catch (    Exception e) {
      LOG.error(e);
      throw new RuntimeException(e);
    }
    presentation=ConcurrencyUtil.cacheOrGet(myPresentationMap,shortName,presentation);
  }
  return presentation;
}
