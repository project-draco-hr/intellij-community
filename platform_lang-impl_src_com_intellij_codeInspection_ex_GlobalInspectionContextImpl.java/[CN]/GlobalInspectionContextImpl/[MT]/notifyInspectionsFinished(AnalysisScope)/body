{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      LOG.info("Code inspection finished");
      final InspectionResultsView view;
      if (myView == null) {
        view=new InspectionResultsView(GlobalInspectionContextImpl.this,new InspectionRVContentProviderImpl(getProject()));
      }
 else {
        view=null;
      }
      if (!(myView == null ? view : myView).update() && !getUIOptions().SHOW_ONLY_DIFF) {
        NOTIFICATION_GROUP.createNotification(InspectionsBundle.message("inspection.no.problems.message",scope.getFileCount(),scope.getDisplayName()),MessageType.INFO).notify(getProject());
        close(true);
        if (view != null) {
          Disposer.dispose(view);
        }
      }
 else       if (view != null) {
        addView(view);
      }
    }
  }
);
}
