{
  if (isOnTheFly) {
    return ProblemDescriptor.EMPTY_ARRAY;
  }
  Object info=annotator.collectInformation(file);
  if (info != null) {
    Object annotationResult=annotator.doAnnotate(info);
    if (annotationResult == null) {
      return ProblemDescriptor.EMPTY_ARRAY;
    }
    AnnotationHolderImpl annotationHolder=new AnnotationHolderImpl(new AnnotationSession(file));
    annotator.apply(file,annotationResult,annotationHolder);
    return convertToProblemDescriptors(annotationHolder,manager,file);
  }
  return ProblemDescriptor.EMPTY_ARRAY;
}
