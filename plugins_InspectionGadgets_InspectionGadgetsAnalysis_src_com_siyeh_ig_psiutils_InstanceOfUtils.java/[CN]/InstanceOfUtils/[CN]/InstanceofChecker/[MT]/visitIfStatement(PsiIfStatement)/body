{
  final PsiStatement branch=ifStatement.getElseBranch();
  negate=branch != null && PsiTreeUtil.isAncestor(branch,referenceExpression,true);
  if (negate) {
    if (branch instanceof PsiBlockStatement) {
      final PsiBlockStatement blockStatement=(PsiBlockStatement)branch;
      if (VariableAccessUtils.variableIsAssignedBeforeReference(referenceExpression,blockStatement)) {
        return;
      }
    }
  }
 else {
    final PsiStatement thenBranch=ifStatement.getThenBranch();
    if (thenBranch instanceof PsiBlockStatement) {
      final PsiBlockStatement blockStatement=(PsiBlockStatement)thenBranch;
      if (VariableAccessUtils.variableIsAssignedBeforeReference(referenceExpression,blockStatement)) {
        return;
      }
    }
  }
  checkExpression(ifStatement.getCondition());
}
