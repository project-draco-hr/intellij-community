{
  if (!needModify(parent)) {
    return children;
  }
  Collection<AbstractTreeNode> nodes=new ArrayList<AbstractTreeNode>();
  for (  AbstractTreeNode node : children) {
    Project project=node.getProject();
    if (project != null) {
      if (node.getValue() instanceof PsiDirectory) {
        PsiDirectory directory=(PsiDirectory)node.getValue();
        nodes.add(new CCDirectoryNode(project,directory,settings));
      }
 else {
        nodes.add(node);
      }
    }
  }
  return nodes;
}
