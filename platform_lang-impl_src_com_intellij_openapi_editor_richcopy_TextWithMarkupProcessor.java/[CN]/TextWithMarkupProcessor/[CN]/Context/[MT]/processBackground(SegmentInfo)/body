{
  if (myBackground == null && info.background != null && !myDefaultBackground.equals(info.background)) {
    addTextIfPossible(info.startOffset);
    myBackground=info.background;
    outputInfos.add(new Background(myColorRegistry.getId(info.background)));
  }
 else   if (myBackground != null) {
    Color c=info.background == null ? myDefaultBackground : info.background;
    if (!myBackground.equals(c)) {
      addTextIfPossible(info.startOffset);
      outputInfos.add(new Background(myColorRegistry.getId(c)));
      myBackground=c;
    }
  }
}
