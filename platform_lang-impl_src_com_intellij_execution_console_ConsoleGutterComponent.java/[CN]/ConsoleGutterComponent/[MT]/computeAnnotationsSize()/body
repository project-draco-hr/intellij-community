{
  FontMetrics fontMetrics=editor.getFontMetrics(Font.PLAIN);
  int lineCount=editor.getDocument().getLineCount();
  GutterContentProvider gutterProvider=gutterContentProvider;
  gutterProvider.beforeUiComponentUpdate(editor);
  int gutterSize=0;
  for (int i=0; i < lineCount; i++) {
    String text=gutterProvider.getText(i,editor);
    if (text != null) {
      gutterSize=Math.max(gutterSize,fontMetrics.stringWidth(text));
    }
  }
  annotationGuttersSize=gutterSize;
}
