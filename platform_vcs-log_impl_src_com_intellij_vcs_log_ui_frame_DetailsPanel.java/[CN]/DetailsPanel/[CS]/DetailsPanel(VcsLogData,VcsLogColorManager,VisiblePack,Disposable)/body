{
  myLogData=logData;
  myColorManager=colorManager;
  myDataPack=initialDataPack;
  myScrollPane=new JBScrollPane(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
  myScrollPane.getVerticalScrollBar().setUnitIncrement(JBUI.scale(10));
  myScrollPane.getHorizontalScrollBar().setUnitIncrement(JBUI.scale(10));
  myMainContentPanel=new JPanel(){
    @Override public Dimension getPreferredSize(){
      Dimension size=super.getPreferredSize();
      boolean expanded=false;
      for (      Component c : getComponents()) {
        if (c instanceof CommitPanel && ((CommitPanel)c).isExpanded()) {
          expanded=true;
          break;
        }
      }
      if (expanded) {
        return size;
      }
      size.width=myScrollPane.getViewport().getWidth() - 5;
      return size;
    }
    @Override public Color getBackground(){
      return CommitPanel.getCommitDetailsBackground();
    }
    @Override protected void paintChildren(    Graphics g){
      if (StringUtil.isNotEmpty(myEmptyText.getText())) {
        myEmptyText.paint(this,g);
      }
 else {
        super.paintChildren(g);
      }
    }
  }
;
  myMainContentPanel.setLayout(new BoxLayout(myMainContentPanel,BoxLayout.Y_AXIS));
  myEmptyText=new StatusText(myMainContentPanel){
    @Override protected boolean isStatusVisible(){
      return StringUtil.isNotEmpty(getText());
    }
  }
;
  myMainContentPanel.setOpaque(false);
  myScrollPane.setViewportView(myMainContentPanel);
  myScrollPane.setBorder(IdeBorderFactory.createEmptyBorder());
  myScrollPane.setViewportBorder(IdeBorderFactory.createEmptyBorder());
  myLoadingPanel=new JBLoadingPanel(new BorderLayout(),parent,ProgressWindow.DEFAULT_PROGRESS_DIALOG_POSTPONE_TIME_MILLIS){
    @Override public Color getBackground(){
      return CommitPanel.getCommitDetailsBackground();
    }
  }
;
  myLoadingPanel.add(myScrollPane);
  EditorColorsManager.getInstance().addEditorColorsListener(new EditorColorsAdapter(){
    @Override public void globalSchemeChange(    EditorColorsScheme scheme){
      for (int i=0; i < mySelection.size(); i++) {
        CommitPanel commitPanel=getCommitPanel(i);
        commitPanel.update();
      }
    }
  }
,parent);
  setLayout(new BorderLayout());
  add(myLoadingPanel,BorderLayout.CENTER);
  myEmptyText.setText("Commit details");
}
