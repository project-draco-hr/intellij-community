{
  myEmptyText.setText("");
  int selectionLength=selection.length;
  int existingCount=(myMainContentPanel.getComponentCount() + 1) / 2;
  int requiredCount=Math.min(selectionLength,MAX_ROWS);
  for (int i=existingCount; i < requiredCount; i++) {
    if (i > 0) {
      myMainContentPanel.add(new SeparatorComponent(0,OnePixelDivider.BACKGROUND,null),"growx, wmax 100%, growy 0");
    }
    myMainContentPanel.add(new CommitPanel(myLogData,myColorManager,myDataPack));
  }
  while (myMainContentPanel.getComponentCount() > 2 * requiredCount - 1) {
    myMainContentPanel.remove(myMainContentPanel.getComponentCount() - 1);
  }
  if (selectionLength > MAX_ROWS) {
    myMainContentPanel.add(new SeparatorComponent(0,OnePixelDivider.BACKGROUND,null));
    JBLabel label=new JBLabel("(showing " + MAX_ROWS + " of "+ selectionLength+ " selected commits)");
    label.setFont(CommitPanel.getCommitDetailsFont());
    label.setBorder(JBUI.Borders.empty(VcsLogGraphTable.ROOT_INDICATOR_WHITE_WIDTH / 2,myColorManager.isMultipleRoots() ? VcsLogGraphTable.ROOT_INDICATOR_WHITE_WIDTH + VcsLogGraphTable.ROOT_INDICATOR_COLORED_WIDTH : VcsLogGraphTable.ROOT_INDICATOR_WHITE_WIDTH / 2,CommitPanel.BOTTOM_BORDER,0));
    myMainContentPanel.add(label);
  }
  mySelection=Ints.asList(Arrays.copyOf(selection,requiredCount));
  for (int i=0; i < mySelection.size(); i++) {
    myLayout.setComponentConstraints(getCommitPanel(i),"growx, wmax 100%, growy" + (i == mySelection.size() - 1 ? ", push" : ""));
  }
  repaint();
}
