{
  if (notUsed != null && notUsed.getValueIsAdjusting())   return;
  VcsFullCommitDetails newCommitDetails=null;
  int[] rows=myGraphTable.getSelectedRows();
  if (rows.length < 1) {
    showMessage("No commits selected");
  }
 else   if (rows.length > 1) {
    showMessage("Several commits selected");
  }
 else {
    myEmptyText.setText("");
    myMainContentPanel.repaint();
    int row=rows[0];
    GraphTableModel tableModel=myGraphTable.getModel();
    VcsFullCommitDetails commitData=tableModel.getFullDetails(row);
    if (commitData instanceof LoadingDetails) {
      myLoadingPanel.startLoading();
      myCommitDetailsPanel.setData(null);
      myReferencesPanel.setReferences(Collections.<VcsRef>emptyList());
      updateDetailsBorder(null);
    }
 else {
      myLoadingPanel.stopLoading();
      myCommitDetailsPanel.setData(commitData);
      myReferencesPanel.setReferences(sortRefs(commitData.getId(),commitData.getRoot()));
      updateDetailsBorder(commitData);
      newCommitDetails=commitData;
    }
    List<String> branches=null;
    if (!(commitData instanceof LoadingDetails)) {
      branches=myLogData.getContainingBranchesGetter().requestContainingBranches(commitData.getRoot(),commitData.getId());
    }
    myCommitDetailsPanel.setBranches(branches);
    if (!Comparing.equal(myCurrentCommitDetails,newCommitDetails)) {
      myCurrentCommitDetails=newCommitDetails;
      myScrollPane.getVerticalScrollBar().setValue(0);
    }
  }
}
