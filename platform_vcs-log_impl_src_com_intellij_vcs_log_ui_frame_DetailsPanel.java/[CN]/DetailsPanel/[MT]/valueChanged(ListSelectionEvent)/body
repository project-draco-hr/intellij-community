{
  if (event != null && event.getValueIsAdjusting())   return;
  Set<VcsFullCommitDetails> newCommitDetails=ContainerUtil.newHashSet();
  int[] rows=myGraphTable.getSelectedRows();
  myLoadingPanel.stopLoading();
  if (rows.length < 1) {
    myEmptyText.setText("No commits selected");
    myMainContentPanel.removeAll();
    return;
  }
  int MAX_ROWS=50;
  myEmptyText.setText("");
  GraphTableModel tableModel=myGraphTable.getModel();
  int count=0;
  for (int i=0, prevCount=myMainContentPanel.getComponentCount(); i < Math.min(rows.length,MAX_ROWS); i++) {
    int row=rows[i];
    Component c=count < prevCount ? myMainContentPanel.getComponent(count) : null;
    if (c instanceof SeparatorComponent) {
      count++;
      c=count < prevCount ? myMainContentPanel.getComponent(count) : null;
    }
    CommitPanel commitPanel;
    if (c instanceof CommitPanel) {
      commitPanel=(CommitPanel)c;
      count++;
    }
 else {
      while (count < myMainContentPanel.getComponentCount()) {
        myMainContentPanel.remove(count);
      }
      commitPanel=new CommitPanel();
      if (i > 0) {
        myMainContentPanel.add(new SeparatorComponent(1,OnePixelDivider.BACKGROUND,null));
        count++;
      }
      myMainContentPanel.add(commitPanel);
      count++;
    }
    VcsFullCommitDetails commitData=tableModel.getFullDetails(row);
    commitPanel.setCommit(commitData);
    if (!(commitData instanceof LoadingDetails)) {
      newCommitDetails.add(commitData);
    }
  }
  while (count < myMainContentPanel.getComponentCount()) {
    myMainContentPanel.remove(count);
  }
  if (rows.length > MAX_ROWS) {
    myMainContentPanel.add(new SeparatorComponent(0,OnePixelDivider.BACKGROUND,null));
    JBLabel label=new JBLabel("  (showing " + MAX_ROWS + " of "+ rows.length+ " selected commits)");
    label.setFont(getDataPanelFont());
    myMainContentPanel.add(label);
  }
  for (int i=myMainContentPanel.getComponentCount() - 1; i >= 0; i--) {
    ((JComponent)myMainContentPanel.getComponent(i)).setAlignmentX(LEFT_ALIGNMENT);
  }
  if (!ContainerUtil.intersects(myCurrentCommitDetails,newCommitDetails)) {
    myScrollPane.getVerticalScrollBar().setValue(0);
  }
  myCurrentCommitDetails=newCommitDetails;
}
