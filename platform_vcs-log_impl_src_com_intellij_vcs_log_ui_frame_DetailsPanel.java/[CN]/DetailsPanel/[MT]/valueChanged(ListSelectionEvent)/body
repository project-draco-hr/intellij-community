{
  if (event != null && event.getValueIsAdjusting())   return;
  Set<VcsFullCommitDetails> newCommitDetails=ContainerUtil.newHashSet();
  int[] rows=myGraphTable.getSelectedRows();
  myLoadingPanel.stopLoading();
  if (rows.length < 1) {
    myEmptyText.setText("No commits selected");
    myMainContentPanel.removeAll();
    return;
  }
  int MAX_ROWS=50;
  myEmptyText.setText("");
  GraphTableModel tableModel=myGraphTable.getModel();
  int count=0;
  for (int i=0; i < Math.min(rows.length,MAX_ROWS); i++) {
    int row=rows[i];
    boolean reuseExisting=count < myMainContentPanel.getComponentCount();
    CommitPanel commitPanel;
    if (!reuseExisting) {
      commitPanel=new CommitPanel();
      if (i > 0) {
        myMainContentPanel.add(new SeparatorComponent(0,OnePixelDivider.BACKGROUND,null));
        count++;
      }
      commitPanel.setAlignmentX(LEFT_ALIGNMENT);
      myMainContentPanel.add(commitPanel);
      count++;
    }
 else {
      if (i > 0)       count++;
      commitPanel=(CommitPanel)myMainContentPanel.getComponent(count++);
    }
    VcsFullCommitDetails commitData=tableModel.getFullDetails(row);
    commitPanel.setCommit(commitData);
    if (!(commitData instanceof LoadingDetails)) {
      newCommitDetails.add(commitData);
    }
  }
  while (count < myMainContentPanel.getComponentCount()) {
    myMainContentPanel.remove(count);
  }
  if (rows.length > MAX_ROWS) {
    myMainContentPanel.add(new SeparatorComponent(0,OnePixelDivider.BACKGROUND,null));
    JBLabel label=new JBLabel("(showing " + MAX_ROWS + " of "+ rows.length+ " selected commits)");
    label.setFont(getDataPanelFont());
    label.setAlignmentX(LEFT_ALIGNMENT);
    myMainContentPanel.add(label);
  }
  if (!ContainerUtil.intersects(myCurrentCommitDetails,newCommitDetails)) {
    myScrollPane.getVerticalScrollBar().setValue(0);
  }
  myCurrentCommitDetails=newCommitDetails;
}
