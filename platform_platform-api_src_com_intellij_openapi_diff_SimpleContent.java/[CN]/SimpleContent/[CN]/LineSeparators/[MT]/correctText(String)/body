{
  DiffString.LineTokenizer lineTokenizer=new DiffString.LineTokenizer(DiffString.create(text));
  DiffString[] lines=lineTokenizer.execute();
  mySeparator=lineTokenizer.getLineSeparator();
  LOG.assertTrue(mySeparator == null || !mySeparator.isEmpty());
  if (mySeparator == null)   mySeparator=SystemProperties.getLineSeparator();
  return DiffString.concatenate(lines).toString();
}
