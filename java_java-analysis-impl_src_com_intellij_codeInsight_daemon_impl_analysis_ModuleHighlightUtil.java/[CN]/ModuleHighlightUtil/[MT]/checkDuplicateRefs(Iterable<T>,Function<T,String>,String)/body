{
  List<HighlightInfo> results=null;
  Set<String> names=ContainerUtil.newHashSet();
  for (  T statement : statements) {
    String refText=ref.apply(statement);
    if (refText != null && !names.add(refText)) {
      String message=JavaErrorMessages.message(key,refText);
      HighlightInfo info=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(statement).description(message).create();
      QuickFixAction.registerQuickFixAction(info,new DeleteElementFix(statement));
      if (results == null)       results=ContainerUtil.newSmartList();
      results.add(info);
    }
  }
  return results != null ? results : Collections.emptyList();
}
