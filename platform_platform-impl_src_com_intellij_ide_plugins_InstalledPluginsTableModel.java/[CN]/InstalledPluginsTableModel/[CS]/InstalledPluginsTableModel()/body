{
  final MyPluginManagerColumnInfo infoColumn=new MyPluginManagerColumnInfo();
  final EnabledPluginInfo enabledColumn=new EnabledPluginInfo();
  columns=SystemInfo.isMac ? new ColumnInfo[]{infoColumn,enabledColumn,new Spacer()} : new ColumnInfo[]{infoColumn,enabledColumn};
  final ApplicationInfoEx appInfo=ApplicationInfoEx.getInstanceEx();
  view.addAll(ContainerUtil.filter(PluginManagerCore.getPlugins(),new Condition<IdeaPluginDescriptor>(){
    @Override public boolean value(    IdeaPluginDescriptor descriptor){
      return !appInfo.isEssentialPlugin(descriptor.getPluginId().getIdString());
    }
  }
));
  view.addAll(ourState.getInstalledPlugins());
  myEnabled.put(PluginId.getId(PluginManagerCore.CORE_PLUGIN_ID),true);
  for (  IdeaPluginDescriptor descriptor : view) {
    setEnabled(descriptor,descriptor.isEnabled());
  }
  updatePluginDependencies();
  setSortKey(new RowSorter.SortKey(getNameColumn(),SortOrder.ASCENDING));
}
