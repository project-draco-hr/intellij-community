{
  final Set<InferenceVariable> dependencies=new LinkedHashSet<InferenceVariable>();
  collectBoundDependencies(session,dependencies);
  collectTransitiveDependencies(session,dependencies,dependencies);
  if (!session.hasCapture(this) && dependencies.isEmpty()) {
    return dependencies;
  }
  if (!session.hasCapture(this)) {
    return dependencies;
  }
  for (Iterator<InferenceVariable> iterator=dependencies.iterator(); iterator.hasNext(); ) {
    if (!session.hasCapture(iterator.next())) {
      iterator.remove();
    }
  }
  session.collectCaptureDependencies(this,dependencies);
  return dependencies;
}
