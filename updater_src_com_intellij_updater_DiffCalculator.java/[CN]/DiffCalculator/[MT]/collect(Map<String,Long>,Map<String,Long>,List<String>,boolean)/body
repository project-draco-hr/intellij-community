{
  Map<String,Long> result=new LinkedHashMap<String,Long>();
  for (  Map.Entry<String,Long> each : newer.entrySet()) {
    String file=each.getKey();
    Long oldChecksum=older.get(file);
    Long newChecksum=newer.get(file);
    if (oldChecksum != null && newChecksum != null) {
      if ((oldChecksum.equals(newChecksum) && !critical.contains(file)) == equal) {
        result.put(file,oldChecksum);
      }
    }
  }
  return result;
}
