{
  Document document=editor.getDocument();
  SelectionModel selectionModel=editor.getSelectionModel();
  int selectionStart=selectionModel.getLeadSelectionOffset();
  CaretModel caretModel=editor.getCaretModel();
  LogicalPosition blockSelectionStart=selectionModel.hasBlockSelection() ? selectionModel.getBlockStart() : caretModel.getLogicalPosition();
  int offset=editor.getCaretModel().getOffset();
  if (offset == 0)   return;
  int lineNumber=editor.getCaretModel().getLogicalPosition().line;
  CharSequence text=document.getCharsSequence();
  int newOffset=offset - 1;
  int minOffset=lineNumber > 0 ? document.getLineEndOffset(lineNumber - 1) : 0;
  for (; newOffset > minOffset; newOffset--) {
    if (isWordOrLexemeStart(editor,newOffset,camel))     break;
  }
  editor.getCaretModel().moveToOffset(newOffset);
  if (editor.getCaretModel().getCurrentCaret() == editor.getCaretModel().getPrimaryCaret()) {
    editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  }
  setupSelection(editor,isWithSelection,selectionStart,blockSelectionStart);
}
