{
  startOperation(file);
  final SvnVcs vcs=getVCS(file);
  if (vcs != null && SvnUtil.isAdminDirectory(file)) {
    return true;
  }
  if (vcs == null)   return false;
  final VcsShowConfirmationOption.Value value=vcs.getDeleteConfirmation().getValue();
  if (VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY.equals(value))   return false;
  final File ioFile=getIOFile(file);
  if (!SvnUtil.isSvnVersioned(vcs,ioFile.getParentFile()) || SvnUtil.isWorkingCopyRoot(ioFile)) {
    return false;
  }
  Status status=getFileStatus(vcs,ioFile);
  if (status == null || status.is(StatusType.STATUS_UNVERSIONED,StatusType.STATUS_OBSTRUCTED,StatusType.STATUS_MISSING,StatusType.STATUS_EXTERNAL,StatusType.STATUS_IGNORED)) {
    return false;
  }
 else   if (status.is(StatusType.STATUS_DELETED)) {
    if (isUndo(vcs)) {
      moveToUndoStorage(file);
    }
    return true;
  }
 else {
    if (isAboveSourceOfCopyOrMove(vcs.getProject(),ioFile)) {
      myDeletedFiles.putValue(vcs.getProject(),ioFile);
      return true;
    }
    if (status.is(StatusType.STATUS_ADDED)) {
      try {
        createRevertAction(vcs,ioFile,false).execute();
      }
 catch (      VcsException e) {
      }
    }
 else {
      myDeletedFiles.putValue(vcs.getProject(),ioFile);
      if (file.isDirectory() || isUndo(vcs))       return true;
    }
    return false;
  }
}
