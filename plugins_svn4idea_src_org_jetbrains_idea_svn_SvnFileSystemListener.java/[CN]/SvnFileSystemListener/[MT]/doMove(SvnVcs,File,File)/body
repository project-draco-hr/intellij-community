{
  try {
    final boolean isUndo=isUndo(vcs);
    final String list=isUndo ? null : SvnChangelistListener.getCurrentMapping(vcs,src);
    WorkingCopyFormat format=vcs.getWorkingCopyFormat(src);
    final boolean is17OrLater=format.isOrGreater(WorkingCopyFormat.ONE_DOT_SEVEN);
    if (is17OrLater) {
      Status srcStatus=getFileStatus(vcs,src);
      if (isUnversioned(srcStatus) && (isUnversioned(vcs,dst.getParentFile()) || isUnversioned(vcs,dst)) || for17move(vcs,src,dst,isUndo,srcStatus)) {
        return false;
      }
    }
 else {
      if (for16move(vcs,src,dst,isUndo))       return false;
    }
    if (!isUndo && list != null) {
      SvnChangelistListener.putUnderList(vcs.getProject(),list,dst);
    }
  }
 catch (  VcsException e) {
    addToMoveExceptions(vcs.getProject(),e);
    return false;
  }
  return true;
}
