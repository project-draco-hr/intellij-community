{
  if (srcStatus != null && srcStatus.getCopyFromURL() == null) {
    undo=false;
  }
  if (undo) {
    myUndoingMove=true;
    createRevertAction(vcs,dst,true).execute();
    copyUnversionedMembersOfDirectory(src,dst);
    if (srcStatus == null || SvnVcs.svnStatusIsUnversioned(srcStatus)) {
      FileUtil.delete(src);
    }
 else {
      createRevertAction(vcs,src,true).execute();
    }
    restoreFromUndoStorage(dst);
  }
 else {
    if (doUsualMove(vcs,src))     return true;
    final SVNStatus dstParentStatus=getFileStatus(vcs,dst.getParentFile());
    if (dstParentStatus == null || SvnVcs.svnStatusIsUnversioned(dstParentStatus)) {
      try {
        copyFileOrDir(src,dst);
      }
 catch (      IOException e) {
        throw new SVNException(SVNErrorMessage.create(SVNErrorCode.IO_ERROR,e),e);
      }
      createDeleteAction(vcs,src,true).execute();
      return false;
    }
    moveFileWithSvn(vcs,src,dst);
  }
  return false;
}
