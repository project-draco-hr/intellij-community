{
  final FileType type=FileTypeManager.getInstance().getFileTypeByFileName(name);
  if (type == StdFileTypes.CLASS && ProjectRootManager.getInstance(getProject()).getFileIndex().isInSource(getVirtualFile())) {
    throw new IncorrectOperationException("Cannot create class-file");
  }
  super.checkCreateFile(name);
}
