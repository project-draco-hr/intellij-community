{
  SVNInfo info=myVcs.getInfo(svnurl,myPeg,myPeg);
  final SVNURL rootURL=info != null ? info.getRepositoryRootURL() : null;
  final String root=rootURL != null ? rootURL.toString() : "";
  String relativeUrl=myUrl;
  if (myUrl.startsWith(root)) {
    relativeUrl=myUrl.substring(root.length());
  }
  final RepositoryLogEntryHandler repositoryLogEntryHandler=new RepositoryLogEntryHandler(myVcs,myUrl,SVNRevision.UNDEFINED,relativeUrl,new ThrowableConsumer<VcsFileRevision,SVNException>(){
    @Override public void consume(    VcsFileRevision revision) throws SVNException {
      myConsumer.consume(revision);
    }
  }
,rootURL);
  repositoryLogEntryHandler.setThrowCancelOnMeetPathCreation(true);
  SvnTarget target=SvnTarget.fromURL(rootURL,myFrom);
  myVcs.getFactory(target).createHistoryClient().doLog(target,myFrom,myTo == null ? SVNRevision.create(1) : myTo,false,true,myShowMergeSources && mySupport15,1,null,repositoryLogEntryHandler);
}
