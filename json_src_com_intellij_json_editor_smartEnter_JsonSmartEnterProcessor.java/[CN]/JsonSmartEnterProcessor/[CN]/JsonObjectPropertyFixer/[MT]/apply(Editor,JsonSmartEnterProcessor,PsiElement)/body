{
  if (element instanceof JsonProperty) {
    final JsonValue propertyValue=((JsonProperty)element).getValue();
    if (propertyValue != null) {
      if (terminatedOnCurrentLine(editor,propertyValue) && !isFollowedByTerminal(propertyValue,COMMA)) {
        editor.getDocument().insertString(propertyValue.getTextRange().getEndOffset(),",");
        processor.myShouldAddNewline=true;
      }
    }
 else {
      final JsonStringLiteral propertyKey=((JsonProperty)element).getNameElement();
      final int keyEndOffset=propertyKey.getTextRange().getEndOffset();
      if (terminatedOnCurrentLine(editor,propertyKey) && !isFollowedByTerminal(propertyKey,COLON)) {
        processor.myFirstErrorOffset=keyEndOffset + 2;
        editor.getDocument().insertString(keyEndOffset,": ");
      }
    }
  }
}
