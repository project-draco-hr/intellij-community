{
  ClientFactory factory=vcs.getFactory(ioFile);
  PropertyData propertyData=factory.createPropertyClient().getProperty(SvnTarget.fromFile(ioFile),SvnPropertyKeys.SVN_EXTERNALS,false,SVNRevision.UNDEFINED);
  String newValue;
  if (propertyData != null && propertyData.getValue() != null && !StringUtil.isEmptyOrSpaces(propertyData.getValue().getString())) {
    final SVNExternal[] externals=SVNExternal.parseExternals("Create External",propertyData.getValue().getString());
    for (    SVNExternal external : externals) {
      if (Comparing.equal(external.getPath(),target)) {
        AbstractVcsHelper.getInstance(vcs.getProject()).showError(new VcsException("Selected destination conflicts with existing: " + external.toString()),"Create External");
        return true;
      }
    }
    final String string=createExternalDefinitionString(url,target);
    newValue=propertyData.getValue().getString().trim() + "\n" + string;
  }
 else {
    newValue=createExternalDefinitionString(url,target);
  }
  factory.createPropertyClient().setProperty(ioFile,SvnPropertyKeys.SVN_EXTERNALS,SVNPropertyValue.create(newValue),Depth.EMPTY,false);
  return false;
}
