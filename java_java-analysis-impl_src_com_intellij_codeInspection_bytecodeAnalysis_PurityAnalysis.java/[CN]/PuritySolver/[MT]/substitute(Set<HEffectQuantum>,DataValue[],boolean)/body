{
  if (effects.isEmpty() || PurityAnalysis.topHEffect.equals(effects)) {
    return effects;
  }
 else {
    Set<HEffectQuantum> newEffects=new HashSet<HEffectQuantum>();
    int shift=isStatic ? 0 : 1;
    for (    HEffectQuantum effect : effects) {
      if (effect == HEffectQuantum.ThisChangeQuantum) {
        DataValue thisArg=data[0];
        if (thisArg == DataValue.ThisDataValue || thisArg == DataValue.OwnedDataValue) {
          newEffects.add(HEffectQuantum.ThisChangeQuantum);
        }
 else         if (thisArg == DataValue.LocalDataValue) {
        }
 else         if (thisArg instanceof DataValue.ParameterDataValue) {
          newEffects.add(new HEffectQuantum.ParamChangeQuantum(((DataValue.ParameterDataValue)thisArg).n));
        }
 else {
          return PurityAnalysis.topHEffect;
        }
      }
 else       if (effect instanceof HEffectQuantum.ParamChangeQuantum) {
        HEffectQuantum.ParamChangeQuantum paramChange=((HEffectQuantum.ParamChangeQuantum)effect);
        DataValue paramArg=data[paramChange.n + shift];
        if (paramArg == DataValue.ThisDataValue || paramArg == DataValue.OwnedDataValue) {
          newEffects.add(HEffectQuantum.ThisChangeQuantum);
        }
 else         if (paramArg == DataValue.LocalDataValue) {
        }
 else         if (paramArg instanceof DataValue.ParameterDataValue) {
          newEffects.add(new HEffectQuantum.ParamChangeQuantum(((DataValue.ParameterDataValue)paramArg).n));
        }
 else {
          return PurityAnalysis.topHEffect;
        }
      }
    }
    return newEffects;
  }
}
