{
  if (!bases.isEmpty())   bases.peek();
  Element result=new Element(original.getName(),original.getNamespace());
  for (  Attribute a : original.getAttributes()) {
    result.setAttribute(a.clone());
  }
  for (  Content o : original.getContent()) {
    if (o instanceof Element) {
      Element element=(Element)o;
      if (isIncludeElement(element)) {
        result.addContent(resolveXIncludeElement(element,bases,ignoreMissing));
      }
 else {
        result.addContent(resolveNonXIncludeElement(element,bases,ignoreMissing));
      }
    }
 else {
      result.addContent(o.clone());
    }
  }
  return result;
}
