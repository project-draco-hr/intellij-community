{
  for (  JpsModule module : chunk.getModules()) {
    final JpsSdk<JpsDummyElement> sdk=module.getSdk(JpsJavaSdkType.INSTANCE);
    if (sdk != null) {
      final int version=JpsJavaSdkType.parseVersion(sdk.getVersionString());
      if (version >= 6) {
        if (version >= 9 && Math.abs(version - targetLanguageLevel) > 3) {
          continue;
        }
        return Pair.create(sdk.getHomePath(),version);
      }
    }
  }
  final String fallbackJdkHome=System.getProperty(GlobalOptions.FALLBACK_JDK_HOME,null);
  if (fallbackJdkHome == null) {
    LOG.info("Fallback JDK is not specified. (See " + GlobalOptions.FALLBACK_JDK_HOME + " option)");
    return null;
  }
  final String fallbackJdkVersion=System.getProperty(GlobalOptions.FALLBACK_JDK_VERSION,null);
  if (fallbackJdkVersion == null) {
    LOG.info("Fallback JDK version is not specified. (See " + GlobalOptions.FALLBACK_JDK_VERSION + " option)");
    return null;
  }
  final int fallbackVersion=JpsJavaSdkType.parseVersion(fallbackJdkVersion);
  if (fallbackVersion < 6) {
    LOG.info("Version string for fallback JDK is '" + fallbackJdkVersion + "' (recognized as version '"+ fallbackJdkVersion+ "'). At least version 6 is required.");
    return null;
  }
  return Pair.create(fallbackJdkHome,fallbackVersion);
}
