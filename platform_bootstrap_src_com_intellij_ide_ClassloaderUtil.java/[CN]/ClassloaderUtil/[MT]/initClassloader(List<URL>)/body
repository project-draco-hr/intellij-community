{
  PathManager.loadProperties();
  addParentClasspath(classpathElements);
  addIDEALibraries(classpathElements);
  addAdditionalClassPath(classpathElements);
  filterClassPath(classpathElements);
  UrlClassLoader newClassLoader=new UrlClassLoader(classpathElements,null,true,true);
  if (!isLoadingOfExternalPluginsDisabled()) {
    try {
      StartupActionScriptManager.executeActionScript();
    }
 catch (    IOException e) {
      Main.showMessage("Plugin Installation Error",e);
    }
  }
  Thread.currentThread().setContextClassLoader(newClassLoader);
  return newClassLoader;
}
