{
  Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null || project.isDefault()) {
    e.getPresentation().setVisible(false);
    e.getPresentation().setEnabled(false);
    return;
  }
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  VirtualFile file=e.getData(CommonDataKeys.VIRTUAL_FILE);
  VirtualFile[] files=e.getData(CommonDataKeys.VIRTUAL_FILE_ARRAY);
  if ((editor == null && file == null && files == null) || (editor != null && editor.getDocument().getTextLength() == 0)) {
    e.getPresentation().setEnabledAndVisible(false);
    return;
  }
  e.getPresentation().setEnabledAndVisible(true);
}
