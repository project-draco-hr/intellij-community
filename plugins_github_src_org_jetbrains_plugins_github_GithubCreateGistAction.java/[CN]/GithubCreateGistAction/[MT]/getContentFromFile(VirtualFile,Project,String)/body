{
  if (file.isDirectory()) {
    return getContentFromDirectory(file,project,prefix);
  }
  Document document=FileDocumentManager.getInstance().getDocument(file);
  String content;
  if (document != null) {
    content=document.getText();
  }
 else {
    content=readFile(file);
  }
  if (content == null) {
    GithubNotifications.showWarning(project,FAILED_TO_CREATE_GIST,"Couldn't read the contents of the file " + file);
    return Collections.emptyList();
  }
  if (StringUtil.isEmptyOrSpaces(content)) {
    return Collections.emptyList();
  }
  String filename=addPrefix(file.getName(),prefix,false);
  return Collections.singletonList(new FileContent(filename,content));
}
