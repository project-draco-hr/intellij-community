{
  if (contents.isEmpty()) {
    GithubNotifications.showWarning(project,FAILED_TO_CREATE_GIST,"Can't create empty gist");
    return null;
  }
  if (contents.size() == 1 && filename != null) {
    Map.Entry<String,String> entry=contents.entrySet().iterator().next();
    contents=Collections.singletonMap(filename,entry.getValue());
  }
  try {
    GithubGist gist=GithubApiUtil.createGist(auth,contents,description,isPrivate);
    return gist.getHtmlUrl();
  }
 catch (  IOException e) {
    GithubNotifications.showError(project,FAILED_TO_CREATE_GIST,e);
    return null;
  }
}
