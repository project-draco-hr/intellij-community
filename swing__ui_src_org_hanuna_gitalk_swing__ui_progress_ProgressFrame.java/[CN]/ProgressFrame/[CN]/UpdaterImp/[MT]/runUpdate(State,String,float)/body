{
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      if (state == State.HIDE) {
        ProgressFrame.this.setVisible(false);
        return;
      }
      label.setText(message);
      if (state == State.UNREFINED_PROGRESS) {
        progressBar.setIndeterminate(true);
      }
 else {
        progressBar.setIndeterminate(false);
        int pr=Math.round(MAX_PROGRESS_VALUE * progress);
        progressBar.setValue(pr);
      }
      ProgressFrame.this.setVisible(true);
      ProgressFrame.this.getContentPane().repaint();
    }
  }
);
}
