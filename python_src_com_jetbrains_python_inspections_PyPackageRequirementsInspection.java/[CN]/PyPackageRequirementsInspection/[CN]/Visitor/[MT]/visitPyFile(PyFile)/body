{
  final Module module=ModuleUtil.findModuleForPsiElement(node);
  if (module != null) {
    if (isRunningPackagingTasks(module)) {
      return;
    }
    final Sdk sdk=PythonSdkType.findPythonSdk(module);
    if (sdk != null) {
      final List<PyRequirement> unsatisfied=findUnsatisfiedRequirements(module,sdk);
      if (unsatisfied != null && !unsatisfied.isEmpty()) {
        final boolean plural=unsatisfied.size() > 1;
        String msg=String.format("Package requirement%s %s %s not satisfied",plural ? "s" : "",requirementsToString(unsatisfied),plural ? "are" : "is");
        registerProblem(node,msg,new InstallRequirementsFix(module,sdk,unsatisfied));
      }
    }
  }
}
