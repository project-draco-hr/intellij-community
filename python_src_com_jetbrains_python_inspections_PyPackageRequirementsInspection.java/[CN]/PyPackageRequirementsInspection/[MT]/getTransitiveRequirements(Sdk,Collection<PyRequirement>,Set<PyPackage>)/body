{
  if (requirements.isEmpty()) {
    return Collections.emptySet();
  }
  final Set<PyRequirement> results=new HashSet<PyRequirement>(requirements);
  final List<PyPackage> packages;
  try {
    packages=PyPackageManager.getInstance(sdk).getPackages(PySdkUtil.isRemote(sdk));
  }
 catch (  ExecutionException e) {
    return null;
  }
  if (packages == null)   return null;
  for (  PyRequirement req : requirements) {
    final PyPackage pkg=req.match(packages);
    if (pkg != null && !visited.contains(pkg)) {
      visited.add(pkg);
      final Set<PyRequirement> transitive=getTransitiveRequirements(sdk,pkg.getRequirements(),visited);
      if (transitive == null)       return null;
      results.addAll(transitive);
    }
  }
  return results;
}
