{
  Map<PluginId,String> optionalConfigs=descriptor.getOptionalConfigs();
  if (optionalConfigs != null && !optionalConfigs.isEmpty()) {
    Map<PluginId,IdeaPluginDescriptorImpl> descriptors=new THashMap<PluginId,IdeaPluginDescriptorImpl>(optionalConfigs.size());
    for (    Map.Entry<PluginId,String> entry : optionalConfigs.entrySet()) {
      String optionalDescriptorName=entry.getValue();
      if (fileName.equals(optionalDescriptorName)) {
        getLogger().info("recursive dependency (" + fileName + ") in "+ descriptor);
        continue;
      }
      IdeaPluginDescriptorImpl optionalDescriptor=optionalDescriptorLoader.fun(optionalDescriptorName);
      if (optionalDescriptor == null) {
        getLogger().info("Cannot find optional descriptor " + optionalDescriptorName);
      }
 else {
        descriptors.put(entry.getKey(),optionalDescriptor);
      }
    }
    descriptor.setOptionalDescriptors(descriptors);
  }
}
