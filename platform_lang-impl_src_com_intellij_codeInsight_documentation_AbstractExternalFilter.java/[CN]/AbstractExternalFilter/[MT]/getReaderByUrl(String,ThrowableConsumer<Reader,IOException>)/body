{
  if (url.startsWith(JAR_PROTOCOL)) {
    VirtualFile file=VirtualFileManager.getInstance().findFileByUrl(BrowserUtil.getDocURL(url));
    if (file != null) {
      consumer.consume(new StringReader(VfsUtilCore.loadText(file)));
    }
    return;
  }
  final URL parsedUrl=BrowserUtil.getURL(url);
  if (parsedUrl == null) {
    return;
  }
  HttpRequests.request(parsedUrl.toString()).connect(new HttpRequests.RequestProcessor<Void>(){
    @Override public Void process(    @NotNull HttpRequests.Request request) throws IOException {
      String contentEncoding=guessEncoding(parsedUrl);
      InputStream inputStream=request.getInputStream();
      consumer.consume(contentEncoding != null ? new MyReader(inputStream,contentEncoding) : new MyReader(inputStream));
      return null;
    }
  }
);
}
