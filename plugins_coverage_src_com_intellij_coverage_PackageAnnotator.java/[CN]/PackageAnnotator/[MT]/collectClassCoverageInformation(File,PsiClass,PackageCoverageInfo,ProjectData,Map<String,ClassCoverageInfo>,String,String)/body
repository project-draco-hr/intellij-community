{
  final ClassCoverageInfo toplevelClassCoverageInfo=new ClassCoverageInfo();
  final ClassData classData=projectInfo.getClassData(className);
  if (classData != null && classData.getLines() != null) {
    final Object[] lines=classData.getLines();
    for (    Object l : lines) {
      if (l instanceof LineData) {
        final LineData lineData=(LineData)l;
        if (lineData.getStatus() == LineCoverage.FULL) {
          toplevelClassCoverageInfo.fullyCoveredLineCount++;
        }
 else         if (lineData.getStatus() == LineCoverage.PARTIAL) {
          toplevelClassCoverageInfo.partiallyCoveredLineCount++;
        }
        toplevelClassCoverageInfo.totalLineCount++;
        packageCoverageInfo.totalLineCount++;
      }
    }
    boolean touchedClass=false;
    final Collection methodSigs=classData.getMethodSigs();
    for (    final Object nameAndSig : methodSigs) {
      if (isGeneratedDefaultConstructor(psiClass,(String)nameAndSig)) {
        continue;
      }
      final int covered=classData.getStatus((String)nameAndSig);
      if (covered != LineCoverage.NONE) {
        toplevelClassCoverageInfo.coveredMethodCount++;
        touchedClass=true;
      }
      toplevelClassCoverageInfo.totalMethodCount++;
    }
    if (!methodSigs.isEmpty()) {
      if (touchedClass) {
        packageCoverageInfo.coveredClassCount++;
      }
      packageCoverageInfo.totalClassCount++;
      packageCoverageInfo.coveredLineCount+=toplevelClassCoverageInfo.fullyCoveredLineCount;
      packageCoverageInfo.coveredLineCount+=toplevelClassCoverageInfo.partiallyCoveredLineCount;
      packageCoverageInfo.coveredMethodCount+=toplevelClassCoverageInfo.coveredMethodCount;
      packageCoverageInfo.totalMethodCount+=toplevelClassCoverageInfo.totalMethodCount;
    }
 else {
      LOG.debug("Did not find any method signatures in " + classFile.getName());
      return;
    }
  }
 else {
    if (!collectNonCoveredClassInfo(classFile,psiClass,toplevelClassCoverageInfo,packageCoverageInfo)) {
      LOG.debug("Did not collect non-covered class info for " + classFile.getName());
      return;
    }
  }
  ClassCoverageInfo classCoverageInfo=getOrCreateClassCoverageInfo(toplevelClassCoverage,toplevelClassSrcFQName);
  LOG.debug("Adding coverage of " + classFile.getName() + " to top-level class "+ toplevelClassSrcFQName);
  classCoverageInfo.totalLineCount+=toplevelClassCoverageInfo.totalLineCount;
  classCoverageInfo.fullyCoveredLineCount+=toplevelClassCoverageInfo.fullyCoveredLineCount;
  classCoverageInfo.partiallyCoveredLineCount+=toplevelClassCoverageInfo.partiallyCoveredLineCount;
  classCoverageInfo.totalMethodCount+=toplevelClassCoverageInfo.totalMethodCount;
  classCoverageInfo.coveredMethodCount+=toplevelClassCoverageInfo.coveredMethodCount;
  if (toplevelClassCoverageInfo.coveredMethodCount > 0) {
    classCoverageInfo.coveredClassCount++;
  }
}
