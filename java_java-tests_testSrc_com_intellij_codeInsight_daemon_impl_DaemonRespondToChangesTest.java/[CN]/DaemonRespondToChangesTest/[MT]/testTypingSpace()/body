{
  configureByFile(BASE_PATH + "AClass.java");
  Document document=getDocument(getFile());
  Collection<HighlightInfo> infos=highlightErrors();
  assertEquals(0,infos.size());
  type("  ");
  PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
  PsiElement elementAtCaret=myFile.findElementAt(myEditor.getCaretModel().getOffset());
  assertTrue(elementAtCaret instanceof PsiWhiteSpace);
  TextRange dirty=myDaemonCodeAnalyzer.getFileStatusMap().getFileDirtyScope(document,Pass.UPDATE_ALL);
  assertEquals(elementAtCaret.getTextRange(),dirty);
  highlightErrors();
  assertTrue(myDaemonCodeAnalyzer.isErrorAnalyzingFinished(getFile()));
}
