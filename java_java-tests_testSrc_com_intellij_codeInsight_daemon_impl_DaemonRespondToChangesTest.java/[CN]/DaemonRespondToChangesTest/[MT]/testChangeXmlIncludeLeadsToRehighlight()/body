{
  LanguageFilter[] extensions=((CompositeLanguage)StdLanguages.XML).getLanguageExtensions();
  for (  LanguageFilter extension : extensions) {
    ((CompositeLanguage)StdLanguages.XML).unregisterLanguageExtension(extension);
  }
  final String location=getTestName(false) + ".xsd";
  final String url="http://myschema/";
  ExternalResourceManagerExImpl.registerResourceTemporarily(url,location,getTestRootDisposable());
  configureByFiles(null,BASE_PATH + getTestName(false) + ".xml",BASE_PATH + getTestName(false) + ".xsd");
  Collection<HighlightInfo> errors=highlightErrors();
  assertEquals(0,errors.size());
  Editor[] allEditors=EditorFactory.getInstance().getAllEditors();
  Editor schemaEditor=null;
  for (  Editor editor : allEditors) {
    Document document=editor.getDocument();
    PsiFile file=PsiDocumentManager.getInstance(getProject()).getPsiFile(document);
    if (file == null)     continue;
    if (location.equals(file.getName())) {
      schemaEditor=editor;
      break;
    }
  }
  delete(schemaEditor);
  errors=highlightErrors();
  assertFalse(errors.isEmpty());
  for (  LanguageFilter extension : extensions) {
    ((CompositeLanguage)StdLanguages.XML).registerLanguageExtension(extension);
  }
}
