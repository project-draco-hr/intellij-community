{
  configureByText(StdFileTypes.JAVA,"class X{ void f() {" + "     int x=0;\n" + "    Runnable r = new Runnable() { public void run() {\n"+ " <caret>\n"+ "    }};\n"+ "    <selection>int y = x;</selection>\n "+ "\n} }");
  assertEmpty(highlightErrors());
  copy();
  assertEquals("int y = x;",getEditor().getSelectionModel().getSelectedText());
  getEditor().getSelectionModel().removeSelection();
  paste();
  List<HighlightInfo> errors=highlightErrors();
  assertEquals(1,errors.size());
}
