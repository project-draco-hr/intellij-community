{
  Window window=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusedWindow();
  boolean enabled=isEnabledFor(window);
  if (enabled) {
    Editor editor=event.getData(CommonDataKeys.EDITOR);
    enabled=editor == null || !editor.getContentComponent().hasFocus();
  }
  event.getPresentation().setEnabled(enabled);
  myWindow=enabled ? window : null;
}
