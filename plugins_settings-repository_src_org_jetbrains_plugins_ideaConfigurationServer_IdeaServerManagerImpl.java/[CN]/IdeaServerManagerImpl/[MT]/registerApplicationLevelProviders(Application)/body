{
  mySettings.loadCredentials();
  if (mySettings.REMEMBER_SETTINGS || GraphicsEnvironment.isHeadless()) {
    if (mySettings.DO_LOGIN) {
      if (mySettings.getUserName() != null && mySettings.getPassword() != null) {
        performLogin();
      }
 else {
        requestCredentials("Login failed, user name and password should not be empty",true);
      }
    }
  }
 else {
    requestCredentials(null,true);
  }
  StateStorageManager storageManager=((ApplicationImpl)application).getStateStore().getStateStorageManager();
  registerProvider(storageManager,RoamingType.PER_USER);
  registerProvider(storageManager,RoamingType.PER_PLATFORM);
  registerProvider(storageManager,RoamingType.GLOBAL);
}
