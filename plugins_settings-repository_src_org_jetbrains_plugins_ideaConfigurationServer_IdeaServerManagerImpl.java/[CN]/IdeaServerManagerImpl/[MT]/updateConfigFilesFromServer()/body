{
  final ApplicationImpl app=(ApplicationImpl)ApplicationManager.getApplication();
  StateStorageManager appStorageManager=app.getStateStore().getStateStorageManager();
  Collection<String> storageFileNames=appStorageManager.getStorageFileNames();
  if (!storageFileNames.isEmpty()) {
    HashSet<File> filesToUpdate=new HashSet<File>();
    processStorages(appStorageManager,storageFileNames,filesToUpdate);
    Project[] projects=ProjectManager.getInstance().getOpenProjects();
    for (    Project project : projects) {
      StateStorageManager storageManager=((ProjectEx)project).getStateStore().getStateStorageManager();
      processStorages(storageManager,storageManager.getStorageFileNames(),filesToUpdate);
    }
    if (!filesToUpdate.isEmpty()) {
      LocalFileSystem.getInstance().refreshIoFiles(filesToUpdate);
    }
    SchemesManagerFactory.getInstance().updateConfigFilesFromStreamProviders();
  }
}
