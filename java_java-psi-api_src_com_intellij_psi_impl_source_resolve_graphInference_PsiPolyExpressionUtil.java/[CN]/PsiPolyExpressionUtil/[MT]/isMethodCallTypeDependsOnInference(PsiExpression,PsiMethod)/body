{
  final Set<PsiTypeParameter> typeParameters=new HashSet<PsiTypeParameter>(Arrays.asList(method.getTypeParameters()));
  if (!typeParameters.isEmpty()) {
    final PsiType returnType=method.getReturnType();
    if (returnType != null) {
      return mentionsTypeParameters(returnType,typeParameters);
    }
  }
 else   if (method.isConstructor() && expression instanceof PsiNewExpression && PsiDiamondType.hasDiamond((PsiNewExpression)expression)) {
    return true;
  }
  return false;
}
