{
  if (root.getFileSystem() instanceof HttpFileSystem) {
    String url=root.getUrl();
    if (url.toLowerCase(Locale.getDefault()).endsWith("/index.html")) {
      url=url.substring(0,url.length() - 10);
    }
 else     if (!url.endsWith("/")) {
      url+="/";
    }
    return url + relPath;
  }
 else {
    VirtualFile file=root.findFileByRelativePath(relPath);
    return file == null ? null : file.getUrl();
  }
}
