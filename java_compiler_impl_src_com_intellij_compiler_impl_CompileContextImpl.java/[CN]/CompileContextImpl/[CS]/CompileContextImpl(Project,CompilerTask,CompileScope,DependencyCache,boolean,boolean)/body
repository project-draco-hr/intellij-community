{
  myProject=project;
  myTask=compilerSession;
  myCompileScope=compileScope;
  myDependencyCache=dependencyCache;
  myMake=isMake;
  myIsRebuild=isRebuild;
  myStartCompilationStamp=System.currentTimeMillis();
  myProjectFileIndex=ProjectRootManager.getInstance(myProject).getFileIndex();
  myProjectCompileScope=new ProjectCompileScope(myProject);
  myIsAnnotationProcessorsEnabled=CompilerConfiguration.getInstance(project).isAnnotationProcessorsEnabled();
  if (compilerSession != null) {
    final Key sessionId=ExecutionEnvironment.EXECUTION_SESSION_ID_KEY.get(compileScope);
    if (sessionId != null) {
      compilerSession.setSessionId(sessionId);
    }
  }
  recalculateOutputDirs();
  final CompilerWorkspaceConfiguration workspaceConfig=CompilerWorkspaceConfiguration.getInstance(myProject);
  myShouldUpdateProblemsView=workspaceConfig.useOutOfProcessBuild() && workspaceConfig.MAKE_PROJECT_ON_SAVE;
}
