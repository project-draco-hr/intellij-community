{
  Collections.sort(list,new Comparator<ProjectTemplate>(){
    @Override public int compare(    ProjectTemplate o1,    ProjectTemplate o2){
      return Comparing.compare(o1 instanceof ArchivedProjectTemplate,o2 instanceof ArchivedProjectTemplate);
    }
  }
);
  myFirstProjectType=ContainerUtil.find(list,new Condition<ProjectTemplate>(){
    @Override public boolean value(    ProjectTemplate template){
      return !(template instanceof ArchivedProjectTemplate);
    }
  }
);
  myFirstArchivedTemplate=ContainerUtil.find(list,new Condition<ProjectTemplate>(){
    @Override public boolean value(    ProjectTemplate template){
      return template instanceof ArchivedProjectTemplate;
    }
  }
);
  int index=preserveSelection ? myList.getSelectedIndex() : -1;
  myList.setModel(new CollectionListModel(list));
  myList.setSelectedIndex(index == -1 ? 0 : index);
}
