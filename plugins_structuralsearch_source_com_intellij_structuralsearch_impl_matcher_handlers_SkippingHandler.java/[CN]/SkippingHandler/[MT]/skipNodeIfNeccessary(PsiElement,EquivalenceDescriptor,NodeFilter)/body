{
  if (element == null) {
    return null;
  }
  if (descriptor == null) {
    final EquivalenceDescriptorProvider provider=EquivalenceDescriptorProvider.getInstance(element);
    if (provider != null) {
      descriptor=provider.buildDescriptor(element);
    }
  }
 else {
    final PsiElement child=getOnlyChildFromDescriptor(descriptor,filter);
    return child != null ? child : element;
  }
  if (descriptor != null) {
    final PsiElement onlyChild=getOnlyChildFromDescriptor(descriptor,filter);
    if (onlyChild != null) {
      return onlyChild;
    }
  }
  return getOnlyChild(element,filter);
}
