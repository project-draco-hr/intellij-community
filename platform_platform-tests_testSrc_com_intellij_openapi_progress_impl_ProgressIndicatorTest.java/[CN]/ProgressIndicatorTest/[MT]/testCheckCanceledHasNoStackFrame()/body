{
  ProgressIndicatorBase pib=new ProgressIndicatorBase();
  pib.cancel();
  try {
    pib.checkCanceled();
    fail("Please restore ProgressIndicatorBase.checkCanceled() check!");
  }
 catch (  ProcessCanceledException ex) {
    boolean isInternal=SystemProperties.getBooleanProperty("idea.is.internal",false);
    boolean isTest=SystemProperties.getBooleanProperty("idea.is.unit.test",false);
    boolean hasStackFrame=ex.getStackTrace().length != 0;
    assertTrue("Should have no stackframe",(isInternal || isTest) == hasStackFrame);
  }
}
