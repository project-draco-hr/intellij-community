{
  PsiElement mirrorElement=SourceTreeToPsiMap.treeToPsiNotNull(element);
  if (!(mirrorElement instanceof PsiJavaFile)) {
    throw new InvalidMirrorException("Unexpected mirror file: " + mirrorElement);
  }
  PsiJavaFile mirrorFile=(PsiJavaFile)mirrorElement;
  PsiJavaModule module=getModuleDeclaration();
  if (module != null) {
    setMirror(module,mirrorFile.getModuleDeclaration());
  }
 else {
    setMirrorIfPresent(getPackageStatement(),mirrorFile.getPackageStatement());
    setMirrors(getClasses(),mirrorFile.getClasses());
  }
}
