{
  PsiClassHolderFileStub<?> stub=null;
  try {
    stub=buildFileStub(file,file.contentsToByteArray());
  }
 catch (  Exception e) {
    LOG.warn(e);
  }
  if (stub == null) {
    return "";
  }
  PsiManager manager=PsiManager.getInstance(DefaultProjectFactory.getInstance().getDefaultProject());
  ClsFileImpl psi=new ClsFileImpl(new ClassFileViewProvider(manager,file),stub);
  if (stub.getPsi() == null) {
    @SuppressWarnings("unchecked") PsiFileStubImpl<PsiFile> impl=(PsiFileStubImpl)stub;
    impl.setPsi(psi);
  }
  StringBuilder buffer=new StringBuilder();
  psi.appendMirrorText(0,buffer);
  return buffer;
}
