{
  TreeElement mirrorTreeElement=myMirrorFileElement;
  if (mirrorTreeElement == null) {
synchronized (myMirrorLock) {
      mirrorTreeElement=myMirrorFileElement;
      if (mirrorTreeElement == null) {
        VirtualFile file=getVirtualFile();
        PsiClass[] classes=getClasses();
        String fileName=(classes.length > 0 ? classes[0].getName() : file.getNameWithoutExtension()) + JavaFileType.DOT_DEFAULT_EXTENSION;
        if (ClassFileDecompilers.find(file) instanceof ClassFileDecompilers.Light) {
          mirrorTreeElement=trySetMirror(file,fileName,true);
        }
        if (mirrorTreeElement == null) {
          mirrorTreeElement=trySetMirror(file,fileName,false);
        }
        myMirrorFileElement=mirrorTreeElement;
      }
    }
  }
  return mirrorTreeElement.getPsi();
}
