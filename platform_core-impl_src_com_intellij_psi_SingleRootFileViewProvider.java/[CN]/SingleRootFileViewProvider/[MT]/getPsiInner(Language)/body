{
  if (target != getBaseLanguage()) {
    return null;
  }
  Ref<PsiFile> ref=myPsiFile.get();
  if (ref == null) {
    PsiFile psiFile=createFile();
    ref=Ref.create(psiFile);
    boolean set=myPsiFile.compareAndSet(null,ref);
    if (!set) {
      if (psiFile instanceof PsiFileImpl) {
        ((PsiFileImpl)psiFile).markInvalidated();
      }
      ref=myPsiFile.get();
    }
  }
  return ref.get();
}
