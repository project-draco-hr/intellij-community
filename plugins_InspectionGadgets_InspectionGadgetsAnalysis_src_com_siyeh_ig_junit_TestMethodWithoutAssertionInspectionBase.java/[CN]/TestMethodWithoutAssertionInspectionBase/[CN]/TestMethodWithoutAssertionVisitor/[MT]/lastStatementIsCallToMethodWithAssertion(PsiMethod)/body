{
  final PsiStatement lastStatement=ControlFlowUtils.getLastStatementInBlock(method.getBody());
  if (!(lastStatement instanceof PsiExpressionStatement)) {
    return false;
  }
  final PsiExpressionStatement expressionStatement=(PsiExpressionStatement)lastStatement;
  final PsiExpression expression=expressionStatement.getExpression();
  if (!(expression instanceof PsiMethodCallExpression)) {
    return false;
  }
  final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)expression;
  final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
  final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
  if (qualifierExpression != null && !(qualifierExpression instanceof PsiThisExpression)) {
    return false;
  }
  final PsiMethod targetMethod=methodCallExpression.resolveMethod();
  return containsAssertion(targetMethod);
}
