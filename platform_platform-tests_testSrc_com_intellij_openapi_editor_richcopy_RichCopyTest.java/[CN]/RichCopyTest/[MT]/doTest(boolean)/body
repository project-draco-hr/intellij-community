{
  myFixture.configureByFile(getTestName(false) + ".java");
  if (columnMode) {
    myFixture.performEditorAction("EditorToggleColumnMode");
  }
  myFixture.performEditorAction("EditorCopy");
  Transferable contents=CopyPasteManager.getInstance().getContents();
  assertNotNull(contents);
  assertTrue(contents.isDataFlavorSupported(HtmlTransferableData.FLAVOR));
  String expectedHtml=getFileContents(getTestName(false) + ".html");
  String actualHtml=readFully((Reader)contents.getTransferData(HtmlTransferableData.FLAVOR));
  assertMatches("HTML contents differs",expectedHtml,actualHtml);
  assertTrue(contents.isDataFlavorSupported(RtfTransferableData.FLAVOR));
  String expectedRtf=getFileContents(getTestName(false) + ".rtf" + (SystemInfo.isMac ? ".mac" : ""));
  String actualRtf=readFully((InputStream)contents.getTransferData(RtfTransferableData.FLAVOR));
  assertMatches("RTF contents differs",expectedRtf,actualRtf);
}
