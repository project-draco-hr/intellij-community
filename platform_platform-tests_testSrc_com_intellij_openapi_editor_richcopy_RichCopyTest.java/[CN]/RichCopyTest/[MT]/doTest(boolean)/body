{
  myFixture.configureByFile(getTestName(false) + ".java");
  if (columnMode) {
    myFixture.performEditorAction("EditorToggleColumnMode");
  }
  myFixture.performEditorAction("EditorCopy");
  Transferable contents=CopyPasteManager.getInstance().getContents();
  assertNotNull(contents);
  assertTrue(contents.isDataFlavorSupported(HtmlCopyPasteProcessor.FLAVOR));
  String expectedHtml=getFileContents(getTestName(false) + ".html");
  String actualHtml=readFully((Reader)contents.getTransferData(HtmlCopyPasteProcessor.FLAVOR));
  assertTrue("HTML contents differs",matches(expectedHtml,actualHtml));
  assertTrue(contents.isDataFlavorSupported(RtfCopyPasteProcessor.FLAVOR));
  String expectedRtf=getFileContents(getTestName(false) + ".rtf");
  String actualRtf=readFully((InputStream)contents.getTransferData(RtfCopyPasteProcessor.FLAVOR));
  assertTrue("RTF contents differs",matches(expectedRtf,actualRtf));
}
