{
  int posInExpected=0;
  int posInActual=0;
  while (posInExpected < expected.length()) {
    int placeholderPos=expected.indexOf(PLATFORM_SPECIFIC_PLACEHOLDER,posInExpected);
    if (placeholderPos < 0) {
      return posInExpected == 0 ? actual.equals(expected) : actual.substring(posInActual).endsWith(expected.substring(posInExpected));
    }
    String fixedSubstring=expected.substring(posInExpected,placeholderPos);
    int matchedPosInActual=actual.indexOf(fixedSubstring,posInActual);
    if (matchedPosInActual < 0 || posInExpected == 0 && matchedPosInActual > 0) {
      return false;
    }
    posInExpected=placeholderPos + PLATFORM_SPECIFIC_PLACEHOLDER.length();
    posInActual=matchedPosInActual + fixedSubstring.length();
  }
  return true;
}
