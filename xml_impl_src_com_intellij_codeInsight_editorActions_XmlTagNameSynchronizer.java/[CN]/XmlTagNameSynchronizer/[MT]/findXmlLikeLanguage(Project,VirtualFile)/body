{
  final PsiFile psiFile=file != null && file.isValid() ? PsiManager.getInstance(project).findFile(file) : null;
  if (psiFile != null) {
    for (    Language language : psiFile.getViewProvider().getLanguages()) {
      if (SUPPORTED_LANGUAGES.contains(language.getID()) || HtmlUtil.supportsXmlTypedHandlers(psiFile))       return language;
    }
  }
  return null;
}
