{
  super.visitMethod(method);
  final PsiTypeParameter[] parameters=method.getTypeParameters();
  final Map<PsiTypeParameter,PsiType> map=ContainerUtil.newHashMap();
  for (  PsiTypeParameter parameter : parameters) {
    final PsiClassType[] types=parameter.getSuperTypes();
    if (types.length == 1) {
      map.put(parameter,PsiWildcardType.createExtends(method.getManager(),types[0]));
    }
 else {
      map.put(parameter,PsiWildcardType.createExtends(method.getManager(),PsiIntersectionType.createIntersection(types)));
    }
  }
  final PsiSubstitutor substitutor=PsiSubstitutorImpl.createSubstitutor(map);
  for (  GrParameter parameter : method.getParameterList().getParameters()) {
    final GrExpression initializer=parameter.getInitializerGroovy();
    if (initializer == null)     continue;
    final PsiType targetType=parameter.getType();
    processAssignment(substitutor.substitute(targetType),initializer,parameter.getNameIdentifierGroovy(),"cannot.assign",method,ApplicableTo.ASSIGNMENT);
  }
}
