{
  List<LeafBlockWrapper> blocksToModify=new ArrayList<LeafBlockWrapper>();
  LeafBlockWrapper firstBlock=myWrapState.getFirstBlock();
  for (LeafBlockWrapper block=firstBlock; block != null; block=block.getNextBlock()) {
    final WhiteSpace whiteSpace=block.getWhiteSpace();
    if (!whiteSpace.isReadOnly()) {
      final String newWhiteSpace=whiteSpace.generateWhiteSpace(myBlockIndentOptions.getIndentOptions(block));
      if (!whiteSpace.equalsToString(newWhiteSpace)) {
        blocksToModify.add(block);
      }
    }
  }
  return blocksToModify;
}
