{
  final PsiElement element=descriptor.getPsiElement();
  final PyClassType type=getClassType(element);
  if (type == null)   return;
  final PyClass cls=type.getPyClass();
  PsiElement initStatement;
  if (!type.isDefinition()) {
    initStatement=addFieldToInit(project,cls,myIdentifier,new CreateFieldCallback(project,myIdentifier,myInitializer));
  }
 else {
    PyStatement field=PyElementGenerator.getInstance(project).createFromText(LanguageLevel.getDefault(),PyStatement.class,myIdentifier + " = " + myInitializer);
    initStatement=PyUtil.addElementToStatementList(field,cls.getStatementList(),true);
  }
  if (initStatement != null) {
    showTemplateBuilder(initStatement,cls.getContainingFile());
    return;
  }
  PyUtil.showBalloon(project,PyBundle.message("QFIX.failed.to.add.field"),MessageType.ERROR);
}
