{
  final PyStatementList stmt_list=init.getStatementList();
  PyStatement[] stmts=stmt_list.getStatements();
  PyStatement last_stmt=null;
  if (stmts.length > 0)   last_stmt=stmts[stmts.length - 1];
  PyParameter[] params=init.getParameterList().getParameters();
  String self_name=PyNames.CANONICAL_SELF;
  if (params.length > 0) {
    self_name=params[0].getName();
  }
  PyStatement new_stmt=callback.fun(self_name);
  if (!FileModificationService.getInstance().preparePsiElementForWrite(stmt_list))   return null;
  final PsiElement result=stmt_list.addAfter(new_stmt,last_stmt);
  PyPsiUtils.removeRedundantPass(stmt_list);
  return result;
}
