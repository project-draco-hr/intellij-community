{
  ClassFileDecompilers.Decompiler decompiler=ClassFileDecompilers.find(file);
  if (decompiler instanceof ClassFileDecompilers.Full) {
    PsiManager manager=PsiManager.getInstance(ProjectManager.getInstance().getDefaultProject());
    return ((ClassFileDecompilers.Full)decompiler).createFileViewProvider(file,manager,true).getContents();
  }
  Project[] projects=ProjectManager.getInstance().getOpenProjects();
  if (projects.length > 0) {
    Project project=projects[0];
    for (    ContentBasedFileSubstitutor processor : Extensions.getExtensions(ContentBasedFileSubstitutor.EP_NAME)) {
      if (processor.isApplicable(project,file)) {
        return processor.obtainFileText(project,file);
      }
    }
  }
  return ClsFileImpl.decompile(file);
}
