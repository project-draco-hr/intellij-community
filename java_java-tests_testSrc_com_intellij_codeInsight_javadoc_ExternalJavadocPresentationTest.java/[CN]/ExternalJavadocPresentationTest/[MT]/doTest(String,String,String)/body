{
  final String basePath=getTestDataPath() + TEST_ROOT;
  final VirtualFile pageTextFile=LocalFileSystem.getInstance().findFileByPath(basePath + pageText);
  assertNotNull(pageTextFile);
  final VirtualFile expectedTextFile=LocalFileSystem.getInstance().findFileByPath(basePath + expected);
  assertNotNull(expectedTextFile);
class JavadocExternalTestFilter extends JavaDocExternalFilter {
    public JavadocExternalTestFilter(    Project project){
      super(project);
    }
    @Override public void doBuildFromStream(    String url,    Reader input,    StringBuilder data,    boolean searchForEncoding) throws IOException {
      super.doBuildFromStream(url,input,data,searchForEncoding);
    }
  }
  JavadocExternalTestFilter filter=new JavadocExternalTestFilter(getProject());
  StringBuilder extractedData=new StringBuilder();
  filter.doBuildFromStream(url,new StringReader(LoadTextUtil.loadText(pageTextFile).toString()),extractedData,false);
  assertEquals(LoadTextUtil.loadText(expectedTextFile).toString(),extractedData.toString());
}
