{
  PyTypeHierarchyNodeDescriptor descriptor=null;
  PyClass[] superClasses=PyUtil.getAllSuperClasses(cl);
  for (int i=superClasses.length - 1; i >= 0; --i) {
    final PyClass superClass=superClasses[i];
    final PyTypeHierarchyNodeDescriptor newDescriptor=new PyTypeHierarchyNodeDescriptor(descriptor,superClass,false);
    if (descriptor != null) {
      newDescriptor.setCachedChildren(new PyTypeHierarchyNodeDescriptor[]{newDescriptor});
    }
    descriptor=newDescriptor;
  }
  final PyTypeHierarchyNodeDescriptor newDescriptor=new PyTypeHierarchyNodeDescriptor(descriptor,cl,true);
  if (descriptor != null) {
    descriptor.setCachedChildren(new HierarchyNodeDescriptor[]{newDescriptor});
  }
  return newDescriptor;
}
