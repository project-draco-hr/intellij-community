{
  PyTypeHierarchyNodeDescriptor descriptor=null;
  List<PyClass> superClasses=PyUtil.getAllSuperClasses(cl);
  for (int i=superClasses.size() - 1; i >= 0; --i) {
    final PyClass superClass=superClasses.get(i);
    final PyTypeHierarchyNodeDescriptor newDescriptor=new PyTypeHierarchyNodeDescriptor(descriptor,superClass,false);
    if (descriptor != null) {
      descriptor.setCachedChildren(new PyTypeHierarchyNodeDescriptor[]{newDescriptor});
    }
    descriptor=newDescriptor;
  }
  final PyTypeHierarchyNodeDescriptor newDescriptor=new PyTypeHierarchyNodeDescriptor(descriptor,cl,true);
  if (descriptor != null) {
    descriptor.setCachedChildren(new HierarchyNodeDescriptor[]{newDescriptor});
  }
  return newDescriptor;
}
