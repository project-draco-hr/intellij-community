{
  final File configRoot=getConfigRoot(false);
  final File[] configFiles=configRoot.listFiles();
  if (configFiles == null) {
    return;
  }
  final List<File> templateWithDefaultExtension=new ArrayList<File>();
  final Set<String> processedNames=new HashSet<String>();
  for (  File file : configFiles) {
    if (file.isDirectory() || FileTypeManager.getInstance().isFileIgnored(file.getName()) || file.isHidden()) {
      continue;
    }
    final String name=file.getName();
    if (name.endsWith(TEMPLATE_EXTENSION_SUFFIX)) {
      templateWithDefaultExtension.add(file);
    }
 else {
      processedNames.add(name);
      addTemplateFromFile(name,file);
    }
  }
  for (  File file : templateWithDefaultExtension) {
    String name=file.getName();
    name=name.substring(0,name.length() - TEMPLATE_EXTENSION_SUFFIX.length());
    if (!processedNames.contains(name)) {
      addTemplateFromFile(name,file);
    }
    FileUtil.delete(file);
  }
}
