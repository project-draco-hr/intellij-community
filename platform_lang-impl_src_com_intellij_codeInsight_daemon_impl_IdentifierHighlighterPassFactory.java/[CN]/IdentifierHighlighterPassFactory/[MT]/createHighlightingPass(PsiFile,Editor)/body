{
  if (editor.isOneLineMode())   return null;
  if (CodeInsightSettings.getInstance().HIGHLIGHT_IDENTIFIER_UNDER_CARET && (!ApplicationManager.getApplication().isHeadlessEnvironment() || ourTestingIdentifierHighlighting) && file.isPhysical()) {
    return new IdentifierHighlighterPass(file.getProject(),file,editor);
  }
  return null;
}
