{
  myForceMode=forceMode;
  myExpressionContexts=new ArrayList<>();
  final int referenceEndRange=reference.getTextRange().getEndOffset();
  for (PsiElement node=expression; node != null; node=node.getParent()) {
    if (node instanceof PsiStatement)     break;
    if (node instanceof PsiExpression && node != reference) {
      final PsiExpression expr=(PsiExpression)node;
      final int endOffset=expr.getTextRange().getEndOffset();
      if (endOffset > referenceEndRange)       break;
      final PrefixExpressionContext context=new PrefixExpressionContext(this,expr);
      myExpressionContexts.add(context);
      if (context.canBeStatement())       break;
    }
  }
}
