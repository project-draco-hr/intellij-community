{
  final PsiElement element=descriptor.getPsiElement();
  final PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  final PyNamedParameter parameter=elementGenerator.createParameter(element.getText() + "=None");
  final PyFunction function=PsiTreeUtil.getParentOfType(element,PyFunction.class);
  if (function != null) {
    final PyParameterList parameterList=function.getParameterList();
    parameterList.addParameter(parameter);
    CodeInsightUtilCore.forcePsiPostprocessAndRestoreElement(parameterList);
    final TemplateBuilder builder=TemplateBuilderFactory.getInstance().createTemplateBuilder(parameter);
    builder.replaceRange(TextRange.create(parameter.getTextLength() - 4,parameter.getTextLength()),"None");
    final VirtualFile virtualFile=function.getContainingFile().getVirtualFile();
    if (virtualFile == null)     return;
    final Editor editor=FileEditorManager.getInstance(project).openTextEditor(new OpenFileDescriptor(project,virtualFile),true);
    if (editor == null)     return;
    builder.run(editor,false);
  }
}
