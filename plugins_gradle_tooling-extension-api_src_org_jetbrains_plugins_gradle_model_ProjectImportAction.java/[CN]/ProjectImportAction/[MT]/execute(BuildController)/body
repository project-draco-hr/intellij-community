{
  configureAdditionalTypes(controller);
  final IdeaProject ideaProject=myIsPreviewMode ? controller.getModel(BasicIdeaProject.class) : controller.getModel(IdeaProject.class);
  if (ideaProject == null || ideaProject.getModules().isEmpty()) {
    return null;
  }
  AllModels allModels=new AllModels(ideaProject);
  addExtraProject(controller,allModels,null);
  for (  IdeaModule module : ideaProject.getModules()) {
    addExtraProject(controller,allModels,module);
  }
  return allModels;
}
