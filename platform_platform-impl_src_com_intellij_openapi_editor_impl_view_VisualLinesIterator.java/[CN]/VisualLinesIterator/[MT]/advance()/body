{
  checkEnd();
  int nextWrapOffset=getNextSoftWrapOffset();
  myOffset=getNextVisualLineStartOffset(nextWrapOffset);
  if (myOffset == Integer.MAX_VALUE) {
    myOffset=-1;
  }
 else   if (myOffset == nextWrapOffset) {
    mySoftWrap++;
  }
  myVisualLine++;
  while (myFoldRegion < myFoldRegions.length && myFoldRegions[myFoldRegion].getStartOffset() < myOffset)   myFoldRegion++;
}
