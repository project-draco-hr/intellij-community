{
  final PsiElement parent=skipParentheses(element.getParent(),true);
  if (parent instanceof GrAssignmentExpression) {
    if (element instanceof GrIndexProperty) {
      final GrExpression rvalue=((GrAssignmentExpression)parent).getRValue();
      return rvalue != null ? rvalue.getType() : null;
    }
    return ((GrAssignmentExpression)parent).getType();
  }
  if (parent instanceof GrTupleExpression) {
    GrTupleExpression list=(GrTupleExpression)parent;
    if (list.getParent() instanceof GrAssignmentExpression) {
      final GrExpression rValue=((GrAssignmentExpression)list.getParent()).getRValue();
      int idx=list.indexOf(element);
      if (idx >= 0 && rValue != null) {
        PsiType rType=rValue.getType();
        if (rType instanceof GrTupleType) {
          PsiType[] componentTypes=((GrTupleType)rType).getComponentTypes();
          if (idx < componentTypes.length)           return componentTypes[idx];
          return null;
        }
        return PsiUtil.extractIterableTypeParameter(rType,false);
      }
    }
  }
  if (parent instanceof GrUnaryExpression && TokenSets.POSTFIX_UNARY_OP_SET.contains(((GrUnaryExpression)parent).getOperationTokenType())) {
    return ((GrUnaryExpression)parent).getType();
  }
  return null;
}
