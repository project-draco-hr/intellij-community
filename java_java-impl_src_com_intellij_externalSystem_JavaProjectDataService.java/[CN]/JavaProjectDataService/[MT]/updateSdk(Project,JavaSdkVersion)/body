{
  final Sdk sdk=findJdk(version);
  if (sdk == null)   return;
  ExternalSystemApiUtil.executeProjectChangeAction(new DisposeAwareProjectChange(project){
    @Override public void execute(){
      ProjectRootManager.getInstance(project).setProjectSdk(sdk);
      LanguageLevel level=version.getMaxLanguageLevel();
      LanguageLevelProjectExtension languageLevelExtension=LanguageLevelProjectExtension.getInstance(project);
      if (level.compareTo(languageLevelExtension.getLanguageLevel()) < 0) {
        languageLevelExtension.setLanguageLevel(level);
      }
    }
  }
);
}
