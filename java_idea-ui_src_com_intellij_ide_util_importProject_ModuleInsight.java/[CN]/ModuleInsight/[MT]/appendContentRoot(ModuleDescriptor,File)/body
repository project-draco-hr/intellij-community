{
  final Set<File> moduleRoots=module.getContentRoots();
  for (  File moduleRoot : moduleRoots) {
    if (FileUtil.isAncestor(moduleRoot,contentRoot,false)) {
      return moduleRoot;
    }
    if (FileUtil.isAncestor(contentRoot,moduleRoot,true)) {
      final Collection<DetectedSourceRoot> currentSources=module.getSourceRoots(moduleRoot);
      module.removeContentRoot(moduleRoot);
      module.addContentRoot(contentRoot);
      for (      DetectedSourceRoot source : currentSources) {
        module.addSourceRoot(contentRoot,source);
      }
      return contentRoot;
    }
  }
  module.addContentRoot(contentRoot);
  return contentRoot;
}
