{
  this.exceptionHandler=exceptionHandler;
  this.listener=listener;
  heartbeatTimer=SimpleTimer.getInstance().setUp(new Runnable(){
    @Override public void run(){
synchronized (clients) {
        if (clients.isEmpty()) {
          return;
        }
        clients.forEach(new TObjectProcedure<Client>(){
          @Override public boolean execute(          Client client){
            if (client.channel.isActive()) {
              client.sendHeartbeat();
            }
            return true;
          }
        }
);
      }
    }
  }
,(options == null ? new WebSocketServerOptions() : options).heartbeatDelay);
}
