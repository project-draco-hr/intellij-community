{
  if (ApplicationManager.getApplication().isCommandLine())   return;
  if (repaintIconAlarm.isEmpty() || progress >= 1) {
    repaintIconAlarm.addRequest(new Runnable(){
      @Override public void run(){
        if (myProject.isDisposed())         return;
        Editor editor=file == null ? null : PsiUtilBase.findEditor(file);
        if (editor == null || editor.isDisposed())         return;
        EditorMarkupModelImpl markup=(EditorMarkupModelImpl)editor.getMarkupModel();
        markup.repaintTrafficLightIcon();
        repaintErrorStripeRenderer(editor);
      }
    }
,50,null);
  }
}
