{
  if (refEntity == null)   return;
  String qName="";
  while (!(refEntity instanceof RefProject)) {
    if (qName.length() > 0)     qName="." + qName;
    String name=null;
    if (refEntity instanceof RefElement) {
      final HTMLComposerExtension extension=getLanguageExtension((RefElement)refEntity);
      if (extension != null) {
        name=extension.getQualifiedName(refEntity);
      }
    }
    if (name == null) {
      name=refEntity.getName();
    }
    qName=name + qName;
    if (Comparing.strEqual(refEntity.getName(),refEntity.getQualifiedName())) {
      buf.append(qName);
      return;
    }
    refEntity=refEntity.getOwner();
  }
  buf.append(qName);
}
