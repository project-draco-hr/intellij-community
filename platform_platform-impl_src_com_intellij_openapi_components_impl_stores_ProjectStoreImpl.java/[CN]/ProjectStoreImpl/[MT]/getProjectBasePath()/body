{
  if (myProject.isDefault())   return null;
  final String path=getProjectFilePath();
  if (!StringUtil.isEmptyOrSpaces(path)) {
    return getBasePath(new File(path));
  }
  StateStorage storage=getStateStorageManager().getStateStorage(StoragePathMacros.PROJECT_FILE,RoamingType.PER_USER);
  if (!(storage instanceof FileBasedStorage)) {
    return null;
  }
  File file=((FileBasedStorage)storage).getFile();
  return file == null ? null : getBasePath(file);
}
