{
  final IdeaPlugin ideaPlugin=context.getInvocationElement().getParentOfType(IdeaPlugin.class,true);
  if (ideaPlugin == null)   return Collections.emptyList();
  final Collection<String> dependencies=ExtensionDomExtender.getDependencies(ideaPlugin);
  final List<IdeaPlugin> depPlugins=new ArrayList<IdeaPlugin>();
  final Set<String> depPluginsIds=new HashSet<String>();
  for (  IdeaPlugin plugin : IdeaPluginConverter.getAllPlugins(context.getProject())) {
    final String value=plugin.getPluginId();
    if (value != null && dependencies.contains(value) && !depPluginsIds.contains(value)) {
      depPlugins.add(plugin);
      depPluginsIds.add(value);
    }
  }
  return depPlugins;
}
