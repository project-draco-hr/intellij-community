{
  content.retain();
  if (processHandler.has()) {
    fastCgiRequest.writeToServerChannel(content,processChannel);
  }
 else {
    processHandler.get().doWhenDone(new Runnable(){
      @Override public void run(){
        fastCgiRequest.writeToServerChannel(content,processChannel);
      }
    }
).doWhenRejected(new Runnable(){
      @Override public void run(){
        content.release();
        Channel channel=requests.get(fastCgiRequest.requestId);
        if (channel != null && channel.isActive()) {
          Responses.sendStatus(HttpResponseStatus.BAD_GATEWAY,channel);
        }
      }
    }
);
  }
}
