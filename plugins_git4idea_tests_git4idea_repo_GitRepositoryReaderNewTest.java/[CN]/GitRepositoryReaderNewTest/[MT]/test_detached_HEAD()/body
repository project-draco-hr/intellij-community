{
  makeCommit("file.txt");
  git("checkout HEAD^");
  GitBranchState state=readState();
  assertEquals("Detached HEAD is not detected",GitRepository.State.DETACHED,state.getState());
  assertEquals("Detached HEAD hash is incorrect",last(),state.getCurrentRevision());
}
