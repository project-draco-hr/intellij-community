{
  conflict(myRepo,"feature");
  commit(myRepo);
  commit(myRepo);
  git("checkout HEAD^");
  git("rebase feature",true);
  File gitDir=new File(myRepo.getRoot().getPath(),".git");
  GitRepositoryReader reader=new GitRepositoryReader(gitDir);
  GitConfig config=GitConfig.read(myPlatformFacade,new File(gitDir,"config"));
  Collection<GitRemote> remotes=config.parseRemotes();
  GitBranchState state=reader.readState(remotes);
  assertNull("Current branch can't be identified for this case",state.getCurrentBranch());
  assertEquals("State value is incorrect",Repository.State.REBASING,state.getState());
}
