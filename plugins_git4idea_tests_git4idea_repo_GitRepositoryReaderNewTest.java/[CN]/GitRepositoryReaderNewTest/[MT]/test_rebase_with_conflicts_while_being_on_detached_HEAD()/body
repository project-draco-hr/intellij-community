{
  conflict(myRepo,"feature");
  commit(myRepo);
  commit(myRepo);
  git("checkout HEAD^");
  git("rebase feature",true);
  File gitDir=new File(myRepo.getRoot().getPath(),".git");
  GitRepositoryReader reader=new GitRepositoryReader(gitDir);
  GitLocalBranch branch=reader.readCurrentBranch();
  Repository.State state=reader.readState();
  assertNull("Current branch can't be identified for this case",branch);
  assertEquals("State value is incorrect",Repository.State.REBASING,state);
}
