{
  if (accessModifier == PsiModifier.PUBLIC)   return true;
  final RefJavaUtil refUtil=RefJavaUtil.getInstance();
  if (accessModifier == PsiModifier.PACKAGE_LOCAL) {
    return RefJavaUtil.getPackage(from) == RefJavaUtil.getPackage(to);
  }
  RefClass fromTopLevel=refUtil.getTopLevelClass(from);
  RefClass toTopLevel=refUtil.getTopLevelClass(to);
  RefClass fromOwner=refUtil.getOwnerClass(from);
  RefClass toOwner=refUtil.getOwnerClass(to);
  if (accessModifier == PsiModifier.PROTECTED) {
    if (SUGGEST_PRIVATE_FOR_INNERS) {
      return fromTopLevel != null && refUtil.isInheritor(fromTopLevel,toOwner) || fromOwner != null && refUtil.isInheritor(fromOwner,toTopLevel) || toOwner != null && refUtil.getOwnerClass(toOwner) == from;
    }
    return fromTopLevel != null && refUtil.isInheritor(fromTopLevel,toOwner);
  }
  if (accessModifier == PsiModifier.PRIVATE) {
    if (SUGGEST_PRIVATE_FOR_INNERS) {
      final PsiClass fromTopLevelElement=fromTopLevel != null ? fromTopLevel.getElement() : null;
      if (fromTopLevelElement != null && isInExtendsList(to,fromTopLevelElement.getExtendsList()))       return false;
      if (fromTopLevelElement != null && isInExtendsList(to,fromTopLevelElement.getImplementsList()))       return false;
      if (fromTopLevelElement != null && isInAnnotations(to,fromTopLevelElement))       return false;
      return fromTopLevel == toOwner || fromOwner == toTopLevel || toOwner != null && (refUtil.getOwnerClass(toOwner) == from || from instanceof RefMethod && toOwner == ((RefMethod)from).getOwnerClass() || from instanceof RefField && toOwner == ((RefField)from).getOwnerClass());
    }
    if (fromOwner != null && fromOwner.isStatic() && !to.isStatic() && refUtil.isInheritor(fromOwner,toOwner))     return false;
    if (fromTopLevel == toOwner) {
      if (from instanceof RefClass && to instanceof RefClass) {
        final PsiClass fromClass=((RefClass)from).getElement();
        LOG.assertTrue(fromClass != null);
        if (isInExtendsList(to,fromClass.getExtendsList()))         return false;
        if (isInExtendsList(to,fromClass.getImplementsList()))         return false;
      }
      return true;
    }
  }
  return false;
}
