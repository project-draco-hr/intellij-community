{
  List<WebBrowser> browsers=WebBrowserManager.getInstance().getBrowsers();
  boolean addDefaultBrowser=isPopup();
  int offset=addDefaultBrowser ? 1 : 0;
  AnAction[] actions=new AnAction[browsers.size() + offset];
  if (addDefaultBrowser) {
    if (myDefaultBrowserAction == null) {
      myDefaultBrowserAction=new OpenFileInDefaultBrowserAction();
      myDefaultBrowserAction.getTemplatePresentation().setText("Default");
      myDefaultBrowserAction.getTemplatePresentation().setIcon(AllIcons.Nodes.PpWeb);
    }
    actions[0]=myDefaultBrowserAction;
  }
  for (int i=0, size=browsers.size(); i < size; i++) {
    WebBrowser browser=browsers.get(i);
    actions[i + offset]=new BaseWebBrowserAction(browser);
  }
  return actions;
}
