{
  final PsiClass containingClass=PsiTreeUtil.getParentOfType(context,PsiClass.class);
  if (InheritanceUtil.isInheritor(containingClass,qualifierClass)) {
    return true;
  }
  if (hasAccessibleMemberWithName(containingClass,memberName,context)) {
    return false;
  }
  final PsiFile contextFile=context.getContainingFile();
  if (!(contextFile instanceof PsiJavaFile)) {
    return false;
  }
  final PsiJavaFile javaFile=(PsiJavaFile)contextFile;
  final PsiImportList importList=javaFile.getImportList();
  if (importList == null) {
    return false;
  }
  final PsiImportStatementBase existingImportStatement=importList.findSingleImportStatement(memberName);
  if (existingImportStatement != null) {
    if (existingImportStatement instanceof PsiImportStaticStatement) {
      final PsiImportStaticStatement importStaticStatement=(PsiImportStaticStatement)existingImportStatement;
      if (!memberName.equals(importStaticStatement.getReferenceName())) {
        return false;
      }
      final PsiClass targetClass=importStaticStatement.resolveTargetClass();
      return targetClass != null && qualifierClass.equals(targetClass.getQualifiedName());
    }
    return false;
  }
  final PsiImportStaticStatement onDemandImportStatement=findOnDemandImportStaticStatement(importList,qualifierClass);
  if (onDemandImportStatement != null && !hasOnDemandImportConflict(qualifierClass + '.' + memberName,javaFile)) {
    return true;
  }
  final Project project=context.getProject();
  final GlobalSearchScope scope=context.getResolveScope();
  final JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(project);
  final PsiClass aClass=psiFacade.findClass(qualifierClass,scope);
  if (aClass == null || !PsiUtil.isAccessible(aClass,contextFile,null) || !hasAccessibleMemberWithName(aClass,memberName,contextFile)) {
    return false;
  }
  final String qualifiedName=aClass.getQualifiedName();
  if (qualifiedName == null) {
    return false;
  }
  final List<PsiImportStaticStatement> imports=getMatchingImports(importList,qualifiedName);
  final int onDemandCount=JavaCodeStyleSettingsFacade.getInstance(project).getNamesCountToUseImportOnDemand();
  final PsiElementFactory elementFactory=psiFacade.getElementFactory();
  if (imports.size() + 1 < onDemandCount) {
    importList.add(elementFactory.createImportStaticStatement(aClass,memberName));
  }
 else {
    for (    PsiImportStaticStatement importStatement : imports) {
      importStatement.delete();
    }
    importList.add(elementFactory.createImportStaticStatement(aClass,"*"));
  }
  return true;
}
