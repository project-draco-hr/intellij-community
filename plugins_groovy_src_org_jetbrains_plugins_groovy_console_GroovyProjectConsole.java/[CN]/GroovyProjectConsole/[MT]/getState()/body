{
synchronized (myFileModuleMap) {
    final MyState result=new MyState();
    for (    VirtualFile file : myFileModuleMap.keySet()) {
      final Module module=myFileModuleMap.get(file);
      result.map.put(file.getCanonicalPath(),module == null ? "" : module.getName());
    }
    return result;
  }
}
