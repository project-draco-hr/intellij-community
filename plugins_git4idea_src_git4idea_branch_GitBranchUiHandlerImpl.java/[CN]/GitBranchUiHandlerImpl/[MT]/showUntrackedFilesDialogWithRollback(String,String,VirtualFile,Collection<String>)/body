{
  final String title="Could not " + StringUtil.capitalize(operationName);
  final String description=UntrackedFilesNotifier.createUntrackedFilesOverwrittenDescription(operationName,false);
  final Collection<String> absolutePaths=GitUtil.toAbsolute(root,relativePaths);
  final List<VirtualFile> untrackedFiles=ContainerUtil.mapNotNull(absolutePaths,new Function<String,VirtualFile>(){
    @Override public VirtualFile fun(    String absolutePath){
      return GitUtil.findRefreshFileOrLog(absolutePath);
    }
  }
);
  return UIUtil.invokeAndWaitIfNeeded(new Computable<Boolean>(){
    @Override public Boolean compute(){
      JComponent filesBrowser;
      if (untrackedFiles.isEmpty()) {
        filesBrowser=new GitSimplePathsBrowser(myProject,absolutePaths);
      }
 else {
        filesBrowser=new SelectFilesDialog.VirtualFileList(myProject,untrackedFiles,false,false);
      }
      DialogWrapper dialog=new UntrackedFilesRollBackDialog(myProject,filesBrowser,StringUtil.stripHtml(description,true),rollbackProposal);
      dialog.setTitle(title);
      myFacade.showDialog(dialog);
      return dialog.isOK();
    }
  }
);
}
