{
  FoldingGroup group=region.getGroup();
  List<FoldRegion> affectedRegions=group != null && myEditor instanceof EditorEx ? ((EditorEx)myEditor).getFoldingModel().getGroupedRegions(group) : Collections.singletonList(region);
  for (  FoldRegion affectedRegion : affectedRegions) {
    int regionStartLine=myEditor.getDocument().getLineNumber(affectedRegion.getStartOffset());
    int regionEndLine=myEditor.getDocument().getLineNumber(affectedRegion.getEndOffset());
    int caretLine=myEditor.getCaretModel().getLogicalPosition().line;
    if (caretLine >= regionStartLine && caretLine <= regionEndLine)     return true;
  }
  return false;
}
