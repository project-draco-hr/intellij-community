{
  if (isDumbMode() && !DumbService.isDumbAware(this)) {
    return false;
  }
  if (PsiModificationTracker.SERVICE.getInstance(myProject).getModificationCount() != myInitialPsiStamp) {
    return false;
  }
  if (myDocument != null) {
    if (myDocument.getModificationStamp() != myInitialDocStamp)     return false;
    PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(myDocument);
    if (file == null || !file.isValid())     return false;
  }
  return true;
}
