{
  Map<String,Object> config=Maps.newHashMap();
  IdeGuiTest guiTest=testMethod.getAnnotation(IdeGuiTest.class);
  if (guiTest != null) {
    config.put(CLOSE_PROJECT_BEFORE_EXECUTION_KEY,guiTest.closeProjectBeforeExecution());
    config.put(RUN_WITH_MINIMUM_JDK_VERSION_KEY,guiTest.runWithMinimumJdkVersion());
    config.put(RETRY_COUNT_KEY,guiTest.retryCount());
  }
  IdeGuiTestSetup guiTestSetup=testMethod.getDeclaringClass().getAnnotation(IdeGuiTestSetup.class);
  if (guiTestSetup != null) {
    config.put(SKIP_SOURCE_GENERATION_ON_SYNC_KEY,guiTestSetup.skipSourceGenerationOnSync());
    config.put(TAKE_SCREENSHOT_ON_TEST_FAILURE_KEY,guiTestSetup.takeScreenshotOnTestFailure());
  }
  return config;
}
