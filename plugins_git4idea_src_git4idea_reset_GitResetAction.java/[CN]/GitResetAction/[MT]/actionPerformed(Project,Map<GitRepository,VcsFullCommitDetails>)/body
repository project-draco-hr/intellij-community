{
  GitVcsSettings settings=GitVcsSettings.getInstance(project);
  GitResetMode defaultMode=ObjectUtils.notNull(settings.getResetMode(),GitResetMode.getDefault());
  GitNewResetDialog dialog=new GitNewResetDialog(project,commits,defaultMode);
  if (dialog.showAndGet()) {
    final GitResetMode selectedMode=dialog.getResetMode();
    settings.setResetMode(selectedMode);
    new Task.Backgroundable(project,"Git reset",true){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        new GitResetOperation(project,commits,selectedMode,indicator).execute();
      }
    }
.queue();
  }
}
