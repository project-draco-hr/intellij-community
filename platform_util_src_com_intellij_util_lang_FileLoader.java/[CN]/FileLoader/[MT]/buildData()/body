{
  ClasspathCache.LoaderData fromIndex=tryReadFromIndex();
  final ClasspathCache.LoaderData loaderData=fromIndex != null ? fromIndex : new ClasspathCache.LoaderData();
  final int nsMsFactor=1000000;
  int currentLoaders=totalLoaders.incrementAndGet();
  long currentScanning;
  if (fromIndex == null) {
    long started=System.nanoTime();
    buildPackageCache(myRootDir,loaderData);
    final long doneNanos=System.nanoTime() - started;
    currentScanning=totalScanning.addAndGet(doneNanos);
    if (doLogging) {
      System.out.println("Scanned: " + myRootDirAbsolutePath + " for "+ (doneNanos / nsMsFactor)+ "ms");
    }
    trySaveToIndex(loaderData);
  }
 else {
    currentScanning=totalScanning.get();
  }
  loaderData.addResourceEntry("foo.class");
  loaderData.addResourceEntry("bar.properties");
  if (doLogging) {
    System.out.println("Scanning: " + (currentScanning / nsMsFactor) + "ms, saving: "+ (totalSaving.get() / nsMsFactor)+ "ms, loading:"+ (totalReading.get() / nsMsFactor)+ "ms for "+ currentLoaders+ " loaders");
  }
  return loaderData;
}
