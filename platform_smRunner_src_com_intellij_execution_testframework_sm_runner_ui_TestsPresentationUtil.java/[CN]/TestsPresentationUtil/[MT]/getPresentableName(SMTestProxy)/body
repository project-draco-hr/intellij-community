{
  final SMTestProxy parent=testProxy.getParent();
  final String name=testProxy.getName();
  String presentationCandidate=name;
  if (parent != null) {
    String parentName=parent.getName();
    boolean parentStartsWith=name.startsWith(parentName);
    if (!parentStartsWith && parent instanceof SMTestProxy.SMRootTestProxy) {
      final String presentation=((SMTestProxy.SMRootTestProxy)parent).getPresentation();
      if (presentation != null) {
        parentName=presentation;
        parentStartsWith=name.startsWith(parentName);
      }
    }
    if (parentStartsWith) {
      presentationCandidate=name.substring(parentName.length());
      if (presentationCandidate.startsWith(".")) {
        presentationCandidate=presentationCandidate.substring(1);
      }
    }
  }
  presentationCandidate=presentationCandidate.trim();
  presentationCandidate=presentationCandidate.replaceAll("\\s+"," ");
  if (StringUtil.isEmpty(presentationCandidate)) {
    return NO_NAME_TEST;
  }
  return presentationCandidate;
}
