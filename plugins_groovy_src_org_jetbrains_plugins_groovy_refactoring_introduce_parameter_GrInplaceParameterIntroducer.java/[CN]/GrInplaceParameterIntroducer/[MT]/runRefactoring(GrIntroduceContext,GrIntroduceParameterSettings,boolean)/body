{
  GrExpressionWrapper wrapper=createExpressionWrapper(context);
  if (processUsages) {
    GrIntroduceExpressionSettingsImpl patchedSettings=new GrIntroduceExpressionSettingsImpl(settings,settings.getName(),settings.declareFinal(),settings.parametersToRemove(),settings.generateDelegate(),settings.replaceFieldsWithGetters(),context.getExpression(),context.getVar(),settings.getSelectedType(),context.getVar() != null || settings.replaceAllOccurrences(),context.getVar() != null,settings.isForceReturn());
    GrIntroduceParameterProcessor processor=new GrIntroduceParameterProcessor(patchedSettings,wrapper);
    processor.run();
  }
 else {
    GrIntroduceParameterProcessor processor=new GrIntroduceParameterProcessor(settings,wrapper);
    processor.performRefactoring(UsageInfo.EMPTY_ARRAY);
  }
  GrParametersOwner owner=settings.getToReplaceIn();
  return ArrayUtil.getLastElement(owner.getParameters());
}
