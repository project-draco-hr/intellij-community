{
  final ActionShortcutRestrictions shortcutRestrictions=ActionShortcutRestrictions.getInstance();
  return new Condition<AnAction>(){
    @Override public boolean value(    final AnAction action){
      if (action == null)       return false;
      final String id=action instanceof ActionStub ? ((ActionStub)action).getId() : actionManager.getId(action);
      if (id != null) {
        if (!Registry.is("keymap.show.alias.actions")) {
          String binding=getActionBinding(keymap,id);
          boolean bound=binding != null && actionManager.getAction(binding) != null && !hasAssociatedShortcutsInHierarchy(id,keymap);
          if (bound) {
            return false;
          }
        }
        if (!shortcutRestrictions.getForActionId(id).allowChanging) {
          return false;
        }
      }
      return filter == null || filter.value(action);
    }
  }
;
}
