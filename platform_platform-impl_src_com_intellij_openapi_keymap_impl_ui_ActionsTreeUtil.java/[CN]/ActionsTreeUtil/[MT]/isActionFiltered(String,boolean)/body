{
  return new Condition<AnAction>(){
    public boolean value(    final AnAction action){
      if (filter == null)       return true;
      if (action == null)       return false;
      final String insensitiveFilter=filter.toLowerCase();
      for (      String text : new String[]{action.getTemplatePresentation().getText(),action.getTemplatePresentation().getDescription(),action instanceof ActionStub ? ((ActionStub)action).getId() : ActionManager.getInstance().getId(action)}) {
        if (text != null) {
          final String lowerText=text.toLowerCase();
          if (SearchUtil.isComponentHighlighted(lowerText,insensitiveFilter,force,null)) {
            return true;
          }
 else           if (lowerText.contains(insensitiveFilter)) {
            return true;
          }
        }
      }
      return false;
    }
  }
;
}
