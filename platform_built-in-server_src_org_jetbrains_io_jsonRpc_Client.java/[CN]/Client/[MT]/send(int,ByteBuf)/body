{
  ChannelFuture channelFuture=send(message);
  if (messageId == -1) {
    return null;
  }
  ChannelFutureAwarePromise<T> promise=new ChannelFutureAwarePromise<T>(messageId,messageCallbackMap);
  channelFuture.addListener(promise);
  messageCallbackMap.put(messageId,(AsyncPromise<Object>)promise);
  return promise;
}
