{
  final Presentation presentation=e.getPresentation();
  presentation.setEnabledAndVisible(false);
  if (TestFinderHelper.getFinders().length == 0) {
    return;
  }
  Project project=e.getProject();
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  if (editor == null || project == null)   return;
  PsiFile psiFile=PsiUtilBase.getPsiFileInEditor(editor,project);
  if (psiFile == null)   return;
  PsiElement element=GotoTestOrCodeHandler.getSelectedElement(editor,psiFile);
  if (TestFinderHelper.findSourceElement(element) == null)   return;
  presentation.setEnabledAndVisible(true);
  if (TestFinderHelper.isTest(element)) {
    presentation.setText(ActionsBundle.message("action.GotoTestSubject.text"));
    presentation.setDescription(ActionsBundle.message("action.GotoTestSubject.description"));
  }
 else {
    presentation.setText(ActionsBundle.message("action.GotoTest.text"));
    presentation.setDescription(ActionsBundle.message("action.GotoTest.description"));
  }
}
