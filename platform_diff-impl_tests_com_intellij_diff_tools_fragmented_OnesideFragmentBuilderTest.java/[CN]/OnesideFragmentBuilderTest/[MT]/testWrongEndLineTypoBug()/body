{
  Document document1=new DocumentImpl("A\nB\nC\nD");
  Document document2=new DocumentImpl("A\nD");
  List<LineFragment> fragments=myComparisonManager.compareLinesInner(document1.getCharsSequence(),document2.getCharsSequence(),ComparisonPolicy.DEFAULT,DumbProgressIndicator.INSTANCE);
  OnesideFragmentBuilder builder=new OnesideFragmentBuilder(fragments,document1,document2,true,Side.RIGHT);
  builder.exec();
  assertFalse(builder.isEqual());
  assertEquals(builder.getText().toString(),"A\nB\nC\nD\n");
  assertEquals(builder.getChangedLines(),Collections.singletonList(new LineRange(1,3)));
  assertEquals(builder.getBlocks().size(),1);
  ChangedBlock block=builder.getBlocks().get(0);
  assertEquals(block.getLine1(),1);
  assertEquals(block.getLine2(),3);
  assertEquals(block.getStartOffset1(),2);
  assertEquals(block.getEndOffset1(),6);
  assertEquals(block.getStartOffset2(),6);
  assertEquals(block.getEndOffset2(),6);
}
