{
  PsiFile file=CommonDataKeys.PSI_FILE.getData(dataContext);
  if (file == null)   return null;
  int offset=editor.getCaretModel().getOffset();
  PsiElement context=file.findElementAt(offset);
  if (context == null)   return null;
  PsiClass clazz=PsiTreeUtil.getParentOfType(context,PsiClass.class,false);
  if (clazz == null) {
    return null;
  }
  for (  GenerateToStringClassFilter filter : GenerateToStringClassFilter.EP_NAME.getExtensions()) {
    if (!filter.canGenerateToString(clazz))     return null;
  }
  return clazz;
}
