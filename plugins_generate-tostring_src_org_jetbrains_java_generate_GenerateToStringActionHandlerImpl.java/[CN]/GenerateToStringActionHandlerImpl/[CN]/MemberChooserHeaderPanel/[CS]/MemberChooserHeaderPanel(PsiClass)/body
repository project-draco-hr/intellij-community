{
  super(new GridBagLayout());
  final Collection<TemplateResource> templates=ToStringTemplatesManager.getInstance().getAllTemplates();
  final TemplateResource[] all=templates.toArray(new TemplateResource[templates.size()]);
  final JButton settingsButton=new JButton("Settings");
  settingsButton.setMnemonic(KeyEvent.VK_S);
  comboBox=new ComboBox(all);
  settingsButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final TemplatesPanel ui=new TemplatesPanel(clazz.getProject());
      Disposable disposable=Disposer.newDisposable();
      Configurable composite=new TabbedConfigurable(disposable){
        protected List<Configurable> createConfigurables(){
          List<Configurable> res=new ArrayList<Configurable>();
          res.add(new GenerateToStringConfigurable(clazz.getProject()));
          res.add(ui);
          return res;
        }
        public String getDisplayName(){
          return "toString() Generation Settings";
        }
        public String getHelpTopic(){
          return "editing.altInsert.tostring.settings";
        }
        @Override public void apply() throws ConfigurationException {
          super.apply();
          updateDialog(clazz,chooser);
          comboBox.removeAllItems();
          for (          TemplateResource resource : ToStringTemplatesManager.getInstance().getAllTemplates()) {
            comboBox.addItem(resource);
          }
          comboBox.setSelectedItem(ToStringTemplatesManager.getInstance().getDefaultTemplate());
        }
      }
;
      ShowSettingsUtil.getInstance().editConfigurable(MemberChooserHeaderPanel.this,composite,new Runnable(){
        public void run(){
          ui.selectItem(ToStringTemplatesManager.getInstance().getDefaultTemplate());
        }
      }
);
      Disposer.dispose(disposable);
    }
  }
);
  comboBox.setSelectedItem(ToStringTemplatesManager.getInstance().getDefaultTemplate());
  final JLabel templatesLabel=new JLabel("Template: ");
  templatesLabel.setDisplayedMnemonic('T');
  templatesLabel.setLabelFor(comboBox);
  final GridBagConstraints constraints=new GridBagConstraints();
  constraints.anchor=GridBagConstraints.BASELINE;
  constraints.gridx=0;
  add(templatesLabel,constraints);
  constraints.gridx=1;
  constraints.weightx=1.0;
  constraints.fill=GridBagConstraints.HORIZONTAL;
  add(comboBox,constraints);
  constraints.gridx=2;
  constraints.weightx=0.0;
  add(settingsButton,constraints);
}
