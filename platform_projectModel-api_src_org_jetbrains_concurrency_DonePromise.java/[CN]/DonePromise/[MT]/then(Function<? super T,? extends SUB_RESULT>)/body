{
  if (done instanceof Obsolescent && ((Obsolescent)done).isObsolete()) {
    return rejectedPromise("obsolete");
  }
 else {
    return resolvedPromise(done.fun(result));
  }
}
