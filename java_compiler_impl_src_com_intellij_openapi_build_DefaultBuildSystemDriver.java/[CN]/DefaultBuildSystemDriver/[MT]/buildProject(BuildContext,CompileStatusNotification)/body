{
  Project project=buildContext.getProject();
  CompilerManager compilerManager=CompilerManager.getInstance(project);
  if (buildContext.isIncrementalBuild()) {
    CompileScope scope=compilerManager.createProjectCompileScope(project);
    RunConfiguration configuration=buildContext.getScope().getRunConfiguration();
    if (configuration != null) {
      scope.putUserData(CompilerManager.RUN_CONFIGURATION_KEY,configuration);
      scope.putUserData(CompilerManager.RUN_CONFIGURATION_TYPE_ID_KEY,configuration.getType().getId());
    }
    compilerManager.make(scope,callback);
  }
 else {
    compilerManager.rebuild(callback);
  }
}
