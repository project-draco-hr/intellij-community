{
  myMainClass=new LabeledComponent<JTextField>();
  myMainClass.setLabelLocation(BorderLayout.WEST);
  myMainClass.setText("Main &class:");
  myMainClass.setComponent(new JTextField());
  myScratchPathField=new LabeledComponent<TextFieldWithBrowseButton>();
  myScratchPathField.setLabelLocation(BorderLayout.WEST);
  myScratchPathField.setText("&Path to scratch file:");
  myScratchPathField.setComponent(new TextFieldWithBrowseButton(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      VirtualFile toSelect=getVFileFromEditor();
      if (toSelect == null) {
        final String scratchesRoot=ScratchFileService.getInstance().getRootPath(ScratchRootType.getInstance());
        toSelect=LocalFileSystem.getInstance().findFileByPath(scratchesRoot);
      }
      final VirtualFile file=FileChooser.chooseFile(FileChooserDescriptorFactory.createSingleFileNoJarsDescriptor(),myScratchPathField,project,toSelect);
      if (file != null) {
        setVFileToEditor(file);
      }
    }
  }
,this));
  myModule=new LabeledComponent<ModulesComboBox>();
  myModule.setLabelLocation(BorderLayout.WEST);
  myModule.setComponent(new ModulesComboBox());
  myModule.setText("Use classpath of &module:");
  myModuleSelector=new ConfigurationModuleSelector(project,myModule.getComponent());
  myCommonProgramParameters=new CommonJavaParametersPanel();
  myCommonProgramParameters.setModuleContext(myModuleSelector.getModule());
  myModule.getComponent().addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      myCommonProgramParameters.setModuleContext(myModuleSelector.getModule());
    }
  }
);
  myJrePathEditor=new JrePathEditor(DefaultJreSelector.projectSdk(project));
  myWholePanel=new JPanel(new GridBagLayout());
  myWholePanel.add(myMainClass,new GridBagConstraints(0,0,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(6,0,0,0),0,0));
  myWholePanel.add(myScratchPathField,new GridBagConstraints(GridBagConstraints.RELATIVE,1,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(6,0,0,0),0,0));
  myWholePanel.add(myCommonProgramParameters,new GridBagConstraints(GridBagConstraints.RELATIVE,2,1,1,1.0,1.0,GridBagConstraints.NORTHWEST,GridBagConstraints.BOTH,new Insets(12,0,12,0),0,0));
  myWholePanel.add(myModule,new GridBagConstraints(GridBagConstraints.RELATIVE,3,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(0,0,0,0),0,0));
  myWholePanel.add(myJrePathEditor,new GridBagConstraints(GridBagConstraints.RELATIVE,4,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(6,0,0,0),0,0));
  myAnchor=UIUtil.mergeComponentsWithAnchor(myMainClass,myScratchPathField,myCommonProgramParameters,myJrePathEditor,myModule);
}
