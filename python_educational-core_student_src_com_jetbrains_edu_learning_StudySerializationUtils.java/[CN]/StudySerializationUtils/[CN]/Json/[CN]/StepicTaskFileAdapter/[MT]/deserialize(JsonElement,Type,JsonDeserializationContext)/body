{
  JsonObject taskFileObject=json.getAsJsonObject();
  JsonArray placeholders=taskFileObject.getAsJsonArray(PLACEHOLDERS);
  for (  JsonElement placeholder : placeholders) {
    JsonObject placeholderObject=placeholder.getAsJsonObject();
    int line=placeholderObject.getAsJsonPrimitive(LINE).getAsInt();
    int start=placeholderObject.getAsJsonPrimitive(START).getAsInt();
    if (line == -1) {
      placeholderObject.addProperty(OFFSET,start);
    }
 else {
      Document document=EditorFactory.getInstance().createDocument(taskFileObject.getAsJsonPrimitive(TEXT).getAsString());
      placeholderObject.addProperty(OFFSET,document.getLineStartOffset(line) + start);
    }
  }
  return new GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES).create().fromJson(json,TaskFile.class);
}
