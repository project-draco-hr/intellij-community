{
  final ChunkAndInfo chunkAndInfo=findNearestChunkAndInfo();
  final WordWithPosition chunk=chunkAndInfo.getChunk();
  if (valueFromSuggestionList != null) {
    if (chunk != null) {
      myView.replaceText(chunk.getFrom(),chunk.getTo(),valueFromSuggestionList);
    }
 else {
      myView.insertTextAfterCaret(valueFromSuggestionList);
    }
    return;
  }
  final ChunkInfo chunkInfo=chunkAndInfo.getChunkInfo();
  final SuggestionInfo suggestionInfo=chunkInfo.getSuggestions();
  if (suggestionInfo == null) {
    return;
  }
  final List<String> suggestions=new ArrayList<String>(suggestionInfo.getSuggestions());
  if (chunk != null) {
    filterLeaveOnlyMatching(suggestions,chunk.getText());
  }
  if (suggestions.size() == 1) {
    if (chunk != null) {
      myView.replaceText(chunk.getFrom(),chunk.getTo(),suggestions.get(0));
    }
 else {
      myView.insertTextAfterCaret(suggestions.get(0));
    }
  }
}
