{
  int nonWhiteSpaceCharOffset=CharArrayUtil.shiftForward(myText,lineStartOffset," \t");
  for (int i=myOpenedBrackets.size() - 1; i >= 0 && nonWhiteSpaceCharOffset < myText.length(); i--) {
    Bracket lastOpenedBracket=myOpenedBrackets.get(i);
    char nonWhiteSpaceChar=myText.charAt(nonWhiteSpaceCharOffset);
    Bracket bracket=Bracket.forChar(nonWhiteSpaceChar);
    if (bracket == null || !bracket.isClosing(lastOpenedBracket)) {
      return myOpenedBrackets.subList(0,i + 1);
    }
    nonWhiteSpaceCharOffset=CharArrayUtil.shiftForward(myText,nonWhiteSpaceCharOffset," \t");
  }
  return ContainerUtil.emptyList();
}
