{
  if (fileOrDir.isDirectory()) {
    DirectoryInfo info=myDirectoryIndex.getInfoForDirectory(fileOrDir);
    return info != null && info.isInModuleSource() && myModule.equals(info.getModule()) && JavaModuleSourceRootTypes.isTestSourceOrResource(myDirectoryIndex.getSourceRootType(info));
  }
 else {
    VirtualFile parent=fileOrDir.getParent();
    return parent != null && isInTestSourceContent(parent);
  }
}
