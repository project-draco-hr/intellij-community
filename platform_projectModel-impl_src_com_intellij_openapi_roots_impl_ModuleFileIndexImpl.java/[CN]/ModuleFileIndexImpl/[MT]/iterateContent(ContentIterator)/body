{
  final List<VirtualFile> contentRoots=ApplicationManager.getApplication().runReadAction(new Computable<List<VirtualFile>>(){
    @Override public List<VirtualFile> compute(){
      if (myModule.isDisposed())       return Collections.emptyList();
      List<VirtualFile> result=ContainerUtil.newArrayList();
      for (      VirtualFile contentRoot : ModuleRootManager.getInstance(myModule).getContentRoots()) {
        VirtualFile parent=contentRoot.getParent();
        if (parent != null) {
          DirectoryInfo parentInfo=myDirectoryIndex.getInfoForFile(parent);
          if (parentInfo.isInProject() && myModule.equals(parentInfo.getModule()))           continue;
        }
        result.add(contentRoot);
      }
      return result;
    }
  }
);
  for (  VirtualFile contentRoot : contentRoots) {
    boolean finished=VfsUtilCore.iterateChildrenRecursively(contentRoot,myContentFilter,iterator);
    if (!finished)     return false;
  }
  return true;
}
