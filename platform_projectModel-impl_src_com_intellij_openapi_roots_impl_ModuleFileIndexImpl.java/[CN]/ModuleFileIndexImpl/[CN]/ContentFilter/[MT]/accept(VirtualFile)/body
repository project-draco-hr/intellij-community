{
  return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    @Override public Boolean compute(){
      if (myModule.isDisposed())       return false;
      if (file.isDirectory()) {
        DirectoryInfo info=myDirectoryIndex.getInfoForFile(file);
        return info.isInProject() && myModule.equals(info.getModule());
      }
 else {
        return !myFileTypeRegistry.isFileIgnored(file);
      }
    }
  }
);
}
