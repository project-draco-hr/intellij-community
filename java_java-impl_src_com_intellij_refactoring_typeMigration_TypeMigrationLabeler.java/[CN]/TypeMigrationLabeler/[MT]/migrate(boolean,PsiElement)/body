{
  myMigrationRoots=new LinkedList<Pair<TypeMigrationUsageInfo,PsiType>>();
  myTypeEvaluator=new TypeEvaluator(myMigrationRoots,this);
  for (  PsiElement victim : victims) {
    addMigrationRoot(victim,myMigrationRootTypeFunction.fun(victim),null,false,true,true);
  }
  if (autoMigrate) {
    while (myMigrationRoots.size() > 0) {
      iterate();
    }
  }
  myDialogSemaphore.waitFor();
  if (myException != null) {
    throw myException;
  }
}
