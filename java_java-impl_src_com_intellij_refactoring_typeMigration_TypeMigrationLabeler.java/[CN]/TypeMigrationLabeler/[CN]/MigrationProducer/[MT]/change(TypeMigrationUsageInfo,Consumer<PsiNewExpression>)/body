{
  final PsiElement element=usageInfo.getElement();
  if (element == null)   return;
  final Project project=element.getProject();
  if (element instanceof PsiExpression) {
    final PsiExpression expression=(PsiExpression)element;
    if (element instanceof PsiNewExpression) {
      for (      Map.Entry<TypeMigrationUsageInfo,PsiType> info : myNewExpressionTypeChange.entrySet()) {
        final PsiElement expressionToReplace=info.getKey().getElement();
        if (expression.equals(expressionToReplace)) {
          final PsiNewExpression newExpression=TypeMigrationReplacementUtil.replaceNewExpressionType(project,(PsiNewExpression)expressionToReplace,info);
          if (newExpression != null) {
            consumer.consume(newExpression);
          }
        }
      }
    }
    final Object conversion=myRemainConversions.get(usageInfo);
    if (conversion != null) {
      myRemainConversions.remove(usageInfo);
      TypeMigrationReplacementUtil.replaceExpression(expression,project,conversion,myTypeEvaluator);
    }
  }
 else   if (element instanceof PsiReferenceParameterList) {
    for (    Map.Entry<TypeMigrationUsageInfo,PsiClassType> entry : myClassTypeArgumentsChange.entrySet()) {
      if (element.equals(entry.getKey().getElement())) {
        final PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
        try {
          element.getParent().replace(factory.createReferenceElementByType(entry.getValue()));
        }
 catch (        IncorrectOperationException e) {
          LOG.error(e);
        }
      }
    }
  }
 else {
    TypeMigrationReplacementUtil.migratePsiMemberType(element,project,getTypeEvaluator().getType(usageInfo));
    if (usageInfo instanceof OverridenUsageInfo) {
      final String migrationName=((OverridenUsageInfo)usageInfo).getMigrateMethodName();
      if (migrationName != null) {
        new RenameProcessor(project,element,migrationName,false,false).run();
      }
    }
  }
}
