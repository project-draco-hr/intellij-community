{
  prepareSomeHistory();
  Set<VcsRef> prevRefs=ContainerUtil.newHashSet(myLogProvider.readAllRefs(myProjectRoot));
  createTaggedBranch();
  Set<VcsRef> newRefs=ContainerUtil.newHashSet(myLogProvider.readAllRefs(myProjectRoot));
  List<VcsCommitMetadata> expectedLog=log();
  List<? extends VcsCommitMetadata> block=myLogProvider.readFirstBlock(myProjectRoot,new RequirementsImpl(1000,false,prevRefs,newRefs));
  assertSameElements(block,expectedLog);
}
