{
  prepareSomeHistory();
  git("branch build");
  git("tag build");
  VcsLogProvider.DetailedLogData data=myLogProvider.readFirstBlock(myProjectRoot,new RequirementsImpl(1000,true,Collections.<VcsRef>emptySet()));
  List<VcsCommitMetadata> expectedLog=log();
  assertOrderedEquals(data.getCommits(),expectedLog);
  assertTrue(ContainerUtil.exists(data.getRefs(),new Condition<VcsRef>(){
    @Override public boolean value(    VcsRef ref){
      return ref.getName().equals("build") && ref.getType() == GitRefManager.LOCAL_BRANCH;
    }
  }
));
  assertTrue(ContainerUtil.exists(data.getRefs(),new Condition<VcsRef>(){
    @Override public boolean value(    VcsRef ref){
      return ref.getName().equals("build") && ref.getType() == GitRefManager.TAG;
    }
  }
));
}
