{
  prepareSomeHistory();
  Set<VcsRef> prevRefs=GitTestUtil.readAllRefs(myProjectRoot,myObjectsFactory);
  git("tag -f ATAG");
  List<VcsCommitMetadata> expectedLog=log();
  Set<VcsRef> refs=GitTestUtil.readAllRefs(myProjectRoot,myObjectsFactory);
  VcsLogProvider.DetailedLogData block=myLogProvider.readFirstBlock(myProjectRoot,new RequirementsImpl(1000,true,prevRefs));
  assertSameElements(block.getCommits(),expectedLog);
  assertSameElements(block.getRefs(),refs);
}
