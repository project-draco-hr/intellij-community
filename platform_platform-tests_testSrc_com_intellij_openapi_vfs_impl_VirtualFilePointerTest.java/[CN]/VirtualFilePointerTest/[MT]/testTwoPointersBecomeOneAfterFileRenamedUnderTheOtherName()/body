{
  final File tempDir=createTempDirectory();
  final File f1=new File(tempDir,"f1");
  boolean created=f1.createNewFile();
  assertTrue(created);
  final String url1=VirtualFileManager.constructUrl(LocalFileSystem.PROTOCOL,f1.getCanonicalPath().replace(File.separatorChar,'/'));
  final VirtualFile vFile1=refreshAndFind(url1);
  final LoggingListener listener1=new LoggingListener();
  VirtualFilePointer pointer1=myVirtualFilePointerManager.create(url1,disposable,listener1);
  assertTrue(pointer1.isValid());
  String url2=VirtualFileManager.constructUrl(LocalFileSystem.PROTOCOL,tempDir.getCanonicalPath().replace(File.separatorChar,'/') + "/f2");
  final LoggingListener listener2=new LoggingListener();
  VirtualFilePointer pointer2=myVirtualFilePointerManager.create(url2,disposable,listener2);
  assertFalse(pointer2.isValid());
  rename(vFile1,"f2");
  assertTrue(pointer1.isValid());
  assertTrue(pointer2.isValid());
  assertEquals("[]",listener1.getLog().toString());
  assertEquals("[before:false, after:true]",listener2.getLog().toString());
}
