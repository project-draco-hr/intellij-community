{
  final SmartList<NestingRule> result=new SmartList<>();
  for (  NestingRule rule : rules) {
    final Couple<Boolean> c=checkMatchingAsParentOrChild(rule,fileName);
    final boolean matchesParent=c.first;
    final boolean matchesChild=c.second;
    if (!matchesChild && !matchesParent)     continue;
    if (matchesParent && parentNotChild) {
      result.add(rule);
    }
    if (matchesChild && !parentNotChild) {
      result.add(rule);
    }
  }
  return result;
}
