{
  VirtualFile vFile=getVirtualFile(createTempFile("a.txt","abc"));
  PsiFile psiFile=getPsiManager().findFile(vFile);
  Document document=getPsiDocumentManager().getDocument(psiFile);
  rename(vFile,"a.zip");
  assertFalse(psiFile.isValid());
  psiFile=getPsiManager().findFile(vFile);
  assertInstanceOf(psiFile,PsiBinaryFile.class);
  assertNoFileDocumentMapping(vFile,psiFile,document);
  assertEquals("abc",document.getText());
}
