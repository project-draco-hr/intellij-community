{
  final Pair<HttpClient,HttpConnection> pair=createConnection(builder);
  try {
    final PostMethod postMethod=new PostMethod(builder.getServerUrl() + "/" + "login");
    postMethod.setQueryString(builder.getLoginQueryString());
    postMethod.execute(pair.getFirst().getState(),pair.getSecond());
    String response=postMethod.getResponseBodyAsString();
    int rc=postMethod.getStatusCode();
    if (rc != HttpStatus.SC_OK) {
      throw new IOException("Login failed. Server responds with error code " + rc);
    }
    return response.trim();
  }
  finally {
    pair.getSecond().close();
  }
}
