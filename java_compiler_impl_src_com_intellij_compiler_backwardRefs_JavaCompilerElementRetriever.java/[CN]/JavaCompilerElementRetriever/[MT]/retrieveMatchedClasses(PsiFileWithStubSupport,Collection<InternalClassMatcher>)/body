{
  final List<PsiClass> result=new ArrayList<>(matchers.size());
  StubTree tree=psiFile.getStubTree();
  boolean foreign=tree == null;
  if (foreign) {
    tree=((PsiFileImpl)psiFile).calcStubTree();
  }
  for (  StubElement<?> element : tree.getPlainList()) {
    if (element instanceof PsiClassStub && match((PsiClassStub)element,matchers)) {
      result.add(asPsi((StubBase<PsiClass>)element,psiFile,tree,foreign));
    }
  }
  return result;
}
