{
  for (  final DataNode<ModuleData> module : toCreate) {
    ModuleData data=module.getData();
    final Module created=modelsProvider.newModule(data.getModuleFilePath(),data.getModuleTypeId());
    final ModifiableRootModel modifiableRootModel=modelsProvider.getModifiableRootModel(created);
    modifiableRootModel.inheritSdk();
    setModuleOptions(created,module);
    RootPolicy<Object> visitor=new RootPolicy<Object>(){
      @Override public Object visitLibraryOrderEntry(      LibraryOrderEntry libraryOrderEntry,      Object value){
        modifiableRootModel.removeOrderEntry(libraryOrderEntry);
        return value;
      }
      @Override public Object visitModuleOrderEntry(      ModuleOrderEntry moduleOrderEntry,      Object value){
        modifiableRootModel.removeOrderEntry(moduleOrderEntry);
        return value;
      }
    }
;
    for (    OrderEntry orderEntry : modifiableRootModel.getOrderEntries()) {
      orderEntry.accept(visitor,null);
    }
  }
}
