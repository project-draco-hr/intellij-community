{
  if (modules.isEmpty()) {
    return;
  }
  ExternalSystemApiUtil.executeProjectChangeAction(synchronous,new DisposeAwareProjectChange(project){
    @Override public void execute(){
      for (      Module module : modules) {
        if (module.isDisposed())         continue;
        ModuleManager moduleManager=ModuleManager.getInstance(module.getProject());
        String path=module.getModuleFilePath();
        moduleManager.disposeModule(module);
        File file=new File(path);
        if (file.isFile()) {
          boolean success=file.delete();
          if (!success) {
            LOG.warn("Can't remove module file at '" + path + "'");
          }
        }
      }
    }
  }
);
}
