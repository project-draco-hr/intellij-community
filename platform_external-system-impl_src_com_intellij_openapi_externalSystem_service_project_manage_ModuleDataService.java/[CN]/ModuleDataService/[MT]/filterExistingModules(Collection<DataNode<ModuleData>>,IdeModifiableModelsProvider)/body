{
  Collection<DataNode<ModuleData>> result=ContainerUtilRt.newArrayList();
  for (  DataNode<ModuleData> node : modules) {
    ModuleData moduleData=node.getData();
    Module module=modelsProvider.findIdeModule(moduleData);
    if (module == null) {
      result.add(node);
    }
 else {
      setModuleOptions(module,node);
    }
  }
  return result;
}
