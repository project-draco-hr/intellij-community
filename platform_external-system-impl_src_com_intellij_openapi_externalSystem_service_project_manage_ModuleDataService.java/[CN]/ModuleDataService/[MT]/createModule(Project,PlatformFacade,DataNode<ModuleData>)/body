{
  ModuleData data=module.getData();
  Module created=platformFacade.newModule(project,data.getModuleFilePath(),data.getModuleTypeId());
  final ModifiableRootModel moduleRootModel=platformFacade.getModuleModifiableModel(created);
  moduleRootModel.inheritSdk();
  setModuleOptions(created,module);
  RootPolicy<Object> visitor=new RootPolicy<Object>(){
    @Override public Object visitLibraryOrderEntry(    LibraryOrderEntry libraryOrderEntry,    Object value){
      moduleRootModel.removeOrderEntry(libraryOrderEntry);
      return value;
    }
    @Override public Object visitModuleOrderEntry(    ModuleOrderEntry moduleOrderEntry,    Object value){
      moduleRootModel.removeOrderEntry(moduleOrderEntry);
      return value;
    }
  }
;
  for (  OrderEntry orderEntry : moduleRootModel.getOrderEntries()) {
    orderEntry.accept(visitor,null);
  }
  return moduleRootModel;
}
