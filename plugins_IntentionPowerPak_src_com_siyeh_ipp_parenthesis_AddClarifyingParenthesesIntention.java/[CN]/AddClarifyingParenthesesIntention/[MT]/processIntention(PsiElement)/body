{
  final PsiExpression expression=getTopLevelExpression(element);
  if (expression == null) {
    return;
  }
  final StringBuilder newExpression=createReplacementText(expression,new StringBuilder());
  final PsiElement parent=expression.getParent();
  if (parent instanceof PsiConditionalExpression) {
    final PsiConditionalExpression conditionalExpression=(PsiConditionalExpression)parent;
    final PsiExpression condition=conditionalExpression.getCondition();
    if (expression == condition) {
      PsiReplacementUtil.replaceExpression(expression,'(' + newExpression.toString() + ')');
      return;
    }
  }
  PsiReplacementUtil.replaceExpression(expression,newExpression.toString());
}
