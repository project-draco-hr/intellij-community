{
  super(settingsProvider,new Predicate<TerminalWidget>(){
    @Override public boolean apply(    TerminalWidget input){
      return createNewSessionAction.apply(Pair.<TerminalWidget,String>create(input,null));
    }
  }
);
  myProject=project;
  mySettingsProvider=settingsProvider;
  myParent=parent;
  convertActions(this,getActions());
  Disposer.register(parent,this);
  Disposer.register(this,settingsProvider);
  DnDSupport.createBuilder(this).setDropHandler(new DnDDropHandler(){
    @Override public void drop(    DnDEvent event){
      if (event.getAttachedObject() instanceof TransferableWrapper) {
        TransferableWrapper ao=(TransferableWrapper)event.getAttachedObject();
        if (ao != null && ao.getPsiElements() != null && ao.getPsiElements().length == 1 && ao.getPsiElements()[0] instanceof PsiFileSystemItem) {
          PsiFileSystemItem element=(PsiFileSystemItem)ao.getPsiElements()[0];
          PsiDirectory dir=element instanceof PsiFile ? ((PsiFile)element).getContainingDirectory() : (PsiDirectory)element;
          createNewSessionAction.apply(Pair.<TerminalWidget,String>create(JBTabbedTerminalWidget.this,dir.getVirtualFile().getPath()));
        }
      }
    }
  }
).install();
}
