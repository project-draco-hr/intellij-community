{
  FileTemplateManager manager=FileTemplateManager.getDefaultInstance();
  FileTemplate template=manager.getInternalTemplate(templateName);
  try {
    String lineSeparator=CodeStyleSettingsManager.getSettings(ProjectManagerEx.getInstanceEx().getDefaultProject()).getLineSeparator();
    VfsUtil.saveText(file,StringUtil.convertLineSeparators(templateAttributes != null ? template.getText(templateAttributes) : template.getText(),lineSeparator));
  }
 catch (  IOException e) {
    LOG.warn(String.format("Unexpected exception on applying template %s config",GradleConstants.SYSTEM_ID.getReadableName()),e);
    throw new ConfigurationException(e.getMessage(),String.format("Can't apply %s template config text",GradleConstants.SYSTEM_ID.getReadableName()));
  }
}
