{
  LOG.assertTrue(getName() != null);
  final String originModuleFilePath=getModuleFilePath();
  LOG.assertTrue(originModuleFilePath != null);
  String moduleName=myProjectId == null ? getName() : myProjectId.getArtifactId();
  String moduleFilePath=myWizardContext.getProjectFileDirectory() + "/.idea/modules/" + moduleName+ ModuleFileType.DOT_DEFAULT_EXTENSION;
  deleteModuleFile(moduleFilePath);
  final ModuleType moduleType=getModuleType();
  final Module module=moduleModel.newModule(moduleFilePath,moduleType.getId());
  setupModule(module);
  return module;
}
