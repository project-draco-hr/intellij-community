{
  String contentEntryPath=getContentEntryPath();
  if (StringUtil.isEmpty(contentEntryPath)) {
    return;
  }
  File contentRootDir=new File(contentEntryPath);
  FileUtilRt.createDirectory(contentRootDir);
  LocalFileSystem fileSystem=LocalFileSystem.getInstance();
  VirtualFile modelContentRootDir=fileSystem.refreshAndFindFileByIoFile(contentRootDir);
  if (modelContentRootDir == null) {
    return;
  }
  modifiableRootModel.addContentEntry(modelContentRootDir);
  modifiableRootModel.inheritSdk();
  final Project project=modifiableRootModel.getProject();
  setupGradleBuildFile(modelContentRootDir);
  setupGradleSettingsFile(modelContentRootDir,modifiableRootModel);
  if (myWizardContext.isCreatingNewProject()) {
    String externalProjectPath=FileUtil.toCanonicalPath(project.getBasePath());
    getExternalProjectSettings().setExternalProjectPath(externalProjectPath);
    AbstractExternalSystemSettings settings=ExternalSystemApiUtil.getSettings(project,GradleConstants.SYSTEM_ID);
    settings.linkProject(getExternalProjectSettings());
  }
 else {
    FileDocumentManager.getInstance().saveAllDocuments();
    ExternalSystemUtil.refreshProjects(project,GradleConstants.SYSTEM_ID,false);
  }
}
