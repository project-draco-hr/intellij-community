{
  FileTemplateManager manager=FileTemplateManager.getDefaultInstance();
  FileTemplate template=manager.getInternalTemplate(templateName);
  try {
    VfsUtil.saveText(file,VfsUtilCore.loadText(file) + (templateAttributes != null ? template.getText(templateAttributes) : template.getText()));
  }
 catch (  IOException e) {
    LOG.warn(String.format("Unexpected exception on appending template %s config",GradleConstants.SYSTEM_ID.getReadableName()),e);
    throw new ConfigurationException(e.getMessage(),String.format("Can't append %s template config text",GradleConstants.SYSTEM_ID.getReadableName()));
  }
}
