{
  Set<String> qNames=ContainerUtil.newHashSet(nullable ? getNullables() : getNotNulls());
  PsiAnnotation annotation=checkBases && (owner instanceof PsiClass || owner instanceof PsiMethod) ? AnnotationUtil.findAnnotationInHierarchy(owner,qNames) : AnnotationUtil.findAnnotation(owner,qNames);
  if (annotation != null) {
    return annotation;
  }
  PsiType type=getOwnerType(owner);
  if (type == null || TypeConversionUtil.isPrimitiveAndNotNull(type))   return null;
  if (AnnotationUtil.isAnnotated(owner,nullable ? Arrays.asList(DEFAULT_NOT_NULLS) : Arrays.asList(DEFAULT_NULLABLES),checkBases,false)) {
    return null;
  }
  if (!nullable && InferredAnnotationsManager.getInstance(owner.getProject()).ignoreInference(owner,AnnotationUtil.NOT_NULL)) {
    return null;
  }
  return findNullabilityDefaultInHierarchy(owner,nullable);
}
