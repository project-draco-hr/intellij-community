{
  final TestNGConfiguration configuration=new TestNGConfiguration("testOne",getProject(),TestNGConfigurationType.getInstance().getConfigurationFactories()[0]);
  final TestData data=configuration.getPersistantData();
  data.TEST_OBJECT=TestType.METHOD.getType();
  data.METHOD_NAME="testOne";
  data.setScope(TestSearchScope.SINGLE_MODULE);
  configuration.setModule(data.setMainClass(aClass));
  final TestNGTestObject testObject=TestNGTestObject.fromConfig(configuration);
  assertNotNull(testObject);
  final LinkedHashMap<PsiClass,Map<PsiMethod,List<String>>> classes=new LinkedHashMap<PsiClass,Map<PsiMethod,List<String>>>();
  testObject.fillTestObjects(classes);
  assertContainsElements(classes.keySet(),aClass);
  final Map<PsiMethod,List<String>> methods=classes.get(aClass);
  assertContainsElements(methods.keySet(),expectedMethods);
  if (secondaryClass != null) {
    final Map<PsiMethod,List<String>> configMethods=classes.get(secondaryClass);
    assertTrue(configMethods != null);
    assertTrue(configMethods.containsKey(configMethod));
  }
}
