{
  runPythonTest(new DjangoPathTestTask(){
    @Override protected void configure(    AbstractPythonRunConfiguration config) throws IOException {
      final int[] ports=DjangoTemplateDebuggerTest.findFreePorts(2);
      ((DjangoServerRunConfiguration)config).setPort(ports[1]);
    }
    @Override public ConfigurationFactory getFactory(){
      return DjangoServerRunConfigurationType.getInstance().getConfigurationFactories()[0];
    }
    public void testing() throws Exception {
      waitForOutput("Development server is running");
      final String[] splittedOutput=output().split("\\n");
      final ArrayList<String> outputList=Lists.newArrayList();
      for (      String s : splittedOutput) {
        if (s.equals("The end of sys.path"))         break;
        outputList.add(s);
      }
      assertEquals(getTestDataPath(),outputList.get(1));
      assertTrue(outputList.contains(PythonHelpersLocator.getHelpersRoot().getPath()));
      assertEquals(outputList.indexOf(PythonHelpersLocator.getHelpersRoot().getPath()),outputList.lastIndexOf(PythonHelpersLocator.getHelpersRoot().getPath()));
      assertEquals(outputList.indexOf(getTestDataPath()),outputList.lastIndexOf(getTestDataPath()));
    }
  }
);
}
