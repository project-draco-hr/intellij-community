{
  myFixture.configureByFile("addImport/" + getTestName(true) + ".py");
  new WriteCommandAction(myFixture.getProject(),myFixture.getFile()){
    @Override protected void run(    Result result) throws Throwable {
      final PsiPolyVariantReference reference=PyResolveTestCase.findReferenceByMarker(myFixture.getFile());
      if (qualifier != null) {
        AddImportHelper.addLocalFromImportStatement((PyElement)reference.getElement(),qualifier,name);
      }
 else {
        AddImportHelper.addLocalImportStatement((PyElement)reference.getElement(),name);
      }
    }
  }
.execute();
  myFixture.checkResultByFile("addImport/" + getTestName(true) + ".after.py");
}
