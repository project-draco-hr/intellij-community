{
  myEditor.getMarkupModel().removeAllHighlighters();
  myEditor.getDocument().setText(text);
  ((EditorImpl)myEditor).resetSizes();
  myEditor.getHighlighter().setText(text);
  if (myTextAttributes != null) {
    myEditor.getMarkupModel().addRangeHighlighter(0,myEditor.getDocument().getTextLength(),HighlighterLayer.ADDITIONAL_SYNTAX,myTextAttributes,HighlighterTargetArea.EXACT_RANGE);
  }
  ((EditorImpl)myEditor).setPaintSelection(mySelected);
  SelectionModel selectionModel=myEditor.getSelectionModel();
  selectionModel.setSelection(0,mySelected ? myEditor.getDocument().getTextLength() : 0);
}
