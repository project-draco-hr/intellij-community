{
  if (!abbreviationOfCurrentText) {
    myEditor.getMarkupModel().removeAllHighlighters();
  }
  myEditor.getDocument().setText(text);
  myEditor.getHighlighter().setText(text);
  ((EditorImpl)myEditor).resetSizes();
  SelectionModel selectionModel=myEditor.getSelectionModel();
  selectionModel.setSelection(0,selectionModel.hasSelection() ? myEditor.getDocument().getTextLength() : 0);
  if (!abbreviationOfCurrentText) {
    myPreferredSize=super.getPreferredSize();
  }
}
