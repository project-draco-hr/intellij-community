{
  myEditor.getMarkupModel().removeAllHighlighters();
  myEditor.getDocument().setText(text);
  myEditor.getHighlighter().setText(text);
  ((EditorImpl)myEditor).resetSizes();
  SelectionModel selectionModel=myEditor.getSelectionModel();
  selectionModel.setSelection(0,selectionModel.hasSelection() ? text.length() : 0);
  if (updatePreferredSize) {
    myPreferredSize=super.getPreferredSize();
  }
}
