{
  MyPanel panel=getEditorPanel(table);
  EditorEx editor=panel.myEditor;
  Font font=table.getFont();
  Font editorFont=editor.getColorsScheme().getFont(EditorFontType.PLAIN);
  if (!Comparing.equal(font,editorFont)) {
    editor.getColorsScheme().setEditorFontSize(font.getSize());
  }
  panel.setText(getText(((EditorImpl)editor).getFontMetrics(Font.PLAIN),table,value,row,column));
  ((EditorImpl)editor).setPaintSelection(isSelected);
  editor.getSelectionModel().setSelection(0,isSelected ? editor.getDocument().getTextLength() : 0);
  editor.getColorsScheme().setColor(EditorColors.SELECTION_BACKGROUND_COLOR,table.getSelectionBackground());
  editor.getColorsScheme().setColor(EditorColors.SELECTION_FOREGROUND_COLOR,table.getSelectionForeground());
  editor.setBackgroundColor(getCellBackgroundColor(getColorScheme(),table,isSelected,row));
  panel.setBorder(null);
  customizeEditor(editor,value,isSelected,row,column);
  return panel;
}
