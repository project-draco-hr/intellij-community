{
  if (stateElement == null)   return mergeInto;
  if (stateClass.equals(Element.class)) {
    return (T)stateElement;
  }
 else   if (JDOMExternalizable.class.isAssignableFrom(stateClass) && mergeInto == null) {
    try {
      final T t=stateClass.newInstance();
      try {
        ((JDOMExternalizable)t).readExternal(stateElement);
        return t;
      }
 catch (      InvalidDataException e) {
        throw new StateStorageException(e);
      }
    }
 catch (    InstantiationException e) {
      throw new StateStorageException(e);
    }
catch (    IllegalAccessException e) {
      throw new StateStorageException(e);
    }
  }
 else {
    if (mergeInto == null) {
      return XmlSerializer.deserialize(stateElement,stateClass);
    }
 else {
      XmlSerializer.deserializeInto(mergeInto,stateElement);
      return mergeInto;
    }
  }
}
