{
  if (SystemInfo.isWindows) {
    text=removeAllBeforeCaretReturn(text);
  }
  if (StringUtil.endsWith(text,"\n")) {
    super.notifyTextAvailable(text,resolveOutputType(text,outputType));
  }
 else {
    lastLine.append(text);
  }
}
