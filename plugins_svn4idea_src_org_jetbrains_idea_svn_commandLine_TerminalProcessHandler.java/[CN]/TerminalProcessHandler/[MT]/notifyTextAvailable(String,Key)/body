{
  terminalOutputCapturer.onTextAvailable(new ProcessEvent(this,text),outputType);
  if (SystemInfo.isWindows) {
    text=text.replaceAll(CSI_ESCAPE_CODE,"").replaceAll(NON_CSI_ESCAPE_CODE,"");
    text=StringUtil.trimLeading(text,'\r');
  }
  if (!StringUtil.isEmpty(text)) {
    StringBuilder lastLine=getLastLineFor(outputType);
    String currentLine=lastLine.append(text).toString();
    lastLine.setLength(0);
    boolean handled=false;
    for (    InteractiveCommandListener listener : myInteractiveListeners) {
      handled|=listener.handlePrompt(currentLine,outputType);
    }
    if (!handled) {
      notify(currentLine,outputType,lastLine);
    }
  }
}
