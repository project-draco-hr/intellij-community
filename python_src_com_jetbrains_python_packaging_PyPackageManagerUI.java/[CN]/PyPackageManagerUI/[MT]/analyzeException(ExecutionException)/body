{
  if (e instanceof PyExecutionException) {
    final PyExecutionException ee=(PyExecutionException)e;
    final String stdoutCause=findErrorCause(ee.getStdout());
    final String stderrCause=findErrorCause(ee.getStderr());
    final String message=stdoutCause != null ? stdoutCause : stderrCause != null ? stderrCause : ee.getMessage();
    return new ExecutionFailure(message,ee.getCommand() + " " + StringUtil.join(ee.getArgs()," "),ee.getStdout());
  }
 else {
    return new ExecutionFailure(e.getMessage(),null,null);
  }
}
