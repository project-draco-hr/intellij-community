{
  if (e instanceof PyExecutionException) {
    final PyExecutionException ee=(PyExecutionException)e;
    final String stdoutCause=findErrorCause(ee.getStdout());
    final String stderrCause=findErrorCause(ee.getStderr());
    final String message=stdoutCause != null ? stdoutCause : stderrCause != null ? stderrCause : ee.getMessage();
    final String solution;
    if ("pip".equals(ee.getCommand())) {
      solution="Try to run this command from the system terminal. Make sure that you use the correct version of 'pip' " + "installed for your Python interpreter located at '" + sdk.getHomePath() + "'.";
    }
 else {
      solution=null;
    }
    return new ExecutionFailure(message,ee.getCommand() + " " + StringUtil.join(ee.getArgs()," "),ee.getStdout(),solution);
  }
 else {
    return new ExecutionFailure(e.getMessage(),null,null,null);
  }
}
