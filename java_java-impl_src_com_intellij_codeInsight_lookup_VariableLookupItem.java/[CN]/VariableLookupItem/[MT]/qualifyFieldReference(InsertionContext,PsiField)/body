{
  context.commitDocument();
  PsiFile file=context.getFile();
  final PsiReference reference=file.findReferenceAt(context.getStartOffset());
  if (reference instanceof PsiJavaCodeReferenceElement && ((PsiJavaCodeReferenceElement)reference).isQualified()) {
    return;
  }
  PsiClass containingClass=field.getContainingClass();
  if (containingClass != null && containingClass.getName() != null) {
    OffsetKey oldStart=context.trackOffset(context.getStartOffset(),true);
    JavaCompletionUtil.insertClassReference(containingClass,file,context.getStartOffset());
    context.getDocument().insertString(context.getOffsetMap().getOffset(oldStart),".");
    PsiDocumentManager.getInstance(context.getProject()).commitDocument(context.getDocument());
  }
}
