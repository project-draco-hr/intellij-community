{
  Process process=launchTest("data");
  TestOutputReader reader=new TestOutputReader(process.getInputStream(),policy);
  process.waitFor();
  reader.stop();
  reader.waitFor();
  assertEquals(0,process.exitValue());
  if (checkLines) {
    assertEquals(Arrays.asList(TEST_DATA),reader.myLines);
  }
 else {
    assertThat(reader.myLines.size()).isGreaterThanOrEqualTo(TEST_DATA.length);
    assertThat(StringUtil.join(reader.myLines,"/")).isEqualTo(StringUtil.join(Arrays.asList(TEST_DATA),"/"));
  }
}
