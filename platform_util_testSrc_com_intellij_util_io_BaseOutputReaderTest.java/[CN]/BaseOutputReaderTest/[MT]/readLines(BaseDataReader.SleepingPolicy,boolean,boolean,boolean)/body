{
  Process process=launchTest("data");
  TestOutputReader reader=new TestOutputReader(process.getInputStream(),new BaseOutputReader.Options(){
    @Override public BaseDataReader.SleepingPolicy policy(){
      return policy;
    }
    @Override public boolean splitToLines(){
      return split;
    }
    @Override public boolean sendIncompleteLines(){
      return incomplete;
    }
    @Override public boolean withSeparators(){
      return separators;
    }
  }
);
  process.waitFor();
  reader.stop();
  reader.waitFor();
  assertEquals(0,process.exitValue());
  return reader.myLines;
}
