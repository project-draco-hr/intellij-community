{
  final HgUpdateToDialog dialog=new HgUpdateToDialog(project);
  dialog.setRoots(repos,selectedRepo,branchesAndTags);
  dialog.show();
  if (dialog.isOK()) {
    FileDocumentManager.getInstance().saveAllDocuments();
    final String updateToValue=dialog.isBranchSelected() ? dialog.getBranch().getName() : dialog.isBookmarkSelected() ? dialog.getBookmark().getName() : dialog.isTagSelected() ? dialog.getTag().getName() : dialog.getRevision();
    String title=HgVcsMessages.message("hg4idea.progress.updatingTo",updateToValue);
    runUpdateToInBackground(project,title,dialog.getRepository(),updateToValue,dialog.isRemoveLocalChanges());
  }
}
