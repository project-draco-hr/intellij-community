{
  boolean success=true;
  final HgUpdateCommand command=new HgUpdateCommand(project,root);
  command.setRevision(updateToValue);
  command.setClean(clean);
  HgCommandResult result=command.execute();
  new HgConflictResolver(project).resolve(root);
  if (HgErrorUtil.hasErrorsInCommandExecution(result)) {
    new HgCommandResultNotifier(project).notifyError(result,"","Update failed");
    success=false;
  }
  markDirtyAndHandleErrors(project,root);
  return success;
}
