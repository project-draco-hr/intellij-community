{
  final HgUpdateCommand command=new HgUpdateCommand(project,root);
  command.setRevision(updateToValue);
  command.setClean(clean);
  HgCommandResult result=command.execute();
  new HgConflictResolver(project).resolve(root);
  boolean success=!HgErrorUtil.isCommandExecutionFailed(result);
  boolean hasUnresolvedConflicts=!HgConflictResolver.findConflicts(project,root).isEmpty();
  if (!success) {
    new HgCommandResultNotifier(project).notifyError(result,"","Update failed");
  }
 else   if (hasUnresolvedConflicts) {
    new VcsNotifier(project).notifyImportantWarning("Unresolved conflicts.",HgVcsMessages.message("hg4idea.update.warning.merge.conflicts",root.getPath()));
  }
  HgErrorUtil.markDirtyAndHandleErrors(project,root);
  return success;
}
