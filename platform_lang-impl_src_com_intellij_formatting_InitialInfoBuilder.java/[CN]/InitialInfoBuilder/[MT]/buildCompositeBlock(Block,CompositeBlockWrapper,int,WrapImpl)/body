{
  final CompositeBlockWrapper wrappedRootBlock=new CompositeBlockWrapper(rootBlock,myCurrentWhiteSpace,parent);
  if (index == 0) {
    wrappedRootBlock.arrangeParentTextRange();
  }
  if (myRootBlockWrapper == null) {
    myRootBlockWrapper=wrappedRootBlock;
    myRootBlockWrapper.setIndent((IndentImpl)Indent.getNoneIndent());
  }
  boolean blocksMayBeOfInterest=false;
  if (myPositionOfInterest != -1) {
    myResult.put(wrappedRootBlock,rootBlock);
    blocksMayBeOfInterest=true;
  }
  final boolean blocksAreReadOnly=rootBlock instanceof ReadOnlyBlockContainer || blocksMayBeOfInterest;
  InitialInfoBuilderState state=new InitialInfoBuilderState(rootBlock,wrappedRootBlock,currentWrapParent,blocksAreReadOnly);
  myStates.push(state);
  return wrappedRootBlock;
}
