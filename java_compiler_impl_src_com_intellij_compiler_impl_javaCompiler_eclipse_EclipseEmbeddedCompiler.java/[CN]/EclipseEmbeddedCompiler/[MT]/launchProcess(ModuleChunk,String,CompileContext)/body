{
  @NonNls final ArrayList<String> commandLine=new ArrayList<String>();
  ApplicationManager.getApplication().runReadAction(new ThrowableComputable<Void,IOException>(){
    @Override public Void compute() throws IOException {
      final EclipseCompilerOptions options=EclipseCompilerConfiguration.getOptions(myProject,EclipseEmbeddedCompilerConfiguration.class);
      myEclipseExternalCompiler.addCommandLineOptions(commandLine,chunk,outputDir,options,false,false);
      return null;
    }
  }
);
  return new Process(){
    public OutputStream getOutputStream(){
      throw new UnsupportedOperationException();
    }
    public InputStream getInputStream(){
      return null;
    }
    public InputStream getErrorStream(){
      return null;
    }
    public void destroy(){
    }
    public int waitFor(){
      try {
        commandLine.remove("-verbose");
        String[] finalCmds=ArrayUtil.toStringArray(commandLine);
        myEclipseCompilerDriver.parseCommandLineAndCompile(finalCmds,compileContext);
        myExitCode=0;
        return myExitCode;
      }
 catch (      Exception e) {
        compileContext.addMessage(CompilerMessageCategory.ERROR,e.getMessage(),null,-1,-1);
        LOG.info(e);
        myExitCode=-1;
        return -1;
      }
    }
    public int exitValue(){
      return myExitCode;
    }
  }
;
}
