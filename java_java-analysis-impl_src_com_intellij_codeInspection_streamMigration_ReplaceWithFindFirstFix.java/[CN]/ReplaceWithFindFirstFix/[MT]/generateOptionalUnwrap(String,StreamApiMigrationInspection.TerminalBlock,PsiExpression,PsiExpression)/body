{
  PsiVariable var=tb.getVariable();
  if (!StreamApiMigrationInspection.isIdentityMapping(var,trueExpression)) {
    if (trueExpression instanceof PsiTypeCastExpression && ExpressionUtils.isNullLiteral(falseExpression)) {
      PsiTypeCastExpression castExpression=(PsiTypeCastExpression)trueExpression;
      PsiTypeElement castType=castExpression.getCastType();
      if (castType != null && StreamApiMigrationInspection.isIdentityMapping(var,castExpression.getOperand())) {
        return "(" + castType.getText() + ")"+ stream+ ".orElse(null)";
      }
    }
    stream+=".map(" + StreamApiMigrationInspection.createLambda(var,trueExpression) + ")";
  }
  stream+=".orElse(" + falseExpression.getText() + ")";
  return stream;
}
