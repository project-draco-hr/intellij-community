{
  if (!PropertiesComponent.getInstance(project).getBoolean(SHOW_UNLINKED_GRADLE_POPUP,true) || !GradleSettings.getInstance(project).getLinkedProjectsSettings().isEmpty()) {
    return;
  }
  File baseDir=VfsUtilCore.virtualToIoFile(project.getBaseDir());
  final File[] files=baseDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return FileUtil.namesEqual(GradleConstants.DEFAULT_SCRIPT_NAME,name);
    }
  }
);
  if (files != null && files.length != 0) {
    String message=String.format("%s<br>\n%s",GradleBundle.message("gradle.notifications.unlinked.project.found.msg",IMPORT_EVENT_DESCRIPTION),GradleBundle.message("gradle.notifications.do.not.show",DO_NOT_SHOW_EVENT_DESCRIPTION));
    GradleNotification.getInstance(project).showBalloon(GradleBundle.message("gradle.notifications.unlinked.project.found.title"),message,NotificationType.INFORMATION,new NotificationListener.Adapter(){
      @Override protected void hyperlinkActivated(      @NotNull Notification notification,      @NotNull HyperlinkEvent e){
        if (IMPORT_EVENT_DESCRIPTION.equals(e.getDescription())) {
          final ProjectDataManager projectDataManager=ServiceManager.getService(ProjectDataManager.class);
          GradleProjectImportBuilder gradleProjectImportBuilder=new GradleProjectImportBuilder(projectDataManager);
          final GradleProjectImportProvider gradleProjectImportProvider=new GradleProjectImportProvider(gradleProjectImportBuilder);
          AddModuleWizard wizard=new AddModuleWizard(null,files[0].getPath(),gradleProjectImportProvider);
          if ((wizard.getStepCount() <= 0 || wizard.showAndGet())) {
            ImportModuleAction.createFromWizard(project,wizard);
          }
        }
 else         if (DO_NOT_SHOW_EVENT_DESCRIPTION.equals(e.getDescription())) {
          PropertiesComponent.getInstance(project).setValue(SHOW_UNLINKED_GRADLE_POPUP,Boolean.FALSE.toString());
        }
      }
    }
);
  }
}
