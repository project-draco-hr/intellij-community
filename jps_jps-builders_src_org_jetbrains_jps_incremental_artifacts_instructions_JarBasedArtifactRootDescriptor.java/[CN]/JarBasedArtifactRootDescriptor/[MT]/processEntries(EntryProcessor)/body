{
  if (!myRoot.isFile())   return;
  String prefix=StringUtil.trimStart(myPathInJar,"/");
  if (!StringUtil.endsWithChar(prefix,'/'))   prefix+="/";
  if (prefix.equals("/")) {
    prefix="";
  }
  try {
    ZipFile zipFile=new ZipFile(myRoot);
    try {
      final Enumeration<? extends ZipEntry> entries=zipFile.entries();
      while (entries.hasMoreElements()) {
        ZipEntry entry=entries.nextElement();
        final String name=entry.getName();
        if (name.startsWith(prefix)) {
          String relativePath=name.substring(prefix.length());
          if (myPathInJarFilter.value(relativePath)) {
            processor.process(entry.isDirectory() ? null : zipFile.getInputStream(entry),relativePath,entry);
          }
        }
      }
    }
  finally {
      zipFile.close();
    }
  }
 catch (  IOException e) {
    throw new IOException("Error occurred during processing zip file " + myRoot + ": "+ e.getMessage(),e);
  }
}
