{
  Project project=e.getProject();
  if (project == null)   return;
  Editor editor=getEditor(e.getDataContext(),project,false);
  if (editor == null)   return;
  final PsiFile psiFile=PsiUtilBase.getPsiFileInEditor(editor,project);
  if (psiFile == null)   return;
  if (!ApplicationManager.getApplication().isUnitTestMode() && !editor.getContentComponent().isShowing())   return;
  getHandler().invoke(project,editor,psiFile);
}
