{
  if (assertion instanceof KnownException)   return ((KnownException)assertion).getPacketFactory();
  final ComparisonFailureData notification=JUnit4TestListener.createExceptionNotification(assertion);
  if (notification != null) {
    return ComparisonDetailsExtractor.create(assertion,notification.getExpected(),notification.getActual());
  }
  return new ExceptionPacketFactory(PoolOfTestStates.FAILED_INDEX,assertion);
}
