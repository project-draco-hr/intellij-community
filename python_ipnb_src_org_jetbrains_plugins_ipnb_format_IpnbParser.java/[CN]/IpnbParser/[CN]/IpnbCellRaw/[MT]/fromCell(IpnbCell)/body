{
  final IpnbCellRaw raw=new IpnbCellRaw();
  if (cell instanceof IpnbMarkdownCell) {
    raw.cell_type="markdown";
    raw.source=((IpnbMarkdownCell)cell).getSource();
  }
 else   if (cell instanceof IpnbCodeCell) {
    raw.cell_type="code";
    final ArrayList<CellOutputRaw> outputRaws=new ArrayList<CellOutputRaw>();
    for (    IpnbOutputCell outputCell : ((IpnbCodeCell)cell).getCellOutputs()) {
      outputRaws.add(CellOutputRaw.fromOutput(outputCell));
    }
    raw.outputs=outputRaws.toArray(new CellOutputRaw[outputRaws.size()]);
    raw.language=((IpnbCodeCell)cell).getLanguage();
    raw.input=((IpnbCodeCell)cell).getSource();
    final Integer promptNumber=((IpnbCodeCell)cell).getPromptNumber();
    raw.prompt_number=promptNumber != null && promptNumber >= 0 ? promptNumber : null;
  }
 else   if (cell instanceof IpnbRawCell) {
    raw.cell_type="raw";
  }
 else   if (cell instanceof IpnbHeadingCell) {
    raw.cell_type="heading";
    raw.source=((IpnbHeadingCell)cell).getSource();
    raw.level=((IpnbHeadingCell)cell).getLevel();
  }
  return raw;
}
