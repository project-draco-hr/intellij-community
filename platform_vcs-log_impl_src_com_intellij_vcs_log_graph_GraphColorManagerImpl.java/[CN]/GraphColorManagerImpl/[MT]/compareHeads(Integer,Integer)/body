{
  if (head1.equals(head2)) {
    return 0;
  }
  Collection<VcsRef> refs1=myRefsModel.refsToCommit(head1);
  Collection<VcsRef> refs2=myRefsModel.refsToCommit(head2);
  boolean firstEmpty=isEmptyRefs(refs1,head1);
  boolean secondEmpty=isEmptyRefs(refs2,head2);
  if (firstEmpty && secondEmpty) {
    return 0;
  }
  if (firstEmpty) {
    return 1;
  }
  if (secondEmpty) {
    return -1;
  }
  VirtualFile root1=getFirstRoot(refs1);
  VirtualFile root2=getFirstRoot(refs2);
  VcsLogRefManager refManager1=myRefManagers.get(root1);
  VcsLogRefManager refManager2=myRefManagers.get(root2);
  if (!refManager1.equals(refManager2)) {
    return root1.getPresentableUrl().compareTo(root2.getPresentableUrl());
  }
  Comparator<VcsRef> comparator=refManager1.getComparator();
  Iterator<VcsRef> it1=ContainerUtil.sorted(refs1,comparator).iterator();
  Iterator<VcsRef> it2=ContainerUtil.sorted(refs2,comparator).iterator();
  while (it1.hasNext() && it2.hasNext()) {
    VcsRef ref1=it1.next();
    VcsRef ref2=it2.next();
    int compare=comparator.compare(ref1,ref2);
    if (compare != 0) {
      return compare;
    }
  }
  if (it1.hasNext()) {
    return -1;
  }
  if (it2.hasNext()) {
    return 1;
  }
  return 0;
}
