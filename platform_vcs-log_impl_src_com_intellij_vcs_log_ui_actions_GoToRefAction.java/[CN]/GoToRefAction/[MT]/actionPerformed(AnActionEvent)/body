{
  Project project=e.getProject();
  final VcsLog log=e.getData(VcsLogDataKeys.VCS_LOG);
  VcsLogUiImpl logUi=(VcsLogUiImpl)e.getData(VcsLogDataKeys.VCS_LOG_UI);
  if (project == null || log == null || logUi == null) {
    return;
  }
  Collection<String> refs=ContainerUtil.map(log.getAllReferences(),new Function<VcsRef,String>(){
    @Override public String fun(    VcsRef ref){
      return ref.getName();
    }
  }
);
  FindPopupWithProgress popup=new FindPopupWithProgress(project,refs,new Function<String,Future>(){
    @Override public Future fun(    String text){
      return log.jumpToReference(text);
    }
  }
);
  popup.show(logUi.getTable());
}
