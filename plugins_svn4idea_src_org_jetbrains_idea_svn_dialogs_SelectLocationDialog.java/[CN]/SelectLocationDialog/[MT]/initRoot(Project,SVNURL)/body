{
  final Ref<SVNURL> result=new Ref<SVNURL>();
  final Ref<SVNException> excRef=new Ref<SVNException>();
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      try {
        result.set(SvnUtil.getRepositoryRoot(SvnVcs.getInstance(project),url));
      }
 catch (      SVNException e) {
        excRef.set(e);
      }
    }
  }
,"Detecting repository root",true,project);
  if (!excRef.isNull()) {
    throw excRef.get();
  }
  return result.get();
}
