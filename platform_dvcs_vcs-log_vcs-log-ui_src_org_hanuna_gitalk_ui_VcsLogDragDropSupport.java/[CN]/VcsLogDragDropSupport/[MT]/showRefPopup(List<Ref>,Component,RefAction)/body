{
  if (refs.size() == 1) {
    refAction.perform(refs.get(0));
  }
 else {
    JBPopupFactory.getInstance().createListPopup(new BaseListPopupStep<Ref>("Select target branch",refs.toArray(new Ref[refs.size()])){
      @NotNull @Override public String getTextFor(      Ref value){
        return value.getName();
      }
      @Override public PopupStep onChosen(      Ref selectedValue,      boolean finalChoice){
        refAction.perform(selectedValue);
        return FINAL_CHOICE;
      }
      @Override public boolean isSpeedSearchEnabled(){
        return true;
      }
    }
).showInCenterOf(popupParent);
  }
}
