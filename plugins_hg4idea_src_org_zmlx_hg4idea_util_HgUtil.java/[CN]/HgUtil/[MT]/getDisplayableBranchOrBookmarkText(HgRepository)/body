{
  HgRepository.State state=repository.getState();
  String branchText="";
  if (state != HgRepository.State.NORMAL) {
    branchText+=state.toString() + " ";
  }
  String branchOrBookMarkName=repository.getCurrentBookmark();
  if (StringUtil.isEmptyOrSpaces(branchOrBookMarkName)) {
    branchOrBookMarkName=repository.getCurrentBranch();
  }
  return branchText + branchOrBookMarkName;
}
