{
  if (localHgFile.toFilePath().getVirtualFile() == null) {
    return localHgFile;
  }
  HgLogCommand logCommand=new HgLogCommand(project);
  logCommand.setFollowCopies(true);
  try {
    return logCommand.getNameThroughCopies(localHgFile,vcsRevisionNumber);
  }
 catch (  HgCommandException e) {
    LOG.warn("Could not find filename in target revision: " + localHgFile.toString(),e);
  }
  return localHgFile;
}
