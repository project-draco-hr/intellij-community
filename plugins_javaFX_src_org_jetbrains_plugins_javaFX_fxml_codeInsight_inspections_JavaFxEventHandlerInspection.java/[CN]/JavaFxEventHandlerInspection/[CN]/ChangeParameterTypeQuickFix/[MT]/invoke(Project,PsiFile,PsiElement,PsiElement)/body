{
  if (!FileModificationService.getInstance().prepareFileForWrite(file))   return;
  if (!(startElement instanceof PsiMethod))   return;
  final PsiMethod method=(PsiMethod)startElement;
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  final String parameterName=parameters.length >= 1 ? parameters[0].getName() : "e";
  final ParameterInfoImpl parameterInfo=new ParameterInfoImpl(0,parameterName,mySuggestedParameterType);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    final ChangeSignatureProcessor processor=new ChangeSignatureProcessor(project,method,false,null,method.getName(),method.getReturnType(),new ParameterInfoImpl[]{parameterInfo});
    processor.run();
  }
 else {
    final List<ParameterInfoImpl> parameterInfos=Collections.singletonList(parameterInfo);
    final JavaChangeSignatureDialog dialog=JavaChangeSignatureDialog.createAndPreselectNew(project,method,parameterInfos,false,null);
    dialog.setParameterInfos(parameterInfos);
    dialog.show();
  }
}
