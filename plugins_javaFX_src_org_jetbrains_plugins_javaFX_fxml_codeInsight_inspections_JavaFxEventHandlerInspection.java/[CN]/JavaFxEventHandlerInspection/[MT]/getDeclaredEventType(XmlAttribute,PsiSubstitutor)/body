{
  final PsiClass tagClass=getTagClass(attribute.getParent());
  if (tagClass == null)   return null;
  final PsiType eventHandlerPropertyType=JavaFxPsiUtil.getEventHandlerPropertyType(tagClass,attribute.getName());
  if (eventHandlerPropertyType == null)   return null;
  final PsiType handlerType=tagClassSubstitutor != null ? tagClassSubstitutor.substitute(eventHandlerPropertyType) : eventHandlerPropertyType;
  if (handlerType instanceof PsiClassType) {
    final PsiType eventType=JavaFxPsiUtil.substituteEventType((PsiClassType)handlerType,tagClass.getProject());
    if (eventType instanceof PsiClassType) {
      return (PsiClassType)eventType;
    }
    if (eventType instanceof PsiWildcardType) {
      PsiWildcardType wildcardType=(PsiWildcardType)eventType;
      if (wildcardType.isSuper()) {
        final PsiType bound=wildcardType.getBound();
        if (bound instanceof PsiClassType)         return (PsiClassType)bound;
      }
    }
  }
  return null;
}
