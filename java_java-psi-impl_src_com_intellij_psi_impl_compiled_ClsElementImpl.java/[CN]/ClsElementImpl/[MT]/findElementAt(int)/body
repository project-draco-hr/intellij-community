{
  PsiElement mirror=getMirror();
  if (mirror == null)   return null;
  PsiElement mirrorAt=mirror.findElementAt(offset);
  while (true) {
    if (mirrorAt == null || mirrorAt instanceof PsiFile)     return null;
    PsiElement elementAt=mirrorToElement(mirrorAt);
    if (elementAt != null)     return elementAt;
    mirrorAt=mirrorAt.getParent();
  }
}
