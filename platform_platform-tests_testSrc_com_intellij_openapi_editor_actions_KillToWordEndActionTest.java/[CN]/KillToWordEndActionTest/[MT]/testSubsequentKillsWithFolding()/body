{
  String text="public class ParentCopy {\n" + "        public Insets getBorderInsets(<caret>Component c) {\n" + "        }\n"+ "    }";
  configureFromFileText(getTestName(false) + ".java",text);
  final FoldingModel model=myEditor.getFoldingModel();
  model.runBatchFoldingOperation(new Runnable(){
    @Override public void run(){
      final FoldRegion foldRegion=model.addFoldRegion(70,90,"");
      assertNotNull(foldRegion);
      foldRegion.setExpanded(false);
      assertFalse(foldRegion.isExpanded());
    }
  }
);
  cutToLineEnd();
  cutToLineEnd();
  model.runBatchFoldingOperationDoNotCollapseCaret(new Runnable(){
    @Override public void run(){
      final FoldRegion[] regions=model.getAllFoldRegions();
      for (      FoldRegion region : regions) {
        assertNotNull(region);
        region.setExpanded(true);
      }
    }
  }
);
  cutToLineEnd();
  cutToLineEnd();
  checkResultByText("public class ParentCopy {\n" + "        public Insets getBorderInsets(    }");
  Object string=getContents();
  assertEquals("Component c) {\n        }\n",string);
}
