{
  long taskNumber=myCurrentTaskIndex++;
  MultiMap<VirtualFile,Integer> commits=getCommitsAround(row,tableModel,UP_PRELOAD_COUNT,DOWN_PRELOAD_COUNT);
  for (  Map.Entry<VirtualFile,Collection<Integer>> hashesByRoots : commits.entrySet()) {
    VirtualFile root=hashesByRoots.getKey();
    Collection<Integer> hashes=hashesByRoots.getValue();
    for (    final int commitId : hashes) {
      if (!myCache.isKeyCached(commitId)) {
        myCache.put(commitId,(T)new LoadingDetails(new Computable<Hash>(){
          @Override public Hash compute(){
            return myHashMap.getCommitId(commitId).getHash();
          }
        }
,taskNumber,root));
      }
    }
  }
  TaskDescriptor task=new TaskDescriptor(commits);
  myLoader.queue(task);
}
