{
  boolean newConfigFolder=false;
  if (!Main.isHeadless()) {
    AppUIUtil.updateFrameClass();
    newConfigFolder=PathManager.ensureConfigFolderExists(true);
    if (newConfigFolder) {
      ConfigImportHelper.importConfigsTo(PathManager.getConfigPath());
    }
  }
  boolean canStart=checkJdkVersion() && checkSystemFolders() && lockSystemFolders(args);
  if (!canStart) {
    System.exit(Main.STARTUP_IMPOSSIBLE);
  }
  Logger.setFactory(LoggerFactory.getInstance());
  Logger log=Logger.getInstance(Main.class);
  startLogging(log);
  fixProcessEnvironment(log);
  loadSystemLibraries(log);
  if (!Main.isHeadless()) {
    AppUIUtil.updateWindowIcon(JOptionPane.getRootFrame());
    AppUIUtil.registerBundledFonts();
  }
  appStarter.start(newConfigFolder);
}
