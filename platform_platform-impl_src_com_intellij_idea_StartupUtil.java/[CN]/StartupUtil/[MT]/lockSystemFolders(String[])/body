{
  if (ourSocketLock != null) {
    throw new AssertionError();
  }
  ourSocketLock=new SocketLock(PathManager.getConfigPath(),PathManager.getSystemPath());
  SocketLock.ActivateStatus status;
  try {
    status=ourSocketLock.lock(args);
  }
 catch (  Exception e) {
    Main.showMessage("Cannot Lock System Folders",e);
    return false;
  }
  if (status == SocketLock.ActivateStatus.NO_INSTANCE) {
    ShutDownTracker.getInstance().registerShutdownTask(new Runnable(){
      @SuppressWarnings("AssignmentToStaticFieldFromInstanceMethod") @Override public void run(){
synchronized (StartupUtil.class) {
          ourSocketLock.dispose();
          ourSocketLock=null;
        }
      }
    }
);
    return true;
  }
 else   if (Main.isHeadless() || status == SocketLock.ActivateStatus.CANNOT_ACTIVATE) {
    String message="Only one instance of " + ApplicationNamesInfo.getInstance().getFullProductName() + " can be run at a time.";
    Main.showMessage("Too Many Instances",message,true);
  }
  if (status == SocketLock.ActivateStatus.ACTIVATED) {
    System.out.println("Already running");
    System.exit(0);
  }
  return false;
}
