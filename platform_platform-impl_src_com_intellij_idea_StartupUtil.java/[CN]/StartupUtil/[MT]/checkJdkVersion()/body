{
  String jreCheck=System.getProperty("idea.jre.check");
  if (jreCheck != null && "true".equals(jreCheck)) {
    try {
      Class.forName("com.sun.jdi.Field",false,StartupUtil.class.getClassLoader());
    }
 catch (    ClassNotFoundException e) {
      String message="'tools.jar' seems to be not in " + ApplicationNamesInfo.getInstance().getProductName() + " classpath.\n"+ "Please ensure JAVA_HOME points to JDK rather than JRE.";
      Main.showMessage("JDK Required",message,true);
      return false;
    }
catch (    LinkageError e) {
      String message="Cannot load a class from 'tools.jar': " + e.getMessage() + "\n"+ "Please ensure JAVA_HOME points to JDK rather than JRE.";
      Main.showMessage("JDK Required",message,true);
      return false;
    }
    if (StringUtil.containsIgnoreCase(System.getProperty("java.vm.name",""),"OpenJDK") && !SystemInfo.isJavaVersionAtLeast("1.7")) {
      String message="OpenJDK 6 is not supported. Please use Oracle Java or newer OpenJDK.";
      Main.showMessage("Unsupported JVM",message,true);
      return false;
    }
  }
  jreCheck=System.getProperty("idea.64bit.check");
  if (jreCheck != null && "true".equals(jreCheck)) {
    if (PlatformUtils.isCidr() && !SystemInfo.is64Bit) {
      String message="32-bit JVM is not supported. Please install 64-bit version.";
      Main.showMessage("Unsupported JVM",message,true);
      return false;
    }
  }
  return true;
}
