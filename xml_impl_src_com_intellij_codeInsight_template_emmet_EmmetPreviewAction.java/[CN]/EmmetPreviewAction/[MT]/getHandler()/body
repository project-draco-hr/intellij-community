{
  return new CodeInsightActionHandler(){
    @Override public void invoke(    @NotNull Project project,    @NotNull Editor editor,    @NotNull PsiFile file){
      String templateText=EmmetPreviewUtil.calculateTemplateText(editor,file,true);
      if (StringUtil.isEmpty(templateText)) {
        CommonRefactoringUtil.showErrorHint(project,editor,"Cannot show preview for given abbreviation","Emmet Preview",null);
        return;
      }
      EmmetPreviewHint.createHint((EditorEx)editor,templateText,file.getFileType()).showHint();
      EmmetPreviewUtil.addEmmetPreviewListeners(editor,file,true);
    }
    @Override public boolean startInWriteAction(){
      return false;
    }
  }
;
}
