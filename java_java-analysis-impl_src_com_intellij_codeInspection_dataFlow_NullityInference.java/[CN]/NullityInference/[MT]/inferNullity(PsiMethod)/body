{
  if (!InferenceFromSourceUtil.shouldInferFromSource(method)) {
    return Nullness.UNKNOWN;
  }
  PsiType type=method.getReturnType();
  if (type == null || type instanceof PsiPrimitiveType) {
    return Nullness.UNKNOWN;
  }
  return CachedValuesManager.getCachedValue(method,new CachedValueProvider<Nullness>(){
    @Nullable @Override public Result<Nullness> compute(){
      Nullness result=RecursionManager.doPreventingRecursion(method,true,new Computable<Nullness>(){
        @Override public Nullness compute(){
          return doInferNullity(method);
        }
      }
);
      if (result == null)       result=Nullness.UNKNOWN;
      return Result.create(result,method,PsiModificationTracker.JAVA_STRUCTURE_MODIFICATION_COUNT);
    }
  }
);
}
