{
  ProcessListener restarterListener=ON_TERMINATION_RESTARTER_KEY.get(processHandler);
  if (restarterListener != null) {
    clearRestarterListener(processHandler);
  }
  restarterListener=new ProcessAdapter(){
    @Override public void processTerminated(    ProcessEvent event){
      clearRestarterListener(processHandler);
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          if (isAutoTestEnabledForDescriptor(descriptor) && documentWatcher.isUpToDate(modificationStamp)) {
            restart(descriptor);
          }
        }
      }
,ModalityState.any());
    }
  }
;
  ON_TERMINATION_RESTARTER_KEY.set(processHandler,restarterListener);
  processHandler.addProcessListener(restarterListener);
}
