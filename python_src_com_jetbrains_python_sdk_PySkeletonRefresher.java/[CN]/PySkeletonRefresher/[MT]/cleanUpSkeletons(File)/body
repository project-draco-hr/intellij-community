{
  indicateMinor(dir.getPath());
  final File[] files=dir.listFiles();
  if (files == null) {
    return;
  }
  for (  File item : files) {
    if (item.isDirectory()) {
      cleanUpSkeletons(item);
      File[] remaining=item.listFiles();
      if (remaining != null && remaining.length == 0) {
        mySkeletonsGenerator.deleteOrLog(item);
      }
 else       if (remaining != null && remaining.length == 1) {
        File lastFile=remaining[0];
        if (PyNames.INIT_DOT_PY.equals(lastFile.getName()) && lastFile.length() == 0) {
          boolean deleted=mySkeletonsGenerator.deleteOrLog(lastFile);
          if (deleted)           mySkeletonsGenerator.deleteOrLog(item);
        }
      }
    }
 else     if (item.isFile()) {
      final String itemName=item.getName();
      if (PyNames.INIT_DOT_PY.equals(itemName) && item.length() == 0)       continue;
      if (BLACKLIST_FILE_NAME.equals(itemName))       continue;
      final SkeletonHeader header=readSkeletonHeader(item);
      boolean canLive=header != null;
      if (canLive) {
        final String binaryFile=header.getBinaryFile();
        final String builtinsFileName=PythonSdkType.getBuiltinsFileName(mySdk);
        canLive=SkeletonVersionChecker.BUILTIN_NAME.equals(binaryFile) || builtinsFileName.equals(itemName) || mySkeletonsGenerator.exists(binaryFile);
      }
      if (!canLive) {
        mySkeletonsGenerator.deleteOrLog(item);
      }
    }
  }
}
