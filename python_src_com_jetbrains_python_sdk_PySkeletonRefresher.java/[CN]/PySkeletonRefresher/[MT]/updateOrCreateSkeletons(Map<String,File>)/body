{
  final List<String> names=new ArrayList<String>(modules.keySet());
  Collections.sort(names);
  final List<UpdateResult> results=new ArrayList<UpdateResult>();
  final int count=names.size();
  for (int i=0; i < count; i++) {
    checkCanceled();
    if (myIndicator != null) {
      myIndicator.setFraction((double)i / count);
    }
    final String name=names.get(i);
    final File module=modules.get(name);
    if (module != null) {
      updateOrCreateSkeleton(name,module.getPath(),results);
    }
  }
  return results;
}
