{
  long startTime=System.currentTimeMillis();
  final List<String> names=Lists.newArrayList(modules.keySet());
  Collections.sort(names);
  final List<UpdateResult> results=new ArrayList<UpdateResult>();
  final int count=names.size();
  for (int i=0; i < count; i++) {
    checkCanceled();
    if (myIndicator != null) {
      myIndicator.setFraction((double)i / count);
    }
    final String name=names.get(i);
    final PyBinaryItem module=modules.get(name);
    if (module != null) {
      updateOrCreateSkeleton(module,results);
    }
  }
  finishSkeletonsGeneration();
  long doneInMs=System.currentTimeMillis() - startTime;
  LOG.info("Rebuilding skeletons for binaries took " + doneInMs + " ms");
  return results;
}
