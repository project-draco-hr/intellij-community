{
  PassReceiver passReceiver=new PassReceiver(myProject,forceAuthorization,myState);
  SocketServer passServer=new SocketServer(passReceiver);
  try {
    int passPort=passServer.start();
    HgCommandResult result=super.executeInCurrentThread(repo,operation,prepareArguments(arguments,passPort));
    if (!HgErrorUtil.isAuthorizationError(result)) {
      passReceiver.saveCredentials();
    }
    return result;
  }
 catch (  IOException e) {
    showError(e);
    LOG.info("IOException during preparing command",e);
    return null;
  }
 finally {
    passServer.stop();
  }
}
