{
  if (!FileModificationService.getInstance().preparePsiElementsForWrite(Arrays.asList(myPsiFiles)))   return;
  final RunResult[] results={result};
  doExecuteCommand(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          results[0].run();
          results[0]=null;
        }
      }
);
    }
  }
);
}
