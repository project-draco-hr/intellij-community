{
  int subsequentIdz=mySelected;
  while (true) {
    subsequentIdz+=next ? 1 : -1;
    subsequentIdz+=myChildren.length;
    subsequentIdz%=myChildren.length;
    if (mySelected == subsequentIdz) {
      throw new IllegalStateException("Selection is unavailable");
    }
    ProblemDescriptorBase descriptorBase=myChildren[subsequentIdz];
    if (descriptorBase.getPsiElement().isValid()) {
      mySelected=subsequentIdz;
      PsiElement toSelect=descriptorBase.getPsiElement();
      myEditor.getCaretModel().moveToOffset(toSelect.getTextOffset());
      myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
      myEditor.getSelectionModel().setSelection(toSelect.getTextRange().getStartOffset(),toSelect.getTextRange().getEndOffset());
      return;
    }
  }
}
