{
  if (myDebugPort > -1) {
    int debugAddress=findAvailableSocketPort();
    boolean found=false;
    for (int i=0; i < parameters.size(); i++) {
      String parameter=(String)parameters.get(i);
      final String debuggerParam="transport=dt_socket";
      final int indexOf=parameter.indexOf(debuggerParam);
      if (indexOf >= 0) {
        if (debugAddress > -1) {
          parameter=parameter.substring(0,indexOf) + "transport=dt_socket,server=n,suspend=y,address=" + debugAddress;
          parameters.set(i,parameter);
          found=true;
        }
 else {
          parameters.remove(parameter);
        }
        break;
      }
    }
    if (!found) {
      parameters.add("-agentlib:jdwp=transport=dt_socket,server=n,suspend=y,address=" + debugAddress);
    }
    if (debugAddress > -1) {
      Socket socket=getDebugSocket();
      DataOutputStream stream=new DataOutputStream(socket.getOutputStream());
      stream.writeInt(debugAddress);
      int read=socket.getInputStream().read();
    }
  }
}
