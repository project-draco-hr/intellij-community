{
  configureByFile(BASE_PATH + fileName + ".java");
  SurroundDescriptor item=ContainerUtil.getFirstItem(LanguageSurrounders.INSTANCE.allForLanguage(JavaLanguage.INSTANCE));
  assertNotNull(item);
  SelectionModel selectionModel=getEditor().getSelectionModel();
  PsiElement[] elements=item.getElementsToSurround(getFile(),selectionModel.getSelectionStart(),selectionModel.getSelectionEnd());
  assertTrue(surrounder.isApplicable(elements));
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      SurroundWithHandler.invoke(getProject(),getEditor(),getFile(),surrounder);
    }
  }
);
  checkResultByFile(BASE_PATH + fileName + "_after.java");
}
