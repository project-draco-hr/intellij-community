{
  try {
    IcsSettings settings=IcsManager.getInstance().getIdeaServerSettings();
    myProxySettingsPanel.apply();
    settings.update(myLogin.getText(),new String(myPassword.getPassword()));
    IcsManager.getInstance().connectAndUpdateStorage();
    closeDialog(true);
  }
 catch (  Exception e) {
    showErrorMessage(prepareMessage(exceptionMessage(e)),onTimer);
    if (onTimer) {
      closeDialog(true);
    }
 else {
      myTimerLabel.stopCounter();
    }
  }
}
