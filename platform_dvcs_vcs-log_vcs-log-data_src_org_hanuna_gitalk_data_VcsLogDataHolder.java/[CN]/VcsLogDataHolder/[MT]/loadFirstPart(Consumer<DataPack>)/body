{
  runInBackground(new ThrowableConsumer<ProgressIndicator,VcsException>(){
    @Override public void consume(    ProgressIndicator indicator) throws VcsException {
      List<? extends VcsCommitDetails> commits=myLogProvider.readFirstBlock(myRoot);
      Collection<Ref> refs=myLogProvider.readAllRefs(myRoot);
      myDetailsGetter.saveInCache(commits);
      myMiniDetailsGetter.saveInCache(commits);
      myDataPack=DataPack.build(commits,refs,indicator);
      UIUtil.invokeAndWaitIfNeeded(new Runnable(){
        @Override public void run(){
          onSuccess.consume(myDataPack);
        }
      }
);
    }
  }
);
}
