{
  if (cellEditor != null && !cellEditor.stopCellEditing()) {
    return false;
  }
  if (row < 0 || row >= getRowCount() || column < 0 || column >= getColumnCount()) {
    return false;
  }
  if (!isCellEditable(row,column)) {
    return false;
  }
  if (e instanceof KeyEvent && UIUtil.isReallyTypedEvent((KeyEvent)e)) {
    SpeedSearchSupply supply=SpeedSearchSupply.getSupply(this);
    if (supply != null && supply.isPopupActive()) {
      return false;
    }
  }
  if (myEditorRemover == null) {
    final KeyboardFocusManager keyboardFocusManager=KeyboardFocusManager.getCurrentKeyboardFocusManager();
    myEditorRemover=new MyCellEditorRemover();
    keyboardFocusManager.addPropertyChangeListener("focusOwner",myEditorRemover);
    keyboardFocusManager.addPropertyChangeListener("permanentFocusOwner",myEditorRemover);
  }
  final TableCellEditor editor=getCellEditor(row,column);
  if (editor != null && editor.isCellEditable(e)) {
    editorComp=prepareEditor(editor,row,column);
    if (editorComp == null) {
      removeEditor();
      return false;
    }
    editorComp.setBounds(getCellRect(row,column,false));
    add(editorComp);
    editorComp.validate();
    if (surrendersFocusOnKeyStroke()) {
      final IdeFocusManager focusManager=IdeFocusManager.findInstanceByComponent(this);
      focusManager.setTypeaheadEnabled(false);
      focusManager.requestFocus(editorComp,true).doWhenProcessed(new Runnable(){
        @Override public void run(){
          focusManager.setTypeaheadEnabled(true);
        }
      }
);
    }
    setCellEditor(editor);
    setEditingRow(row);
    setEditingColumn(column);
    editor.addCellEditorListener(this);
    return true;
  }
  return false;
}
