{
  for (  AnAction action : getChildActionsOrStubs()) {
    if (action instanceof ExecuteExternalSystemRunConfigurationAction) {
      remove(action);
    }
  }
  final Project project=CommonDataKeys.PROJECT.getData(e.getDataContext());
  final List<ExternalSystemNode> selectedNodes=ExternalSystemDataKeys.SELECTED_NODES.getData(e.getDataContext());
  if (selectedNodes == null || selectedNodes.size() != 1 || !(selectedNodes.get(0) instanceof RunConfigurationNode))   return;
  final RunnerAndConfigurationSettings settings=((RunConfigurationNode)selectedNodes.get(0)).getSettings();
  if (settings == null || project == null)   return;
  Executor[] executors=ExecutorRegistry.getInstance().getRegisteredExecutors();
  for (int i=executors.length; --i >= 0; ) {
    final ProgramRunner runner=RunnerRegistry.getInstance().getRunner(executors[i].getId(),settings.getConfiguration());
    AnAction action=new ExecuteExternalSystemRunConfigurationAction(executors[i],runner != null,project,settings);
    addAction(action,Constraints.FIRST);
  }
  super.update(e);
}
