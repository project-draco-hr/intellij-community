{
  myRepository.setUrl(url);
  Task task=myRepository.findTask(key);
  try {
    myRepository.setTaskState(task,TaskState.IN_PROGRESS);
    task=myRepository.findTask(key);
    assertEquals(task.getState(),TaskState.IN_PROGRESS);
    myRepository.setTaskState(task,TaskState.RESOLVED);
    task=myRepository.findTask(key);
    assertEquals(task.getState(),TaskState.RESOLVED);
    myRepository.setTaskState(task,TaskState.REOPENED);
    assertEquals(myRepository.findTask(key).getState(),TaskState.REOPENED);
  }
 catch (  Exception e) {
    try {
      myRepository.setTaskState(task,TaskState.RESOLVED);
    }
 catch (    Exception ignored) {
    }
    try {
      myRepository.setTaskState(task,TaskState.REOPENED);
    }
 catch (    Exception ignored) {
    }
    throw e;
  }
}
