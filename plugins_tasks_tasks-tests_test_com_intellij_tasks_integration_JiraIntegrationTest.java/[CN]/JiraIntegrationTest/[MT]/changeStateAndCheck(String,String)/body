{
  myRepository.setUrl(url);
  Task task=myRepository.findTask(key);
  assertNotNull("Test task not found",task);
  assertEquals(String.format("Initial state of test task '%s' should be 'Reopened'",key),TaskState.REOPENED,task.getState());
  try {
    myRepository.setTaskState(task,TaskState.RESOLVED);
    task=myRepository.findTask(key);
    assertEquals(task.getState(),TaskState.RESOLVED);
  }
  finally {
    try {
      myRepository.setTaskState(task,TaskState.REOPENED);
    }
 catch (    Exception ignored) {
    }
  }
}
