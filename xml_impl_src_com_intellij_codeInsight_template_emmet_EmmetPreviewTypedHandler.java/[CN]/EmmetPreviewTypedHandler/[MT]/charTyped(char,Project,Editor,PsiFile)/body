{
  if (EmmetOptions.getInstance().isPreviewEnabled()) {
    EmmetPreviewHint existingBalloon=EmmetPreviewHint.getExistingHint(editor);
    if (existingBalloon == null) {
      String templateText=EmmetPreviewUtil.calculateTemplateText(editor,file,false);
      if (StringUtil.isNotEmpty(templateText)) {
        EmmetPreviewHint.createHint(editor,templateText,file.getFileType()).showHint();
        EmmetPreviewUtil.addEmmetPreviewListeners(editor,file,false);
      }
    }
  }
  return super.charTyped(c,project,editor,file);
}
