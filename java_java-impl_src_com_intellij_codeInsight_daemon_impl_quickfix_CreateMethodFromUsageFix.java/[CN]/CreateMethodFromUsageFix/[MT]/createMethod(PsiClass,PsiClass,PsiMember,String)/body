{
  JVMElementFactory factory=JVMElementFactories.getFactory(targetClass.getLanguage(),targetClass.getProject());
  if (factory == null) {
    return null;
  }
  PsiMethod method=factory.createMethod(methodName,PsiType.VOID);
  if (targetClass.equals(parentClass)) {
    method=(PsiMethod)targetClass.addAfter(method,enclosingContext);
  }
 else {
    PsiElement anchor=enclosingContext;
    while (anchor != null && anchor.getParent() != null && !anchor.getParent().equals(targetClass)) {
      anchor=anchor.getParent();
    }
    if (anchor != null && anchor.getParent() == null)     anchor=null;
    if (anchor != null) {
      method=(PsiMethod)targetClass.addAfter(method,anchor);
    }
 else {
      method=(PsiMethod)targetClass.add(method);
    }
  }
  return method;
}
