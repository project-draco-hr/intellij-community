{
  if (project != null && (!project.isDefault()) && project.getBaseDir() != null && VfsUtil.isAncestor(project.getBaseDir(),mapRoot,false)) {
    mapRoot.refresh(false,false);
    final String path=mapRoot.equals(project.getBaseDir()) ? "" : mapRoot.getPath();
    ProjectLevelVcsManager manager=ProjectLevelVcsManager.getInstance(project);
    manager.setDirectoryMappings(VcsUtil.addMapping(manager.getDirectoryMappings(),path,HgVcs.VCS_NAME));
    manager.updateActiveVcss();
  }
}
