{
  if (ApplicationManager.getApplication().isHeadlessEnvironment()) {
    return new EmptyProgressIndicator();
  }
 else   if (showProgressInLog()) {
    return new VcsLogProgressIndicator();
  }
 else {
    return new BackgroundableProcessIndicator(task);
  }
}
