{
  JCheckBox checkbox=(JCheckBox)value;
  Color textColor=getForeground(isSelected);
  Color backgroundColor=getBackground(isSelected);
  Font font=getFont();
  boolean shouldAdjustColors=!UIUtil.isUnderNimbusLookAndFeel();
  if (shouldAdjustColors) {
    checkbox.setBackground(backgroundColor);
    checkbox.setForeground(textColor);
  }
  checkbox.setEnabled(isEnabled());
  checkbox.setFont(font);
  checkbox.setFocusPainted(false);
  checkbox.setBorderPainted(false);
  checkbox.setOpaque(true);
  String auxText=getSecondaryText(index);
  JComponent rootComponent;
  if (auxText != null) {
    JPanel panel=new JPanel(new BorderLayout());
    panel.add(checkbox,BorderLayout.LINE_START);
    JLabel infoLabel=new JLabel(auxText,SwingConstants.RIGHT);
    infoLabel.setBorder(new EmptyBorder(0,0,0,checkbox.getInsets().left));
    infoLabel.setFont(UIUtil.getFont(UIUtil.FontSize.SMALL,font));
    panel.add(infoLabel,BorderLayout.CENTER);
    if (shouldAdjustColors) {
      panel.setBackground(backgroundColor);
      infoLabel.setForeground(isSelected ? textColor : JBColor.GRAY);
      infoLabel.setBackground(backgroundColor);
    }
    rootComponent=panel;
  }
 else {
    rootComponent=checkbox;
  }
  rootComponent.setBorder(isSelected ? mySelectedBorder : myBorder);
  rootComponent=adjustRendering(rootComponent,checkbox,index,isSelected,cellHasFocus);
  return rootComponent;
}
