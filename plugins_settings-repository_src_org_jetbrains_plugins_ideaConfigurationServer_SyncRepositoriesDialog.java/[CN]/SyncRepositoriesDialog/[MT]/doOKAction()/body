{
  SyncType syncType=null;
  if (mergeRadioButton.isSelected()) {
    syncType=SyncType.MERGE;
  }
 else   if (resetToTheirsRadioButton.isSelected()) {
    syncType=SyncType.REBASE_TO_THEIRS;
  }
 else   if (resetToYoursRadioButton.isSelected()) {
    syncType=SyncType.REBASE_TO_YOURS;
  }
  super.doOKAction();
  if (syncType != null) {
    IcsManager.getInstance().sync(syncType).doWhenDone(new Runnable(){
      @Override public void run(){
        Messages.showInfoMessage(parent,IcsBundle.message("sync.done.message"),IcsBundle.message("sync.done.title"));
      }
    }
).doWhenRejected(new Consumer<String>(){
      @Override public void consume(      String error){
        Messages.showErrorDialog(parent,IcsBundle.message("sync.rejected.message",StringUtil.notNullize(error,"Internal error")),IcsBundle.message("sync.rejected.title"));
      }
    }
);
  }
}
