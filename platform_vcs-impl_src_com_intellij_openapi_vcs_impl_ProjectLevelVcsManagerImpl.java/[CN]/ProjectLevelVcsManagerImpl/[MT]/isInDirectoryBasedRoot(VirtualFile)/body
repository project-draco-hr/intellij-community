{
  if (file != null && ProjectUtil.isDirectoryBased(myProject)) {
    VirtualFile baseDir=myProject.getBaseDir();
    if (baseDir != null) {
      VirtualFile ideaDir=baseDir.findChild(Project.DIRECTORY_STORE_FOLDER);
      return ideaDir != null && ideaDir.isValid() && ideaDir.isDirectory() && VfsUtilCore.isAncestor(ideaDir,file,false);
    }
  }
  return false;
}
