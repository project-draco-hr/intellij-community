{
  Set<Language> languages=new HashSet<Language>();
  NodeIterator iterator=compiledPattern.getNodes();
  while (iterator.hasNext()) {
    PsiElement element=iterator.current();
    StructuralSearchProfile profile=StructuralSearchUtil.getProfileByPsiElement(element);
    languages.add(profile != null ? profile.getLanguage(element) : element.getLanguage());
    iterator.advance();
  }
  iterator.reset();
  return languages;
}
