{
  myDataManager=dataManager;
  myToolWindowManager=(ToolWindowManagerImpl)ToolWindowManager.getInstance(project);
  myToolWindow=ObjectUtils.assertNotNull((ToolWindowImpl)myToolWindowManager.getToolWindow(TOOLWINDOW_ID));
  Disposer.register(dataManager,this);
  myPostponedEventsListener=new MyRefreshPostponedEventsListener();
  myToolWindow.getContentManager().addContentManagerListener(myPostponedEventsListener);
  myToolWindowManager.addToolWindowManagerListener(myPostponedEventsListener);
  myDataManager.addDataPackChangeListener(new DataPackChangeListener(){
    @Override public void onDataPackChange(    @NotNull DataPack dataPack){
      for (      Map.Entry<String,VcsLogFilterer> tabAndFilterer : myTabToFiltererMap.entrySet()) {
        dataPackArrived(tabAndFilterer.getValue(),isTabVisible(tabAndFilterer.getKey()));
      }
    }
  }
);
}
