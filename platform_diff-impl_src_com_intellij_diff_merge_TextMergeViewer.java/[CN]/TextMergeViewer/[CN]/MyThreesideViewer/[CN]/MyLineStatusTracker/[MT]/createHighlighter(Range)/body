{
  myApplication.assertIsDispatchThread();
  if (range.getHighlighter() != null) {
    LOG.error("Multiple highlighters registered for the same Range");
    return;
  }
  int first=range.getLine1() < getLineCount(myDocument) ? myDocument.getLineStartOffset(range.getLine1()) : myDocument.getTextLength();
  int second=range.getLine2() < getLineCount(myDocument) ? myDocument.getLineStartOffset(range.getLine2()) : myDocument.getTextLength();
  MarkupModel markupModel=getEditor().getMarkupModel();
  RangeHighlighter highlighter=LineStatusMarkerRenderer.createRangeHighlighter(range,new TextRange(first,second),markupModel);
  highlighter.setLineMarkerRenderer(new MyLineStatusMarkerRenderer(range));
  range.setHighlighter(highlighter);
}
