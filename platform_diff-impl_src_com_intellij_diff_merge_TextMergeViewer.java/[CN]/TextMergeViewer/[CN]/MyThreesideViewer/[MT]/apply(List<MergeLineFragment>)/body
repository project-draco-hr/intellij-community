{
  return new Runnable(){
    @Override public void run(){
      setInitialOutputContent();
      clearDiffPresentation();
      resetChangeCounters();
      for (      MergeLineFragment fragment : fragments) {
        TextMergeChange change=new TextMergeChange(fragment,TextMergeViewer.this);
        myAllMergeChanges.add(change);
        onChangeAdded(change);
      }
      myInitialScrollHelper.onRediff();
      myContentPanel.repaintDividers();
      myStatusPanel.update();
      getEditor().setViewer(false);
      myInnerDiffWorker.onSettingsChanged();
      myInitialRediffFinished=true;
    }
  }
;
}
