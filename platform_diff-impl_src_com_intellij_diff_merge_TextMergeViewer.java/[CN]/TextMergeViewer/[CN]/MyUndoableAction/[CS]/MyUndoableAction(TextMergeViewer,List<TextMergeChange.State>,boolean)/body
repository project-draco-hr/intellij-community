{
  super(viewer.getViewer().getEditor().getDocument());
  myViewerRef=new WeakReference<>(viewer);
  myStates=states;
  myUndo=undo;
}
