{
  LOG.assertTrue(myAction2Id.containsKey(stub));
  myAction2Id.remove(stub);
  LOG.assertTrue(myId2Action.containsKey(stub.getId()));
  AnAction action=myId2Action.remove(stub.getId());
  LOG.assertTrue(action != null);
  LOG.assertTrue(action.equals(stub));
  AnAction anAction=convertStub(stub);
  addToMap(stub.getId(),anAction,stub.getPluginId(),stub.getProjectType() == null ? null : new ProjectType(stub.getProjectType()));
  myAction2Id.put(anAction,stub.getId());
  return anAction;
}
