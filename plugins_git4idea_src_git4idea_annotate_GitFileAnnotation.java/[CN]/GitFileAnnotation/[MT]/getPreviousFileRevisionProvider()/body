{
  return new PreviousFileRevisionProvider(){
    @Nullable @Override public VcsFileRevision getPreviousRevision(    int lineNumber){
      LineInfo lineInfo=getLineInfo(lineNumber);
      if (lineInfo == null)       return null;
      VcsFileRevision previousFileRevision=lineInfo.getPreviousFileRevision();
      if (previousFileRevision != null)       return previousFileRevision;
      GitRevisionNumber revisionNumber=lineInfo.getRevisionNumber();
      if (myRevisions != null && myRevisionMap != null && myRevisionMap.contains(revisionNumber)) {
        int index=myRevisionMap.get(revisionNumber);
        if (index + 1 < myRevisions.size()) {
          return myRevisions.get(index + 1);
        }
      }
      return null;
    }
    @Nullable @Override public VcsFileRevision getLastRevision(){
      if (myBaseRevision instanceof GitRevisionNumber) {
        return new GitFileRevision(myProject,VcsUtil.getFilePath(myFile),(GitRevisionNumber)myBaseRevision);
      }
 else {
        return ContainerUtil.getFirstItem(getRevisions());
      }
    }
  }
;
}
