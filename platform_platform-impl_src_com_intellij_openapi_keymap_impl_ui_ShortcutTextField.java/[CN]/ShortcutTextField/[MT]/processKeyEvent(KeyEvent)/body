{
  if (e.getID() == KeyEvent.KEY_PRESSED) {
    int keyCode=e.getKeyCode();
    if (keyCode == KeyEvent.VK_SHIFT || keyCode == KeyEvent.VK_ALT || keyCode == KeyEvent.VK_CONTROL || keyCode == KeyEvent.VK_ALT_GRAPH || keyCode == KeyEvent.VK_META) {
      return;
    }
    boolean extendedKeyCodeFirst=!SystemInfo.isWindows;
    KeyStroke stroke=KeyStrokeAdapter.getKeyStroke(e,extendedKeyCodeFirst);
    if (stroke == null) {
      stroke=KeyStrokeAdapter.getKeyStroke(e,!extendedKeyCodeFirst);
    }
    setKeyStroke(stroke);
  }
}
