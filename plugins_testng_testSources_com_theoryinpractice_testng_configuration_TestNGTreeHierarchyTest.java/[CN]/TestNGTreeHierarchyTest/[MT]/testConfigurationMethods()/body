{
  final StringBuffer buf=new StringBuffer();
  final IDEATestNGRemoteListener listener=createListener(buf);
  final String className="a.ATest";
  listener.onSuiteStart(className,true);
  for (  String methodName : new String[]{"test1","test2"}) {
    listener.onConfigurationSuccess(Collections.singletonList(className),"setUp",0);
    listener.onTestStart(Collections.singletonList(className),methodName,null,-1);
    listener.onTestFinished(methodName,0);
    listener.onConfigurationSuccess(Collections.singletonList(className),"tearDown",0);
  }
  listener.onSuiteFinish(className);
  Assert.assertEquals("output: " + buf,"\n" + "##teamcity[testSuiteStarted name ='ATest' locationHint = 'java:suite://a.ATest']\n" + "\n"+ "##teamcity[testStarted name='setUp' locationHint='java:test://a.ATest.setUp']\n"+ "\n"+ "##teamcity[testFinished name='setUp']\n"+ "\n"+ "##teamcity[testStarted name='test1' locationHint='java:test://a.ATest.test1']\n"+ "\n"+ "##teamcity[testFinished name='test1']\n"+ "\n"+ "##teamcity[testStarted name='tearDown' locationHint='java:test://a.ATest.tearDown']\n"+ "\n"+ "##teamcity[testFinished name='tearDown']\n"+ "\n"+ "##teamcity[testStarted name='setUp' locationHint='java:test://a.ATest.setUp']\n"+ "\n"+ "##teamcity[testFinished name='setUp']\n"+ "\n"+ "##teamcity[testStarted name='test2' locationHint='java:test://a.ATest.test2']\n"+ "\n"+ "##teamcity[testFinished name='test2']\n"+ "\n"+ "##teamcity[testStarted name='tearDown' locationHint='java:test://a.ATest.tearDown']\n"+ "\n"+ "##teamcity[testFinished name='tearDown']\n"+ "##teamcity[testSuiteFinished name='a.ATest']\n",StringUtil.convertLineSeparators(buf.toString()));
}
