{
  final StringBuffer buf=new StringBuffer();
  final IDEATestNGRemoteListener listener=createListener(buf);
  final String className="a.ATest";
  listener.onSuiteStart(className,true);
  listener.onConfigurationFailure(new MockTestNGResult(className,"setUp",createExceptionWithoutTrace(),ArrayUtil.EMPTY_OBJECT_ARRAY));
  listener.onSuiteFinish(className);
  Assert.assertEquals("output: " + buf,"\n" + "##teamcity[testSuiteStarted name ='ATest' locationHint = 'java:suite://a.ATest']\n" + "\n"+ "##teamcity[testStarted name='ATest.setUp' locationHint='java:test://a.ATest.setUp' config='true']\n"+ "##teamcity[testFailed name='ATest.setUp' details='java.lang.Exception|n' error='true' message='']\n"+ "\n"+ "##teamcity[testFinished name='ATest.setUp']\n"+ "##teamcity[testSuiteFinished name='a.ATest']\n",StringUtil.convertLineSeparators(buf.toString()));
}
