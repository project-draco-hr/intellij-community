{
  out.writeInt(map.size());
  try {
    map.forEachEntry(new TObjectIntProcedure<K>(){
      @Override public boolean execute(      final K key,      final int value){
        try {
          myKeyDataExternalizer.save(out,key);
          out.writeInt(value);
        }
 catch (        final IOException e) {
          throw new IoExceptionRuntimeWrapperException(e);
        }
        return true;
      }
    }
);
  }
 catch (  final IoExceptionRuntimeWrapperException e) {
    throw e.getIoException();
  }
}
