{
  final Project project=ProjectUtil.guessCurrentProject(this);
  final FileEditorManagerListener editorManagerListener=new FileEditorManagerListener(){
    @Override public void fileOpened(    @NotNull FileEditorManager source,    @NotNull VirtualFile file){
      final com.jetbrains.edu.learning.courseFormat.Task task=StudyUtils.getTaskFromSelectedEditor(project);
      final boolean isEnabled=task != null && task.getStatus() != StudyStatus.Solved;
      StepicAdaptiveReactionsPanel.this.setEnabledRecursive(isEnabled);
    }
    @Override public void fileClosed(    @NotNull FileEditorManager source,    @NotNull VirtualFile file){
    }
    @Override public void selectionChanged(    @NotNull FileEditorManagerEvent event){
      final com.jetbrains.edu.learning.courseFormat.Task task=StudyUtils.getTaskFromSelectedEditor(project);
      final boolean isEnabled=task != null && task.getStatus() != StudyStatus.Solved;
      StepicAdaptiveReactionsPanel.this.setEnabledRecursive(isEnabled);
    }
  }
;
  project.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,editorManagerListener);
}
