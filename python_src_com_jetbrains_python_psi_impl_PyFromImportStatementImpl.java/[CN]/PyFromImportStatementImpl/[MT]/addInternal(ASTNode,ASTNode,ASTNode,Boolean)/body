{
  if (anchor == null) {
    PsiElement lastChild=getLastChild();
    if (lastChild != null) {
      while (lastChild instanceof PsiComment) {
        lastChild=lastChild.getPrevSibling();
        anchor=lastChild.getNode();
      }
      ASTNode rpar_node=lastChild.getNode();
      if (rpar_node != null && rpar_node.getElementType() == PyTokenTypes.RPAR)       anchor=rpar_node;
    }
  }
  final ASTNode result=super.addInternal(first,last,anchor,before);
  ASTNode prevNode=result;
  do {
    prevNode=prevNode.getTreePrev();
  }
 while (prevNode != null && prevNode.getElementType() == TokenType.WHITE_SPACE);
  if (prevNode != null && prevNode.getElementType() == PyElementTypes.IMPORT_ELEMENT && result.getElementType() == PyElementTypes.IMPORT_ELEMENT) {
    ASTNode comma=PyElementGenerator.getInstance(getProject()).createComma();
    super.addInternal(comma,comma,prevNode,false);
  }
  return result;
}
