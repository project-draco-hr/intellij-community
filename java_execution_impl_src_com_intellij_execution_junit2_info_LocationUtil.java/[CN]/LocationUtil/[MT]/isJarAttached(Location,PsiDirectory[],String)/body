{
  final JavaPsiFacade facade=JavaPsiFacade.getInstance(location.getProject());
  final Module locationModule=location.getModule();
  if (locationModule != null) {
    for (    String fqn : fqns) {
      if (facade.findClass(fqn,GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(locationModule,true)) != null)       return true;
    }
  }
 else {
    for (    PsiDirectory directory : directories) {
      final Module module=ModuleUtilCore.findModuleForFile(directory.getVirtualFile(),location.getProject());
      if (module != null) {
        GlobalSearchScope scope=GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module,true);
        for (        String fqn : fqns) {
          if (facade.findClass(fqn,scope) != null) {
            return true;
          }
        }
      }
    }
  }
  return false;
}
