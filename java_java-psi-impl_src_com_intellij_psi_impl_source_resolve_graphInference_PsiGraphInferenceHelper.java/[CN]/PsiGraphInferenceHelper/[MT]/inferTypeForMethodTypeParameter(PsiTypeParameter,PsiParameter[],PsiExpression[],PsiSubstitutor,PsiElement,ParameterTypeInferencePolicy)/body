{
  final PsiSubstitutor substitutor;
  if (parent != null) {
    substitutor=inferTypeArguments(new PsiTypeParameter[]{typeParameter},parameters,arguments,partialSubstitutor,parent,policy,PsiUtil.getLanguageLevel(parent));
  }
 else {
    final InferenceSession inferenceSession=new InferenceSession(new PsiTypeParameter[]{typeParameter},partialSubstitutor,myManager,null);
    inferenceSession.initExpressionConstraints(parameters,arguments,null,null);
    substitutor=inferenceSession.infer();
  }
  return substitutor.substitute(typeParameter);
}
