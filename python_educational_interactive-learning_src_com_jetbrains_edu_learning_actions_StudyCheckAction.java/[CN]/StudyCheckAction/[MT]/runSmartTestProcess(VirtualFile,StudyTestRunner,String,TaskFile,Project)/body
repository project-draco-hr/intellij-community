{
  final TaskFile answerTaskFile=new TaskFile();
  final VirtualFile virtualFile=taskDir.findChild(taskFileName);
  if (virtualFile == null) {
    return;
  }
  final VirtualFile answerFile=getCopyWithAnswers(taskDir,virtualFile,taskFile,answerTaskFile);
  for (  final TaskWindow taskWindow : answerTaskFile.getTaskWindows()) {
    final Document document=FileDocumentManager.getInstance().getDocument(virtualFile);
    if (document == null) {
      continue;
    }
    if (!taskWindow.isValid(document)) {
      continue;
    }
    taskWindow.smartCheck(project,answerFile,answerTaskFile,taskFile,testRunner,virtualFile,document);
  }
  StudyUtils.deleteFile(answerFile);
}
