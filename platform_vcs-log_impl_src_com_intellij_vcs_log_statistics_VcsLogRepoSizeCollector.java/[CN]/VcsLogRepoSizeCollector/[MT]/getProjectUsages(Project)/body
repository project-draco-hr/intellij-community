{
  VcsLogManager logManager=VcsLogContentProvider.findLogManager(project);
  if (logManager != null) {
    VcsLogUiImpl ui=logManager.getLogUi();
    if (ui != null) {
      PermanentGraph<Integer> permanentGraph=ui.getDataPack().getPermanentGraph();
      MultiMap<VcsKey,VirtualFile> groupedRoots=groupRootsByVcs(ui.getDataPack().getLogProviders());
      Set<UsageDescriptor> usages=ContainerUtil.newHashSet();
      usages.add(new UsageDescriptor("vcs.log.commit.count",permanentGraph.getAllCommits().size()));
      for (      VcsKey vcs : groupedRoots.keySet()) {
        usages.add(new RootUsage(vcs,groupedRoots.get(vcs).size()));
      }
      return usages;
    }
  }
  return Collections.emptySet();
}
