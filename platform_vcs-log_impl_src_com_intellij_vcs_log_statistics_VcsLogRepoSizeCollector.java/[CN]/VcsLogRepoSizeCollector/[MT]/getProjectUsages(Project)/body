{
  VcsLogManager logManager=VcsLogContentProvider.findLogManager(project);
  if (logManager != null) {
    VcsLogUiImpl ui=logManager.getLogUi();
    if (ui != null) {
      PermanentGraph<Integer> permanentGraph=ui.getDataPack().getPermanentGraph();
      Map<VcsKey,Integer> rootCounts=groupRootsByVcs(ui.getDataPack().getLogProviders());
      Set<UsageDescriptor> usages=ContainerUtil.newHashSet();
      usages.add(new UsageDescriptor("vcs.log.commit.count",permanentGraph.getAllCommits().size()));
      for (      Map.Entry<VcsKey,Integer> entry : rootCounts.entrySet()) {
        usages.add(new RootUsage(entry.getKey(),entry.getValue()));
      }
      return usages;
    }
  }
  return Collections.emptySet();
}
