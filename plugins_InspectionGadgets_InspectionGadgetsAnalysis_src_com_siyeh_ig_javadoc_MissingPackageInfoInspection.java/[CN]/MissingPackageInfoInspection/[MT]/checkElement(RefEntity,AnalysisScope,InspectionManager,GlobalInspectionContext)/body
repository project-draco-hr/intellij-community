{
  if (!(refEntity instanceof RefPackage)) {
    return null;
  }
  final RefPackage refPackage=(RefPackage)refEntity;
  final String packageName=refPackage.getQualifiedName();
  final Project project=globalContext.getProject();
  final PsiPackage aPackage=JavaPsiFacade.getInstance(project).findPackage(packageName);
  if (hasPackageInfoFile(aPackage)) {
    return null;
  }
  final List<RefEntity> children=refPackage.getChildren();
  boolean hasClasses=false;
  for (  RefEntity child : children) {
    if (child instanceof RefClass) {
      hasClasses=true;
      break;
    }
  }
  if (!hasClasses) {
    return null;
  }
  if (PsiUtil.isLanguageLevel5OrHigher(aPackage)) {
    return new CommonProblemDescriptor[]{manager.createProblemDescriptor(InspectionGadgetsBundle.message("missing.package.info.problem.descriptor",packageName))};
  }
 else {
    return new CommonProblemDescriptor[]{manager.createProblemDescriptor(InspectionGadgetsBundle.message("missing.package.html.problem.descriptor",packageName))};
  }
}
