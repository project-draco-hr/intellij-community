{
  MavenProjectsTree result=new MavenProjectsTree(project);
  DataInputStream in=new DataInputStream(new BufferedInputStream(new FileInputStream(file)));
  try {
    try {
      if (!STORAGE_VERSION.equals(in.readUTF()))       return null;
      result.myManagedFilesPaths=readCollection(in,new LinkedHashSet<>());
      result.myIgnoredFilesPaths=readCollection(in,new ArrayList<>());
      result.myIgnoredFilesPatterns=readCollection(in,new ArrayList<>());
      result.myExplicitProfiles=new MavenExplicitProfiles(readCollection(in,new THashSet<>()),readCollection(in,new THashSet<>()));
      result.myRootProjects.addAll(readProjectsRecursively(in,result));
    }
 catch (    IOException e) {
      in.close();
      file.delete();
      throw e;
    }
catch (    Throwable e) {
      throw new IOException(e);
    }
  }
  finally {
    in.close();
  }
  return result;
}
