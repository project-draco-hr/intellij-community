{
  MavenEmbedderWrapper embedder=embeddersManager.getEmbedder(MavenEmbeddersManager.FOR_DEPENDENCIES_RESOLVE);
  embedder.customizeForResolve(getWorkspaceMap(),console,process,generalSettings.isAlwaysUpdateSnapshots());
  try {
    process.checkCanceled();
    process.setText(ProjectBundle.message("maven.resolving.pom",mavenProject.getDisplayName()));
    process.setText2("");
    Pair<MavenProjectChanges,NativeMavenProjectHolder> resolveResult=mavenProject.resolve(project,generalSettings,embedder,new MavenProjectReader(),myProjectLocator,context);
    fireProjectResolved(Pair.create(mavenProject,resolveResult.first),resolveResult.second);
  }
  finally {
    embeddersManager.release(embedder);
  }
}
