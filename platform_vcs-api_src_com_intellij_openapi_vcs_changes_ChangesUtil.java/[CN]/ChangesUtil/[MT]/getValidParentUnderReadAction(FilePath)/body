{
  return ApplicationManager.getApplication().runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      VirtualFile result=null;
      FilePath parent=filePath;
      LocalFileSystem lfs=LocalFileSystem.getInstance();
      while (result == null && parent != null) {
        result=lfs.findFileByPath(parent.getPath());
        parent=parent.getParentPath();
      }
      return result;
    }
  }
);
}
