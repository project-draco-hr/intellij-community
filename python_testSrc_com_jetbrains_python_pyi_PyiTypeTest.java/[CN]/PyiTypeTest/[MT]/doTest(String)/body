{
  myFixture.copyDirectoryToProject("pyi/type/" + getTestName(true),"");
  myFixture.copyDirectoryToProject("typing","");
  PsiDocumentManager.getInstance(myFixture.getProject()).commitAllDocuments();
  final String fileName=getTestName(false) + ".py";
  myFixture.configureByFile(fileName);
  final PsiElement element=myFixture.getElementAtCaret();
  assertNotNull("Could not find element at caret in: " + myFixture.getFile());
  assertInstanceOf(element,PyTypedElement.class);
  final PyTypedElement typedElement=(PyTypedElement)element;
  final Project project=element.getProject();
  final PsiFile containingFile=element.getContainingFile();
  assertType(expectedType,typedElement,TypeEvalContext.codeAnalysis(project,containingFile));
  assertType(expectedType,typedElement,TypeEvalContext.userInitiated(project,containingFile));
}
