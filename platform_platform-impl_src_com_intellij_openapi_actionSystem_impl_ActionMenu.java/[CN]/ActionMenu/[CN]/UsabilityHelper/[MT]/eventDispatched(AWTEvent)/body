{
  if (event instanceof ComponentEvent) {
    ComponentEvent componentEvent=(ComponentEvent)event;
    Component component=componentEvent.getComponent();
    JPopupMenu popup=UIUtil.findParentByClass(component,JPopupMenu.class);
    if (popup != null && popup.getInvoker() == myComponent) {
      Rectangle bounds=popup.getBounds();
      if (bounds.isEmpty())       return;
      bounds.setLocation(popup.getLocationOnScreen());
      if (myLastMousePoint.x < bounds.x) {
        myUpperTargetPoint=new Point(bounds.x,bounds.y);
        myLowerTargetPoint=new Point(bounds.x,bounds.y + bounds.height);
      }
      if (myLastMousePoint.x > bounds.x + bounds.width) {
        myUpperTargetPoint=new Point(bounds.x + bounds.width,bounds.y);
        myLowerTargetPoint=new Point(bounds.x + bounds.width,bounds.y + bounds.height);
      }
    }
  }
}
