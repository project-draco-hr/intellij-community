{
  final List<Object> variants=Lists.newArrayList();
  Collections.addAll(variants,super.getVariants());
  PsiFile file=myElement.getContainingFile();
  if (file instanceof IpnbPyFragment) {
    final IpnbFilePanel panel=((IpnbPyFragment)file).getFilePanel();
    final List<IpnbEditablePanel> panels=panel.getIpnbPanels();
    for (    IpnbEditablePanel editablePanel : panels) {
      if (!(editablePanel instanceof IpnbCodePanel))       continue;
      final Editor editor=((IpnbCodePanel)editablePanel).getEditor();
      final IpnbPyFragment psiFile=(IpnbPyFragment)PsiDocumentManager.getInstance(myElement.getProject()).getPsiFile(editor.getDocument());
      if (psiFile == null)       continue;
      final CompletionVariantsProcessor processor=new CompletionVariantsProcessor(myElement);
      PyResolveUtil.scopeCrawlUp(processor,psiFile,null,null);
      for (      LookupElement e : processor.getResultList()) {
        final Object o=e.getObject();
        if (o instanceof PsiElement) {
          final PsiElement original=CompletionUtil.getOriginalElement((PsiElement)o);
          if (original == null) {
            continue;
          }
        }
        variants.add(e);
      }
    }
  }
  return variants.toArray();
}
