{
  final PsiElement element=getReferenceNameElement();
  final PsiMethodReferenceUtil.QualifierResolveResult qualifierResolveResult=PsiMethodReferenceUtil.getQualifierResolveResult(this);
  final PsiClass containingClass=qualifierResolveResult.getContainingClass();
  if (containingClass != null) {
    PsiMethod[] methods=null;
    if (element instanceof PsiIdentifier) {
      methods=containingClass.findMethodsByName(element.getText(),false);
    }
 else     if (isConstructor()) {
      methods=containingClass.getConstructors();
    }
    if (methods != null) {
      PsiMethod psiMethod=null;
      if (methods.length > 0) {
        for (        PsiMethod method : methods) {
          if (PsiUtil.isAccessible(method,this,null)) {
            if (psiMethod != null)             return null;
            psiMethod=method;
          }
        }
        if (psiMethod == null)         return null;
        if (psiMethod.isVarArgs())         return null;
        if (psiMethod.getTypeParameters().length > 0) {
          final PsiReferenceParameterList parameterList=getParameterList();
          return parameterList != null && parameterList.getTypeParameterElements().length > 0 ? psiMethod : null;
        }
      }
      if (containingClass.hasTypeParameters()) {
        final PsiElement qualifier=getQualifier();
        if (qualifier instanceof PsiTypeElement) {
          final PsiJavaCodeReferenceElement referenceElement=((PsiTypeElement)qualifier).getInnermostComponentReferenceElement();
          if (referenceElement != null) {
            final PsiReferenceParameterList parameterList=referenceElement.getParameterList();
            if (parameterList == null || parameterList.getTypeParameterElements().length == 0) {
              return null;
            }
          }
        }
 else         if (qualifier instanceof PsiReferenceExpression) {
          final PsiReferenceParameterList parameterList=((PsiReferenceExpression)qualifier).getParameterList();
          if (parameterList == null || parameterList.getTypeParameterElements().length == 0) {
            return null;
          }
        }
      }
      return psiMethod == null ? containingClass : psiMethod;
    }
  }
  return null;
}
