{
  PsiElement oldIdentifier=findChildByType(JavaTokenType.IDENTIFIER);
  if (oldIdentifier == null) {
    oldIdentifier=findChildByType(JavaElementType.REFERENCE_EXPRESSION);
  }
  if (oldIdentifier == null) {
    throw new IncorrectOperationException();
  }
  final String oldRefName=oldIdentifier.getText();
  if (PsiKeyword.THIS.equals(oldRefName) || PsiKeyword.SUPER.equals(oldRefName) || PsiKeyword.NEW.equals(oldRefName)|| Comparing.strEqual(oldRefName,newElementName)) {
    return this;
  }
  PsiIdentifier identifier=JavaPsiFacade.getInstance(getProject()).getElementFactory().createIdentifier(newElementName);
  oldIdentifier.replace(identifier);
  return this;
}
