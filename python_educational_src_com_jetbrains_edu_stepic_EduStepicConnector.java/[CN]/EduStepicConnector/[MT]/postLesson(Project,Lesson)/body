{
  final HttpPost request=new HttpPost(stepicApiUrl + "lessons");
  final ArrayList<Header> headers=getHeaders(request);
  HttpClientBuilder builder=HttpClients.custom().setSslcontext(CertificateManager.getInstance().getSslContext());
  final BasicCookieStore cookieStore=getCookies();
  final CloseableHttpClient client=builder.setDefaultHeaders(headers).setDefaultCookieStore(cookieStore).build();
  String requestBody=new Gson().toJson(new LessonWrapper(lesson));
  request.setEntity(new StringEntity(requestBody,ContentType.APPLICATION_JSON));
  try {
    final CloseableHttpResponse response=client.execute(request);
    final String responseString=EntityUtils.toString(response.getEntity());
    final StatusLine line=response.getStatusLine();
    if (line.getStatusCode() != 201) {
      LOG.error("Failed to push " + EntityUtils.toString(response.getEntity()));
      return false;
    }
    final Lesson postedLesson=new Gson().fromJson(responseString,Course.class).getLessons().get(0);
    for (    Task task : lesson.getTaskList()) {
      postTask(project,task,postedLesson.id);
    }
  }
 catch (  IOException e) {
    LOG.error(e.getMessage());
  }
  return false;
}
