{
  if (!searchHelper.doOptimizing())   return Collections.emptyList();
  final SearchScope scope=context.getOptions().getScope();
  if (!(scope instanceof GlobalSearchScope))   return Collections.emptyList();
  final PsiShortNamesCache cache=PsiShortNamesCache.getInstance(context.getProject());
  final PsiClass[] classes=cache.getClassesByName(className,(GlobalSearchScope)scope);
  final List<PsiClass> results=new ArrayList<PsiClass>();
  final Processor<PsiClass> processor=new Processor<PsiClass>(){
    @Override public boolean process(    PsiClass aClass){
      results.add(aClass);
      return true;
    }
  }
;
  for (  PsiClass aClass : classes) {
    ClassInheritorsSearch.search(aClass,scope,true).forEach(processor);
  }
  if (includeSelf) {
    Collections.addAll(results,classes);
  }
  return results;
}
