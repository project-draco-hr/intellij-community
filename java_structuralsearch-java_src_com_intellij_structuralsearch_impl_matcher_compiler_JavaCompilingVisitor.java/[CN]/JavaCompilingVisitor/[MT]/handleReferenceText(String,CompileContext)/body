{
  System.out.println("JavaCompilingVisitor" + ".handleReferenceText(" + refname + ", "+ compileContext+ ")");
  if (refname == null)   return;
  if (compileContext.getPattern().isTypedVar(refname)) {
    SubstitutionHandler handler=(SubstitutionHandler)compileContext.getPattern().getHandler(refname);
    RegExpPredicate predicate=MatchingHandler.getSimpleRegExpPredicate(handler);
    if (!GlobalCompilingVisitor.isSuitablePredicate(predicate,handler)) {
      return;
    }
    refname=predicate.getRegExp();
    if (handler.isStrictSubtype() || handler.isSubtype()) {
      final OptimizingSearchHelper searchHelper=compileContext.getSearchHelper();
      if (addDescendantsOf(refname,handler.isSubtype(),searchHelper,compileContext)) {
        searchHelper.endTransaction();
      }
      return;
    }
  }
  GlobalCompilingVisitor.addFilesToSearchForGivenWord(refname,true,GlobalCompilingVisitor.OccurenceKind.CODE,compileContext);
}
