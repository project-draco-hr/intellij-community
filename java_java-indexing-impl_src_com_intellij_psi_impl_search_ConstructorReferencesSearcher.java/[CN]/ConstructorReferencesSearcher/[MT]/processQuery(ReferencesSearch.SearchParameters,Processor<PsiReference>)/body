{
  final PsiElement element=p.getElementToSearch();
  if (!(element instanceof PsiMethod)) {
    return;
  }
  final PsiMethod method=(PsiMethod)element;
  final PsiManager[] manager=new PsiManager[1];
  PsiClass aClass=ApplicationManager.getApplication().runReadAction(new Computable<PsiClass>(){
    public PsiClass compute(){
      if (!method.isConstructor())       return null;
      PsiClass aClass=method.getContainingClass();
      manager[0]=aClass == null ? null : aClass.getManager();
      return aClass;
    }
  }
);
  if (aClass == null) {
    return;
  }
  new ConstructorReferencesSearchHelper(manager[0]).processConstructorReferences(consumer,method,aClass,p.getScope(),p.isIgnoreAccessScope(),true,p.getOptimizer());
}
