{
  ZenCodingNode node=parse(key,callback,defaultGenerator,surroundedText);
  if (node == null) {
    return;
  }
  if (surroundedText == null) {
    if (node instanceof TemplateNode) {
      if (key.equals(((TemplateNode)node).getTemplateToken().getKey()) && callback.findApplicableTemplates(key).size() > 1) {
        callback.startTemplate();
        return;
      }
    }
    callback.deleteTemplateKey(key);
  }
  PsiElement context=callback.getContext();
  ZenCodingGenerator generator=findApplicableGenerator(node,context,false);
  List<ZenCodingFilter> filters=getFilters(node,context);
  expand(node,generator,filters,surroundedText,callback);
}
