{
  UISettings uiSettings=UISettings.getInstance();
  if (uiSettings == null || !uiSettings.SHOW_DIRECTORY_FOR_NON_UNIQUE_FILENAMES || DumbService.isDumb(project))   return null;
  String uniqueName=uiSettings.EDITOR_TAB_PLACEMENT == UISettings.TABS_NONE ? UniqueVFilePathBuilder.getInstance().getUniqueVirtualFilePath(project,file) : UniqueVFilePathBuilder.getInstance().getUniqueVirtualFilePathWithinOpenedFileEditors(project,file);
  uniqueName=getEditorTabText(uniqueName,File.separator,uiSettings.HIDE_KNOWN_EXTENSION_IN_TABS);
  return uniqueName.equals(file.getName()) ? null : uniqueName;
}
