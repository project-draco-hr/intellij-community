{
  super.setUp();
  myHgDir=new File(myRepository.getPath(),".hg");
  assertTrue(myHgDir.exists());
  File pluginRoot=new File(PluginPathManager.getPluginHomePath("hg4idea"));
  String pathToHg="testData/repo/dot_hg";
  File testHgDir=new File(pluginRoot,FileUtil.toSystemDependentName(pathToHg));
  File cacheDir=new File(testHgDir,"cache");
  File testBranchFile=new File(testHgDir,"branch");
  File testBookmarkFile=new File(testHgDir,"bookmarks");
  File testCurrentBookmarkFile=new File(testHgDir,"bookmarks.current");
  File testTagFile=new File(testHgDir.getParentFile(),".hgtags");
  File testLocalTagFile=new File(testHgDir,"localtags");
  FileUtil.copyDir(cacheDir,new File(myHgDir,"cache"));
  FileUtil.copy(testBranchFile,new File(myHgDir,"branch"));
  FileUtil.copy(testBookmarkFile,new File(myHgDir,"bookmarks"));
  FileUtil.copy(testCurrentBookmarkFile,new File(myHgDir,"bookmarks.current"));
  FileUtil.copy(testTagFile,new File(myHgDir.getParentFile(),".hgtags"));
  FileUtil.copy(testLocalTagFile,new File(myHgDir,"localtags"));
  myRepositoryReader=new HgRepositoryReader(myProject,myHgDir);
  myBranches=readBranches();
  myBookmarks=readRefs(testBookmarkFile);
  myTags=readRefs(testTagFile);
  myLocalTags=readRefs(testLocalTagFile);
}
