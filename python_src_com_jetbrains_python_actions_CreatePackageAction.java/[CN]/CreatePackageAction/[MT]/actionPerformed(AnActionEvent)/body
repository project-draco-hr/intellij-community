{
  final IdeView view=e.getData(LangDataKeys.IDE_VIEW);
  if (view == null) {
    return;
  }
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final PsiDirectory directory=DirectoryChooserUtil.getOrChooseDirectory(view);
  if (directory == null)   return;
  CreateDirectoryOrPackageHandler validator=new CreateDirectoryOrPackageHandler(project,directory,false,"."){
    @Override protected void createDirectories(    String subDirName){
      super.createDirectories(subDirName);
      createInitPyInHierarchy(getCreatedElement(),directory);
    }
  }
;
  Messages.showInputDialog(project,IdeBundle.message("prompt.enter.new.package.name"),IdeBundle.message("title.new.package"),Messages.getQuestionIcon(),"",validator);
  final PsiDirectory result=validator.getCreatedElement();
  if (result != null) {
    view.selectElement(result);
  }
}
