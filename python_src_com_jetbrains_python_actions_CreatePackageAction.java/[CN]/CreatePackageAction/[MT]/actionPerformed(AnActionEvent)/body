{
  final IdeView view=e.getData(LangDataKeys.IDE_VIEW);
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final PsiDirectory directory=DirectoryChooserUtil.getOrChooseDirectory(view);
  if (directory == null)   return;
  new WriteCommandAction.Simple(project,"Create Package"){
    @Override protected void run() throws Throwable {
      CreateDirectoryOrPackageHandler validator=new CreateDirectoryOrPackageHandler(project,directory,false,".");
      Messages.showInputDialog(project,IdeBundle.message("prompt.enter.new.package.name"),IdeBundle.message("title.new.package"),Messages.getQuestionIcon(),"",validator);
      final PsiDirectory result=validator.getCreatedElement();
      if (result != null && view != null) {
        createInitPyInHierarchy(result,directory);
        view.selectElement(result);
      }
    }
  }
.execute();
}
