{
  final PsiClass targetClass=findTargetClass(editor,file);
  final List<TestFramework> frameworks=new ArrayList<TestFramework>(TestIntegrationUtils.findSuitableFrameworks(targetClass));
  for (Iterator<TestFramework> iterator=frameworks.iterator(); iterator.hasNext(); ) {
    if (myMethodKind.getFileTemplateDescriptor(iterator.next()) == null) {
      iterator.remove();
    }
  }
  if (frameworks.isEmpty())   return;
  final Consumer<TestFramework> consumer=new Consumer<TestFramework>(){
    @Override public void consume(    TestFramework framework){
      if (framework == null)       return;
      doGenerate(editor,file,targetClass,framework);
    }
  }
;
  chooseAndPerform(editor,frameworks,consumer);
}
