{
  final Course course=StudyStepicConnector.getCourse(mySelectedCourseInfo);
  if (course == null)   return;
  StudyTaskManager.getInstance(project).setCourse(course);
  flushCourse(course);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          StudyGenerator.initCourse(course,false);
          final File courseDirectory=new File(myCoursesDir,course.getName());
          StudyGenerator.createCourse(course,baseDir,courseDirectory,project);
          course.setCourseDirectory(new File(myCoursesDir,mySelectedCourseInfo.getName()).getAbsolutePath());
          VirtualFileManager.getInstance().refreshWithoutFileWatcher(true);
          StudyProjectComponent.getInstance(project).registerStudyToolwindow(course);
          openFirstTask(course,project);
        }
      }
);
    }
  }
);
}
