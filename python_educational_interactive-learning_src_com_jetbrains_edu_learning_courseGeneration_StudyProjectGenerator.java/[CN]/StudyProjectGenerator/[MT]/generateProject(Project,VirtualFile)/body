{
  final Course course=StudyStepicConnector.getCourse(mySelectedCourseInfo);
  if (course == null)   return;
  flushCourse(course);
  StudyGenerator.initCourse(course,false);
  final File courseDirectory=new File(myCoursesDir,course.getName());
  StudyGenerator.createCourse(course,baseDir,courseDirectory,project);
  course.setCourseDirectory(new File(myCoursesDir,mySelectedCourseInfo.getName()).getAbsolutePath());
  VirtualFileManager.getInstance().refreshWithoutFileWatcher(true);
  StudyTaskManager.getInstance(project).setCourse(course);
  ToolWindowManagerEx.getInstanceEx(project).addToolWindowManagerListener(new OpenFirstTaskListener(project,course));
}
