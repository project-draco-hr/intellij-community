{
  final Ref<int[]> res=new Ref<int[]>();
  index.withStorageLock(new Runnable(){
    @Override public void run(){
      final int[] ptrPtr=new int[1];
      boolean exists=index.get(id,ptrPtr);
      if (!exists) {
        ptrPtr[0]=0;
      }
      int pointer=ptrPtr[0];
      if (pointer == 0) {
        res.set(ArrayUtil.EMPTY_INT_ARRAY);
      }
 else {
        assertPointer(pointer);
        int listLength=data.getInt(pointer);
        int capacity=data.getInt(pointer + 4);
        assertListLength(listLength,capacity);
        int[] result=new int[listLength];
        byte[] bytes=new byte[listLength * 4];
        data.get(pointer + 8,bytes,0,bytes.length);
        for (int i=0; i < listLength; i++) {
          result[i]=Bits.getInt(bytes,i * 4);
        }
        res.set(result);
      }
    }
  }
);
  return res.get();
}
