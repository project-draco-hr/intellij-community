{
  Presentation presentation=e.getPresentation();
  Pair<OpenInBrowserRequest,WebBrowserUrlProvider> result=BaseOpenInBrowserAction.doUpdate(e);
  if (result == null) {
    return;
  }
  WebBrowserUrlProvider browserUrlProvider=result.second;
  String text=getTemplatePresentation().getText();
  String description=getTemplatePresentation().getDescription();
  if (browserUrlProvider != null) {
    String customDescription=browserUrlProvider.getOpenInBrowserActionDescription(result.first.getFile());
    if (customDescription != null) {
      description=customDescription;
    }
    if (HtmlUtil.isHtmlFile(result.first.getFile())) {
      description+=" (hold Shift to open URL of local file)";
    }
  }
  presentation.setText(text);
  presentation.setDescription(description);
  WebBrowser browser=findUsingBrowser();
  if (browser != null) {
    presentation.setIcon(browser.getIcon());
  }
  if (ActionPlaces.isPopupPlace(e.getPlace())) {
    presentation.setVisible(presentation.isEnabled());
  }
}
