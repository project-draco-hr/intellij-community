{
  List<TextRange> result=new ArrayList<TextRange>();
  final List<String> lines=StringUtil.split(getText(),"\n",true,false);
  int cumulativeOffset=0;
  for (int i=0; i < lines.size(); ++i) {
    final String line=lines.get(i);
    int lineStart=0;
    int lineEnd=line.length();
    if (i == 0) {
      lineStart++;
    }
 else {
      while (lineStart < line.length() && Character.isWhitespace(line.charAt(lineStart))) {
        lineStart++;
      }
    }
    if (i == lines.size() - 1) {
      lineEnd--;
    }
 else {
      while (lineEnd > lineStart && Character.isWhitespace(line.charAt(lineEnd - 1))) {
        lineEnd--;
      }
    }
    result.add(TextRange.create(lineStart,lineEnd).shiftRight(cumulativeOffset));
    cumulativeOffset+=line.length() + 1;
  }
  return result;
}
