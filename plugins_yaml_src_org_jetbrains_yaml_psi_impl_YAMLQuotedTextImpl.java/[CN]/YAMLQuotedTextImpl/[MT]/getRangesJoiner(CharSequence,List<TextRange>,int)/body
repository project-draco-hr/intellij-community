{
  final TextRange leftRange=contentRanges.get(indexBefore);
  if (leftRange.isEmpty() || !isSingleQuote() && text.charAt(leftRange.getEndOffset() - 1) == '\\') {
    return "\n";
  }
 else   if (contentRanges.get(indexBefore + 1).isEmpty()) {
    return "";
  }
 else {
    return " ";
  }
}
