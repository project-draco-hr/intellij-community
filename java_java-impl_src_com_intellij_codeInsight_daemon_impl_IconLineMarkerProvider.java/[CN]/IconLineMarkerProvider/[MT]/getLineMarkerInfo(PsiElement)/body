{
  if (!DaemonCodeAnalyzerSettings.getInstance().SHOW_SMALL_ICONS_IN_GUTTER)   return null;
  if (element instanceof PsiAssignmentExpression) {
    final PsiExpression lExpression=((PsiAssignmentExpression)element).getLExpression();
    final PsiExpression expr=((PsiAssignmentExpression)element).getRExpression();
    if (lExpression instanceof PsiReferenceExpression) {
      PsiElement var=((PsiReferenceExpression)lExpression).resolve();
      if (var instanceof PsiVariable) {
        return createIconLineMarker(((PsiVariable)var).getType(),expr);
      }
    }
  }
 else   if (element instanceof PsiReturnStatement) {
    PsiReturnStatement psiReturnStatement=(PsiReturnStatement)element;
    final PsiExpression value=psiReturnStatement.getReturnValue();
    final PsiMethod method=PsiTreeUtil.getParentOfType(element,PsiMethod.class);
    if (method != null) {
      final PsiType returnType=method.getReturnType();
      final LineMarkerInfo<PsiElement> result=createIconLineMarker(returnType,value);
      if (result != null || !ProjectIconsAccessor.isIconClassType(returnType) || value == null)       return result;
      if (methodContainsReturnStatementOnly(method)) {
        for (        PsiReference ref : value.getReferences()) {
          final PsiElement field=ref.resolve();
          if (field instanceof PsiField) {
            return createIconLineMarker(returnType,((PsiField)field).getInitializer(),psiReturnStatement);
          }
        }
      }
    }
  }
 else   if (element instanceof PsiVariable) {
    PsiVariable var=(PsiVariable)element;
    PsiUtilCore.ensureValid(var);
    final PsiType type=var.getType();
    if (!type.isValid()) {
      PsiUtil.ensureValidType(type,"in variable: " + var + " of "+ var.getClass());
    }
    return createIconLineMarker(type,var.getInitializer());
  }
  return null;
}
