{
  final TaskManagerImpl taskManager=(TaskManagerImpl)TaskManager.getManager(myProject);
  if (myUpdateState.isSelected()) {
    final CustomTaskState taskState=myTaskStateCombo.getSelectedState();
    final TaskRepository repository=myTask.getRepository();
    if (repository != null && taskState != null) {
      try {
        repository.setTaskState(myTask,taskState);
        repository.setPreferredOpenTaskState(taskState);
      }
 catch (      Exception ex) {
        Messages.showErrorDialog(myProject,ex.getMessage(),"Cannot Set State For Issue");
        LOG.warn(ex);
      }
    }
  }
  taskManager.activateTask(myTask,isClearContext());
  if (myTask.getType() == TaskType.EXCEPTION && AnalyzeTaskStacktraceAction.hasTexts(myTask)) {
    AnalyzeTaskStacktraceAction.analyzeStacktrace(myTask,myProject);
  }
  for (  TaskDialogPanel panel : myPanels) {
    panel.commit();
  }
}
