{
  if (DEFAULT_ALIASING)   return;
  Graphics2D g2d=(Graphics2D)g;
  UISettings uiSettings=getInstance();
  g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_OFF);
  if (!isRemoteDesktopConnected() && UIUtil.isRetina()) {
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  }
 else {
    Toolkit tk=Toolkit.getDefaultToolkit();
    Map map=(Map)tk.getDesktopProperty("awt.font.desktophints");
    if (map != null) {
      if (isRemoteDesktopConnected()) {
        g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_DEFAULT);
      }
 else {
        g2d.addRenderingHints(map);
      }
    }
    if (FORCE_USE_FRACTIONAL_METRICS) {
      g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,RenderingHints.VALUE_FRACTIONALMETRICS_ON);
    }
  }
  if (uiSettings != null && uiSettings.ANTIALIASING_IN_EDITOR) {
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,uiSettings.USE_LCD_RENDERING_IN_EDITOR ? RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB : RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
  }
 else {
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_OFF);
  }
}
