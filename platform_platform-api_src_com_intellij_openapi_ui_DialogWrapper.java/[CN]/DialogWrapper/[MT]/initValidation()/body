{
  myValidationAlarm.cancelAllRequests();
  final Runnable validateRequest=new Runnable(){
    @Override public void run(){
      if (myDisposed)       return;
      final ValidationInfo result=doValidate();
      if (result == null) {
        clearProblems();
      }
 else {
        reportProblem(result);
      }
      if (!myDisposed) {
        initValidation();
      }
    }
  }
;
  if (getValidationThreadToUse() == Alarm.ThreadToUse.SWING_THREAD) {
    JRootPane rootPane=getRootPane();
    myValidationAlarm.addRequest(validateRequest,myValidationDelay,ApplicationManager.getApplication() == null ? null : rootPane == null ? ModalityState.current() : ModalityState.stateForComponent(rootPane));
  }
 else {
    myValidationAlarm.addRequest(validateRequest,myValidationDelay);
  }
}
