{
  return new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
      MenuElement[] selectedPath=menuSelectionManager.getSelectedPath();
      if (selectedPath.length > 0) {
        menuSelectionManager.clearSelectedPath();
      }
 else {
        if (ApplicationManager.getApplication() == null) {
          doCancelAction(e);
          return;
        }
        final StackingPopupDispatcher popupDispatcher=StackingPopupDispatcher.getInstance();
        if (popupDispatcher != null && !popupDispatcher.isPopupFocused()) {
          doCancelAction(e);
        }
      }
    }
  }
;
}
