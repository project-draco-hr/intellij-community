{
  ensureEventDispatchThread();
  myErrorText=new ErrorText();
  myErrorText.setVisible(false);
  final JPanel root=new JPanel(createRootLayout());
  myPeer.setContentPane(root);
  final CustomShortcutSet sc=new CustomShortcutSet(SHOW_OPTION_KEYSTROKE);
  final AnAction toggleShowOptions=new AnAction(){
    @Override public void actionPerformed(    @NotNull AnActionEvent e){
      expandNextOptionButton();
    }
  }
;
  toggleShowOptions.registerCustomShortcutSet(sc,root);
  JComponent titlePane=createTitlePane();
  if (titlePane != null) {
    JPanel northSection=new JPanel(new BorderLayout());
    root.add(northSection,BorderLayout.NORTH);
    northSection.add(titlePane,BorderLayout.CENTER);
  }
  JComponent centerSection=new JPanel(new BorderLayout());
  root.add(centerSection,BorderLayout.CENTER);
  root.setBorder(createContentPaneBorder());
  final JComponent n=createNorthPanel();
  if (n != null) {
    centerSection.add(n,BorderLayout.NORTH);
  }
  final JComponent c=createCenterPanel();
  if (c != null) {
    centerSection.add(c,BorderLayout.CENTER);
    myErrorPane=c;
  }
  if (myErrorPane == null) {
    myErrorPane=root;
  }
  final JPanel southSection=new JPanel(new BorderLayout());
  root.add(southSection,BorderLayout.SOUTH);
  southSection.add(myErrorText,BorderLayout.CENTER);
  final JComponent south=createSouthPanel();
  if (south != null) {
    southSection.add(south,BorderLayout.SOUTH);
  }
  MnemonicHelper.init(root);
  if (!postponeValidation()) {
    startTrackingValidation();
  }
  if (SystemInfo.isWindows) {
    installEnterHook(root);
  }
  myErrorTextAlarm.setActivationComponent(root);
}
