{
  Set<UserFileType> modifiedUserTypes=myOriginalToEditedMap.keySet();
  for (  UserFileType oldType : modifiedUserTypes) {
    oldType.copyFrom(myOriginalToEditedMap.get(oldType));
  }
  myOriginalToEditedMap.clear();
  DumbService.allowStartingDumbModeInside(DumbModePermission.MAY_START_BACKGROUND,ProjectManager.getInstance().getOpenProjects(),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          if (!myManager.isIgnoredFilesListEqualToCurrent(myFileTypePanel.myIgnoreFilesField.getText())) {
            myManager.setIgnoredFilesList(myFileTypePanel.myIgnoreFilesField.getText());
          }
          myManager.setPatternsTable(myTempFileTypes,myTempPatternsTable);
          for (          FileNameMatcher matcher : myReassigned.keySet()) {
            myManager.getRemovedMappings().put(matcher,Pair.create(myReassigned.get(matcher),true));
          }
          TemplateDataLanguagePatterns.getInstance().setAssocTable(myTempTemplateDataLanguages);
        }
      }
);
    }
  }
);
}
