{
  int count=getComponentCount();
  if (count == 1) {
    Rectangle bounds=new Rectangle(getWidth(),getHeight());
    JBInsets.removeFrom(bounds,getInsets());
    Component child=getComponent(0);
    child.setBounds(bounds);
    if (child instanceof CellRendererPanel) {
      child.doLayout();
    }
  }
 else {
    LayoutManager layout=getLayout();
    if (layout instanceof LayoutManager2) {
      ((LayoutManager2)layout).invalidateLayout(this);
    }
    super.doLayout();
    for (int i=0; i < count; i++) {
      Component c=getComponent(i);
      if (c instanceof CellRendererPanel) {
        c.doLayout();
      }
    }
  }
}
