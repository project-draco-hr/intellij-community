{
  final String outputPath=FileUtil.toSystemIndependentName(output.getPath());
  for (  File outputRoot : myOutputs) {
    final String outputRootPath=FileUtil.toSystemIndependentName(outputRoot.getPath());
    final String relativePath=FileUtil.getRelativePath(outputRootPath,outputPath,'/');
    if (relativePath != null && !relativePath.startsWith("../")) {
      if (isDirectory) {
        addEventsRecursively(output,outputRootPath,relativePath);
      }
 else {
        myFileGeneratedEvent.add(outputRootPath,relativePath);
      }
    }
  }
  final SourceToOutputMapping mapping=myContext.getProjectDescriptor().dataManager.getSourceToOutputMap(myTarget);
  for (  String sourcePath : sourcePaths) {
    if (myRegisteredSources.add(FileUtil.toSystemIndependentName(sourcePath))) {
      mapping.setOutput(sourcePath,outputPath);
    }
 else {
      mapping.appendOutput(sourcePath,outputPath);
    }
  }
}
