{
  super(new BorderLayout());
  myProject=project;
  myStateBean=stateBean;
  final JLabel titleLabel=new JLabel();
  final CoverageSuitesBundle suitesBundle=dataManager.getCurrentSuitesBundle();
  myModel=new CoverageTableModel(suitesBundle.getAnnotator(project));
  myTable=new JBTable(myModel);
  myTable.getColumnModel().getColumn(0).setCellRenderer(new NodeDescriptorTableCellRenderer());
  myTable.getTableHeader().setReorderingAllowed(false);
  JPanel centerPanel=new JPanel(new BorderLayout());
  centerPanel.add(ScrollPaneFactory.createScrollPane(myTable),BorderLayout.CENTER);
  centerPanel.add(titleLabel,BorderLayout.NORTH);
  add(centerPanel,BorderLayout.CENTER);
  myStructure=new CoverageViewTreeStructure(project,suitesBundle,stateBean);
  myBuilder=new CoverageViewBuilder(project,new JBList(),myModel,myStructure,null,myTable);
  myBuilder.setParentTitle(titleLabel);
  myBuilder.ensureSelectionExist();
  myBuilder.updateParentTitle();
  myTable.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    final MouseEvent e){
      if (e.getClickCount() == 2) {
        drillDown(myStructure);
      }
    }
  }
);
  final TableSpeedSearch speedSearch=new TableSpeedSearch(myTable);
  speedSearch.setClearSearchOnNavigateNoMatch(true);
  TableScrollingUtil.installActions(myTable);
  myTable.registerKeyboardAction(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      if (myBuilder == null)       return;
      myBuilder.buildRoot();
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_BACK_SLASH,SystemInfo.isMac ? InputEvent.META_MASK : InputEvent.CTRL_MASK),JComponent.WHEN_FOCUSED);
  myTable.getInputMap(WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0),ACTION_DRILL_DOWN);
  myTable.getInputMap(WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_PAGE_DOWN,SystemInfo.isMac ? InputEvent.META_MASK : InputEvent.CTRL_MASK),ACTION_DRILL_DOWN);
  myTable.getActionMap().put(ACTION_DRILL_DOWN,new AbstractAction(){
    public void actionPerformed(    final ActionEvent e){
      drillDown(myStructure);
    }
  }
);
  myTable.getInputMap(WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_PAGE_UP,SystemInfo.isMac ? InputEvent.META_MASK : InputEvent.CTRL_MASK),ACTION_GO_UP);
  myTable.getInputMap(WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_BACK_SPACE,0),ACTION_GO_UP);
  myTable.getActionMap().put(ACTION_GO_UP,new AbstractAction(){
    public void actionPerformed(    final ActionEvent e){
      goUp();
    }
  }
);
  final JComponent component=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,createToolbarActions(myStructure),false).getComponent();
  add(component,BorderLayout.WEST);
}
