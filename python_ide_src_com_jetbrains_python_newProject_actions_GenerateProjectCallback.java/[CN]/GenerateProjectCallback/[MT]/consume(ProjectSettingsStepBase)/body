{
  if (!(step instanceof ProjectSpecificSettingsStep))   return;
  final ProjectSpecificSettingsStep settingsStep=(ProjectSpecificSettingsStep)step;
  Sdk sdk=settingsStep.getSdk();
  if (sdk instanceof PyDetectedSdk) {
    addDetectedSdk(settingsStep,sdk);
  }
 else   if (sdk == null) {
    createAndAddVirtualEnv(settingsStep);
  }
  sdk=settingsStep.getSdk();
  final Project newProject=generateProject(settingsStep);
  if (newProject != null) {
    SdkConfigurationUtil.setDirectoryProjectSdk(newProject,sdk);
    final List<Sdk> sdks=PythonSdkType.getAllSdks();
    for (    Sdk s : sdks) {
      final SdkAdditionalData additionalData=s.getSdkAdditionalData();
      if (additionalData instanceof PythonSdkAdditionalData) {
        ((PythonSdkAdditionalData)additionalData).reassociateWithCreatedProject(newProject);
      }
    }
  }
}
