{
  final Ref<Sdk> ref=Ref.create();
  UsefulTestCase.edt(new Runnable(){
    @Override public void run(){
      final Sdk sdk=SdkConfigurationUtil.setupSdk(NO_SDK,sdkHome,new PythonSdkType(){
        @Override public void setupSdkPaths(        @NotNull Sdk sdk){
        }
      }
,true,null,null);
      Assert.assertNotNull("Failed to create SDK on " + sdkHome,sdk);
      ref.set(sdk);
    }
  }
);
  final Sdk sdk=ref.get();
  if (sdkCreationType != SdkCreationType.EMPTY_SDK) {
    generateTempSkeletonsOrPackages(sdk,sdkCreationType == SdkCreationType.SDK_PACKAGES_AND_SKELETONS,module);
  }
  UsefulTestCase.edt(new Runnable(){
    @Override public void run(){
      SdkConfigurationUtil.addSdk(sdk);
    }
  }
);
  return sdk;
}
