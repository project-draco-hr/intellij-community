{
  final TrustManager[] trustAllCerts=new TrustManager[]{new PyPITrustManager()};
  try {
    final SSLContext sslContext=SSLContext.getInstance("TLS");
    sslContext.init(null,trustAllCerts,new SecureRandom());
    final HttpConfigurable settings=HttpConfigurable.getInstance();
    con=settings.openConnection(PYPI_HOST + "/pypi?%3Aaction=index");
    if (con instanceof HttpsURLConnection) {
      ((HttpsURLConnection)con).setSSLSocketFactory(sslContext.getSocketFactory());
    }
    con.setDoInput(true);
    con.setDoOutput(true);
    con.setUseCaches(false);
    con.setAllowUserInteraction(false);
    con.setRequestProperty("Content-Length",Integer.toString(request.length));
    con.setRequestProperty("Content-Type","text/xml");
    if (auth != null) {
      con.setRequestProperty("Authorization","Basic " + auth);
    }
    final OutputStream out=con.getOutputStream();
    out.write(request);
    out.flush();
    out.close();
    return con.getInputStream();
  }
 catch (  @NotNull NoSuchAlgorithmException|KeyManagementException e) {
    LOG.warn(e.getMessage());
  }
  return super.sendXmlRpc(request);
}
