{
  if (myRefs == null || myGraph == null)   return Conditions.alwaysFalse();
  VcsRef branchRef=ContainerUtil.find(myRefs.getBranches(),new Condition<VcsRef>(){
    @Override public boolean value(    VcsRef vcsRef){
      return vcsRef.getRoot().equals(root) && vcsRef.getName().equals(branchName);
    }
  }
);
  if (branchRef == null)   return Conditions.alwaysFalse();
  ContainedInBranchCondition condition=myConditions.get(Pair.create(root,branchName));
  if (condition == null) {
    condition=new ContainedInBranchCondition(myGraph.getContainedInBranchCondition(Collections.singleton(myDataHolder.getCommitIndex(branchRef.getCommitHash()))));
    myConditions.put(Pair.create(root,branchName),condition);
  }
  return condition;
}
