{
  return new DiffRequestProducer(){
    @NotNull @Override public DiffRequest process(    @NotNull UserDataHolder context,    @NotNull ProgressIndicator indicator) throws DiffRequestProducerException, ProcessCanceledException {
      return PatchDiffRequestFactory.createDiffRequest(project,createChange(project),getName(),context,indicator);
    }
    @NotNull @Override public String getName(){
      final File file1=new File(VfsUtilCore.virtualToIoFile(getBase()),myPatch.getAfterName() == null ? myPatch.getBeforeName() : myPatch.getAfterName());
      return FileUtil.toSystemDependentName(file1.getPath());
    }
  }
;
}
