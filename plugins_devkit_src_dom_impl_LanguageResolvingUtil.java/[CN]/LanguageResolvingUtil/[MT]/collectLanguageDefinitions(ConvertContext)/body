{
  final PsiClass languageClass=DomJavaUtil.findClass(Language.class.getName(),context.getInvocationElement());
  if (languageClass == null) {
    return Collections.emptyList();
  }
  final Project project=context.getProject();
  final GlobalSearchScope projectProductionScope=GlobalSearchScopesCore.projectProductionScope(project);
  GlobalSearchScope allScope=projectProductionScope.union(ProjectScope.getLibrariesScope(project));
  final Collection<PsiClass> allLanguages=ClassInheritorsSearch.search(languageClass,allScope,true).findAll();
  final List<LanguageDefinition> libraryDefinitions=collectLibraryLanguages(context,allLanguages);
  final Collection<PsiClass> projectLanguages=ClassInheritorsSearch.search(languageClass,projectProductionScope,true).findAll();
  final List<LanguageDefinition> projectDefinitions=collectProjectLanguages(projectLanguages,libraryDefinitions);
  final List<LanguageDefinition> all=new ArrayList<LanguageDefinition>(libraryDefinitions);
  all.addAll(projectDefinitions);
  return all;
}
