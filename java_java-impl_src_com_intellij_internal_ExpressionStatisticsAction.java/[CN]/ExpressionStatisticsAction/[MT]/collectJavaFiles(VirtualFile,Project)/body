{
  final List<VirtualFile> javaFiles=ContainerUtil.newArrayList();
  ProjectFileIndex.SERVICE.getInstance(project).iterateContentUnderDirectory(dir,new ContentIterator(){
    @Override public boolean processFile(    VirtualFile file){
      if (file.getName().endsWith(".java")) {
        javaFiles.add(file);
      }
      return true;
    }
  }
);
  return javaFiles;
}
