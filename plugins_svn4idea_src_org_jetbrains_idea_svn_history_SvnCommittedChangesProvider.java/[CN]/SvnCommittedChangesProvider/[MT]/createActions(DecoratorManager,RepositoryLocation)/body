{
  final RootsAndBranches rootsAndBranches=new RootsAndBranches(myVcs,manager,location);
  refreshMergeInfo(rootsAndBranches);
  final DefaultActionGroup popup=new DefaultActionGroup(myVcs.getDisplayName(),true);
  popup.add(rootsAndBranches.getIntegrateAction());
  popup.add(rootsAndBranches.getUndoIntegrateAction());
  popup.add(new ConfigureBranchesAction());
  final ShowHideMergePanelAction action=new ShowHideMergePanelAction(manager,rootsAndBranches.getStrategy());
  return new VcsCommittedViewAuxiliary(Collections.<AnAction>singletonList(popup),new Runnable(){
    public void run(){
      if (myMergeInfoUpdatesListener != null) {
        myMergeInfoUpdatesListener.removePanel(rootsAndBranches);
        rootsAndBranches.dispose();
      }
    }
  }
,Collections.<AnAction>singletonList(action));
}
