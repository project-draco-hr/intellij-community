{
  File dir=new File(directoryPath);
  if (!dir.exists()) {
    if (promptUser) {
      String ide=ApplicationNamesInfo.getInstance().getFullProductName();
      String message=IdeBundle.message("prompt.project.wizard.directory.does.not.exist",promptPrefix,dir,ide);
      int answer=Messages.showOkCancelDialog(message,IdeBundle.message("title.directory.does.not.exist"),Messages.getQuestionIcon());
      if (answer != Messages.OK) {
        return false;
      }
    }
    if (!FileUtil.createDirectory(dir)) {
      Messages.showErrorDialog(IdeBundle.message("error.failed.to.create.directory",dir.getPath()),CommonBundle.getErrorTitle());
      return false;
    }
  }
  if (SystemInfo.isUnix && !dir.canWrite()) {
    Messages.showErrorDialog(IdeBundle.message("error.directory.read.only",dir.getPath()),CommonBundle.getErrorTitle());
    return false;
  }
  return true;
}
