{
  return new CodeInsightActionHandler(){
    @Override public void invoke(    @NotNull final Project project,    @NotNull final Editor editor,    @NotNull final PsiFile file){
      final Runnable runnable=new Runnable(){
        @Override public void run(){
          final DomElement element=myProvider.generate(project,editor,file);
          myProvider.navigate(element);
        }
      }
;
      if (GenerateDomElementAction.this.startInWriteAction()) {
        new WriteCommandAction(project,file){
          @Override protected void run(          @NotNull final Result result) throws Throwable {
            runnable.run();
          }
        }
.execute();
      }
 else {
        runnable.run();
      }
    }
    @Override public boolean startInWriteAction(){
      return false;
    }
  }
;
}
