{
  if (event.getProject() == null || event.getData(EditorGutter.KEY) != null || Boolean.TRUE.equals(event.getData(CommonDataKeys.EDITOR_VIRTUAL_SPACE))) {
    event.getPresentation().setEnabled(false);
    return;
  }
  for (  GotoDeclarationHandler handler : Extensions.getExtensions(GotoDeclarationHandler.EP_NAME)) {
    try {
      String text=handler.getActionText(event.getDataContext());
      if (text != null) {
        Presentation presentation=event.getPresentation();
        presentation.setText(text);
        break;
      }
    }
 catch (    AbstractMethodError e) {
      LOG.error(handler.toString(),e);
    }
  }
  super.update(event);
}
