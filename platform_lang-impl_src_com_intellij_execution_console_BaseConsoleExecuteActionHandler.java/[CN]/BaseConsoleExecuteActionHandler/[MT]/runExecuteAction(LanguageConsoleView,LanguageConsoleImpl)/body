{
  Document document=console.getCurrentEditor().getDocument();
  String text=document.getText();
  TextRange range=new TextRange(0,document.getTextLength());
  console.getCurrentEditor().getSelectionModel().setSelection(range.getStartOffset(),range.getEndOffset());
  if (myAddCurrentToHistory) {
    console.addCurrentToHistory(range,false,myPreserveMarkup);
  }
  console.setInputText("");
  UndoManager manager=UndoManager.getInstance(console.getProject());
  ((UndoManagerImpl)manager).invalidateActionsFor(DocumentReferenceManager.getInstance().create(document));
  myConsoleHistoryModel.addToHistory(text);
  if (consoleView == null) {
    execute(text);
  }
 else {
    execute(text,consoleView);
  }
}
