{
  if (!isDirectory) {
    String templateName=myReference.getNewFileTemplateName();
    if (templateName != null) {
      Project project=myReference.getElement().getProject();
      FileTemplate template=FileTemplateManager.getInstance(project).getTemplate(templateName);
      if (template != null) {
        try {
          return template.getText(FileTemplateManager.getInstance(project).getDefaultProperties());
        }
 catch (        IOException ex) {
          throw new RuntimeException(ex);
        }
      }
    }
  }
  return super.getFileText();
}
