{
  Pair<GitHttpAuthDataProvider,AuthData> authData=findBestAuthData(getUnifiedUrl(url));
  String login=null;
  String password=null;
  if (authData != null) {
    login=authData.second.getLogin();
    password=authData.second.getPassword();
    myDataProvider=authData.first;
  }
  if (login != null && password != null) {
    myPassword=password;
    return login;
  }
  AuthDialog dialog=showAuthDialog(getDisplayableUrl(url),login);
  if (dialog == null || !dialog.isOK()) {
    myWasCancelled=true;
    return "";
  }
  myPassword=dialog.getPassword();
  myLogin=dialog.getUsername();
  myUnifiedUrl=getUnifiedUrl(url);
  mySaveOnDisk=dialog.isRememberPassword();
  myPasswordKey=makeKey(myUnifiedUrl,myLogin);
  return myLogin;
}
