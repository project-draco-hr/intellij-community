{
  this.clazz=clazz;
  nonPrivateMethods=new HashSet<MemberSignature>();
  final PsiMethod[] methods=clazz.getMethods();
  for (  final PsiMethod method : methods) {
    if (!method.isConstructor() && !method.hasModifierProperty(PsiModifier.PRIVATE)) {
      final MemberSignature methodSignature=new MemberSignature(method);
      nonPrivateMethods.add(methodSignature);
      SuperMethodsSearch.search(method,null,true,false).forEach(new Processor<MethodSignatureBackedByPsiMethod>(){
        @Override public boolean process(        MethodSignatureBackedByPsiMethod method){
          final MemberSignature superSignature=new MemberSignature(methodSignature.getName(),methodSignature.getModifiers(),MemberSignature.createMethodSignature(method.getMethod()));
          nonPrivateMethods.add(superSignature);
          return true;
        }
      }
);
    }
  }
  nonPrivateFields=new HashSet<MemberSignature>();
  final PsiField[] fields=clazz.getFields();
  for (  final PsiField field : fields) {
    if (!field.hasModifierProperty(PsiModifier.PRIVATE) || !(field.hasModifierProperty(PsiModifier.STATIC) || field.hasModifierProperty(PsiModifier.TRANSIENT))) {
      final MemberSignature fieldSignature=new MemberSignature(field);
      nonPrivateFields.add(fieldSignature);
    }
  }
  staticInitializers=new ArrayList<MemberSignature>(1);
  final PsiClassInitializer[] initializers=clazz.getInitializers();
  if (initializers.length > 0) {
    for (    final PsiClassInitializer initializer : initializers) {
      final PsiModifierList modifierList=initializer.getModifierList();
      if (modifierList != null && modifierList.hasModifierProperty(PsiModifier.STATIC)) {
        final MemberSignature initializerSignature=MemberSignature.getStaticInitializerMemberSignature();
        staticInitializers.add(initializerSignature);
        break;
      }
    }
  }
  if (staticInitializers.isEmpty()) {
    final PsiField[] psiFields=clazz.getFields();
    for (    final PsiField field : psiFields) {
      if (hasStaticInitializer(field)) {
        final MemberSignature initializerSignature=MemberSignature.getStaticInitializerMemberSignature();
        staticInitializers.add(initializerSignature);
        break;
      }
    }
  }
  final PsiMethod[] constructors=clazz.getConstructors();
  nonPrivateConstructors=new HashSet<MemberSignature>(constructors.length);
  if (constructors.length == 0 && !clazz.isInterface()) {
    final MemberSignature constructorSignature;
    if (clazz.hasModifierProperty(PsiModifier.PUBLIC)) {
      constructorSignature=MemberSignature.getPublicConstructor();
    }
 else {
      constructorSignature=MemberSignature.getPackagePrivateConstructor();
    }
    nonPrivateConstructors.add(constructorSignature);
  }
  for (  final PsiMethod constructor : constructors) {
    if (!constructor.hasModifierProperty(PsiModifier.PRIVATE)) {
      final MemberSignature constructorSignature=new MemberSignature(constructor);
      nonPrivateConstructors.add(constructorSignature);
    }
  }
}
