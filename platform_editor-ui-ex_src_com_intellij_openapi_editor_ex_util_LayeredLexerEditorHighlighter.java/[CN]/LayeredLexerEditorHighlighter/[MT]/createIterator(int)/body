{
  final boolean changed=updateLayers();
synchronized (this) {
    if (changed) {
      Document document=getDocument();
      if (document != null) {
        myText=null;
        super.setText(document.getImmutableCharSequence());
      }
    }
    return new LayeredHighlighterIteratorImpl(startOffset);
  }
}
