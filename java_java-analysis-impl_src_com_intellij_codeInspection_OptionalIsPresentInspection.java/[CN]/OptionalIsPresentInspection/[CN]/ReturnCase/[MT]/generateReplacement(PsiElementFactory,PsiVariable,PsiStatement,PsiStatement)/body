{
  PsiExpression trueValue=((PsiReturnStatement)trueStatement).getReturnValue();
  PsiExpression falseValue=((PsiReturnStatement)falseStatement).getReturnValue();
  LOG.assertTrue(trueValue != null);
  LOG.assertTrue(falseValue != null);
  String trueBranch=generateMapIfNeeded(factory,optionalVariable,trueValue);
  return "return " + trueBranch + ".orElse("+ falseValue.getText()+ ");";
}
