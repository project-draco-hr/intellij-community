{
  Set<VirtualFile> directories=cachedDirectories;
  if (directories == null || VfsUtilCore.hasInvalidFiles(directories) || VfsUtilCore.hasInvalidFiles(cachedFiles)) {
    directories=collectFilesAndDirectories();
  }
  return directories;
}
