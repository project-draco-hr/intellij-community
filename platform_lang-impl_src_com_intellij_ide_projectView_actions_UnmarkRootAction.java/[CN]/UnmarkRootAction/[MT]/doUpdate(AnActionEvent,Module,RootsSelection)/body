{
  if (!Registry.is("ide.hide.excluded.files") && !selection.mySelectedExcludeRoots.isEmpty() && selection.mySelectedDirectories.isEmpty()&& selection.mySelectedRoots.isEmpty()) {
    e.getPresentation().setEnabledAndVisible(true);
    e.getPresentation().setText(LangBundle.message("mark.as.unmark.excluded"));
    return;
  }
  super.doUpdate(e,module,selection);
  String text=getActionText(e,module,selection);
  if (text != null)   e.getPresentation().setText(text);
}
