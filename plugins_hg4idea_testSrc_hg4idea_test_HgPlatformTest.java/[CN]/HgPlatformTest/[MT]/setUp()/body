{
  super.setUp();
  try {
    myProjectFixture=IdeaTestFixtureFactory.getFixtureFactory().createFixtureBuilder(getTestName(true)).getFixture();
    myProjectFixture.setUp();
    myProject=myProjectFixture.getProject();
    myProjectRoot=myProject.getBaseDir();
    cd(myProjectRoot);
    hg("version");
    createRepository(myProjectRoot);
    myVcs=HgVcs.getInstance(myProject);
    assertNotNull(myVcs);
    myVcs.getGlobalSettings().setHgExecutable(HgExecutor.getHgExecutable());
    myVcs.checkVersion();
    myRepository=myProjectRoot;
    setUpHgrc(myRepository);
  }
 catch (  Exception e) {
    tearDown();
  }
}
