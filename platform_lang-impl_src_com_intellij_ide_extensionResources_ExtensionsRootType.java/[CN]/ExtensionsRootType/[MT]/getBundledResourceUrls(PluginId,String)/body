{
  String resourcesPath=EXTENSIONS_PATH + "/" + path;
  IdeaPluginDescriptor plugin=PluginManager.getPlugin(pluginId);
  ClassLoader cl=plugin != null ? plugin.getPluginClassLoader() : null;
  Enumeration<URL> urlEnumeration=plugin != null ? cl.getResources(resourcesPath) : null;
  if (urlEnumeration == null)   return ContainerUtil.emptyList();
  PluginId corePluginId=PluginId.findId(PluginManagerCore.CORE_PLUGIN_ID);
  Set<URL> excludedUrls=ContainerUtil.newHashSet();
  if (!plugin.getUseIdeaClassLoader() && !pluginId.equals(corePluginId)) {
    IdeaPluginDescriptor corePlugin=PluginManager.getPlugin(corePluginId);
    ClassLoader ideaClassLoader=ObjectUtils.assertNotNull(corePlugin).getPluginClassLoader();
    Enumeration<URL> resources=ideaClassLoader.getResources(resourcesPath);
    while (resources.hasMoreElements()) {
      excludedUrls.add(resources.nextElement());
    }
  }
  Set<URL> urls=ContainerUtil.newLinkedHashSet();
  while (urlEnumeration.hasMoreElements()) {
    URL url=urlEnumeration.nextElement();
    if (!excludedUrls.contains(url)) {
      urls.add(url);
    }
  }
  return ContainerUtil.newArrayList(urls);
}
