{
  Class<? extends PersistentStateComponent> componentClass=persistentStateComponent.getClass();
  State spec=getStateSpec(componentClass);
  if (spec != null) {
    return spec;
  }
  PluginId pluginId=PluginManagerCore.getPluginByClassName(componentClass.getName());
  if (pluginId == null) {
    throw new RuntimeException("No @State annotation found in " + componentClass);
  }
 else {
    throw new PluginException("No @State annotation found in " + componentClass,pluginId);
  }
}
