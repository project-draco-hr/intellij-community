{
  myTreeBuilder=new TestTreeBuilder(treeView,this,myProperties);
  Disposer.register(this,myTreeBuilder);
  myAnimator=new TestsProgressAnimator(myTreeBuilder);
  addListener(new JUnitAdapter(){
    public void onTestChanged(    final TestEvent event){
      if (event instanceof StateChangedEvent) {
        final TestProxy test=event.getSource();
        if (test.isLeaf() && test.getState().getMagnitude() == PoolOfTestStates.RUNNING_INDEX) {
          myAnimator.setCurrentTestCase(test);
        }
      }
    }
    public void onRunnerStateChanged(    final StateEvent event){
      if (!event.isRunning()) {
        myAnimator.stopMovie();
      }
    }
    public void doDispose(){
      dispose();
    }
  }
);
  myTreeView=treeView;
  selectTest(getRoot());
  myTreeListener.install();
}
