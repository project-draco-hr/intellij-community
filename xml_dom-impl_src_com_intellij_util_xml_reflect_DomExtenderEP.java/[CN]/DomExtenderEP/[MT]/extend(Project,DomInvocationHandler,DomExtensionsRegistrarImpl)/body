{
  if (myDomClass == null) {
    try {
      myDomClass=findClass(domClassName);
    }
 catch (    Exception e) {
      LOG.error(e);
      return registrar;
    }
  }
  if (!myDomClass.isAssignableFrom(handler.getRawType())) {
    return registrar;
  }
  if (myExtender == null) {
    try {
      myExtender=instantiate(extenderClassName,project.getPicoContainer());
    }
 catch (    Exception e) {
      LOG.error(e);
      return registrar;
    }
  }
  if (!myExtender.supportsStubs() && XmlUtil.isStubBuilding()) {
    return registrar;
  }
  if (registrar == null) {
    registrar=new DomExtensionsRegistrarImpl();
  }
  myExtender.registerExtensions(handler.getProxy(),registrar);
  return registrar;
}
