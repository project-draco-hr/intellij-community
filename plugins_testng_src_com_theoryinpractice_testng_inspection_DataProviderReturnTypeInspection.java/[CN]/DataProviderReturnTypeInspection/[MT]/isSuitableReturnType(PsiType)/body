{
  if (type instanceof PsiArrayType) {
    return isObjectArray(((PsiArrayType)type).getComponentType());
  }
 else   if (type instanceof PsiClassType) {
    final PsiClassType.ClassResolveResult resolveResult=((PsiClassType)type).resolveGenerics();
    final PsiClass resolvedClass=resolveResult.getElement();
    if (resolvedClass == null || !CommonClassNames.JAVA_UTIL_ITERATOR.equals(resolvedClass.getQualifiedName())) {
      return false;
    }
    final Map<PsiTypeParameter,PsiType> substitutionMap=resolveResult.getSubstitutor().getSubstitutionMap();
    if (substitutionMap.size() != 1) {
      return false;
    }
    final PsiType genericType=ContainerUtil.getFirstItem(substitutionMap.values());
    if (genericType == null) {
      return false;
    }
    return isObjectArray(genericType);
  }
  return false;
}
