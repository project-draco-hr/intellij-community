{
  final Ref<Throwable> exceptionRef=new Ref<Throwable>();
  TaskContainer taskContainer=new TaskContainer(task){
    @Override public void run(){
      try {
        new TaskRunnable(task,getProgressIndicator()).run();
      }
 catch (      ProcessCanceledException e) {
        throw e;
      }
catch (      Throwable e) {
        exceptionRef.set(e);
      }
    }
  }
;
  ApplicationEx application=(ApplicationEx)ApplicationManager.getApplication();
  boolean result=application.runProcessWithProgressSynchronously(taskContainer,task.getTitle(),task.isCancellable(),task.getProject(),parentComponent,task.getCancelText());
  finishTask(task,!result,exceptionRef.get());
  return result;
}
