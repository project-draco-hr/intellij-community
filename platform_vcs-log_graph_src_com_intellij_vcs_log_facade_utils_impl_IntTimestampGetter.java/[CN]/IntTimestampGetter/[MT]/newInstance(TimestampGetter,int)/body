{
  if (delegateGetter.size() == 0)   throw new IllegalArgumentException("Empty TimestampGetter not supported");
  long[] saveTimestamps=new long[(delegateGetter.size() - 1) / blockSize + 1];
  for (int i=0; i < saveTimestamps.length; i++)   saveTimestamps[i]=delegateGetter.getTimestamp(blockSize * i);
  Map<Integer,Long> brokenDeltas=new HashMap<Integer,Long>();
  int[] deltas=new int[delegateGetter.size() - 1];
  for (int i=0; i < delegateGetter.size() - 1; i++) {
    long delta=delegateGetter.getTimestamp(i + 1) - delegateGetter.getTimestamp(i);
    int intDelta=deltaToInt(delta);
    deltas[i]=intDelta;
    if (intDelta == BROKEN_DELTA)     brokenDeltas.put(i,delta);
  }
  return new IntTimestampGetter(deltas,blockSize,saveTimestamps,brokenDeltas);
}
