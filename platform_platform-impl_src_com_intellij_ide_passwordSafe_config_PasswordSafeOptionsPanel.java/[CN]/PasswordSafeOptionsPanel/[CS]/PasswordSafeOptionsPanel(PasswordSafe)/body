{
  myPasswordSafe=(PasswordSafeImpl)passwordSafe;
  myMasterPasswordStateLabel.setForeground(JBColor.BLUE);
  updateMasterPasswordState();
  myManagePasswordButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (myPasswordSafe.getMasterKeyProvider().isEmpty()) {
        MasterPasswordDialog.resetMasterPasswordDialog(null,myPasswordSafe.getMasterKeyProvider(),PasswordSafeOptionsPanel.class).show();
      }
 else {
        MasterPasswordDialog.changeMasterPasswordDialog(null,myPasswordSafe.getMasterKeyProvider(),PasswordSafeOptionsPanel.class).show();
      }
      updateMasterPasswordState();
    }
  }
);
}
