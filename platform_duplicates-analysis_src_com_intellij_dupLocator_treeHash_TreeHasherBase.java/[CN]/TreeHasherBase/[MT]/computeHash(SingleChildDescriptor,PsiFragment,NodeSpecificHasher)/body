{
  final PsiElement element=childDescriptor.getElement();
  if (element == null) {
    return new Pair<Integer,Integer>(0,0);
  }
  final Pair<Integer,Integer> result=doComputeHash(childDescriptor,parentFragment,nodeSpecificHasher);
  final DuplicatesProfileBase duplicatesProfile=((NodeSpecificHasherBase)nodeSpecificHasher).getDuplicatesProfile();
  final PsiElementRole role=duplicatesProfile.getRole(element);
  if (role != null) {
    final ExternalizableDuplocatorState state=duplicatesProfile.getDuplocatorState(duplicatesProfile.getLanguage(element));
    if (!state.distinguishRole(role)) {
      return new Pair<Integer,Integer>(0,result.second);
    }
  }
  return result;
}
