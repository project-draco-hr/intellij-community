{
  final TreeHashResult result=computeHash(root,upper,hasher);
  final int discardCost=getDiscardCost(root);
  if (result.getCost() < discardCost) {
    return new TreeHashResult(0,result.getCost(),result.getFragment());
  }
  return result;
}
