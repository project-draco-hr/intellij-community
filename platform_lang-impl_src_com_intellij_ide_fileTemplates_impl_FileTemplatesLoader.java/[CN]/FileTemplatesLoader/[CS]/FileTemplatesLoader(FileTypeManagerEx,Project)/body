{
  myTypeManager=typeManager;
  File configDir=project == null || project.isDefault() ? new File(PathManager.getConfigPath(),TEMPLATES_DIR) : new File(ProjectKt.getStateStore(project).getDirectoryStorePath(true) + "/" + TEMPLATES_DIR);
  myDefaultTemplatesManager=new FTManager(FileTemplateManager.DEFAULT_TEMPLATES_CATEGORY,configDir);
  myInternalTemplatesManager=new FTManager(FileTemplateManager.INTERNAL_TEMPLATES_CATEGORY,new File(configDir,INTERNAL_DIR),true);
  myPatternsManager=new FTManager(FileTemplateManager.INCLUDES_TEMPLATES_CATEGORY,new File(configDir,INCLUDES_DIR));
  myCodeTemplatesManager=new FTManager(FileTemplateManager.CODE_TEMPLATES_CATEGORY,new File(configDir,CODE_TEMPLATES_DIR));
  myJ2eeTemplatesManager=new FTManager(FileTemplateManager.J2EE_TEMPLATES_CATEGORY,new File(configDir,J2EE_TEMPLATES_DIR));
  myAllManagers=new FTManager[]{myDefaultTemplatesManager,myInternalTemplatesManager,myPatternsManager,myCodeTemplatesManager,myJ2eeTemplatesManager};
  myDirToManagerMap.put("",myDefaultTemplatesManager);
  myDirToManagerMap.put(INTERNAL_DIR + "/",myInternalTemplatesManager);
  myDirToManagerMap.put(INCLUDES_DIR + "/",myPatternsManager);
  myDirToManagerMap.put(CODE_TEMPLATES_DIR + "/",myCodeTemplatesManager);
  myDirToManagerMap.put(J2EE_TEMPLATES_DIR + "/",myJ2eeTemplatesManager);
  loadDefaultTemplates();
  for (  FTManager manager : myAllManagers) {
    manager.loadCustomizedContent();
  }
}
