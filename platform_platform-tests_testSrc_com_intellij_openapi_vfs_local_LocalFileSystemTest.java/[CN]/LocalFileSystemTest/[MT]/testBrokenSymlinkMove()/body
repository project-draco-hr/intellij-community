{
  final File srcDir=IoTestUtil.createTestDir("src");
  final File link=IoTestUtil.createSymLink(srcDir.getPath() + "/missing",srcDir.getPath() + "/link",false);
  final File dstDir=IoTestUtil.createTestDir("dst");
  new WriteAction(){
    @Override protected void run(    @NotNull Result result) throws Throwable {
      VirtualFile file=myFS.refreshAndFindFileByIoFile(link);
      assertNotNull(file);
      VirtualFile target=myFS.refreshAndFindFileByIoFile(dstDir);
      assertNotNull(target);
      myFS.moveFile(this,file,target);
    }
  }
.execute();
  assertOrderedEquals(ArrayUtil.EMPTY_STRING_ARRAY,srcDir.list());
  assertOrderedEquals(new String[]{link.getName()},dstDir.list());
}
