{
  File file=IoTestUtil.createTestFile("file.txt");
  VirtualFile vFile=myFS.refreshAndFindFileByIoFile(file);
  assertNotNull(vFile);
  assertWritable(file,vFile,true);
  ApplicationManager.getApplication().runWriteAction(new ThrowableComputable<Object,IOException>(){
    @Override public Object compute() throws IOException {
      vFile.setWritable(false);
      return null;
    }
  }
);
  assertWritable(file,vFile,false);
  vFile.refresh(false,false);
  assertWritable(file,vFile,false);
  ApplicationManager.getApplication().runWriteAction(new ThrowableComputable<Object,IOException>(){
    @Override public Object compute() throws IOException {
      vFile.setWritable(true);
      return null;
    }
  }
);
  assertWritable(file,vFile,true);
  vFile.refresh(false,false);
  assertWritable(file,vFile,true);
}
