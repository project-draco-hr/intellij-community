{
  File fromDir=createTempDirectory();
  File toDir=createTempDirectory();
  VirtualFile fromVDir=myFS.findFileByPath(fromDir.getPath().replace(File.separatorChar,'/'));
  VirtualFile toVDir=myFS.findFileByPath(toDir.getPath().replace(File.separatorChar,'/'));
  assertNotNull(fromVDir);
  assertNotNull(toVDir);
  final VirtualFile fileToCopy=createChildData(fromVDir,"temp_file");
  final byte[] byteContent={0,1,2,3};
  setBinaryContent(fileToCopy,byteContent);
  final String newName="new_temp_file";
  final VirtualFile copy=copy(fileToCopy,toVDir,newName);
  assertEquals(newName,copy.getName());
  assertTrue(Arrays.equals(byteContent,copy.contentsToByteArray()));
}
