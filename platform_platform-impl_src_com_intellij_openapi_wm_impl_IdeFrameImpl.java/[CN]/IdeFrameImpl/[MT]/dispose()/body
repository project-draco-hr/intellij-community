{
  if (SystemInfo.isMac && isInFullScreen()) {
    ((MacMainFrameDecorator)myFrameDecorator).toggleFullScreenNow();
  }
  if (isTemporaryDisposed()) {
    super.dispose();
    return;
  }
  MouseGestureManager.getInstance().remove(this);
  if (myBalloonLayout != null) {
    ((BalloonLayoutImpl)myBalloonLayout).dispose();
    myBalloonLayout=null;
  }
  if (myRootPane != null) {
    myRootPane=null;
    setRootPane(new JRootPane());
  }
  if (myFrameDecorator != null) {
    Disposer.dispose(myFrameDecorator);
    myFrameDecorator=null;
  }
  if (myWindowsBorderUpdater != null) {
    Toolkit.getDefaultToolkit().removePropertyChangeListener("win.xpstyle.themeActive",myWindowsBorderUpdater);
    myWindowsBorderUpdater=null;
  }
  FocusTrackback.release(this);
  super.dispose();
}
