{
  for (  final RefGroup refGroup : references) {
    if (refGroup.getRefs().size() == 1) {
      String name=refGroup.getRefs().iterator().next().getName();
      if (!actions.singletonGroups.contains(name)) {
        actions.singletonGroups.add(name);
      }
    }
 else     if (refGroup.isExpanded()) {
      addToGroup(refGroup,actions.expandedGroups);
    }
 else {
      addToGroup(refGroup,actions.collapsedGroups);
    }
  }
}
