{
  final PsiFile file=searchContext.getFile();
  if (file != null) {
    Language contextLanguage=null;
    PsiElement context=null;
    if (searchContext.getEditor() != null) {
      context=file.findElementAt(searchContext.getEditor().getCaretModel().getOffset());
      if (context != null) {
        context=context.getParent();
      }
    }
    if (context == null) {
      context=file;
    }
    StructuralSearchProfile profile=StructuralSearchUtil.getProfileByPsiElement(context);
    if (profile != null) {
      ourFtSearchVariant=profile.detectFileType(context);
    }
 else {
      ourFtSearchVariant=DEFAULT_FILE_TYPE_SEARCH_VARIANT;
    }
  }
}
