{
  JPanel editorPanel=new JPanel(new BorderLayout());
  editorPanel.add(BorderLayout.CENTER,createEditorContent());
  editorPanel.add(BorderLayout.SOUTH,Box.createVerticalStrut(8));
  JComponent centerPanel=new JPanel(new BorderLayout());
{
    JPanel panel=new JPanel(new BorderLayout());
    panel.add(BorderLayout.CENTER,editorPanel);
    panel.add(BorderLayout.SOUTH,createTemplateManagementButtons());
    centerPanel.add(BorderLayout.CENTER,panel);
  }
  JPanel optionsContent=new JPanel(new BorderLayout());
  centerPanel.add(BorderLayout.SOUTH,optionsContent);
  JPanel searchOptions=new JPanel();
  searchOptions.setLayout(new GridLayout(getRowsCount(),1,0,0));
  searchOptions.setBorder(IdeBorderFactory.createTitledBorder(SSRBundle.message("ssdialog.options.group.border")));
  myScopeChooserCombo=new ScopeChooserCombo(searchContext.getProject(),true,false,FindSettings.getInstance().getDefaultScopeName());
  Disposer.register(myDisposable,myScopeChooserCombo);
  JPanel allOptions=new JPanel(new BorderLayout());
  if (myShowScopePanel) {
    JPanel scopePanel=new JPanel(new BorderLayout());
    scopePanel.add(Box.createVerticalStrut(8),BorderLayout.NORTH);
    JLabel label=new JLabel(SSRBundle.message("search.dialog.scope.label"));
    scopePanel.add(label,BorderLayout.WEST);
    scopePanel.add(myScopeChooserCombo,BorderLayout.CENTER);
    label.setLabelFor(myScopeChooserCombo.getComboBox());
    allOptions.add(scopePanel,BorderLayout.SOUTH);
    myScopeChooserCombo.getComboBox().addItemListener(new ItemListener(){
      public void itemStateChanged(      ItemEvent e){
        initiateValidation();
      }
    }
);
  }
  buildOptions(searchOptions);
  allOptions.add(searchOptions,BorderLayout.CENTER);
  optionsContent.add(allOptions,BorderLayout.CENTER);
  JPanel panel=new JPanel(new BorderLayout());
  panel.setBorder(BorderFactory.createEmptyBorder(0,4,0,0));
  openInNewTab=new JCheckBox(SSRBundle.message("open.in.new.tab.checkbox"));
  openInNewTab.setSelected(ourOpenInNewTab);
  ToolWindow findWindow=ToolWindowManager.getInstance(searchContext.getProject()).getToolWindow(ToolWindowId.FIND);
  openInNewTab.setEnabled(findWindow != null && findWindow.isAvailable());
  panel.add(openInNewTab,BorderLayout.EAST);
  optionsContent.add(BorderLayout.SOUTH,panel);
  return centerPanel;
}
