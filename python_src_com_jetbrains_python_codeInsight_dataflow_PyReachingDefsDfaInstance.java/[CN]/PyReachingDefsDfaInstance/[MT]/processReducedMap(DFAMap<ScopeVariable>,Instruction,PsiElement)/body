{
  if (instruction instanceof ReadWriteInstruction) {
    final ReadWriteInstruction rwInstruction=(ReadWriteInstruction)instruction;
    final String name=rwInstruction.getName();
    final ScopeVariable variable=map.get(name);
    if (UsageAnalyzer.isParameter(element)) {
      final PsiElement scope=ScopeUtil.getScopeElement(element);
      final ScopeVariable scopeVariable=new ScopeVariableImpl(name,true,scope,element);
      map.put(name,scopeVariable);
    }
 else {
      final ScopeVariableImpl scopeVariable;
      final boolean isParameter=variable != null && variable.isParameter();
      if (variable == null) {
        final PsiElement scope=ScopeUtil.getScopeElement(element);
        scopeVariable=new ScopeVariableImpl(name,isParameter,scope,element);
      }
 else {
        scopeVariable=new ScopeVariableImpl(name,isParameter,variable.getScope(),variable.getDeclarations());
      }
      map.put(name,scopeVariable);
    }
  }
  return map;
}
