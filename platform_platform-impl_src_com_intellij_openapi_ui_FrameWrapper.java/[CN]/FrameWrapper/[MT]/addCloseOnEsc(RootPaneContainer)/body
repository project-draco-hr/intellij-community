{
  JRootPane rootPane=frame.getRootPane();
  ActionListener closeAction=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (!PopupUtil.handleEscKeyEvent()) {
        FrameWrapper.this.myFrame.setVisible(false);
        close();
      }
    }
  }
;
  rootPane.registerKeyboardAction(closeAction,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  ActionUtil.registerForEveryKeyboardShortcut(rootPane,closeAction,CommonShortcuts.getCloseActiveWindow());
}
