{
  final Window frame=getFrame();
  final Point location;
  final Dimension size;
  final int extendedState;
  DimensionService dimensionService=DimensionService.getInstance();
  if (myDimensionKey == null || dimensionService == null) {
    location=null;
    size=null;
    extendedState=-1;
  }
 else {
    location=dimensionService.getLocationOn(null,myDimensionKey);
    size=dimensionService.getSizeOn(null,myDimensionKey);
    extendedState=dimensionService.getExtendedState(myDimensionKey);
  }
  if (size != null && location != null) {
    frame.setLocation(location);
    frame.setSize(size);
    ((RootPaneContainer)frame).getRootPane().revalidate();
  }
 else {
    final IdeFrame ideFrame=WindowManagerEx.getInstanceEx().getIdeFrame(myProject);
    if (ideFrame != null) {
      frame.pack();
      frame.setBounds(ideFrame.suggestChildFrameBounds());
    }
  }
  if (!WORKAROUND_FOR_JDK_8007219 && extendedState == Frame.MAXIMIZED_BOTH && frame instanceof JFrame) {
    ((JFrame)frame).setExtendedState(extendedState);
  }
}
