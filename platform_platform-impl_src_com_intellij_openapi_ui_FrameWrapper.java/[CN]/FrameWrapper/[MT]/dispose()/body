{
  if (isDisposed())   return;
  Window frame=myFrame;
  StatusBar statusBar=myStatusBar;
  if (myShown && myDimensionKey != null) {
    WindowStateService.getInstance().saveStateFor(myProject,myDimensionKey,frame);
  }
  myFrame=null;
  myPreferredFocus=null;
  myProject=null;
  myDataMap.clear();
  if (myFocusTrackback != null) {
    myFocusTrackback.restoreFocus();
  }
  if (myComponent != null && myFocusWatcher != null) {
    myFocusWatcher.deinstall(myComponent);
  }
  myFocusWatcher=null;
  myFocusedCallback=null;
  myFocusTrackback=null;
  myComponent=null;
  myImage=null;
  myDisposed=true;
  if (frame != null) {
    JRootPane rootPane=((RootPaneContainer)frame).getRootPane();
    if (rootPane != null) {
      DialogWrapper.unregisterKeyboardActions(rootPane);
    }
    frame.setVisible(false);
    if (frame instanceof JFrame) {
      FocusTrackback.release((JFrame)frame);
    }
    if (frame instanceof IdeFrame) {
      MouseGestureManager.getInstance().remove((IdeFrame)frame);
    }
    frame.dispose();
  }
  if (statusBar != null) {
    Disposer.dispose(statusBar);
  }
}
