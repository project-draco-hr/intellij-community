{
  CertificateFactory cf=CertificateFactory.getInstance(CertificateUtil.X509);
  Certificate ca=cf.generateCertificate(new ByteArrayInputStream(JB_CA_CERT.getBytes(ENCODING)));
  KeyStore ks=KeyStore.getInstance(CertificateUtil.JKS);
  ks.load(null,null);
  ks.setCertificateEntry("JetBrains CA",ca);
  TrustManagerFactory jbTmf=TrustManagerFactory.getInstance(CertificateUtil.X509);
  jbTmf.init(ks);
  TrustManagerFactory sysTmf=TrustManagerFactory.getInstance(CertificateUtil.X509);
  sysTmf.init((KeyStore)null);
  SSLContext ctx=SSLContext.getInstance("TLS");
  TrustManager composite=new CompositeX509TrustManager(jbTmf.getTrustManagers(),sysTmf.getTrustManagers());
  ctx.init(null,new TrustManager[]{composite},null);
  return ctx;
}
