{
  StringBuilder builder=new StringBuilder();
  for (  Map.Entry<String,String> param : params.entries()) {
    if (StringUtil.isEmpty(param.getKey())) {
      throw new IllegalArgumentException(param.toString());
    }
    if (builder.length() > 0) {
      builder.append('&');
    }
    if (StringUtil.isNotEmpty(param.getValue())) {
      builder.append(param.getKey()).append('=').append(URLEncoder.encode(param.getValue(),ENCODING));
    }
  }
  return builder.toString().getBytes(ENCODING);
}
