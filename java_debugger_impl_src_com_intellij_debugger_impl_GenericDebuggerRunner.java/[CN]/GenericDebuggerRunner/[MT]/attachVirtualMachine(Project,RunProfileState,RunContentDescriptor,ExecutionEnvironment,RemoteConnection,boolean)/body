{
  final DebuggerPanelsManager manager=DebuggerPanelsManager.getInstance(project);
  final RunContentDescriptor res=manager.attachVirtualMachine(env.getExecutor(),this,env,state,contentToReuse,connection,pollConnection);
  if (res == null)   return null;
  XDebugSession debugSession=XDebuggerManager.getInstance(project).startSession(this,env,contentToReuse,new XDebugProcessStarter(){
    @Override @NotNull public XDebugProcess start(    @NotNull XDebugSession session){
      final DebuggerManagerImpl debugManager=(DebuggerManagerImpl)DebuggerManager.getInstance(project);
      return new JavaDebugProcess(session,debugManager.getDebugSession(res.getProcessHandler()));
    }
  }
);
  return debugSession.getRunContentDescriptor();
}
