{
  if (!hasSelection) {
    int startOffset=selectedRange.getStartOffset();
    int endOffset=selectedRange.getEndOffset();
    if (CodeInsightUtil.findStatementsInRange(file,startOffset,endOffset).length == 0) {
      PsiElement elementAtLineStart=PsiTreeUtil.skipSiblingsForward(file.findElementAt(startOffset),PsiWhiteSpace.class);
      if (elementAtLineStart instanceof PsiStatement) {
        return elementAtLineStart.getTextRange();
      }
    }
  }
  return selectedRange;
}
