{
  if (StringUtil.isEmpty(jar))   return null;
  if (jar.equals(myGreclipseJar)) {
    return myGreclipseLoader;
  }
  try {
    URL[] urls={new File(jar).toURI().toURL(),new File(ObjectUtils.assertNotNull(PathManager.getJarPathForClass(GreclipseMain.class))).toURI().toURL()};
    ClassLoader loader=new URLClassLoader(urls,null);
    Class.forName("org.eclipse.jdt.internal.compiler.batch.Main",false,loader);
    myGreclipseJar=jar;
    myGreclipseLoader=loader;
    return loader;
  }
 catch (  Exception e) {
    LOG.error(e);
    return null;
  }
}
