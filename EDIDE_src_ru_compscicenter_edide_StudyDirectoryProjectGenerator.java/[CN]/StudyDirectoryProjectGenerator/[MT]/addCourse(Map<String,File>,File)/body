{
  if (courseDir.isDirectory()) {
    File[] courseFiles=courseDir.listFiles(new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        return name.equals(COURSE_META_FILE);
      }
    }
);
    if (courseFiles.length != 1) {
      LOG.error("User tried to add course with more than one or without course files");
      return null;
    }
    File courseFile=courseFiles[0];
    String courseName=getCourseName(courseFile);
    if (courseName != null) {
      String newName=courseName;
      int i=2;
      File item=courses.get(newName);
      while (item != null && !FileUtil.filesEqual(item,courseFile)) {
        newName=courseName + String.valueOf(i);
        i++;
        item=courses.get(newName);
      }
      courses.put(newName,courseFile);
    }
    return courseName;
  }
  return null;
}
