{
  myProject=project;
  mySelectedCourseFile=null;
  StudyNewCourseDialog dlg=new StudyNewCourseDialog(project,this);
  dlg.show();
  if (dlg.getExitCode() == DialogWrapper.CANCEL_EXIT_CODE) {
    LOG.info("User canceled creation study project");
    Messages.showErrorDialog("You've canceled creation of Study Project. Empty project will be created.","Cancel");
    return;
  }
  Reader reader=null;
  try {
    if (mySelectedCourseFile == null) {
      LOG.error("user didn't choose any course files");
      return;
    }
    reader=new InputStreamReader(new FileInputStream(mySelectedCourseFile));
    Gson gson=new GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES).create();
    Course course=gson.fromJson(reader,Course.class);
    course.init();
    course.create(project,baseDir,new File(mySelectedCourseFile.getParent()));
    course.setResourcePath(mySelectedCourseFile.getAbsolutePath());
    VirtualFileManager.getInstance().refreshWithoutFileWatcher(true);
    StudyTaskManager tm=StudyTaskManager.getInstance(project);
    tm.setCourse(course);
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
 finally {
    StudyUtils.closeSilently(reader);
  }
}
