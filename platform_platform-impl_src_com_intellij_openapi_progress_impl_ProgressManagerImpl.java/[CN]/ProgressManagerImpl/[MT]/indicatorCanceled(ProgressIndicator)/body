{
synchronized (threadsUnderIndicator) {
    Set<Thread> threads=threadsUnderIndicator.get(indicator);
    if (threads != null) {
      for (      Thread thread : threads) {
        ProgressIndicator currentIndicator=currentIndicators.get(thread);
        if (currentIndicator == indicator) {
          threadsUnderCanceledIndicator.add(thread);
        }
      }
    }
  }
}
