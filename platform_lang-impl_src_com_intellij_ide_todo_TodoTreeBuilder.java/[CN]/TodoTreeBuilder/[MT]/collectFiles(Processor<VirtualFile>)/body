{
  TodoTreeStructure treeStructure=getTodoTreeStructure();
  PsiFile[] psiFiles=mySearchHelper.findFilesWithTodoItems();
  for (  PsiFile psiFile : psiFiles) {
    if (mySearchHelper.getTodoItemsCount(psiFile) > 0 && treeStructure.accept(psiFile)) {
      collector.process(psiFile.getVirtualFile());
    }
  }
}
