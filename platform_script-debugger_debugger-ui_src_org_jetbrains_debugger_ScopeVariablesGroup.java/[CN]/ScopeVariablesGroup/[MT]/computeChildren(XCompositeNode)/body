{
  Promise<Void> promise=Variables.processScopeVariables(scope,node,context,callFrame == null);
  if (callFrame != null) {
    promise.done(new ConsumerRunnable(){
      @Override public void run(){
        if (node.isObsolete()) {
          return;
        }
        callFrame.getReceiverVariable().doWhenDone(new Consumer<Variable>(){
          @Override public void consume(          Variable variable){
            if (!node.isObsolete()) {
              node.addChildren(variable == null ? XValueChildrenList.EMPTY : XValueChildrenList.singleton(CallFrameBase.RECEIVER_NAME,new VariableView(variable,context)),true);
            }
          }
        }
).doWhenRejected(new Consumer<String>(){
          @Override public void consume(          @Nullable String error){
            if (!node.isObsolete()) {
              node.addChildren(XValueChildrenList.EMPTY,true);
            }
          }
        }
);
      }
    }
);
  }
}
