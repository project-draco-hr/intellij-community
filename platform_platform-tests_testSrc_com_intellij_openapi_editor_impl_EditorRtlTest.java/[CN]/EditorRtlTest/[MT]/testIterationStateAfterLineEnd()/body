{
  init("rl");
  myEditor.getCaretModel().moveToVisualPosition(new VisualPosition(0,1,true));
  IterationState it=new IterationState((EditorEx)myEditor,1,2,true,false,false,false);
  assertFalse(it.atEnd());
  assertEquals(1,it.getStartOffset());
  assertEquals(2,it.getEndOffset());
  it.advance();
  assertTrue(it.atEnd());
  assertFalse(it.hasPastLineEndBackgroundSegment());
}
