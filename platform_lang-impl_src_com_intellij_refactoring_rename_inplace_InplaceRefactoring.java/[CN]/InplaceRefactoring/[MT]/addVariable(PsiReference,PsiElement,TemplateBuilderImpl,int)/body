{
  final PsiElement element=reference.getElement();
  if (element == selectedElement && checkRangeContainsOffset(offset,reference.getRangeInElement(),element)) {
    builder.replaceElement(reference.getElement(),getRangeToRename(reference),PRIMARY_VARIABLE_NAME,createLookupExpression(selectedElement),true);
  }
 else {
    builder.replaceElement(reference.getElement(),getRangeToRename(reference),OTHER_VARIABLE_NAME,PRIMARY_VARIABLE_NAME,false);
  }
}
