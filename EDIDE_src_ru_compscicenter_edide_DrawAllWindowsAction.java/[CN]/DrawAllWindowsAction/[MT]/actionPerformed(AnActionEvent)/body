{
  Project project=e.getProject();
  TaskManager tm=StudyPlugin.getTaskManager(project.getName());
  if (!(project != null && project.isOpen())) {
    return;
  }
  Editor editor=StudyEditor.getRecentOpenedEditor(project);
  if (editor == null) {
    return;
  }
  VirtualFile vfOpenedFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
  if (vfOpenedFile == null) {
    return;
  }
  String fileName=vfOpenedFile.getName();
  int num=tm.getTaskNumForFile(fileName);
  TaskFile tf=tm.getTaskFile(num,fileName);
  int tw_num=tf.getTaskWindowNum();
  if (editor.getMarkupModel().getAllHighlighters().length >= tw_num) {
    editor.getMarkupModel().removeAllHighlighters();
    return;
  }
  tf.drawAllWindows(editor);
}
