{
  Project project=e.getProject();
  TaskManager tm=TaskManager.getInstance();
  if (!(project != null && project.isOpen())) {
    return;
  }
  Editor editor=StudyEditor.getRecentOpenedEditor(project);
  if (editor == null) {
    return;
  }
  VirtualFile vfOpenedFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
  int num=tm.getTaskNumForFile(vfOpenedFile.getName());
  TaskFile tf=tm.getTaskFile(num,vfOpenedFile.getName());
  int tw_num=tf.getTaskWindowNum();
  if (editor.getMarkupModel().getAllHighlighters().length >= tw_num) {
    editor.getMarkupModel().removeAllHighlighters();
    return;
  }
  tf.drawAllWindows(editor);
}
