{
  final PyClass containingClass=node.getContainingClass();
  if (containingClass == null)   return;
  if (PythonUnitTestUtil.isUnitTestCaseClass(containingClass) || ApplicationManager.getApplication().isUnitTestMode()) {
    final String functionName=node.getName();
    if (functionName != null && functionName.startsWith("setUp"))     return;
  }
  Map<String,PyTargetExpression> attributesInInit=new HashMap<String,PyTargetExpression>();
  final PyFunction initMethod=containingClass.findMethodByName(PyNames.INIT,false);
  if (initMethod != null) {
    PyClassImpl.collectInstanceAttributes(initMethod,attributesInInit);
    collectAttributesFromSuper(attributesInInit,initMethod);
  }
 else {
    for (    PyClass superClass : containingClass.getAncestorClasses()) {
      final PyFunction superInit=superClass.findMethodByName(PyNames.INIT,false);
      if (superInit != null)       PyClassImpl.collectInstanceAttributes(superInit,attributesInInit);
    }
  }
  Map<String,PyTargetExpression> attributes=new HashMap<String,PyTargetExpression>();
  PyClassImpl.collectInstanceAttributes(node,attributes);
  for (  Map.Entry<String,PyTargetExpression> attribute : attributes.entrySet()) {
    if (!attributesInInit.containsKey(attribute.getKey())) {
      registerProblem(attribute.getValue(),PyBundle.message("INSP.attribute.$0.outside.init",attribute.getKey()),new PyMoveAttributeToInitQuickFix());
    }
  }
}
