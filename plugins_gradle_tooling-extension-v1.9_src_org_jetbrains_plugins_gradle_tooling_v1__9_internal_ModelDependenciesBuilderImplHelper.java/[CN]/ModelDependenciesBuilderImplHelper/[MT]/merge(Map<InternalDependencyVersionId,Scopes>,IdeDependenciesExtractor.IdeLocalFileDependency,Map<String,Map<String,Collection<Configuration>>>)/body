{
  final String configurationName=dependency.getDeclaredConfiguration().getName();
  final GradleDependencyScope scope=deduceScope(configurationName,userScopes);
  if (scope == null)   return;
  String path=dependency.getFile().getPath();
  InternalDependencyVersionId versionId=new InternalDependencyVersionId(dependency,path,path,dependency.getFile().getName(),"","",null);
  Scopes scopes=map.get(versionId);
  if (scopes == null) {
    map.put(versionId,new Scopes(scope));
  }
 else {
    scopes.add(scope);
  }
}
