{
  if (!myImported) {
    myImported=true;
    return new ImportedTestRunnableState(this,VfsUtilCore.virtualToIoFile(myFile));
  }
  if (mySettings != null) {
    try {
      final RunConfiguration configuration=mySettings.getConfiguration();
      if (configuration instanceof UserDataHolder) {
        ((UserDataHolder)configuration).putUserData(TestResultsXmlFormatter.SETTINGS,mySettings);
      }
      return configuration.getState(executor,environment);
    }
 catch (    Throwable e) {
      LOG.info(e);
      throw new ExecutionException("Unable to run the configuration: settings are corrupted");
    }
  }
  throw new ExecutionException("Unable to run the configuration: failed to detect test framework");
}
