{
  myFile=file;
  myProject=project;
  try {
    final Element config=JDOMUtil.load(VfsUtilCore.virtualToIoFile(myFile)).getChild("config");
    if (config != null) {
      String configTypeId=config.getAttributeValue("configId");
      if (configTypeId != null) {
        final ConfigurationType configurationType=ConfigurationTypeUtil.findConfigurationType(configTypeId);
        if (configurationType != null) {
          myConfiguration=configurationType.getConfigurationFactories()[0].createTemplateConfiguration(project);
          myConfiguration.setName(config.getAttributeValue("name"));
          myConfiguration.readExternal(config);
          final Executor executor=ExecutorRegistry.getInstance().getExecutorById(DefaultRunExecutor.EXECUTOR_ID);
          if (executor != null) {
            if (myConfiguration instanceof SMRunnerConsolePropertiesProvider) {
              myProperties=((SMRunnerConsolePropertiesProvider)myConfiguration).createTestConsoleProperties(executor);
            }
          }
        }
      }
      myTargetId=config.getAttributeValue("target");
    }
  }
 catch (  Exception ignore) {
  }
}
