{
  try {
    final ProjectDescriptor pd=context.getProjectDescriptor();
    final List<String> notNulls=JpsJavaExtensionService.getInstance().getOrCreateCompilerConfiguration(pd.getProject()).getNotNullAnnotations();
    if (NotNullVerifyingInstrumenter.processClassFile((FailSafeClassReader)reader,writer,ArrayUtil.toStringArray(notNulls))) {
      return new BinaryContent(writer.toByteArray());
    }
  }
 catch (  Throwable e) {
    LOG.error(e);
    final Collection<File> sourceFiles=compiledClass.getSourceFiles();
    String msg="Cannot instrument " + ContainerUtil.map(sourceFiles,new Function<File,String>(){
      @Override public String fun(      File file){
        return file.getName();
      }
    }
) + ": "+ e.getMessage();
    context.processMessage(new CompilerMessage(getPresentableName(),BuildMessage.Kind.ERROR,msg,ContainerUtil.getFirstItem(compiledClass.getSourceFilesPaths())));
  }
  return null;
}
