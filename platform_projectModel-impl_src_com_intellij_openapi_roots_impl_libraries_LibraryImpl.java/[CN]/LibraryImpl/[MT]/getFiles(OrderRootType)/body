{
  checkDisposed();
  VirtualFilePointerContainer container=myRoots.get(rootType);
  if (container == null) {
    return VirtualFile.EMPTY_ARRAY;
  }
  List<VirtualFile> expanded=new SmartList<VirtualFile>();
  for (  VirtualFile file : container.getFiles()) {
    if (file.isDirectory()) {
      if (myJarDirectories.contains(rootType,file.getUrl())) {
        collectJarFiles(file,expanded,myJarDirectories.isRecursive(rootType,file.getUrl()));
        continue;
      }
    }
    expanded.add(file);
  }
  return VfsUtilCore.toVirtualFileArray(expanded);
}
