{
  final boolean useExistingClass=useExistingClass();
  final String className;
  final String packageName;
  final boolean createInnerClass=myCreateInnerClassRadioButton.isSelected();
  if (createInnerClass) {
    className=getInnerClassName();
    packageName="";
  }
 else   if (useExistingClass) {
    final String existingClassName=getExistingClassName();
    className=StringUtil.getShortName(existingClassName);
    packageName=StringUtil.getPackageName(existingClassName);
  }
 else {
    packageName=getPackageName();
    className=getClassName();
  }
  final String newVisibility=myEscalateVisibilityCheckBox.isEnabled() && myEscalateVisibilityCheckBox.isSelected() ? VisibilityUtil.ESCALATE_VISIBILITY : null;
  final MoveDestination moveDestination=((DestinationFolderComboBox)myDestinationCb).selectDirectory(new PackageWrapper(PsiManager.getInstance(myProject),packageName),false);
  final PsiParameterList parameterList=mySourceMethod.getParameterList();
  final List<ParameterInfoImpl> parameters=new ArrayList<>();
  for (  VariableData data : myParameterTablePanel.getVariableData()) {
    if (data.passAsParameter) {
      parameters.add(new ParameterInfoImpl(parameterList.getParameterIndex((PsiParameter)data.variable),data.name,data.type));
    }
  }
  final ParameterInfoImpl[] infos=parameters.toArray(new ParameterInfoImpl[parameters.size()]);
  return new JavaIntroduceParameterObjectClassDescriptor(className,packageName,moveDestination,useExistingClass,createInnerClass,newVisibility,infos,mySourceMethod,myGenerateAccessorsCheckBox.isSelected());
}
