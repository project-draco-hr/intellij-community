{
  final VirtualFile[] vFilesArray=getVirtualFileArrayFrom(files);
  return new AnActionEvent(null,new DataContext(){
    @Nullable @Override public Object getData(    @NonNls String dataId){
      if (CommonDataKeys.VIRTUAL_FILE_ARRAY.is(dataId))       return vFilesArray;
      if (CommonDataKeys.PROJECT.is(dataId))       return project;
      if (CommonDataKeys.EDITOR.is(dataId))       return eventInfo.getEditor();
      if (LangDataKeys.MODULE_CONTEXT.is(dataId))       return eventInfo.getModule();
      if (CommonDataKeys.PSI_ELEMENT.is(dataId))       return eventInfo.getElement();
      return null;
    }
  }
,"",action.getTemplatePresentation(),ActionManager.getInstance(),0);
}
