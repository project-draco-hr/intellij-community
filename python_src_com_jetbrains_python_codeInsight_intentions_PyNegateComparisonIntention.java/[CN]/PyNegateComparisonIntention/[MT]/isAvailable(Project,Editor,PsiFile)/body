{
  if (!(file instanceof PyFile)) {
    return false;
  }
  PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  PyBinaryExpression binaryExpression=PsiTreeUtil.getParentOfType(element,PyBinaryExpression.class,false);
  while (binaryExpression != null) {
    PyElementType operator=binaryExpression.getOperator();
    if (comparisonStrings.containsKey(operator)) {
      setText(PyBundle.message("INTN.negate.$0.to.$1",comparisonStrings.get(operator),comparisonStrings.get(invertedComparasions.get(operator))));
      return true;
    }
    binaryExpression=PsiTreeUtil.getParentOfType(binaryExpression,PyBinaryExpression.class);
  }
  return false;
}
