{
  BuildNumber currentBuild=BuildNumber.fromString("IU-139.658");
  TestUpdateSettings settings=new TestUpdateSettings(ChannelStatus.EAP);
  UpdateStrategyCustomization customization=new UpdateStrategyCustomization();
  UpdateStrategy strategy=new UpdateStrategy(14,currentBuild,InfoReader.read("idea-patchAvailable.xml"),settings,customization);
  CheckForUpdateResult result=strategy.checkForUpdates();
  assertEquals(UpdateStrategy.State.LOADED,result.getState());
  UpdateChannel channel=result.getUpdatedChannel();
  assertNotNull(channel);
  assertEquals(ChannelStatus.EAP,channel.getStatus());
  BuildInfo selectedChannel=result.getNewBuildInSelectedChannel();
  assertNotNull(selectedChannel);
  assertNotNull(selectedChannel.findPatchForBuild(currentBuild));
}
