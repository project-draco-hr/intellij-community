{
  final Application app=ApplicationManager.getApplication();
  if (myPostStartupActivitiesPassed)   return;
  runActivities(myDumbAwarePostStartupActivities);
  DumbService.getInstance(myProject).runWhenSmart(new Runnable(){
    public void run(){
synchronized (StartupManagerImpl.this) {
        app.assertIsDispatchThread();
        runActivities(myDumbAwarePostStartupActivities);
        if (!myNotDumbAwarePostStartupActivities.isEmpty()) {
          while (!myNotDumbAwarePostStartupActivities.isEmpty()) {
            queueSmartModeActivity(myNotDumbAwarePostStartupActivities.remove(0));
          }
          DumbService.getInstance(myProject).runWhenSmart(this);
        }
 else {
          myPostStartupActivitiesPassed=true;
        }
      }
    }
  }
);
  Registry.get("ide.firstStartup").setValue(false);
}
