{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @SuppressWarnings("SynchronizeOnThis") public void run(){
      HeavyProcessLatch.INSTANCE.processStarted();
      try {
        runActivities(myPreStartupActivities);
synchronized (StartupManagerImpl.this) {
          myPreStartupActivitiesPassed=true;
          myStartupActivitiesRunning=true;
        }
        runActivities(myStartupActivities);
synchronized (StartupManagerImpl.this) {
          myStartupActivitiesRunning=false;
          myStartupActivitiesPassed=true;
        }
      }
  finally {
        HeavyProcessLatch.INSTANCE.processFinished();
      }
    }
  }
);
}
