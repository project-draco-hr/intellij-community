{
  final File ioFile=myPath.getIOFile();
  SVNStatus status=myVcs.getFactory(ioFile).createStatusClient().doStatus(ioFile,false);
  if (myCommittedRevision == null) {
    myCommittedRevision=new SvnRevisionNumber(status.getCommittedRevision());
  }
  if (status == null || SVNStatusType.STATUS_UNVERSIONED.equals(status.getNodeStatus())) {
    myVcs.getFactory(ioFile).createRevertClient().revert(new File[]{ioFile},SVNDepth.INFINITY,null);
    updateIoFile(ioFile,SVNRevision.HEAD);
    return;
  }
 else   if (SVNStatusType.STATUS_ADDED.equals(status.getNodeStatus())) {
    myVcs.getFactory(ioFile).createRevertClient().revert(new File[]{ioFile},SVNDepth.INFINITY,null);
    updateIoFile(ioFile,SVNRevision.HEAD);
    FileUtil.delete(ioFile);
    return;
  }
 else {
    final Set<File> usedToBeAdded=new HashSet<File>();
    if (myPath.isDirectory()) {
      StatusClient statusClient=myVcs.getFactory(ioFile).createStatusClient();
      statusClient.doStatus(ioFile,SVNRevision.UNDEFINED,SVNDepth.INFINITY,false,false,false,false,new ISVNStatusHandler(){
        @Override public void handleStatus(        SVNStatus status) throws SVNException {
          if (status != null && SVNStatusType.STATUS_ADDED.equals(status.getNodeStatus())) {
            usedToBeAdded.add(status.getFile());
          }
        }
      }
,null);
    }
    myVcs.getFactory(ioFile).createRevertClient().revert(new File[]{ioFile},SVNDepth.INFINITY,null);
    for (    File wasAdded : usedToBeAdded) {
      FileUtil.delete(wasAdded);
    }
    updateIoFile(ioFile,SVNRevision.HEAD);
  }
}
