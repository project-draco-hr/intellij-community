{
  ToolbarDecorator decorator=ToolbarDecorator.createDecorator(myTree).setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      addTemplateOrGroup(button);
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      removeRows();
    }
  }
).disableDownAction().disableUpAction().addExtraAction(new AnActionButton("Duplicate",PlatformIcons.COPY_ICON){
    @Override public void actionPerformed(    @NotNull AnActionEvent e){
      copyRow();
    }
    @Override public void updateButton(    AnActionEvent e){
      e.getPresentation().setEnabled(getTemplate(getSingleSelectedIndex()) != null);
    }
  }
).addExtraAction(new AnActionButton("Restore deleted defaults",AllIcons.General.TodoDefault){
    @Override public void actionPerformed(    @NotNull AnActionEvent e){
      TemplateSettings.getInstance().reset();
      reset();
    }
    @Override public boolean isEnabled(){
      return super.isEnabled() && !TemplateSettings.getInstance().getDeletedTemplates().isEmpty();
    }
  }
);
  return decorator.setToolbarPosition(ActionToolbarPosition.RIGHT);
}
