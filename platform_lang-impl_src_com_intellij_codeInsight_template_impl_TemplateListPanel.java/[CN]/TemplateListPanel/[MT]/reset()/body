{
  myTemplateOptions.clear();
  myTemplateContext.clear();
  TemplateSettings templateSettings=TemplateSettings.getInstance();
  List<TemplateGroup> groups=new ArrayList<TemplateGroup>(templateSettings.getTemplateGroups());
  Collections.sort(groups,new Comparator<TemplateGroup>(){
    @Override public int compare(    final TemplateGroup o1,    final TemplateGroup o2){
      return o1.getName().compareToIgnoreCase(o2.getName());
    }
  }
);
  initTemplates(groups,templateSettings.getLastSelectedTemplateGroup(),templateSettings.getLastSelectedTemplateKey());
  myExpandByDefaultPanel.setSelectedChar(templateSettings.getDefaultShortcutChar());
  UiNotifyConnector.doWhenFirstShown(this,new Runnable(){
    @Override public void run(){
      updateTemplateDetails(false,false);
    }
  }
);
  myUpdateNeeded=true;
}
