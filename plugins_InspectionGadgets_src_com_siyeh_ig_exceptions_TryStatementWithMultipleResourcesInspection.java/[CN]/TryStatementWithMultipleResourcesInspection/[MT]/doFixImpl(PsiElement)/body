{
  final PsiTryStatement tryStatement=(PsiTryStatement)element.getParent();
  final PsiResourceList resourceList=tryStatement.getResourceList();
  if (resourceList == null || resourceList.getResourceVariablesCount() <= 1) {
    return;
  }
  final StringBuilder newTryStatementText=new StringBuilder();
  int count=0;
  for (  PsiResourceListElement resource : resourceList) {
    if (count > 0) {
      newTryStatementText.append("{\n");
    }
    ++count;
    newTryStatementText.append("try (").append(resource.getText()).append(")");
  }
  final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
  if (tryBlock == null) {
    return;
  }
  newTryStatementText.append(tryBlock.getText());
  for (int i=1; i < count; i++) {
    newTryStatementText.append("\n}");
  }
  final PsiCatchSection[] catchSections=tryStatement.getCatchSections();
  for (  PsiCatchSection catchSection : catchSections) {
    newTryStatementText.append(catchSection.getText());
  }
  final PsiCodeBlock finallyBlock=tryStatement.getFinallyBlock();
  if (finallyBlock != null) {
    newTryStatementText.append("finally").append(finallyBlock.getText());
  }
  PsiReplacementUtil.replaceStatement(tryStatement,newTryStatementText.toString());
}
