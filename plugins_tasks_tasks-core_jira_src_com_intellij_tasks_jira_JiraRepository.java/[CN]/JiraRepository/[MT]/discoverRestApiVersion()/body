{
  String responseBody;
  GetMethod method=new GetMethod(getRestUrl("serverInfo"));
  try {
    responseBody=executeMethod(method);
  }
 catch (  Exception e) {
    if (method.isRequestSent() && method.getStatusCode() == HttpStatus.SC_NOT_FOUND) {
      return new JiraSoapApi(this);
    }
 else {
      throw e;
    }
  }
  JsonObject object=GSON.fromJson(responseBody,JsonObject.class);
  JiraRestApi restApi=JiraRestApi.fromJiraVersion(object.get("version").getAsString(),this);
  if (restApi == null) {
    throw new Exception("JIRA below 4.2.0 doesn't have REST API and is no longer supported.");
  }
  return restApi;
}
