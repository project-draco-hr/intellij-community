{
  ensureApiVersionDiscovered();
  String resultQuery=query;
  if (isJqlSupported()) {
    if (StringUtil.isNotEmpty(mySearchQuery) && StringUtil.isNotEmpty(query)) {
      resultQuery=String.format("summary ~ '%s' and ",query) + mySearchQuery;
    }
 else     if (StringUtil.isNotEmpty(query)) {
      resultQuery=String.format("summary ~ '%s'",query);
    }
 else {
      resultQuery=mySearchQuery;
    }
  }
  return ArrayUtil.toObjectArray(myApiVersion.findTasks(resultQuery,max),Task.class);
}
