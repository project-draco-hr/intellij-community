{
  if (result.length > 0 && result[0].getElement() instanceof PsiClass) {
    for (int i=0; i < result.length; i++) {
      final CandidateInfo resolveResult=(CandidateInfo)result[i];
      final PsiElement resultElement=resolveResult.getElement();
      if (resultElement instanceof PsiClass && ((PsiClass)resultElement).hasTypeParameters()) {
        PsiSubstitutor substitutor=resolveResult.getSubstitutor();
        result[i]=new CandidateInfo(resolveResult,substitutor){
          @NotNull @Override public PsiSubstitutor getSubstitutor(){
            final PsiType[] parameters=ref.getTypeParameters();
            return super.getSubstitutor().putAll((PsiClass)resultElement,parameters);
          }
        }
;
      }
    }
  }
}
