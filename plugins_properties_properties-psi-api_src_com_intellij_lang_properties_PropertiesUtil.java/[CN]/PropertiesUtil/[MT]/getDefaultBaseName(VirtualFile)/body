{
  final String name=file.getName();
  if (!StringUtil.containsChar(name,'_')) {
    return FileUtil.getNameWithoutExtension(name);
  }
  final Matcher matcher=LOCALE_PATTERN.matcher(name);
  final String baseNameWithExtension;
  if (matcher.find()) {
    final MatchResult matchResult=matcher.toMatchResult();
    final String[] splitted=matchResult.group(1).split("_");
    if (splitted.length > 1) {
      baseNameWithExtension=name.substring(0,matchResult.start(1)) + name.substring(matchResult.end(1));
    }
 else {
      baseNameWithExtension=name;
    }
  }
 else {
    baseNameWithExtension=name;
  }
  return FileUtil.getNameWithoutExtension(baseNameWithExtension);
}
