{
  List<VcsRef> sortedRefs=new ArrayList<VcsRef>(refsToShow.size());
  MultiMap<VirtualFile,VcsRef> map=groupByRoot(refsToShow);
  for (  Map.Entry<VirtualFile,Collection<VcsRef>> entry : map.entrySet()) {
    List<VcsRef> sortedRefsForRoot=myDataHolder.getLogProvider(entry.getKey()).getRefSorter().sort(entry.getValue());
    sortedRefs.addAll(sortedRefsForRoot);
  }
  return sortedRefs;
}
