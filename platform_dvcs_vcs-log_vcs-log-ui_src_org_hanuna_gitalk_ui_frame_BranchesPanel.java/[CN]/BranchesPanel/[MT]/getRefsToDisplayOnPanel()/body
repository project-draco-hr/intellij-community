{
  Collection<VcsRef> allRefs=myUiController.getDataPack().getRefsModel().getAllRefs();
  final List<VcsRef> localRefs=ContainerUtil.filter(allRefs,new Condition<VcsRef>(){
    @Override public boolean value(    VcsRef ref){
      return ref.getType().isLocalOrHead();
    }
  }
);
  return ContainerUtil.filter(allRefs,new Condition<VcsRef>(){
    @Override public boolean value(    VcsRef ref){
      if (ref.getType() == VcsRef.RefType.REMOTE_BRANCH) {
        return !thereIsLocalRefOfHash(ref.getCommitHash(),localRefs);
      }
      if (ref.getType().isBranch()) {
        return true;
      }
      return false;
    }
  }
);
}
