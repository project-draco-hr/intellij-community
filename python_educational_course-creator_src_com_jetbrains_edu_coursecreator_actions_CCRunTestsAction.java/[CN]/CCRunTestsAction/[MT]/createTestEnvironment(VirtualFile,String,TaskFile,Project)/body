{
  try {
    String answerFileName=FileUtil.getNameWithoutExtension(fileName) + ".answer";
    final String extension=FileUtilRt.getExtension(fileName);
    final VirtualFile answerFile=taskDir.findChild(answerFileName + "." + extension);
    if (answerFile == null) {
      LOG.debug("could not find answer file " + answerFileName);
      return;
    }
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      @Override public void run(){
        final FileDocumentManager documentManager=FileDocumentManager.getInstance();
        documentManager.saveAllDocuments();
      }
    }
);
    final VirtualFile oldTaskFile=taskDir.findChild(fileName);
    if (oldTaskFile != null) {
      oldTaskFile.delete(project);
    }
    answerFile.copy(project,taskDir,fileName);
    flushWindows(taskFile,answerFile);
    createResourceFiles(answerFile,project);
  }
 catch (  IOException e) {
    LOG.error(e);
  }
}
