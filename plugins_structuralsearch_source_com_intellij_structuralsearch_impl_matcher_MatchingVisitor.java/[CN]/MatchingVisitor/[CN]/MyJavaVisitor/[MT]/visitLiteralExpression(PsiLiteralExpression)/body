{
  final PsiLiteralExpression const2=(PsiLiteralExpression)element;
  MatchingHandler handler=(MatchingHandler)const1.getUserData(CompiledPattern.HANDLER_KEY);
  if (handler instanceof SubstitutionHandler) {
    int offset=0;
    int length=const2.getTextLength();
    final String text=const2.getText();
    if (length > 2 && text.charAt(0) == '"' && text.charAt(length - 1) == '"') {
      length--;
      offset++;
    }
    result=((SubstitutionHandler)handler).handle(const2,offset,length,matchContext);
  }
 else   if (handler != null) {
    result=handler.match(const1,const2,matchContext);
  }
 else {
    result=const1.textMatches(const2);
  }
}
