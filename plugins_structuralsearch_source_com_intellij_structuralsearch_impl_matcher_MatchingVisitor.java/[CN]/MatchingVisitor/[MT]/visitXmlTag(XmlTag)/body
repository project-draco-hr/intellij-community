{
  final XmlTag another=(XmlTag)element;
  final boolean isTypedVar=matchContext.getPattern().isTypedVar(tag.getName());
  result=(tag.getName().equals(another.getName()) || isTypedVar) && matchInAnyOrder(tag.getAttributes(),another.getAttributes());
  final XmlTag[] subTags=tag.getSubTags();
  if (result && subTags != null && subTags.length > 0) {
    result=matchSequentially(new ArrayBackedNodeIterator(subTags),new ArrayBackedNodeIterator(another.getSubTags()));
  }
  if (result && isTypedVar) {
    Handler handler=matchContext.getPattern().getHandler(tag.getName());
    result=((SubstitutionHandler)handler).handle(another,matchContext);
  }
}
