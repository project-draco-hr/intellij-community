{
  final MatchingHandler handler=matchContext.getPattern().getHandler(patternElement);
  if (handler instanceof SubstitutionHandler) {
    final SubstitutionHandler handler2=(SubstitutionHandler)handler;
    if (!handler2.isSubtype()) {
      if (handler2.isStrictSubtype()) {
        return (element.getParent() != clazz);
      }
    }
 else {
      return true;
    }
  }
  return (element.getParent() == clazz);
}
