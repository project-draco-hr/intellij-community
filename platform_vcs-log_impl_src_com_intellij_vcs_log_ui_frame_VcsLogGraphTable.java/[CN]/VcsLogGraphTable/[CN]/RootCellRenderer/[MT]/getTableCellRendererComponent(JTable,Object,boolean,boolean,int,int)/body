{
  String text;
  Color color;
  if (value instanceof VirtualFile) {
    VirtualFile root=(VirtualFile)value;
    int readableRow=TableScrollingUtil.getReadableRow(table,Math.round(HEIGHT_CELL * 0.5f));
    if (row < readableRow) {
      text="";
    }
 else     if (row == 0 || !value.equals(table.getModel().getValueAt(row - 1,column)) || readableRow == row) {
      text=root.getName();
    }
 else {
      text="";
    }
    color=myUi.getColorManager().getRootColor(root);
  }
 else {
    text=null;
    color=UIUtil.getTableBackground(isSelected);
  }
  if (myUi.isShowRootNames()) {
    if (isSelected) {
      myColor=UIUtil.getTableBackground(isSelected);
    }
 else {
      Color transparentColor=new Color(color.getRed(),color.getGreen(),color.getBlue(),50);
      myColor=new JBColor(transparentColor,transparentColor);
    }
    setForeground(UIUtil.getTableForeground(isSelected));
    setText(text);
    myHasBorder=false;
  }
 else {
    setForeground(UIUtil.getTableForeground(false));
    myColor=color;
    setText("");
    myHasBorder=true;
  }
  return this;
}
