{
  VcsShortCommitDetails details;
  if (row != null && row >= 0) {
    details=getModel().getShortDetails(row);
  }
 else {
    details=myLogDataManager.getMiniDetailsGetter().getCommitData(commit,Collections.singleton(commit));
  }
  String balloonText="";
  if (details instanceof LoadingDetails) {
    CommitId commitId=myLogDataManager.getCommitId(commit);
    if (commitId != null) {
      balloonText="Jump to commit" + " " + commitId.getHash().toShortString();
      if (myUi.isMultipleRoots()) {
        balloonText+=" in " + commitId.getRoot().getName();
      }
    }
  }
 else {
    balloonText="Jump to <b>\"" + StringUtil.shortenTextWithEllipsis(details.getSubject(),50,0,"...") + "\"</b> by "+ VcsUserUtil.getShortPresentation(details.getAuthor())+ DetailsPanel.formatDateTime(details.getAuthorTime());
  }
  return balloonText;
}
