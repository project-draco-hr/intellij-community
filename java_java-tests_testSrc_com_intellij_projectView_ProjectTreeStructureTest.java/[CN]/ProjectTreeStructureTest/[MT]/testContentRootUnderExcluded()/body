{
  VirtualFile mainModuleRoot=ModuleRootManager.getInstance(myModule).getContentRoots()[0];
  PsiTestUtil.addExcludedRoot(myModule,mainModuleRoot.findFileByRelativePath("exc"));
  PsiTestUtil.addContentRoot(myModule,mainModuleRoot.findFileByRelativePath("exc/gen"));
  myStructure.setShowLibraryContents(false);
  assertStructureEqual("Project\n" + " contentRootUnderExcluded\n" + "  B.txt\n"+ "  exc\n"+ "   excluded.txt\n"+ "   gen\n"+ "    A.java\n"+ " testContentRootUnderExcluded.iml\n");
  myStructure.hideExcludedFiles();
  assertStructureEqual("Project\n" + " Module\n" + "  contentRootUnderExcluded\n"+ "   B.txt\n"+ "  gen\n"+ "   A.java\n"+ " testContentRootUnderExcluded.iml\n");
}
