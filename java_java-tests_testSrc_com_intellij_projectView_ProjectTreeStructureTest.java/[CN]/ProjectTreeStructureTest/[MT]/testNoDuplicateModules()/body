{
  VirtualFile mainModuleRoot=ModuleRootManager.getInstance(myModule).getContentRoots()[0];
  PsiTestUtil.addExcludedRoot(myModule,mainModuleRoot.findFileByRelativePath("src/com/package1/p2"));
  Module module=createModule("nested_module");
  ModuleManagerImpl.getInstanceImpl(myProject).setModuleGroupPath(module,new String[]{"modules"});
  PsiTestUtil.addContentRoot(module,mainModuleRoot.findFileByRelativePath("src/com/package1/p2/p3"));
  myStructure.setShowLibraryContents(false);
  myStructure.hideExcludedFiles();
  assertStructureEqual("Project\n" + " nested_module.iml\n" + " noDuplicateModules\n"+ "  src\n"+ "   com\n"+ "    package1\n"+ "     Test.java\n"+ " testNoDuplicateModules.iml\n");
}
