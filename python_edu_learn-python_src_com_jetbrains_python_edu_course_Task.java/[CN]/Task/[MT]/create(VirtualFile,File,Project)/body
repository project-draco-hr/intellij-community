{
  VirtualFile taskDir=lessonDir.createChildDirectory(this,TASK_DIR + Integer.toString(myIndex + 1));
  StudyUtils.markDirAsSourceRoot(taskDir,project);
  File newResourceRoot=new File(resourceRoot,taskDir.getName());
  int i=0;
  for (  Map.Entry<String,TaskFile> taskFile : taskFiles.entrySet()) {
    TaskFile taskFileContent=taskFile.getValue();
    taskFileContent.setIndex(i);
    i++;
    taskFileContent.create(taskDir,newResourceRoot,taskFile.getKey());
  }
  File[] filesInTask=newResourceRoot.listFiles();
  if (filesInTask != null) {
    for (    File file : filesInTask) {
      String fileName=file.getName();
      if (!isTaskFile(fileName)) {
        File resourceFile=new File(newResourceRoot,fileName);
        File fileInProject=new File(taskDir.getCanonicalPath(),fileName);
        FileUtil.copy(resourceFile,fileInProject);
      }
    }
  }
}
