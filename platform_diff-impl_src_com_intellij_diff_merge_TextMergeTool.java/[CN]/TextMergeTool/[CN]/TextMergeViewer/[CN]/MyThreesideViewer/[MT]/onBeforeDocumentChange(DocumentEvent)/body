{
  super.onBeforeDocumentChange(e);
  if (myAllMergeChanges.isEmpty())   return;
  ThreeSide side=null;
  if (e.getDocument() == getEditor(ThreeSide.LEFT).getDocument())   side=ThreeSide.LEFT;
  if (e.getDocument() == getEditor(ThreeSide.RIGHT).getDocument())   side=ThreeSide.RIGHT;
  if (e.getDocument() == getEditor(ThreeSide.BASE).getDocument())   side=ThreeSide.BASE;
  if (side == null) {
    LOG.warn("Unknown document changed");
    return;
  }
  if (side != ThreeSide.BASE) {
    LOG.error("Non-base side was changed");
    return;
  }
  int line1=e.getDocument().getLineNumber(e.getOffset());
  int line2=e.getDocument().getLineNumber(e.getOffset() + e.getOldLength()) + 1;
  int shift=DiffUtil.countLinesShift(e);
  for (  TextMergeChange change : myAllMergeChanges) {
    if (change.processBaseChange(line1,line2,shift)) {
      myChangesToUpdate.add(change);
    }
  }
}
