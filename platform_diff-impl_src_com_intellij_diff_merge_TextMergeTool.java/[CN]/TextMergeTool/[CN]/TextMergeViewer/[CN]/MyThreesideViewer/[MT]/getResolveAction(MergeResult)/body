{
  String caption=MergeUtil.getResolveActionTitle(result,myMergeRequest,myMergeContext);
  return new AbstractAction(caption){
    @Override public void actionPerformed(    ActionEvent e){
      if (result == MergeResult.RESOLVED) {
        if ((getChangesCount() != 0 || getConflictsCount() != 0) && Messages.showYesNoDialog(myPanel.getRootPane(),DiffBundle.message("merge.dialog.apply.partially.resolved.changes.confirmation.message",getChangesCount(),getConflictsCount()),DiffBundle.message("apply.partially.resolved.merge.dialog.title"),Messages.getQuestionIcon()) != Messages.YES) {
          return;
        }
      }
      if (result == MergeResult.CANCEL) {
        if (Messages.showYesNoDialog(myPanel.getRootPane(),DiffBundle.message("merge.dialog.exit.without.applying.changes.confirmation.message"),DiffBundle.message("cancel.visual.merge.dialog.title"),Messages.getQuestionIcon()) != Messages.YES) {
          return;
        }
      }
      destroyChangedBlocks();
      myMergeContext.finishMerge(result);
    }
  }
;
}
