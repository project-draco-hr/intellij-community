{
  boolean ret=false;
  VarType rightType=exprent.getExprType();
  TextBuffer res=exprent.toJava(indent,tracer);
  boolean cast=!leftType.isSuperset(rightType) && (rightType.equals(VarType.VARTYPE_OBJECT) || leftType.type != CodeConstants.TYPE_OBJECT);
  cast|=castAlways;
  if (!cast && castNull && rightType.type == CodeConstants.TYPE_NULL) {
    cast=!UNDEFINED_TYPE_STRING.equals(getTypeName(leftType));
  }
  if (!cast) {
    cast=isIntConstant(exprent) && VarType.VARTYPE_INT.isStrictSuperset(leftType);
  }
  if (cast) {
    if (exprent.getPrecedence() >= FunctionExprent.getPrecedence(FunctionExprent.FUNCTION_CAST)) {
      res.enclose("(",")");
    }
    res.prepend("(" + getCastTypeName(leftType) + ")");
    ret=true;
  }
  buffer.append(res);
  return ret;
}
