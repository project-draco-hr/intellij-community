{
  ChangeFormatDialog dialog=new ChangeFormatDialog(myProject,new File(wcInfo.getPath()),false,!wcInfo.isIsWcRoot());
  dialog.setSupported(supportedFormats);
  dialog.setData(wcInfo.getFormat());
  if (!dialog.showAndGet()) {
    return;
  }
  final WorkingCopyFormat newFormat=dialog.getUpgradeMode();
  if (!wcInfo.getFormat().equals(newFormat)) {
    ApplicationManager.getApplication().saveAll();
    final Task.Backgroundable task=new SvnFormatWorker(myProject,newFormat,wcInfo){
      @Override public void onSuccess(){
        super.onSuccess();
        myRefreshLabel.doClick();
      }
    }
;
    ProgressManager.getInstance().run(task);
  }
}
