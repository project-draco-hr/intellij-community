{
  Graphics g=myEditorComponent.getGraphics();
  if (g == null)   return;
  int offset=e.getOffset();
  String newText=e.getNewFragment().toString();
  Rectangle newArea=lineRectangleBetween(offset,offset + newText.length());
  int delta=newArea.width - myOldArea.width;
  Color lineColor=getCaretRowBackground();
  if (delta != 0) {
    shift(g,myOldTailArea,delta);
    if (delta < 0) {
      Rectangle remainingArea=new Rectangle(myOldTailArea.x + myOldTailArea.width + delta,myOldTailArea.y,-delta,myOldTailArea.height);
      fill(g,remainingArea,lineColor);
    }
  }
  if (!newArea.isEmpty()) {
    TextAttributes attributes=myHighlighter.createIterator(offset).getTextAttributes();
    Point point=newArea.getLocation();
    int ascent=getAscent();
    Font font=fontFor(attributes.getFontType());
    Color color=attributes.getForegroundColor();
    EditorUIUtil.setupAntialiasing(g);
    fill(g,newArea,lineColor);
    print(g,newText,point,ascent,font,color);
  }
}
