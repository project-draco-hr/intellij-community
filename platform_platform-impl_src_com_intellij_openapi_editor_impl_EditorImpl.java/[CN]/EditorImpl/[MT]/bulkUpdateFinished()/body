{
  myFoldingModel.onBulkDocumentUpdateFinished();
  mySoftWrapModel.onBulkDocumentUpdateFinished();
  myCaretModel.onBulkDocumentUpdateFinished();
  clearTextWidthCache();
  mySelectionModel.removeBlockSelection();
  setMouseSelectionState(MOUSE_SELECTION_STATE_NONE);
  mySizeContainer.reset();
  validateSize();
  updateGutterSize();
  repaintToScreenBottom(0);
  updateCaretCursor();
  restoreCaretRelativePosition();
}
