{
  assertIsDispatchThread();
  int currentHorOffset=myScrollingModel.getHorizontalScrollOffset();
  myScrollBarOrientation=type;
  if (Registry.is("ide.scroll.new.layout")) {
    myScrollPane.putClientProperty(JBScrollPane.Flip.class,type == VERTICAL_SCROLLBAR_LEFT ? JBScrollPane.Flip.HORIZONTAL : null);
    JScrollBar vsb=myScrollPane.getVerticalScrollBar();
    if (vsb != null)     vsb.setOpaque(true);
  }
 else   if (type == VERTICAL_SCROLLBAR_LEFT) {
    myScrollPane.setLayout(new LeftHandScrollbarLayout());
  }
 else {
    myScrollPane.setLayout(new ScrollPaneLayout());
  }
  myScrollingModel.scrollHorizontally(currentHorOffset);
}
