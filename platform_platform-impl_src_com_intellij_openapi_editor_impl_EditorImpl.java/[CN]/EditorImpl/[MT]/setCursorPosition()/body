{
  final List<CaretRectangle> caretPoints=new ArrayList<CaretRectangle>();
  for (  Caret caret : getCaretModel().getAllCarets()) {
    VisualPosition caretPosition=caret.getVisualPosition();
    Point pos1=visualPositionToXY(caretPosition,true);
    Point pos2=visualPositionToXY(new VisualPosition(caretPosition.line,caretPosition.column + 1),false);
    caretPoints.add(new CaretRectangle(pos1,pos2.x - pos1.x,caret,myUseNewRendering));
  }
  myCaretCursor.setPositions(caretPoints.toArray(new CaretRectangle[caretPoints.size()]));
}
