{
  if (myContextMenuGroupId != null && event.getArea() == EditorMouseEventArea.EDITING_AREA && event.getMouseEvent().isPopupTrigger() && !event.isConsumed()) {
    String contextMenuGroupId=myContextMenuGroupId;
    Inlay inlay=myInlayModel.getElementAt(event.getMouseEvent().getPoint());
    if (inlay != null) {
      String inlayContextMenuGroupId=inlay.getRenderer().getContextMenuGroupId();
      if (inlayContextMenuGroupId != null)       contextMenuGroupId=inlayContextMenuGroupId;
    }
    AnAction action=CustomActionsSchema.getInstance().getCorrectedAction(contextMenuGroupId);
    if (action instanceof ActionGroup) {
      ActionPopupMenu popupMenu=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.EDITOR_POPUP,(ActionGroup)action);
      MouseEvent e=event.getMouseEvent();
      final Component c=e.getComponent();
      if (c != null && c.isShowing()) {
        popupMenu.getComponent().show(c,e.getX(),e.getY());
      }
      e.consume();
    }
  }
}
