{
  final Location location=context.getLocation();
  if (location != null) {
    final VirtualFile vFile=location.getVirtualFile();
    if (vFile instanceof VirtualFileWithId && vFile.getFileType() == ScratchFileType.INSTANCE) {
      final PsiFile psiFile=location.getPsiElement().getContainingFile();
      if (psiFile != null && psiFile.getLanguage() == JavaLanguage.INSTANCE) {
        configuration.SCRATCH_FILE_ID=((VirtualFileWithId)vFile).getId();
        return super.setupConfigurationFromContext(configuration,context,sourceElement);
      }
    }
  }
  return false;
}
