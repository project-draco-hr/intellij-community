{
  myGroupId="root";
  HashMap<String,SortedConfigurableGroup> map=new HashMap<String,SortedConfigurableGroup>();
  map.put(myGroupId,this);
  for (  Configurable configurable : configurables) {
    int weight=0;
    String groupId=null;
    if (configurable instanceof ConfigurableWrapper) {
      ConfigurableWrapper wrapper=(ConfigurableWrapper)configurable;
      weight=wrapper.getExtensionPoint().groupWeight;
      groupId=wrapper.getExtensionPoint().groupId;
    }
    SortedConfigurableGroup composite=map.get(groupId);
    if (composite == null) {
      composite=new SortedConfigurableGroup(groupId);
      map.put(groupId,composite);
    }
    composite.add(weight,configurable);
  }
  add(70,map.remove("appearance"));
  add(60,map.remove("editor"));
  SortedConfigurableGroup projectGroup=map.remove("project");
  if (projectGroup != null && project != null && !project.isDefault()) {
    projectGroup.myDisplayName=StringUtil.first(OptionsBundle.message("configurable.group.project.named.settings.display.name",project.getName()),30,true);
  }
  add(40,projectGroup);
  SortedConfigurableGroup build=map.remove("build");
  if (build == null) {
    build=map.remove("build.tools");
  }
 else {
    build.add(1000,map.remove("build.tools"));
  }
  add(30,build);
  add(20,map.remove("language"));
  add(10,map.remove("tools"));
  add(-10,map.remove(null));
  if (1 < map.size()) {
    for (    SortedConfigurableGroup group : map.values()) {
      if (this != group) {
        group.myDisplayName=OptionsBundle.message("configurable.group.category.named.settings.display.name",group.myGroupId);
        add(0,group);
      }
    }
  }
}
