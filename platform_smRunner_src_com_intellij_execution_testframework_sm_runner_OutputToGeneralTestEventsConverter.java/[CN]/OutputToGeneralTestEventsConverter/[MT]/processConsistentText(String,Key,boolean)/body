{
  if (text.length() > CYCLE_BUFFER_SIZE) {
    final StringBuilder builder=new StringBuilder(CYCLE_BUFFER_SIZE);
    builder.append(text,0,CYCLE_BUFFER_SIZE - 105);
    builder.append("<...>");
    builder.append(text,text.length() - 100,text.length());
    text=builder.toString();
  }
  try {
    if (!processServiceMessages(text,outputType,myServiceMessageVisitor)) {
      if (myPendingLineBreakFlag) {
        fireOnUncapturedLineBreak();
        myPendingLineBreakFlag=false;
      }
      String outputToProcess=text;
      if (tcLikeFakeOutput && text.endsWith("\n")) {
        myPendingLineBreakFlag=true;
        outputToProcess=outputToProcess.substring(0,outputToProcess.length() - 1);
      }
      fireOnUncapturedOutput(outputToProcess,outputType);
    }
 else {
      myPendingLineBreakFlag=false;
    }
  }
 catch (  ParseException e) {
    LOG.error(getTFrameworkPrefix(myTestFrameworkName) + "Error parsing text: [" + text+ "]",e);
  }
}
