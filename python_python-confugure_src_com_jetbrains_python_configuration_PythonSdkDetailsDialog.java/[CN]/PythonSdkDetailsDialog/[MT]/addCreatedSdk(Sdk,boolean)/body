{
  if (sdk != null) {
    final PySdkService sdkService=PySdkService.getInstance();
    sdkService.restoreSdk(sdk);
    boolean isVirtualEnv=PythonSdkType.isVirtualEnv(sdk);
    if (isVirtualEnv && !newVirtualEnv) {
      AddVEnvOptionsDialog dialog=new AddVEnvOptionsDialog(myMainPanel);
      dialog.show();
      if (dialog.getExitCode() != DialogWrapper.OK_EXIT_CODE) {
        return;
      }
      SdkModificator modificator=myModificators.get(sdk);
      setSdkAssociated(modificator,!dialog.makeAvailableToAll());
      myModifiedModificators.add(modificator);
    }
    final Sdk oldSdk=myProjectSdksModel.findSdk(sdk);
    if (oldSdk == null) {
      myProjectSdksModel.addSdk(sdk);
    }
    refreshSdkList();
    mySdkList.setSelectedValue(myProjectSdksModel.findSdk(sdk.getName()),true);
    mySdkListChanged=true;
  }
}
