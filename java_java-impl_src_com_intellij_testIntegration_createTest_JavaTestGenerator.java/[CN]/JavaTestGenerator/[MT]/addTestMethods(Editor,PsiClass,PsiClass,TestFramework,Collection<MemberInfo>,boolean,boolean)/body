{
  final Set<String> existingNames=new HashSet<String>();
  PsiMethod anchor=null;
  if (generateBefore && descriptor.findSetUpMethod(targetClass) == null) {
    anchor=generateMethod(TestIntegrationUtils.MethodKind.SET_UP,descriptor,targetClass,sourceClass,editor,null,existingNames,null);
  }
  if (generateAfter && descriptor.findTearDownMethod(targetClass) == null) {
    anchor=generateMethod(TestIntegrationUtils.MethodKind.TEAR_DOWN,descriptor,targetClass,sourceClass,editor,null,existingNames,anchor);
  }
  final Template template=TestIntegrationUtils.createTestMethodTemplate(TestIntegrationUtils.MethodKind.TEST,descriptor,targetClass,sourceClass,null,true,existingNames);
  final String prefix=JavaPsiFacade.getElementFactory(targetClass.getProject()).createMethodFromText(template.getTemplateText(),targetClass).getName();
  existingNames.addAll(ContainerUtil.map(targetClass.getMethods(),new Function<PsiMethod,String>(){
    @Override public String fun(    PsiMethod method){
      return StringUtil.decapitalize(StringUtil.trimStart(method.getName(),prefix));
    }
  }
));
  for (  MemberInfo m : methods) {
    anchor=generateMethod(TestIntegrationUtils.MethodKind.TEST,descriptor,targetClass,sourceClass,editor,m.getMember().getName(),existingNames,anchor);
  }
}
