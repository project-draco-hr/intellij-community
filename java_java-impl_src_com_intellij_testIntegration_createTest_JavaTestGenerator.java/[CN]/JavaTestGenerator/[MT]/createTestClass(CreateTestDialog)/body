{
  final TestFramework testFrameworkDescriptor=d.getSelectedTestFrameworkDescriptor();
  final FileTemplateDescriptor fileTemplateDescriptor=TestIntegrationUtils.MethodKind.TEST_CLASS.getFileTemplateDescriptor(testFrameworkDescriptor);
  final PsiDirectory targetDirectory=d.getTargetDirectory();
  if (fileTemplateDescriptor != null) {
    final PsiClass classFromTemplate=createTestClassFromCodeTemplate(d,fileTemplateDescriptor,targetDirectory);
    if (classFromTemplate != null) {
      return classFromTemplate;
    }
  }
  return JavaDirectoryService.getInstance().createClass(targetDirectory,d.getClassName());
}
