{
  if (result == null) {
    throw new VcsException("Couldn't execute Mercurial command");
  }
  if (fatalErrorOccurred(result) && !HgErrorUtil.isAncestorMergeError(result)) {
    throw new VcsException(result.getRawError());
  }
  return result;
}
