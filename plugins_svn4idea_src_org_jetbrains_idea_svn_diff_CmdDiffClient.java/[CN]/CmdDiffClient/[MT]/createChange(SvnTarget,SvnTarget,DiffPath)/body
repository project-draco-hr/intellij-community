{
  File oldTarget=CommandUtil.resolvePath(target1.getFile(),diffPath.path);
  String relativePath=FileUtil.getRelativePath(target1.getFile(),oldTarget);
  if (relativePath == null) {
    throw new SvnBindException("Could not get relative path for " + target1.getFile() + " and "+ oldTarget);
  }
  FilePath localPath=VcsUtil.getFilePath(oldTarget,diffPath.isDirectory());
  FilePath remotePath=VcsUtil.getFilePathOnNonLocal(SVNPathUtil.append(target2.getPathOrUrlDecodedString(),FileUtil.toSystemIndependentName(relativePath)),diffPath.isDirectory());
  FileStatus status=SvnStatusConvertor.convertStatus(SvnStatusHandler.getStatus(diffPath.itemStatus),SvnStatusHandler.getStatus(diffPath.propertiesStatus));
  ContentRevision beforeRevision=status == FileStatus.ADDED ? null : createRemoteRevision(remotePath,localPath,status);
  ContentRevision afterRevision=status == FileStatus.DELETED ? null : createLocalRevision(localPath);
  return createChange(status,beforeRevision,afterRevision);
}
