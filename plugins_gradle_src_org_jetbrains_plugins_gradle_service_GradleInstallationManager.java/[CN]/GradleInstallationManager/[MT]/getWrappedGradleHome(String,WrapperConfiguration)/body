{
  if (wrapperConfiguration == null) {
    return null;
  }
  File gradleSystemDir;
  if (Wrapper.PathBase.PROJECT.name().equals(wrapperConfiguration.getDistributionBase())) {
    gradleSystemDir=new File(linkedProjectPath,".gradle");
  }
 else {
    gradleSystemDir=StartParameter.DEFAULT_GRADLE_USER_HOME;
  }
  if (!gradleSystemDir.isDirectory()) {
    return null;
  }
  PathAssembler.LocalDistribution localDistribution=new PathAssembler(gradleSystemDir).getDistribution(wrapperConfiguration);
  if (localDistribution.getDistributionDir() == null) {
    return null;
  }
  File[] distFiles=localDistribution.getDistributionDir().listFiles(new FileFilter(){
    @Override public boolean accept(    File f){
      return f.isDirectory() && StringUtil.startsWith(f.getName(),"gradle-");
    }
  }
);
  return distFiles == null || distFiles.length == 0 ? null : distFiles[0];
}
