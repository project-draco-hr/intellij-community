{
  File candidate=null;
switch (distributionType) {
case LOCAL:
    if (gradleHome != null) {
      candidate=new File(gradleHome);
    }
  break;
case DEFAULT_WRAPPED:
WrapperConfiguration wrapperConfiguration=GradleUtil.getWrapperConfiguration(linkedProjectPath);
candidate=getWrappedGradleHome(linkedProjectPath,wrapperConfiguration);
break;
case WRAPPED:
break;
case BUNDLED:
WrapperConfiguration bundledWrapperSettings=new WrapperConfiguration();
DistributionLocator distributionLocator=new DistributionLocator();
bundledWrapperSettings.setDistribution(distributionLocator.getDistributionFor(GradleVersion.current()));
candidate=getWrappedGradleHome(linkedProjectPath,bundledWrapperSettings);
break;
}
File result=null;
if (candidate != null) {
result=isGradleSdkHome(candidate) ? candidate : null;
}
if (result != null) {
return result;
}
return getAutodetectedGradleHome();
}
