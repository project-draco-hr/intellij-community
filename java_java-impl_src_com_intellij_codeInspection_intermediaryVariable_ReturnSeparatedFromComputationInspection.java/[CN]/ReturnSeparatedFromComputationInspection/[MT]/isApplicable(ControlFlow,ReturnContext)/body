{
  final int flowStart=flow.getStartOffset(context.returnScope);
  final int flowEnd=flow.getEndOffset(context.returnScope);
  if (flowStart < 0 || flowEnd < 0)   return false;
  final int returnStartOffset=flow.getStartOffset(context.returnStatement);
  final int returnEndOffset=flow.getEndOffset(context.returnStatement);
  if (returnStartOffset < 0 || returnEndOffset < 0)   return false;
  if (hasChainedAssignmentsInScope(flow,context.returnedVariable,context.returnStatement)) {
    return false;
  }
  if (context.returnScope != context.variableScope && ControlFlowUtil.hasObservableThrowExitPoints(flow,flowStart,flowEnd,new PsiElement[]{context.refactoredStatement},context.variableScope)) {
    return false;
  }
  Mover mover=new Mover(flow,context.refactoredStatement,context.returnedVariable,true);
  mover.moveTo(context.refactoredStatement,true);
  return !mover.isEmpty();
}
