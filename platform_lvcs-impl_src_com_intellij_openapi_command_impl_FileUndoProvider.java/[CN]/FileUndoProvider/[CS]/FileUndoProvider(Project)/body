{
  myProject=project;
  if (myProject == null)   return;
  LocalHistoryImpl localHistory=LocalHistoryImpl.getInstanceImpl();
  myLocalHistory=localHistory.getFacade();
  myGateway=localHistory.getGateway();
  if (myLocalHistory == null || myGateway == null)   return;
  localHistory.addVFSListenerAfterLocalHistoryOne(this,project);
  myLocalHistory.addListener(new LocalHistoryFacade.Listener(){
    @Override public void changeAdded(    Change c){
      if (!(c instanceof StructuralChange) || c instanceof ContentChange)       return;
      myLastChangeId=c.getId();
    }
  }
,myProject);
}
