{
  final GroovyConfigUtils configUtils=GroovyConfigUtils.getInstance();
  if (typeDefinition.isAnonymous()) {
    if (!configUtils.isVersionAtLeast(typeDefinition,GroovyConfigUtils.GROOVY1_7)) {
      holder.createErrorAnnotation(typeDefinition.getNameIdentifierGroovy(),GroovyBundle.message("anonymous.classes.are.not.supported",configUtils.getSDKVersion(typeDefinition)));
    }
    PsiElement superClass=((PsiAnonymousClass)typeDefinition).getBaseClassReference().resolve();
    if (superClass instanceof GrTypeDefinition && ((GrTypeDefinition)superClass).isTrait()) {
      holder.createErrorAnnotation(typeDefinition.getNameIdentifierGroovy(),GroovyBundle.message("anonymous.classes.cannot.be.created.from.traits"));
    }
  }
 else   if (typeDefinition.getContainingClass() != null && !(typeDefinition instanceof GrEnumTypeDefinition)) {
    if (!configUtils.isVersionAtLeast(typeDefinition,GroovyConfigUtils.GROOVY1_7)) {
      holder.createErrorAnnotation(typeDefinition.getNameIdentifierGroovy(),GroovyBundle.message("inner.classes.are.not.supported",configUtils.getSDKVersion(typeDefinition)));
    }
  }
  if (typeDefinition.isAnnotationType() && typeDefinition.getContainingClass() != null) {
    holder.createErrorAnnotation(typeDefinition.getNameIdentifierGroovy(),GroovyBundle.message("annotation.type.cannot.be.inner"));
  }
  checkDuplicateClass(typeDefinition,holder);
  checkCyclicInheritance(holder,typeDefinition);
}
