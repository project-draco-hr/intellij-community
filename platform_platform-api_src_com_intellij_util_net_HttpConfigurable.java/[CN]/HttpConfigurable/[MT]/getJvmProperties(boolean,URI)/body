{
  if (!USE_HTTP_PROXY && !USE_PROXY_PAC) {
    return Collections.emptyList();
  }
  List<Pair<String,String>> result=new ArrayList<>();
  if (USE_HTTP_PROXY) {
    boolean putCredentials=KEEP_PROXY_PASSWORD && StringUtil.isNotEmpty(getProxyLogin());
    if (PROXY_TYPE_IS_SOCKS) {
      result.add(pair(JavaProxyProperty.SOCKS_HOST,PROXY_HOST));
      result.add(pair(JavaProxyProperty.SOCKS_PORT,String.valueOf(PROXY_PORT)));
      if (putCredentials) {
        result.add(pair(JavaProxyProperty.SOCKS_USERNAME,getProxyLogin()));
        result.add(pair(JavaProxyProperty.SOCKS_PASSWORD,getPlainProxyPassword()));
      }
    }
 else {
      result.add(pair(JavaProxyProperty.HTTP_HOST,PROXY_HOST));
      result.add(pair(JavaProxyProperty.HTTP_PORT,String.valueOf(PROXY_PORT)));
      result.add(pair(JavaProxyProperty.HTTPS_HOST,PROXY_HOST));
      result.add(pair(JavaProxyProperty.HTTPS_PORT,String.valueOf(PROXY_PORT)));
      if (putCredentials) {
        result.add(pair(JavaProxyProperty.HTTP_USERNAME,getProxyLogin()));
        result.add(pair(JavaProxyProperty.HTTP_PASSWORD,getPlainProxyPassword()));
      }
    }
  }
 else   if (USE_PROXY_PAC && withAutodetection && uri != null) {
    List<Proxy> proxies=CommonProxy.getInstance().select(uri);
    if (proxies != null && !proxies.isEmpty()) {
      for (      Proxy proxy : proxies) {
        if (isRealProxy(proxy)) {
          SocketAddress address=proxy.address();
          if (address instanceof InetSocketAddress) {
            InetSocketAddress inetSocketAddress=(InetSocketAddress)address;
            if (Proxy.Type.SOCKS.equals(proxy.type())) {
              result.add(pair(JavaProxyProperty.SOCKS_HOST,inetSocketAddress.getHostName()));
              result.add(pair(JavaProxyProperty.SOCKS_PORT,String.valueOf(inetSocketAddress.getPort())));
            }
 else {
              result.add(pair(JavaProxyProperty.HTTP_HOST,inetSocketAddress.getHostName()));
              result.add(pair(JavaProxyProperty.HTTP_PORT,String.valueOf(inetSocketAddress.getPort())));
              result.add(pair(JavaProxyProperty.HTTPS_HOST,inetSocketAddress.getHostName()));
              result.add(pair(JavaProxyProperty.HTTPS_PORT,String.valueOf(inetSocketAddress.getPort())));
            }
          }
        }
      }
    }
  }
  return result;
}
