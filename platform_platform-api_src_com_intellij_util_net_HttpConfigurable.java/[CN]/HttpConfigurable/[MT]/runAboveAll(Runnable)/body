{
  final Runnable throughSwing=new Runnable(){
    @Override public void run(){
      if (SwingUtilities.isEventDispatchThread()) {
        runnable.run();
      }
 else {
        try {
          SwingUtilities.invokeAndWait(runnable);
        }
 catch (        InterruptedException e) {
          LOG.info(e);
        }
catch (        InvocationTargetException e) {
          LOG.info(e);
        }
      }
    }
  }
;
  ProgressIndicator progressIndicator=ProgressManager.getInstance().getProgressIndicator();
  if (progressIndicator != null && progressIndicator.isModal()) {
    WaitForProgressToShow.runOrInvokeAndWaitAboveProgress(runnable);
  }
 else {
    throughSwing.run();
  }
}
