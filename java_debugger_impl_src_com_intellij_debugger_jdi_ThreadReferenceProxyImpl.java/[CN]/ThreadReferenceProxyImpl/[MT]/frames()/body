{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  final ThreadReference threadRef=getThreadReference();
  try {
    checkValid();
    if (myFrames == null) {
      checkFrames(threadRef);
      int frameCount=frameCount();
      StackFrameProxyImpl[] frames=myFramesFromBottom.subList(0,frameCount).toArray(new StackFrameProxyImpl[frameCount]);
      myFrames=ContainerUtil.reverse(Arrays.asList(frames));
    }
  }
 catch (  ObjectCollectedException ignored) {
    return Collections.emptyList();
  }
  return myFrames;
}
