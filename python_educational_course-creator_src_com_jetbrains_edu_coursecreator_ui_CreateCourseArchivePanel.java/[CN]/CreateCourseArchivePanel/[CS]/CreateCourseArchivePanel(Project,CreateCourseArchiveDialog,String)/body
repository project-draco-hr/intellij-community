{
  setLayout(new BorderLayout());
  add(myPanel,BorderLayout.CENTER);
  myErrorIcon.setIcon(AllIcons.Actions.Lightning);
  setState(false);
  myDlg=dlg;
  String sanitizedName=FileUtil.sanitizeFileName(name);
  myNameField.setText(sanitizedName.startsWith("_") ? EduNames.COURSE : sanitizedName);
  myLocationField.setText(project.getBasePath());
  FileChooserDescriptor descriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
  myLocationField.addBrowseFolderListener("Choose location folder",null,project,descriptor);
  myLocationField.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String location=myLocationField.getText();
      File file=new File(location);
      if (!file.exists() || !file.isDirectory()) {
        myDlg.enableOKAction(false);
        setError("Invalid location");
      }
      myDlg.enableOKAction(true);
    }
  }
);
}
