{
  myFactory=new ConfigurationFactory(this){
    public RunConfiguration createTemplateConfiguration(    Project project){
      final PluginRunConfiguration runConfiguration=new PluginRunConfiguration(project,this,"");
      if (runConfiguration.VM_PARAMETERS == null) {
        runConfiguration.VM_PARAMETERS=getVmParameters();
      }
 else {
        runConfiguration.VM_PARAMETERS+=getVmParameters();
      }
      return runConfiguration;
    }
    @Override public boolean isApplicable(    @NotNull Project project){
      return TypedModuleService.getInstance(project).hasModulesOfType(PluginModuleType.getInstance());
    }
    @Override public boolean isConfigurationSingletonByDefault(){
      return true;
    }
    public RunConfiguration createConfiguration(    String name,    RunConfiguration template){
      final PluginRunConfiguration pluginRunConfiguration=(PluginRunConfiguration)template;
      if (pluginRunConfiguration.getModule() == null) {
        final Collection<Module> modules=TypedModuleService.getInstance(pluginRunConfiguration.getProject()).getModulesOfType(PluginModuleType.getInstance());
        pluginRunConfiguration.setModule(ContainerUtil.getFirstItem(modules));
      }
      return super.createConfiguration(name,pluginRunConfiguration);
    }
  }
;
}
