{
  super.visitThrowStatement(statement);
  final PsiExpression exception=ParenthesesUtils.stripParentheses(statement.getException());
  if (exception == null) {
    return;
  }
  final PsiType type=exception.getType();
  if (type == null) {
    return;
  }
  final PsiCodeBlock finallyBlock=getContainingFinallyBlock(statement,type);
  if (finallyBlock == null) {
    return;
  }
  if (exception instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)exception;
    final PsiElement target=referenceExpression.resolve();
    if (target == null || !PsiTreeUtil.isAncestor(finallyBlock,target,true)) {
      return;
    }
  }
  if (isHidingOfPreviousException(finallyBlock,statement)) {
    registerStatementError(statement);
  }
}
