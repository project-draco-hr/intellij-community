{
  super.visitThrowStatement(statement);
  final PsiCodeBlock finallyBlock=getContainingFinallyBlock(statement);
  if (finallyBlock == null) {
    return;
  }
  final PsiExpression exception=ParenthesesUtils.stripParentheses(statement.getException());
  if (exception instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)exception;
    final PsiElement target=referenceExpression.resolve();
    if (target == null || !PsiTreeUtil.isAncestor(finallyBlock,target,true)) {
      return;
    }
  }
  registerStatementError(statement);
}
