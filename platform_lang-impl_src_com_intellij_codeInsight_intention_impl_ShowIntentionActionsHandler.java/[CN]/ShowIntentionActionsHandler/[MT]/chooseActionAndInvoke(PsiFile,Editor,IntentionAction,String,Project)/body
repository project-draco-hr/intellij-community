{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("codeassists.quickFix");
  ((FeatureUsageTrackerImpl)FeatureUsageTracker.getInstance()).getFixesStats().registerInvocation();
  final Pair<PsiFile,Editor> pair=hostEditor != null && hostFile != null ? chooseBetweenHostAndInjected(hostFile,hostEditor,new PairProcessor<PsiFile,Editor>(){
    @Override public boolean process(    PsiFile psiFile,    Editor editor){
      return availableFor(psiFile,editor,action);
    }
  }
) : Pair.<PsiFile,Editor>create(null,null);
  if (pair == null)   return false;
  Runnable runnable=new Runnable(){
    @Override public void run(){
      try {
        action.invoke(project,pair.second,pair.first);
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      if (hostEditor != null) {
        DaemonCodeAnalyzer.getInstance(project).updateVisibleHighlighters(hostEditor);
      }
    }
  }
;
  if (action.startInWriteAction()) {
    final Runnable _runnable=runnable;
    runnable=new Runnable(){
      @Override public void run(){
        ApplicationManager.getApplication().runWriteAction(_runnable);
      }
    }
;
  }
  CommandProcessor.getInstance().executeCommand(project,runnable,text,null);
  return true;
}
