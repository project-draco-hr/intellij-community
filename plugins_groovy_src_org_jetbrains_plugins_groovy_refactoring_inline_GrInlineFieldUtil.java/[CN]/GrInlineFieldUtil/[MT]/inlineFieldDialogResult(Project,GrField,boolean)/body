{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new InlineHandler.Settings(){
      @Override public boolean isOnlyOneReferenceToInline(){
        return invokedOnReference;
      }
    }
;
  }
  final InlineGroovyFieldDialog dialog=new InlineGroovyFieldDialog(project,field,invokedOnReference);
  if (dialog.showAndGet()) {
    return new InlineHandler.Settings(){
      @Override public boolean isOnlyOneReferenceToInline(){
        return dialog.isInlineThisOnly();
      }
    }
;
  }
 else {
    return InlineHandler.Settings.CANNOT_INLINE_SETTINGS;
  }
}
