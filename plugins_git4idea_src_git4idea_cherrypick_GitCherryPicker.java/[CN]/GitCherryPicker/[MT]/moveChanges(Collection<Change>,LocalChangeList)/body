{
  final CountDownLatch moveChangesWaiter=new CountDownLatch(1);
  final AtomicReference<ChangeList> resultingChangeList=new AtomicReference<ChangeList>();
  ChangeListAdapter listener=new ChangeListAdapter(){
    @Override public void changesMoved(    Collection<Change> changes,    ChangeList fromList,    ChangeList toList){
      resultingChangeList.set(toList);
      moveChangesWaiter.countDown();
    }
  }
;
  try {
    myChangeListManager.addChangeListListener(listener);
    myChangeListManager.moveChangesTo(targetChangeList,originalChanges.toArray(new Change[originalChanges.size()]));
    moveChangesWaiter.await(100,TimeUnit.SECONDS);
    return resultingChangeList.get();
  }
 catch (  InterruptedException e) {
    LOG.error(e);
    return null;
  }
 finally {
    myChangeListManager.removeChangeListListener(listener);
  }
}
