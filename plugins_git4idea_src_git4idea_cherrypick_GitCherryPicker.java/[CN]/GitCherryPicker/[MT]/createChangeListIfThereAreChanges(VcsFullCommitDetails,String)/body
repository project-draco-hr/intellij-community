{
  Collection<Change> originalChanges=commit.getChanges();
  if (originalChanges.isEmpty()) {
    LOG.info("Empty commit " + commit.getId());
    return null;
  }
  if (noChangesAfterCherryPick(originalChanges)) {
    LOG.info("No changes after cherry-picking " + commit.getId());
    return null;
  }
  String changeListName=createNameForChangeList(commitMessage,0).replace('\n',' ');
  LocalChangeList changeList=((ChangeListManagerEx)myChangeListManager).addChangeList(changeListName,commitMessage,commit);
  changeList=(LocalChangeList)moveChanges(originalChanges,changeList);
  if (changeList != null && !changeList.getChanges().isEmpty()) {
    return changeList;
  }
  LOG.warn("No changes were moved to the changelist. Changes from commit: " + originalChanges + "\nAll changes: "+ myChangeListManager.getAllChanges());
  myChangeListManager.removeChangeList(changeList);
  return null;
}
