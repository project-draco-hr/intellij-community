{
  Collection<Change> originalChanges=commit.getChanges();
  if (originalChanges.isEmpty()) {
    LOG.info("Empty commit " + commit.getId());
    return null;
  }
  if (noChangesAfterCherryPick(originalChanges)) {
    LOG.info("No changes after cherry-picking " + commit.getId());
    return null;
  }
  String changeListName=createNameForChangeList(commitMessage,0).replace('\n',' ');
  LocalChangeList createdChangeList=((ChangeListManagerEx)myChangeListManager).addChangeList(changeListName,commitMessage,commit);
  LocalChangeList actualChangeList=moveChanges(originalChanges,createdChangeList);
  if (actualChangeList != null && !actualChangeList.getChanges().isEmpty()) {
    return createdChangeList;
  }
  LOG.warn("No changes were moved to the changelist. Changes from commit: " + originalChanges + "\nAll changes: "+ myChangeListManager.getAllChanges());
  myChangeListManager.removeChangeList(createdChangeList);
  return null;
}
