{
  List<Ref> allRefs=myUiController.getRefs();
  final List<Ref> localRefs=ContainerUtil.filter(allRefs,new Condition<Ref>(){
    @Override public boolean value(    Ref ref){
      return ref.getType() == Ref.RefType.LOCAL_BRANCH;
    }
  }
);
  return ContainerUtil.filter(allRefs,new Condition<Ref>(){
    @Override public boolean value(    Ref ref){
      if (ref.getType() == Ref.RefType.REMOTE_BRANCH) {
        return !thereIsLocalRefOfHash(ref.getCommitHash(),localRefs);
      }
      if (ref.getType().isBranch()) {
        return true;
      }
      return false;
    }
  }
);
}
