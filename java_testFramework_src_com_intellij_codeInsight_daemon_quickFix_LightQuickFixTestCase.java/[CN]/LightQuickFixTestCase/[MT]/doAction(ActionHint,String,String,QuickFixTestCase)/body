{
  IntentionAction action=actionHint.findAndCheck(quickFix.getAvailableActions(),"Test: " + testFullPath + "\nInfos: "+ quickFix.doHighlighting());
  if (action != null) {
    String text=action.getText();
    quickFix.invoke(action);
    UIUtil.dispatchAllInvocationEvents();
    UIUtil.dispatchAllInvocationEvents();
    if (!quickFix.shouldBeAvailableAfterExecution()) {
      final IntentionAction afterAction=quickFix.findActionWithText(text);
      if (afterAction != null) {
        fail("Action '" + text + "' is still available after its invocation in test "+ testFullPath);
      }
    }
    String expectedFilePath=ObjectUtils.notNull(quickFix.getBasePath(),"") + "/" + AFTER_PREFIX+ testName;
    quickFix.checkResultByFile("In file :" + expectedFilePath,expectedFilePath,false);
  }
}
