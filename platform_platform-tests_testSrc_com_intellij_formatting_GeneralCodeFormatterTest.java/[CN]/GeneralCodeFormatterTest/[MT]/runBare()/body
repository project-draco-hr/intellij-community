{
  if (ApplicationManager.getApplication() != null) {
    final Throwable[] throwable=new Throwable[1];
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      @Override public void run(){
        try {
          runBareImpl();
        }
 catch (        Throwable th) {
          throwable[0]=th;
        }
      }
      private void runBareImpl() throws Throwable {
        setUp();
        try {
          runTest();
        }
  finally {
          tearDown();
        }
      }
    }
);
    if (throwable[0] != null) {
      throw throwable[0];
    }
  }
 else {
    super.runBare();
  }
}
