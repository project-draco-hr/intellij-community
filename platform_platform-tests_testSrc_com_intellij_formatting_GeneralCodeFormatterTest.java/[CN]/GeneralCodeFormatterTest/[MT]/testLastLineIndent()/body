{
  final String initialText="a\n";
  final TestFormattingModel model=new TestFormattingModel(initialText);
  model.setRootBlock(new FormattingModelXmlReader(model).readTestBlock("lineIndent"));
  final CommonCodeStyleSettings.IndentOptions indentOptions=new CommonCodeStyleSettings.IndentOptions();
  indentOptions.CONTINUATION_INDENT_SIZE=8;
  indentOptions.INDENT_SIZE=4;
  indentOptions.LABEL_INDENT_SIZE=1;
  final CodeStyleSettings settings=new CodeStyleSettings(false);
  settings.setDefaultRightMargin(myRightMargin);
  try {
    FormatterEx.getInstanceEx().adjustLineIndent(model,settings,indentOptions,initialText.length() - 1,new TextRange(0,initialText.length()));
  }
 catch (  IncorrectOperationException e) {
    fail();
  }
  assertEquals("a\n    ",FormatterImpl.getText(model));
}
