{
  final Component focusOwner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
  Point p=null;
  if (focusOwner != null && focusOwner.isShowing()) {
    p=focusOwner.getLocationOnScreen();
  }
  Dimension size=WizardPopup.this.getSize();
  return size == null || size.height == 0 && size.width == 0 ? computeNotBiggerDimension(super.getPreferredSize().getSize(),p) : size;
}
