{
  final Component focusOwner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
  Point p=null;
  if (focusOwner != null && focusOwner.isShowing()) {
    p=focusOwner.getLocationOnScreen();
  }
  Dimension size=WizardPopup.this.getSize();
  boolean isEmpty=size == null || size.height <= 1 && size.width <= 1;
  return isEmpty ? computeNotBiggerDimension(super.getPreferredSize().getSize(),p) : size;
}
