{
  final FileStatus status=FileStatusManager.getInstance(myProject).getStatus(file);
  LOG.debug("Checking moved file " + file + "; status="+ status);
  if (status == FileStatus.IGNORED) {
    if (file.getParent() != null) {
      myDirtyFiles.add(file.getParent());
      myDirtyFiles.add(file);
    }
  }
  final String newPath=newParentPath + "/" + newName;
  boolean foundExistingInfo=false;
  for (  MovedFileInfo info : myMovedFiles) {
    if (Comparing.equal(info.myFile,file)) {
      info.myNewPath=newPath;
      foundExistingInfo=true;
      break;
    }
  }
  if (!foundExistingInfo) {
    LOG.debug("Registered moved file " + file);
    myMovedFiles.add(new MovedFileInfo(file,newPath));
  }
}
