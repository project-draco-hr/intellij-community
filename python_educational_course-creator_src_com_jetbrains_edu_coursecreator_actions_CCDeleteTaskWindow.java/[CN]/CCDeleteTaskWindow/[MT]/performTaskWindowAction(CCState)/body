{
  Project project=state.getProject();
  PsiFile psiFile=state.getFile();
  final Document document=PsiDocumentManager.getInstance(project).getDocument(psiFile);
  if (document == null)   return;
  TaskFile taskFile=state.getTaskFile();
  AnswerPlaceholder answerPlaceholder=state.getAnswerPlaceholder();
  final List<AnswerPlaceholder> answerPlaceholders=taskFile.getAnswerPlaceholders();
  if (answerPlaceholders.contains(answerPlaceholder)) {
    answerPlaceholders.remove(answerPlaceholder);
    final Editor editor=state.getEditor();
    editor.getMarkupModel().removeAllHighlighters();
    CCProjectService.getInstance(project).drawTaskWindows(psiFile.getVirtualFile(),editor);
    CCAnswerPlaceholderPainter.createGuardedBlocks(editor,taskFile);
  }
}
