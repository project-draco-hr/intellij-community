{
  final ValueDescriptorImpl valueDescriptor=(ValueDescriptorImpl)descriptor;
  final Value value=valueDescriptor.getValue();
  if (value instanceof ObjectReference) {
    if (value instanceof StringReference) {
      return ((StringReference)value).value();
    }
 else     if (value instanceof ClassObjectReference) {
      ReferenceType type=((ClassObjectReference)value).reflectedType();
      return (type != null) ? type.name() : "{...}";
    }
 else {
      final ObjectReference objRef=(ObjectReference)value;
      final Type type=objRef.type();
      if (type instanceof ClassType && ((ClassType)type).isEnum()) {
        final String name=getEnumConstantName(objRef,(ClassType)type);
        if (name != null) {
          return name;
        }
 else {
          return type.name();
        }
      }
 else {
        return "";
      }
    }
  }
 else   if (value == null) {
    return "null";
  }
 else {
    return DebuggerBundle.message("label.undefined");
  }
}
