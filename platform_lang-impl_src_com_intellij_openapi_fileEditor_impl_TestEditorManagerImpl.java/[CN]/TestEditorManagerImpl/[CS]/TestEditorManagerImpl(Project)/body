{
  myProject=project;
  registerExtraEditorDataProvider(new TextEditorPsiDataProvider(),null);
  project.getMessageBus().connect().subscribe(ProjectManager.TOPIC,new ProjectManagerAdapter(){
    @Override public void projectClosed(    Project project){
      if (project == myProject) {
        closeAllFiles();
      }
    }
  }
);
}
