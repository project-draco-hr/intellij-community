{
  try {
    byte[] bytes=new byte[(int)length];
    DataInputStream dataStream=new DataInputStream(stream);
    try {
      dataStream.readFully(bytes);
    }
 catch (    EOFException ex) {
      throw new IOException("premature end of stream",ex);
    }
 finally {
      dataStream.close();
    }
    return bytes;
  }
  finally {
    stream.close();
  }
}
