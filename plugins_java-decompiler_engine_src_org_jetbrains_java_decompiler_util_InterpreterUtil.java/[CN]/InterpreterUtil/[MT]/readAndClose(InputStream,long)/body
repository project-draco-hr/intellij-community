{
  try {
    byte[] bytes=new byte[(int)length];
    if (stream.read(bytes) != length) {
      throw new IOException("premature end of stream");
    }
    return bytes;
  }
  finally {
    stream.close();
  }
}
