{
  Application application=new Application();
  application.addApplicationListener(new ApplicationAdapter(){
    @Override public void handleAbout(    ApplicationEvent applicationEvent){
      AboutAction.showAbout();
      applicationEvent.setHandled(true);
    }
    @Override public void handlePreferences(    ApplicationEvent applicationEvent){
      Project project=getProject();
      if (project == null) {
        project=ProjectManager.getInstance().getDefaultProject();
      }
      if (!((ShowSettingsUtilImpl)ShowSettingsUtil.getInstance()).isAlreadyShown()) {
        ShowSettingsUtil.getInstance().showSettingsDialog(project,ShowSettingsUtilImpl.getConfigurableGroups(project,true));
      }
      applicationEvent.setHandled(true);
    }
    @Override public void handleQuit(    ApplicationEvent applicationEvent){
      ApplicationManagerEx.getApplicationEx().exit();
    }
    @Override public void handleOpenFile(    ApplicationEvent applicationEvent){
      Project project=getProject();
      String filename=applicationEvent.getFilename();
      if (filename == null)       return;
      File file=new File(filename);
      if (ProjectUtil.openOrImport(file.getAbsolutePath(),project,true) != null) {
        IdeaApplication.getInstance().setPerformProjectLoad(false);
        return;
      }
      if (project != null && file.exists()) {
        OpenFileAction.openFile(filename,project);
        applicationEvent.setHandled(true);
      }
    }
  }
);
  application.addAboutMenuItem();
  application.addPreferencesMenuItem();
  application.setEnabledAboutMenu(true);
  application.setEnabledPreferencesMenu(true);
  installAutoUpdateMenu();
}
