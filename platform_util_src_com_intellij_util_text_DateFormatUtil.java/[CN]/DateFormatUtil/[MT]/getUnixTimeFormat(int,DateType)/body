{
  String localeStr=EnvironmentUtil.getValue("LC_TIME");
  if (localeStr == null)   return null;
  localeStr=localeStr.trim();
  int p=localeStr.indexOf('.');
  if (p > 0)   localeStr=localeStr.substring(0,p);
  p=localeStr.indexOf('@');
  if (p > 0)   localeStr=localeStr.substring(0,p);
  Locale locale;
  p=localeStr.indexOf('_');
  if (p < 0) {
    locale=new Locale(localeStr);
  }
 else {
    locale=new Locale(localeStr.substring(0,p),localeStr.substring(p + 1));
  }
switch (type) {
case TIME:
    return DateFormat.getTimeInstance(format,locale);
case DATE:
  return DateFormat.getDateInstance(format,locale);
case DATETIME:
return DateFormat.getDateTimeInstance(format,format,locale);
}
return null;
}
