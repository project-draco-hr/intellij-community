{
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  DumbService.getInstance(project).setAlternativeResolveEnabled(true);
  try {
    int offset=editor.getCaretModel().getOffset();
    PsiElement[] symbolTypes=findSymbolTypes(editor,offset);
    if (symbolTypes == null || symbolTypes.length == 0)     return;
    if (symbolTypes.length == 1) {
      navigate(project,symbolTypes[0]);
    }
 else {
      NavigationUtil.getPsiElementPopup(symbolTypes,CodeInsightBundle.message("choose.type.popup.title")).showInBestPositionFor(editor);
    }
  }
 catch (  IndexNotReadyException e) {
    DumbService.getInstance(project).showDumbModeNotification("Navigation is not available here during index update");
  }
 finally {
    DumbService.getInstance(project).setAlternativeResolveEnabled(false);
  }
}
