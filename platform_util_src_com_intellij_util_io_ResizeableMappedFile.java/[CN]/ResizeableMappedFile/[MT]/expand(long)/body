{
  long realSize=realSize();
  if (max <= realSize)   return;
  long suggestedSize=Math.max(realSize + 1,2);
  while (max > suggestedSize) {
    long newSuggestedSize=(suggestedSize * 13) >> 3;
    if (newSuggestedSize >= Integer.MAX_VALUE) {
      suggestedSize+=suggestedSize / 5;
    }
 else {
      suggestedSize=newSuggestedSize;
    }
  }
  int roundFactor=PersistentBTreeEnumerator.PAGE_SIZE;
  if (suggestedSize % roundFactor != 0) {
    suggestedSize=((suggestedSize / roundFactor) + 1) * roundFactor;
  }
  resize(suggestedSize);
}
