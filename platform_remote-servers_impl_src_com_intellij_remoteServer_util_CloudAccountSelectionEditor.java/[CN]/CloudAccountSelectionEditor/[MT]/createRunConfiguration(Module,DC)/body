{
  Project project=module.getProject();
  RemoteServer<SC> server=getServer();
  if (server == null) {
    return null;
  }
  if (getSelectedServerItem().isNew()) {
    RemoteServersManager.getInstance().addServer(server);
    myNewServer=null;
  }
  String serverName=server.getName();
  String name=generateRunConfigurationName(serverName,module.getName());
  final RunManagerEx runManager=RunManagerEx.getInstanceEx(project);
  final RunnerAndConfigurationSettings runSettings=runManager.createRunConfiguration(name,getRunConfigurationType().getConfigurationFactories()[0]);
  final DeployToServerRunConfiguration<SC,DC> result=(DeployToServerRunConfiguration<SC,DC>)runSettings.getConfiguration();
  result.setServerName(serverName);
  final ModulePointer modulePointer=ModulePointerManager.getInstance(project).create(module);
  result.setDeploymentSource(new ModuleDeploymentSourceImpl(modulePointer));
  result.setDeploymentConfiguration(deploymentConfiguration);
  runManager.addConfiguration(runSettings,false);
  runManager.setSelectedConfiguration(runSettings);
  return result;
}
