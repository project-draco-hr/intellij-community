{
  List<String> allProfiles=getBuilder().getProfiles();
  List<String> activatedProfiles=getBuilder().getActivatedProfiles();
  MavenExplicitProfiles selectedProfiles=getBuilder().getSelectedProfiles();
  List<String> enabledProfiles=new ArrayList<String>(selectedProfiles.getEnabledProfiles());
  List<String> disabledProfiles=new ArrayList<String>(selectedProfiles.getDisabledProfiles());
  enabledProfiles.retainAll(allProfiles);
  disabledProfiles.retainAll(allProfiles);
  myMarkStateDescriptor.setActivatedProfiles(activatedProfiles);
  profileChooser.setElements(allProfiles,null);
  profileChooser.markElements(enabledProfiles,MavenProfileKind.EXPLICIT);
  profileChooser.markElements(disabledProfiles,MavenProfileKind.NONE);
}
