{
  final String extension="veryRareExtension";
  final FileType idl=myFileTypeManager.findFileTypeByName("IDL");
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      myFileTypeManager.associatePattern(idl,"*." + extension);
    }
  }
);
  Element element=myFileTypeManager.getState();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      myFileTypeManager.removeAssociatedExtension(idl,extension);
    }
  }
);
  myFileTypeManager.clearForTests();
  myFileTypeManager.initStandardFileTypes();
  myFileTypeManager.loadState(element);
  myFileTypeManager.initComponent();
  FileType extensions=myFileTypeManager.getFileTypeByExtension(extension);
  assertEquals("IDL",extensions.getName());
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      myFileTypeManager.removeAssociatedExtension(idl,extension);
      myFileTypeManager.clearForTests();
      myFileTypeManager.initStandardFileTypes();
      myFileTypeManager.initComponent();
    }
  }
);
}
