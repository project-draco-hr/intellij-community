{
  final JBList list=new JBList();
  list.setModel(new SettingsListModel());
  list.setCellRenderer(new ColoredListCellRenderer<PipelineElement>(){
    @Override protected void customizeCellRenderer(    JList list,    PipelineElement element,    int index,    boolean selected,    boolean hasFocus){
      final String classFQName=element.getHandlerClass();
      final String[] split=classFQName.split("\\.");
      final int classShortNameIndex=classFQName.length() - split[split.length - 1].length();
      append(classFQName.substring(0,classShortNameIndex));
      append(classFQName.substring(classShortNameIndex),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES.derive(SimpleTextAttributes.STYLE_BOLD,JBColor.BLUE,null,null));
      append("." + element.getMethodName(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
    }
  }
);
  return ToolbarDecorator.createDecorator(list).disableUpDownActions().setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      final Project currentProject=CommonDataKeys.PROJECT.getData(button.getDataContext());
      if (currentProject == null) {
        return;
      }
      final AddMethodsDialog dlg=new AddMethodsDialog(currentProject,list,false);
      if (dlg.showAndGet()) {
        final PipelineElement newElement=dlg.getSelectedElement();
        if (myElements.contains(newElement)) {
          return;
        }
        myElements.add(newElement);
        UIUtil.invokeLaterIfNeeded(new Runnable(){
          @Override public void run(){
            list.updateUI();
          }
        }
);
      }
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      myElements.remove(list.getSelectedIndex());
    }
  }
).createPanel();
}
