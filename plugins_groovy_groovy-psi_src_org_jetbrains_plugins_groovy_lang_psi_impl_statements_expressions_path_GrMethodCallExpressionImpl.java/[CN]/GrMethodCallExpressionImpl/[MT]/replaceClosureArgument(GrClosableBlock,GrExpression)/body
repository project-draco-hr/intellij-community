{
  if (newExpr instanceof GrClosableBlock) {
    return closure.replaceWithExpression(newExpr,true);
  }
  final GrClosableBlock[] closureArguments=getClosureArguments();
  final int i=ArrayUtil.find(closureArguments,closure);
  GrArgumentList argList=getArgumentList();
  if (argList.getText().isEmpty()) {
    argList=(GrArgumentList)argList.replace(GroovyPsiElementFactory.getInstance(getProject()).createArgumentList());
  }
  for (int j=0; j < i; j++) {
    argList.add(closureArguments[j]);
    closureArguments[j].delete();
  }
  final GrExpression result=(GrExpression)argList.add(newExpr);
  closure.delete();
  return result;
}
