{
  Class rootType=fileElement.getRootElementClass();
  final InspectionProfile profile=getInspectionProfile(fileElement);
  final List<DomElementsInspection> inspections=new SmartList<DomElementsInspection>();
  for (  final InspectionToolWrapper toolWrapper : (InspectionToolWrapper[])profile.getInspectionTools(fileElement.getFile())) {
    if (!enabledOnly || profile.isToolEnabled(HighlightDisplayKey.find(toolWrapper.getShortName()),fileElement.getFile())) {
      ContainerUtil.addIfNotNull(getSuitableInspection(toolWrapper,rootType),inspections);
    }
  }
  return inspections;
}
