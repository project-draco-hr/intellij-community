{
  final VirtualFile virtualFile=file.getViewProvider().getVirtualFile();
  final SearchScope searchScope=queryParameters.getEffectiveSearchScope();
  boolean contains=searchScope instanceof LocalSearchScope ? ((LocalSearchScope)searchScope).isInScope(virtualFile) : ((GlobalSearchScope)searchScope).contains(virtualFile);
  if (contains) {
    file.accept(new XmlRecursiveElementVisitor(){
      @Override public void visitXmlAttribute(      XmlAttribute attribute){
        final PsiReference[] references=attribute.getReferences();
        for (        PsiReference reference : references) {
          if ((reference instanceof JavaFxStaticPropertyReference || reference instanceof JavaFxEventHandlerReference) && reference.isReferenceTo(psiMethod)) {
            consumer.process(reference);
          }
        }
      }
    }
);
  }
}
