{
  myTaskQueue.add(task);
  myExecutor.execute(new Runnable(){
    public void run(){
      final List<Runnable> currentTasks=new ArrayList<Runnable>(MAX_TASKS_TO_PROCESS_AT_ONCE);
      if (myTaskQueue.drainTo(currentTasks,MAX_TASKS_TO_PROCESS_AT_ONCE) > 0) {
        try {
          SwingUtilities.invokeAndWait(new Runnable(){
            public void run(){
              for (              Runnable task : currentTasks) {
                try {
                  queue.addLast(task);
                }
 catch (                Throwable e) {
                  LOG.info(e);
                }
              }
            }
          }
);
        }
 catch (        Throwable e) {
          LOG.info("Task rejected: " + currentTasks,e);
        }
      }
    }
  }
);
}
