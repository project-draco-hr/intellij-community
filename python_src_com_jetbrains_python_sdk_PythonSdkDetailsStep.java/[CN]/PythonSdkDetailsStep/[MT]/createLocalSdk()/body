{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      final NullableConsumer<Sdk> callback=new NullableConsumer<Sdk>(){
        @Override public void consume(        @Nullable final Sdk sdk){
          myCallback.consume(sdk);
          if (sdk != null) {
            DumbService.allowStartingDumbModeInside(DumbModePermission.MAY_START_MODAL,new Runnable(){
              @Override public void run(){
                if (ProjectJdkTable.getInstance().findJdk(sdk.getName()) == null) {
                  SdkConfigurationUtil.addSdk(sdk);
                }
                PythonSdkUpdater.getInstance().markAlreadyUpdated(sdk.getHomePath());
              }
            }
);
          }
        }
      }
;
      SdkConfigurationUtil.createSdk(myProject,myExistingSdks,callback,false,PythonSdkType.getInstance());
    }
  }
,ModalityState.any());
}
