{
  return new CreateVirtualEnvDialog.VirtualEnvCallback(){
    @Override public void virtualEnvCreated(    Sdk sdk,    boolean associateWithProject){
      PythonSdkUpdater.getInstance().markAlreadyUpdated(sdk.getHomePath());
      if (associateWithProject) {
        SdkAdditionalData additionalData=sdk.getSdkAdditionalData();
        if (additionalData == null) {
          additionalData=new PythonSdkAdditionalData(PythonSdkFlavor.getFlavor(sdk.getHomePath()));
          ((ProjectJdkImpl)sdk).setSdkAdditionalData(additionalData);
        }
        if (myNewProject) {
          ((PythonSdkAdditionalData)additionalData).associateWithNewProject();
        }
 else {
          ((PythonSdkAdditionalData)additionalData).associateWithProject(myProject);
        }
      }
      myCallback.consume(sdk);
    }
  }
;
}
