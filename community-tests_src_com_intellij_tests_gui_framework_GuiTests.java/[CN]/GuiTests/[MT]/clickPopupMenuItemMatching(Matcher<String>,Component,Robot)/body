{
  Container root=getRootContainer(component);
  assertNotNull(root);
  JBList list=robot.finder().find(root,new GenericTypeMatcher<JBList>(JBList.class){
    @Override protected boolean isMatching(    @NotNull JBList list){
      ListModel model=list.getModel();
      return model instanceof ListPopupModel;
    }
  }
);
  ListPopupModel model=(ListPopupModel)list.getModel();
  List<String> items=Lists.newArrayList();
  for (int i=0; i < model.getSize(); i++) {
    Object elementAt=model.getElementAt(i);
    if (elementAt instanceof PopupFactoryImpl.ActionItem) {
      PopupFactoryImpl.ActionItem item=(PopupFactoryImpl.ActionItem)elementAt;
      String s=item.getText();
      if (labelMatcher.matches(s)) {
        new JListFixture(robot,list).clickItem(i);
        return;
      }
      items.add(s);
    }
 else {
      String s=elementAt.toString();
      if (labelMatcher.matches(s)) {
        new JListFixture(robot,list).clickItem(i);
        return;
      }
      items.add(s);
    }
  }
  if (items.isEmpty()) {
    fail("Could not find any menu items in popup");
  }
  fail("Did not find menu item '" + labelMatcher + "' among "+ on(", ").join(items));
}
