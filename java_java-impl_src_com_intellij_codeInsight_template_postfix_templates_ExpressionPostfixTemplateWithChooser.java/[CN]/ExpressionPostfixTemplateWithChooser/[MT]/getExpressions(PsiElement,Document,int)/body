{
  List<PsiExpression> expressions=ContainerUtil.filter(IntroduceVariableBase.collectExpressions(context.getContainingFile(),document,offset - 1,false),new Condition<PsiExpression>(){
    @Override public boolean value(    PsiExpression expression){
      return expression.getTextRange().getEndOffset() == offset;
    }
  }
);
  return ContainerUtil.filter(expressions.isEmpty() ? maybeTopmostExpression(context) : expressions,getTypeCondition());
}
