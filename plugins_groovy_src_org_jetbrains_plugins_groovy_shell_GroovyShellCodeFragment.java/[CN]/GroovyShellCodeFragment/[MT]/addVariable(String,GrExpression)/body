{
  PsiType type=expr.getType();
  if (type instanceof GrClassReferenceType) {
    final PsiClassType.ClassResolveResult resolveResult=((GrClassReferenceType)type).resolveGenerics();
    final PsiClass psiClass=resolveResult.getElement();
    type=psiClass == null ? null : new PsiImmediateClassType(psiClass,resolveResult.getSubstitutor());
  }
  if (type != null) {
    myVariables.put(name,new GrLightVariable(getManager(),name,type,this));
  }
}
