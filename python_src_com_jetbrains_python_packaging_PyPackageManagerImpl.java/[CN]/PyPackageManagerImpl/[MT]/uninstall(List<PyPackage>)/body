{
  final List<String> args=new ArrayList<String>();
  try {
    args.add(UNINSTALL);
    boolean canModify=true;
    for (    PyPackage pkg : packages) {
      if (canModify) {
        final String location=pkg.getLocation();
        if (location != null) {
          canModify=FileUtil.ensureCanCreateFile(new File(location));
        }
      }
      args.add(pkg.getName());
    }
    getHelperResult(PACKAGING_TOOL,args,!canModify,true,null);
  }
 catch (  PyExecutionException e) {
    throw new PyExecutionException(e.getMessage(),"pip",args,e.getStdout(),e.getStderr(),e.getExitCode(),e.getFixes());
  }
 finally {
    LOG.debug("Packages cache is about to be cleared because these packages were uninstalled: " + packages);
    clearCaches();
  }
}
