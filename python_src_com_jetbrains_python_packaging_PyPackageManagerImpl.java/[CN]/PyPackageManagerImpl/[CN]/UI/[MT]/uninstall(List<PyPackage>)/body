{
  final String packagesString=StringUtil.join(packages,new Function<PyPackage,String>(){
    @Override public String fun(    PyPackage pkg){
      return "'" + pkg.getName() + "'";
    }
  }
,", ");
  if (checkDependents(packages))   return;
  run(new MultiExternalRunnable(){
    @Override public List<PyExternalProcessException> run(    @NotNull ProgressIndicator indicator){
      final PyPackageManagerImpl manager=(PyPackageManagerImpl)PyPackageManagers.getInstance().forSdk(mySdk);
      try {
        manager.uninstall(packages);
        return list();
      }
 catch (      PyExternalProcessException e) {
        return list(e);
      }
 finally {
        manager.refresh();
      }
    }
  }
,"Uninstalling packages","Packages uninstalled successfully","Uninstalled packages: " + packagesString,"Uninstall packages failed");
}
