{
  if (refname == null)   return;
  if (myCompilingVisitor.getContext().getPattern().isTypedVar(refname)) {
    SubstitutionHandler handler=(SubstitutionHandler)myCompilingVisitor.getContext().getPattern().getHandler(refname);
    RegExpPredicate predicate=MatchingHandler.getSimpleRegExpPredicate(handler);
    if (IsNotSuitablePredicate(predicate,handler)) {
      return;
    }
    refname=predicate.getRegExp();
    if (handler.isStrictSubtype() || handler.isSubtype()) {
      if (myCompilingVisitor.getContext().getSearchHelper().addDescendantsOf(refname,handler.isSubtype())) {
        myCompilingVisitor.getContext().getSearchHelper().endTransaction();
      }
      return;
    }
  }
  addFilesToSearchForGivenWord(refname,true,OccurenceKind.CODE);
}
