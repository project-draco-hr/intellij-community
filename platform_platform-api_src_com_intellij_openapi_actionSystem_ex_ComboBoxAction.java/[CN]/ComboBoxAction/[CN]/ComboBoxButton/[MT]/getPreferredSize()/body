{
  final boolean isEmpty=getIcon() == null && StringUtil.isEmpty(getText());
  int width=isEmpty ? JBUI.scale(10) + getArrowIcon().getIconWidth() : super.getPreferredSize().width;
  if (isSmallVariant() && !((SystemInfo.isMac && UIUtil.isUnderIntelliJLaF()))) {
    width+=JBUI.scale(4);
    if (UIUtil.isUnderWin10LookAndFeel()) {
      width+=JBUI.scale(8);
    }
  }
  return new Dimension(width,isSmallVariant() ? JBUI.scale(19) : super.getPreferredSize().height);
}
