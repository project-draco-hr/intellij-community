{
  myProject=project;
  myProfilesModel=profilesModel;
  myProfilesModel.addItemsChangeListener(new Runnable(){
    public void run(){
      final Object selectedItem=myProfilesComboBox.getSelectedItem();
      reloadCopyrightProfiles();
      myProfilesComboBox.setSelectedItem(selectedItem);
      final ArrayList<ScopeSetting> toRemove=new ArrayList<>();
      for (      ScopeSetting setting : myScopeMappingModel.getItems()) {
        if (setting.getProfile() == null) {
          toRemove.add(setting);
        }
      }
      for (      ScopeSetting setting : toRemove) {
        myScopeMappingModel.removeRow(myScopeMappingModel.indexOf(setting));
      }
    }
  }
);
  myManager=CopyrightManager.getInstance(project);
  ColumnInfo[] columns={new ScopeColumn(),new SettingColumn()};
  myScopeMappingModel=new ListTableModel<>(columns,new ArrayList<>(),0);
  myScopeMappingTable=new TableView<>(myScopeMappingModel);
  reloadCopyrightProfiles();
  myProfilesComboBox.setRenderer(new ListCellRendererWrapper<CopyrightProfile>(){
    @Override public void customize(    JList list,    CopyrightProfile value,    int index,    boolean selected,    boolean hasFocus){
      if (value == null) {
        setText("No copyright");
      }
 else {
        setText(value.getName());
      }
    }
  }
);
  myScopesLink.setVisible(!myProject.isDefault());
  myScopesLink.setHyperlinkText("Select Scopes to add new scopes or modify existing ones");
  myScopesLink.addHyperlinkListener(new HyperlinkListener(){
    public void hyperlinkUpdate(    final HyperlinkEvent e){
      if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        DataContext context=DataManager.getInstance().getDataContextFromFocus().getResult();
        if (context != null) {
          Settings settings=Settings.KEY.getData(context);
          if (settings != null) {
            settings.select(settings.find(ScopeChooserConfigurable.PROJECT_SCOPES));
          }
        }
      }
    }
  }
);
}
