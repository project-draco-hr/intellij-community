{
  Collection<AbstractTreeNode> nodes=new ArrayList<AbstractTreeNode>();
  for (  AbstractTreeNode node : children) {
    if (node.getValue() instanceof PsiDirectory) {
      StudyDirectoryNode newNode=new StudyDirectoryNode(node.getProject(),(PsiDirectory)node.getValue(),settings);
      nodes.add(newNode);
    }
 else {
      if (parent instanceof StudyDirectoryNode) {
        nodes.add(node);
      }
    }
  }
  return nodes;
}
