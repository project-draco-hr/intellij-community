{
  String workingDirectory=configuration.getWorkingDirectory();
  String defaultWorkingDir=getDefaultWorkingDir(project);
  if (StringUtil.isEmptyOrSpaces(workingDirectory)) {
    workingDirectory=defaultWorkingDir;
    if (workingDirectory == null) {
      return null;
    }
  }
  workingDirectory=expandPath(workingDirectory,module,project);
  if (!FileUtil.isAbsolute(workingDirectory) && defaultWorkingDir != null) {
    if (("$" + PathMacroUtil.MODULE_DIR_MACRO_NAME + "$").equals(workingDirectory)) {
      return defaultWorkingDir;
    }
    workingDirectory=defaultWorkingDir + "/" + workingDirectory;
  }
  return workingDirectory;
}
