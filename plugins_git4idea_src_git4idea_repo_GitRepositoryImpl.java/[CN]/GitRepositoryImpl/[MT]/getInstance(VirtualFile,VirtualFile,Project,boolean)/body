{
  GitPlatformFacade platformFacade=ServiceManager.getService(project,GitPlatformFacade.class);
  GitRepositoryImpl repository=new GitRepositoryImpl(root,gitDir,platformFacade,project,project,!listenToRepoChanges);
  if (listenToRepoChanges) {
    repository.getUntrackedFilesHolder().setupVfsListener(project);
    repository.setupUpdater();
    notifyListenersAsync(repository);
  }
  return repository;
}
