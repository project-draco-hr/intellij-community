{
  setFocusable(false);
  myComponent=component;
  myFadeIn=fadeIn;
  myRatio=myFadeIn ? 0 : 1;
  myIcon=icon;
  myComponentImage=UIUtil.createImage(myComponent.getWidth(),myComponent.getHeight(),BufferedImage.TYPE_INT_ARGB);
  Graphics2D graphics=myComponentImage.createGraphics();
  myComponent.paint(graphics);
  graphics.dispose();
  myAnimator=new Animator("FadeInFadeOut",TOTAL_FRAMES,timeToComplete,false){
    @Override public void paintNow(    int frame,    int totalFrames,    int cycle){
      double linearProgress=Math.max(0,Math.min(1,(double)frame / totalFrames));
      if (!myFadeIn)       linearProgress=1 - linearProgress;
      myRatio=(1 - Math.cos(Math.PI * linearProgress)) / 2;
      paintImmediately(0,0,getWidth(),getHeight());
    }
    @Override protected void paintCycleEnd(){
      super.paintCycleEnd();
      if (myOnDone != null) {
        myOnDone.run();
      }
    }
  }
;
}
