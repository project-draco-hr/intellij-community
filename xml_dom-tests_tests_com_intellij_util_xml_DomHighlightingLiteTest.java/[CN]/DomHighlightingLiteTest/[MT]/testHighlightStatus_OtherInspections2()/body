{
  myElement.setFileDescription(new DomFileDescription<DomElement>(DomElement.class,"a"));
  final MyDomElementsInspection inspection=new MyDomElementsInspection(){
    @Override public ProblemDescriptor[] checkFile(    @NotNull final PsiFile file,    @NotNull final InspectionManager manager,    final boolean isOnTheFly){
      myAnnotationsManager.appendProblems(myElement,createHolder(),this.getClass());
      return new ProblemDescriptor[0];
    }
    @Override public void checkFileElement(    final DomFileElement fileElement,    final DomElementAnnotationHolder holder){
    }
  }
;
  registerInspectionKey(inspection);
  LocalInspectionToolWrapper toolWrapper=new LocalInspectionToolWrapper(inspection);
  myInspectionProfile.setInspectionTools(toolWrapper);
  myInspectionProfile.setEnabled(toolWrapper,false);
  myAnnotationsManager.appendProblems(myElement,createHolder(),MockAnnotatingDomInspection.class);
  assertEquals(DomHighlightStatus.INSPECTIONS_FINISHED,myAnnotationsManager.getHighlightStatus(myElement));
}
