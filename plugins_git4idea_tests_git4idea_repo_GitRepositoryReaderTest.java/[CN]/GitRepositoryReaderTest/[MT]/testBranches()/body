{
  Collection<GitRemote> remotes=GitConfig.read(myPlatformFacade,new File(myGitDir,"config")).parseRemotes();
  GitBranchState state=myRepositoryReader.readState(remotes);
  assertEquals("HEAD revision is incorrect",readHead(myTempDir),state.getCurrentRevision());
  assertEqualBranches(readCurrentBranch(myTempDir),state.getCurrentBranch(),state.getLocalBranches().get(state.getCurrentBranch()));
  assertBranches(state.getLocalBranches(),readBranches(myTempDir,true));
  assertBranches(state.getRemoteBranches(),readBranches(myTempDir,false));
}
