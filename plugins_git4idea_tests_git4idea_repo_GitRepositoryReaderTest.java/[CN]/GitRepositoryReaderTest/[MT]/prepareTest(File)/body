{
  assertTrue("Temp directory was not created",myTempDir.mkdir());
  FileUtil.copyDir(testDir,myTempDir);
  myGitDir=new File(myTempDir,".git");
  File dotGit=new File(myTempDir,"dot_git");
  if (!dotGit.exists()) {
    File dotGitZip=new File(myTempDir,"dot_git.zip");
    assertTrue("Neither dot_git nor dot_git.zip were found",dotGitZip.exists());
    ZipUtil.extract(dotGitZip,myTempDir,null);
  }
  FileUtil.rename(dotGit,myGitDir);
  TestCase.assertTrue(myGitDir.exists());
  VirtualFile gitDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(myGitDir);
  myRepositoryReader=new GitRepositoryReader(GitRepositoryFiles.getInstance(gitDir));
}
