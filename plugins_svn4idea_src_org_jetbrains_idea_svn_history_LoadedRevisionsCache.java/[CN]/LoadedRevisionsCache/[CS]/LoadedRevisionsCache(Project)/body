{
  myProject=project;
  myMap=(ApplicationManager.getApplication().isUnitTestMode()) ? new HashMap<String,Bunch>() : new SoftHashMap<String,Bunch>();
  myConnection=project.getMessageBus().connect();
  myConnection.subscribe(CommittedChangesCache.COMMITTED_TOPIC,new CommittedChangesAdapter(){
    @Override public void changesLoaded(    final RepositoryLocation location,    final List<CommittedChangeList> changes){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          myMap.clear();
          setRefreshTime(System.currentTimeMillis());
        }
      }
);
    }
  }
);
  setRefreshTime(0);
}
