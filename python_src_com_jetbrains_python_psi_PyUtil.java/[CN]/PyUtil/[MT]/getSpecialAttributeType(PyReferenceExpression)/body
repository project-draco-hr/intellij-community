{
  if (ref != null) {
    PyExpression qualifier=ref.getQualifier();
    if (qualifier != null) {
      String attr_name=getIdentifier(ref.getElement());
      if ("__class__".equals(attr_name)) {
        PyType qual_type=qualifier.getType();
        if (qual_type instanceof PyClassType) {
          return new PyClassType(((PyClassType)qual_type).getPyClass(),true);
        }
      }
 else       if ("__dict__".equals(attr_name)) {
        PyType qual_type=qualifier.getType();
        if (qual_type instanceof PyClassType && ((PyClassType)qual_type).isDefinition()) {
          return PyBuiltinCache.getInstance(ref).getDictType();
        }
      }
    }
  }
  return null;
}
