{
  if (ref != null) {
    PyExpression qualifier=ref.getQualifier();
    if (qualifier != null) {
      String attr_name=ref.getReferencedName();
      if (PyNames.__CLASS__.equals(attr_name)) {
        PyType qualifierType=context.getType(qualifier);
        if (qualifierType instanceof PyClassType) {
          return new PyClassTypeImpl(((PyClassType)qualifierType).getPyClass(),true);
        }
      }
 else       if (PyNames.DICT.equals(attr_name)) {
        PyType qualifierType=context.getType(qualifier);
        if (qualifierType instanceof PyClassType && ((PyClassType)qualifierType).isDefinition()) {
          return PyBuiltinCache.getInstance(ref).getDictType();
        }
      }
    }
  }
  return null;
}
