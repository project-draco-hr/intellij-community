{
  List<T> result=new SmartList<T>();
  for (  PsiElement child : element.getChildren()) {
    if (instanceOf(child,aClass)) {
      result.add((T)child);
    }
 else {
      ContainerUtil.addAll(result,getAllChildrenOfType(child,aClass));
    }
  }
  return ArrayUtil.toObjectArray(result,aClass);
}
