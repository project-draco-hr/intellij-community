{
  final PyExpression qualifier=element.getQualifier();
  if (qualifier == null)   return;
  if (qualifier instanceof PyCallExpression) {
    final StringBuilder newElement=new StringBuilder(element.getLastChild().getText());
    final PyExpression callee=((PyCallExpression)qualifier).getCallee();
    if (callee instanceof PyReferenceExpression) {
      final PyExpression calleeQualifier=((PyReferenceExpression)callee).getQualifier();
      if (calleeQualifier != null) {
        newElement.insert(0,calleeQualifier.getText() + ".");
      }
    }
    final PyElementGenerator elementGenerator=PyElementGenerator.getInstance(element.getProject());
    final PyExpression expression=elementGenerator.createExpressionFromText(LanguageLevel.forElement(element),newElement.toString());
    element.replace(expression);
  }
 else {
    final PsiElement dot=qualifier.getNextSibling();
    if (dot != null)     dot.delete();
    qualifier.delete();
  }
}
