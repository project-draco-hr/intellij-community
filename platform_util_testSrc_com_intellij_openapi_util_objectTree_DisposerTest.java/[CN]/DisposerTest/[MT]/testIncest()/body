{
  Disposable parent=newDisposable("parent");
  Disposable child=newDisposable("child");
  Disposer.register(parent,child);
  Disposable grand=newDisposable("grand");
  Disposer.register(child,grand);
  try {
    Disposer.register(grand,parent);
    fail("must not allow");
  }
 catch (  IncorrectOperationException e) {
    assertEquals("'grand' was already added as a child of 'parent'",e.getMessage());
  }
 finally {
    Disposer.dispose(grand);
    Disposer.dispose(child);
    Disposer.dispose(parent);
  }
}
