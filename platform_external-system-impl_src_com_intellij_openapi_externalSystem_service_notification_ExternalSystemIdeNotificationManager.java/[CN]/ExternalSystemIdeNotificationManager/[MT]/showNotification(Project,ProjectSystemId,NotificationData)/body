{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      if (project.isDisposed())       return;
      final NotificationGroup group=ExternalSystemUtil.getToolWindowElement(NotificationGroup.class,project,ExternalSystemDataKeys.NOTIFICATION_GROUP,externalSystemId);
      if (group == null)       return;
      final Notification notification=group.createNotification(notificationData.getTitle(),notificationData.getMessage(),notificationData.getNotificationType(),notificationData.getListener());
      if (notificationData.isBalloonNotification()) {
        applyNotification(notification,project);
      }
 else {
        addMessage(notification,project,externalSystemId,notificationData);
      }
    }
  }
);
}
