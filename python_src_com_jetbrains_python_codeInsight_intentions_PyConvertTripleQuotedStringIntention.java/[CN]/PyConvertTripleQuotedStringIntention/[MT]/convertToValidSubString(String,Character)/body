{
  String subString;
  if (s.startsWith("'''") || s.startsWith("\"\"\""))   subString=convertToValidSubString(s.substring(3),firstQuote);
 else   if (s.endsWith("'''") || s.endsWith("\"\"\"")) {
    String trimmed=s.trim();
    subString=convertToValidSubString(trimmed.substring(0,trimmed.length() - 3),firstQuote);
  }
 else {
    s=StringUtil.escapeStringCharacters(s);
    StringBuilder stringBuilder=new StringBuilder();
    for (    Character ch : s.toCharArray()) {
      if (ch == firstQuote) {
        stringBuilder.append("\\").append(firstQuote);
      }
 else {
        stringBuilder.append(ch);
      }
    }
    subString=stringBuilder.toString();
  }
  return subString;
}
