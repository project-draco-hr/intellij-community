{
  for (int i=range.getEndOffset() - getBlockCommentSuffix().length() - DOUBLE_DASH.length(); i >= range.getStartOffset() + getBlockCommentPrefix().length(); i--) {
    if (CharArrayUtil.regionMatches(document.getCharsSequence(),i,DOUBLE_DASH) && !CharArrayUtil.regionMatches(document.getCharsSequence(),i,getBlockCommentSuffix())) {
      document.replaceString(i,i + DOUBLE_DASH.length(),ESCAPED);
    }
  }
}
