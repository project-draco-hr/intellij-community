{
  super.setupRootModel(rootModel);
  String contentEntryPath=getContentEntryPath();
  if (contentEntryPath == null)   return;
  String resourceRootPath=contentEntryPath + "/resources";
  VirtualFile contentRoot=LocalFileSystem.getInstance().findFileByPath(contentEntryPath);
  if (contentRoot == null)   return;
  ContentEntry contentEntry=MarkRootActionBase.findContentEntry(rootModel,contentRoot);
  if (contentEntry != null) {
    contentEntry.addSourceFolder(VfsUtilCore.pathToUrl(resourceRootPath),JavaResourceRootType.RESOURCE);
  }
  final String defaultPluginXMLLocation=resourceRootPath + "/META-INF/plugin.xml";
  final Module module=rootModel.getModule();
  final Project project=module.getProject();
  StartupManager.getInstance(project).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      final PluginBuildConfiguration buildConfiguration=PluginBuildConfiguration.getInstance(module);
      if (buildConfiguration != null) {
        buildConfiguration.setPluginXmlPathAndCreateDescriptorIfDoesntExist(defaultPluginXMLLocation);
      }
      VirtualFile file=LocalFileSystem.getInstance().findFileByPath(defaultPluginXMLLocation);
      if (file != null) {
        FileEditorManager.getInstance(project).openFile(file,true);
      }
    }
  }
);
}
