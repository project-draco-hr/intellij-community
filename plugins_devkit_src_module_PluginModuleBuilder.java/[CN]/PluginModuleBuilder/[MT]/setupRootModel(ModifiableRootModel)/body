{
  super.setupRootModel(rootModel);
  final String defaultPluginXMLLocation=getModuleFileDirectory() + '/' + META_INF+ '/'+ PLUGIN_XML;
  final Module module=rootModel.getModule();
  final Project project=module.getProject();
  StartupManager.getInstance(project).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      final PluginBuildConfiguration buildConfiguration=PluginBuildConfiguration.getInstance(module);
      if (buildConfiguration != null) {
        buildConfiguration.setPluginXmlPathAndCreateDescriptorIfDoesntExist(defaultPluginXMLLocation);
      }
      RunManager runManager=RunManager.getInstance(project);
      RunnerAndConfigurationSettings configuration=runManager.createRunConfiguration(DevKitBundle.message("run.configuration.title"),new PluginConfigurationType().getConfigurationFactories()[0]);
      runManager.addConfiguration(configuration,false);
      runManager.setSelectedConfiguration(configuration);
      VirtualFile file=LocalFileSystem.getInstance().findFileByPath(defaultPluginXMLLocation);
      if (file != null) {
        FileEditorManager.getInstance(project).openFile(file,true);
      }
    }
  }
);
}
