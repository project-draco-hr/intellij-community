{
  if (!ApplicationManager.getApplication().isHeadlessEnvironment() || ApplicationManager.getApplication().isUnitTestMode()) {
    FileEditor fileEditor=FileEditorManager.getInstance(file.getProject()).getSelectedEditor(file.getVirtualFile());
    if (fileEditor != null) {
      Boolean notifiedFlag=fileEditor.getUserData(NOTIFIED_FLAG);
      if (notifiedFlag == null || enforce) {
        fileEditor.putUserData(NOTIFIED_FLAG,Boolean.TRUE);
        EditorNotifications.getInstance(file.getProject()).updateNotifications(file.getVirtualFile());
      }
    }
  }
}
