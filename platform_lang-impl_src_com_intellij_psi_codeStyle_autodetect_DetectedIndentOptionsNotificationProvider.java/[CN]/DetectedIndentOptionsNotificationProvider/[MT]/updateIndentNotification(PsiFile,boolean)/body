{
  VirtualFile vFile=file.getVirtualFile();
  if (vFile == null)   return;
  if (!ApplicationManager.getApplication().isHeadlessEnvironment() || ApplicationManager.getApplication().isUnitTestMode() && vFile.getUserData(SHOW_NOTIFICATION_IN_TEST) != null) {
    FileEditor fileEditor=FileEditorManager.getInstance(file.getProject()).getSelectedEditor(vFile);
    if (fileEditor != null) {
      Boolean notifiedFlag=fileEditor.getUserData(NOTIFIED_FLAG);
      if (notifiedFlag == null || enforce) {
        fileEditor.putUserData(NOTIFIED_FLAG,Boolean.TRUE);
        EditorNotifications.getInstance(file.getProject()).updateNotifications(vFile);
      }
    }
  }
}
