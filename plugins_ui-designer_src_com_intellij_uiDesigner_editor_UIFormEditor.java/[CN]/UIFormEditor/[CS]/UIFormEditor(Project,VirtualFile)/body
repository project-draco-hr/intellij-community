{
  final VirtualFile vf=file instanceof LightVirtualFile ? ((LightVirtualFile)file).getOriginalFile() : file;
  final Module module=ModuleUtilCore.findModuleForFile(vf,project);
  if (module == null) {
    throw new IllegalArgumentException("No module for file " + file + " in project "+ project);
  }
  myFile=file;
  myEditor=new GuiEditor(this,project,module,file);
}
