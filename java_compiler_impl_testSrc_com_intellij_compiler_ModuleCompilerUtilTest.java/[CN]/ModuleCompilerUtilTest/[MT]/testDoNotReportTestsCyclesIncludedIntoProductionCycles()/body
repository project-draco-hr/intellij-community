{
  Module a=createModule("a");
  Module b=createModule("b");
  PsiTestUtil.addSourceRoot(a,myTempDirTestFixture.findOrCreateDir("a-main"));
  PsiTestUtil.addSourceRoot(a,myTempDirTestFixture.findOrCreateDir("a-tests"),true);
  PsiTestUtil.addSourceRoot(b,myTempDirTestFixture.findOrCreateDir("b-main"));
  PsiTestUtil.addSourceRoot(b,myTempDirTestFixture.findOrCreateDir("b-tests"),true);
  ModuleRootModificationUtil.addDependency(a,b);
  ModuleRootModificationUtil.addDependency(b,a);
  List<Chunk<ModuleSourceSet>> cycles=ModuleCompilerUtil.getCyclicDependencies(myProject,Arrays.asList(a,b));
  assertEquals(1,cycles.size());
}
