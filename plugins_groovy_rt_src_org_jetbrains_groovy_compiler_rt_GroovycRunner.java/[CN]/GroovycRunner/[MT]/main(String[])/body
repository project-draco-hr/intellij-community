{
  if (args.length != 3) {
    if (args.length != 4 || !"--indy".equals(args[3])) {
      System.err.println("There is no arguments for groovy compiler");
      System.exit(1);
    }
    System.setProperty("groovy.target.indy","true");
  }
  final boolean optimize=GroovyRtConstants.OPTIMIZE.equals(args[0]);
  final boolean forStubs="stubs".equals(args[1]);
  String argPath=args[2];
  if (!new File(argPath).exists()) {
    System.err.println("Arguments file for groovy compiler not found");
    System.exit(1);
  }
  ClassLoader loader=optimize ? buildMainLoader(argPath) : GroovycRunner.class.getClassLoader();
  Thread.currentThread().setContextClassLoader(loader);
  try {
    Class.forName("org.codehaus.groovy.control.CompilationUnit",true,loader);
  }
 catch (  Throwable e) {
    System.err.println(GroovyRtConstants.NO_GROOVY);
    System.exit(1);
  }
  try {
    Class<?> aClass=Class.forName("org.jetbrains.groovy.compiler.rt.DependentGroovycRunner",true,loader);
    Method method=aClass.getDeclaredMethod("runGroovyc",boolean.class,String.class);
    method.invoke(null,forStubs,argPath);
  }
 catch (  Throwable e) {
    e.printStackTrace();
    System.exit(1);
  }
}
