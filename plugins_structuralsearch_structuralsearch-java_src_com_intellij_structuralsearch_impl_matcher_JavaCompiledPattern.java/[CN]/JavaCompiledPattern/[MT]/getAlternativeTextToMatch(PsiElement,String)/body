{
  if (node instanceof PsiJavaCodeReferenceElement || node instanceof PsiClass) {
    PsiElement element=(node instanceof PsiJavaCodeReferenceElement) ? ((PsiJavaCodeReferenceElement)node).resolve() : node;
    if (element instanceof PsiClass) {
      String text=((PsiClass)element).getQualifiedName();
      if (text != null && text.equals(previousText)) {
        text=((PsiClass)element).getName();
      }
      if (text != null) {
        return text;
      }
    }
  }
 else   if (node instanceof PsiLiteralExpression) {
    return node.getText();
  }
  return null;
}
