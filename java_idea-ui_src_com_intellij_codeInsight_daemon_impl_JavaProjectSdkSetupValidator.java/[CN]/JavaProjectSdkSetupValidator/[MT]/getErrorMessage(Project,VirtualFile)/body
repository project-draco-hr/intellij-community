{
  final Module module=ModuleUtilCore.findModuleForFile(file,project);
  if (module != null && !module.isDisposed()) {
    final Sdk sdk=ModuleRootManager.getInstance(module).getSdk();
    if (sdk == null) {
      if (ModuleRootManager.getInstance(module).isSdkInherited()) {
        return ProjectBundle.message("project.sdk.not.defined");
      }
 else {
        return ProjectBundle.message("module.sdk.not.defined");
      }
    }
  }
  return null;
}
