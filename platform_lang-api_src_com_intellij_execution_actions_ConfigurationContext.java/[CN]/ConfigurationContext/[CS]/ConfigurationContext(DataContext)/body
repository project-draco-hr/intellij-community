{
  myRuntimeConfiguration=RunConfiguration.DATA_KEY.getData(dataContext);
  myContextComponent=PlatformDataKeys.CONTEXT_COMPONENT.getData(dataContext);
  myModule=LangDataKeys.MODULE.getData(dataContext);
  @SuppressWarnings({"unchecked"}) final Location<PsiElement> location=(Location<PsiElement>)Location.DATA_KEY.getData(dataContext);
  if (location != null) {
    myLocation=location;
    return;
  }
  final Project project=CommonDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    myLocation=null;
    return;
  }
  final PsiElement element=getSelectedPsiElement(dataContext,project);
  if (element == null) {
    myLocation=null;
    return;
  }
  myLocation=new PsiLocation<>(project,myModule,element);
  final PsiElement[] elements=LangDataKeys.PSI_ELEMENT_ARRAY.getData(dataContext);
  if (elements != null) {
    myMultipleSelection=elements.length > 1;
  }
 else {
    final VirtualFile[] files=CommonDataKeys.VIRTUAL_FILE_ARRAY.getData(dataContext);
    myMultipleSelection=files != null && files.length > 1;
  }
}
