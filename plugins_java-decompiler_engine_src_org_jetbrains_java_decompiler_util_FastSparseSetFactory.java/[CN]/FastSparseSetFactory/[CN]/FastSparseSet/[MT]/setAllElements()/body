{
  int lastblock=factory.getLastBlock();
  int lastmask=factory.getLastMask();
  if (lastblock >= data.length) {
    ensureCapacity(lastblock);
  }
  for (int i=lastblock - 1; i >= 0; i--) {
    data[i]=0xFFFFFFFF;
    next[i]=i + 1;
  }
  data[lastblock]=lastmask | (lastmask - 1);
  next[lastblock]=0;
}
