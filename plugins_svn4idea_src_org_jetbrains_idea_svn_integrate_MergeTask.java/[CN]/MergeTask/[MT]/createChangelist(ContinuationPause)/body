{
  final ChangeListManager listManager=ChangeListManager.getInstance(myMergeContext.getProject());
  String name=myMergeContext.getTitle();
  int i=1;
  boolean updateDefaultList=false;
  while (true) {
    final LocalChangeList changeList=listManager.findChangeList(name);
    if (changeList == null) {
      final LocalChangeList newList=listManager.addChangeList(name,null);
      listManager.setDefaultChangeList(newList);
      updateDefaultList=true;
      break;
    }
    if (changeList.getChanges().isEmpty()) {
      if (!changeList.isDefault()) {
        listManager.setDefaultChangeList(changeList);
        updateDefaultList=true;
      }
      break;
    }
    name=myMergeContext.getTitle() + " (" + i+ ")";
    ++i;
  }
  if (updateDefaultList) {
    context.suspend();
    listManager.invokeAfterUpdate(new Runnable(){
      public void run(){
        context.ping();
      }
    }
,InvokeAfterUpdateMode.BACKGROUND_NOT_CANCELLABLE_NOT_AWT,"",ModalityState.NON_MODAL);
  }
}
