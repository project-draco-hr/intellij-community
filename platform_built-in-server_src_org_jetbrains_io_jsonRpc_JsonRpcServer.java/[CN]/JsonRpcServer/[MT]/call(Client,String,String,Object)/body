{
  int messageId=messageIdCounter.getAndIncrement();
  ByteBuf message=encodeMessage(client.getByteBufAllocator(),messageId,domain,command,null,params);
  AsyncPromise<T> result=client.send(messageId,message);
  LOG.assertTrue(result != null);
  return result;
}
