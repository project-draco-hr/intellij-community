{
  myProject=project;
  myFile=containingFile;
  myText=text;
  myTextArray=CharArrayUtil.fromSequenceWithoutCopying(text);
  myLexer=lexer;
  myWhitespaces=whiteSpaces;
  myComments=comments;
  myCharTable=charTable;
  myOriginalTree=originalTree;
  myLastCommittedText=lastCommittedText;
  if ((originalTree == null) != (lastCommittedText == null)) {
    throw new IllegalArgumentException("originalTree and lastCommittedText must be null/notnull together but got: originalTree=" + originalTree + "; lastCommittedText="+ (lastCommittedText == null ? null : "'" + StringUtil.first(lastCommittedText,80,true) + "'"));
  }
  myParentLightTree=parentLightTree;
  myOffset=parentToken != null ? parentToken.getStartOffset() : 0;
  cacheLexemes(parentToken);
}
