{
  myProject=project;
  init();
  setTitle("Create Virtual Environment");
  if (suggestedBaseSdk == null && allSdks.size() > 0) {
    Iterables.removeIf(allSdks,new Predicate<Sdk>(){
      @Override public boolean apply(      Sdk s){
        return PythonSdkType.isInvalid(s) || PythonSdkType.isVirtualEnv(s) || RemoteSdkDataHolder.isRemoteSdk(s.getHomePath());
      }
    }
);
    List<Sdk> sortedSdks=new ArrayList<Sdk>(allSdks);
    Collections.sort(sortedSdks,new PreferredSdkComparator());
    suggestedBaseSdk=sortedSdks.get(0);
  }
  updateSdkList(allSdks,suggestedBaseSdk);
  if (project == null || project.isDefault() || !PlatformUtils.isPyCharm()) {
    myMakeAvailableToAllProjectsCheckbox.setSelected(true);
    myMakeAvailableToAllProjectsCheckbox.setVisible(false);
  }
  setOKActionEnabled(false);
  myInitialPath="";
  final VirtualFile file=VirtualEnvSdkFlavor.getDefaultLocation();
  if (file != null)   myInitialPath=file.getPath();
 else {
    final String savedPath=PyPackageService.getInstance().getVirtualEnvBasePath();
    if (!StringUtil.isEmptyOrSpaces(savedPath))     myInitialPath=savedPath;
 else     if (myProject != null) {
      final VirtualFile baseDir=myProject.getBaseDir();
      if (baseDir != null)       myInitialPath=baseDir.getPath();
    }
  }
  addUpdater(myName);
  new LocationNameFieldsBinding(project,myDestination,myName,myInitialPath,"Select Location for Virtual Environment");
  registerValidators(new FacetValidatorsManager(){
    public void registerValidator(    FacetEditorValidator validator,    JComponent... componentsToWatch){
    }
    public void validate(){
      checkValid();
    }
  }
);
  myMainPanel.setPreferredSize(new Dimension(300,50));
  checkValid();
}
