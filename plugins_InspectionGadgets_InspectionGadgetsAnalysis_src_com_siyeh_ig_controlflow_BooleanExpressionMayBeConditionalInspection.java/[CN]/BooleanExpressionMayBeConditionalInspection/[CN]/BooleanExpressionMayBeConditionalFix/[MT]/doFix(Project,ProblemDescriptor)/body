{
  final PsiElement element=descriptor.getPsiElement();
  if (!(element instanceof PsiBinaryExpression)) {
    return;
  }
  final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)element;
  final PsiExpression lhs=ParenthesesUtils.stripParentheses(binaryExpression.getLOperand());
  final PsiExpression rhs=ParenthesesUtils.stripParentheses(binaryExpression.getROperand());
  if (!(lhs instanceof PsiBinaryExpression) || !(rhs instanceof PsiBinaryExpression)) {
    return;
  }
  final PsiBinaryExpression lBinaryExpression=(PsiBinaryExpression)lhs;
  final PsiBinaryExpression rBinaryExpression=(PsiBinaryExpression)rhs;
  final PsiExpression llhs=ParenthesesUtils.stripParentheses(lBinaryExpression.getLOperand());
  final PsiExpression lrhs=ParenthesesUtils.stripParentheses(rBinaryExpression.getLOperand());
  if (llhs == null || lrhs == null) {
    return;
  }
  final PsiExpression thenExpression=ParenthesesUtils.stripParentheses(lBinaryExpression.getROperand());
  final PsiExpression elseExpression=ParenthesesUtils.stripParentheses(rBinaryExpression.getROperand());
  if (thenExpression == null || elseExpression == null) {
    return;
  }
  if (BoolUtils.isNegation(llhs)) {
    PsiReplacementUtil.replaceExpression(binaryExpression,getText(lrhs) + '?' + getText(elseExpression)+ ':'+ getText(thenExpression));
  }
 else {
    PsiReplacementUtil.replaceExpression(binaryExpression,getText(llhs) + '?' + getText(thenExpression)+ ':'+ getText(elseExpression));
  }
}
