{
  PsiElement referencedElement=context.innerExpression().referencedElement;
  if (referencedElement instanceof PsiPackage)   return Collections.emptyList();
  boolean invokedOnType=(referencedElement instanceof PsiClass);
  boolean insideCodeFragment=context.executionContext.insideCodeFragment;
  List<LookupElement> elements=new ArrayList<LookupElement>();
  for (  TemplateProviderInfo providerInfo : myProviders) {
    if (invokedOnType && !providerInfo.annotation.worksOnTypes())     continue;
    if (insideCodeFragment && !providerInfo.annotation.worksInsideFragments())     continue;
    try {
      providerInfo.provider.createItems(context,elements);
    }
 catch (    Exception ex) {
      LOG.error(ex);
    }
  }
  return elements;
}
