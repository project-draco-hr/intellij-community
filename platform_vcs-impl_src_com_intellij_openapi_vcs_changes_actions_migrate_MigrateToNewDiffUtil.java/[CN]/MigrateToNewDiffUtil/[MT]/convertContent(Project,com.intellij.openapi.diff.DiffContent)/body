{
  if (oldContent.isEmpty()) {
    return new EmptyContent();
  }
  if (oldContent.isBinary()) {
    VirtualFile file=oldContent.getFile();
    if (file == null)     return null;
    return new BinaryFileContentImpl(project,file);
  }
 else {
    Document document=oldContent.getDocument();
    if (document == null)     return null;
    return new DocumentContentImpl(document,oldContent.getContentType(),oldContent.getFile(),oldContent.getLineSeparator(),null){
      @Nullable @Override public OpenFileDescriptor getOpenFileDescriptor(      int offset){
        return oldContent.getOpenFileDescriptor(offset);
      }
      @Override public void onAssigned(      boolean isAssigned){
        oldContent.onAssigned(isAssigned);
      }
    }
;
  }
}
