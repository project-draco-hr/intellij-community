{
  if (oldContent.isEmpty()) {
    return new EmptyContent();
  }
  if (oldContent.isBinary()) {
    VirtualFile file=oldContent.getFile();
    if (file == null)     return null;
    return new FileContentImpl(project,file);
  }
 else {
    Document document=oldContent.getDocument();
    if (document == null)     return null;
    return new DocumentContentImpl(document,oldContent.getContentType(),oldContent.getFile(),oldContent.getLineSeparator(),null,null){
      @Nullable @Override public Navigatable getNavigatable(      @NotNull LineCol position){
        return oldContent.getOpenFileDescriptor(position.toOffset(document));
      }
      @Override public void onAssigned(      boolean isAssigned){
        oldContent.onAssigned(isAssigned);
      }
    }
;
  }
}
