{
  PersistentFS fs=PersistentFS.getInstance();
  int maxId=FSRecords.getMaxId();
  TIntArrayList list=new TIntArrayList();
  for (int id=fileIsResolved.nextClearBit(1); id >= 0 && id < maxId; id=fileIsResolved.nextClearBit(id + 1)) {
    int nextSetBit=fileIsResolved.nextSetBit(id);
    int endOfRun=Math.min(maxId,nextSetBit == -1 ? maxId : nextSetBit);
    do {
      VirtualFile virtualFile=fs.findFileById(id);
      if (queueIfNeeded(virtualFile,myProject)) {
        list.add(id);
      }
 else {
        fileIsResolved.set(id);
      }
    }
 while (++id < endOfRun);
  }
  log("Initially added to resolve " + toVfString(list.toNativeArray()));
}
