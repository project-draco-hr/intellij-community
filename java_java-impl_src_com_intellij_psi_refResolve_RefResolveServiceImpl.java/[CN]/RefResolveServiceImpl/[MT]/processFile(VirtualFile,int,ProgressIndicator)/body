{
  final TIntHashSet forward;
  try {
    forward=calcForwardRefs(file,indicator);
  }
 catch (  IndexNotReadyException e) {
    return null;
  }
catch (  ApplicationUtil.CannotRunReadActionException e) {
    return null;
  }
catch (  ProcessCanceledException e) {
    throw e;
  }
catch (  Exception e) {
    log(ExceptionUtil.getThrowableText(e));
    flushLog();
    return null;
  }
  int[] forwardIds=forward.toArray();
  fileIsResolved.set(fileId);
  logf("  ---- " + file.getPresentableUrl() + " processed. forwardIds: "+ toVfString(forwardIds));
  for (  Listener listener : myListeners) {
    listener.fileResolved(file);
  }
  return forwardIds;
}
