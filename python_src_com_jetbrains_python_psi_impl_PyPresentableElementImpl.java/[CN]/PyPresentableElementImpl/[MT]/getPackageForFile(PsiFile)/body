{
  final VirtualFile vFile=containingFile.getVirtualFile();
  StringBuilder result=new StringBuilder(vFile != null ? vFile.getNameWithoutExtension() : containingFile.getName());
  PsiDirectory dir=containingFile.getContainingDirectory();
  while (dir != null) {
    if (!ExcludedFileIndex.getInstance(containingFile.getProject()).isInContent(dir.getVirtualFile())) {
      break;
    }
    if (dir.findFile("__init__.py") == null)     break;
    result.insert(0,dir.getName() + ".");
    dir=dir.getParentDirectory();
  }
  return result.toString();
}
