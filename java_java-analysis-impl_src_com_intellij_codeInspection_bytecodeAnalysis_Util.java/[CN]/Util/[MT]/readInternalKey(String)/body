{
  String[] parts=s.split(";");
  String annKey=parts[0];
  String[] dirStrings=parts[1].split(":");
  if ("In".equals(dirStrings[0])) {
    return new InternalKey(annKey,new In(Integer.valueOf(dirStrings[1])));
  }
 else   if ("Out".equals(dirStrings[0])) {
    return new InternalKey(annKey,new Out());
  }
 else {
    return new InternalKey(annKey,new InOut(Integer.valueOf(dirStrings[1]),Value.valueOf(dirStrings[2])));
  }
}
