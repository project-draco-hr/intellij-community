{
  PsiElement parent=psiBlock.getParent();
  myIsInMethod=parent instanceof PsiMethod;
  if (myIsInMethod) {
    PsiMethod method=(PsiMethod)parent;
    PsiType returnType=method.getReturnType();
    myInNullableMethod=NullableNotNullManager.isNullable(method) || returnType != null && returnType.equalsToText(CommonClassNames.JAVA_LANG_VOID);
    myInNotNullMethod=NullableNotNullManager.isNotNull(method);
  }
 else   if (parent instanceof PsiLambdaExpression) {
    PsiMethod method=LambdaUtil.getFunctionalInterfaceMethod(((PsiLambdaExpression)parent).getFunctionalInterfaceType());
    if (method != null) {
      myIsInMethod=true;
      PsiType returnType=method.getReturnType();
      myInNullableMethod=NullableNotNullManager.isNullable(method) || returnType != null && returnType.equalsToText(CommonClassNames.JAVA_LANG_VOID);
      myInNotNullMethod=NullableNotNullManager.isNotNull(method);
    }
  }
  myCCEInstructions.clear();
}
