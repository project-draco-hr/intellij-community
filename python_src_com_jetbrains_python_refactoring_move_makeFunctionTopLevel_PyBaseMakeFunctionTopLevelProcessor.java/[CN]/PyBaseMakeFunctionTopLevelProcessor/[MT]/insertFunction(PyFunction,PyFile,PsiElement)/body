{
  if (mySourceFile == newFile) {
    final PsiElement surroundingStatement=PyPsiUtils.getParentRightBefore(myFunction,mySourceFile);
    if (anchor == null || surroundingStatement.getTextRange().getEndOffset() < anchor.getTextRange().getStartOffset()) {
      return (PyFunction)mySourceFile.addAfter(newFunction,surroundingStatement);
    }
  }
  return (PyFunction)newFile.addBefore(newFunction,anchor);
}
