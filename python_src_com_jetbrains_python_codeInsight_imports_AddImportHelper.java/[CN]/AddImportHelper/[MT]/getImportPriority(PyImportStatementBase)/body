{
  final PsiElement resolved;
  if (importStatement instanceof PyFromImportStatement) {
    final PyFromImportStatement fromImportStatement=(PyFromImportStatement)importStatement;
    if (fromImportStatement.isFromFuture()) {
      return ImportPriority.FUTURE;
    }
    resolved=fromImportStatement.resolveImportSource();
  }
 else {
    final PyImportElement firstImportElement=ArrayUtil.getFirstElement(importStatement.getImportElements());
    if (firstImportElement == null) {
      return ImportPriority.THIRD_PARTY;
    }
    resolved=firstImportElement.resolve();
  }
  if (resolved == null) {
    return ImportPriority.THIRD_PARTY;
  }
  final PsiFileSystemItem resolvedFileOrDir;
  if (resolved instanceof PsiDirectory) {
    resolvedFileOrDir=(PsiFileSystemItem)resolved;
  }
 else {
    resolvedFileOrDir=resolved.getContainingFile();
  }
  return getImportPriority(importStatement,resolvedFileOrDir);
}
