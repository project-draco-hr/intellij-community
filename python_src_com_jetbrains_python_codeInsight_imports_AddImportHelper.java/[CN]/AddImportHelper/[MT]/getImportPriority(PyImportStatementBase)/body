{
  final PsiElement resolved;
  if (importStatement instanceof PyFromImportStatement) {
    final PyFromImportStatement fromImportStatement=(PyFromImportStatement)importStatement;
    if (fromImportStatement.isFromFuture()) {
      return ImportPriority.FUTURE;
    }
    if (fromImportStatement.getRelativeLevel() > 0) {
      return ImportPriority.PROJECT;
    }
    resolved=fromImportStatement.resolveImportSource();
  }
 else {
    final PyImportElement firstImportElement=ArrayUtil.getFirstElement(importStatement.getImportElements());
    if (firstImportElement == null) {
      return UNRESOLVED_SYMBOL_PRIORITY;
    }
    resolved=firstImportElement.resolve();
  }
  if (resolved == null) {
    return UNRESOLVED_SYMBOL_PRIORITY;
  }
  final PsiFileSystemItem resolvedFileOrDir;
  if (resolved instanceof PsiDirectory) {
    resolvedFileOrDir=(PsiFileSystemItem)resolved;
  }
 else   if (resolved instanceof PsiDirectoryContainer) {
    resolvedFileOrDir=ArrayUtil.getFirstElement(((PsiDirectoryContainer)resolved).getDirectories());
  }
 else {
    resolvedFileOrDir=resolved.getContainingFile();
  }
  if (resolvedFileOrDir == null) {
    return UNRESOLVED_SYMBOL_PRIORITY;
  }
  return getImportPriority(importStatement,resolvedFileOrDir);
}
