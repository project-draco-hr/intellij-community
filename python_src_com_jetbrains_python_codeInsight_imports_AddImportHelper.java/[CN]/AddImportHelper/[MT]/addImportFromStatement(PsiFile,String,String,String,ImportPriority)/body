{
  final PyElementGenerator generator=PyElementGenerator.getInstance(file.getProject());
  final LanguageLevel languageLevel=LanguageLevel.forElement(file);
  final PyFromImportStatement nodeToInsert=generator.createFromImportStatement(languageLevel,from,name,asName);
  try {
    if (InjectedLanguageManager.getInstance(file.getProject()).isInjectedFragment(file)) {
      final PsiElement element=file.addBefore(nodeToInsert,getInsertPosition(file,from,priority));
      PsiElement whitespace=element.getNextSibling();
      if (!(whitespace instanceof PsiWhiteSpace)) {
        whitespace=PsiParserFacade.SERVICE.getInstance(file.getProject()).createWhiteSpaceFromText("  >>> ");
      }
      file.addBefore(whitespace,element);
    }
 else {
      file.addBefore(nodeToInsert,getInsertPosition(file,from,priority));
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
