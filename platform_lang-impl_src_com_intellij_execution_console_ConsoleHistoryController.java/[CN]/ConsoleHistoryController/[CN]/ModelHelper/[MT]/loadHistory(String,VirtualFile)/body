{
  try {
    VirtualFile file=myRootType.isHidden() ? null : HistoryRootType.getInstance().findFile(null,getHistoryName(myRootType,id),ScratchFileService.Option.existing_only);
    if (file == null) {
      if (loadHistoryOld(id)) {
        if (!myRootType.isHidden()) {
          AccessToken token=ApplicationManager.getApplication().acquireWriteActionLock(getClass());
          try {
            VfsUtil.saveText(consoleFile,myContent);
          }
  finally {
            token.finish();
          }
        }
        return true;
      }
      return false;
    }
    List<String> entries=Arrays.asList(VfsUtilCore.loadText(file).split(myRootType.getEntrySeparator()));
    for (ListIterator<String> iterator=entries.listIterator(entries.size()); iterator.hasPrevious(); ) {
      String entry=iterator.previous();
      getModel().addToHistory(entry);
    }
    return true;
  }
 catch (  Exception ignored) {
    return false;
  }
}
