{
  FileElement fileElement=SharedImplUtil.findFileElement(this);
  if (fileElement == null) {
    PsiUtilCore.ensureValid(this);
    LOG.error("fileElement == null!");
    return JavaResolveResult.EMPTY_ARRAY;
  }
  final PsiManagerEx manager=fileElement.getManager();
  if (manager == null) {
    PsiUtilCore.ensureValid(this);
    LOG.error("getManager() == null!");
    return JavaResolveResult.EMPTY_ARRAY;
  }
  PsiFile containingFile=SharedImplUtil.getContainingFile(fileElement);
  boolean valid=containingFile != null && containingFile.isValid();
  if (!valid) {
    PsiUtilCore.ensureValid(this);
    LOG.error("invalid!");
    return JavaResolveResult.EMPTY_ARRAY;
  }
  Project project=manager.getProject();
  return multiResolve(incompleteCode,containingFile,project);
}
