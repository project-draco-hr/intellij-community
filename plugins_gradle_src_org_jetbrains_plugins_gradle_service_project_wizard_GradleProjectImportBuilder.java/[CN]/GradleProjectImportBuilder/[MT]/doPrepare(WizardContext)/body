{
  String pathToUse=getFileToImport();
  VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByPath(pathToUse);
  if (file != null && file.isDirectory()) {
    pathToUse=new File(pathToUse,GradleConstants.DEFAULT_SCRIPT_NAME).getAbsolutePath();
  }
  final ImportFromGradleControl importFromGradleControl=getControl(context.getProject());
  importFromGradleControl.setLinkedProjectPath(pathToUse);
  final Pair<String,Sdk> sdkPair=ExternalSystemJdkUtil.getAvailableJdk(context.getProject());
  if (sdkPair != null) {
    importFromGradleControl.getProjectSettings().setGradleJvm(sdkPair.first);
  }
}
