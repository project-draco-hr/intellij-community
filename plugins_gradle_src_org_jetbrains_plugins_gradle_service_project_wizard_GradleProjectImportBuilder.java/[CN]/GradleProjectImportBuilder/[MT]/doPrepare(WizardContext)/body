{
  String pathToUse=getFileToImport();
  VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByPath(pathToUse);
  if (file != null && !file.isDirectory() && file.getParent() != null) {
    pathToUse=file.getParent().getPath();
  }
  final ImportFromGradleControl importFromGradleControl=getControl(context.getProject());
  importFromGradleControl.setLinkedProjectPath(pathToUse);
  final Pair<String,Sdk> sdkPair=ExternalSystemJdkUtil.getAvailableJdk(context.getProject());
  if (sdkPair != null && !ExternalSystemJdkUtil.USE_INTERNAL_JAVA.equals(sdkPair.first)) {
    importFromGradleControl.getProjectSettings().setGradleJvm(sdkPair.first);
  }
}
