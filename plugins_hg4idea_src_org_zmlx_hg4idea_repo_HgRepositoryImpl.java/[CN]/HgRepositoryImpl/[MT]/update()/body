{
  HgRepoInfo currentInfo=readRepoInfo();
  if (!Disposer.isDisposed(getProject()) && !currentInfo.equals(myInfo)) {
    myInfo=currentInfo;
    HgCommandResult branchCommandResult=new HgBranchesCommand(getProject(),getRoot()).collectBranches();
    if (branchCommandResult == null || branchCommandResult.getExitValue() != 0) {
      LOG.warn("Could not collect hg opened branches.");
      myOpenedBranches=myInfo.getBranches().keySet();
    }
 else {
      myOpenedBranches=HgBranchesCommand.collectNames(branchCommandResult);
    }
    getProject().getMessageBus().syncPublisher(HgVcs.STATUS_TOPIC).update(getProject(),getRoot());
  }
}
