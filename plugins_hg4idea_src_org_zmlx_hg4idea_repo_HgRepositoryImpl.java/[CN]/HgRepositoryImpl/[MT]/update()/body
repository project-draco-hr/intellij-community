{
  HgRepoInfo currentInfo=readRepoInfo();
  final Project project=getProject();
  if (!project.isDisposed() && !currentInfo.equals(myInfo)) {
    myInfo=currentInfo;
    HgCommandResult branchCommandResult=new HgBranchesCommand(project,getRoot()).collectBranches();
    if (branchCommandResult == null || branchCommandResult.getExitValue() != 0) {
      LOG.warn("Could not collect hg opened branches.");
      myOpenedBranches=myInfo.getBranches().keySet();
    }
 else {
      myOpenedBranches=HgBranchesCommand.collectNames(branchCommandResult);
    }
    ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
      public void run(){
        if (!project.isDisposed()) {
          project.getMessageBus().syncPublisher(HgVcs.STATUS_TOPIC).update(project,getRoot());
        }
      }
    }
);
  }
}
