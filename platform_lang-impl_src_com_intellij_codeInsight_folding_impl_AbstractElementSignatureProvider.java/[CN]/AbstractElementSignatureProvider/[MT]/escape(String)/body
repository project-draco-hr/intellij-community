{
  StringBuilder b=StringBuilderSpinAllocator.alloc();
  try {
    int length=name.length();
    b.ensureCapacity(length);
    for (int i=0; i < length; i++) {
      char c=name.charAt(i);
      int p=CHARS_TO_ESCAPE.indexOf(c);
      if (p < 0) {
        b.append(c);
      }
 else {
        b.append(ESCAPE_CHAR).append(REPLACEMENT_CHARS.charAt(p));
      }
    }
    return b.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(b);
  }
}
