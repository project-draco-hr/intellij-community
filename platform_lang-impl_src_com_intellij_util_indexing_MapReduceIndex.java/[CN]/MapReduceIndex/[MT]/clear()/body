{
  try {
    getWriteLock().lock();
    myStorage.clear();
    if (myInputsIndex != null) {
      final File baseFile=myInputsIndex.getBaseFile();
      try {
        myInputsIndex.close();
      }
 catch (      IOException ignored) {
      }
      myNeedsCompaction=false;
      FileUtil.delete(baseFile);
      myInputsIndex=createInputsIndex();
    }
  }
 catch (  StorageException e) {
    LOG.error(e);
  }
catch (  IOException e) {
    LOG.error(e);
  }
 finally {
    myNeedsCompaction=true;
    getWriteLock().unlock();
  }
}
