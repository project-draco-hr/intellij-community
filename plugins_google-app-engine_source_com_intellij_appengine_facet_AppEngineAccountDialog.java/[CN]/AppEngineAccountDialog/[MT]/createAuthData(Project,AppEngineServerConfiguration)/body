{
  if (configuration.isOAuth2()) {
    return AppEngineAuthData.oauth2();
  }
  String email=configuration.getEmail();
  if (!StringUtil.isEmpty(email) && configuration.isPasswordStored()) {
    String password=getStoredPassword(project,email);
    if (!StringUtil.isEmpty(password)) {
      return AppEngineAuthData.login(email,password);
    }
  }
  AppEngineCloudConfigurable configurable=new AppEngineCloudConfigurable(configuration,project,false);
  boolean ok=ShowSettingsUtil.getInstance().editConfigurable(project,configurable);
  if (!ok) {
    return null;
  }
  if (configurable.isOAuth2()) {
    return AppEngineAuthData.oauth2();
  }
  return AppEngineAuthData.login(configurable.getEmail(),configurable.getPassword());
}
