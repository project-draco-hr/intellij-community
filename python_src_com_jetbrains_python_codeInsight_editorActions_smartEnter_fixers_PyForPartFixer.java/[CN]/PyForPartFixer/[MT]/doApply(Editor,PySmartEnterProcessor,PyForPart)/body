{
  final PsiElement colon=PyPsiUtils.getFirstChildOfType(forPart,PyTokenTypes.COLON);
  final Document document=editor.getDocument();
  final PsiElement forToken=PyPsiUtils.getFirstChildOfType(forPart,PyTokenTypes.FOR_KEYWORD);
  if (colon == null) {
    String textToInsert=":";
    PsiElement sourceOrTarget=forPart.getSource();
    PsiElement positionToInsert=sourceOrTarget;
    if (sourceOrTarget == null) {
      sourceOrTarget=forPart.getTarget();
      final PsiElement inToken=PyPsiUtils.getFirstChildOfType(forPart,PyTokenTypes.IN_KEYWORD);
      if (inToken == null) {
        if (sourceOrTarget == null) {
          positionToInsert=sure(forToken);
          textToInsert="  in :";
          processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 1);
        }
 else {
          positionToInsert=sourceOrTarget;
          textToInsert=" in :";
          processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 4);
        }
      }
 else {
        positionToInsert=inToken;
        textToInsert=" :";
        processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 1);
      }
    }
    document.insertString(positionToInsert.getTextRange().getEndOffset(),textToInsert);
  }
}
