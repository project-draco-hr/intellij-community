{
  if (psiElement instanceof PyForPart) {
    final PyForPart forPart=(PyForPart)psiElement;
    final PsiElement colon=PyUtil.getChildByFilter(psiElement,TokenSet.create(PyTokenTypes.COLON),0);
    final Document document=editor.getDocument();
    final PsiElement forToken=PyUtil.getChildByFilter(forPart,TokenSet.create(PyTokenTypes.FOR_KEYWORD),0);
    if (colon == null) {
      String textToInsert=":";
      PsiElement sourceOrTarget=forPart.getSource();
      PsiElement positionToInsert=sourceOrTarget;
      if (sourceOrTarget == null) {
        sourceOrTarget=forPart.getTarget();
        final PsiElement inToken=PyUtil.getChildByFilter(forPart,TokenSet.create(PyTokenTypes.IN_KEYWORD),0);
        if (inToken == null) {
          if (sourceOrTarget == null) {
            positionToInsert=forToken;
            textToInsert="  in :";
            processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 1);
          }
 else {
            positionToInsert=sourceOrTarget;
            textToInsert=" in :";
            processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 4);
          }
        }
 else {
          positionToInsert=inToken;
          textToInsert=" :";
          processor.registerUnresolvedError(positionToInsert.getTextRange().getEndOffset() + 1);
        }
      }
      document.insertString(positionToInsert.getTextRange().getEndOffset(),textToInsert);
    }
  }
}
