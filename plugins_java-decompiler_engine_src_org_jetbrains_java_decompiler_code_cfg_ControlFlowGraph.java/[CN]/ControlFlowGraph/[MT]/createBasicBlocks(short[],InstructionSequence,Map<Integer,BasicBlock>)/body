{
  VBStyleCollection<BasicBlock,Integer> col=new VBStyleCollection<BasicBlock,Integer>();
  InstructionSequence currseq=null;
  ArrayList<Integer> lstOffs=null;
  int len=startblock.length;
  short counter=0;
  int blockoffset=0;
  BasicBlock currentBlock=null;
  for (int i=0; i < len; i++) {
    if (startblock[i] == 1) {
      currentBlock=new BasicBlock();
      currentBlock.id=++counter;
      currseq=new SimpleInstructionSequence();
      lstOffs=new ArrayList<Integer>();
      currentBlock.setSeq(currseq);
      currentBlock.setInstrOldOffsets(lstOffs);
      col.addWithKey(currentBlock,currentBlock.id);
      blockoffset=instrseq.getOffset(i);
    }
    startblock[i]=counter;
    mapInstrBlocks.put(i,currentBlock);
    currseq.addInstruction(instrseq.getInstr(i),instrseq.getOffset(i) - blockoffset);
    lstOffs.add(instrseq.getOffset(i));
  }
  last_id=counter;
  return col;
}
