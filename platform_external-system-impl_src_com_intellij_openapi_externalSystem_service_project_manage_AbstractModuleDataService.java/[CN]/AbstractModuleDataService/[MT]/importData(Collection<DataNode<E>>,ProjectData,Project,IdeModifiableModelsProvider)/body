{
  if (toImport.isEmpty()) {
    return;
  }
  final Collection<DataNode<E>> toCreate=filterExistingModules(toImport,modelsProvider,project);
  if (!toCreate.isEmpty()) {
    createModules(toCreate,modelsProvider,project);
  }
  for (  DataNode<E> node : toImport) {
    Module module=node.getUserData(MODULE_KEY);
    if (module != null) {
      setModuleOptions(module,node);
      final ModifiableModuleModel modifiableModel=modelsProvider.getModifiableModuleModel();
      modifiableModel.setModuleGroupPath(module,node.getData().getIdeModuleGroup());
      ModifiableRootModel modifiableRootModel=modelsProvider.getModifiableRootModel(module);
      syncPaths(module,modifiableRootModel,node.getData());
      setLanguageLevel(modifiableRootModel,node.getData());
    }
  }
}
