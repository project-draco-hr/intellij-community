{
  final Document doc=editor.getDocument();
  for (int i=offset + inc; i < doc.getTextLength() && i >= 0; i+=inc) {
    PsiElement current=file.findElementAt(i);
    if (current == null)     continue;
    if (current.getParent() instanceof XmlText) {
      final int line=doc.getLineNumber(i);
      final int lineStart=doc.getLineStartOffset(line);
      final int lineEnd=doc.getLineEndOffset(line);
      if (lineEnd == offset)       continue;
      final CharSequence text=doc.getCharsSequence().subSequence(lineStart,lineEnd);
      if (StringUtil.isEmptyOrSpaces(text)) {
        editor.getCaretModel().moveToOffset(lineEnd);
        return;
      }
    }
 else     if (isEmptyEditPoint(current)) {
      final int elementStart=current.getTextRange().getStartOffset();
      if (elementStart == offset)       continue;
      editor.getCaretModel().moveToOffset(elementStart);
      return;
    }
  }
}
