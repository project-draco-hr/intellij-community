{
  if (!PyConsoleUtil.isIPythonDetected(myConsoleFile)) {
    return super.parseExpressionOptional();
  }
 else {
    if (myBuilder.getTokenType() == PyTokenTypes.PERC || myBuilder.getTokenType() == PyConsoleTokenTypes.PLING) {
      PsiBuilder.Marker expr=myBuilder.mark();
      PsiBuilder.Marker command=myBuilder.mark();
      myBuilder.advanceLexer();
      if (myBuilder.getTokenType() == PyTokenTypes.IDENTIFIER) {
        myBuilder.advanceLexer();
        command.done(PyElementTypes.REFERENCE_EXPRESSION);
      }
 else {
        expr.drop();
        command.drop();
        myBuilder.error("Identifier expected.");
        return false;
      }
      while (myBuilder.getTokenType() != null) {
        myBuilder.advanceLexer();
      }
      expr.done(PyElementTypes.EMPTY_EXPRESSION);
      return true;
    }
 else {
      return super.parseExpressionOptional();
    }
  }
}
