{
  if (!(attributeDescriptor instanceof RainbowAttributeDescriptor))   return;
  RainbowAttributeDescriptor descriptor=(RainbowAttributeDescriptor)attributeDescriptor;
  List<Pair<Boolean,Color>> rainbowCurState=descriptor.getRainbowCurState();
  if (rainbowCurState.size() < myCbStops.length)   return;
  myGlobalState.setRainbowOn(myRainbow.isSelected());
  for (int i=0; i < myCbStops.length; ++i) {
    boolean isOverride=myCbStops[i].isSelected();
    rainbowCurState.set(i,Pair.create(isOverride,isOverride ? myStops[i].getSelectedColor() : descriptor.getDefaultColor(i)));
  }
  descriptor.apply(scheme);
}
