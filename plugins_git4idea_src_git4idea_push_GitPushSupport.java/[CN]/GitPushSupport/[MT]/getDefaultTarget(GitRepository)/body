{
  if (repository.isFresh()) {
    return null;
  }
  GitLocalBranch currentBranch=repository.getCurrentBranch();
  if (currentBranch == null) {
    return null;
  }
  GitPushTarget persistedTarget=getPersistedTarget(repository,currentBranch);
  if (persistedTarget != null) {
    return persistedTarget;
  }
  GitBranchTrackInfo trackInfo=GitBranchUtil.getTrackInfoForBranch(repository,currentBranch);
  if (trackInfo != null) {
    return new GitPushTarget(trackInfo.getRemoteBranch(),false);
  }
  return proposeTargetForNewBranch(repository,currentBranch);
}
