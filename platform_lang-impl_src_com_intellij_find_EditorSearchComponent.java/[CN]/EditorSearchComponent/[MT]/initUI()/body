{
  myLeftPanel=new NonOpaquePanel(new BorderLayout());
  myLeftPanel.add(mySearchFieldWrapper=new Wrapper(),BorderLayout.NORTH);
  myLeftPanel.add(myReplaceFieldWrapper=new Wrapper(),BorderLayout.CENTER);
  updateSearchComponent();
  updateReplaceComponent();
  initSearchToolbars();
  initReplaceToolBars();
  Wrapper searchToolbarWrapper1=new NonOpaquePanel(new BorderLayout());
  searchToolbarWrapper1.add(mySearchActionsToolbar1,BorderLayout.WEST);
  Wrapper searchToolbarWrapper2=new Wrapper(mySearchActionsToolbar2);
  JPanel searchPair=new NonOpaquePanel(new BorderLayout()).setVerticalSizeReferent(mySearchFieldWrapper);
  searchPair.add(mySearchActionsToolbar1,BorderLayout.WEST);
  searchPair.add(searchToolbarWrapper2,BorderLayout.CENTER);
  JLabel closeLabel=new JLabel(null,AllIcons.Actions.Cross,SwingConstants.RIGHT);
  closeLabel.setBorder(JBUI.Borders.empty(5,5,5,5));
  closeLabel.setVerticalAlignment(SwingConstants.TOP);
  closeLabel.addMouseListener(new MouseAdapter(){
    @Override public void mousePressed(    final MouseEvent e){
      close();
    }
  }
);
  closeLabel.setToolTipText("Close search bar (Escape)");
  searchPair.add(new Wrapper.North(closeLabel),BorderLayout.EAST);
  Wrapper replaceToolbarWrapper1=new Wrapper(myReplaceActionsToolbar1).setVerticalSizeReferent(myReplaceFieldWrapper);
  Wrapper replaceToolbarWrapper2=new Wrapper(myReplaceActionsToolbar2).setVerticalSizeReferent(myReplaceFieldWrapper);
  myReplaceToolbarWrapper=new NonOpaquePanel(new BorderLayout());
  myReplaceToolbarWrapper.add(replaceToolbarWrapper1,BorderLayout.WEST);
  myReplaceToolbarWrapper.add(replaceToolbarWrapper2,BorderLayout.CENTER);
  searchToolbarWrapper1.setHorizontalSizeReferent(replaceToolbarWrapper1);
  myRightPanel=new NonOpaquePanel(new BorderLayout());
  myRightPanel.add(searchPair,BorderLayout.NORTH);
  myRightPanel.add(myReplaceToolbarWrapper,BorderLayout.CENTER);
  OnePixelSplitter splitter=new OnePixelSplitter(false,.25F);
  splitter.setFirstComponent(myLeftPanel);
  splitter.setSecondComponent(myRightPanel);
  splitter.setHonorComponentsMinimumSize(true);
  splitter.setAndLoadSplitterProportionKey("FindSplitterProportion");
  splitter.setOpaque(false);
  splitter.getDivider().setOpaque(false);
  add(splitter,BorderLayout.CENTER);
}
