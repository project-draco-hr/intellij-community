{
  return new Function<String,String>(){
    @Override public String fun(    String internalName){
      String className=internalName;
      if (className.indexOf('$') >= 0) {
        Pair<String,String> p=mapping.get(className);
        if (p != null) {
          className=p.first;
          if (p.second != null) {
            className=fun(p.first) + '.' + p.second;
            mapping.put(className,pair(className,(String)null));
          }
        }
      }
      return className.replace('/','.');
    }
  }
;
}
