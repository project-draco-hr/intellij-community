{
  List<LineFragment> newFragments=new ArrayList<LineFragment>(oldFragments.size());
  for (  LineFragment fragment : oldFragments) {
    LineFragment lastFragment=ContainerUtil.getLastItem(newFragments);
    if (lastFragment != null && canSquash(lastFragment,fragment)) {
      newFragments.remove(newFragments.size() - 1);
      newFragments.add(squash(lastFragment,fragment));
    }
 else {
      newFragments.add(fragment);
    }
  }
  return newFragments;
}
