{
  if (EventQueue.isDispatchThread()) {
    return Messages.showYesNoDialog(project,message,title,Messages.getQuestionIcon());
  }
 else {
    try {
      final Ref<Integer> result=new Ref<Integer>();
      EventQueue.invokeAndWait(new Runnable(){
        @Override public void run(){
          result.set(Messages.showYesNoDialog(project,message,title,Messages.getQuestionIcon()));
        }
      }
);
      return result.get();
    }
 catch (    Exception e) {
      LOG.error("Notification error",e);
      return Messages.CANCEL;
    }
  }
}
