{
  ConcurrentWeakHashMap<Object,Object> map=new ConcurrentWeakHashMap<>();
  map.put(new Object(),new Object());
  do {
    tryGcSoftlyReachableObjects();
    System.gc();
  }
 while (!map.processQueue());
  assertEquals(0,map.underlyingMapSize());
  map.put(this,this);
  assertEquals(1,map.underlyingMapSize());
}
