{
  map.put(new Object(),new Object());
  do {
    tryGcSoftlyReachableObjects();
    System.gc();
  }
 while (!map.processQueue());
  assertTrue(map.isEmpty());
  Object hardKey=map;
  map.put(hardKey,new Object());
  do {
    tryGcSoftlyReachableObjects();
    System.gc();
  }
 while (!map.processQueue());
  assertTrue(map.isEmpty());
  Object hardValue=map;
  map.put(new Object(),hardValue);
  do {
    tryGcSoftlyReachableObjects();
    System.gc();
  }
 while (!map.processQueue());
  assertTrue(map.isEmpty());
}
