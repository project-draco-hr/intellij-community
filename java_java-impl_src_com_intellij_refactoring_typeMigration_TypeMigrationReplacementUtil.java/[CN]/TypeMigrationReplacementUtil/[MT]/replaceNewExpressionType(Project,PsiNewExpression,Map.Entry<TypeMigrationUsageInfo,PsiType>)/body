{
  final PsiType changeType=info.getValue();
  if (changeType != null) {
    try {
      final PsiJavaCodeReferenceElement classReference=expression.getClassOrAnonymousClassReference();
      final PsiType componentType=changeType.getDeepComponentType();
      if (classReference != null) {
        final PsiElement psiElement=changeType.equals(expression.getType()) ? classReference : replaceTypeWithClassReferenceOrKeyword(project,componentType,classReference);
        final PsiNewExpression newExpression=PsiTreeUtil.getParentOfType(psiElement,PsiNewExpression.class);
        if (!tryToReplaceWithDiamond(newExpression,changeType)) {
          return newExpression;
        }
      }
 else {
        final PsiElement typeKeyword=getTypeKeyword(expression);
        if (typeKeyword != null) {
          replaceTypeWithClassReferenceOrKeyword(project,componentType,typeKeyword);
        }
      }
    }
 catch (    IncorrectOperationException e) {
      LOG.error(e);
    }
  }
  return null;
}
