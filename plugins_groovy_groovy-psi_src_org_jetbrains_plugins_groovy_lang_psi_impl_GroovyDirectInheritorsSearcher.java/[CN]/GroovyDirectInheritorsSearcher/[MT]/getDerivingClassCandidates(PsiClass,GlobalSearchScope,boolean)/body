{
  final String name=clazz.getName();
  if (name == null)   return Collections.emptyList();
  final ArrayList<PsiClass> inheritors=new ArrayList<PsiClass>();
  for (  GrReferenceList list : StubIndex.getElements(GrDirectInheritorsIndex.KEY,name,clazz.getProject(),scope,GrReferenceList.class)) {
    final PsiElement parent=list.getParent();
    if (parent instanceof GrTypeDefinition) {
      inheritors.add((PsiClass)parent);
    }
  }
  if (includeAnonymous) {
    final Collection<GrAnonymousClassDefinition> classes=StubIndex.getElements(GrAnonymousClassIndex.KEY,name,clazz.getProject(),scope,GrAnonymousClassDefinition.class);
    for (    GrAnonymousClassDefinition aClass : classes) {
      inheritors.add(aClass);
    }
  }
  return inheritors;
}
