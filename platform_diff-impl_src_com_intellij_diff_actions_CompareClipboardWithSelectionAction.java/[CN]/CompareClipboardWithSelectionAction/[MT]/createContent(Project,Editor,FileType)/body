{
  DocumentContent content=DiffContentFactory.getInstance().create(project,editor.getDocument(),type);
  SelectionModel selectionModel=editor.getSelectionModel();
  if (selectionModel.hasSelection()) {
    TextRange range=new TextRange(selectionModel.getSelectionStart(),selectionModel.getSelectionEnd());
    content=DiffContentFactory.getInstance().createFragment(project,content,range);
  }
  return content;
}
