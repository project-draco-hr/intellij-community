{
  myDebugProcess.getManagerThread().schedule(new SuspendContextCommandImpl(this){
    @Override public void contextAction() throws Exception {
      List<JavaExecutionStack> res=new ArrayList<JavaExecutionStack>();
      Collection<ThreadReferenceProxyImpl> threads=getDebugProcess().getVirtualMachineProxy().allThreads();
      JavaExecutionStack currentStack=null;
      for (      ThreadReferenceProxyImpl thread : threads) {
        boolean current=thread == myThread;
        JavaExecutionStack stack=new JavaExecutionStack(thread,myDebugProcess,current);
        if (!current) {
          res.add(stack);
        }
 else {
          currentStack=stack;
        }
      }
      Collections.sort(res,THREADS_COMPARATOR);
      if (currentStack != null) {
        res.add(0,currentStack);
      }
      container.addExecutionStack(res,true);
    }
  }
);
}
