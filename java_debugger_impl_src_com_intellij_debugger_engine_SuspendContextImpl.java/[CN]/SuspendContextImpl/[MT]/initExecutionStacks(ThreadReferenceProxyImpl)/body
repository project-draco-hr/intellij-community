{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  Collection<JavaExecutionStack> res=new ArrayList<JavaExecutionStack>();
  Collection<ThreadReferenceProxyImpl> threads=getDebugProcess().getVirtualMachineProxy().allThreads();
  for (  ThreadReferenceProxyImpl thread : threads) {
    res.add(new JavaExecutionStack(thread,myDebugProcess,thread == myThread));
  }
  myExecutionStacks=res.toArray(new JavaExecutionStack[res.size()]);
  myThread=newThread;
}
