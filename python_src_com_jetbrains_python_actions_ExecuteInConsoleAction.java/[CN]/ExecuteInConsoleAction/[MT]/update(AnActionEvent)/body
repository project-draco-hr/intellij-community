{
  Editor editor=PlatformDataKeys.EDITOR.getData(e.getDataContext());
  Presentation presentation=e.getPresentation();
  boolean enabled=false;
  if (editor != null && isPython(editor)) {
    String text=getSelectionText(editor);
    if (text != null) {
      presentation.setText(EXECUTE_SELECTION_IN_CONSOLE);
    }
    text=getLineUnderCaret(editor);
    if (text != null) {
      presentation.setText("Execute line in console");
    }
    enabled=!StringUtil.isEmpty(text);
  }
  presentation.setEnabled(enabled);
  presentation.setVisible(enabled);
}
