{
  Editor editor=CommonDataKeys.EDITOR.getData(e.getDataContext());
  if (editor != null) {
    final String selectionText=getSelectionText(editor);
    if (selectionText != null) {
      execute(e,selectionText);
    }
 else {
      String line=getLineUnderCaret(editor);
      if (line != null) {
        execute(e,line);
        moveCaretDown(editor);
      }
    }
  }
}
