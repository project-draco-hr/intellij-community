{
  if (declaration instanceof PsiClass) {
    final PsiClass psiClass=(PsiClass)declaration;
    final String ownerClassQN=getTopmostOwnerClassQualifiedName(psiClass);
    if (ownerClassQN != null) {
      appendClassName(ownerClassQN);
      final String ownerClassPackageName=StringUtil.getPackageName(ownerClassQN);
      if (!StringUtil.isEmpty(ownerClassPackageName)) {
        appendDemandedPackageName(ownerClassPackageName);
      }
    }
 else {
      final String classQN=psiClass.getQualifiedName();
      if (classQN != null) {
        appendClassName(classQN);
      }
    }
  }
}
