{
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new Runnable(){
    @Override public void run(){
      Course course=CCProjectService.getInstance(myProject).getCourse();
      if (course != null) {
        EditorFactory.getInstance().addEditorFactoryListener(new CCEditorFactoryListener(),myProject);
        VirtualFile[] files=FileEditorManager.getInstance(myProject).getOpenFiles();
        for (        VirtualFile file : files) {
          FileEditor fileEditor=FileEditorManager.getInstance(myProject).getSelectedEditor(file);
          if (fileEditor instanceof PsiAwareTextEditorImpl) {
            Editor editor=((PsiAwareTextEditorImpl)fileEditor).getEditor();
            new CCEditorFactoryListener().editorCreated(new EditorFactoryEvent(new EditorFactoryImpl(ProjectManager.getInstance()),editor));
          }
        }
      }
    }
  }
);
}
