{
  final AnAction action=element instanceof AnAction ? (AnAction)element : ((GotoActionModel.ActionWrapper)element).getAction();
  if (action != null) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        if (component == null)         return;
        DataContext context=DataManager.getInstance().getDataContext(component);
        InputEvent inputEvent=e == null ? null : e.getInputEvent();
        AnActionEvent event=AnActionEvent.createFromAnAction(action,inputEvent,ActionPlaces.ACTION_SEARCH,context);
        if (ActionUtil.lastUpdateAndCheckDumb(action,event,false)) {
          if (action instanceof ActionGroup && ((ActionGroup)action).getChildren(event).length > 0) {
            ListPopup popup=JBPopupFactory.getInstance().createActionGroupPopup(event.getPresentation().getText(),(ActionGroup)action,context,JBPopupFactory.ActionSelectionAid.SPEEDSEARCH,false);
            if (component.isShowing()) {
              popup.showInBestPositionFor(context);
            }
 else {
              popup.showInFocusCenter();
            }
          }
 else {
            ActionUtil.performActionDumbAware(action,event);
          }
        }
      }
    }
,ModalityState.NON_MODAL);
  }
}
