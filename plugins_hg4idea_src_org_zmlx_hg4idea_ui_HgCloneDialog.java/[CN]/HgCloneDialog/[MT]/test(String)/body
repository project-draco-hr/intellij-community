{
  final boolean[] testResult=new boolean[1];
  ProgressManager.getInstance().run(new Task.Modal(myProject,DvcsBundle.message("clone.testing",url),true){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      final HgIdentifyCommand identifyCommand=new HgIdentifyCommand(myProject);
      identifyCommand.setSource(url);
      final HgCommandResult result=identifyCommand.execute(ModalityState.stateForComponent(getRootPane()));
      testResult[0]=result != null && result.getExitValue() == 0;
    }
  }
);
  return testResult[0];
}
