{
  if (scope.getProject() == null)   return Collections.emptyList();
  JavaPsiFacade facade=JavaPsiFacade.getInstance(scope.getProject());
  final List<LookupElement> res=new ArrayList<>();
  if (prefix.endsWith(".") && prefix.length() > 1) {
    PsiPackage p=facade.findPackage(prefix.substring(0,prefix.length() - 1));
    if (p != null) {
      for (      PsiClass aClass : p.getClasses(scope)) {
        String qualifiedName=aClass.getQualifiedName();
        if (qualifiedName != null) {
          res.add(LookupElementBuilder.create(aClass,qualifiedName));
        }
      }
    }
  }
  PsiPackage defaultPackage=facade.findPackage("");
  if (defaultPackage != null) {
    collectClassesAndPackageNames(res,defaultPackage,scope);
  }
  return res;
}
