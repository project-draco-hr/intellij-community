{
  Diff.Change change=Diff.buildChangesSomehow(myLines,myCurrentVersion.getSource());
  while (change != null) {
    shiftIndices(change.line1,change.line1,change.line0);
    shiftIndices(change.line1,change.line1 + change.inserted,change.line0 + change.deleted);
    change=change.link;
  }
  if (endLine > myLines.length) {
    endLine=myLines.length;
  }
  if (startLine < 0)   startLine=0;
  if (endLine < startLine)   endLine=startLine;
  return new Block(myLines,startLine,endLine);
}
