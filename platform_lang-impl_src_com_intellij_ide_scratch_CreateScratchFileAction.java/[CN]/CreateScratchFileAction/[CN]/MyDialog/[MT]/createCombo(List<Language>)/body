{
  JComboBox jComboBox=new ComboBox(new CollectionComboBoxModel(languages));
  jComboBox.setRenderer(new ListCellRendererWrapper<Language>(){
    @Override public void customize(    JList list,    Language lang,    int index,    boolean selected,    boolean hasFocus){
      if (lang != null) {
        setText(lang.getDisplayName());
        LanguageFileType associatedLanguage=lang.getAssociatedFileType();
        if (associatedLanguage != null)         setIcon(associatedLanguage.getIcon());
      }
    }
  }
);
  new ComboboxSpeedSearch(jComboBox){
    @Override protected String getElementText(    Object element){
      return element instanceof Language ? ((Language)element).getDisplayName() : null;
    }
  }
;
  Language previous=myProject != null ? ScratchpadManager.getInstance(myProject).getLatestLanguage() : null;
  if (previous != null) {
    jComboBox.setSelectedItem(previous);
  }
  return jComboBox;
}
