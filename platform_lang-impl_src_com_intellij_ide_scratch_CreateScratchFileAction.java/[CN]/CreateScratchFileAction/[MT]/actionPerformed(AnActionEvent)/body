{
  final Project project=e.getProject();
  if (project == null)   return;
  MyDialog dialog=new MyDialog(project);
  dialog.setResizable(false);
  if (dialog.showAndGet()) {
    Language language=dialog.getType();
    VirtualFile file=ScratchpadManager.getInstance(project).createScratchFile(language);
    if (file == null)     return;
    OpenFileDescriptor descriptor=new OpenFileDescriptor(project,file);
    FileEditorManager.getInstance(project).openTextEditor(descriptor,true);
  }
}
