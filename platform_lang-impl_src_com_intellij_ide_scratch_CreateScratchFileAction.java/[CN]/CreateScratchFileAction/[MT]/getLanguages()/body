{
  Set<Language> result=ContainerUtil.newTreeSet(new Comparator<Language>(){
    @Override public int compare(    @NotNull Language l1,    @NotNull Language l2){
      return l1.getDisplayName().compareTo(l2.getDisplayName());
    }
  }
);
  for (  Language lang : Language.getRegisteredLanguages()) {
    if (!StringUtil.isEmpty(lang.getDisplayName()))     result.add(lang);
    for (    Language dialect : lang.getDialects())     result.add(dialect);
  }
  return ContainerUtil.filter(result,new Condition<Language>(){
    @Override public boolean value(    Language lang){
      if (lang instanceof DependentLanguage || lang instanceof InjectableLanguage)       return false;
      LanguageFileType type=lang.getAssociatedFileType();
      if (type == null)       return false;
      String name=lang.getDisplayName();
      if (StringUtil.startsWith(name,"<") || StringUtil.startsWith(name,"[") || StringUtil.isEmpty(name))       return false;
      return !StringUtil.isEmpty(type.getDefaultExtension());
    }
  }
);
}
