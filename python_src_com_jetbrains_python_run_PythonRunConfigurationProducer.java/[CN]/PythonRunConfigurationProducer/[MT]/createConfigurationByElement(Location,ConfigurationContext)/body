{
  mySourceFile=location.getPsiElement().getContainingFile();
  if (mySourceFile == null || mySourceFile.getFileType() != PythonFileType.INSTANCE) {
    return null;
  }
  final Project project=mySourceFile.getProject();
  RunnerAndConfigurationSettingsImpl settings=cloneTemplateConfiguration(project,context);
  PythonRunConfiguration configuration=(PythonRunConfiguration)settings.getConfiguration();
  configuration.setScriptName(mySourceFile.getVirtualFile().getPath());
  configuration.setName(configuration.suggestedName());
  Module module=ModuleUtil.findModuleForPsiElement(location.getPsiElement());
  if (module != null) {
    configuration.setUseModuleSdk(true);
    configuration.setModule(module);
  }
  copyStepsBeforeRun(project,configuration);
  return settings;
}
