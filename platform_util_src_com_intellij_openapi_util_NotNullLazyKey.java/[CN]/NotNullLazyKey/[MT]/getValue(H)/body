{
  T data=h.getUserData(this);
  if (data == null) {
    RecursionGuard.StackStamp stamp=ourGuard.markStack();
    data=myFunction.fun(h);
    if (stamp.mayCacheNow()) {
      if (h instanceof UserDataHolderEx) {
        data=((UserDataHolderEx)h).putUserDataIfAbsent(this,data);
      }
 else {
        h.putUserData(this,data);
      }
    }
  }
  return data;
}
