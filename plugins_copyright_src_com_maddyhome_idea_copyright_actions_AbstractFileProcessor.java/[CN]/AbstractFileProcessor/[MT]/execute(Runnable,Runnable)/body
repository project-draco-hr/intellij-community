{
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        @Override public void run(){
          readAction.run();
        }
      }
);
    }
  }
,title,true,myProject);
  new WriteCommandAction(myProject,title){
    @Override protected void run(    @NotNull Result result) throws Throwable {
      writeAction.run();
    }
  }
.execute();
}
