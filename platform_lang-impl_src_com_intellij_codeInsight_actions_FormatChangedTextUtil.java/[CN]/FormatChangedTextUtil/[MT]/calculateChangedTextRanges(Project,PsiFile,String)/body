{
  Document documentFromVcs=EditorFactory.getInstance().createDocument(contentFromVcs);
  Document document=PsiDocumentManager.getInstance(project).getDocument(file);
  if (document == null) {
    return ContainerUtil.emptyList();
  }
  try {
    List<Range> changedRanges=new RangesBuilder(document,documentFromVcs).getRanges();
    return getChangedTextRanges(document,changedRanges);
  }
 catch (  FilesTooBigForDiffException e) {
    LOG.error("Error while calculating changed ranges for: " + file.getVirtualFile(),e);
    return ContainerUtil.emptyList();
  }
}
