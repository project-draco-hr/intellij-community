{
  List<TextRange> ranges=ContainerUtil.newArrayList();
  for (  Range range : changedRanges) {
    if (range.getType() != Range.DELETED) {
      int changeStartLine=range.getOffset1();
      int changeEndLine=range.getOffset2();
      int lineStartOffset=document.getLineStartOffset(changeStartLine);
      int lineEndOffset=document.getLineEndOffset(changeEndLine - 1);
      ranges.add(new TextRange(lineStartOffset,lineEndOffset));
    }
  }
  return ranges;
}
