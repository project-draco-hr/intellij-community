{
  List<TextRange> cachedChangedLines=getCachedChangedLines(project,file);
  if (cachedChangedLines != null) {
    return cachedChangedLines;
  }
  Change change=ChangeListManager.getInstance(project).getChange(file.getVirtualFile());
  if (change == null) {
    return ContainerUtilRt.emptyList();
  }
  if (change.getType() == Change.Type.NEW) {
    return ContainerUtil.newArrayList(file.getTextRange());
  }
  String contentFromVcs=getRevisionedContentFrom(change);
  return contentFromVcs != null ? calculateChangedTextRanges(project,file,contentFromVcs) : ContainerUtil.<TextRange>emptyList();
}
