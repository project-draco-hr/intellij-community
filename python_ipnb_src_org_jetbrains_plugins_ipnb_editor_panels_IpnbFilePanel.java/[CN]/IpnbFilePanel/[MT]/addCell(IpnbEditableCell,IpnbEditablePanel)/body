{
  final GridBagConstraints c=new GridBagConstraints();
  c.fill=GridBagConstraints.HORIZONTAL;
  c.gridx=0;
  c.gridy=0;
  c.gridwidth=1;
  c.insets=new Insets(INSET_Y,INSET_X,0,0);
  if (myIpnbPanels.isEmpty()) {
    final int width=IpnbEditorUtil.PANEL_WIDTH + IpnbEditorUtil.PROMPT_SIZE.width;
    final JLabel label=new JLabel("<html><body style='width: " + width + "px'></body></html>");
    add(label,c);
  }
  final IpnbEditablePanel selectedCell=getSelectedCell();
  final int index=myIpnbPanels.indexOf(selectedCell);
  myIpnbFile.addCell(cell,index + 1);
  myIpnbPanels.add(index + 1,panel);
  final JPanel promptPanel=new JPanel();
  promptPanel.setPreferredSize(new Dimension(IpnbEditorUtil.PROMPT_SIZE.width,1));
  promptPanel.setBackground(getBackground());
  promptPanel.setOpaque(false);
  add(promptPanel,c);
  c.gridy+=1;
  for (  IpnbPanel comp : myIpnbPanels) {
    c.gridwidth=1;
    c.gridx=1;
    if (comp instanceof IpnbCodePanel) {
      c.gridwidth=2;
      c.gridx=0;
      add(comp,c);
    }
 else {
      add(comp,c);
    }
    c.gridy+=1;
  }
  c.weighty=1;
  add(createEmptyPanel(),c);
  setSelectedCell(panel);
  requestFocus();
  revalidate();
  repaint();
}
