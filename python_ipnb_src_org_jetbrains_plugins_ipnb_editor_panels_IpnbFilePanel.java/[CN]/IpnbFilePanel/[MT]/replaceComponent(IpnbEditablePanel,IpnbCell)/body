{
  removeAll();
  final int index=myIpnbPanels.indexOf(from);
  IpnbEditablePanel panel;
  if (cell instanceof IpnbCodeCell) {
    panel=new IpnbCodePanel(myProject,myParent,(IpnbCodeCell)cell);
  }
 else   if (cell instanceof IpnbMarkdownCell) {
    panel=new IpnbMarkdownPanel((IpnbMarkdownCell)cell);
  }
 else   if (cell instanceof IpnbHeadingCell) {
    panel=new IpnbHeadingPanel((IpnbHeadingCell)cell);
  }
 else {
    throw new UnsupportedOperationException(cell.getClass().toString());
  }
  if (index >= 0) {
    myIpnbPanels.remove(index);
    myIpnbPanels.add(index,panel);
  }
  for (  IpnbPanel comp : myIpnbPanels) {
    add(comp);
  }
  add(createEmptyPanel());
  if (from instanceof IpnbCodePanel) {
    panel.switchToEditing();
  }
  setSelectedCell(panel);
  remove(from);
  revalidate();
  repaint();
}
