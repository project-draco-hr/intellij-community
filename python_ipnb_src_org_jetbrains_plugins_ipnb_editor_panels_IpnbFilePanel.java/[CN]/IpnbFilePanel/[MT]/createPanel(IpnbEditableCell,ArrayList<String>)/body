{
  if (cell instanceof IpnbCodeCell) {
    final IpnbCodeCell codeCell=(IpnbCodeCell)cell;
    final IpnbCodeCell ipnbCodeCell=new IpnbCodeCell(codeCell.getLanguage(),newCellSource,codeCell.getPromptNumber(),codeCell.getCellOutputs(),codeCell.getMetadata());
    return new IpnbCodePanel(myProject,myParent,ipnbCodeCell);
  }
 else   if (cell instanceof IpnbMarkdownCell) {
    final IpnbMarkdownCell markdownCell=new IpnbMarkdownCell(newCellSource,cell.getMetadata());
    return new IpnbMarkdownPanel(markdownCell,this);
  }
 else {
    final IpnbHeadingCell headingCell=new IpnbHeadingCell(newCellSource,((IpnbHeadingCell)cell).getLevel(),cell.getMetadata());
    return new IpnbHeadingPanel(headingCell);
  }
}
