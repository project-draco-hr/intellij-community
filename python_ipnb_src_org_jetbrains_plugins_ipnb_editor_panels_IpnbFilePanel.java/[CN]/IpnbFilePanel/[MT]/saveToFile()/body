{
  final String oldText=myDocument.getText();
  final String newText=IpnbParser.newDocumentText(this);
  if (newText == null)   return;
  if (oldText.equals(newText)) {
    new Alarm().addRequest(new MySynchronizeRequest(),10,ModalityState.stateForComponent(this));
    return;
  }
  try {
    final ReplaceInfo replaceInfo=findFragmentToChange(oldText,newText);
    if (replaceInfo.getStartOffset() != -1) {
      myDocument.replaceString(replaceInfo.getStartOffset(),replaceInfo.getEndOffset(),replaceInfo.getReplacement());
    }
  }
 catch (  Exception e) {
    myDocument.replaceString(0,oldText.length(),newText);
  }
}
