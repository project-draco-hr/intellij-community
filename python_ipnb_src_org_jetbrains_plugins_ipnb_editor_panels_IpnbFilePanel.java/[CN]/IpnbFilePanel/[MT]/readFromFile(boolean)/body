{
  try {
    IpnbFile file=IpnbParser.parseIpnbFile(myDocument,myVirtualFile);
    if (file.equals(myIpnbFile))     return;
    myIpnbFile=file;
    myIpnbPanels.clear();
    mySelectedCell=null;
    if (myIpnbFile.getCells().isEmpty()) {
      CommandProcessor.getInstance().runUndoTransparentAction(new Runnable(){
        public void run(){
          ApplicationManager.getApplication().runWriteAction(new Runnable(){
            public void run(){
              createAndAddCell(true);
              saveToFile();
            }
          }
);
        }
      }
);
    }
  }
 catch (  IOException e) {
    if (showError)     Messages.showErrorDialog(getProject(),e.getMessage(),"Can't open " + myVirtualFile.getPath());
 else     LOG.error(e.getMessage(),"Can't open " + myVirtualFile.getPath());
  }
  layoutFile();
}
