{
  final IpnbEditablePanel selectedCell=getSelectedCell();
  if (selectedCell == null)   return;
  final int index=getSelectedIndex();
  int siblingIndex=down ? index + 1 : index - 1;
  if (myIpnbPanels.size() <= siblingIndex && down) {
    return;
  }
  if (siblingIndex < 0 && !down) {
    return;
  }
  if (down) {
    final IpnbEditableCell cell=selectedCell.getCell();
    deleteSelectedCell();
    myIpnbFile.addCell(cell,index + 1);
    myIpnbPanels.add(index + 1,selectedCell);
    add(selectedCell,index + 1);
    selectPrev(selectedCell);
    setSelectedCell(selectedCell);
  }
 else {
    final IpnbEditablePanel siblingPanel=myIpnbPanels.get(siblingIndex);
    deleteCell(siblingPanel);
    addCell(siblingPanel,true);
    setSelectedCell(selectedCell);
  }
  saveToFile(false);
}
