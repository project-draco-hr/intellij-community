{
  final IpnbEditablePanel currentCellPanel=getSelectedCell();
  if (currentCellPanel == null)   return;
  final boolean hasCellToMerge=below ? hasNextCell(currentCellPanel) : hasPrevCell(currentCellPanel);
  if (!hasCellToMerge)   return;
  final List<String> currentCellSource=getCellSource(currentCellPanel);
  if (below) {
    selectNext(currentCellPanel);
  }
 else {
    selectPrev(currentCellPanel);
  }
  final IpnbEditablePanel cellToMergePanel=getSelectedCell();
  final IpnbCell cellToMerge=cellToMergePanel.myCell;
  if (cellToMerge instanceof IpnbEditableCell) {
    final List<String> cellToMergeSource=((IpnbEditableCell)cellToMerge).getSource();
    final ArrayList<String> source=below ? mergeCellsSource(cellToMergeSource,currentCellSource) : mergeCellsSource(currentCellSource,cellToMergeSource);
    ((IpnbEditableCell)cellToMerge).setSource(source);
    cellToMergePanel.updateCellView();
  }
  actualizeCellData(cellToMerge);
  currentCellPanel.repaint();
  deleteCell(currentCellPanel);
  saveToFile();
}
