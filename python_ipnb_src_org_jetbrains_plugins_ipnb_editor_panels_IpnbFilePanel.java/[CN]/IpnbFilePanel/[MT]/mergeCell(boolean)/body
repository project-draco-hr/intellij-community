{
  final IpnbEditablePanel currentCellPanel=getSelectedCell();
  if (currentCellPanel == null)   return;
  final boolean hasCellToMerge=below ? hasNextCell(currentCellPanel) : hasPrevCell(currentCellPanel);
  if (!hasCellToMerge)   return;
  final List<String> currentCellSource=getCellSource(currentCellPanel);
  if (below) {
    selectPrev(currentCellPanel);
  }
 else {
    selectNext(currentCellPanel);
  }
  final IpnbEditablePanel prevCellPanel=getSelectedCell();
  final IpnbCell prevCell=prevCellPanel.myCell;
  if (prevCell instanceof IpnbEditableCell) {
    final ArrayList<String> source=new ArrayList<>();
    final List<String> prevCellSource=((IpnbEditableCell)prevCell).getSource();
    source.addAll(prevCellSource);
    source.add("\n");
    source.addAll(currentCellSource);
    ((IpnbEditableCell)prevCell).setSource(source);
    prevCellPanel.updateCellView();
  }
  actualizeCellData(prevCell);
  currentCellPanel.repaint();
  deleteCell(currentCellPanel);
  saveToFile();
}
