{
  final IpnbEditablePanel cellPanel=getSelectedCell();
  if (cellPanel == null)   return;
  final IpnbEditableCell cell=cellPanel.getCell();
  final int position=cellPanel.getCaretPosition();
  if (position == -1)   return;
  final String oldCellText=cellPanel.getText(0,position);
  final String newCellText=cellPanel.getText(position);
  if (oldCellText != null) {
    final JTextArea editablePanel=cellPanel.getEditablePanel();
    if (editablePanel != null) {
      editablePanel.setText(oldCellText);
    }
    cellPanel.getCell().setSource(createCellSourceFromText(oldCellText));
    actualizeCellData(cell);
    cellPanel.updateCellView();
  }
  IpnbEditablePanel panel;
  final ArrayList<String> newCellSource=createCellSourceFromText(newCellText);
  panel=createPanel(cell,newCellSource);
  addCell(panel,true);
  saveToFile();
}
