{
  final IpnbEditablePanel selectedCellPanel=getSelectedCellPanel();
  if (selectedCellPanel == null)   return;
  final IpnbEditableCell cell=selectedCellPanel.getCell();
  final int position=selectedCellPanel.getCaretPosition();
  if (position == -1)   return;
  final String oldCellText=selectedCellPanel.getText(0,position);
  final String newCellText=selectedCellPanel.getText(position);
  if (oldCellText != null) {
    final JTextArea editablePanel=selectedCellPanel.getEditablePanel();
    if (editablePanel != null) {
      editablePanel.setText(oldCellText);
    }
    selectedCellPanel.getCell().setSource(createCellSourceFromText(oldCellText));
    actualizeCellData(cell);
    selectedCellPanel.updateCellView();
  }
  IpnbEditablePanel panel;
  final ArrayList<String> newCellSource=createCellSourceFromText(newCellText);
  panel=createPanel(cell,newCellSource);
  addCell(panel,true);
  saveToFile();
}
