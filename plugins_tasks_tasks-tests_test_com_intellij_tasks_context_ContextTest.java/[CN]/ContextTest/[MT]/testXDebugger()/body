{
  final WorkingContextManager manager=getContextManager();
  final XBreakpointManager breakpointManager=XDebuggerManager.getInstance(getProject()).getBreakpointManager();
  final XsltBreakpointType type=XBreakpointType.EXTENSION_POINT_NAME.findExtension(XsltBreakpointType.class);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      XLineBreakpointImpl<XBreakpointProperties> breakpoint=(XLineBreakpointImpl<XBreakpointProperties>)breakpointManager.addLineBreakpoint(type,"foo",0,null);
      final String name="foo";
      manager.saveContext(name,null);
      breakpointManager.removeBreakpoint(breakpoint);
    }
  }
);
  manager.loadContext("foo");
  Collection<? extends XLineBreakpoint<XBreakpointProperties>> breakpoints=breakpointManager.getBreakpoints(type);
  assertEquals(1,breakpoints.size());
  manager.clearContext();
}
