{
  final WorkingContextManager manager=getContextManager();
  final XBreakpointManager breakpointManager=XDebuggerManager.getInstance(getProject()).getBreakpointManager();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      XLineBreakpointImpl<XBreakpointProperties> breakpoint=(XLineBreakpointImpl<XBreakpointProperties>)breakpointManager.addLineBreakpoint(new XsltBreakpointType(),"foo",0,null);
      final String name="foo";
      manager.saveContext(name,null);
      breakpointManager.removeBreakpoint(breakpoint);
    }
  }
);
  manager.loadContext("foo");
  XBreakpoint<?>[] breakpoints=breakpointManager.getAllBreakpoints();
  assertEquals(1,breakpoints.length);
  manager.clearContext();
}
