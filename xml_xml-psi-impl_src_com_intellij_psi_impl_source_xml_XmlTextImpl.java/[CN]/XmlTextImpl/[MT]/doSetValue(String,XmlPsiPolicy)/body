{
  final PomModel model=PomManager.getModel(getProject());
  final XmlAspect aspect=model.getModelAspect(XmlAspect.class);
  model.runTransaction(new PomTransactionBase(this,aspect){
    public PomModelEvent runInner(){
      final String oldText=getText();
      final ASTNode firstEncodedElement=policy.encodeXmlTextContents(s,XmlTextImpl.this);
      if (firstEncodedElement == null) {
        delete();
      }
 else {
        replaceAllChildrenToChildrenOf(firstEncodedElement.getTreeParent());
      }
      clearCaches();
      return XmlTextChangedImpl.createXmlTextChanged(model,XmlTextImpl.this,oldText);
    }
  }
);
}
