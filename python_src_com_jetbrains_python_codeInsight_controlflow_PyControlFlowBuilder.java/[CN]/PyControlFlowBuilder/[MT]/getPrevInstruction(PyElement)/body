{
  final Ref<Instruction> head=new Ref<Instruction>(myPrevInstruction);
  processPending(new PendingProcessor(){
    public void process(    final PsiElement pendingScope,    final Instruction instruction){
      if (pendingScope != null && PsiTreeUtil.isAncestor(condition,pendingScope,false)) {
        head.set(instruction);
      }
 else {
        addPendingEdge(pendingScope,instruction);
      }
    }
  }
);
  return head.get();
}
