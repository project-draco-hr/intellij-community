{
  final InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(project).getInspectionProfile();
  final InspectionToolWrapper tool=element != null ? (InspectionToolWrapper)inspectionProfile.getInspectionTool(name,element) : (InspectionToolWrapper)inspectionProfile.getInspectionTool(name);
  if (tool instanceof LocalInspectionToolWrapper && ((LocalInspectionToolWrapper)tool).isUnfair()) {
    final LocalInspectionTool inspectionTool=((LocalInspectionToolWrapper)tool).getTool();
    if (inspectionTool instanceof PairedUnfairLocalInspectionTool) {
      final String oppositeShortName=((PairedUnfairLocalInspectionTool)inspectionTool).getInspectionForBatchShortName();
      if (oppositeShortName != null) {
        return element != null ? (InspectionToolWrapper)inspectionProfile.getInspectionTool(oppositeShortName,element) : (InspectionToolWrapper)inspectionProfile.getInspectionTool(oppositeShortName);
      }
    }
    return null;
  }
  return tool;
}
