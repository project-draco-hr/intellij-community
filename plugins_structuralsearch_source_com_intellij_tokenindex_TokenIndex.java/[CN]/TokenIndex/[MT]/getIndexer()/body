{
  return new DataIndexer<TokenIndexKey,List<Token>,FileContent>(){
    @NotNull public Map<TokenIndexKey,List<Token>> map(    FileContent inputData){
      Map<TokenIndexKey,List<Token>> result=new HashMap<TokenIndexKey,List<Token>>(1);
      RecursiveTokenizingVisitor visitor=new RecursiveTokenizingVisitor();
      inputData.getPsiFile().accept(visitor);
      List<Token> tokens=visitor.getTokens();
      if (tokens.size() > 0) {
        String path=inputData.getFile().getPath();
        tokens.add(new PathMarkerToken(path));
        TokenIndexKey key=new TokenIndexKey(visitor.getLanguages(),getBlockId(path));
        result.put(key,tokens);
      }
      return result;
    }
  }
;
}
