{
  TestFileStructure fileTree=new TestFileStructure(getModule(),myWorkingDirectory);
  PsiFile java1=fileTree.addTestFile("Test1.java","empty content");
  PsiFile php1=fileTree.addTestFile("Pair1.php","empty content");
  PsiFile js1=fileTree.addTestFile("Pair1.js","empty content");
  PsiDirectory outer=fileTree.createDirectoryAndMakeItCurrent("toFormat");
  PsiFile java2=fileTree.addTestFile("Test2.java","empty content");
  PsiFile php2=fileTree.addTestFile("Pair2.php","empty content");
  PsiFile js2=fileTree.addTestFile("Pair2.js","empty content");
  PsiDirectory inner=fileTree.createDirectoryAndMakeItCurrent("toFormat");
  PsiFile java3=fileTree.addTestFile("Test3.java","empty content");
  PsiFile php3=fileTree.addTestFile("Pair3.php","empty content");
  PsiFile js3=fileTree.addTestFile("Pair3.js","empty content");
  reformatDirectory(myWorkingDirectory,"*.js",directoryScope(outer,true));
  assertWasFormatted(js2,js3);
  assertWasNotFormatted(java1,php1,js1,java2,php2,java3,php3);
  reformatDirectory(myWorkingDirectory,"*.js",directoryScope(myWorkingDirectory,false));
  assertWasFormatted(js1);
  assertWasNotFormatted(js2,js3,java1,php1,java2,php2,java3,php3);
  reformatDirectory(myWorkingDirectory,"*.java, *.php",directoryScope(myWorkingDirectory,false).union(directoryScope(inner,false)));
  assertWasFormatted(java1,php1,java3,php3);
  assertWasNotFormatted(java2,php2,js1,js2,js3);
}
