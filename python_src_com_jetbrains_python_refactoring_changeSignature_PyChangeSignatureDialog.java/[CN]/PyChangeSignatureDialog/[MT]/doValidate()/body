{
  final String message=validateAndCommitData();
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      getRefactorAction().setEnabled(message == null);
      getPreviewAction().setEnabled(message == null);
    }
  }
);
  if (message != null)   return new ValidationInfo(message);
  return super.doValidate();
}
