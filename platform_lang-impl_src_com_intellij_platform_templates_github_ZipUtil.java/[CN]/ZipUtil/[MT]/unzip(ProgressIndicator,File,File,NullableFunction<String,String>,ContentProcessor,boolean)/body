{
  File unzipToDir=getUnzipToDir(progress,targetDir,unwrapSingleTopLevelFolder);
  ZipFile zipFile=new ZipFile(zipArchive,ZipFile.OPEN_READ);
  try {
    Enumeration<? extends ZipEntry> entries=zipFile.entries();
    while (entries.hasMoreElements()) {
      ZipEntry entry=entries.nextElement();
      InputStream entryContentStream=zipFile.getInputStream(entry);
      unzipEntryToDir(progress,entry,entryContentStream,unzipToDir,pathConvertor,contentProcessor);
      entryContentStream.close();
    }
  }
  finally {
    zipFile.close();
  }
  doUnwrapSingleTopLevelFolder(unwrapSingleTopLevelFolder,unzipToDir,targetDir);
}
