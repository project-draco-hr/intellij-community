{
  String relativeExtractPath=createRelativeExtractPath(zipEntry);
  if (pathConvertor != null) {
    relativeExtractPath=pathConvertor.fun(relativeExtractPath);
    if (relativeExtractPath == null) {
      return;
    }
  }
  File child=new File(extractToDir,relativeExtractPath);
  File dir=zipEntry.isDirectory() ? child : child.getParentFile();
  if (!dir.exists() && !dir.mkdirs()) {
    throw new IOException("Unable to create dir: '" + dir + "'!");
  }
  if (zipEntry.isDirectory()) {
    return;
  }
  if (progress != null) {
    progress.setText("Extracting " + relativeExtractPath + " ...");
  }
  if (contentProcessor == null) {
    FileOutputStream fileOutputStream=new FileOutputStream(child);
    try {
      FileUtil.copy(entryContentStream,fileOutputStream);
    }
  finally {
      fileOutputStream.close();
    }
  }
 else {
    byte[] content=contentProcessor.processContent(FileUtil.loadBytes(entryContentStream),child);
    if (content != null) {
      FileOutputStream fileOutputStream=new FileOutputStream(child);
      try {
        fileOutputStream.write(content);
      }
  finally {
        fileOutputStream.close();
      }
    }
  }
  LOG.info("Extract: " + relativeExtractPath);
}
