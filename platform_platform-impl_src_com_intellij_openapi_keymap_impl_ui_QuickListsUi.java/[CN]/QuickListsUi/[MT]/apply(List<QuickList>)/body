{
  itemPanel.apply();
  List<QuickList> items=editor.getModel().getItems();
  for (int i=items.size() - 1; i >= 0; i--) {
    QuickList item=items.get(i);
    if (item.getName().isEmpty()) {
      if (itemEditor.isEmpty(item)) {
        ListUtil.removeIndices(editor.getList(),new int[]{i});
      }
 else {
        throw new ConfigurationException("Quick list should have non empty name");
      }
    }
  }
  editor.processModifiedItems(new PairProcessor<QuickList,QuickList>(){
    @Override public boolean process(    QuickList newItem,    QuickList oldItem){
      if (!oldItem.getName().equals(newItem.getName())) {
        keymapListener.quickListRenamed(oldItem,newItem);
      }
      return true;
    }
  }
);
  if (isModified(settings)) {
    java.util.List<QuickList> result=editor.apply();
    keymapListener.processCurrentKeymapChanged(result.toArray(new QuickList[result.size()]));
    QuickListsManager.getInstance().setQuickLists(result);
  }
}
