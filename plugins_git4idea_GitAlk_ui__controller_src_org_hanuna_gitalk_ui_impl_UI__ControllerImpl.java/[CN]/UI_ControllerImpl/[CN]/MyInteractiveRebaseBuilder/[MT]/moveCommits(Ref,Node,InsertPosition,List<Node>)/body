{
  if (resultRef == null) {
    DataPackUtils du=getDataPackUtils();
    if (position == InsertPosition.BELOW) {
      base=getParent(base);
    }
    Node lowestInserted=nodesToInsert.get(nodesToInsert.size() - 1);
    if (du.isAncestorOf(base,lowestInserted)) {
      this.base=base;
    }
 else {
      this.base=getParent(lowestInserted);
    }
    List<Node> commitsAboveBase=du.getCommitsInBranchAboveBase(base,subjectRef);
  }
}
