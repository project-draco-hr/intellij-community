{
  if (samType instanceof PsiClassType) {
    PsiClassType.ClassResolveResult resolveResult=((PsiClassType)samType).resolveGenerics();
    PsiClass samClass=resolveResult.getElement();
    if (samClass != null && samClass.getTypeParameters().length != 0) {
      MethodSignature samSignature=ClosureToSamConverter.findSingleAbstractMethod(samClass,PsiSubstitutor.EMPTY);
      if (samSignature != null) {
        PsiMethod samMethod=MethodSignatureUtil.findMethodBySignature(samClass,samSignature,true);
        if (samMethod != null) {
          PsiSubstitutor substitutor=myHelper.inferTypeArguments(samClass.getTypeParameters(),new PsiType[]{samMethod.getReturnType()},closure.getParameters(),LanguageLevel.JDK_1_7);
          return JavaPsiFacade.getElementFactory(myPlace.getProject()).createType(samClass,substitutor);
        }
      }
    }
  }
  return null;
}
