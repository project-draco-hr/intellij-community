{
  if (modalityState == null)   modalityState=ModalityState.NON_MODAL;
  if (indicator == null) {
    if (ApplicationManager.getApplication().isHeadlessEnvironment()) {
      indicator=new EmptyProgressIndicator();
    }
 else {
      indicator=new BackgroundableProcessIndicator(task);
    }
  }
  myProcessor.add(new TaskData(task,modalityState,indicator),modalityState);
}
