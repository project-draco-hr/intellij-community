{
  PythonRemoteInterpreterManager manager=PythonRemoteInterpreterManager.getInstance();
  if (manager != null) {
    ProcessHandler processHandler;
    while (true) {
      try {
        processHandler=doStartRemoteProcess(sdk,commandLine,manager,project,mappingSettings);
        break;
      }
 catch (      ExecutionException e) {
        final Application application=ApplicationManager.getApplication();
        if (application != null && (application.isUnitTestMode() || application.isHeadlessEnvironment())) {
          throw new RuntimeException(e);
        }
        if (Messages.showYesNoDialog(e.getMessage() + "\nTry again?","Can't Run Remote Interpreter",Messages.getErrorIcon()) == Messages.NO) {
          throw new ExecutionException("Can't run remote python interpreter: " + e.getMessage());
        }
      }
    }
    ProcessTerminatedListener.attach(processHandler);
    return processHandler;
  }
 else {
    throw new PythonRemoteInterpreterManager.PyRemoteInterpreterExecutionException();
  }
}
