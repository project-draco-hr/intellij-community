{
synchronized (HANDLERS_LOCK) {
    XmlRpcServer xmlRpcServer=XmlRpcServer.SERVICE.getInstance();
    if (!xmlRpcServer.hasHandler(myHandlerName)) {
      xmlRpcServer.addHandler(myHandlerName,createRpcRequestHandlerDelegate());
    }
    final int key=myNextHandlerKey;
    handlers.put(key,handler);
    Disposer.register(parentDisposable,new Disposable(){
      @Override public void dispose(){
        handlers.remove(key);
      }
    }
);
    myNextHandlerKey++;
    return key;
  }
}
