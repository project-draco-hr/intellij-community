{
  final CoverageSuite[] suites=coverageManager.getSuites();
  final Map<String,List<CoverageSuite>> grouped=new TreeMap<String,List<CoverageSuite>>();
  for (  CoverageSuite suite : suites) {
    final CoverageFileProvider coverageFileProvider=((CoverageSuiteImpl)suite).getCoverageDataFileProvider();
    if (suite.isValid()) {
      final String sourceProvider=coverageFileProvider instanceof DefaultCoverageFileProvider ? ((DefaultCoverageFileProvider)coverageFileProvider).getSourceProvider() : coverageFileProvider.getClass().getName();
      List<CoverageSuite> coverageSuiteList=grouped.get(sourceProvider);
      if (coverageSuiteList == null) {
        coverageSuiteList=new ArrayList<CoverageSuite>();
        grouped.put(sourceProvider,coverageSuiteList);
      }
      coverageSuiteList.add(suite);
    }
  }
  for (  String provider : grouped.keySet()) {
    final List<CoverageSuite> toSort=grouped.get(provider);
    if (toSort.isEmpty())     continue;
    Collections.sort(toSort,new Comparator<CoverageSuite>(){
      public int compare(      final CoverageSuite s1,      final CoverageSuite s2){
        return s1.getPresentableName().compareToIgnoreCase(s2.getPresentableName());
      }
    }
);
    for (    CoverageSuite suite : toSort) {
      model.add(suite);
    }
    firstInGroup.add(toSort.get(0));
  }
  model.add(null);
}
