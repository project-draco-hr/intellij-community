{
  DebuggerTreeNodeImpl node=getSelectedNode(e.getDataContext());
  if (node != null) {
    NodeDescriptorImpl descriptor=node.getDescriptor();
    if (descriptor instanceof StackFrameDescriptorImpl) {
      return ((StackFrameDescriptorImpl)descriptor).getFrameProxy();
    }
  }
 else {
    JavaStackFrame stackFrame=getSelectedStackFrame(e);
    if (stackFrame != null) {
      return stackFrame.getStackFrameProxy();
    }
  }
  return null;
}
