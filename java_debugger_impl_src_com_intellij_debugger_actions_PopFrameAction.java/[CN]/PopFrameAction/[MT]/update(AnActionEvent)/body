{
  boolean enable=false;
  JavaStackFrame stackFrame=getStackFrame(e);
  if (stackFrame != null && isAtBreakpoint(e)) {
    VirtualMachineProxyImpl virtualMachineProxy=stackFrame.getStackFrameProxy().getVirtualMachine();
    enable=virtualMachineProxy.canPopFrames();
  }
  if (ActionPlaces.MAIN_MENU.equals(e.getPlace()) || ActionPlaces.DEBUGGER_TOOLBAR.equals(e.getPlace())) {
    e.getPresentation().setEnabled(enable);
  }
 else {
    e.getPresentation().setVisible(enable);
  }
}
