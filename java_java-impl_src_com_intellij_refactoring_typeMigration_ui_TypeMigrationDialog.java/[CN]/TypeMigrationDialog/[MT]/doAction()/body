{
  FindSettings.getInstance().setDefaultScopeName(myScopeChooserCombo.getSelectedScopeName());
  final PsiType rootType=getRootType();
  final PsiType migrationType=getMigrationType();
  if (migrationType == null || ChangeSignatureUtil.deepTypeEqual(rootType,migrationType)) {
    close(DialogWrapper.OK_EXIT_CODE);
    return;
  }
  if (myRules == null) {
    myRules=new TypeMigrationRules(rootType);
    myRules.setMigrationRootType(migrationType);
    myRules.setBoundScope(myScopeChooserCombo.getSelectedScope());
  }
  invokeRefactoring(new TypeMigrationProcessor(myProject,myRoot,myRules));
}
