{
  final String qualifiedName;
  final String packageName;
  final PsiClass containingClass=member.getContainingClass();
  if (member instanceof PsiClass) {
    final PsiClass referencedClass=(PsiClass)member;
    qualifiedName=referencedClass.getQualifiedName();
    packageName=qualifiedName != null ? StringUtil.getPackageName(qualifiedName) : null;
  }
 else {
    if (!member.hasModifierProperty(PsiModifier.STATIC) || containingClass == null) {
      return null;
    }
    packageName=containingClass.getQualifiedName();
    qualifiedName=packageName + '.' + member.getName();
  }
  if (packageName == null) {
    return null;
  }
  final boolean hasOnDemandImportConflict=ImportUtils.hasOnDemandImportConflict(qualifiedName,myFile);
  for (  PsiImportStatementBase importStatementBase : importStatements) {
    if (!importStatementBase.isOnDemand()) {
      if (member.equals(importStatementBase.resolve())) {
        return importStatementBase;
      }
    }
 else {
      if (hasOnDemandImportConflict) {
        continue;
      }
      final PsiElement target=importStatementBase.resolve();
      if (target instanceof PsiPackage) {
        final PsiPackage aPackage=(PsiPackage)target;
        if (packageName.equals(aPackage.getQualifiedName())) {
          return importStatementBase;
        }
      }
 else       if (target instanceof PsiClass) {
        final PsiClass aClass=(PsiClass)target;
        if (InheritanceUtil.isInheritorOrSelf(aClass,containingClass,true)) {
          if (importStatementBase instanceof PsiImportStaticStatement) {
            if (member.hasModifierProperty(PsiModifier.STATIC)) {
              return importStatementBase;
            }
          }
 else           if (importStatementBase instanceof PsiImportStatement && member instanceof PsiClass) {
            return importStatementBase;
          }
        }
      }
    }
  }
  return null;
}
