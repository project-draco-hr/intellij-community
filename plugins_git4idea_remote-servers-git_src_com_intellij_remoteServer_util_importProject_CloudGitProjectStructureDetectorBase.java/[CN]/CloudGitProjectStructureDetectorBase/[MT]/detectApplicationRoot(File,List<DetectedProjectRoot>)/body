{
  VirtualFile repositoryRoot=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(dir);
  if (repositoryRoot == null) {
    return;
  }
  final File gitDir=new File(dir,GitUtil.DOT_GIT);
  if (!gitDir.exists()) {
    return;
  }
  Project project=ProjectManager.getInstance().getDefaultProject();
  GitRepository repository=GitRepositoryImpl.getLightInstance(repositoryRoot,project,ServiceManager.getService(project,GitPlatformFacade.class),project);
  repository.update();
  List<String> applicationNames=myDeploymentDetector.collectApplicationNames(repository);
  if (applicationNames.isEmpty()) {
    return;
  }
  result.add(new CloudGitProjectRoot(myId,myJavaSourceRootTypeName,dir,repositoryRoot,applicationNames.get(0)));
}
