{
  if (SystemInfo.isWindows) {
    try {
      if (Registry.is("disable.winp")) {
        return WinProcessManager.getProcessPid(process);
      }
 else {
        return createWinProcess(process).getPid();
      }
    }
 catch (    Throwable e) {
      LOG.info("Cannot get process id",e);
      return -1;
    }
  }
 else   if (SystemInfo.isUnix) {
    return UnixProcessManager.getProcessPid(process);
  }
  throw new IllegalStateException("Unknown OS: " + SystemInfo.OS_NAME);
}
