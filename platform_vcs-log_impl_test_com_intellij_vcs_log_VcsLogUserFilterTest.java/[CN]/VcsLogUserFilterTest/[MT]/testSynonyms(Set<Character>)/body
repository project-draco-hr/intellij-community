{
  List<String> names=ContainerUtil.newArrayList();
  Set<String> synonyms=ContainerUtil.newHashSet();
  for (char c=' '; c <= '~'; c++) {
    if (c == '\'' || c == '!' || c == '\\' || Character.isUpperCase(c) || excludes.contains(c))     continue;
    String name="User" + Character.toString(c) + "Userovich";
    names.add(name);
    names.add(name + "@company.com");
    if (!Character.isLetterOrDigit(c))     synonyms.add(name);
  }
  names.add("User Userovich Userov");
  names.add("UserUserovich@company.com");
  MultiMap<VcsUser,String> commits=generateHistory(ArrayUtil.toStringArray(names));
  List<VcsCommitMetadata> metadata=generateMetadata(commits);
  List<String> synonymCommits=ContainerUtil.newArrayList();
  for (  VcsUser user : commits.keySet()) {
    if (synonyms.contains(user.getName()))     synonymCommits.addAll(commits.get(user));
  }
  StringBuilder builder=new StringBuilder();
  for (  VcsUser user : commits.keySet()) {
    if (synonyms.contains(user.getName())) {
      checkFilterForUser(user,commits.keySet(),synonymCommits,metadata,builder);
    }
 else {
      checkFilterForUser(user,commits.keySet(),commits.get(user),metadata,builder);
    }
  }
  assertFilteredCorrectly(builder);
}
