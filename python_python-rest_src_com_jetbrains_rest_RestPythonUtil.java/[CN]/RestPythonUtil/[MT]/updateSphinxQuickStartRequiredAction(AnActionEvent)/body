{
  final Presentation presentation=e.getPresentation();
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (project != null) {
    Module module=e.getData(LangDataKeys.MODULE);
    if (module == null) {
      Module[] modules=ModuleManager.getInstance(project).getModules();
      module=modules.length == 0 ? null : modules[0];
    }
    if (module != null) {
      final Sdk sdk=PythonSdkType.findPythonSdk(module);
      if (sdk != null) {
        final List<PyPackage> packages=PyPackageManager.getInstance(sdk).getPackages();
        final PyPackage sphinx=packages != null ? PyPackageUtil.findPackage(packages,"Sphinx") : null;
        presentation.setEnabled(sphinx != null);
      }
    }
  }
  return presentation;
}
