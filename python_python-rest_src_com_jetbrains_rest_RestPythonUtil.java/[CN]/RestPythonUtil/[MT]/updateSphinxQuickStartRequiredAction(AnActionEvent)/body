{
  final Presentation presentation=e.getPresentation();
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  if (project != null) {
    Module module=e.getData(LangDataKeys.MODULE);
    if (module == null) {
      Module[] modules=ModuleManager.getInstance(project).getModules();
      module=modules.length == 0 ? null : modules[0];
    }
    if (module != null) {
      Sdk sdk=PythonSdkType.findPythonSdk(module);
      if (sdk != null) {
        PyPackageManagerImpl manager=(PyPackageManagerImpl)PyPackageManager.getInstance(sdk);
        try {
          final PyPackage sphinx=manager.findPackage("Sphinx");
          String quickStart=RestUtil.findQuickStart(sdk.getHomePath());
          presentation.setEnabled(sphinx != null && quickStart != null);
        }
 catch (        PyExternalProcessException ignored) {
        }
      }
    }
  }
  return presentation;
}
