{
  final JPanel panel=new MyPanel();
  final JPanel toolbarPanel=new JPanel(new GridBagLayout());
  final GridBagConstraints constraints=new GridBagConstraints();
  constraints.gridx=0;
  constraints.gridy=0;
  toolbarPanel.add(myFileSystemToolBar.getComponent(),constraints);
  constraints.gridx=1;
  constraints.weightx=1.0;
  constraints.anchor=GridBagConstraints.EAST;
  toolbarPanel.add(myTextFieldAction,constraints);
  myNorthPanel.add(toolbarPanel,BorderLayout.NORTH);
  panel.add(myNorthPanel,BorderLayout.NORTH);
  panel.add(ScrollPaneFactory.createScrollPane(myFileSystemTree.getTree()),BorderLayout.CENTER);
  panel.add(new JLabel(FileChooserDialogImpl.DRAG_N_DROP_HINT,SwingConstants.CENTER),BorderLayout.SOUTH);
  myUiUpdater=new MergingUpdateQueue("FileChooserUpdater",200,false,panel);
  Disposer.register(myFileSystemTree,myUiUpdater);
  new UiNotifyConnector(panel,myUiUpdater);
  updateTextFieldShowing();
  return panel;
}
