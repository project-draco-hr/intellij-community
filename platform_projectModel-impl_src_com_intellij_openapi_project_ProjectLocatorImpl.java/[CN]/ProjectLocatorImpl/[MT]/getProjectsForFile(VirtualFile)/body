{
  ProjectManager projectManager=ProjectManager.getInstance();
  if (projectManager == null || file == null) {
    return Collections.emptyList();
  }
  Project[] openProjects=projectManager.getOpenProjects();
  if (openProjects.length == 0) {
    return Collections.emptyList();
  }
  List<Project> result=new SmartList<>();
  for (  Project project : openProjects) {
    if (project.isInitialized() && !project.isDisposed() && ProjectRootManager.getInstance(project).getFileIndex().isInContent(file)) {
      result.add(project);
    }
  }
  return result;
}
