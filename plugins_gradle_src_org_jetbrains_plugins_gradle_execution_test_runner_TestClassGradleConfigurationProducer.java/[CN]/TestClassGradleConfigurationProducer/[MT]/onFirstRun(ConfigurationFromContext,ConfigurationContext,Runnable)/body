{
  final PsiClass psiClass=(PsiClass)fromContext.getSourceElement();
  final InheritorChooser inheritorChooser=new InheritorChooser(){
    @Override protected void runForClasses(    List<PsiClass> classes,    PsiMethod method,    ConfigurationContext context,    Runnable performRunnable){
      if (!StringUtil.equals(context.getModule().getOptionValue(ExternalSystemConstants.EXTERNAL_SYSTEM_ID_KEY),GradleConstants.SYSTEM_ID.toString())) {
        return;
      }
      ExternalSystemRunConfiguration configuration=(ExternalSystemRunConfiguration)fromContext.getConfiguration();
      if (!applyTestConfiguration(configuration,context,ArrayUtil.toObjectArray(classes,PsiClass.class)))       return;
      super.runForClasses(classes,method,context,performRunnable);
    }
    @Override protected void runForClass(    PsiClass aClass,    PsiMethod psiMethod,    ConfigurationContext context,    Runnable performRunnable){
      if (!StringUtil.equals(context.getModule().getOptionValue(ExternalSystemConstants.EXTERNAL_SYSTEM_ID_KEY),GradleConstants.SYSTEM_ID.toString())) {
        return;
      }
      ExternalSystemRunConfiguration configuration=(ExternalSystemRunConfiguration)fromContext.getConfiguration();
      if (!applyTestConfiguration(configuration,context,aClass))       return;
      super.runForClass(aClass,psiMethod,context,performRunnable);
    }
  }
;
  if (inheritorChooser.runMethodInAbstractClass(context,performRunnable,null,(PsiClass)fromContext.getSourceElement()))   return;
  super.onFirstRun(fromContext,context,performRunnable);
}
