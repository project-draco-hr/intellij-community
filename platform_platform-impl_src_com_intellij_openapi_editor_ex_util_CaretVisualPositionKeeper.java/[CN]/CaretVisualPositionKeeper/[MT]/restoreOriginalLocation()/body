{
  for (  Map.Entry<Editor,Integer> e : myCaretRelativeVerticalPositions.entrySet()) {
    Editor editor=e.getKey();
    int relativePosition=e.getValue();
    Point caretLocation=editor.visualPositionToXY(editor.getCaretModel().getVisualPosition());
    int scrollOffset=caretLocation.y - relativePosition;
    ScrollingModel scrollingModel=editor.getScrollingModel();
    boolean useAnimation=!scrollingModel.getVisibleAreaOnScrollingFinished().equals(scrollingModel.getVisibleArea());
    if (!useAnimation)     scrollingModel.disableAnimation();
    scrollingModel.scrollVertically(scrollOffset);
    if (!useAnimation)     scrollingModel.enableAnimation();
  }
}
