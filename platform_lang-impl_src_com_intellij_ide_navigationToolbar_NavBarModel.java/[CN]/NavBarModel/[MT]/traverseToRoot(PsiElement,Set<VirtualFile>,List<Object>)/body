{
  if (!isValid(psiElement))   return;
  NavBarModelExtension[] extensions=Extensions.getExtensions(NavBarModelExtension.EP_NAME);
  for (PsiElement e=normalize(getOriginalElement(psiElement)), next=null; e != null; e=normalize(getOriginalElement(next)), next=null) {
    if (model.contains(e))     break;
    model.add(e);
    VirtualFile vFile=PsiUtilCore.getVirtualFile(e);
    if (roots.contains(vFile))     break;
    for (    NavBarModelExtension ext : extensions) {
      PsiElement parent=ext.getParent(e);
      if (parent != null && parent != e) {
        next=parent;
        break;
      }
    }
  }
}
