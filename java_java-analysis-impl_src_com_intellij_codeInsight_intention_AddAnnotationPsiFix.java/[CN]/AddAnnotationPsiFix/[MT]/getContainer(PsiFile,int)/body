{
  PsiReference reference=file.findReferenceAt(offset);
  if (reference != null) {
    PsiElement target=reference.resolve();
    if (target instanceof PsiMember) {
      return (PsiMember)target;
    }
  }
  PsiElement element=file.findElementAt(offset);
  PsiModifierListOwner listOwner=PsiTreeUtil.getParentOfType(element,PsiParameter.class,false);
  if (listOwner != null)   return listOwner;
  final PsiIdentifier psiIdentifier=PsiTreeUtil.getParentOfType(element,PsiIdentifier.class,false);
  if (psiIdentifier != null && psiIdentifier.getParent() instanceof PsiModifierListOwner) {
    return (PsiModifierListOwner)psiIdentifier.getParent();
  }
  return null;
}
