{
  if (value == null) {
    return;
  }
  int keyLength=key.length();
  int valLength=value.length();
  writeHeader(buffer,PARAMS,keyLength + valLength + (keyLength < 0x80 ? 1 : 4)+ (valLength < 0x80 ? 1 : 4));
  if (keyLength < 0x80) {
    buffer.writeByte(keyLength);
  }
 else {
    buffer.writeByte(0x80 | (keyLength >> 24));
    buffer.writeByte(keyLength >> 16);
    buffer.writeByte(keyLength >> 8);
    buffer.writeByte(keyLength);
  }
  if (valLength < 0x80) {
    buffer.writeByte(valLength);
  }
 else {
    buffer.writeByte(0x80 | (valLength >> 24));
    buffer.writeByte(valLength >> 16);
    buffer.writeByte(valLength >> 8);
    buffer.writeByte(valLength);
  }
  buffer.writeBytes(key.getBytes(CharsetUtil.US_ASCII));
  buffer.writeBytes(Unpooled.copiedBuffer(value,CharsetUtil.UTF_8));
}
