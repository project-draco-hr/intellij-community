{
  final PsiTryStatement tryStatement=PsiTreeUtil.getParentOfType(element,PsiTryStatement.class);
  if (element instanceof PsiResourceVariable && tryStatement != null) {
    final PsiResourceList resourceList=tryStatement.getResourceList();
    if (resourceList != null && resourceList.getResourceVariables().contains(element) && resourceList.getResourceVariablesCount() == 1) {
      final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
      if (tryBlock != null) {
        tryBlock.deleteChildRange(tryBlock.getFirstChild(),tryBlock.getFirstBodyElement());
        tryBlock.deleteChildRange(tryBlock.getLastBodyElement(),tryBlock.getLastChild());
        tryStatement.replace(tryBlock);
        return true;
      }
    }
  }
  return false;
}
