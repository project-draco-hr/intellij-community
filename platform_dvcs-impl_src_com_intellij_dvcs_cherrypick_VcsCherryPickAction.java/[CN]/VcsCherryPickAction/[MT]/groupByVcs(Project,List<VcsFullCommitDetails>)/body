{
  final ProjectLevelVcsManager projectLevelVcsManager=ProjectLevelVcsManager.getInstance(project);
  Map<VcsCherryPicker,List<VcsFullCommitDetails>> resultMap=new HashMap<VcsCherryPicker,List<VcsFullCommitDetails>>();
  for (  VcsFullCommitDetails commit : commits) {
    VcsCherryPicker cherryPicker=getCherryPickerForCommit(project,projectLevelVcsManager,commit);
    if (cherryPicker == null) {
      VcsNotifier.getInstance(project).notifyWeakError("Cherry pick is not supported for commit " + commit.getId().toShortString() + " from root "+ commit.getRoot().getName());
      return Collections.emptyMap();
    }
    List<VcsFullCommitDetails> list=resultMap.get(cherryPicker);
    if (list == null) {
      resultMap.put(cherryPicker,list=new ArrayList<VcsFullCommitDetails>());
    }
    list.add(commit);
  }
  return resultMap;
}
