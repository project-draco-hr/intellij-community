{
  myOneLineMode=oneLineMode;
  myIsViewer=isViewer;
  setDocument(document);
  myProject=project;
  myFileType=fileType;
  setLayout(new BorderLayout());
  enableEvents(AWTEvent.KEY_EVENT_MASK);
  setFocusable(true);
  super.addFocusListener(new FocusAdapter(){
    @Override public void focusGained(    FocusEvent e){
      requestFocus();
    }
  }
);
  setFocusTraversalPolicyProvider(true);
  setFocusTraversalPolicy(new Jdk7DelegatingToRootTraversalPolicy());
  setFont(UIManager.getFont("TextField.font"));
  if (project != null) {
    ProjectManager.getInstance().addProjectManagerListener(project,new ProjectManagerListener(){
      @Override public void projectClosing(      Project project){
        releaseEditor();
      }
    }
);
  }
}
