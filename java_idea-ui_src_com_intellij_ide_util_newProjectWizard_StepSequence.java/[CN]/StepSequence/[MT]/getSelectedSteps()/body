{
  if (mySelectedSteps == null) {
    mySelectedSteps=new ArrayList<ModuleWizardStep>();
    mySelectedSteps.addAll(myCommonSteps);
    for (    String type : myTypes) {
      Collection<ModuleWizardStep> steps=mySpecificSteps.get(type);
      mySelectedSteps.addAll(steps);
    }
    for (    Pair<ModuleWizardStep,Set<String>> pair : myCommonFinishingSteps) {
      Set<String> types=pair.getSecond();
      if (types == null || ContainerUtil.intersects(myTypes,types)) {
        mySelectedSteps.add(pair.getFirst());
      }
    }
    ContainerUtil.removeDuplicates(mySelectedSteps);
  }
  return mySelectedSteps;
}
