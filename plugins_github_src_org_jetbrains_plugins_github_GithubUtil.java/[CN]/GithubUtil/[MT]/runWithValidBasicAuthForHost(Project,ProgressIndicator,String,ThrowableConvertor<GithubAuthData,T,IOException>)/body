{
  GithubSettings settings=GithubSettings.getInstance();
  GithubAuthData auth=null;
  try {
    if (settings.getAuthType() != GithubAuthData.AuthType.BASIC || !StringUtil.equalsIgnoreCase(GithubUrlUtil.getApiUrl(host),GithubUrlUtil.getApiUrl(settings.getHost()))) {
      throw new GithubAuthenticationException("Bad authentication type");
    }
    auth=settings.getAuthData();
    return task.convert(auth);
  }
 catch (  GithubAuthenticationException e) {
    auth=getValidBasicAuthDataForHost(project,indicator,host);
    if (auth == null) {
      throw new GithubAuthenticationCanceledException("Can't get valid credentials");
    }
    return task.convert(auth);
  }
catch (  IOException e) {
    if (checkSSLCertificate(e,auth.getHost(),indicator)) {
      return runWithValidBasicAuthForHost(project,indicator,host,task);
    }
    throw e;
  }
}
