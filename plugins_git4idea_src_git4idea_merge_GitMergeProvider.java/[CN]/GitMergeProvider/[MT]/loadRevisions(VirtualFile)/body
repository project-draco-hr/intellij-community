{
  final MergeData mergeData=new MergeData();
  final VirtualFile root=GitUtil.getGitRoot(file);
  final FilePath path=VcsUtil.getFilePath(file.getPath());
  VcsRunnable runnable=new VcsRunnable(){
    @Override @SuppressWarnings({"ConstantConditions"}) public void run() throws VcsException {
      GitFileRevision original=new GitFileRevision(myProject,path,new GitRevisionNumber(":" + ORIGINAL_REVISION_NUM));
      GitFileRevision current=new GitFileRevision(myProject,path,new GitRevisionNumber(":" + yoursRevision(root)));
      GitFileRevision last=new GitFileRevision(myProject,path,new GitRevisionNumber(":" + theirsRevision(root)));
      try {
        try {
          mergeData.ORIGINAL=original.getContent();
        }
 catch (        Exception ex) {
          mergeData.ORIGINAL=file.contentsToByteArray();
        }
        mergeData.CURRENT=loadRevisionCatchingErrors(current);
        mergeData.LAST=loadRevisionCatchingErrors(last);
        mergeData.CURRENT_REVISION_NUMBER=findCurrentRevisionNumber(root);
        mergeData.LAST_REVISION_NUMBER=findLastRevisionNumber(root);
        mergeData.ORIGINAL_REVISION_NUMBER=findOriginalRevisionNumber(root,mergeData.CURRENT_REVISION_NUMBER,mergeData.LAST_REVISION_NUMBER);
        Trinity<String,String,String> blobs=getAffectedBlobs(root,file);
        mergeData.CURRENT_FILE_PATH=getBlobPathInRevision(root,file,blobs.getFirst(),mergeData.CURRENT_REVISION_NUMBER);
        mergeData.ORIGINAL_FILE_PATH=getBlobPathInRevision(root,file,blobs.getSecond(),mergeData.ORIGINAL_REVISION_NUMBER);
        mergeData.LAST_FILE_PATH=getBlobPathInRevision(root,file,blobs.getThird(),mergeData.LAST_REVISION_NUMBER);
      }
 catch (      IOException e) {
        throw new IllegalStateException("Failed to load file content",e);
      }
    }
  }
;
  VcsUtil.runVcsProcessWithProgress(runnable,GitBundle.message("merge.load.files"),false,myProject);
  return mergeData;
}
