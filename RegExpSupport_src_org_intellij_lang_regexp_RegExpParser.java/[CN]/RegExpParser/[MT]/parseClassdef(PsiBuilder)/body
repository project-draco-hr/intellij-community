{
  final PsiBuilder.Marker marker=builder.mark();
  int count=0;
  while (true) {
    final IElementType token=builder.getTokenType();
    if (token == RegExpTT.CLASS_BEGIN) {
      parseClass(builder);
    }
 else     if (token == RegExpTT.BRACKET_EXPRESSION_BEGIN) {
      parseBracketExpression(builder);
    }
 else     if (RegExpTT.CHARACTERS2.contains(token)) {
      parseSimpleClassdef(builder);
    }
 else     if (token == RegExpTT.PROPERTY) {
      parseProperty(builder);
    }
 else     if (token == RegExpTT.NAMED_CHARACTER) {
      parseNamedCharacter(builder);
    }
 else {
      if (count > 1) {
        marker.done(RegExpElementTypes.UNION);
      }
 else {
        marker.drop();
      }
      return count > 0;
    }
    count++;
  }
}
