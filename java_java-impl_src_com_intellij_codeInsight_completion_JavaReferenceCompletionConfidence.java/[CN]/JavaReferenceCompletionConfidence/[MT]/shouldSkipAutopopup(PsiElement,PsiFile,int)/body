{
  if (Registry.is("ide.java.completion.autopopup.only.on.qualified.references")) {
    PsiJavaCodeReferenceElement ref=PsiTreeUtil.findElementOfClassAtOffset(psiFile,offset - 1,PsiJavaCodeReferenceElement.class,false);
    if (ref != null && !ref.isQualified()) {
      return ThreeState.YES;
    }
    if (PsiUtilCore.getElementType(contextElement) == JavaTokenType.AT) {
      return ThreeState.YES;
    }
  }
  return ThreeState.UNSURE;
}
