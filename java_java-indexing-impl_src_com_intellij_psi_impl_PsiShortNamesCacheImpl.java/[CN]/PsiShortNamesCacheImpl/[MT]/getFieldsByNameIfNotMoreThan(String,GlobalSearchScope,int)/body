{
  final List<PsiField> methods=new SmartList<PsiField>();
  StubIndex.getInstance().processElements(JavaStubIndexKeys.FIELDS,name,myManager.getProject(),scope,PsiField.class,new CommonProcessors.CollectProcessor<PsiField>(methods){
    @Override public boolean process(    PsiField method){
      return methods.size() != maxCount && super.process(method);
    }
  }
);
  if (methods.isEmpty())   return PsiField.EMPTY_ARRAY;
  List<PsiField> list=filterMembers(methods,scope);
  return list.toArray(new PsiField[list.size()]);
}
