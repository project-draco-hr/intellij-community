{
  final int start=myReferenceRangeMarker.getStartOffset() - element.getTextRange().getStartOffset();
  final int end=myReferenceRangeMarker.getEndOffset() - element.getTextRange().getStartOffset();
  final PsiReference reference=fn.fun(start);
  if (reference == null) {
    return null;
  }
  final TextRange rangeInElement=reference.getRangeInElement();
  if (rangeInElement.getStartOffset() != start || rangeInElement.getEndOffset() != end) {
    return null;
  }
  return reference;
}
