{
  PsiType psiType=null;
  if (expression != null) {
    Integer count=expression.getUserData(TYPE_RESOLVE_IN_PROGRESS_KEY);
    if (count == null)     count=0;
    if (count < 15) {
      expression.putUserData(TYPE_RESOLVE_IN_PROGRESS_KEY,++count);
      psiType=expression.getNominalType();
      expression.putUserData(TYPE_RESOLVE_IN_PROGRESS_KEY,null);
    }
  }
  return psiType;
}
