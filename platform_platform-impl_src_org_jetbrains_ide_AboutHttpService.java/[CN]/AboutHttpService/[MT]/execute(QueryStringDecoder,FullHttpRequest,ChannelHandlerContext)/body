{
  BuildNumber build=ApplicationInfo.getInstance().getBuild();
  @SuppressWarnings("IOResourceOpenedButNotSafelyClosed") BufferExposingByteArrayOutputStream byteOut=new BufferExposingByteArrayOutputStream();
  JsonWriter writer=new JsonWriter(new OutputStreamWriter(byteOut,CharsetToolkit.UTF8_CHARSET));
  writer.beginObject();
  String appName=ApplicationInfoEx.getInstanceEx().getFullApplicationName();
  if (!PlatformUtils.isIdeaUltimate()) {
    String productName=ApplicationNamesInfo.getInstance().getProductName();
    appName=appName.replace(productName + " (" + productName+ ")",productName);
    if (appName.startsWith("JetBrains ")) {
      appName=appName.substring("JetBrains ".length());
    }
  }
  writer.name("name").value(appName);
  writer.name("productName").value(ApplicationNamesInfo.getInstance().getProductName());
  writer.name("baselineVersion").value(build.getBaselineVersion());
  if (build.getBuildNumber() != Integer.MAX_VALUE) {
    writer.name("buildNumber").value(build.getBuildNumber());
  }
  if (getBooleanParameter("registeredFileTypes",urlDecoder)) {
    writer.name("registeredFileTypes").beginArray();
    for (    FileType fileType : FileTypeRegistry.getInstance().getRegisteredFileTypes()) {
      writer.beginObject();
      writer.name("name").value(fileType.getName());
      writer.name("description").value(fileType.getDescription());
      writer.name("isBinary").value(fileType.isBinary());
      writer.endObject();
    }
    writer.endArray();
  }
  writer.endObject();
  writer.close();
  send(byteOut,request,context);
  return null;
}
