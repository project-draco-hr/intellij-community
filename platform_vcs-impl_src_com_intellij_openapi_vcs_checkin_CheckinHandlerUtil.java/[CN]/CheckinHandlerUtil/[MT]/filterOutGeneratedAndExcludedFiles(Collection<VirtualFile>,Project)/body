{
  ProjectFileIndex fileIndex=ProjectFileIndex.SERVICE.getInstance(project);
  List<VirtualFile> result=new ArrayList<>(files.size());
  for (  VirtualFile file : files) {
    if (!fileIndex.isExcluded(file) && !GeneratedSourcesFilter.isGeneratedSourceByAnyFilter(file,project)) {
      result.add(file);
    }
  }
  return result;
}
