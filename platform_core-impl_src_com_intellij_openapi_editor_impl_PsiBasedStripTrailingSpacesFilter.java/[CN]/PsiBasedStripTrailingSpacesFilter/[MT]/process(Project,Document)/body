{
  Language language=getDocumentLanguage(document);
  if (language != null && isApplicableTo(language)) {
    myDisabledLinesBitSet=new BitSet(document.getLineCount());
    PsiFile psiFile=getPsiFile(project,document);
    if (psiFile != null) {
      process(document,psiFile);
      return DocumentLevelPermission.FILTER_BY_LINE;
    }
    return DocumentLevelPermission.POSTPONED;
  }
  return DocumentLevelPermission.ALL_LINES;
}
