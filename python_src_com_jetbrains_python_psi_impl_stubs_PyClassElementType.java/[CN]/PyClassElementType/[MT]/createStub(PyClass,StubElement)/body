{
  final PyExpression[] exprs=psi.getSuperClassExpressions();
  List<PyQualifiedName> superClasses=new ArrayList<PyQualifiedName>();
  for (  PyExpression expression : exprs) {
    if (expression instanceof PyCallExpression) {
      PyCallExpression call=(PyCallExpression)expression;
      if (call.getCallee() != null && "with_metaclass".equals(call.getCallee().getName()) && call.getArguments().length > 1) {
        expression=call.getArguments()[1];
      }
    }
    superClasses.add(PyQualifiedName.fromExpression(expression));
  }
  final PyStringLiteralExpression docStringExpression=psi.getDocStringExpression();
  return new PyClassStubImpl(psi.getName(),parentStub,superClasses.toArray(new PyQualifiedName[superClasses.size()]),((PyClassImpl)psi).getOwnSlots(),PyPsiUtils.strValue(docStringExpression),getStubElementType());
}
