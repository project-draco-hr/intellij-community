{
  if (SystemInfo.isMac) {
    File fontFile=findFileForFont(font,true);
    if (fontFile == null && font.getStyle() != Font.PLAIN)     fontFile=findFileForFont(font.deriveFont(Font.PLAIN),true);
    if (fontFile == null)     fontFile=findFileForFont(font,false);
    if (fontFile == null)     return font;
    try {
      font=Font.createFont(Font.TRUETYPE_FONT,fontFile).deriveFont(font.getStyle(),font.getSize());
    }
 catch (    Exception e) {
      return font;
    }
  }
  return font.deriveFont(Collections.singletonMap(TextAttribute.LIGATURES,TextAttribute.LIGATURES_ON));
}
