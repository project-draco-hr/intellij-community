{
  final PsiBuilder.Marker blockStart=builder.mark();
  int braceCount=0;
  while (true) {
    final IElementType tokenType=builder.getTokenType();
    if (tokenType == null) {
      break;
    }
    if (tokenType == GroovyTokenTypes.mLCURLY) {
      braceCount++;
    }
 else     if (tokenType == GroovyTokenTypes.mRCURLY) {
      braceCount--;
    }
    builder.advanceLexer();
    if (braceCount == 0) {
      break;
    }
  }
  blockStart.collapse(blockType);
}
