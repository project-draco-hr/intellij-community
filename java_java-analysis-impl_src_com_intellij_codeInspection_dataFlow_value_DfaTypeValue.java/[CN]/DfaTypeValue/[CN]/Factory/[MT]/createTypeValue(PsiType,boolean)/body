{
  type=TypeConversionUtil.erasure(type);
  mySharedInstance.myType=type;
  mySharedInstance.myCanonicalText=StringUtil.notNullize(type.getCanonicalText(),PsiKeyword.NULL);
  mySharedInstance.myIsNullable=nullable;
  String id=mySharedInstance.toString();
  ArrayList<DfaTypeValue> conditions=myStringToObject.get(id);
  if (conditions == null) {
    conditions=new ArrayList<DfaTypeValue>();
    myStringToObject.put(id,conditions);
  }
 else {
    for (    DfaTypeValue aType : conditions) {
      if (aType.hardEquals(mySharedInstance))       return aType;
    }
  }
  DfaTypeValue result=new DfaTypeValue(type,nullable,myFactory,mySharedInstance.myCanonicalText);
  conditions.add(result);
  return result;
}
