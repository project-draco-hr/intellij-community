{
  HashMap<VarVersionNode,List<VarVersionEdge>> mapNodeSuccs=new HashMap<VarVersionNode,List<VarVersionEdge>>();
  LinkedList<VarVersionNode> stackNode=new LinkedList<VarVersionNode>();
  LinkedList<Integer> stackIndex=new LinkedList<Integer>();
  stackNode.add(root);
  stackIndex.add(0);
  while (!stackNode.isEmpty()) {
    VarVersionNode node=stackNode.getLast();
    int index=stackIndex.removeLast();
    setVisited.add(node);
    List<VarVersionEdge> lstSuccs=mapNodeSuccs.get(node);
    if (lstSuccs == null) {
      mapNodeSuccs.put(node,lstSuccs=new ArrayList<VarVersionEdge>(node.succs));
    }
    for (; index < lstSuccs.size(); index++) {
      VarVersionNode succ=lstSuccs.get(index).dest;
      if (!setVisited.contains(succ)) {
        stackIndex.add(index + 1);
        stackNode.add(succ);
        stackIndex.add(0);
        break;
      }
    }
    if (index == lstSuccs.size()) {
      lst.add(0,node);
      stackNode.removeLast();
    }
  }
}
