{
  if (filterCollection.getStructureFilter() == null)   return Collections.emptySet();
  Collection<FilePath> files=filterCollection.getStructureFilter().getFiles();
  return new HashSet<FilePath>(ContainerUtil.filter(files,new Condition<FilePath>(){
    @Override public boolean value(    FilePath filePath){
      VirtualFile virtualFileParent=ChangesUtil.findValidParentAccurately(filePath);
      if (virtualFileParent != null) {
        return root.equals(virtualFileParent) || VfsUtilCore.isAncestor(root,virtualFileParent,false);
      }
      return false;
    }
  }
));
}
