{
  CodeInsightActionHandler handler=getValidHandler(editor,file);
  presentation.setEnabled(handler != null);
  if (handler instanceof ContextAwareActionHandler && !ActionPlaces.isMainMenuOrActionSearch(actionPlace)) {
    presentation.setVisible(((ContextAwareActionHandler)handler).isAvailableForQuickList(editor,file,dataContext));
  }
  if (presentation.isVisible() && handler instanceof PresentableCodeInsightActionHandler) {
    ((PresentableCodeInsightActionHandler)handler).update(editor,file,presentation);
  }
}
