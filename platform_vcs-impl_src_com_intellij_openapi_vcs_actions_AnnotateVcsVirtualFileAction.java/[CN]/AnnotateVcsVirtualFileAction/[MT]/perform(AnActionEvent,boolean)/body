{
  final Project project=e.getRequiredData(CommonDataKeys.PROJECT);
  final VirtualFile file=e.getRequiredData(CommonDataKeys.VIRTUAL_FILE_ARRAY)[0];
  List<Editor> editors=getEditors(project,file);
  if (!selected) {
    for (    Editor editor : editors) {
      editor.getGutter().closeAllAnnotations();
    }
  }
 else {
    final Editor editor=editors.get(0);
    doAnnotate(project,editor,file);
  }
}
