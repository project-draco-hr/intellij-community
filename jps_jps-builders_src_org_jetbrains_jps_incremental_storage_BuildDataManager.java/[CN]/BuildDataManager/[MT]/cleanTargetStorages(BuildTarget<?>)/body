{
  try {
    AtomicNotNullLazyValue<BuildTargetStorages> storages=myTargetStorages.remove(target);
    if (storages != null) {
      storages.getValue().close();
    }
  }
  finally {
    final File[] targetData=myDataPaths.getTargetDataRoot(target).listFiles();
    if (targetData != null) {
      final File srcOutputMapRoot=getSourceToOutputMapRoot(target);
      for (      File dataFile : targetData) {
        if (!FileUtil.filesEqual(dataFile,srcOutputMapRoot)) {
          FileUtil.delete(dataFile);
        }
      }
    }
  }
}
