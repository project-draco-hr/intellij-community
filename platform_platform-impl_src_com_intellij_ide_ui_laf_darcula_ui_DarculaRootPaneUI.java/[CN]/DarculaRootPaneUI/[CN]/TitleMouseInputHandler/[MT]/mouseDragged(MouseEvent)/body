{
  Component source=(Component)ev.getSource();
  Point eventLocationOnScreen=ev.getLocationOnScreen();
  if (eventLocationOnScreen == null) {
    eventLocationOnScreen=new Point(ev.getX() + source.getLocationOnScreen().x,ev.getY() + source.getLocationOnScreen().y);
  }
  if (myWindow instanceof Frame) {
    Frame f=(Frame)myWindow;
    int frameState=f.getExtendedState();
    if (((frameState & Frame.MAXIMIZED_BOTH) == 0)) {
      myWindow.setLocation(eventLocationOnScreen.x - dragOffset.x,eventLocationOnScreen.y - dragOffset.y);
    }
  }
 else {
    myWindow.setLocation(eventLocationOnScreen.x - dragOffset.x,eventLocationOnScreen.y - dragOffset.y);
  }
}
