{
  JRootPane root=(JRootPane)parent;
  Rectangle b=root.getBounds();
  Insets i=root.getInsets();
  int nextY=0;
  int w=b.width - i.right - i.left;
  int h=b.height - i.top - i.bottom;
  if (root.getLayeredPane() != null) {
    root.getLayeredPane().setBounds(i.left,i.top,w,h);
  }
  if (root.getGlassPane() != null) {
    root.getGlassPane().setBounds(i.left,i.top,w,h);
  }
  if ((root.getWindowDecorationStyle() != JRootPane.NONE) && (root.getUI() instanceof DarculaRootPaneUI)) {
    JComponent titlePane=((DarculaRootPaneUI)root.getUI()).getTitlePane();
    if (titlePane != null) {
      Dimension tpd=titlePane.getPreferredSize();
      if (tpd != null) {
        int tpHeight=tpd.height;
        titlePane.setBounds(0,0,w,tpHeight);
        nextY+=tpHeight;
      }
    }
  }
  if (root.getJMenuBar() != null) {
    Dimension mbd=root.getJMenuBar().getPreferredSize();
    root.getJMenuBar().setBounds(0,nextY,w,mbd.height);
    nextY+=mbd.height;
  }
  if (root.getContentPane() != null) {
    root.getContentPane().setBounds(0,nextY,w,h < nextY ? 0 : h - nextY);
  }
}
