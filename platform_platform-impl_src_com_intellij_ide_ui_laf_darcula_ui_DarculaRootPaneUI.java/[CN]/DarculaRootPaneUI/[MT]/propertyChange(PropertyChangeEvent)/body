{
  super.propertyChange(e);
  String propertyName=e.getPropertyName();
  if (propertyName == null) {
    return;
  }
  if (propertyName.equals("windowDecorationStyle")) {
    JRootPane root=(JRootPane)e.getSource();
    int style=root.getWindowDecorationStyle();
    uninstallClientDecorations(root);
    if (style != JRootPane.NONE) {
      installClientDecorations(root);
    }
  }
  if (propertyName.equals("ancestor")) {
    uninstallWindowListeners(myRootPane);
    if (((JRootPane)e.getSource()).getWindowDecorationStyle() != JRootPane.NONE) {
      installWindowListeners(myRootPane,myRootPane.getParent());
    }
  }
}
