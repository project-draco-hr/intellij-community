{
  try {
    String baseName="/refactoring/pushdown/" + getTestName(true);
    myFixture.configureByFile(baseName + ".before.py");
    final PyClass clazz=findClass(className);
    final List<PyMemberInfo> members=new ArrayList<PyMemberInfo>();
    for (    String memberName : membersName) {
      final PyElement member=findMember(className,memberName);
      assertNotNull(member);
      members.add(new PyMemberInfo(member));
    }
    final PyPushDownProcessor processor=new PyPushDownProcessor(myFixture.getProject(),clazz,members);
    new WriteCommandAction.Simple(myFixture.getProject()){
      @Override protected void run() throws Throwable {
        processor.run();
      }
    }
.execute().throwException();
    myFixture.checkResultByFile(baseName + ".after.py");
  }
 catch (  Exception e) {
    if (expectedError == null)     throw e;
    assertTrue(e.getMessage(),e.getMessage().contains(expectedError));
  }
}
