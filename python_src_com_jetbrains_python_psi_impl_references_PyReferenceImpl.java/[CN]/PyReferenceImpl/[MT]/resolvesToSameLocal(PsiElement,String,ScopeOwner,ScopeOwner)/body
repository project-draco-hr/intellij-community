{
  PsiElement ourContainer=PsiTreeUtil.getParentOfType(getElement(),ScopeOwner.class,PyComprehensionElement.class);
  PsiElement theirContainer=PsiTreeUtil.getParentOfType(element,ScopeOwner.class,PyComprehensionElement.class);
  if (ourContainer != null) {
    if (ourContainer == theirContainer) {
      return true;
    }
    if (PsiTreeUtil.isAncestor(theirContainer,ourContainer,true)) {
      if (ourScopeOwner != theirScopeOwner) {
        boolean shadowsName=false;
        ScopeOwner owner=ourScopeOwner;
        while (owner != theirScopeOwner && owner != null) {
          if (ControlFlowCache.getScope(owner).containsDeclaration(elementName)) {
            shadowsName=true;
            break;
          }
          owner=ScopeUtil.getScopeOwner(owner);
        }
        if (!shadowsName) {
          return true;
        }
      }
    }
  }
  return false;
}
