{
  if (element instanceof PsiFileSystemItem) {
    PsiElement resolveResult=resolve();
    if (resolveResult instanceof PyImportedModule) {
      resolveResult=resolveResult.getNavigationElement();
    }
    if (element instanceof PsiDirectory && resolveResult instanceof PyFile && PyNames.INIT_DOT_PY.equals(((PyFile)resolveResult).getName())&& ((PyFile)resolveResult).getContainingDirectory() == element) {
      return true;
    }
    return resolveResult == element;
  }
  if (element instanceof PsiNamedElement) {
    final String elementName=((PsiNamedElement)element).getName();
    if ((Comparing.equal(myElement.getReferencedName(),elementName) || PyNames.INIT.equals(elementName)) && !haveQualifiers(element)) {
      if (isGlobal(element,elementName)) {
        element=transitiveResolve(element);
      }
      final ScopeOwner ourScopeOwner=ScopeUtil.getScopeOwner(getElement());
      final ScopeOwner theirScopeOwner=ScopeUtil.getScopeOwner(element);
      if (element instanceof PyParameter || element instanceof PyTargetExpression || element instanceof CythonVariable) {
        if (resolvesToSameLocal(element,elementName,ourScopeOwner,theirScopeOwner)) {
          return true;
        }
      }
      final PsiElement resolveResult=(isGlobal(getElement(),elementName)) ? transitiveResolve(getElement()) : resolve();
      if (resolveResult == element) {
        return true;
      }
      if (!haveQualifiers(element) && ourScopeOwner != null && theirScopeOwner != null) {
        if (resolvesToSameGlobal(element,elementName,ourScopeOwner,theirScopeOwner,resolveResult))         return true;
      }
      if (resolvesToWrapper(element,resolveResult)) {
        return true;
      }
      return false;
    }
  }
  return false;
}
