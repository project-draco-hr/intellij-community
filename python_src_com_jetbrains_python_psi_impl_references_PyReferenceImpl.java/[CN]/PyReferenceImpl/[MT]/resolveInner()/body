{
  final ResolveResultList ret=new ResolveResultList();
  final String referencedName=myElement.getReferencedName();
  if (referencedName == null)   return ret;
  if (myElement instanceof PyTargetExpression) {
    if (PsiTreeUtil.getParentOfType(myElement,PyComprehensionElement.class) != null) {
      ret.poke(myElement,getRate(myElement,myContext.getTypeEvalContext()));
      return ret;
    }
  }
  final PyResolveProcessor processor=new PyResolveProcessor(referencedName);
  final PsiElement realContext=PyPsiUtils.getRealContext(myElement);
  PsiElement roof=findResolveRoof(referencedName,realContext);
  PyResolveUtil.scopeCrawlUp(processor,myElement,referencedName,roof);
  return getResultsFromProcessor(referencedName,processor,realContext,roof);
}
