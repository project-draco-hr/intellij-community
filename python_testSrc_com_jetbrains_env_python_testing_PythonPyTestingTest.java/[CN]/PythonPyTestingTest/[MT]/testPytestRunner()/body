{
  runPythonTest(new PyProcessWithConsoleTestTask<PyTestTestProcessRunner>(SdkCreationType.EMPTY_SDK){
    @NotNull @Override protected PyTestTestProcessRunner createProcessRunner() throws Exception {
      return new PyTestTestProcessRunner(getTestDataPath() + "/testRunner/env/pytest","test1.py",0);
    }
    @Override protected void checkTestResults(    @NotNull final PyTestTestProcessRunner runner,    @NotNull final String stdout,    @NotNull final String stderr,    @NotNull final String all){
      assertEquals(3,runner.getAllTestsCount());
      assertEquals(3,runner.getPassedTestsCount());
      runner.assertAllTestsPassed();
      final AbstractTestProxy testForOneSecond=runner.findTestByName("testOne");
      Assert.assertThat("Wrong duration",testForOneSecond.getDuration(),Matchers.greaterThanOrEqualTo(1000L));
    }
  }
);
}
