{
  runPythonTest(new PyProcessWithConsoleTestTask<PyTestTestProcessRunner>(SdkCreationType.EMPTY_SDK){
    @NotNull @Override protected PyTestTestProcessRunner createProcessRunner() throws Exception {
      return new PyTestTestProcessRunner(getTestDataPath() + "/testRunner/env/pytest","test2.py");
    }
    @Override protected void checkTestResults(    @NotNull final PyTestTestProcessRunner runner,    @NotNull final String stdout,    @NotNull final String stderr,    @NotNull final String all){
      assertEquals(9,runner.getAllTestsCount());
      assertEquals(5,runner.getPassedTestsCount());
      assertEquals(4,runner.getFailedTestsCount());
      Assert.assertThat("No test stdout",MockPrinter.fillPrinter(runner.findTestByName("testOne")).getStdOut(),Matchers.startsWith("I am test1"));
      Assert.assertThat("No stdout for fail",MockPrinter.fillPrinter(runner.findTestByName("testFail")).getStdOut(),Matchers.startsWith("I will fail"));
    }
  }
);
}
