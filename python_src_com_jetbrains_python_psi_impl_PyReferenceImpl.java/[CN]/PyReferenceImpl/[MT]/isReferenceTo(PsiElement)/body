{
  if (element instanceof PsiFileSystemItem) {
    final PsiElement resolveResult=resolve();
    if (element instanceof PsiDirectory && resolveResult instanceof PyFile && PyNames.INIT_DOT_PY.equals(((PyFile)resolveResult).getName())&& ((PyFile)resolveResult).getContainingDirectory() == element) {
      return true;
    }
    return resolveResult == element;
  }
  if (element instanceof PsiNamedElement) {
    final String elementName=((PsiNamedElement)element).getName();
    if ((Comparing.equal(myElement.getReferencedName(),elementName) || PyNames.INIT.equals(elementName)) && !haveQualifiers(element)) {
      if (element instanceof PyParameter || element instanceof PyTargetExpression) {
        PsiElement ourContainer=PsiTreeUtil.getParentOfType(getElement(),PsiNamedElement.class,PyLambdaExpression.class,PyComprehensionElement.class);
        PsiElement theirContainer=PsiTreeUtil.getParentOfType(element,PsiNamedElement.class,PyLambdaExpression.class,PyComprehensionElement.class);
        if (ourContainer != null && ourContainer == theirContainer) {
          return true;
        }
      }
      final PsiElement resolveResult=resolve();
      if (resolveResult == element) {
        return true;
      }
      if (!haveQualifiers(element)) {
        final ScopeOwner ourScope=PsiTreeUtil.getParentOfType(getElement(),ScopeOwner.class);
        final ScopeOwner theirScope=PsiTreeUtil.getParentOfType(element,ScopeOwner.class);
        if (ourScope != null && ControlFlowCache.getScope(ourScope).isGlobal(elementName) && PsiTreeUtil.isAncestor(theirScope,ourScope,false)) {
          return true;
        }
        if (theirScope != null && ControlFlowCache.getScope(theirScope).isGlobal(elementName) && PsiTreeUtil.isAncestor(ourScope,theirScope,false)) {
          return true;
        }
      }
      return false;
    }
  }
  return false;
}
