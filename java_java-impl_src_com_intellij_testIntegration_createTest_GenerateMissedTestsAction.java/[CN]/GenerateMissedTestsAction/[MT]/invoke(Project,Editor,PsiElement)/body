{
  final PsiClass srcClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
  if (srcClass == null)   return;
  final Collection<PsiElement> testClasses=TestFinderHelper.findTestsForClass(srcClass);
  if (testClasses.isEmpty()) {
    HintManager.getInstance().showErrorHint(editor,"No tests found.");
    return;
  }
  if (testClasses.size() == 1) {
    generateMissedTests((PsiClass)ContainerUtil.getFirstItem(testClasses),srcClass,editor);
    return;
  }
  final JBList list=new JBList(testClasses);
  list.setCellRenderer(new PsiClassListCellRenderer());
  JBPopupFactory.getInstance().createListPopupBuilder(list).setItemChoosenCallback(new Runnable(){
    @Override public void run(){
      generateMissedTests((PsiClass)list.getSelectedValue(),srcClass,editor);
    }
  }
).setTitle("Choose Test").createPopup().showInBestPositionFor(editor);
}
