{
  JavaCompiler compiler=ToolProvider.getSystemJavaCompiler();
  MemoryFileManager manager=new MemoryFileManager(compiler);
  DiagnosticCollector<JavaFileObject> diagnostic=new DiagnosticCollector<JavaFileObject>();
  if (!compiler.getTask(null,manager,diagnostic,null,null,Arrays.asList(new SourceFileObject(getMainClassName(),JavaFileObject.Kind.SOURCE,getClassCode()))).call()) {
    throw new EvaluateException(diagnostic.getDiagnostics().get(0).getMessage(Locale.getDefault()));
  }
  return manager.classes;
}
