{
  @NotNull RepositoryLibraryProperties properties=myEditorComponent.getProperties();
  String oldVersion=properties.getVersion();
  boolean wasGeneratedName=RepositoryLibraryType.getInstance().getDescription(properties).equals(myEditorComponent.getLibraryEditor().getName());
  RepositoryLibraryPropertiesEditor editor=new RepositoryLibraryPropertiesEditor(myEditorComponent.getProject(),properties);
  editor.init();
  editor.setTitle(RepositoryLibraryDescription.findDescription(properties).getDisplayName());
  if (!editor.showAndGet() || oldVersion.equals(editor.getSelectedVersion())) {
    return;
  }
  myEditorComponent.getProperties().loadState(editor.getProperties());
  if (wasGeneratedName) {
    myEditorComponent.renameLibrary(RepositoryLibraryType.getInstance().getDescription(properties));
  }
  myEditorComponent.getLibraryEditor().removeAllRoots();
  myEditorComponent.getLibraryEditor().addRoots(RepositoryUtils.download(myEditorComponent.getProject(),properties));
}
