{
  @NotNull RepositoryLibraryProperties properties=myEditorComponent.getProperties();
  boolean wasGeneratedName=RepositoryLibraryType.getInstance().getDescription(properties).equals(myEditorComponent.getLibraryEditor().getName());
  RepositoryLibraryPropertiesModel model=new RepositoryLibraryPropertiesModel(properties.getVersion(),RepositoryUtils.libraryHasSources(myEditorComponent.getLibraryEditor()),RepositoryUtils.libraryHasJavaDocs(myEditorComponent.getLibraryEditor()));
  RepositoryLibraryPropertiesDialog dialog=new RepositoryLibraryPropertiesDialog(myEditorComponent.getProject(),model,RepositoryLibraryDescription.findDescription(properties),true);
  if (!dialog.showAndGet()) {
    return;
  }
  myEditorComponent.getProperties().changeVersion(model.getVersion());
  if (wasGeneratedName) {
    myEditorComponent.renameLibrary(RepositoryLibraryType.getInstance().getDescription(properties));
  }
  myEditorComponent.getLibraryEditor().removeAllRoots();
  myEditorComponent.getLibraryEditor().addRoots(RepositoryUtils.download(myEditorComponent.getProject(),model.isDownloadSources(),model.isDownloadJavaDocs(),properties));
}
