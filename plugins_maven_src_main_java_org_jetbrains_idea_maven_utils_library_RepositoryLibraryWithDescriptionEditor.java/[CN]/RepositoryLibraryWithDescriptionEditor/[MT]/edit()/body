{
  @NotNull RepositoryLibraryProperties properties=myEditorComponent.getProperties();
  String oldVersion=properties.getVersion();
  boolean wasGeneratedName=libraryType.getDescription(properties).equals(myEditorComponent.getLibraryEditor().getName());
  RepositoryLibraryPropertiesEditor editor=new RepositoryLibraryPropertiesEditor(myEditorComponent.getProject(),libraryType,properties);
  editor.init();
  editor.setTitle(libraryType.getDescription(properties));
  if (!editor.showAndGet() || oldVersion.equals(editor.getSelectedVersion())) {
    return;
  }
  myEditorComponent.getProperties().loadState(editor.getProperties());
  if (wasGeneratedName) {
    myEditorComponent.renameLibrary(libraryType.getDescription(properties));
  }
  myEditorComponent.getLibraryEditor().removeAllRoots();
  myEditorComponent.getLibraryEditor().addRoots(libraryType.download(myEditorComponent.getProject(),properties));
}
