{
  try {
    PsiFileStub stub=ClsFileImpl.buildFileStub(clsFile,clsFile.contentsToByteArray());
    assertNotNull(stub);
    String actual=((StubBase)stub).printTree();
    File resultFile=new File(JavaTestUtil.getJavaTestDataPath() + "/psi/cls/stubBuilder/" + resultFileName);
    if (!resultFile.exists()) {
      System.out.println("No expected data found at: " + resultFile + ", creating one.");
      FileUtil.writeToFile(resultFile,actual);
      fail("No test data found. Created one");
    }
    String expected=StringUtil.convertLineSeparators(FileUtil.loadFile(resultFile));
    assertEquals(expected,actual);
  }
 catch (  ClsFormatException e) {
    throw new RuntimeException(e);
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
