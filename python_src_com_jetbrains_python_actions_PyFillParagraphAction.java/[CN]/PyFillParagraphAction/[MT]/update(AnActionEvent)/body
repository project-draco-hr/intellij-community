{
  PsiElement element=e.getData(LangDataKeys.PSI_ELEMENT);
  final PsiElement file=e.getData(LangDataKeys.PSI_FILE);
  if (!(file instanceof PyFile) && !(file instanceof PsiPlainTextFile)) {
    e.getPresentation().setEnabled(false);
    return;
  }
  if (element == null) {
    Editor editor=e.getData(PlatformDataKeys.EDITOR);
    if (editor != null) {
      final int offset=editor.getCaretModel().getOffset();
      element=file.findElementAt(offset);
    }
  }
  e.getPresentation().setEnabled(element != null);
}
