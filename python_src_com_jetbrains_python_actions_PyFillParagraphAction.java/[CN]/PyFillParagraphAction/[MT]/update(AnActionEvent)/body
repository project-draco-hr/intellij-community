{
  PsiElement element=e.getData(LangDataKeys.PSI_ELEMENT);
  final PsiElement file=e.getData(LangDataKeys.PSI_FILE);
  if (!(file instanceof PyFile)) {
    e.getPresentation().setEnabled(false);
    return;
  }
  if (element == null) {
    Editor editor=e.getData(PlatformDataKeys.EDITOR);
    if (editor != null) {
      final int offset=editor.getCaretModel().getOffset();
      element=file.findElementAt(offset);
    }
  }
  if (element != null) {
    final PyStringLiteralExpression stringLiteral=PsiTreeUtil.getParentOfType(element,PyStringLiteralExpression.class);
    e.getPresentation().setEnabled(stringLiteral != null || element instanceof PsiComment);
  }
 else {
    e.getPresentation().setEnabled(false);
  }
}
