{
  if (myContents != null)   return myContents;
  DiffContent clipboardContent=ClipboardVsValueContents.createClipboardContent();
  if (clipboardContent == null)   clipboardContent=new SimpleContent("");
  myContents=new DiffContent[2];
  myContents[0]=clipboardContent;
  SelectionModel selectionModel=myEditor.getSelectionModel();
  if (selectionModel.hasSelection()) {
    TextRange range=new TextRange(selectionModel.getSelectionStart(),selectionModel.getSelectionEnd());
    boolean forceReadOnly=myEditor.isViewer();
    myContents[1]=new FragmentContent(DiffContent.fromDocument(getProject(),getDocument()),range,getProject(),getDocumentFile(getDocument()),forceReadOnly);
  }
 else {
    myContents[1]=DiffContent.fromDocument(getProject(),getDocument());
  }
  return myContents;
}
