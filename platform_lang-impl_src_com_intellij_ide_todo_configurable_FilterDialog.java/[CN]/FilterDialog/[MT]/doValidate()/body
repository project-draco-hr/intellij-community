{
  String filterName=getNewFilterName();
  if (filterName.isEmpty()) {
    return new ValidationInfo(IdeBundle.message("error.filter.name.should.be.specified"),myNameField);
  }
  for (int i=0; i < myFilters.size(); i++) {
    TodoFilter filter=myFilters.get(i);
    if (myFilterIndex != i && filterName.equals(filter.getName())) {
      return new ValidationInfo(IdeBundle.message("error.filter.with.the.same.name.already.exists"),myNameField);
    }
  }
  if (myFilter.isEmpty()) {
    return new ValidationInfo(IdeBundle.message("error.filter.should.contain.at.least.one.pattern"),myPatternsScrollPane);
  }
  return super.doValidate();
}
