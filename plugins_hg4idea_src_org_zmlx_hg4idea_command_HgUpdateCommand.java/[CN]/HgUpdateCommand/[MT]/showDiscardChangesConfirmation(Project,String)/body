{
  final AtomicInteger exitCode=new AtomicInteger();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      exitCode.set(Messages.showOkCancelDialog(project,confirmationMessage,"Uncommitted Changes Problem","&Discard Changes","&Cancel",Messages.getWarningIcon()));
    }
  }
);
  return exitCode.get();
}
