{
  final DefaultActionGroup group=new DefaultActionGroup();
  final SortedSet<HighlightSeverity> severities=new TreeSet<HighlightSeverity>(mySeverityRegistrar);
  for (  final SeverityRegistrar.SeverityBasedTextAttributes type : SeverityUtil.getRegisteredHighlightingInfoTypes(mySeverityRegistrar)) {
    severities.add(type.getSeverity());
  }
  severities.add(HighlightSeverity.ERROR);
  severities.add(HighlightSeverity.WARNING);
  severities.add(HighlightSeverity.WEAK_WARNING);
  severities.add(HighlightSeverity.GENERIC_SERVER_ERROR_OR_WARNING);
  for (  final HighlightSeverity severity : severities) {
    final HighlightSeverityAction action=new HighlightSeverityAction(severity);
    if (myChosen == null) {
      setChosen(action.getSeverity());
    }
    group.add(action);
  }
  group.addSeparator();
  group.add(new AnAction("Edit severities..."){
    @Override public void actionPerformed(    final AnActionEvent e){
      final SeverityEditorDialog dlg=new SeverityEditorDialog(button,myChosen,mySeverityRegistrar);
      dlg.show();
      if (dlg.isOK()) {
        final HighlightInfoType type=dlg.getSelectedType();
        if (type != null) {
          final HighlightSeverity severity=type.getSeverity(null);
          setChosen(severity);
          onChosen(severity);
        }
      }
    }
  }
);
  return group;
}
