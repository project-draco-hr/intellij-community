{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("scratch");
  VirtualFile file=ScratchFileService.getInstance().createScratchFile(project,language,text);
  if (file != null) {
    FileEditorManager.getInstance(project).openFile(file,true);
    if (altMode)     scheduleSelfDestruct(file);
  }
  return file;
}
