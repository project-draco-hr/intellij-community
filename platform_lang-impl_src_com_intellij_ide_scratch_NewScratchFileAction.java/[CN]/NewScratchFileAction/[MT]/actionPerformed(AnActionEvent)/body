{
  final Project project=e.getProject();
  if (project == null)   return;
  PsiFile file=e.getData(CommonDataKeys.PSI_FILE);
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  String text=StringUtil.notNullize(getSelectionText(editor));
  Language language=ObjectUtils.notNull(text.isEmpty() ? null : getLanguageFromCaret(project,editor,file),Language.ANY);
  openNewFile(project,language,text);
}
