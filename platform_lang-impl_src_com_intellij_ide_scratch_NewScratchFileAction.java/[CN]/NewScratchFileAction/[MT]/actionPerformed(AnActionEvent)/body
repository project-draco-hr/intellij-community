{
  final Project project=e.getProject();
  if (project == null)   return;
  Language previous=ScratchpadManager.getInstance(project).getLatestLanguage();
  ListPopup popup=buildLanguagePopup(previous,new Consumer<Language>(){
    @Override public void consume(    Language language){
      VirtualFile file=ScratchpadManager.getInstance(project).createScratchFile(language);
      FileEditorManager.getInstance(project).openFile(file,true);
    }
  }
);
  popup.showCenteredInCurrentWindow(project);
}
