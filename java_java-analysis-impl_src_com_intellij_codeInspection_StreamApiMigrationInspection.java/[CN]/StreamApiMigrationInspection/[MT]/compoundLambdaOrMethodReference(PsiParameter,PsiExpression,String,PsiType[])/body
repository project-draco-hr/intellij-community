{
  String result="";
  final Project project=parameter.getProject();
  final JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(project);
  final PsiClass functionClass=psiFacade.findClass(samQualifiedName,GlobalSearchScope.allScope(project));
  for (int i=0; i < samParamTypes.length; i++) {
    if (samParamTypes[i] instanceof PsiPrimitiveType) {
      samParamTypes[i]=((PsiPrimitiveType)samParamTypes[i]).getBoxedType(expression);
    }
  }
  final PsiClassType functionalInterfaceType=functionClass != null ? psiFacade.getElementFactory().createType(functionClass,samParamTypes) : null;
  final PsiParameter[] parameters={parameter};
  final PsiCallExpression toConvertCall=LambdaCanBeMethodReferenceInspection.canBeMethodReferenceProblem(expression,parameters,functionalInterfaceType);
  final String methodReferenceText=LambdaCanBeMethodReferenceInspection.createMethodReferenceText(toConvertCall,functionalInterfaceType,parameters);
  if (methodReferenceText != null) {
    LOG.assertTrue(functionalInterfaceType != null);
    result+="(" + functionalInterfaceType.getCanonicalText() + ")"+ methodReferenceText;
  }
 else {
    result+=parameter.getName() + " -> " + expression.getText();
  }
  return result;
}
