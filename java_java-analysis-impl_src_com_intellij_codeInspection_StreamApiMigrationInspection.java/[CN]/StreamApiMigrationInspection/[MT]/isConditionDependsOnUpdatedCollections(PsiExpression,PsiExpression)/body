{
  final PsiElement collection=qualifierExpression instanceof PsiReferenceExpression ? ((PsiReferenceExpression)qualifierExpression).resolve() : null;
  if (collection != null) {
    return ReferencesSearch.search(collection,new LocalSearchScope(condition)).findFirst() != null;
  }
  final boolean[] dependsOnCollection={false};
  condition.accept(new JavaRecursiveElementWalkingVisitor(){
    @Override public void visitMethodCallExpression(    PsiMethodCallExpression expression){
      super.visitMethodCallExpression(expression);
      final PsiExpression callQualifier=expression.getMethodExpression().getQualifierExpression();
      if (callQualifier == null || callQualifier instanceof PsiThisExpression && ((PsiThisExpression)callQualifier).getQualifier() == null || callQualifier instanceof PsiSuperExpression && ((PsiSuperExpression)callQualifier).getQualifier() == null) {
        dependsOnCollection[0]=true;
      }
    }
    @Override public void visitThisExpression(    PsiThisExpression expression){
      super.visitThisExpression(expression);
      if (expression.getQualifier() == null && expression.getParent() instanceof PsiExpressionList) {
        dependsOnCollection[0]=true;
      }
    }
    @Override public void visitClass(    PsiClass aClass){
    }
    @Override public void visitLambdaExpression(    PsiLambdaExpression expression){
    }
  }
);
  return dependsOnCollection[0];
}
