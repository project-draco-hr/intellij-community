{
  String iteration="";
  if (!isIdentityMapping(parameter,expression)) {
    iteration+=".map(";
    final JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(project);
    final PsiClass functionClass=psiFacade.findClass("java.util.function.Function",GlobalSearchScope.allScope(project));
    final PsiClassType functionalInterfaceType=functionClass != null ? psiFacade.getElementFactory().createType(functionClass,parameter.getType(),expression.getType()) : null;
    final PsiCallExpression toConvertCall=LambdaCanBeMethodReferenceInspection.canBeMethodReferenceProblem(expression,new PsiParameter[]{parameter},functionalInterfaceType);
    final String methodReferenceText=LambdaCanBeMethodReferenceInspection.createMethodReferenceText(toConvertCall,functionalInterfaceType,new PsiParameter[]{parameter});
    if (methodReferenceText != null) {
      iteration+=methodReferenceText;
    }
 else {
      iteration+=parameter.getName() + " -> " + expression.getText();
    }
    iteration+=")";
  }
  return iteration;
}
