{
  if (element instanceof PsiNamedElement) {
    final PsiNamedElement psiNamedElement=(PsiNamedElement)element;
    final String name=psiNamedElement.getName();
    if (!myVariants.containsKey(name)) {
      myVariants.put(name,LookupElementFactory.getInstance().createLookupElement(psiNamedElement));
    }
  }
 else   if (element instanceof PyReferenceExpression) {
    PyReferenceExpression expr=(PyReferenceExpression)element;
    String referencedName=expr.getReferencedName();
    if (referencedName != null && !myVariants.containsKey(referencedName)) {
      myVariants.put(referencedName,LookupElementFactory.getInstance().createLookupElement(element,referencedName));
    }
  }
 else   if (element instanceof NameDefiner) {
    final NameDefiner definer=(NameDefiner)element;
    for (    PyElement expr : definer.iterateNames()) {
      if (expr != null) {
        String referencedName=expr.getName();
        if (referencedName != null && !myVariants.containsKey(referencedName)) {
          myVariants.put(referencedName,LookupElementFactory.getInstance().createLookupElement(element,referencedName));
        }
      }
    }
  }
  return true;
}
