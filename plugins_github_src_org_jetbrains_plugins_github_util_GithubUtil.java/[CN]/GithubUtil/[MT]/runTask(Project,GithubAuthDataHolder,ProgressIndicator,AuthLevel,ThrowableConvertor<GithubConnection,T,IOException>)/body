{
  GithubAuthData auth=authHolder.getAuthData();
  try {
    if (!authLevel.accepts(auth)) {
      throw new GithubAuthenticationException("Expected other authentication type: " + authLevel);
    }
    final GithubConnection connection=new GithubConnection(auth,true);
    ScheduledFuture<?> future=null;
    try {
      future=addCancellationListener(indicator,connection);
      return task.convert(connection);
    }
  finally {
      connection.close();
      if (future != null)       future.cancel(true);
    }
  }
 catch (  GithubTwoFactorAuthenticationException e) {
    getTwoFactorAuthData(project,authHolder,indicator,auth);
    return runTask(project,authHolder,indicator,authLevel,task);
  }
catch (  GithubAuthenticationException e) {
    getValidAuthData(project,authHolder,indicator,authLevel,auth);
    return runTask(project,authHolder,indicator,authLevel,task);
  }
}
