{
synchronized (authHolder.myLock) {
    if (authHolder.getAuthData() != oldAuth) {
      return;
    }
    final GithubLoginDialog dialog=new GithubBasicLoginDialog(project,authHolder,host);
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      @Override public void run(){
        DialogManager.show(dialog);
      }
    }
,indicator.getModalityState());
    if (!dialog.isOK()) {
      throw new GithubOperationCanceledException("Can't get valid credentials");
    }
    final GithubSettings settings=GithubSettings.getInstance();
    if (settings.getAuthType() != GithubAuthData.AuthType.TOKEN) {
      GithubSettings.getInstance().setAuthData(authHolder.getAuthData(),dialog.isSavePasswordSelected());
    }
  }
}
