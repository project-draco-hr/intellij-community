{
  final PyExpression expression=item.getExpression();
  if (expression != null) {
    final PyType exprType=context.getType(expression);
    if (exprType instanceof PyClassType) {
      final PyClass cls=((PyClassType)exprType).getPyClass();
      final PyFunction enter=cls.findMethodByName(PyNames.ENTER,true,null);
      if (enter != null) {
        final PyType enterType=enter.getCallType(expression,Collections.<PyExpression,PyNamedParameter>emptyMap(),context);
        if (enterType != null) {
          return enterType;
        }
        for (        PyTypeProvider provider : Extensions.getExtensions(PyTypeProvider.EP_NAME)) {
          PyType typeFromProvider=provider.getContextManagerVariableType(cls,expression,context);
          if (typeFromProvider != null) {
            return typeFromProvider;
          }
        }
        return PyUnionType.createWeakType(exprType);
      }
    }
  }
  return null;
}
