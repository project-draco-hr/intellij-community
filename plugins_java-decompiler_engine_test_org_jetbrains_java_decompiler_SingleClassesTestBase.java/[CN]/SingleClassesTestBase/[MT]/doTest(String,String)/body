{
  ConsoleDecompiler decompiler=fixture.getDecompiler();
  File classFile=new File(fixture.getTestDataDir(),"/classes/" + testFile + ".class");
  assertTrue(classFile.isFile());
  for (  File file : collectClasses(classFile)) {
    decompiler.addSpace(file,true);
  }
  for (  String companionFile : companionFiles) {
    File companionClassFile=new File(fixture.getTestDataDir(),"/classes/" + companionFile + ".class");
    assertTrue(companionClassFile.isFile());
    for (    File file : collectClasses(companionClassFile)) {
      decompiler.addSpace(file,true);
    }
  }
  decompiler.decompileContext();
  String testName=classFile.getName().substring(0,classFile.getName().length() - 6);
  File decompiledFile=new File(fixture.getTargetDir(),testName + ".java");
  assertTrue(decompiledFile.isFile());
  File referenceFile=new File(fixture.getTestDataDir(),"results/" + testName + ".dec");
  assertTrue(referenceFile.isFile());
  assertFilesEqual(referenceFile,decompiledFile);
}
