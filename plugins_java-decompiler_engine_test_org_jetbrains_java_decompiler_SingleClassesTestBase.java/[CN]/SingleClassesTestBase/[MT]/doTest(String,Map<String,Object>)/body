{
  try {
    File classFile=new File(fixture.getTestDataDir(),"/classes/" + testFile + ".class");
    assertTrue(classFile.isFile());
    String testName=classFile.getName().substring(0,classFile.getName().length() - 6);
    ConsoleDecompiler decompiler=fixture.getDecompiler();
    if (options != null) {
      for (      Entry<String,Object> option : options.entrySet()) {
        DecompilerContext.setProperty(option.getKey(),option.getValue());
      }
    }
    for (    File file : collectClasses(classFile))     decompiler.addSpace(file,true);
    decompiler.decompileContext();
    File decompiledFile=new File(fixture.getTargetDir(),testName + ".java");
    assertTrue(decompiledFile.isFile());
    File referenceFile=new File(fixture.getTestDataDir(),"results/" + testName + ".dec");
    assertTrue(referenceFile.isFile());
    compareContent(decompiledFile,referenceFile);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
