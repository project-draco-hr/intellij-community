{
  LicensingFacade facade=LicensingFacade.getInstance();
  if (facade != null) {
    mySubscriptionLicense=facade.isSubscriptionLicense();
    if (!channel.getLicensing().equals(UpdateChannel.LICENSING_EAP)) {
      int majorVersion=build.getMajorVersion();
      if (majorVersion < 0) {
        majorVersion=channel.getMajorVersion();
      }
      final Boolean paidUpgrade=facade.isPaidUpgrade(majorVersion,build.getReleaseDate());
      if (paidUpgrade == Boolean.TRUE) {
        myPaidUpgrade=true;
        myLicenseInfo=IdeBundle.message("updates.channel.key.needed",channel.getEvalDays());
      }
 else       if (paidUpgrade == Boolean.FALSE) {
        myLicenseInfo=IdeBundle.message("updates.channel.existing.key");
      }
    }
 else {
      myLicenseInfo=IdeBundle.message("updates.channel.bundled.key");
    }
  }
}
