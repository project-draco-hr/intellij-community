{
  myFixture.configureByText("foo.xml","<foo xmlns=\"http://foo.bar\" \n" + "     xxx=\"ba<caret>r\"/>");
  assertNull(myFixture.getReferenceAtCaretPosition());
  assertTrue(new InjectLanguageAction().isAvailable(getProject(),myFixture.getEditor(),myFixture.getFile()));
  assertFalse(new UnInjectLanguageAction().isAvailable(getProject(),myFixture.getEditor(),myFixture.getFile()));
  InjectLanguageAction.invokeImpl(getProject(),myFixture.getEditor(),myFixture.getFile(),new FileReferenceInjector());
  assertNotNull(myFixture.getReferenceAtCaretPosition());
  assertFalse(new InjectLanguageAction().isAvailable(getProject(),myFixture.getEditor(),myFixture.getFile()));
  assertTrue(new UnInjectLanguageAction().isAvailable(getProject(),myFixture.getEditor(),myFixture.getFile()));
  UnInjectLanguageAction.invokeImpl(getProject(),myFixture.getEditor(),myFixture.getFile());
  assertNull(myFixture.getReferenceAtCaretPosition());
}
