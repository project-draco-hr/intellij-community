{
  final Module module=context.getModule();
  if (module == null)   return false;
  if (!ExternalSystemApiUtil.isExternalSystemAwareModule(GradleConstants.SYSTEM_ID,module))   return false;
  final String projectPath=resolveProjectPath(module);
  if (projectPath == null)   return false;
  List<String> tasksToRun=getTasksToRun(module);
  if (tasksToRun.isEmpty())   return false;
  configuration.getSettings().setExternalProjectPath(projectPath);
  configuration.getSettings().setTaskNames(tasksToRun);
  StringBuilder buf=new StringBuilder();
  for (  PsiClass aClass : containingClasses) {
    final String filter=createTestFilter(aClass,psiMethod);
    if (filter != null) {
      buf.append(filter);
    }
  }
  configuration.getSettings().setScriptParameters(buf.toString().trim());
  configuration.setName((containingClasses.length == 1 ? containingClasses[0].getName() + "." : "") + psiMethod.getName());
  return true;
}
