{
  super(parent,canBeParent);
  myProject=project;
  final DefaultComboBoxModel model=new DefaultComboBoxModel();
  myPatternsCombo.setModel(model);
  for (  String methodName : StreamApiConstants.STREAM_STREAM_API_METHODS.getValue()) {
    model.addElement(methodName);
  }
  for (  String fakeMethodName : StreamApiConstants.FAKE_STREAM_API_METHODS_TO_PATTERN.getValue().keySet()) {
    model.addElement(fakeMethodName);
  }
  myPatternsCombo.setRenderer(new ColoredListCellRenderer<String>(){
    @Override protected void customizeCellRenderer(    JList list,    String methodName,    int index,    boolean selected,    boolean hasFocus){
      append("stream.");
      if (StreamApiConstants.STREAM_STREAM_API_METHODS.getValue().contains(methodName)) {
        append(methodName + "()",SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
      }
 else {
        String pattern=StreamApiConstants.FAKE_STREAM_API_METHODS_TO_PATTERN.getValue().get(methodName);
        LOG.assertTrue(pattern != null);
        append(String.format(pattern,""),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
      }
    }
  }
);
  myMethodNameCombo.setModel(new DefaultComboBoxModel());
  myClassNameEditor.addDocumentListener(new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      final String classFqn=e.getDocument().getText();
      final PsiClass aClass=JavaPsiFacade.getInstance(project).findClass(classFqn,GlobalSearchScope.allScope(project));
      final DefaultComboBoxModel comboBoxModel=(DefaultComboBoxModel)myMethodNameCombo.getModel();
      comboBoxModel.removeAllElements();
      if (aClass == null) {
        myMethodNameCombo.setEnabled(false);
      }
 else {
        for (        String name : ContainerUtil.newTreeSet(ContainerUtil.mapNotNull(aClass.getMethods(),new Function<PsiMethod,String>(){
          @Override public String fun(          PsiMethod method){
            if (method.isConstructor() || !method.hasModifierProperty(PsiModifier.STATIC) || method.hasModifierProperty(PsiModifier.PRIVATE)) {
              return null;
            }
            return method.getName();
          }
        }
))) {
          comboBoxModel.addElement(name);
        }
        myMethodNameCombo.setEnabled(true);
      }
    }
  }
);
  init();
}
