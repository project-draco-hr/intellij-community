{
  final String libName=localFileDependency.getFile().getName();
  if (localFileDependency.getFile() == null || !libName.startsWith("gradle-"))   return;
  File libOrPluginsFile=localFileDependency.getFile().getParentFile();
  if (libOrPluginsFile != null && ("plugins".equals(libOrPluginsFile.getName()))) {
    libOrPluginsFile=libOrPluginsFile.getParentFile();
  }
  if (libOrPluginsFile != null && "lib".equals(libOrPluginsFile.getName()) && libOrPluginsFile.getParentFile() != null) {
    File srcDir=new File(libOrPluginsFile.getParentFile(),"src");
    if (GradleVersion.current().compareTo(GradleVersion.version("1.9")) >= 0) {
      int endIndex=libName.indexOf(GradleVersion.current().getVersion() + ".jar");
      if (endIndex != -1) {
        String srcDirChild=libName.substring("gradle-".length(),endIndex - 1);
        srcDir=new File(srcDir,srcDirChild);
      }
    }
    if (srcDir.isDirectory()) {
      libraryDependency.setSource(srcDir);
    }
  }
}
