{
  Graph<ModuleSourceSet> graph=createModuleSourceDependenciesGraph(new DefaultModulesProvider(project));
  Collection<Chunk<ModuleSourceSet>> chunks=GraphAlgorithms.getInstance().computeStronglyConnectedComponents(graph);
  final Set<Module> modulesSet=new HashSet<Module>(modules);
  return ContainerUtil.filter(chunks,new Condition<Chunk<ModuleSourceSet>>(){
    @Override public boolean value(    Chunk<ModuleSourceSet> chunk){
      for (      ModuleSourceSet sourceSet : chunk.getNodes()) {
        if (modulesSet.contains(sourceSet.getModule())) {
          return true;
        }
      }
      return false;
    }
  }
);
}
