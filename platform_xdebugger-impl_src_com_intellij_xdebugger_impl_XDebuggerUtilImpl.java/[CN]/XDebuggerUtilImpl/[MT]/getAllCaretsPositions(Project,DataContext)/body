{
  Editor editor=getEditor(project,context);
  if (editor == null) {
    return Collections.emptyList();
  }
  VirtualFile file=FileDocumentManager.getInstance().getFile(editor.getDocument());
  List<XSourcePosition> res=new SmartList<XSourcePosition>();
  for (  Caret caret : editor.getCaretModel().getAllCarets()) {
    XSourcePositionImpl position=XSourcePositionImpl.createByOffset(file,caret.getOffset());
    if (position != null) {
      res.add(position);
    }
  }
  return res;
}
