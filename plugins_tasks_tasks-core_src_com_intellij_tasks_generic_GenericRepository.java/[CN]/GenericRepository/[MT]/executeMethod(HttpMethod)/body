{
  LOG.debug("URI is " + method.getURI());
  String responseBody;
  try {
    getHttpClient().executeMethod(method);
    Header contentType=method.getResponseHeader("Content-Type");
    if (contentType != null && contentType.getValue().contains("charset")) {
      responseBody=method.getResponseBodyAsString();
    }
 else {
      responseBody=StreamUtil.readText(method.getResponseBodyAsStream(),"utf-8");
    }
  }
  finally {
    method.releaseConnection();
  }
  LOG.debug(responseBody);
  LOG.debug("Status code is " + method.getStatusCode());
  if (method.getStatusCode() != HttpStatus.SC_OK) {
    throw new Exception("Request failed with HTTP error: " + method.getStatusText());
  }
  return responseBody;
}
