{
  if (myCancelled) {
    myCancelled=false;
    return;
  }
  boolean wasDragging=myDraggingNow;
  myDraggingNow=false;
  myDragJustStarted=false;
  if (wasDragging) {
    try {
      if (myDetachingMode) {
        processDragOutFinish(e);
      }
 else {
        processDragFinish(e,false);
      }
    }
  finally {
      myPressPointScreen=null;
      resetDragState();
      e.consume();
      if (myDetachPostponed) {
        myDetachPostponed=false;
        detach(false);
      }
    }
  }
}
