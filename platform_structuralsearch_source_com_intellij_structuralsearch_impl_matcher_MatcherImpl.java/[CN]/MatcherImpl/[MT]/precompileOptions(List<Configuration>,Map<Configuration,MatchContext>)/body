{
  for (  final Configuration configuration : configurations) {
    if (out.containsKey(configuration)) {
      continue;
    }
    final MatchContext matchContext=new MatchContext();
    matchContext.setMatcher(visitor);
    final MatchOptions matchOptions=configuration.getMatchOptions();
    matchContext.setOptions(matchOptions);
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      @Override public void run(){
        try {
          final CompiledPattern compiledPattern=PatternCompiler.compilePattern(project,matchOptions);
          matchContext.setPattern(compiledPattern);
          out.put(configuration,matchContext);
        }
 catch (        UnsupportedPatternException ignored) {
        }
catch (        MalformedPatternException ignored) {
        }
      }
    }
);
  }
}
