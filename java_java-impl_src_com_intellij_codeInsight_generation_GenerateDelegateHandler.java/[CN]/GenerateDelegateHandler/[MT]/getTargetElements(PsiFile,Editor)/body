{
  int offset=editor.getCaretModel().getOffset();
  PsiElement element=file.findElementAt(offset);
  if (element == null)   return null;
  final PsiClass targetClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
  PsiClass aClass=targetClass;
  if (aClass == null)   return null;
  List<PsiElementClassMember> result=new ArrayList<PsiElementClassMember>();
  while (aClass != null) {
    collectTargetsInClass(element,targetClass,aClass,result);
    if (aClass.hasModifierProperty(PsiModifier.STATIC))     break;
    aClass=PsiTreeUtil.getParentOfType(aClass,PsiClass.class,true);
  }
  return result.toArray(new PsiElementClassMember[result.size()]);
}
