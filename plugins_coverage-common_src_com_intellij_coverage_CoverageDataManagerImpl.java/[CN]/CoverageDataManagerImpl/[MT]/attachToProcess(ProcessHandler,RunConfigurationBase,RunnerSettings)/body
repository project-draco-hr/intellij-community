{
  final CoverageEnabledConfiguration coverageEnabledConfiguration=CoverageEnabledConfiguration.getOrCreate(configuration);
  if (runnerSettings.getData() instanceof CoverageRunnerData) {
    handler.addProcessListener(new ProcessAdapter(){
      public void processTerminated(      final ProcessEvent event){
        final CoverageDataManager coverageDataManager=CoverageDataManager.getInstance(configuration.getProject());
        final CoverageEnabledConfiguration coverageEnabledConfiguration=CoverageEnabledConfiguration.getOrCreate(configuration);
        final CoverageSuite coverageSuite=coverageEnabledConfiguration.getCurrentCoverageSuite();
        if (coverageSuite != null) {
          ((BaseCoverageSuite)coverageSuite).setConfiguration(configuration);
          coverageDataManager.coverageGathered(coverageSuite);
        }
      }
    }
);
  }
}
