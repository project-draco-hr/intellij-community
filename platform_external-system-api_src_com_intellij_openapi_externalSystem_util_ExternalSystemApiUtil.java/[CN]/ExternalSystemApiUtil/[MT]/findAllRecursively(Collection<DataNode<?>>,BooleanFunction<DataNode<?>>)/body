{
  SmartList<DataNode<?>> result=new SmartList<>();
  for (  DataNode<?> node : nodes) {
    if (predicate == null || predicate.fun(node)) {
      result.add(node);
    }
  }
  for (  DataNode<?> node : nodes) {
    result.addAll(findAllRecursively(node.getChildren(),predicate));
  }
  return result;
}
