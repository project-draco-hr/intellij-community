{
  MultiMap<Key<?>,DataNode<?>> result=new ContainerUtil.KeyOrderedMultiMap<Key<?>,DataNode<?>>();
  Queue<Collection<DataNode<?>>> queue=ContainerUtil.newLinkedList();
  queue.add(nodes);
  while (!queue.isEmpty()) {
    Collection<DataNode<?>> _nodes=queue.remove();
    result.putAllValues(group(_nodes));
    for (    DataNode<?> _node : _nodes) {
      queue.add(_node.getChildren());
    }
  }
  return result;
}
