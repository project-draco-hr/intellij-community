{
  final List<VcsException> exception=new ArrayList<>();
  final Collection<FilePath> committables=getCommitables(changes);
  final ProgressIndicator progress=ProgressManager.getInstance().getProgressIndicator();
  if (progress != null) {
    doCommit(committables,preparedComment,exception,feedback);
  }
 else   if (ApplicationManager.getApplication().isDispatchThread()) {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
      public void run(){
        doCommit(committables,preparedComment,exception,feedback);
      }
    }
,SvnBundle.message("progress.title.commit"),false,mySvnVcs.getProject());
  }
 else {
    doCommit(committables,preparedComment,exception,feedback);
  }
  return exception;
}
