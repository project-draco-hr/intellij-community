{
  Collections.sort(files,FilePathComparator.getInstance());
  ProgressTracker eventHandler=new SvnProgressCanceller(){
    @Override public void handleEvent(    ProgressEvent event,    double progress) throws SVNException {
      ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      File file=event.getFile();
      if (indicator != null && file != null) {
        indicator.setText(SvnBundle.message("progress.text2.adding",file.getName() + " (" + file.getParent()+ ")"));
      }
    }
  }
;
  List<VcsException> exceptions=new ArrayList<VcsException>();
  SVNDepth depth=recursive ? SVNDepth.INFINITY : SVNDepth.EMPTY;
  for (  VirtualFile file : files) {
    try {
      File convertedFile=VfsUtilCore.virtualToIoFile(file);
      vcs.getFactory(convertedFile).createAddClient().add(convertedFile,depth,true,false,true,eventHandler);
    }
 catch (    VcsException e) {
      exceptions.add(e);
    }
  }
  return exceptions;
}
