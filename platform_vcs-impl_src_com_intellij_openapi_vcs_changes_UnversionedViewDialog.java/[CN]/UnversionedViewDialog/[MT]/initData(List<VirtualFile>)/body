{
  final TreeState state=TreeState.createOn(myView,(ChangesBrowserNode)myView.getModel().getRoot());
  TreeModelBuilder builder=new TreeModelBuilder(myProject,myFlattenState);
  final DefaultTreeModel model=builder.buildModelFromFiles(files);
  myView.setModel(model);
  myView.setCellRenderer(new ChangesBrowserNodeRenderer(myProject,myFlattenState ? BooleanGetter.TRUE : BooleanGetter.FALSE,true));
  myView.expandPath(new TreePath(((ChangesBrowserNode)model.getRoot()).getPath()));
  state.applyTo(myView);
}
