{
  if (myDisposed) {
    return;
  }
  final ConsoleView console=getConsoleNotNull();
  console.clear();
  myModel.processingStarted();
  final String[] lines=myOriginalDocument != null ? myOriginalDocument.toString().split("\n") : ArrayUtil.EMPTY_STRING_ARRAY;
  ;
  int offset=0;
  boolean caretPositioned=false;
  for (  String line : lines) {
    final int printed=printMessageToConsole(line);
    if (printed > 0) {
      if (!caretPositioned) {
        if (Comparing.strEqual(myLineUnderSelection,line)) {
          caretPositioned=true;
          offset+=myLineOffset != -1 ? myLineOffset : 0;
        }
 else {
          offset+=printed;
        }
      }
    }
  }
  if (caretPositioned) {
    console.scrollTo(offset);
  }
 else {
    ((ConsoleViewImpl)console).requestScrollingToEnd();
  }
}
