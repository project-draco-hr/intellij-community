{
  Object instance=myInitializedComponentInstance;
  if (instance != null) {
    return instance;
  }
  AccessToken readToken=Registry.is("use.read.action.to.init.service",!ApplicationManager.getApplication().isUnitTestMode()) ? ReadAction.start() : null;
  try {
synchronized (this) {
      instance=myInitializedComponentInstance;
      if (instance != null) {
        return instance;
      }
      ComponentAdapter delegate=getDelegate();
      AccessToken token=HeavyProcessLatch.INSTANCE.processStarted("Creating component '" + myDescriptor.getImplementation() + "'");
      try {
        instance=delegate.getComponentInstance(container);
        if (instance instanceof Disposable) {
          Disposer.register(myComponentManager,(Disposable)instance);
        }
        myComponentManager.initializeComponent(instance,true);
        myInitializedComponentInstance=instance;
        return instance;
      }
  finally {
        token.finish();
      }
    }
  }
  finally {
    if (readToken != null) {
      readToken.finish();
    }
  }
}
