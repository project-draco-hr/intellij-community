{
  final LinkedHashMap<String,Map<String,List<String>>> classes=new LinkedHashMap<String,Map<String,List<String>>>();
  for (  Object className : classNames) {
    classes.put((String)className,null);
  }
  String rootPath=null;
  if (!myNewArgs.isEmpty()) {
    rootPath=new File((String)myNewArgs.get(0)).getParent();
  }
  final File file=TestNGXmlSuiteHelper.writeSuite(classes,new LinkedHashMap<String,String>(),moduleName,rootPath,TestNGXmlSuiteHelper.Logger.DEAF);
  file.deleteOnExit();
  return Math.min(result,startChildFork(Collections.singletonList(file.getAbsolutePath()),new File(workingDir),classpath));
}
