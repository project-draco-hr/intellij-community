{
  String type=getComponentType(c);
  if ("editor".equals(type)) {
    Editor editor=c instanceof EditorComponentImpl ? ((EditorComponentImpl)c).getEditor() : c instanceof EditorGutterComponentEx ? CommonDataKeys.EDITOR.getData((DataProvider)c) : null;
    if (Boolean.TRUE.equals(EditorTextField.SUPPLEMENTARY_KEY.get(editor)))     return g;
  }
  if ("frame".equals(type))   return withFrameBackground(g,c);
  return type != null ? withEditorBackground(g,c) : g;
}
