{
  if (width <= 1 || height <= 1)   return;
  if (reason instanceof Color && ((Color)reason).getAlpha() < 255)   return;
  if (reason instanceof Image) {
    if (!(reason instanceof BufferedImage))     return;
    if (((BufferedImage)reason).getColorModel().hasAlpha())     return;
  }
  boolean preserve=preserved != null && reason instanceof Color && preserved.contains(reason);
  if (preserve) {
    myDelegate.setRenderingHint(ADJUST_ALPHA,Boolean.TRUE);
  }
  Shape s=getClip();
  Rectangle newClip=s == null ? new Rectangle(x,y,width,height) : SwingUtilities.computeIntersection(x,y,width,height,s.getBounds());
  setClip(newClip);
  helper.runAllPainters(myDelegate,offsets);
  setClip(s);
  if (preserve) {
    myDelegate.setRenderingHint(ADJUST_ALPHA,Boolean.FALSE);
  }
}
