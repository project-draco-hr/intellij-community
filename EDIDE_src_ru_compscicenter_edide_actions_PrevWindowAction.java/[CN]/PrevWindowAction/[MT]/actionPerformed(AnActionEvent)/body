{
  Project project=e.getProject();
  Editor selectedEditor=StudyEditor.getSelectedEditor(project);
  if (selectedEditor != null) {
    FileDocumentManager fileDocumentManager=FileDocumentManager.getInstance();
    VirtualFile openedFile=fileDocumentManager.getFile(selectedEditor.getDocument());
    if (openedFile != null) {
      StudyTaskManager taskManager=StudyTaskManager.getInstance(project);
      TaskFile selectedTaskFile=taskManager.getTaskFile(openedFile);
      if (selectedTaskFile != null) {
        TaskWindow selectedTaskWindow=selectedTaskFile.getSelectedTaskWindow();
        TaskWindow prev=null;
        for (        TaskWindow taskWindow : selectedTaskFile.getTaskWindows()) {
          if (taskWindow == selectedTaskWindow) {
            break;
          }
          prev=taskWindow;
        }
        if (prev != null) {
          selectedTaskFile.setSelectedTaskWindow(prev);
          prev.draw(selectedEditor,prev.getStatus() != StudyStatus.Solved,true);
        }
      }
    }
  }
}
