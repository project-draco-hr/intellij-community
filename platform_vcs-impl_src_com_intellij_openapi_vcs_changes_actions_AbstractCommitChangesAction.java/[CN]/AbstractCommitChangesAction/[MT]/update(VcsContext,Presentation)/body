{
  super.update(vcsContext,presentation);
  if (presentation.isEnabledAndVisible()) {
    Change[] changes=vcsContext.getSelectedChanges();
    if (vcsContext.getPlace().equals(ActionPlaces.CHANGES_VIEW_POPUP)) {
      ChangeList[] changeLists=vcsContext.getSelectedChangeLists();
      presentation.setEnabled(!ArrayUtil.isEmpty(changeLists) ? changeLists.length == 1 && !changeLists[0].getChanges().isEmpty() : !ArrayUtil.isEmpty(changes));
    }
    if (presentation.isEnabled() && !ArrayUtil.isEmpty(changes)) {
      disableIfAnyHijackedChanges(notNull(vcsContext.getProject()),presentation,changes);
    }
  }
}
