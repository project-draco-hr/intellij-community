{
  SearchScope searchScope=GlobalSearchScope.projectScope(myProject);
  if (aClass != null && ClsUtil.isPackageLocal(fieldAccessFlags)) {
    final PsiFile containingFile=aClass.getContainingFile();
    if (containingFile instanceof PsiJavaFile) {
      final String packageName=((PsiJavaFile)containingFile).getPackageName();
      final PsiPackage aPackage=JavaPsiFacade.getInstance(myProject).findPackage(packageName);
      if (aPackage != null) {
        searchScope=PackageScope.packageScope(aPackage,false);
        searchScope=searchScope.intersectWith(aClass.getUseScope());
      }
    }
  }
  return searchScope;
}
