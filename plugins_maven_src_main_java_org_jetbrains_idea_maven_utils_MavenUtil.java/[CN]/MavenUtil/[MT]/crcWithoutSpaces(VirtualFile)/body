{
  String text=VfsUtil.loadText(xmlFile);
  XmlLexer lexer=new XmlLexer();
  lexer.start(text);
  CRC32 crc=new CRC32();
  boolean isCommentOrSpace=false;
  while (true) {
    IElementType tokenType=lexer.getTokenType();
    if (tokenType == null)     break;
    if (XmlTokenType.WHITESPACES.contains(tokenType) || XmlTokenType.COMMENTS.contains(tokenType) || tokenType == XmlTokenType.XML_REAL_WHITE_SPACE) {
      if (!isCommentOrSpace) {
        crc.update(1);
        isCommentOrSpace=true;
      }
    }
 else {
      isCommentOrSpace=false;
      for (int start=lexer.getTokenStart(), end=lexer.getTokenEnd(); start < end; start++) {
        char a=text.charAt(start);
        crc.update(a);
        crc.update(a >>> 8);
      }
    }
    lexer.advance();
  }
  return (int)crc.getValue();
}
