{
  if (myFirstTime || Messages.showYesNoDialog((Project)null,"All stored passwords will be removed! Are you sure you want to proceed?","Confirm Master Password Reset",Messages.getWarningIcon()) == Messages.YES) {
    mySafe.resetMasterPassword(new String(myNewPasswordField.getPassword()),myEncryptCheckBox.isSelected());
    ((PasswordSafeImpl)PasswordSafe.getInstance()).getMemoryProvider().clear();
    return true;
  }
  return false;
}
