{
  MappingList mappings=null;
  if (absoluteLocalPathToSourceIndex != null && sourceFile.isInLocalFileSystem()) {
    mappings=getMappingsBySource(sourceMap,absoluteLocalPathToSourceIndex.get(sourceFile.getPath()));
    if (mappings == null) {
      String sourceFileCanonicalPath=sourceFile.getCanonicalPath();
      if (sourceFileCanonicalPath != null) {
        mappings=getMappingsBySource(sourceMap,absoluteLocalPathToSourceIndex.get(sourceFileCanonicalPath));
      }
    }
  }
  if (mappings == null) {
    int index=canonicalizedSourcesMap.get(Urls.newFromVirtualFile(sourceFile).trimParameters());
    if (index != -1) {
      return sourceMap.sourceIndexToMappings[index];
    }
    for (int i=0; i < canonicalizedSources.length; i++) {
      Url url=canonicalizedSources[i];
      if (Urls.equalsIgnoreParameters(url,sourceFile)) {
        return sourceMap.sourceIndexToMappings[i];
      }
      VirtualFile canonicalFile=sourceFile.getCanonicalFile();
      if (canonicalFile != null && !canonicalFile.equals(sourceFile) && Urls.equalsIgnoreParameters(url,canonicalFile)) {
        return sourceMap.sourceIndexToMappings[i];
      }
    }
  }
  return mappings;
}
