{
  final SvnVcs vcs=SvnVcs.getInstance(myProject);
  try {
    myBeforeRevisionValue=getBeforeRevisionValue(myChange,vcs);
    myAfterRevision=getAfterRevisionValue(myChange,vcs);
    myBeforeContent=getPropertyList(vcs,myChange.getBeforeRevision(),myBeforeRevisionValue);
    indicator.checkCanceled();
    myAfterContent=getPropertyList(vcs,myChange.getAfterRevision(),myAfterRevision);
  }
 catch (  SVNException exc) {
    myException=exc;
  }
catch (  VcsException exc) {
    myException=exc;
  }
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (myException != null) {
        Messages.showErrorDialog(myException.getMessage(),myErrorTitle);
        return;
      }
      if (myBeforeContent != null && myAfterContent != null && myBeforeRevisionValue != null && myAfterRevision != null) {
        final SimpleDiffRequest diffRequest=new SimpleDiffRequest(myProject,getDiffWindowTitle(myChange));
        if (compareRevisions(myBeforeRevisionValue,myAfterRevision) >= 0) {
          diffRequest.setContents(new SimpleContent(myAfterContent),new SimpleContent(myBeforeContent));
          diffRequest.setContentTitles(revisionToString(myAfterRevision),revisionToString(myBeforeRevisionValue));
        }
 else {
          diffRequest.setContents(new SimpleContent(myBeforeContent),new SimpleContent(myAfterContent));
          diffRequest.setContentTitles(revisionToString(myBeforeRevisionValue),revisionToString(myAfterRevision));
        }
        DiffManager.getInstance().getDiffTool().show(diffRequest);
      }
    }
  }
);
}
