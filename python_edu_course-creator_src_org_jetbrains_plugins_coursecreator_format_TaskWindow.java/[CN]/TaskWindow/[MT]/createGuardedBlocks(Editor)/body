{
  Document document=editor.getDocument();
  if (document instanceof DocumentImpl) {
    DocumentImpl documentImpl=(DocumentImpl)document;
    List<RangeMarker> blocks=documentImpl.getGuardedBlocks();
    int start=getRealStartOffset(document);
    int end=start + getReplacementLength();
    if (start != 0) {
      createGuardedBlock(editor,blocks,start - 1,start);
    }
    if (end != document.getTextLength()) {
      createGuardedBlock(editor,blocks,end,end + 1);
    }
  }
}
