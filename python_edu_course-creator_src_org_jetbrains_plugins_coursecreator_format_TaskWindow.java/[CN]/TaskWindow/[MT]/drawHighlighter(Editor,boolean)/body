{
  int startOffset=editor.getDocument().getLineStartOffset(line) + start;
  int highlighterLength=useLength ? length : myReplacementLength;
  int endOffset=startOffset + highlighterLength;
  TextAttributes defaultTestAttributes=EditorColorsManager.getInstance().getGlobalScheme().getAttributes(EditorColors.LIVE_TEMPLATE_ATTRIBUTES);
  RangeHighlighter highlighter=editor.getMarkupModel().addRangeHighlighter(startOffset,endOffset,HighlighterLayer.LAST + 1,defaultTestAttributes,HighlighterTargetArea.EXACT_RANGE);
  highlighter.setGreedyToLeft(true);
  highlighter.setGreedyToRight(false);
}
