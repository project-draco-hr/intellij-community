{
  final PsiElement firstNonReferenceExprParent=PsiTreeUtil.skipParentsOfType(ref,GrReferenceExpressionImpl.class);
  return (GrReferenceExpressionImpl)PsiTreeUtil.findFirstParent(ref,new Condition<PsiElement>(){
    @Override public boolean value(    PsiElement parent){
      return parent.getParent() == firstNonReferenceExprParent && parent instanceof GrReferenceExpressionImpl;
    }
  }
);
}
