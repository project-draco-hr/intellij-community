{
  VirtualFile localFile=LocalFileSystem.getInstance().findFileByPath(path.getPath());
  FileType fileType=localFile != null ? localFile.getFileType() : path.getFileType();
  Charset charset=localFile != null ? localFile.getCharset() : path.getCharset(project);
  Pair<Document,LineSeparator> pair=DiffContentFactory.buildDocument(content);
  pair.first.setReadOnly(true);
  return new FileAwareDocumentContent(project,pair.first,fileType,localFile,pair.second,charset);
}
