{
  GitSimpleHandler h=new GitSimpleHandler(project,root,GitCommand.LOG);
  GitLogParser.NameStatus status=withChanges ? GitLogParser.NameStatus.STATUS : GitLogParser.NameStatus.NONE;
  GitLogParser parser=new GitLogParser(project,status,HASH,COMMIT_TIME,AUTHOR_NAME,AUTHOR_TIME,AUTHOR_EMAIL,COMMITTER_NAME,COMMITTER_EMAIL,PARENTS,SUBJECT,BODY,RAW_BODY);
  h.setStdoutSuppressed(true);
  h.addParameters(parameters);
  h.addParameters(parser.getPretty(),"--encoding=UTF-8");
  h.addParameters("--full-history","--sparse");
  if (withChanges) {
    h.addParameters("-M","--name-status");
  }
  h.endOptions();
  StopWatch sw=StopWatch.start("loading details");
  String output=h.run();
  sw.report();
  sw=StopWatch.start("parsing");
  List<GitLogRecord> records=parser.parse(output);
  sw.report();
  sw=StopWatch.start("Creating objects");
  List<T> commits=ContainerUtil.mapNotNull(records,converter);
  sw.report();
  return commits;
}
