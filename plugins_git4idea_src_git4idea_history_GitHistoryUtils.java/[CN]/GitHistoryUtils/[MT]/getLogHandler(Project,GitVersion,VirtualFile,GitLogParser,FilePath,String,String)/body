{
  final GitLineHandler h=new GitLineHandler(project,root,GitCommand.LOG);
  h.setStdoutSuppressed(true);
  h.addParameters("--name-status",parser.getPretty(),"--encoding=UTF-8",lastCommit);
  if (GitVersionSpecialty.FULL_HISTORY_SIMPLIFY_MERGES_WORKS_CORRECTLY.existsIn(version)) {
    h.addParameters("--full-history","--simplify-merges");
  }
  if (parameters != null && parameters.length > 0) {
    h.addParameters(parameters);
  }
  h.endOptions();
  h.addRelativePaths(path);
  return h;
}
