{
  final ServerRuntimeInstance<D> instance=myRuntimeInstance;
  if (instance != null) {
    action.run(instance);
    return;
  }
  myStatus=ConnectionStatus.CONNECTING;
  myConnector.connect(new ServerConnector.ConnectionCallback<D>(){
    @Override public void connected(    @NotNull ServerRuntimeInstance<D> instance){
      myStatus=ConnectionStatus.CONNECTED;
      myRuntimeInstance=instance;
      action.run(instance);
    }
    @Override public void connectionFailed(    @NotNull String errorMessage){
      myStatus=ConnectionStatus.DISCONNECTED;
      myRuntimeInstance=null;
      myStatusText=errorMessage;
    }
  }
);
}
