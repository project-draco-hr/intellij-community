{
  final List<Pair<PsiElement,TextRange>> files=InjectedLanguageManager.getInstance(expression.getProject()).getInjectedPsiFiles(expression);
  if (files == null) {
    return null;
  }
  for (  final Pair<PsiElement,TextRange> fileInfo : files) {
    final PsiElement injectedFile=fileInfo.first;
    if (classToFind.isAssignableFrom(injectedFile.getClass())) {
      return (T)injectedFile;
    }
  }
  return null;
}
