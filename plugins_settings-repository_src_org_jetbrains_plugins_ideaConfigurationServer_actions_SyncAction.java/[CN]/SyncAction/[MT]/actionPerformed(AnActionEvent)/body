{
  final Project project=e.getProject();
  IcsManager.getInstance().sync(SyncType.MERGE).doWhenDone(new Runnable(){
    @Override public void run(){
      NOTIFICATION_GROUP.createNotification(IcsBundle.message("sync.done.message"),NotificationType.INFORMATION).notify(project == null || project.isDisposed() ? null : project);
    }
  }
).doWhenRejected(new Consumer<String>(){
    @Override public void consume(    String error){
      NOTIFICATION_GROUP.createNotification(IcsBundle.message("sync.rejected.message",StringUtil.notNullize(error,"Internal error")),NotificationType.ERROR).notify(project == null || project.isDisposed() ? null : project);
    }
  }
);
}
