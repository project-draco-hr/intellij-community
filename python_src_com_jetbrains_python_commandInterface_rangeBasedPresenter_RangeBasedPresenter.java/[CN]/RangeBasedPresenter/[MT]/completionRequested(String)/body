{
  final RangeInfo rangeInfo=findNearestRangeInfo();
  final String text=getTextByRange(rangeInfo);
  if (valueFromSuggestionList != null) {
    if (text != null) {
      myView.replaceText(rangeInfo.getFrom(),rangeInfo.getTo(),valueFromSuggestionList);
    }
 else {
      myView.insertTextAfterCaret(valueFromSuggestionList);
    }
    return;
  }
  final SuggestionInfo suggestionInfo=rangeInfo.getSuggestions();
  if (suggestionInfo == null) {
    return;
  }
  final List<String> suggestions=new ArrayList<String>(suggestionInfo.getSuggestions());
  if (text != null) {
    filterLeaveOnlyMatching(suggestions,text);
  }
  if (suggestions.size() == 1) {
    if (text != null) {
      myView.replaceText(rangeInfo.getFrom(),rangeInfo.getTo(),suggestions.get(0));
    }
 else {
      myView.insertTextAfterCaret(suggestions.get(0));
    }
  }
}
