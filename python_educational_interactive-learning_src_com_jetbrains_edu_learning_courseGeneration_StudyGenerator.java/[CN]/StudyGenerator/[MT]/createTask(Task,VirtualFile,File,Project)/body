{
  VirtualFile taskDir=lessonDir.createChildDirectory(project,EduNames.TASK + Integer.toString(task.getIndex()));
  EduUtils.markDirAsSourceRoot(taskDir,project);
  File newResourceRoot=new File(resourceRoot,taskDir.getName());
  int i=0;
  for (  Map.Entry<String,TaskFile> taskFile : task.getTaskFiles().entrySet()) {
    TaskFile taskFileContent=taskFile.getValue();
    taskFileContent.setIndex(i);
    i++;
    createTaskFile(taskDir,newResourceRoot,taskFile.getKey());
  }
  File[] filesInTask=newResourceRoot.listFiles();
  if (filesInTask != null) {
    for (    File file : filesInTask) {
      String fileName=file.getName();
      if (!task.isTaskFile(fileName)) {
        File resourceFile=new File(newResourceRoot,fileName);
        File fileInProject=new File(taskDir.getCanonicalPath(),fileName);
        FileUtil.copy(resourceFile,fileInProject);
      }
    }
  }
}
