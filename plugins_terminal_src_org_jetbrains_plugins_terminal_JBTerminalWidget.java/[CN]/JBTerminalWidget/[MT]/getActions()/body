{
  List<TerminalAction> actions=super.getActions();
  if (!TerminalOptionsProvider.getInstance().overrideIdeShortcuts()) {
    actions.add(new TerminalAction("EditorEscape",new KeyStroke[]{KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0)},new Predicate<KeyEvent>(){
      @Override public boolean apply(      KeyEvent input){
        if (!myTerminalPanel.getTerminalTextBuffer().isUsingAlternateBuffer()) {
          ToolWindowManager.getInstance(myProject).activateEditorComponent();
          return true;
        }
 else {
          return false;
        }
      }
    }
).withHidden(true));
  }
  return actions;
}
