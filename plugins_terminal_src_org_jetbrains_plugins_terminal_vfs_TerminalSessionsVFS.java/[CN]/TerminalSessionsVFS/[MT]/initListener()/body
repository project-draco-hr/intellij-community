{
  if (myProjectManagerListener == null || ApplicationManager.getApplication().isUnitTestMode()) {
    myCachedFiles.clear();
    myProject2Id.clear();
    for (    Project project : ProjectManager.getInstance().getOpenProjects()) {
      onProjectOpened(project);
    }
  }
  if (myProjectManagerListener == null) {
    myProjectManagerListener=new ProjectManagerAdapter(){
      @Override public void projectOpened(      final Project project){
        onProjectOpened(project);
      }
      @Override public void projectClosed(      final Project project){
        onProjectClosed(project);
      }
    }
;
    ProjectManager.getInstance().addProjectManagerListener(myProjectManagerListener);
  }
}
