{
  this.reader=reader;
  Method[] methods=typeClass.getMethods();
  Arrays.sort(methods,new Comparator<Method>(){
    @Override public int compare(    @NotNull Method o1,    @NotNull Method o2){
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  Package classPackage=typeClass.getPackage();
  for (  Method method : methods) {
    Class<?> methodClass=method.getDeclaringClass();
    if (methodClass != typeClass) {
      Package methodPackage=methodClass.getPackage();
      if (methodPackage != classPackage) {
        continue;
      }
    }
    if (method.getParameterCount() != 0) {
      throw new JsonProtocolModelParseException("No parameters expected in " + method);
    }
    try {
      MethodHandler methodHandler;
      JsonSubtypeCasting jsonSubtypeCaseAnnotation=method.getAnnotation(JsonSubtypeCasting.class);
      if (jsonSubtypeCaseAnnotation == null) {
        methodHandler=processFieldGetterMethod(method);
      }
 else {
        methodHandler=processManualSubtypeMethod(method,jsonSubtypeCaseAnnotation);
        lazyRead=true;
      }
      methodHandlerMap.put(method,methodHandler);
    }
 catch (    Exception e) {
      throw new JsonProtocolModelParseException("Problem with method " + method,e);
    }
  }
}
