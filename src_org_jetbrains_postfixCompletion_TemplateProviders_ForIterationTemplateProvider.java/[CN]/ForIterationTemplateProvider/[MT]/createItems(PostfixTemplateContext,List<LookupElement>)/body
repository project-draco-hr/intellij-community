{
  PrefixExpressionContext expression=context.outerExpression;
  if (!context.executionContext.isForceMode) {
    PsiType expressionType=expression.expressionType;
    if (expressionType == null) {
      Boolean isNullable=NotNullCheckTemplateProvider.isNullableExpression(expression);
      if (isNullable != null && !isNullable)       return;
    }
 else {
      if (!(expressionType instanceof PsiArrayType) && !InheritanceUtil.isInheritor(expressionType,CommonClassNames.JAVA_LANG_ITERABLE))       return;
    }
  }
  consumer.add(new ForeachLookupElement(expression));
}
