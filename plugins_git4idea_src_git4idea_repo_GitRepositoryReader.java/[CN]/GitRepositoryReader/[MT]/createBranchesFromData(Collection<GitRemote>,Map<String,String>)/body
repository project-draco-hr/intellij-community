{
  Set<GitLocalBranch> localBranches=new HashSet<GitLocalBranch>();
  Set<GitRemoteBranch> remoteBranches=new HashSet<GitRemoteBranch>();
  for (  Map.Entry<String,String> entry : data.entrySet()) {
    String refName=entry.getKey();
    String value=entry.getValue();
    Hash hash=createHash(value);
    if (hash != null) {
      if (refName.startsWith(REFS_HEADS_PREFIX)) {
        localBranches.add(new GitLocalBranch(refName,hash));
      }
 else       if (refName.startsWith(REFS_REMOTES_PREFIX)) {
        GitRemoteBranch remoteBranch=parseRemoteBranch(refName,hash,remotes);
        if (remoteBranch != null) {
          remoteBranches.add(remoteBranch);
        }
      }
    }
 else {
      LOG.warn("Couldn't parse hash from [" + value + "]");
    }
  }
  return new GitBranchesCollection(localBranches,remoteBranches);
}
