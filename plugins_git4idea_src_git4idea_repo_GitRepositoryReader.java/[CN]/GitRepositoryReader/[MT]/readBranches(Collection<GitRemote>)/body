{
  Set<GitLocalBranch> localBranches=readUnpackedLocalBranches();
  Set<GitRemoteBranch> remoteBranches=readUnpackedRemoteBranches(remotes);
  try {
    GitBranchesCollection packedBranches=readPackedBranches(remotes);
    localBranches.addAll(packedBranches.getLocalBranches());
    remoteBranches.addAll(packedBranches.getRemoteBranches());
  }
 catch (  RepoStateException e) {
    LOG.error(e);
  }
  return new GitBranchesCollection(localBranches,remoteBranches);
}
