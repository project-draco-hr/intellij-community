{
  final Set<GitLocalBranch> localBranches=new HashSet<GitLocalBranch>();
  final Set<GitRemoteBranch> remoteBranches=new HashSet<GitRemoteBranch>();
  if (!myPackedRefsFile.exists()) {
    return GitBranchesCollection.EMPTY;
  }
  List<HashAndName> hashAndNames=readPackedRefsFile(null);
  for (  HashAndName hashAndName : hashAndNames) {
    Hash hash=createHash(hashAndName.hash);
    if (hash == null) {
      continue;
    }
    String branchName=hashAndName.name;
    if (branchName.startsWith(REFS_HEADS_PREFIX)) {
      localBranches.add(new GitLocalBranch(branchName,hash));
    }
 else     if (branchName.startsWith(REFS_REMOTES_PREFIX)) {
      GitRemoteBranch remoteBranch=GitBranchUtil.parseRemoteBranch(branchName,hash,remotes);
      if (remoteBranch != null) {
        remoteBranches.add(remoteBranch);
      }
    }
  }
  return new GitBranchesCollection(localBranches,remoteBranches);
}
