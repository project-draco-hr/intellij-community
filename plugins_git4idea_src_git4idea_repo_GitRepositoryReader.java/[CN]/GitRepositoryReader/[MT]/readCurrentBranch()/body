{
  Head head=readHead();
  if (head.isBranch) {
    String branchName=head.ref;
    String hash=readCurrentRevision();
    Hash h=createHash(hash);
    if (branchName == null || h == null) {
      return null;
    }
    return new GitLocalBranch(branchName,h);
  }
  if (isRebaseInProgress()) {
    GitLocalBranch branch=readRebaseBranch("rebase-apply");
    if (branch == null) {
      branch=readRebaseBranch("rebase-merge");
    }
    return branch;
  }
  return null;
}
