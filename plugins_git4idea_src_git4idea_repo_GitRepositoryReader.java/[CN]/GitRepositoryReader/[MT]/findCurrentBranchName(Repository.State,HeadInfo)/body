{
  String currentBranch=null;
  if (headInfo.isBranch) {
    currentBranch=headInfo.content;
  }
 else   if (state == Repository.State.REBASING) {
    currentBranch=readRebaseDirBranchFile(myGitFiles.getRebaseApplyDir());
    if (currentBranch == null) {
      currentBranch=readRebaseDirBranchFile(myGitFiles.getRebaseMergeDir());
    }
  }
  return addRefsHeadsPrefixIfNeeded(currentBranch);
}
