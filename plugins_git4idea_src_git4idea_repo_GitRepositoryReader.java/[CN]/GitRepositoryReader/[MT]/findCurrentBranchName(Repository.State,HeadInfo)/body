{
  String currentBranch=null;
  if (headInfo.isBranch) {
    currentBranch=headInfo.content;
  }
 else   if (state == Repository.State.REBASING) {
    currentBranch=readRebaseDirBranchFile("rebase-apply");
    if (currentBranch == null) {
      currentBranch=readRebaseDirBranchFile("rebase-merge");
    }
  }
  return addRefsHeadsPrefixIfNeeded(currentBranch);
}
