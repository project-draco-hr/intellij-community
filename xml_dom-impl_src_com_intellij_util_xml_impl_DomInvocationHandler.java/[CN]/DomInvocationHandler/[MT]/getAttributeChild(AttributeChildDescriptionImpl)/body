{
  final EvaluatedXmlName evaluatedXmlName=createEvaluatedXmlName(description.getXmlName());
  if (myStub != null && description.isStubbed()) {
    AttributeStub stub=myStub.getAttributeStub(description.getXmlName());
    StubParentStrategy strategy=StubParentStrategy.createAttributeStrategy(stub,myStub);
    return new AttributeChildInvocationHandler(evaluatedXmlName,description,myManager,strategy,stub);
  }
  final XmlTag tag=getXmlTag();
  if (tag != null) {
    String ns=evaluatedXmlName.getNamespace(tag,getFile());
    final XmlAttribute attribute=tag.getAttribute(description.getXmlName().getLocalName(),ns.equals(tag.getNamespace()) ? null : ns);
    if (attribute != null) {
      PsiUtilCore.ensureValid(attribute);
      AttributeChildInvocationHandler semElement=myManager.getSemService().getSemElement(DomManagerImpl.DOM_ATTRIBUTE_HANDLER_KEY,attribute);
      if (semElement == null) {
        final AttributeChildInvocationHandler take2=myManager.getSemService().getSemElement(DomManagerImpl.DOM_ATTRIBUTE_HANDLER_KEY,attribute);
        throw new AssertionError("No DOM at XML. Parent=" + tag + "; attribute="+ attribute+ "; second attempt="+ take2);
      }
      return semElement;
    }
  }
  return new AttributeChildInvocationHandler(evaluatedXmlName,description,myManager,new VirtualDomParentStrategy(this),null);
}
