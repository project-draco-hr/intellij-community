{
  Task.Backgroundable task=new Task.Backgroundable(myProject,myActionName,true,myConfiguration.getCommitOption()){
    public void run(    @NotNull final ProgressIndicator indicator){
      final ProjectLevelVcsManager vcsManager=ProjectLevelVcsManager.getInstance(myProject);
      vcsManager.startBackgroundVcsOperation();
      try {
        delegateCommitToVcsThread(processor);
      }
  finally {
        vcsManager.stopBackgroundVcsOperation();
      }
    }
    @Override public boolean shouldStartInBackground(){
      return !myForceSyncCommit && super.shouldStartInBackground();
    }
    @Override public boolean isConditionalModal(){
      return myForceSyncCommit;
    }
  }
;
  ProgressManager.getInstance().run(task);
  return doesntContainErrors(processor.getVcsExceptions());
}
