{
  final JPanel panel=new JPanel(new VerticalFlowLayout(FlowLayout.LEFT,true,true));
  panel.setBackground(UIUtil.isUnderDarcula() ? IpnbEditorUtil.getBackground() : Gray._247);
  if (mySource.startsWith("%"))   myEditor=IpnbEditorUtil.createPlainCodeEditor(myProject,mySource);
 else   myEditor=IpnbEditorUtil.createPythonCodeEditor(myProject,mySource);
  final JComponent component=myEditor.getComponent();
  final JComponent contentComponent=myEditor.getContentComponent();
  contentComponent.addKeyListener(new KeyAdapter(){
    @Override public void keyReleased(    KeyEvent e){
      final int keyCode=e.getKeyCode();
      if (keyCode == KeyEvent.VK_ENTER || keyCode == KeyEvent.VK_BACK_SPACE || keyCode == KeyEvent.VK_DELETE) {
        final int height=myEditor.getLineHeight() * Math.max(myEditor.getDocument().getLineCount(),1);
        component.setPreferredSize(new Dimension(IpnbEditorUtil.PANEL_WIDTH,height));
        panel.revalidate();
      }
    }
  }
);
  contentComponent.addMouseListener(new MouseAdapter(){
    @Override public void mouseClicked(    MouseEvent e){
      final Container ipnbFilePanel=myParent.getParent();
      if (ipnbFilePanel instanceof IpnbFilePanel) {
        ((IpnbFilePanel)ipnbFilePanel).setSelectedCell(myParent);
        myParent.switchToEditing();
      }
      UIUtil.requestFocus(contentComponent);
    }
  }
);
  panel.add(component);
  component.setPreferredSize(new Dimension(IpnbEditorUtil.PANEL_WIDTH,component.getPreferredSize().height));
  setBorder(BorderFactory.createLineBorder(JBColor.lightGray,1,true));
  return panel;
}
