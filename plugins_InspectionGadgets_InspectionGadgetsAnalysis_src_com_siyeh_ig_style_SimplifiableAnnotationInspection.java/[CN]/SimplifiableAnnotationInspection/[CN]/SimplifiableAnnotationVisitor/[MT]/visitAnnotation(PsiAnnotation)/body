{
  super.visitAnnotation(annotation);
  final PsiAnnotationParameterList parameterList=annotation.getParameterList();
  final PsiJavaCodeReferenceElement nameReferenceElement=annotation.getNameReferenceElement();
  if (nameReferenceElement == null) {
    return;
  }
  final PsiNameValuePair[] attributes=parameterList.getAttributes();
  final PsiElement[] annotationChildren=annotation.getChildren();
  if (annotationChildren.length >= 2 && annotationChildren[1] instanceof PsiWhiteSpace) {
    final String annotationName=nameReferenceElement.getText();
    final String replacementText;
    if (attributes.length > 0) {
      replacementText='@' + annotationName + parameterList.getText();
    }
 else {
      replacementText='@' + annotationName;
    }
    if (!containsError(annotation)) {
      registerError(annotation,replacementText);
    }
  }
 else   if (attributes.length == 0) {
    final PsiElement[] children=parameterList.getChildren();
    if (children.length <= 0) {
      return;
    }
    final String annotationName=nameReferenceElement.getText();
    if (!containsError(annotation)) {
      registerError(annotation,'@' + annotationName);
    }
  }
 else   if (attributes.length == 1) {
    final PsiNameValuePair attribute=attributes[0];
    @NonNls final String name=attribute.getName();
    final PsiAnnotationMemberValue attributeValue=attribute.getValue();
    if (attributeValue == null) {
      return;
    }
    final String attributeValueText;
    if (!"value".equals(name)) {
      if (!(attributeValue instanceof PsiArrayInitializerMemberValue)) {
        return;
      }
      final PsiArrayInitializerMemberValue arrayValue=(PsiArrayInitializerMemberValue)attributeValue;
      final PsiAnnotationMemberValue[] initializers=arrayValue.getInitializers();
      if (initializers.length != 1) {
        return;
      }
      if (name == null) {
        attributeValueText=initializers[0].getText();
      }
 else {
        attributeValueText=name + '=' + initializers[0].getText();
      }
    }
 else {
      attributeValueText=getAttributeValueText(attributeValue);
    }
    final String annotationName=nameReferenceElement.getText();
    final String replacementText='@' + annotationName + '('+ attributeValueText+ ')';
    if (!containsError(annotation)) {
      registerError(annotation,replacementText);
    }
  }
}
