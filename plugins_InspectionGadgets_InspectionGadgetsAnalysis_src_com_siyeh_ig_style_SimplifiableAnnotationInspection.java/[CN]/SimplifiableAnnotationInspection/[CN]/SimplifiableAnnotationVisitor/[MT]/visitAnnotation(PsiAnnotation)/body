{
  super.visitAnnotation(annotation);
  final PsiAnnotationParameterList parameterList=annotation.getParameterList();
  final PsiJavaCodeReferenceElement nameReferenceElement=annotation.getNameReferenceElement();
  if (nameReferenceElement == null) {
    return;
  }
  final PsiNameValuePair[] attributes=parameterList.getAttributes();
  final PsiElement[] annotationChildren=annotation.getChildren();
  if (annotationChildren.length >= 2 && annotationChildren[1] instanceof PsiWhiteSpace) {
    if (!containsError(annotation)) {
      registerError(annotation,annotation);
    }
  }
 else   if (attributes.length == 0) {
    final PsiElement[] children=parameterList.getChildren();
    if (children.length <= 0) {
      return;
    }
    if (!containsError(annotation)) {
      registerError(annotation,annotation);
    }
  }
 else   if (attributes.length == 1) {
    final PsiNameValuePair attribute=attributes[0];
    @NonNls final String name=attribute.getName();
    final PsiAnnotationMemberValue attributeValue=attribute.getValue();
    if (!PsiAnnotation.DEFAULT_REFERENCED_METHOD_NAME.equals(name)) {
      if (!(attributeValue instanceof PsiArrayInitializerMemberValue)) {
        return;
      }
      final PsiArrayInitializerMemberValue arrayValue=(PsiArrayInitializerMemberValue)attributeValue;
      final PsiAnnotationMemberValue[] initializers=arrayValue.getInitializers();
      if (initializers.length != 1) {
        return;
      }
    }
    if (!containsError(annotation)) {
      registerError(annotation,annotation);
    }
  }
 else   if (attributes.length > 1) {
    for (    PsiNameValuePair attribute : attributes) {
      final PsiAnnotationMemberValue value=attribute.getValue();
      if (!(value instanceof PsiArrayInitializerMemberValue)) {
        continue;
      }
      final PsiArrayInitializerMemberValue arrayInitializerMemberValue=(PsiArrayInitializerMemberValue)value;
      final PsiAnnotationMemberValue[] initializers=arrayInitializerMemberValue.getInitializers();
      if (initializers.length != 1) {
        continue;
      }
      if (!containsError(annotation)) {
        registerError(annotation,annotation);
      }
      return;
    }
  }
}
