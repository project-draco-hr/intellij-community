{
  if (myProblem) {
    return;
  }
  super.visitReferenceExpression(expression);
  if (expression.getQualifierExpression() != null) {
    return;
  }
  final PsiElement target=expression.resolve();
  if (!myVariable.equals(target)) {
    return;
  }
  PsiMethodCallExpression methodCallExpression=null;
  PsiElement parent=expression.getParent();
  PsiElement grandParent=parent.getParent();
  while (parent instanceof PsiReferenceExpression && grandParent instanceof PsiMethodCallExpression) {
    methodCallExpression=(PsiMethodCallExpression)grandParent;
    parent=methodCallExpression.getParent();
    grandParent=parent.getParent();
    if ("toString".equals(methodCallExpression.getMethodExpression().getReferenceName())) {
      break;
    }
  }
  if (buildStringExpression(methodCallExpression,myBuilder) == null) {
    myProblem=true;
  }
  myBuilder.append('\n');
  expressions.add(methodCallExpression);
}
