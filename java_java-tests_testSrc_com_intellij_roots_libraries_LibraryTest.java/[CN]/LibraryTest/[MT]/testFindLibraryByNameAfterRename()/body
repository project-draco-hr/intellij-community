{
  Library a=createLibrary("a",null,null);
  LibraryTable table=getLibraryTable();
  LibraryTable.ModifiableModel model=table.getModifiableModel();
  assertSame(a,table.getLibraryByName("a"));
  assertSame(a,model.getLibraryByName("a"));
  Library.ModifiableModel libraryModel=a.getModifiableModel();
  libraryModel.setName("b");
  commit(libraryModel);
  assertNull(table.getLibraryByName("a"));
  assertNull(model.getLibraryByName("a"));
  assertSame(a,table.getLibraryByName("b"));
  assertSame(a,model.getLibraryByName("b"));
  model.commit();
  assertSame(a,table.getLibraryByName("b"));
}
