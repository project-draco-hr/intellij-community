{
  LibraryTable table=getLibraryTable();
  Library library=new WriteAction<Library>(){
    @Override protected void run(    Result<Library> result) throws Throwable {
      Library res=table.createLibrary("native");
      result.setResult(res);
    }
  }
.execute().throwException().getResultObject();
  Library.ModifiableModel model=library.getModifiableModel();
  model.addRoot("file://native-lib-root",NativeLibraryOrderRootType.getInstance());
  commit(model);
  Element element=serialize(library);
  PlatformTestUtil.assertElementEquals("<root><library name=\"native\"><CLASSES /><JAVADOC />" + "<NATIVE><root url=\"file://native-lib-root\" /></NATIVE>" + "<SOURCES /></library></root>",element);
}
