{
  int offset=variable.getTextOffset();
  int line=document.getLineNumber(offset);
  MappingEntry sourceEntry=sourceMappings.get(line,offset - document.getLineStartOffset(line));
  String sourceEntryName=sourceEntry == null ? null : sourceEntry.getName();
  if (sourceEntry != null) {
    String generatedName=NAME_TRIMMER.trimFrom(getGeneratedName(generatedDocument,sourceMap,sourceEntry));
    if (!generatedName.isEmpty()) {
      String sourceName=sourceEntryName;
      if (sourceName == null) {
        sourceName=variable.getName();
        if (sourceName == null) {
          return;
        }
      }
      int i=generatedName.indexOf('=');
      if (i > 0) {
        generatedName=NAME_TRIMMER.trimFrom(generatedName.substring(0,i));
      }
      if (nameMappings == null) {
        nameMappings=new THashMap<String,String>();
      }
      nameMappings.put(generatedName,sourceName);
    }
  }
}
