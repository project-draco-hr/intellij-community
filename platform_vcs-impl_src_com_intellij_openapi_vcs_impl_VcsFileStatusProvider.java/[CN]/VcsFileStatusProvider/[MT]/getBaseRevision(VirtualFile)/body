{
  final Change change=ChangeListManager.getInstance(myProject).getChange(file);
  if (change != null) {
    final ContentRevision beforeRevision=change.getBeforeRevision();
    if (beforeRevision instanceof BinaryContentRevision)     return null;
    if (beforeRevision != null) {
      String content;
      try {
        content=beforeRevision.getContent();
      }
 catch (      VcsException ex) {
        content=null;
      }
      if (content == null) {
        myHaveEmptyContentRevisions=true;
        return null;
      }
      return Pair.create(beforeRevision.getRevisionNumber(),content);
    }
    return null;
  }
  return null;
}
