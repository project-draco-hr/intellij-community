{
  if (pattern.contains("/") || pattern.contains("\\")) {
    String path=FileUtil.toSystemIndependentName(ChooseByNamePopup.getTransformedPattern(pattern,myModel));
    VirtualFile vFile=LocalFileSystem.getInstance().findFileByPathIfCached(path);
    if (vFile != null) {
      ProjectFileIndex index=ProjectFileIndex.SERVICE.getInstance(myProject);
      if (index.isInContent(vFile) || index.isInLibraryClasses(vFile) || index.isInLibrarySource(vFile)) {
        PsiFileSystemItem fileOrDir=vFile.isDirectory() ? PsiManager.getInstance(myProject).findDirectory(vFile) : PsiManager.getInstance(myProject).findFile(vFile);
        if (fileOrDir != null && !consumer.process(fileOrDir)) {
          return false;
        }
      }
    }
  }
  if (pattern.startsWith("./") || pattern.startsWith(".\\")) {
    pattern=pattern.substring(1);
  }
  return super.filterElements(base,pattern,everywhere,indicator,consumer);
}
