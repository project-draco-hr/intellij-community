{
  super(true,treeUpdater);
  myServer=server;
  myNew=isNew;
  myServerName=myServer.getName();
  C configuration=server.getConfiguration();
  C innerConfiguration=XmlSerializerUtil.createCopy(configuration);
  myInnerServer=new RemoteServerImpl<>("<temp inner server>",server.getType(),innerConfiguration);
  myInnerApplied=false;
  myUncheckedApply=false;
  myConfigurable=createConfigurable(server,innerConfiguration);
  myConnected=false;
  myRunner=new DelayedRunner(myMainPanel){
    @Override protected boolean wasChanged(){
      if (!myConfigurable.canCheckConnection())       return false;
      boolean modified=myConfigurable.isModified();
      boolean result=modified || myUncheckedApply;
      if (result) {
        myUncheckedApply=false;
        setConnectionStatus(false,false,"");
        myConnectionTester=null;
        if (modified) {
          try {
            myConfigurable.apply();
            myInnerApplied=true;
          }
 catch (          ConfigurationException e) {
            setConnectionStatus(true,false,e.getMessage());
          }
        }
      }
      return result;
    }
    @Override protected void run(){
      setConnectionStatus(false,false,"Connecting...");
      myConnectionTester=new ConnectionTester();
      myConnectionTester.testConnection();
    }
  }
;
}
