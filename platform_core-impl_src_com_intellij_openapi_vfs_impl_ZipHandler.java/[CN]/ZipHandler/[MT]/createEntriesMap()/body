{
  FileAccessorCache.Handle<ZipFile> zipRef=getZipFileHandle();
  try {
    ZipFile zip=zipRef.get();
    Map<String,EntryInfo> map=new ZipEntryMap(zip.size());
    map.put("",createRootEntry());
    Enumeration<? extends ZipEntry> entries=zip.entries();
    while (entries.hasMoreElements()) {
      getOrCreate(entries.nextElement(),map,zip);
    }
    return map;
  }
  finally {
    zipRef.release();
  }
}
