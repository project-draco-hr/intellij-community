{
  if (isImport(node)) {
    return CodeFoldingSettings.getInstance().COLLAPSE_IMPORTS;
  }
  if (node.getElementType() == PyElementTypes.STRING_LITERAL_EXPRESSION) {
    if (getDocStringOwnerType(node) == PyElementTypes.FUNCTION_DECLARATION && CodeFoldingSettings.getInstance().COLLAPSE_METHODS) {
      return false;
    }
    if (getDocStringOwnerType(node) != null) {
      return CodeFoldingSettings.getInstance().COLLAPSE_DOC_COMMENTS;
    }
    return PythonFoldingSettings.getInstance().isCollapseLongStrings();
  }
  if (node.getElementType() == PyTokenTypes.END_OF_LINE_COMMENT) {
    return PythonFoldingSettings.getInstance().isCollapseSequentialComments();
  }
  if (node.getElementType() == PyElementTypes.STATEMENT_LIST && node.getTreeParent().getElementType() == PyElementTypes.FUNCTION_DECLARATION) {
    return CodeFoldingSettings.getInstance().COLLAPSE_METHODS;
  }
  if (FOLDABLE_COLLECTIONS_LITERALS.contains(node.getElementType())) {
    return PythonFoldingSettings.getInstance().isCollapseLongCollections();
  }
  return false;
}
