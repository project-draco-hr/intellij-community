{
  if (isCustomRegionElement(node.getPsi())) {
    return;
  }
  ASTNode curNode=node.getTreePrev();
  while (curNode != null) {
    if (curNode.getElementType() == PyTokenTypes.END_OF_LINE_COMMENT) {
      if (isCustomRegionElement(curNode.getPsi())) {
        break;
      }
      return;
    }
    curNode=curNode.getPsi() instanceof PsiWhiteSpace ? curNode.getTreePrev() : null;
  }
  curNode=node.getTreeNext();
  ASTNode lastCommentNode=node;
  while (curNode != null) {
    if (curNode.getElementType() == PyTokenTypes.END_OF_LINE_COMMENT) {
      if (isCustomRegionElement(curNode.getPsi())) {
        break;
      }
      lastCommentNode=curNode;
      curNode=curNode.getTreeNext();
      continue;
    }
    curNode=curNode.getPsi() instanceof PsiWhiteSpace ? curNode.getTreeNext() : null;
  }
  if (lastCommentNode != node) {
    descriptors.add(new FoldingDescriptor(node,TextRange.create(node.getStartOffset(),lastCommentNode.getTextRange().getEndOffset())));
  }
}
