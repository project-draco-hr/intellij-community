{
  final VcsLogObjectsFactory factory=ServiceManager.getService(project,VcsLogObjectsFactory.class);
  HgRevisionNumber revNumber=(HgRevisionNumber)record.getRevisionNumber();
  List<Hash> parents=ContainerUtil.map(revNumber.getParents(),new Function<HgRevisionNumber,Hash>(){
    @Override public Hash fun(    HgRevisionNumber parent){
      return factory.createHash(parent.getChangeset());
    }
  }
);
  final Collection<Change> changes=record.getChanges();
  return factory.createFullDetails(factory.createHash(revNumber.getChangeset()),parents,record.getCommitDate().getTime(),root,revNumber.getSubject(),revNumber.getAuthor(),revNumber.getEmail(),revNumber.getCommitMessage(),record.getCommitterName(),"",record.getCommitDate().getTime(),new ThrowableComputable<Collection<Change>,Exception>(){
    @Override public Collection<Change> compute() throws Exception {
      return changes;
    }
  }
);
}
