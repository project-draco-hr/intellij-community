{
  Map<String,List<String>> tree=ContainerUtil.newHashMap();
  for (  String id : idsInEpOrder) {
    ConfigurableWrapper wrapper=idToConfigurable.get(id);
    String parentId=wrapper.getParentId();
    if (parentId != null) {
      ConfigurableWrapper parent=idToConfigurable.get(parentId);
      if (parent == null) {
        LOG.warn("Can't find parent for " + parentId + " ("+ wrapper+ ")");
        continue;
      }
      List<String> children=tree.get(parentId);
      if (children == null) {
        children=ContainerUtil.newArrayListWithCapacity(5);
        tree.put(parentId,children);
      }
      children.add(id);
    }
  }
  return tree;
}
