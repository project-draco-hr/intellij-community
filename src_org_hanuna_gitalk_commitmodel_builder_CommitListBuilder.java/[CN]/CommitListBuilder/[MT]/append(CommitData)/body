{
  MutableCommit commit=getCommit(data.getHash());
  List<Commit> parents=new ArrayList<Commit>(data.getParentsHash().size());
  for (  Hash hash : data.getParentsHash()) {
    MutableCommit parent=getCommit(hash);
    parents.add(parent);
    parent.addChildren(commit);
  }
  removeCommit(data.getHash());
  commit.set(data,new SimpleReadOnlyList<Commit>(parents),commits.size());
  commits.add(commit);
}
