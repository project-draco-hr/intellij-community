{
  PsiFile file=descriptor.getPsiElement().getContainingFile();
  if (file == null)   return;
  PsiElement firstLine=file.getFirstChild();
  if (firstLine instanceof PsiComment && firstLine.getText().startsWith("#!")) {
    firstLine=firstLine.getNextSibling();
  }
  PsiComment encodingLine=PyElementGenerator.getInstance(project).createFromText(LanguageLevel.forElement(file),PsiComment.class,String.format(PyEncodingUtil.ENCODING_FORMAT_PATTERN[myEncodingFormatIndex],myDefaultEncoding));
  file.addBefore(encodingLine,firstLine);
}
