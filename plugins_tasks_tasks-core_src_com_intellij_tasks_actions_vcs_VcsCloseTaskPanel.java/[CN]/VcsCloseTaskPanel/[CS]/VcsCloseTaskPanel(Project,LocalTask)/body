{
  myProject=project;
  myTask=task;
  myTaskManager=(TaskManagerImpl)TaskManager.getManager(project);
  boolean hasChanges=!task.getChangeLists().isEmpty();
  myCommitChanges.setEnabled(hasChanges);
  myCommitChanges.setSelected(hasChanges && myTaskManager.getState().commitChanges);
  if (myTaskManager.getActiveVcs().getType() == VcsType.distributed) {
    boolean enabled=!task.getBranches(true).isEmpty() && !task.getBranches(false).isEmpty();
    myMergeBranches.setEnabled(enabled);
    myMergeBranches.setSelected(enabled && myTaskManager.getState().mergeBranch);
  }
 else {
    myMergeBranches.setVisible(false);
  }
}
