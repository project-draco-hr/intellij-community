{
  Document document=console.getCurrentEditor().getDocument();
  String text=document.getText();
  TextRange range=new TextRange(0,document.getTextLength());
  console.getCurrentEditor().getSelectionModel().setSelection(range.getStartOffset(),range.getEndOffset());
  if (addCurrentToHistory) {
    console.addCurrentToHistory(range,false,preserveMarkup);
  }
  if (clear) {
    console.setInputText("");
  }
  return text;
}
