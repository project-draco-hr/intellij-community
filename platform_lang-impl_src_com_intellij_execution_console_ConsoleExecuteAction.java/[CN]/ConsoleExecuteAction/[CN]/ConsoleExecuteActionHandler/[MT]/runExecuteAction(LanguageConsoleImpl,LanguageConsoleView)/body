{
  String text=prepareRunExecuteAction(console,myPreserveMarkup,myAddCurrentToHistory,true);
  ((UndoManagerImpl)UndoManager.getInstance(console.getProject())).invalidateActionsFor(DocumentReferenceManager.getInstance().create(console.getCurrentEditor().getDocument()));
  myConsoleHistoryModel.addToHistory(text);
  doExecute(text,console,consoleView);
}
