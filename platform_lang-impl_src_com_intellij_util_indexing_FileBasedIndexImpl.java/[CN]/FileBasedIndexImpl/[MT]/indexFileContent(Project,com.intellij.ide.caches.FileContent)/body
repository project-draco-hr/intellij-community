{
  VirtualFile file=content.getVirtualFile();
  try {
    if (!file.isValid() || isTooLarge(file)) {
      removeDataFromIndicesForFile(file);
    }
 else {
      doIndexFileContent(project,content);
    }
  }
  finally {
    IndexingStamp.flushCache(content.getVirtualFile());
  }
  myChangedFilesCollector.myFilesToUpdate.remove(file);
}
