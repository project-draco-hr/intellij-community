{
  cleanupProcessedFlag();
  boolean requiresRebuildWasSet=ourRebuildStatus.get(indexId).compareAndSet(OK,REQUIRES_REBUILD);
  if (requiresRebuildWasSet) {
    String message="Rebuild requested for index " + indexId;
    Application app=ApplicationManager.getApplication();
    if (app.isUnitTestMode() && app.isReadAccessAllowed() && !app.isDispatchThread()) {
      LOG.error(message,throwable);
    }
 else {
      LOG.info(message,throwable);
    }
  }
}
