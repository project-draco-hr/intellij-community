{
  final List<ID<?,?>> currentFileIndexedStates=IndexingStamp.getNontrivialFileIndexedStates(fileId);
  Collection<ID<?,?>> states=currentFileIndexedStates;
  Map<ID<?,?>,Pair<UpdatableIndex<?,?,FileContent>,InputFilter>> indices=getState().myIndices;
  for (  ID<?,?> currentFileIndexedState : currentFileIndexedStates) {
    if (!indices.containsKey(currentFileIndexedState)) {
      states=ContainerUtil.intersection(currentFileIndexedStates,indices.keySet());
      break;
    }
  }
  if (!states.isEmpty()) {
    final Collection<ID<?,?>> finalStates=states;
    ProgressManager.getInstance().executeNonCancelableSection(new Runnable(){
      @Override public void run(){
        removeFileDataFromIndices(finalStates,fileId);
      }
    }
);
  }
}
