{
  final Map<String,Boolean> result=new HashMap<>();
  if (sdk == null || StringUtil.isEmptyOrSpaces(sdk.getHomePath())) {
    LOG.info("Searching test runner in empty sdk");
    return result;
  }
  final PyPackageManager manager=PyPackageManager.getInstance(sdk);
  final boolean refreshed=PyPackageUtil.updatePackagesSynchronouslyWithGuard(manager,myIsUpdating);
  if (refreshed) {
    final List<PyPackage> packages=manager.getPackages();
    if (packages != null) {
      for (      String name : testPackageNames) {
        result.put(name,PyPackageUtil.findPackage(packages,name) != null);
      }
    }
  }
  return result;
}
