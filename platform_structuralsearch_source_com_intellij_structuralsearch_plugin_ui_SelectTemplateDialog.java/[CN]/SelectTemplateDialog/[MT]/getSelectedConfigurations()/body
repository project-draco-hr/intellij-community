{
  if (showHistory) {
    Object[] selectedValues=existingTemplatesComponent.getHistoryList().getSelectedValues();
    if (selectedValues == null) {
      return new Configuration[0];
    }
    Collection<Configuration> configurations=new ArrayList<>();
    for (    Object selectedValue : selectedValues) {
      if (selectedValue instanceof Configuration) {
        configurations.add((Configuration)selectedValue);
      }
    }
    return configurations.toArray(new Configuration[configurations.size()]);
  }
 else {
    TreePath[] paths=existingTemplatesComponent.getPatternTree().getSelectionModel().getSelectionPaths();
    if (paths == null) {
      return new Configuration[0];
    }
    Collection<Configuration> configurations=new ArrayList<>();
    for (    TreePath path : paths) {
      DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
      final Object userObject=node.getUserObject();
      if (userObject instanceof Configuration) {
        configurations.add((Configuration)userObject);
      }
    }
    return configurations.toArray(new Configuration[configurations.size()]);
  }
}
