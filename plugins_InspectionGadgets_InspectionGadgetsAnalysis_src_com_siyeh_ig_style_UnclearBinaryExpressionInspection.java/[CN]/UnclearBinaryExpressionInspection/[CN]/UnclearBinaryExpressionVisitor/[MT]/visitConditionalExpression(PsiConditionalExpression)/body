{
  super.visitConditionalExpression(expression);
  final PsiElement parent=expression.getParent();
  if (mightBeConfusingExpression(parent) || PsiUtilCore.hasErrorElementChild(expression)) {
    return;
  }
  final PsiExpression condition=expression.getCondition();
  final PsiExpression thenExpression=expression.getThenExpression();
  final PsiExpression elseExpression=expression.getElseExpression();
  if (!mightBeConfusingExpression(condition) && !mightBeConfusingExpression(thenExpression) && !mightBeConfusingExpression(elseExpression)) {
    return;
  }
  registerError(expression);
}
