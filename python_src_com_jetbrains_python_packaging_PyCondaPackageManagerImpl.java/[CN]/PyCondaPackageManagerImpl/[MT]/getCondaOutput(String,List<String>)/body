{
  final Sdk sdk=getSdk();
  final String condaExecutable=PyCondaPackageService.getCondaExecutable(sdk.getHomeDirectory());
  if (condaExecutable == null)   throw new PyExecutionException("Cannot find conda","Conda",Collections.<String>emptyList(),new ProcessOutput());
  final String path=getCondaDirectory();
  if (path == null)   throw new PyExecutionException("Empty conda name for " + sdk.getHomePath(),command,arguments);
  final ArrayList<String> parameters=Lists.newArrayList(condaExecutable,command,"-p",path);
  parameters.addAll(arguments);
  final GeneralCommandLine commandLine=new GeneralCommandLine(parameters);
  final CapturingProcessHandler handler=new CapturingProcessHandler(commandLine);
  final ProcessOutput result=handler.runProcess();
  final int exitCode=result.getExitCode();
  if (exitCode != 0) {
    final String message=StringUtil.isEmptyOrSpaces(result.getStdout()) && StringUtil.isEmptyOrSpaces(result.getStderr()) ? "Permission denied" : "Non-zero exit code";
    throw new PyExecutionException(message,"Conda",parameters,result);
  }
  return result;
}
