{
  final String[] lines=StringUtil.splitByLines(s);
  final List<PyPackage> packages=new ArrayList<>();
  for (  String line : lines) {
    if (line.startsWith("#"))     continue;
    final List<String> fields=StringUtil.split(line,"=");
    if (fields.size() < 3) {
      throw new PyExecutionException("Invalid conda output format","conda",Collections.<String>emptyList());
    }
    final String name=fields.get(0);
    final String version=fields.get(1);
    final List<PyRequirement> requirements=new ArrayList<>();
    if (fields.size() >= 4) {
      final String requiresLine=fields.get(3);
      final String requiresSpec=StringUtil.join(StringUtil.split(requiresLine,":"),"\n");
      requirements.addAll(PyRequirement.fromText(requiresSpec));
    }
    if (!"Python".equals(name)) {
      packages.add(new PyPackage(name,version,"",requirements));
    }
  }
  return packages;
}
