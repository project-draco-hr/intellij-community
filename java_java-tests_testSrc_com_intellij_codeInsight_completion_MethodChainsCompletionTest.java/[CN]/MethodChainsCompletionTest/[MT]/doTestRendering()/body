{
  final ClassFilesIndexFeaturesHolder indicesHolder=ClassFilesIndexFeaturesHolder.getInstance(getProject());
  PropertiesComponent.getInstance(getProject()).setValue(ChainCompletionMethodCallLookupElement.PROP_METHODS_CHAIN_COMPLETION_AUTO_COMPLETION,String.valueOf(true));
  indicesHolder.projectOpened();
  compileAndIndexData(TEST_INDEX_FILE_NAME);
  myFixture.configureByFiles(getBeforeCompletionFilePath());
  myFixture.complete(CompletionType.BASIC,MethodsChainsCompletionContributor.INVOCATIONS_THRESHOLD);
  PropertiesComponent.getInstance(getProject()).setValue(ChainCompletionMethodCallLookupElement.PROP_METHODS_CHAIN_COMPLETION_AUTO_COMPLETION,String.valueOf(false));
  myFixture.checkResultByFile(getAfterCompletionFilePath());
  indicesHolder.projectClosed();
}
