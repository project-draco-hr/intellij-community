{
  for (  TaskWindow w : task_windows) {
    if ((w.getLine() == line) && (w.getStart() > oldEndOffsetInLine)) {
      int distance=w.getStart() - oldEndOffsetInLine;
      boolean coveredByPrevTW=false;
      int prevIndex=w.getIndex() - 1;
      if (CCProjectService.indexIsValid(prevIndex,task_windows)) {
        TaskWindow prevTW=task_windows.get(prevIndex);
        if (prevTW.getLine() == line) {
          int prevLength=useLength ? prevTW.getLength() : prevTW.getReplacementLength();
          int endOffset=prevTW.getStart() + prevLength;
          if (endOffset >= newEndOffsetInLine) {
            coveredByPrevTW=true;
          }
        }
      }
      if (lineChange != 0 || newEndOffsetInLine <= w.getStart() || coveredByPrevTW) {
        w.setStart(distance + newEndOffsetInLine);
        w.setLine(line + lineChange);
      }
    }
  }
}
