{
  PsiElement psiElement=node.getPsi();
  if (psiElement != null && psiElement.isValid() && psiElement.getLanguage().is(HTMLLanguage.INSTANCE)) {
    CodeStyleSettings settings=CodeStyleSettingsManager.getSettings(psiElement.getProject());
    CodeStyleSettings.QuoteStyle quoteStyle=settings.HTML_QUOTE_STYLE;
    if (quoteStyle != CodeStyleSettings.QuoteStyle.None && settings.HTML_ENFORCE_QUOTES) {
      HtmlQuotesConverter converter=new HtmlQuotesConverter(quoteStyle,psiElement,range);
      Document document=converter.getDocument();
      if (document != null) {
        DocumentUtil.executeInBulk(document,true,converter);
      }
      return converter.getTextRange();
    }
  }
  return range;
}
