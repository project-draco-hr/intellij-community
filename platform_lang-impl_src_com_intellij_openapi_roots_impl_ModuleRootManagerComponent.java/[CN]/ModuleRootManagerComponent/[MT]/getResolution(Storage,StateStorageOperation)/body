{
  boolean isDefault=storage.storageClass() == StateStorage.class;
  boolean isEffectiveStorage=ClassPathStorageUtil.isDefaultStorage(getModule()) == isDefault;
  if (operation == StateStorageOperation.READ) {
    return isEffectiveStorage ? Resolution.DO : Resolution.SKIP;
  }
 else {
    return isEffectiveStorage ? Resolution.DO : (isDefault ? Resolution.CLEAR : Resolution.SKIP);
  }
}
