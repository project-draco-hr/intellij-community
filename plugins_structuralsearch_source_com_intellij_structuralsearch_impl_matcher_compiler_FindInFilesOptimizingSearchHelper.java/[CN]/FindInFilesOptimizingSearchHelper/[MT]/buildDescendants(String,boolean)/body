{
  if (!doOptimizing())   return Collections.emptyList();
  final PsiShortNamesCache cache=PsiShortNamesCache.getInstance(context.getProject());
  final SearchScope scope=context.getOptions().getScope();
  final PsiClass[] classes=cache.getClassesByName(className,(GlobalSearchScope)scope);
  final List<PsiClass> results=new ArrayList<PsiClass>();
  final PsiElementProcessor<PsiClass> processor=new PsiElementProcessor<PsiClass>(){
    public boolean execute(    @NotNull PsiClass element){
      results.add(element);
      return true;
    }
  }
;
  for (  PsiClass aClass : classes) {
    ClassInheritorsSearch.search(aClass,scope,true).forEach(new PsiElementProcessorAdapter<PsiClass>(processor));
  }
  if (includeSelf) {
    Collections.addAll(results,classes);
  }
  return results;
}
