{
  myHashMap=hashMap;
  myProject=project;
  myDetailsGetter=detailsGetter;
  myFatalErrorsConsumer=fatalErrorsConsumer;
  String logId=PersistentUtil.calcLogId(myProject,providers);
  myMessagesIndex=createIndex(EnumeratorStringDescriptor.INSTANCE,"messages",logId,0);
  VcsLogMessagesTrigramIndex trigramIndex;
  try {
    trigramIndex=new VcsLogMessagesTrigramIndex(logId,disposableParent);
  }
 catch (  IOException e) {
    myFatalErrorsConsumer.consume(e);
    trigramIndex=null;
  }
  myTrigramIndex=trigramIndex;
  Disposer.register(disposableParent,this);
}
