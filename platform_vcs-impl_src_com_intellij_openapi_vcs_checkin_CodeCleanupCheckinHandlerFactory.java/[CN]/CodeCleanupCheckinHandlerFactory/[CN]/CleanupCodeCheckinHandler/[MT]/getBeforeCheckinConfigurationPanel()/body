{
  final JCheckBox cleanupCodeCb=new JCheckBox("Cleanup code");
  return new RefreshableOnComponent(){
    public JComponent getComponent(){
      final JPanel cbPanel=new JPanel(new BorderLayout());
      cbPanel.add(cleanupCodeCb,BorderLayout.WEST);
      CheckinHandlerUtil.disableWhenDumb(myProject,cleanupCodeCb,"Code analysis is impossible until indices are up-to-date");
      return cbPanel;
    }
    public void refresh(){
    }
    public void saveState(){
      VcsConfiguration.getInstance(myProject).CHECK_CODE_CLEANUP_BEFORE_PROJECT_COMMIT=cleanupCodeCb.isSelected();
    }
    public void restoreState(){
      cleanupCodeCb.setSelected(VcsConfiguration.getInstance(myProject).CHECK_CODE_CLEANUP_BEFORE_PROJECT_COMMIT);
    }
  }
;
}
