{
  FileTypeManager fileTypeManager=FileTypeManager.getInstance();
  if (file.isDirectory() || file.getFileType() != StdFileTypes.JAVA || fileTypeManager.isFileIgnored(file)) {
    return false;
  }
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  return fileIndex.isUnderSourceRootOfType(file,JavaModuleSourceRootTypes.SOURCES) || fileIndex.isInLibrarySource(file);
}
