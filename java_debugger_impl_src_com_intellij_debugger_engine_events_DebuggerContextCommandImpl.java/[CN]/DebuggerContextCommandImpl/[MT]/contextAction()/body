{
  SuspendManager suspendManager=myDebuggerContext.getDebugProcess().getSuspendManager();
  boolean isSuspendedByContext;
  try {
    isSuspendedByContext=suspendManager.isSuspended(getThread());
  }
 catch (  ObjectCollectedException ignored) {
    notifyCancelled();
    return;
  }
  if (isSuspendedByContext) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Context thread " + getSuspendContext().getThread());
      LOG.debug("Debug thread" + getThread());
    }
    threadAction();
  }
 else {
    SuspendContextImpl suspendContextForThread=SuspendManagerUtil.findContextByThread(suspendManager,getThread());
    if (suspendContextForThread != null) {
      suspendContextForThread.postponeCommand(this);
    }
 else {
      notifyCancelled();
    }
  }
}
