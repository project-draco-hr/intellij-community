{
  String projectCharsetName=getSelectedCharsetName(mySelectedProjectCharset);
  Map<VirtualFile,Charset> result=myTreeView.getValues();
  EncodingProjectManagerImpl encodingProjectManager=((EncodingProjectManagerImpl)EncodingProjectManager.getInstance(myProject));
  encodingProjectManager.setMapping(result);
  encodingProjectManager.setDefaultCharsetName(projectCharsetName);
  encodingProjectManager.setDefaultCharsetForPropertiesFiles(null,mySelectedCharsetForPropertiesFiles.get());
  encodingProjectManager.setNative2AsciiForPropertiesFiles(null,myTransparentNativeToAsciiCheckBox.isSelected());
  Charset ideCharset=mySelectedIdeCharset.get();
  EncodingManager.getInstance().setDefaultCharsetName(ideCharset == null ? "" : ideCharset.name());
}
