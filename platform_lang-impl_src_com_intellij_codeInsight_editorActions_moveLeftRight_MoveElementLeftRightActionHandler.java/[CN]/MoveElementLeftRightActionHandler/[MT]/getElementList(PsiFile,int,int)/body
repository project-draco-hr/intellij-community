{
  PsiElement startElement=file.findElementAt(rangeStart);
  if (startElement == null)   return null;
  if (rangeEnd > rangeStart) {
    PsiElement endElement=file.findElementAt(rangeEnd - 1);
    if (endElement == null)     return null;
    PsiElement element=PsiTreeUtil.findCommonParent(startElement,endElement);
    return getElementList(element,rangeStart,rangeEnd);
  }
  PsiElement[] list=getElementList(startElement,rangeStart,rangeStart);
  if (list != null || rangeStart <= 0)   return list;
  startElement=file.findElementAt(rangeStart - 1);
  if (startElement == null)   return null;
  return getElementList(startElement,rangeStart,rangeStart);
}
