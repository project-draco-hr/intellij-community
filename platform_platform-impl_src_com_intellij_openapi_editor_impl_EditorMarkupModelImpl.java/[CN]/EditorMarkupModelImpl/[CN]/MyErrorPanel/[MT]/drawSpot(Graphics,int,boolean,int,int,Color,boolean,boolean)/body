{
  int x=isMirrored() ? 3 : 5;
  int paintWidth=width;
  boolean flatStyle=Registry.is("ide.new.markup.markers");
  if (thinErrorStripeMark) {
    paintWidth/=2;
    paintWidth+=flatStyle ? 0 : 1;
    x=isMirrored() ? width + 2 : 0;
  }
  if (color == null)   return;
  Color darker=ColorUtil.shift(color,0.75);
  if (flatStyle) {
    g.setColor(darker);
    g.fillRect(x,yStart,paintWidth,yEnd - yStart + 1);
    return;
  }
  g.setColor(color);
  g.fillRect(x + 1,yStart,paintWidth - 2,yEnd - yStart + 1);
  Color brighter=color.brighter();
  g.setColor(brighter);
  UIUtil.drawLine(g,x,yStart,x,yEnd);
  if (drawTopDecoration) {
    UIUtil.drawLine(g,x + 1,yStart,x + paintWidth - 2,yStart);
  }
  g.setColor(darker);
  if (drawBottomDecoration) {
    UIUtil.drawLine(g,x + 1,yEnd,x + paintWidth - 2,yEnd);
  }
  UIUtil.drawLine(g,x + paintWidth - 2,yStart,x + paintWidth - 2,yEnd);
}
