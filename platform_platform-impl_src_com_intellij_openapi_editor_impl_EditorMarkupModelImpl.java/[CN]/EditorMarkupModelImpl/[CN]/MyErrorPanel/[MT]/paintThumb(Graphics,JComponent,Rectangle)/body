{
  if (isMacOverlayScrollbar()) {
    if (!isMirrored()) {
      super.paintThumb(g,c,thumbBounds);
    }
 else {
      Graphics2D g2d=(Graphics2D)g;
      AffineTransform old=g2d.getTransform();
      AffineTransform tx=AffineTransform.getScaleInstance(-1,1);
      tx.translate(-c.getWidth(),0);
      g2d.transform(tx);
      super.paintThumb(g,c,thumbBounds);
      g2d.setTransform(old);
    }
  }
 else {
    if (Registry.is("ide.scroll.new.layout")) {
      Integer value=ReflectionUtil.getField(ButtonlessScrollBarUI.class,this,int.class,"myThumbFadeColorShift");
      if (value != null) {
        Rectangle bounds=new Rectangle(thumbBounds);
        Alignment alignment=Alignment.get(c);
        if (alignment == Alignment.LEFT || alignment == Alignment.RIGHT) {
          int offset=calc(c,bounds.width);
          if (offset > 0) {
            bounds.width-=offset;
            if (alignment == Alignment.RIGHT)             bounds.x+=offset;
          }
        }
 else {
          int offset=calc(c,bounds.height);
          if (offset > 0) {
            bounds.height-=offset;
            if (alignment == Alignment.BOTTOM)             bounds.y+=offset;
          }
        }
        float divider=isDark() ? 20 : 40;
        RegionPainter<Float> painter=isDark() ? JBScrollPane.THUMB_DARK_PAINTER : JBScrollPane.THUMB_PAINTER;
        painter.paint((Graphics2D)g,bounds.x,bounds.y,bounds.width,bounds.height,value / divider);
        return;
      }
    }
    int shift;
    if (Registry.is("editor.full.width.scrollbar")) {
      shift=isMirrored() ? -myMinMarkHeight + 1 : myMinMarkHeight;
    }
 else {
      int half=getThickness() / 2;
      shift=isMirrored() ? -half + 2 : half - 1;
    }
    g.translate(shift,0);
    super.paintThumb(g,c,thumbBounds);
    g.translate(-shift,0);
  }
}
