{
  Preconditions.checkArgument(popUpPosition == Position.above || popUpPosition == Position.below,"Only above or below is supported");
  for (  final WordWithPosition balloon : balloons) {
    if (balloon.getText().isEmpty()) {
      continue;
    }
    final int caretPosition=myMainTextField.getCaretPosition();
    if ((caretPosition >= balloon.getFrom() && caretPosition <= balloon.getTo())) {
      final int top=(popUpPosition == Position.above ? 0 : myMainTextField.getHeight() * 2);
      final RelativePoint point=new RelativePoint(myMainTextField,new Point(myMainTextField.getTextCaretPositionInPx(),top));
      final Balloon balloonToShow=JBPopupFactory.getInstance().createBalloonBuilder(new JLabel(balloon.getText())).setFillColor(messageType.getPopupBackground()).createBalloon();
      balloonToShow.setAnimationEnabled(false);
      myBalloonManager.registerBalloon(balloonToShow);
      balloonToShow.show(point,popUpPosition);
    }
  }
}
