{
  VirtualFile taskDir=file.getParent();
  VirtualFile file_windows=null;
  if (taskDir != null) {
    String name=file.getNameWithoutExtension() + "_windows";
    PrintWriter printWriter=null;
    try {
      file_windows=taskDir.createChildData(taskFile,name);
      printWriter=new PrintWriter(new FileOutputStream(file_windows.getPath()));
      for (      TaskWindow taskWindow : taskFile.getTaskWindows()) {
        int start=taskWindow.getRealStartOffset(document);
        String windowDescription=document.getText(new TextRange(start,start + taskWindow.getLength()));
        printWriter.println("#study_plugin_window = " + windowDescription);
      }
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
 finally {
      closeSilently(printWriter);
      StudyUtils.synchronize();
    }
  }
  return file_windows;
}
