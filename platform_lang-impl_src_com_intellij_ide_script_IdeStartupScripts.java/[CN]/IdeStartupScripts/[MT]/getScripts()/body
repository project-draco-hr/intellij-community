{
  List<VirtualFile> scripts=ContainerUtil.emptyList();
  VirtualFile root=getScriptsRootDirectory();
  if (root != null) {
    VfsUtil.markDirtyAndRefresh(false,true,true,root);
    scripts=VfsUtil.collectChildrenRecursively(root);
  }
  scripts=ContainerUtil.filter(scripts,new Condition<VirtualFile>(){
    private final ExtensionsRootType myExtensionsRootType=ExtensionsRootType.getInstance();
    @Override public boolean value(    VirtualFile file){
      return !file.isDirectory() && !myExtensionsRootType.isBackupFile(file);
    }
  }
);
  ContainerUtil.sort(scripts,new FileNameComparator());
  return scripts;
}
