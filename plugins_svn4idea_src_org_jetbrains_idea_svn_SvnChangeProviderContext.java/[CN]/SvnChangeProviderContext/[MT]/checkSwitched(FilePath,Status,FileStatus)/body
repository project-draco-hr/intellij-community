{
  if (status.isSwitched() || (convertedStatus == FileStatus.SWITCHED)) {
    final VirtualFile virtualFile=filePath.getVirtualFile();
    if (virtualFile == null)     return;
    final String switchUrl=status.getURL().toString();
    final VirtualFile vcsRoot=ProjectLevelVcsManager.getInstance(myVcs.getProject()).getVcsRootFor(virtualFile);
    if (vcsRoot != null) {
      String baseUrl=myBranchConfigurationManager.get(vcsRoot).getBaseName(switchUrl);
      myChangelistBuilder.processSwitchedFile(virtualFile,baseUrl == null ? switchUrl : baseUrl,true);
    }
  }
}
