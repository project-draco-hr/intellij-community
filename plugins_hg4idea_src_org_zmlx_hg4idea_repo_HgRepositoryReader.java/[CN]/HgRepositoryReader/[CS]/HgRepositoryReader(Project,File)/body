{
  myHgDir=hgDir;
  RepositoryUtil.assertFileExists(myHgDir,".hg directory not found in " + myHgDir);
  File branchesFile=new File(new File(myHgDir,"cache"),"branchheads-served");
  myBranchHeadsFile=branchesFile.exists() ? branchesFile : new File(new File(myHgDir,"cache"),"branchheads");
  myCurrentBranch=new File(myHgDir,"branch");
  myBookmarksFile=new File(myHgDir,"bookmarks");
  myCurrentBookmark=new File(myHgDir,"bookmarks.current");
  myLocalTagsFile=new File(myHgDir,"localtags");
  myTagsFile=new File(myHgDir.getParentFile(),".hgtags");
  myVcsObjectsFactory=ServiceManager.getService(project,VcsLogObjectsFactory.class);
}
