{
  initText("a<selection>bcdef<caret></selection>g\n" + "a<selection>bcdef<caret></selection>g");
  new WriteCommandAction.Simple(getProject()){
    @Override protected void run() throws Throwable {
      DocumentEx document=(DocumentEx)myEditor.getDocument();
      document.setInBulkUpdate(true);
      try {
        document.deleteString(1,6);
        document.deleteString(4,9);
      }
  finally {
        document.setInBulkUpdate(false);
      }
    }
  }
.execute().throwException();
  checkResultByText("a<caret>g\n" + "a<caret>g");
}
