{
  initText("a<caret>bc");
  new WriteCommandAction.Simple(getProject()){
    @Override protected void run() throws Throwable {
      DocumentEx document=(DocumentEx)myEditor.getDocument();
      document.setInBulkUpdate(true);
      document.insertString(0,"\n ");
      document.setInBulkUpdate(false);
    }
  }
.execute().throwException();
  checkResultByText("\n a<caret>bc");
}
