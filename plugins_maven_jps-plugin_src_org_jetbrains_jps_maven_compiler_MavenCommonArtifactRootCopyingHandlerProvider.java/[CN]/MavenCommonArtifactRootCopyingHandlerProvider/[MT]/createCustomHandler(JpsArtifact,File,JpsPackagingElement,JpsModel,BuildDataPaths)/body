{
  if (contextElement instanceof JpsModuleOutputPackagingElement)   return null;
  MavenProjectConfiguration projectConfiguration=JpsMavenExtensionService.getInstance().getMavenProjectConfiguration(buildDataPaths);
  if (projectConfiguration == null)   return null;
  if ("MANIFEST.MF".equals(root.getName())) {
    MavenModuleResourceConfiguration moduleResourceConfiguration=projectConfiguration.moduleConfigurations.get(getModuleName(artifact.getName()));
    if (moduleResourceConfiguration != null && moduleResourceConfiguration.manifest != null) {
      try {
        final String manifest=StringUtil.unescapeXml(moduleResourceConfiguration.manifest).replaceAll("\n\r|\n|\r","\r\n") + "\r\n\r\n";
        FileUtil.writeToFile(root,manifest);
      }
 catch (      IOException e) {
        LOG.debug(e);
      }
    }
  }
  return null;
}
