{
  if (!(what instanceof PsiElement))   return false;
  PsiElement p=(PsiElement)what;
  if (p instanceof PsiComment)   return false;
  int point=p.getTextOffset();
  PsiDocumentManager docMgr=PsiDocumentManager.getInstance(p.getProject());
  final PsiFile file=p.getContainingFile().getOriginalFile();
  Document doc=docMgr.getDocument(file);
  String indentCharacters=file.getViewProvider() instanceof InjectedFileViewProvider ? " \t>" : " \t";
  if (doc != null) {
    CharSequence chs=doc.getCharsSequence();
    char c;
    do {
      point-=1;
      if (point < 0)       return true;
      c=chs.charAt(point);
      if (c == '\n')       return true;
    }
 while (indentCharacters.indexOf(c) >= 0);
  }
  return false;
}
