{
  boolean clear=true;
  String javaHomeCopy=System.getProperty("user.home") + "/." + System.getProperty("idea.paths.selector")+ "/restart/jre";
  File javaCopy=SystemInfoRt.isWindows ? new File(javaHomeCopy + "/bin/java.exe") : new File(javaHomeCopy + "/bin/java");
  if (javaCopy != null && javaCopy.exists()) {
    if (checkBundledJava(javaCopy)) {
      javaHome=javaHomeCopy;
    }
  }
 else {
    clear=false;
  }
  if (javaHome != javaHomeCopy) {
    if (clear)     FileUtil.delete(new File(javaHomeCopy));
    System.out.println("Updater: java copy: " + javaHome + " to "+ javaHomeCopy);
    FileUtil.copyDir(new File(javaHome),new File(javaHomeCopy));
    javaHome=javaHomeCopy;
  }
  return javaHome;
}
