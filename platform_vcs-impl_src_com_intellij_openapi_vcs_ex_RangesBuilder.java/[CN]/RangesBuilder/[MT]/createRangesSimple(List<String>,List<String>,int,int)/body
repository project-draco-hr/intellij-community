{
  FairDiffIterable iterable=ByLine.compare(vcs,current,ComparisonPolicy.DEFAULT,DumbProgressIndicator.INSTANCE);
  List<Range> result=new ArrayList<Range>();
  for (  com.intellij.diff.util.Range range : iterable.iterateChanges()) {
    int vcsLine1=vcsShift + range.start1;
    int vcsLine2=vcsShift + range.end1;
    int currentLine1=currentShift + range.start2;
    int currentLine2=currentShift + range.end2;
    result.add(new Range(currentLine1,currentLine2,vcsLine1,vcsLine2));
  }
  return result;
}
