{
  String linkedPath=myContentDir.getPath() + "/linked";
  IoTestUtil.createSymLink(myCanonicalDir.getPath(),linkedPath,true);
  VirtualFile linkedVFile=VfsUtil.findFileByIoFile(new File(linkedPath,myCanonicalFile.getName()),true);
  assertEquals(linkedVFile,ProjectRootUtil.findSymlinkedFileInContent(getProject(),myCanonicalVFile));
  if (content) {
    PsiTestUtil.addContentRoot(getModule(),myCanonicalVFile.getParent());
  }
 else {
    PsiTestUtil.addLibrary(getModule(),myCanonicalVFile.getParent().getPath());
  }
  assertEquals(myCanonicalVFile,ProjectRootUtil.findSymlinkedFileInContent(getProject(),myCanonicalVFile));
}
