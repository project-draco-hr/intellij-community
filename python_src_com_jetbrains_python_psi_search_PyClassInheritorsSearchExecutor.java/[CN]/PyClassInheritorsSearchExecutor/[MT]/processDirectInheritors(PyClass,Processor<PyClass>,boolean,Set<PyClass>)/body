{
  if (processed.contains(superClass))   return true;
  processed.add(superClass);
  Project project=superClass.getProject();
  final Collection<PyClass> candidates=StubIndex.getInstance().get(PySuperClassIndex.KEY,superClass.getName(),project,ProjectScope.getAllScope(project));
  for (  PyClass candidate : candidates) {
    final PyClass[] classes=candidate.getSuperClasses();
    if (classes != null) {
      for (      PyClass superClassCandidate : classes) {
        if (superClassCandidate.isEquivalentTo(superClass)) {
          if (!consumer.process(candidate)) {
            return false;
          }
          if (checkDeep && !processDirectInheritors(candidate,consumer,checkDeep,processed))           return false;
          break;
        }
      }
    }
  }
  return true;
}
