{
  return new EditorWindow(this){
    @Override protected void onBeforeSetEditor(    VirtualFile file){
      List<VirtualFile> toMove=new ArrayList<VirtualFile>();
      for (      EditorWithProviderComposite composite : getEditorsComposites()) {
        if (composite.isModified()) {
          toMove.add(composite.getFile());
        }
      }
      PreviewManager previewManager=PreviewManager.SERVICE.getInstance(myProject);
      if (previewManager != null) {
        for (        VirtualFile virtualFile : toMove) {
          previewManager.moveToStandardPlace(getId(),virtualFile);
        }
      }
    }
  }
;
}
