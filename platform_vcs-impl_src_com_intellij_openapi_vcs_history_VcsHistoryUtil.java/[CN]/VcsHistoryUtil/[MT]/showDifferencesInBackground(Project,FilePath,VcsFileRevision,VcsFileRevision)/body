{
  new Task.Backgroundable(project,"Loading revisions to compare"){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      try {
        String leftTitle=older.getRevisionNumber().asString() + (older instanceof CurrentRevision ? " (" + VcsBundle.message("diff.title.local") + ")" : "");
        String rightTitle=newer.getRevisionNumber().asString() + (newer instanceof CurrentRevision ? " (" + VcsBundle.message("diff.title.local") + ")" : "");
        showDiff(project,filePath,older,newer,leftTitle,rightTitle);
      }
 catch (      final VcsException e) {
        LOG.info(e);
        WaitForProgressToShow.runOrInvokeLaterAboveProgress(new Runnable(){
          public void run(){
            Messages.showErrorDialog(VcsBundle.message("message.text.cannot.show.differences",e.getLocalizedMessage()),VcsBundle.message("message.title.show.differences"));
          }
        }
,null,project);
      }
catch (      IOException e) {
        LOG.info(e);
      }
    }
  }
.queue();
}
