{
  if (isCurrent(revision)) {
    VirtualFile file=filePath.getVirtualFile();
    if (file != null)     return DiffContentFactory.getInstance().create(project,file);
  }
  if (isEmpty(revision)) {
    return DiffContentFactory.getInstance().createEmpty();
  }
  if (filePath.getFileType().isBinary()) {
    return DiffContentFactory.getInstance().createBinary(project,filePath.getName(),filePath.getFileType(),content);
  }
  String text=CharsetToolkit.bytesToString(content,filePath.getCharset());
  return FileAwareDocumentContent.create(project,text,filePath);
}
