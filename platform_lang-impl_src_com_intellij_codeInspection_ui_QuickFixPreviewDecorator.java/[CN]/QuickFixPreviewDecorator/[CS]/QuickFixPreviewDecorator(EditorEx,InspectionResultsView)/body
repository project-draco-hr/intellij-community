{
  myFoldings=editor == null ? null : new ProblemPreviewEditorPresentation(editor,view.getProject());
  myView=view;
  myWrapper=view.getTree().getSelectedToolWrapper();
  LOG.assertTrue(myWrapper != null);
  setLayout(new FlowLayout(FlowLayout.LEFT,0,0));
  if (view.isUpdating() && !view.getTree().areDescriptorNodesSelected()) {
    setBorder(IdeBorderFactory.createEmptyBorder(16,9,13,0));
    AsyncProcessIcon waitingIcon=new AsyncProcessIcon("Inspection preview panel updating...");
    Disposer.register(this,waitingIcon);
    myWaitingLabel=getLabel(1);
    add(myWaitingLabel);
    add(waitingIcon);
  }
 else {
    CommonProblemDescriptor[] descriptors=myView.getTree().getSelectedDescriptors();
    setBorder(IdeBorderFactory.createEmptyBorder(2,8,0,0));
    QuickFixAction[] fixes=view.getProvider().getQuickFixes(myWrapper,view.getTree());
    fillPanel(fixes,descriptors);
  }
}
