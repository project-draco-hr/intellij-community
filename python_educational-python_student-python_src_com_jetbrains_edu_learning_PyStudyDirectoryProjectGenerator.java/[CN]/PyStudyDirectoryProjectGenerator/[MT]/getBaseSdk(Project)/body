{
  final Course course=myGenerator.getCourse(project);
  LanguageLevel baseLevel=LanguageLevel.PYTHON30;
  if (course != null) {
    final String version=course.getLanguageVersion();
    if (PyStudyLanguageManager.PYTHON_2.equals(version)) {
      baseLevel=LanguageLevel.PYTHON27;
    }
  }
  final PythonSdkFlavor flavor=PythonSdkFlavor.getApplicableFlavors(false).get(0);
  String baseSdk=null;
  final Collection<String> baseSdks=flavor.suggestHomePaths();
  for (  String sdk : baseSdks) {
    final String versionString=flavor.getVersionString(sdk);
    final String prefix=flavor.getName() + " ";
    if (versionString != null && versionString.startsWith(prefix)) {
      final LanguageLevel level=LanguageLevel.fromPythonVersion(versionString.substring(prefix.length()));
      if (level.isAtLeast(baseLevel)) {
        baseSdk=sdk;
        break;
      }
    }
  }
  return baseSdk != null ? baseSdk : baseSdks.iterator().next();
}
