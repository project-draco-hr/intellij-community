{
  PythonConsoleToolWindow toolWindow=PythonConsoleToolWindow.getInstance(project);
  if (toolWindow != null && toolWindow.getToolWindow().isVisible()) {
    RunContentDescriptor selectedContentDescriptor=toolWindow.getSelectedContentDescriptor();
    return selectedContentDescriptor != null ? Lists.newArrayList(selectedContentDescriptor) : Lists.<RunContentDescriptor>newArrayList();
  }
  Collection<RunContentDescriptor> descriptors=ExecutionHelper.findRunningConsole(project,new NotNullFunction<RunContentDescriptor,Boolean>(){
    @NotNull @Override public Boolean fun(    RunContentDescriptor dom){
      return dom.getExecutionConsole() instanceof PyCodeExecutor && isAlive(dom);
    }
  }
);
  if (descriptors.isEmpty() && toolWindow != null) {
    return toolWindow.getConsoleContentDescriptors();
  }
 else {
    return descriptors;
  }
}
