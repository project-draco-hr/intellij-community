{
  PythonConsoleRunnerFactory consoleRunnerFactory=PythonConsoleRunnerFactory.getInstance();
  PydevConsoleRunner runner=consoleRunnerFactory.createConsoleRunner(project,null);
  runner.addConsoleListener(new PydevConsoleRunner.ConsoleListener(){
    @Override public void handleConsoleInitialized(    LanguageConsoleView consoleView){
      if (consoleView instanceof PyCodeExecutor) {
        consumer.consume((PyCodeExecutor)consoleView);
      }
    }
  }
);
  runner.run();
}
