{
  Course studyCourse=StudyTaskManager.getInstance(myProject).getCourse();
  if (studyCourse == null) {
    Course oldCourse=CCProjectService.getInstance(myProject).getCourse();
    if (oldCourse == null) {
      return;
    }
    StudyTaskManager.getInstance(myProject).setCourse(oldCourse);
    CCProjectService.getInstance(myProject).setCourse(null);
    oldCourse.initCourse(true);
    oldCourse.setCourseMode(CCUtils.COURSE_MODE);
    File coursesDir=new File(PathManager.getConfigPath(),"courses");
    File courseDir=new File(coursesDir,oldCourse.getName() + "-" + myProject.getName());
    oldCourse.setCourseDirectory(courseDir.getPath());
    StudyProjectComponent.getInstance(myProject).registerStudyToolWindow(oldCourse);
    transformFiles(oldCourse,myProject);
  }
}
