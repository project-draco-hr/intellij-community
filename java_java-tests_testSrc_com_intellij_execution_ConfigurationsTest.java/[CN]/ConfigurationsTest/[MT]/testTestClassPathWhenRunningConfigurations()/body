{
  addModule("module4",false);
  Module module4=getModule4();
  assignJdk(module4);
  addSourcePath(module4,"testSrc",true);
  addSourcePath(module4,"src",false);
  String output=setCompilerOutput(module4,"classes",false);
  String testOuput=setCompilerOutput(module4,"testClasses",true);
  ApplicationConfiguration applicationConfiguration=createConfiguration(findClass(module4,"Application"));
  JavaParameters parameters=checkCanRun(applicationConfiguration);
  String classPath=parameters.getClassPath().getPathsString();
  checkDoesNotContain(classPath,testOuput);
  checkContains(classPath,output);
  JUnitConfiguration junitConfiguration=createJUnitConfiguration(findClass(module4,"TestApplication"),TestClassConfigurationProducer.class,new MapDataContext());
  parameters=checkCanRun(junitConfiguration);
  classPath=parameters.getClassPath().getPathsString();
  checkContains(classPath,testOuput);
  checkContains(classPath,output);
  applicationConfiguration.MAIN_CLASS_NAME=junitConfiguration.getPersistentData().getMainClassName();
  classPath=checkCanRun(applicationConfiguration).getClassPath().getPathsString();
  checkContains(classPath,testOuput);
  checkContains(classPath,output);
}
