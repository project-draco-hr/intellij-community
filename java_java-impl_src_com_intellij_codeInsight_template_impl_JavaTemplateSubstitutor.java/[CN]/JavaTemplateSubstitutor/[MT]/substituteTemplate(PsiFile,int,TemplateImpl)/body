{
  if (file.getLanguage().isKindOf(JavaLanguage.INSTANCE) && EXPR_LAMBDA_BODY.accepts(file.findElementAt(caretOffset))) {
    String text=template.getString();
    if (!text.contains("\n") && text.endsWith(";")) {
      TemplateImpl copy=template.copy();
      copy.setString(StringUtil.trimEnd(text,";"));
      return copy;
    }
  }
  return null;
}
