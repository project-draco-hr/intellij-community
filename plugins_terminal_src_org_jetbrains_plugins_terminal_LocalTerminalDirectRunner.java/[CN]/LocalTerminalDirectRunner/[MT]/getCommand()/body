{
  String[] command;
  String shellPath=TerminalOptionsProvider.getInstance().getShellPath();
  if (SystemInfo.isUnix) {
    File rcFile=findRCFile();
    String shellName=getShellName(shellPath);
    if (rcFile != null && (shellName.equals("bash") || shellName.equals("sh"))) {
      command=new String[]{shellPath,"--rcfile",rcFile.getAbsolutePath(),"-i"};
    }
 else     if (hasLoginArgument(shellName)) {
      command=new String[]{shellPath,"--login"};
    }
 else {
      command=shellPath.split(" ");
    }
  }
 else {
    command=new String[]{shellPath};
  }
  return command;
}
