{
  Set<ProgressIndicator> wrappedParents=null;
  for (ProgressIndicator parent=original; parent instanceof WrappedProgressIndicator; parent=((WrappedProgressIndicator)parent).getOriginalProgressIndicator()) {
    if (wrappedParents == null)     wrappedParents=new THashSet<ProgressIndicator>();
    if (!wrappedParents.add(parent)) {
      throw new IllegalArgumentException(parent + " wraps itself");
    }
  }
}
