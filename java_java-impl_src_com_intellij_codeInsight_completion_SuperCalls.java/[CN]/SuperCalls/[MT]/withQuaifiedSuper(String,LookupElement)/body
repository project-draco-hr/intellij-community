{
  return LookupElementDecorator.withInsertHandler(item,new InsertHandler<LookupElementDecorator<LookupElement>>(){
    @Override public void handleInsert(    InsertionContext context,    LookupElementDecorator<LookupElement> item){
      context.commitDocument();
      PsiJavaCodeReferenceElement ref=PsiTreeUtil.findElementOfClassAtOffset(context.getFile(),context.getStartOffset(),PsiJavaCodeReferenceElement.class,false);
      if (ref != null) {
        context.getDocument().insertString(ref.getTextRange().getStartOffset(),className + ".");
      }
      item.getDelegate().handleInsert(context);
    }
  }
);
}
