{
  Map<OrderRootType,Collection<File>> libraryFiles=prepareLibraryFiles(toImport);
  final String libraryName=toImport.getInternalName();
  Library library=modelsProvider.getLibraryByName(libraryName);
  if (library != null) {
    syncPaths(toImport,library,modelsProvider);
    return;
  }
  library=modelsProvider.createLibrary(libraryName);
  final Library.ModifiableModel libraryModel=modelsProvider.getModifiableLibraryModel(library);
  registerPaths(toImport.isUnresolved(),libraryFiles,libraryModel,libraryName);
}
