{
  final Collection<Library> toRemove=toRemoveComputable.compute();
  if (toRemove.isEmpty()) {
    return;
  }
  ExternalSystemApiUtil.executeProjectChangeAction(synchronous,new DisposeAwareProjectChange(project){
    @Override public void execute(){
      final LibraryTable libraryTable=platformFacade.getProjectLibraryTable(project);
      final LibraryTable.ModifiableModel model=libraryTable.getModifiableModel();
      try {
        for (        Library library : toRemove) {
          String libraryName=library.getName();
          if (libraryName != null) {
            Library libraryToRemove=model.getLibraryByName(libraryName);
            if (libraryToRemove != null) {
              model.removeLibrary(libraryToRemove);
            }
          }
        }
      }
  finally {
        model.commit();
      }
    }
  }
);
}
