{
  final PsiBuilder delegate=getDelegate();
  while (!delegate.eof() || myLexPosition < myShrunkSequence.size()) {
    if (myLexPosition >= myShrunkSequence.size()) {
      delegate.advanceLexer();
      continue;
    }
    if (delegate.eof()) {
      myLexPosition=myShrunkSequence.size();
      break;
    }
    final int delegatePosition=delegate.getCurrentOffset();
    final int myPosition=myShrunkSequence.get(myLexPosition).realStart;
    if (delegatePosition < myPosition) {
      delegate.advanceLexer();
    }
 else     if (delegatePosition > myPosition) {
      myLexPosition++;
    }
 else {
      break;
    }
  }
}
