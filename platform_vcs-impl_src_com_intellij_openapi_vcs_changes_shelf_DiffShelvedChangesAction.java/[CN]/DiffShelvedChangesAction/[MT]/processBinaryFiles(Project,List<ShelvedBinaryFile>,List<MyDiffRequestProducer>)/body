{
  final String base=project.getBaseDir().getPath();
  for (  final ShelvedBinaryFile shelvedChange : files) {
    diffRequestProducers.add(new MyDiffRequestProducer(shelvedChange){
      @NotNull @Override public DiffRequest process(      @NotNull UserDataHolder context,      @NotNull ProgressIndicator indicator) throws DiffRequestProducerException, ProcessCanceledException {
        Change change=shelvedChange.createChange(project);
        return PatchDiffRequestFactory.createDiffRequest(project,change,getName(),context,indicator);
      }
      @NotNull @Override public FilePath getFilePath(){
        final File file=new File(base,shelvedChange.AFTER_PATH == null ? shelvedChange.BEFORE_PATH : shelvedChange.AFTER_PATH);
        return VcsUtil.getFilePath(file);
      }
    }
);
  }
}
