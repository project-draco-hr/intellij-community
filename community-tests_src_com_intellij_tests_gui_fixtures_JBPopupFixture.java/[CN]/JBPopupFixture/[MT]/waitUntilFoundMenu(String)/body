{
  return waitUntilFound(robot(),new GenericTypeMatcher<JBPopupMenu>(JBPopupMenu.class){
    @Override protected boolean isMatching(    @Nonnull JBPopupMenu menu){
      boolean found=false;
      for (      MenuElement menuElement : menu.getSubElements()) {
        if (menuElement instanceof ActionMenu) {
          if (((ActionMenu)menuElement).getText().toLowerCase().equals(actionName.toLowerCase())) {
            found=true;
          }
        }
 else         if (menuElement instanceof ActionMenuItem) {
          if (((ActionMenuItem)menuElement).getText().toLowerCase().equals(actionName.toLowerCase())) {
            found=true;
          }
        }
      }
      return found;
    }
  }
);
}
