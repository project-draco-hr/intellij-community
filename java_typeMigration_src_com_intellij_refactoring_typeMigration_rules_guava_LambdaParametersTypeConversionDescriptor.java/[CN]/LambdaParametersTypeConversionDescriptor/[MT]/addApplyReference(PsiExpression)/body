{
  String samMethodName=null;
  PsiType type=expression.getType();
  if (type instanceof PsiClassType) {
    PsiClass resolvedClass=((PsiClassType)type).resolve();
    if (resolvedClass != null) {
      final String qName=resolvedClass.getQualifiedName();
      if (GuavaSupplierConversionRule.GUAVA_SUPPLIER.equals(qName)) {
        samMethodName="get";
      }
 else       if (GuavaFunctionConversionRule.GUAVA_FUNCTION.equals(qName)) {
        samMethodName="apply";
      }
 else       if (GuavaPredicateConversionRule.GUAVA_PREDICATE.equals(qName)) {
        samMethodName="test";
      }
    }
    LOG.assertTrue(samMethodName != null);
  }
  return (PsiExpression)expression.replace(JavaPsiFacade.getElementFactory(expression.getProject()).createExpressionFromText(expression.getText() + "::" + samMethodName,null));
}
