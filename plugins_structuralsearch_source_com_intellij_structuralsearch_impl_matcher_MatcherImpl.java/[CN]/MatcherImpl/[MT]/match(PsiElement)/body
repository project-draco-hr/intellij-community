{
  MatchingStrategy strategy=matchContext.getPattern().getStrategy();
  if (strategy.continueMatching(element)) {
    visitor.matchContext(new ArrayBackedNodeIterator(new PsiElement[]{element}));
    return;
  }
  for (PsiElement el=element.getFirstChild(); el != null; el=el.getNextSibling()) {
    match(el);
  }
  if (element instanceof PsiLanguageInjectionHost) {
    InjectedLanguageUtil.enumerate(element,new PsiLanguageInjectionHost.InjectedPsiVisitor(){
      @Override public void visit(      @NotNull PsiFile injectedPsi,      @NotNull List<PsiLanguageInjectionHost.Shred> places){
        match(injectedPsi);
      }
    }
);
  }
}
