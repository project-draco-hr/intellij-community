{
  double max_radius=7;
  radius=Math.min(max_radius,Math.max(0,radius));
  double inset=max_radius - radius;
  double indent=inner ? 0.5 : 0;
  return new RoundRectangle2D.Double(r.x + inset + indent,r.y + inset + indent,r.width - 2 * inset - indent,r.height - 2 * inset - indent,2 * radius,2 * radius);
}
