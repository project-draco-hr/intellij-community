{
  g.setColor(c.getBackground());
  final boolean noBorder=c.getClientProperty("JTextField.Search.noBorderRing") == Boolean.TRUE;
  int radius=r.height - 1;
  g.fillRoundRect(r.x,r.y + 1,r.width,r.height - (noBorder ? 2 : 1),radius,radius);
  g.setColor(c.isEnabled() ? Gray._100 : Gray._83);
  if (!noBorder) {
    if (c.hasFocus()) {
      DarculaUIUtil.paintSearchFocusRing(g,r);
    }
 else {
      g.drawRoundRect(r.x,r.y,r.width,r.height - 1,radius,radius);
    }
  }
  Point p=getSearchIconCoord();
  Icon searchIcon=myTextField.getClientProperty("JTextField.Search.FindPopup") instanceof JPopupMenu ? UIManager.getIcon("TextField.darcula.searchWithHistory.icon") : UIManager.getIcon("TextField.darcula.search.icon");
  if (searchIcon == null) {
    searchIcon=IconLoader.findIcon("/com/intellij/ide/ui/laf/icons/search.png",DarculaTextFieldUI.class,true);
  }
  searchIcon.paintIcon(null,g,p.x,p.y);
  if (hasText()) {
    p=getClearIconCoord();
    Icon clearIcon=UIManager.getIcon("TextField.darcula.clear.icon");
    if (clearIcon == null) {
      clearIcon=IconLoader.findIcon("/com/intellij/ide/ui/laf/icons/clear.png",DarculaTextFieldUI.class,true);
    }
    clearIcon.paintIcon(null,g,p.x,p.y);
  }
}
