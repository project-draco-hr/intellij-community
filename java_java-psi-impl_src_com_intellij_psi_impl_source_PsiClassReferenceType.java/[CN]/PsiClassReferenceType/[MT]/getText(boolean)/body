{
  if (myReference instanceof PsiAnnotatedJavaCodeReferenceElement) {
    PsiAnnotatedJavaCodeReferenceElement ref=(PsiAnnotatedJavaCodeReferenceElement)myReference;
    PsiAnnotation[] annotations=annotated ? getAnnotations() : PsiAnnotation.EMPTY_ARRAY;
    return ref.getCanonicalText(annotated,annotations.length == 0 ? null : annotations);
  }
  return myReference.getCanonicalText();
}
