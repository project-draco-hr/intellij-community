{
  if (myReference instanceof PsiJavaCodeReferenceElementImpl) {
    PsiAnnotation[] annotations=annotated ? getAnnotations() : PsiAnnotation.EMPTY_ARRAY;
    PsiJavaCodeReferenceElementImpl impl=(PsiJavaCodeReferenceElementImpl)myReference;
    return impl.getCanonicalText(annotated,annotations.length == 0 ? null : annotations,impl.getContainingFile());
  }
  return myReference.getCanonicalText();
}
