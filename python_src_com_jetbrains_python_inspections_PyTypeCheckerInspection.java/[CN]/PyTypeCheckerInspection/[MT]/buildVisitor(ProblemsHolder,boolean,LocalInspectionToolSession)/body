{
  if (LOG.isDebugEnabled()) {
    session.putUserData(TIME_KEY,System.nanoTime());
  }
  return new PyInspectionVisitor(holder){
    @Override public void visitPyCallExpression(    PyCallExpression node){
      if (CythonLanguageDialect._isDisabledFor(node)) {
        return;
      }
      final PyArgumentList args=node.getArgumentList();
      if (args != null) {
        final CallArgumentsMapping res=args.analyzeCall(resolveWithoutImplicits());
        final Map<PyExpression,PyNamedParameter> mapped=res.getPlainMappedParams();
        for (        Map.Entry<PyExpression,PyNamedParameter> entry : mapped.entrySet()) {
          final PyNamedParameter p=entry.getValue();
          if (p.isPositionalContainer() || p.isKeywordContainer()) {
            continue;
          }
          final PyType argType=entry.getKey().getType(myTypeEvalContext);
          final PyType paramType=p.getType(myTypeEvalContext);
          checkTypes(paramType,argType,entry.getKey(),myTypeEvalContext);
        }
      }
    }
    @Override public void visitPyBinaryExpression(    PyBinaryExpression node){
      if (CythonLanguageDialect._isDisabledFor(node)) {
        return;
      }
      final PsiReference ref=node.getReference(PyResolveContext.noImplicits().withTypeEvalContext(myTypeEvalContext));
      if (ref != null) {
        final PsiElement resolved=ref.resolve();
        if (resolved instanceof PyFunction) {
          final PyFunction fun=(PyFunction)resolved;
          final PyExpression arg=PyNames.isRightOperatorName(fun.getName()) ? node.getLeftExpression() : node.getRightExpression();
          checkSingleArgumentFunction(fun,arg);
        }
      }
    }
    @Override public void visitPySubscriptionExpression(    PySubscriptionExpression node){
      if (CythonLanguageDialect._isDisabledFor(node)) {
        return;
      }
      final PsiReference ref=node.getReference(PyResolveContext.noImplicits().withTypeEvalContext(myTypeEvalContext));
      if (ref != null) {
        final PsiElement resolved=ref.resolve();
        if (resolved instanceof PyFunction) {
          checkSingleArgumentFunction((PyFunction)resolved,node.getIndexExpression());
        }
      }
    }
    private void checkSingleArgumentFunction(    @NotNull PyFunction fun,    @Nullable PyExpression argument){
      if (argument != null) {
        final PyParameter[] parameters=fun.getParameterList().getParameters();
        if (parameters.length == 2) {
          final PyNamedParameter p=parameters[1].getAsNamed();
          if (p != null) {
            final PyType argType=argument.getType(myTypeEvalContext);
            final PyType paramType=p.getType(myTypeEvalContext);
            checkTypes(paramType,argType,argument,myTypeEvalContext);
          }
        }
      }
    }
    private void checkTypes(    PyType superType,    PyType subType,    PsiElement node,    TypeEvalContext context){
      if (subType != null && superType != null) {
        if (!PyTypeChecker.match(superType,subType,context)) {
          registerProblem(node,String.format("Expected type '%s', got '%s' instead",PythonDocumentationProvider.getTypeName(superType,context),PythonDocumentationProvider.getTypeName(subType,myTypeEvalContext)));
        }
      }
    }
  }
;
}
