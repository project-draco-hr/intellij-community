{
  runWhenFullyOpen(new Runnable(){
    @Override public void run(){
      myResolvingProcessor.scheduleTask(new MavenProjectsProcessorTask(){
        @Override public void perform(        Project project,        MavenEmbeddersManager embeddersManager,        MavenConsole console,        MavenProgressIndicator indicator) throws MavenProcessCanceledException {
          indicator.setText("Evaluating effective POM");
          myProjectsTree.executeWithEmbedder(mavenProject,getEmbeddersManager(),MavenEmbeddersManager.FOR_DEPENDENCIES_RESOLVE,console,indicator,new MavenProjectsTree.EmbedderTask(){
            @Override public void run(            MavenEmbedderWrapper embedder) throws MavenProcessCanceledException {
              try {
                MavenExplicitProfiles profiles=mavenProject.getActivatedProfilesIds();
                String res=embedder.evaluateEffectivePom(mavenProject.getFile(),profiles.getEnabledProfiles(),profiles.getDisabledProfiles());
                consumer.consume(res);
              }
 catch (              UnsupportedOperationException e) {
                consumer.consume(null);
              }
            }
          }
);
        }
      }
);
    }
  }
);
}
