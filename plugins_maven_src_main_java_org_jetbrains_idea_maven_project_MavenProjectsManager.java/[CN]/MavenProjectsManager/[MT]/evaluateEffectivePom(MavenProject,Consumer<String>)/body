{
  runWhenFullyOpen(new Runnable(){
    @Override public void run(){
      myResolvingProcessor.scheduleTask(new MavenProjectsProcessorTask(){
        @Override public void perform(        Project project,        MavenEmbeddersManager embeddersManager,        MavenConsole console,        MavenProgressIndicator indicator) throws MavenProcessCanceledException {
          indicator.setText("Evaluating effective POM");
          myProjectsTree.executeWithEmbedder(mavenProject,getEmbeddersManager(),MavenEmbeddersManager.FOR_DEPENDENCIES_RESOLVE,console,indicator,new MavenProjectsTree.EmbedderTask(){
            @Override public void run(            MavenEmbedderWrapper embedder) throws MavenProcessCanceledException {
              String res=embedder.evaluateEffectivePom(mavenProject.getFile(),mavenProject.getActivatedProfilesIds());
              consumer.consume(res);
            }
          }
);
        }
      }
);
    }
  }
);
}
