{
  initLock.lock();
  try {
    if (!isInitialized.getAndSet(false))     return;
    Disposer.dispose(myImportingQueue);
    myWatcher.stop();
    myReadingProcessor.stop();
    myResolvingProcessor.stop();
    myPluginsResolvingProcessor.stop();
    myFoldersResolvingProcessor.stop();
    myArtifactsDownloadingProcessor.stop();
    myPostProcessor.stop();
    mySaveQueue.flush();
    if (isUnitTestMode()) {
      FileUtil.delete(getProjectsTreesDir());
    }
  }
  finally {
    initLock.unlock();
  }
}
