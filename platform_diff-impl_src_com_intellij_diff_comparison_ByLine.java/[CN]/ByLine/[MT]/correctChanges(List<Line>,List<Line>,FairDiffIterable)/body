{
  ChangeBuilder builder=new ChangeBuilder(lines1.size(),lines2.size());
  for (  Range ch : changes.iterateUnchanged()) {
    int count=ch.end1 - ch.start1;
    for (int i=0; i < count; i++) {
      Line line1=lines1.get(ch.start1 + i);
      Line line2=lines2.get(ch.start2 + i);
      if (line1.equals(line2))       builder.markEqual(ch.start1 + i,ch.start2 + i);
    }
  }
  return fair(builder.finish());
}
