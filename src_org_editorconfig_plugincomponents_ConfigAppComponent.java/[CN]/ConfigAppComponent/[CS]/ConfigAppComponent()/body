{
  ComponentManagerImpl componentManager=(ComponentManagerImpl)ApplicationManager.getApplication();
  MutablePicoContainer container=(MutablePicoContainer)ApplicationManager.getApplication().getPicoContainer();
  String fileDocumentManagerKey=FileDocumentManager.class.getName();
  container.unregisterComponent(fileDocumentManagerKey);
  componentManager.registerComponentImplementation(FileDocumentManager.class,ReplacementFileDocumentManager.class);
  String editorSettingsExternalizableKey=EditorSettingsExternalizable.class.getName();
  container.unregisterComponent(editorSettingsExternalizableKey);
  componentManager.registerComponentImplementation(EditorSettingsExternalizable.class,ReplacementEditorSettingsExternalizable.class);
  MessageBus bus=ApplicationManager.getApplication().getMessageBus();
  EditorSettingsManager editorSettingsManager=new EditorSettingsManager();
  bus.connect().subscribe(AppTopics.FILE_DOCUMENT_SYNC,editorSettingsManager);
  bus.connect().subscribe(DoneSavingTopic.DONE_SAVING,editorSettingsManager);
  EditorSettingsExternalizable editorSettings=EditorSettingsExternalizable.getInstance();
  editorSettings.addPropertyChangeListener(editorSettingsManager);
}
