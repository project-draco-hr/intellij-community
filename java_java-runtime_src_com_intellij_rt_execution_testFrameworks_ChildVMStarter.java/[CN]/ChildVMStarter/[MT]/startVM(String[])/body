{
  final String testOutputPath=args[0];
  final File file=new File(testOutputPath);
  if (!file.exists()) {
    if (!file.createNewFile())     return;
  }
  final FileOutputStream stream=new FileOutputStream(testOutputPath);
  PrintStream oldOut=System.out;
  PrintStream oldErr=System.err;
  try {
    final PrintStream out=new PrintStream(new ForkedVMWrapper(stream,false));
    final PrintStream err=new PrintStream(new ForkedVMWrapper(stream,true));
    System.setOut(out);
    System.setErr(err);
    configureFrameworkAndRun(args,out,err);
  }
  finally {
    System.setOut(oldOut);
    System.setErr(oldErr);
    stream.close();
  }
}
