{
  int idx=0;
  String currentClass;
  String currentParent;
  while (idx < myCurrentSuites.size() && idx < parentsHierarchy.size()) {
    currentClass=myCurrentSuites.get(idx);
    currentParent=parentsHierarchy.get(parentsHierarchy.size() - 1 - idx);
    if (!currentClass.equals(getShortName(currentParent)))     break;
    idx++;
  }
  for (int i=myCurrentSuites.size() - 1; i >= idx; i--) {
    currentClass=myCurrentSuites.remove(i);
    myPrintStream.println("##teamcity[testSuiteFinished name=\'" + escapeName(currentClass) + "\']");
  }
  for (int i=idx; i < parentsHierarchy.size(); i++) {
    String fqName=parentsHierarchy.get(parentsHierarchy.size() - 1 - i);
    String currentClassName=getShortName(fqName);
    myPrintStream.print("\n##teamcity[testSuiteStarted name =\'" + escapeName(currentClassName));
    if (provideLocation) {
      myPrintStream.print("\' locationHint = \'java:suite://" + fqName);
    }
    myPrintStream.println("\']");
    myCurrentSuites.add(currentClassName);
  }
  return false;
}
