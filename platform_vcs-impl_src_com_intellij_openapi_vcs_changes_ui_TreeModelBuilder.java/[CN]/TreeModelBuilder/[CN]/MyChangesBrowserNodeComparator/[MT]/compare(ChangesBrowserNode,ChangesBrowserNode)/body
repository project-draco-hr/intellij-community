{
  int sortWeightDiff=Comparing.compare(node1.getSortWeight(),node2.getSortWeight());
  if (sortWeightDiff != 0)   return sortWeightDiff;
  if (node1 instanceof Comparable && node1.getClass().equals(node2.getClass())) {
    return ((Comparable)node1).compareTo(node2);
  }
  return node1.compareUserObjects(node2.getUserObject());
}
