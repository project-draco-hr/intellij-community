{
  myApplication=application;
  application.invokeLater(new Runnable(){
    @Override public void run(){
      application.addApplicationListener(new ApplicationAdapter(){
        private int runningWriteActions;
        @Override public void beforeWriteActionStart(        Object action){
          if (runningWriteActions++ == 0) {
            disable("Write action started: " + action);
          }
        }
        @Override public void writeActionFinished(        Object action){
          if (--runningWriteActions == 0) {
            enable("Write action finished: " + action);
          }
        }
      }
,DocumentCommitThread.this);
      enable("Listener installed, started");
    }
  }
);
  log("Starting thread",null,false);
  new Thread(this,"Document commit thread").start();
}
