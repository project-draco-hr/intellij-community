{
  if (element instanceof PsiFile) {
    VirtualFile virtualFile=((PsiFile)element).getVirtualFile();
    if (virtualFile != null && Comparing.equal(new File(virtualFile.getPath()).getAbsolutePath(),new File(myScriptName).getAbsolutePath())) {
      return new RefactoringElementAdapter(){
        @Override public void elementRenamedOrMoved(        @NotNull PsiElement newElement){
          VirtualFile virtualFile=((PsiFile)newElement).getVirtualFile();
          if (virtualFile != null) {
            updateScriptAndName(virtualFile.getPath());
          }
        }
        @Override public void undoElementMovedOrRenamed(        @NotNull PsiElement newElement,        @NotNull String oldQualifiedName){
          updateScriptAndName(oldQualifiedName);
        }
        private void updateScriptAndName(        String path){
          boolean rename=getName().equals(suggestedName());
          myScriptName=FileUtil.toSystemDependentName(path);
          if (rename) {
            setGeneratedName();
          }
        }
      }
;
    }
  }
  return null;
}
