{
  if (!StringUtil.isEmpty(dependency.getVersion().getStringValue()))   return;
  Project project=context.getProject();
  if (!isInsideManagedDependency(dependency)) {
    MavenDomProjectModel model=DomUtil.<MavenDomProjectModel>getFileElement(dependency).getRootElement();
    if (findManagedDependency(model,project,groupId,artifactId) != null) {
      return;
    }
  }
  MavenProjectIndicesManager manager=MavenProjectIndicesManager.getInstance(project);
  Set<String> versions=manager.getVersions(groupId,artifactId);
  if (versions.size() == 1) {
    dependency.getVersion().setStringValue(ContainerUtil.getFirstItem(versions));
    return;
  }
  dependency.getVersion().setStringValue("");
  int versionPosition=dependency.getVersion().getXmlTag().getValue().getTextRange().getStartOffset();
  context.getEditor().getCaretModel().moveToOffset(versionPosition);
  if (versions.size() > 0) {
    invokeCompletion(context,CompletionType.BASIC);
  }
}
