{
  if (isComparisonExpression(expression)) {
    final PyExpression left=expression.getLeftExpression();
    final PyExpression right=expression.getRightExpression();
    final String newOperator=invertOperator(assertNotNull(expression.getPsiOperator()));
    final PyExpression newRight=isComparisonExpression(left) ? invertExpression((PyBinaryExpression)left,elementGenerator) : left;
    return elementGenerator.createBinaryExpression(newOperator,right,newRight);
  }
 else {
    return expression;
  }
}
