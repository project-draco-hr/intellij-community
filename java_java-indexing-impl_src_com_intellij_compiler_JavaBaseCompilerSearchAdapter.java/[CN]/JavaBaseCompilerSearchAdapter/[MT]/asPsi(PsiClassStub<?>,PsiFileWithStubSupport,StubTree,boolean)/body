{
  if (foreign) {
    final PsiClass cachedPsi=((PsiClassStubImpl<?>)stub).getCachedPsi();
    if (cachedPsi != null)     return cachedPsi;
    final ASTNode ast=file.findTreeForStub(tree,stub);
    return ast != null ? (PsiClass)ast.getPsi() : null;
  }
  return stub.getPsi();
}
