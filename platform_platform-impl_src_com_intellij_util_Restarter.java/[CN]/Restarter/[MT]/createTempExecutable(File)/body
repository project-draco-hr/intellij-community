{
  File tempDir=new File(PathManager.getSystemPath(),"restart");
  if (!FileUtilRt.createDirectory(tempDir)) {
    throw new IOException("Cannot create directory: " + tempDir);
  }
  File copy=new File(tempDir,executable.getName());
  if (!FileUtilRt.ensureCanCreateFile(copy) || (copy.exists() && !copy.delete())) {
    String prefix=FileUtilRt.getNameWithoutExtension(copy.getName());
    String ext=FileUtilRt.getExtension(executable.getName());
    String suffix=StringUtil.isEmptyOrSpaces(ext) ? ".tmp" : ("." + ext);
    copy=FileUtilRt.createTempFile(tempDir,prefix,suffix,true,false);
  }
  FileUtilRt.copy(executable,copy);
  if (executable.canExecute() && !copy.setExecutable(true)) {
    throw new IOException("Cannot make file executable: " + copy);
  }
  return copy;
}
