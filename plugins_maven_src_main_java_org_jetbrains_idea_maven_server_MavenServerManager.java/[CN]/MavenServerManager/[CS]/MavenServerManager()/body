{
  super(null);
  final File pluginFileOrDir=new File(PathUtil.getJarPathForClass(MavenServerManager.class));
  final String root=pluginFileOrDir.getParent();
  if (pluginFileOrDir.isDirectory()) {
    File parentFile=getMavenPluginParentFile();
    myBundledMaven2Home=new File(parentFile,"maven2-server-impl/lib/maven2");
    myBundledMaven3Home=new File(parentFile,"maven30-server-impl/lib/maven3");
  }
 else {
    myBundledMaven2Home=new File(root,"maven2");
    myBundledMaven3Home=new File(root,"maven3");
  }
  mySupport=new RemoteProcessSupport<Object,MavenServer,Object>(MavenServer.class){
    @Override protected void fireModificationCountChanged(){
    }
    @Override protected String getName(    Object file){
      return MavenServerManager.class.getSimpleName();
    }
    @Override protected RunProfileState getRunProfileState(    Object target,    Object configuration,    Executor executor){
      return createRunProfileState();
    }
  }
;
  ShutDownTracker.getInstance().registerShutdownTask(new Runnable(){
    @Override public void run(){
      shutdown(false);
    }
  }
);
}
