{
  PsiFile file=node.getContainingFile();
  if (file == null)   return;
  boolean default_bytes=false;
  if (file instanceof PyFile) {
    PyFile pyfile=(PyFile)file;
    default_bytes=(!UNICODE_LITERALS.requiredAt(pyfile.getLanguageLevel()) && !pyfile.hasImportFromFuture(UNICODE_LITERALS));
  }
  final String charsetString=PythonFileType.getCharsetFromEncodingDeclaration(file.getText());
  try {
    if (charsetString != null && !Charset.forName(charsetString).equals(Charset.forName("US-ASCII")))     default_bytes=false;
  }
 catch (  UnsupportedCharsetException exception) {
  }
  boolean hasNonAscii=false;
  int length=value.length();
  char c=0;
  for (int i=0; i < length; ++i) {
    c=value.charAt(i);
    if (((int)c) > 255) {
      hasNonAscii=true;
      break;
    }
  }
  char first_char=Character.toLowerCase(node.getText().charAt(0));
  boolean isByte=first_char == 'b' || (default_bytes && first_char != 'u');
  if (hasNonAscii) {
    if (charsetString == null)     registerProblem(node,"Non-ASCII character " + c + " in file, but no encoding declared",new AddEncodingQuickFix(myDefaultEncoding,myEncodingFormatIndex));
 else     if (isByte) {
      registerProblem(node,"Byte literal contains characters > 255");
    }
  }
}
