{
  PerFileMappings<Language> mapping=ScratchFileService.getInstance().getScratchesMapping();
  Language language=mapping.getMapping(file);
  return language != null && language != ScratchFileType.INSTANCE.getLanguage() ? LanguageSubstitutors.INSTANCE.substituteLanguage(language,file,project) : language;
}
