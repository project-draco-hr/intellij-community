{
  if (isComboBoxEditor(c)) {
    g.setColor(c.getBackground());
    g.fillRect(x,y,width,height);
    return;
  }
  final EditorTextField textField=UIUtil.getParentOfType(EditorTextField.class,c);
  if (textField == null)   return;
  final Rectangle r=new Rectangle(x + 1,y + 1,width - 2,height - 2);
  if (c.isOpaque()) {
    g.setColor(UIUtil.getPanelBackground());
    g.fillRect(x,y,width,height);
  }
  g.setColor(c.getBackground());
  g.fillRect(r.x,r.y,r.width,r.height);
  if (!textField.isEnabled()) {
    ((Graphics2D)g).setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,0.4f));
  }
  if (textField.isEnabled() && textField.isVisible() && textField.getFocusTarget().hasFocus()) {
    DarculaUIUtil.paintFocusRing(g,r.x + 1,r.y + 1,r.width - 2,r.height - 2);
  }
 else {
    g.setColor(new JBColor(Gray._150,Gray._100));
    g.drawRect(r.x,r.y,r.width,r.height);
  }
}
