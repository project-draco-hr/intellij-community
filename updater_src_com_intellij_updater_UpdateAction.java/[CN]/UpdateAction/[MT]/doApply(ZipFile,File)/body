{
  InputStream in=Utils.findEntryInputStream(patchFile,myPath);
  boolean executable=readExecutableFlag(in);
  File temp=Utils.createTempFile();
  OutputStream out=new BufferedOutputStream(new FileOutputStream(temp));
  try {
    InputStream oldFileIn=new FileInputStream(toFile);
    try {
      applyDiff(in,oldFileIn,out);
    }
 catch (    Exception e) {
      Runner.printStackTrace(e);
    }
 finally {
      oldFileIn.close();
    }
  }
 catch (  Exception e) {
    Runner.printStackTrace(e);
  }
 finally {
    out.close();
  }
  replaceUpdated(temp,toFile);
  Utils.setExecutable(toFile,executable);
}
