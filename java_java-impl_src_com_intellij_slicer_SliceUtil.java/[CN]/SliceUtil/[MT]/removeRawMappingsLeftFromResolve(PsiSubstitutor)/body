{
  Map<PsiTypeParameter,PsiType> map=null;
  for (  Map.Entry<PsiTypeParameter,PsiType> entry : substitutor.getSubstitutionMap().entrySet()) {
    if (entry.getValue() == null) {
      if (map == null)       map=new THashMap<>();
      map.put(entry.getKey(),entry.getValue());
    }
  }
  if (map == null)   return substitutor;
  Map<PsiTypeParameter,PsiType> newMap=new THashMap<>(substitutor.getSubstitutionMap());
  newMap.keySet().removeAll(map.keySet());
  return PsiSubstitutorImpl.createSubstitutor(newMap);
}
