{
  Field field;
  field=doParseAndGetFirstField("u'{foo'");
  assertEquals("foo",field.getFirstName());
  assertEmpty(field.getAttributesAndLookups());
  field=doParseAndGetFirstField("u'{foo}'");
  assertEquals("foo",field.getFirstName());
  assertEmpty(field.getAttributesAndLookups());
  field=doParseAndGetFirstField("u'{foo.bar.baz}'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),".bar",".baz");
  field=doParseAndGetFirstField("u'{foo[bar][baz]}'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),"[bar]","[baz]");
  field=doParseAndGetFirstField("u'{foo.bar[baz]}'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),".bar","[baz]");
  field=doParseAndGetFirstField("u'{foo.bar[baz}'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),".bar");
  field=doParseAndGetFirstField("u'{foo[{bar[baz]}'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),"[{bar[baz]");
  field=doParseAndGetFirstField("u'{foo[{} {0} {bar.baz}]'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),"[{} {0} {bar.baz}]");
  field=doParseAndGetFirstField("u'{foo[bar]baz'");
  assertEquals("foo",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),"[bar]");
  field=doParseAndGetFirstField("'{0[foo][.!:][}]}'");
  assertEquals("0",field.getFirstName());
  assertSameElements(field.getAttributesAndLookups(),"[foo]","[.!:]","[}]");
  field=doParseAndGetFirstField("'{.foo.bar}'");
  assertEmpty(field.getFirstName());
  assertEquals(TextRange.create(2,2),field.getFirstNameRange());
  assertSameElements(field.getAttributesAndLookups(),".foo",".bar");
  field=doParseAndGetFirstField("'{}'");
  assertEmpty(field.getFirstName());
  assertEquals(TextRange.create(2,2),field.getFirstNameRange());
  field=doParseAndGetFirstField("'{:foo}'");
  assertEmpty(field.getFirstName());
  assertEquals(TextRange.create(2,2),field.getFirstNameRange());
  field=doParseAndGetFirstField("'{!r:foo}'");
  assertEmpty(field.getFirstName());
  assertEquals(TextRange.create(2,2),field.getFirstNameRange());
}
