{
  settings.load();
  if (settings.REMEMBER_SETTINGS || GraphicsEnvironment.isHeadless()) {
    if (settings.DO_LOGIN) {
      if (settings.getUserName() != null && settings.getPassword() != null) {
        login();
      }
 else {
        requestCredentials("Login failed, user name and password should not be empty",true);
      }
    }
  }
 else {
    requestCredentials(null,true);
  }
  StateStorageManager storageManager=((ApplicationImpl)application).getStateStore().getStateStorageManager();
  registerProvider(storageManager,RoamingType.PER_USER);
  registerProvider(storageManager,RoamingType.PER_PLATFORM);
  registerProvider(storageManager,RoamingType.GLOBAL);
}
