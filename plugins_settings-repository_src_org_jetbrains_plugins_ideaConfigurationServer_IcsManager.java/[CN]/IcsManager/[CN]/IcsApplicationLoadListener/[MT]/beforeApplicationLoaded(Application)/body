{
  if (application.isUnitTestMode()) {
    return;
  }
  getInstance().registerApplicationLevelProviders(application);
  ApplicationManager.getApplication().getMessageBus().connect().subscribe(ProjectLifecycleListener.TOPIC,new ProjectLifecycleListener.Adapter(){
    @Override public void beforeProjectLoaded(    @NotNull Project project){
      if (!project.isDefault()) {
        getInstance().registerProjectLevelProviders(project);
      }
    }
  }
);
  WindowManager.getInstance().addListener(new WindowManagerListener(){
    @Override public void frameCreated(    IdeFrame frame){
      frame.getStatusBar().addWidget(new IcsStatusBarWidget());
    }
    @Override public void beforeFrameReleased(    IdeFrame frame){
    }
  }
);
}
