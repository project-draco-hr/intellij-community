{
  final SearchResult result=new SearchResult();
  final MinusculeMatcher matcher=new MinusculeMatcher("*" + pattern,NameUtil.MatchingCaseSensitivity.NONE);
  if (myActions == null) {
    if (myActionModel == null) {
      myActionModel=createActionModel();
    }
    myActions=myActionModel.getNames(true);
  }
  List<MatchResult> matches=collectResults(pattern,myActions,myActionModel);
  for (  MatchResult o : matches) {
    check();
    Object[] objects=myActionModel.getElementsByName(o.elementName,true,pattern);
    for (    Object object : objects) {
      check();
      if (myListModel.contains(object))       continue;
      if (!actions && isSetting(object)) {
        if (matcher.matches(getSettingText((OptionDescription)object))) {
          result.add(object);
        }
      }
 else       if (actions && !isToolWindowAction(object) && isActionValue(object)) {
        result.add(object);
      }
      if (result.size() == max)       return result;
    }
  }
  return result;
}
