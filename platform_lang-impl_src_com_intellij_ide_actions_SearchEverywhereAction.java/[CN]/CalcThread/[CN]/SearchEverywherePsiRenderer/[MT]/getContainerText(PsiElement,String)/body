{
  PsiFileSystemItem parent;
  VirtualFile virtualFile=null;
  if (element instanceof PsiFileSystemItem) {
    parent=((PsiFileSystemItem)element).getParent();
    final PsiDirectory psiDirectory=parent instanceof PsiDirectory ? (PsiDirectory)parent : null;
    virtualFile=psiDirectory == null ? null : psiDirectory.getVirtualFile();
  }
 else   if (element instanceof NavigationItem) {
    PsiFile file=element.getContainingFile();
    virtualFile=file == null ? null : file.getVirtualFile();
    if (virtualFile != null && element.getParent() == file) {
      virtualFile=virtualFile.getParent();
    }
  }
  if (virtualFile == null)   return null;
  final String relativePath=getRelativePath(virtualFile,element.getProject());
  if (relativePath == null)   return "( " + File.separator + " )";
  String path=FilePathSplittingPolicy.SPLIT_BY_SEPARATOR.getOptimalTextForComponent(name + "          ",new File(relativePath),this,myList.getWidth() - 20);
  return "(" + path + ")";
}
