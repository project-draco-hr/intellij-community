{
  if (value instanceof VirtualFile && myProject != null) {
    value=((VirtualFile)value).isDirectory() ? PsiManager.getInstance(myProject).findDirectory((VirtualFile)value) : PsiManager.getInstance(myProject).findFile((VirtualFile)value);
  }
  if (value instanceof PsiElement) {
    MatcherHolder.associateMatcher(list,matcher);
    try {
      return myFileRenderer.getListCellRendererComponent(list,value,index,isSelected,isSelected);
    }
  finally {
      MatcherHolder.associateMatcher(list,null);
    }
  }
  return null;
}
