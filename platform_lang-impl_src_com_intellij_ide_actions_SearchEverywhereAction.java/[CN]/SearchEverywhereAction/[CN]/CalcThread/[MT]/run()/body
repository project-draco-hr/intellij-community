{
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      myTitleIndexes.clear();
      myListModel.clear();
      myAlreadyAddedFiles.clear();
    }
  }
);
  if (pattern.trim().length() == 0) {
    buildModelFromRecentFiles();
    updatePopup();
    return;
  }
  checkModelsUpToDate();
  buildTopHit(pattern);
  buildRecentFiles(pattern);
  updatePopup();
  AccessToken readLock=ApplicationManager.getApplication().acquireReadActionLock();
  try {
    buildClasses(pattern);
  }
  finally {
    readLock.finish();
  }
  updatePopup();
  readLock=ApplicationManager.getApplication().acquireReadActionLock();
  try {
    buildFiles(pattern);
  }
  finally {
    readLock.finish();
  }
  buildActionsAndSettings(pattern);
  updatePopup();
}
