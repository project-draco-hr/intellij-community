{
  if (myActions == null) {
    if (myActionModel == null) {
      myActionModel=createActionModel();
    }
    myActions=myActionModel.getNames(true);
  }
  final HashSet<AnAction> toolWindows=new HashSet<AnAction>();
  List<MatchResult> matches=collectResults(pattern,myActions,myActionModel);
  for (  MatchResult o : matches) {
    check();
    Object[] objects=myActionModel.getElementsByName(o.elementName,true,pattern);
    for (    Object object : objects) {
      check();
      if (isToolWindowAction(object) && toolWindows.size() < MAX_TOOL_WINDOWS) {
        toolWindows.add(((GotoActionModel.ActionWrapper)object).getAction());
      }
    }
  }
  check();
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      if (isCanceled())       return;
      if (toolWindows.size() > 0) {
        myListModel.myTitleIndexes.toolWindows=myListModel.size();
        for (        Object toolWindow : toolWindows) {
          myListModel.addElement(toolWindow);
        }
      }
    }
  }
);
}
