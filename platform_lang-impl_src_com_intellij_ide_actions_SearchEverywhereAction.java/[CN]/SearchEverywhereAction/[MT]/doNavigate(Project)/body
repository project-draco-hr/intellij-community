{
  Object value=myList.getSelectedValue();
  IdeFocusManager focusManager=IdeFocusManager.findInstanceByComponent(field.getTextEditor());
  if (myPopup != null && myPopup.isVisible()) {
    myPopup.cancel();
  }
  AccessToken token=ApplicationManager.getApplication().acquireReadActionLock();
  try {
    if (value instanceof PsiElement) {
      NavigationUtil.activateFileWithPsiElement((PsiElement)value,true);
      return;
    }
 else     if (value instanceof VirtualFile) {
      OpenFileDescriptor navigatable=new OpenFileDescriptor(project,(VirtualFile)value);
      if (navigatable.canNavigate()) {
        navigatable.navigate(true);
        return;
      }
    }
  }
  finally {
    token.finish();
  }
  focusManager.requestDefaultFocus(true);
}
