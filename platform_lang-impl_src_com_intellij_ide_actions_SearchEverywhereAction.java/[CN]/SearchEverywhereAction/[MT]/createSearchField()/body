{
  field=new MySearchTextField();
  int columns=20;
  if (UIUtil.isUnderDarcula() || UIUtil.isUnderAquaLookAndFeel()) {
    columns=7;
  }
  final JTextField editor=field.getTextEditor();
  editor.setColumns(columns);
  editor.getDocument().addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      final String pattern=editor.getText();
      myAlarm.cancelAllRequests();
      myAlarm.addRequest(new Runnable(){
        @Override public void run(){
          rebuildList(pattern);
        }
      }
,300);
    }
  }
);
  editor.addFocusListener(new FocusAdapter(){
    @Override public void focusGained(    FocusEvent e){
      final Project project=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(editor));
      editor.setColumns(25);
      myFocusComponent=e.getOppositeComponent();
      SwingUtilities.invokeLater(new Runnable(){
        @Override public void run(){
          final JComponent parent=(JComponent)editor.getParent();
          parent.revalidate();
          parent.repaint();
        }
      }
);
    }
    @Override public void focusLost(    FocusEvent e){
      editor.setColumns(7);
      myAlarm.cancelAllRequests();
      SwingUtilities.invokeLater(new Runnable(){
        @Override public void run(){
          final JComponent parent=(JComponent)editor.getParent();
          parent.revalidate();
          parent.repaint();
        }
      }
);
    }
  }
);
}
