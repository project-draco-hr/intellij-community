{
  final Executor runExecutor=DefaultRunExecutor.getRunExecutorInstance();
  final Executor debugExecutor=ExecutorRegistry.getInstance().getExecutorById(ToolWindowId.DEBUG);
  Executor executor=ourShiftIsPressed.get() ? runExecutor : debugExecutor;
  RunConfiguration runConf=settings.getConfiguration();
  if (executor == null || runConf == null) {
    return null;
  }
  ProgramRunner runner=RunnerRegistry.getInstance().getRunner(executor.getId(),runConf);
  if (runner == null) {
    executor=runExecutor == executor ? debugExecutor : runExecutor;
  }
  return executor;
}
