{
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      runReadAction(new Runnable(){
        @Override public void run(){
          try {
            final List<Object> classes=getClasses(pattern,showAll.get(),DEFAULT_MORE_STEP_COUNT);
            System.out.println(classes.size());
            check();
            SwingUtilities.invokeLater(new Runnable(){
              @Override public void run(){
                try {
                  int shift=0;
                  int i=index;
                  for (                  Object aClass : classes) {
                    myListModel.insertElementAt(aClass,i);
                    shift++;
                    i++;
                  }
                  myListModel.myTitleIndexes.shift(index,shift);
                  myListModel.myMoreIndexes.shift(index,shift);
                  if (classes.size() < DEFAULT_MORE_STEP_COUNT) {
                    myListModel.myMoreIndexes.myMoreClassesIndex=-1;
                  }
                  ListScrollingUtil.selectItem(myList,index);
                  myDone.setDone();
                }
 catch (                Exception e) {
                  myDone.setRejected();
                }
              }
            }
);
          }
 catch (          Exception e) {
            myDone.setRejected();
          }
        }
      }
,true);
    }
  }
);
  return myDone;
}
