{
  if (!isMethodSupported(request.method())) {
    return false;
  }
  String uri=request.uri();
  if (isPrefixlessAllowed() && checkPrefix(uri,getServiceName())) {
    return true;
  }
  String serviceName=getServiceName();
  int minLength=1 + PREFIX.length() + 1+ serviceName.length();
  if (uri.length() >= minLength && uri.charAt(0) == '/' && uri.regionMatches(true,1,PREFIX,0,PREFIX.length()) && uri.regionMatches(true,2 + PREFIX.length(),serviceName,0,serviceName.length())) {
    if (uri.length() == minLength) {
      return true;
    }
 else {
      char c=uri.charAt(minLength);
      return c == '/' || c == '?';
    }
  }
  return false;
}
