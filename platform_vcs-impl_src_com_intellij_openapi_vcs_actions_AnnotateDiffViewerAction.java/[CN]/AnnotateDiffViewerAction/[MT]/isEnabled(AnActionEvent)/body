{
  DiffViewerBase viewer=ObjectUtils.tryCast(e.getData(DiffDataKeys.DIFF_VIEWER),DiffViewerBase.class);
  if (viewer == null)   return false;
  if (viewer.getProject() == null)   return false;
  if (viewer.isDisposed())   return false;
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  if (editor == null)   return false;
  ViewerAnnotator annotator=getAnnotator(viewer);
  if (annotator == null)   return false;
  Side side=annotator.getCurrentSide(viewer,editor);
  if (side == null)   return false;
  if (annotator.isAnnotationShown(viewer,side))   return false;
  if (checkRunningProgress(viewer,side))   return false;
  return createAnnotationsLoader(viewer.getProject(),viewer.getRequest(),side) != null;
}
