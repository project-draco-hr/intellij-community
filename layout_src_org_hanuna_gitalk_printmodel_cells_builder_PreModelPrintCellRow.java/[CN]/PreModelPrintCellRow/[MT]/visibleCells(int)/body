{
  if (rowIndex < 0 || rowIndex >= layoutModel.getCellRows().size()) {
    return ReadOnlyList.emptyList();
  }
  CellRow cellRow=layoutModel.getCellRows().get(rowIndex);
  ReadOnlyList<Cell> cells=cellRow.getCells();
  if (!hideEdge) {
    return cells;
  }
  List<Cell> visibleCells=new ArrayList<Cell>();
  for (  Cell cell : cells) {
    if (cell.getClass() == NodeCell.class) {
      visibleCells.add(cell);
    }
 else {
      if (cell.getClass() != EdgeCell.class) {
        throw new IllegalStateException();
      }
      Edge edge=((EdgeCell)cell).getEdge();
      if (visibleEdge(edge,rowIndex) != -1) {
        visibleCells.add(cell);
      }
    }
  }
  return ReadOnlyList.newReadOnlyList(visibleCells);
}
