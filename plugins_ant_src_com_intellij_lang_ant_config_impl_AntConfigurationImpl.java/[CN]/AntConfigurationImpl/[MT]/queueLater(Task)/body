{
  final Application app=ApplicationManager.getApplication();
  if (!app.isDispatchThread() || task.isHeadless()) {
    app.invokeLater(new Runnable(){
      public void run(){
        task.queue();
      }
    }
,ModalityState.any());
  }
 else {
    task.queue();
  }
}
