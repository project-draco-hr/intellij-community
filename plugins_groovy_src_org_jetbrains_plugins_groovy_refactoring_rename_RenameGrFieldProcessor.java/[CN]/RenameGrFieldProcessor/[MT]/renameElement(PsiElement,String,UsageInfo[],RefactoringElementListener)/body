{
  GrField field=(GrField)psiElement;
  Map<GrReferenceExpression,PsiElement> handled=ContainerUtil.newHashMap();
  for (  UsageInfo usage : usages) {
    final PsiReference ref=usage.getReference();
    if (ref instanceof GrReferenceExpression) {
      PsiElement resolved=ref.resolve();
      ref.handleElementRename(getNewNameFromTransformations(resolved,newName));
      handled.put((GrReferenceExpression)ref,resolved);
    }
 else     if (ref != null) {
      handleElementRename(newName,ref,field.getName());
    }
  }
  field.setName(newName);
  for (  GrReferenceExpression expression : handled.keySet()) {
    PsiElement oldResolved=handled.get(expression);
    if (oldResolved == null)     continue;
    PsiElement resolved=expression.resolve();
    if (resolved == null)     continue;
    if (expression.getManager().areElementsEquivalent(oldResolved,resolved))     continue;
    qualify(field,expression);
  }
  if (listener != null) {
    listener.elementRenamed(psiElement);
  }
}
