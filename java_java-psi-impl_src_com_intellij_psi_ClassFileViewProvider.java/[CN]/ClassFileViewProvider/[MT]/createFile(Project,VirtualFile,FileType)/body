{
  FileIndexFacade fileIndex=ServiceManager.getService(project,FileIndexFacade.class);
  if (!fileIndex.isInLibraryClasses(file) && fileIndex.isInSource(file)) {
    return new PsiBinaryFileImpl((PsiManagerImpl)getManager(),this);
  }
  try {
    if (!isInnerClass(file,file.contentsToByteArray(false))) {
      return new ClsFileImpl(this);
    }
  }
 catch (  IOException e) {
    Logger.getInstance(ClassFileViewProvider.class).debug(file.getPath(),e);
  }
  return null;
}
