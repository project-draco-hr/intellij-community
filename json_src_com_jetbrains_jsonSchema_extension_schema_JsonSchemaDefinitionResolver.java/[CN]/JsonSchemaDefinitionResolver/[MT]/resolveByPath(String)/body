{
  final Project project=myElement.getProject();
  final FileBasedIndex index=FileBasedIndex.getInstance();
  final Ref<Pair<VirtualFile,Integer>> reference=new Ref<>();
  GlobalSearchScope filter=mySchemaId != null && myInCurrentFile ? GlobalSearchScope.fileScope(myElement.getContainingFile()) : GlobalSearchScope.allScope(project);
  filter=JsonSchemaResourcesRootsProvider.enlarge(project,filter);
  index.processValues(JsonSchemaFileIndex.PROPERTIES_INDEX,referenceName,null,new FileBasedIndex.ValueProcessor<Integer>(){
    @Override public boolean process(    VirtualFile file,    Integer value){
      if (mySchemaId != null) {
        if (!JsonSchemaService.Impl.getEx(project).checkFileForId(mySchemaId,file)) {
          return true;
        }
      }
      reference.set(Pair.create(file,value));
      return false;
    }
  }
,filter);
  if (!reference.isNull()) {
    final Pair<VirtualFile,Integer> pair=reference.get();
    final PsiFile file=myElement.getManager().findFile(pair.getFirst());
    if (file != null) {
      return file.findElementAt(pair.getSecond());
    }
  }
  return null;
}
