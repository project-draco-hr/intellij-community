{
  DataContext context=event.getDataContext();
  DebuggerTreeNodeImpl[] selectedNodes=DebuggerAction.getSelectedNodes(context);
  boolean enabled=false;
  if (selectedNodes != null && selectedNodes.length > 0) {
    DebuggerTreePanel panel=DebuggerAction.getPanel(context);
    if (panel instanceof VariablesPanel || panel instanceof WatchPanel || (panel == null && DebuggerAction.getTree(context) instanceof InspectDebuggerTree)) {
      enabled=true;
      for (      DebuggerTreeNodeImpl node : selectedNodes) {
        NodeDescriptorImpl descriptor=node.getDescriptor();
        if (!(descriptor instanceof ValueDescriptorImpl)) {
          enabled=false;
          break;
        }
      }
    }
  }
 else {
    final Editor editor=event.getData(CommonDataKeys.EDITOR);
    enabled=DebuggerUtilsEx.getEditorText(editor) != null;
  }
  return enabled;
}
