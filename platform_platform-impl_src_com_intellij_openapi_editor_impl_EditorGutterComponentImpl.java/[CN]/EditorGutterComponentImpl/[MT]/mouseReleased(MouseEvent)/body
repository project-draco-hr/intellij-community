{
  if (e.isPopupTrigger()) {
    invokePopup(e);
    return;
  }
  GutterIconRenderer renderer=getGutterRenderer(e);
  final Project project=myEditor.getProject();
  if (project != null && DumbService.isDumb(project) && !DumbService.isDumbAware(renderer)) {
    DumbService.getInstance(project).showDumbModeNotification("Navigation is not available during indexing");
    return;
  }
  AnAction clickAction=null;
  if (renderer != null && e.getButton() < 4) {
    clickAction=(InputEvent.BUTTON2_MASK & e.getModifiers()) > 0 ? renderer.getMiddleButtonClickAction() : renderer.getClickAction();
  }
  if (clickAction != null) {
    clickAction.actionPerformed(new AnActionEvent(e,myEditor.getDataContext(),"ICON_NAVIGATION",clickAction.getTemplatePresentation(),ActionManager.getInstance(),e.getModifiers()));
    e.consume();
    repaint();
  }
 else {
    ActiveGutterRenderer lineRenderer=getActiveRendererByMouseEvent(e);
    if (lineRenderer != null) {
      lineRenderer.doAction(myEditor,e);
    }
 else {
      fireEventToTextAnnotationListeners(e);
    }
  }
}
