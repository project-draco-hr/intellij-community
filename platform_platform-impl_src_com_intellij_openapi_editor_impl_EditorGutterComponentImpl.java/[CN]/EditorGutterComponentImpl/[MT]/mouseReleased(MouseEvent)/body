{
  if (e.isPopupTrigger()) {
    invokePopup(e);
    return;
  }
  GutterIconRenderer renderer=getGutterRenderer(e);
  final Project project=myEditor.getProject();
  AnAction clickAction=null;
  if (renderer != null && e.getButton() < 4) {
    clickAction=(InputEvent.BUTTON2_MASK & e.getModifiers()) > 0 ? renderer.getMiddleButtonClickAction() : renderer.getClickAction();
  }
  if (clickAction != null) {
    if (checkActionNotBlocked(clickAction,project)) {
      performAction(clickAction,e,"ICON_NAVIGATION",myEditor.getDataContext());
      repaint();
    }
    e.consume();
  }
 else {
    ActiveGutterRenderer lineRenderer=getActiveRendererByMouseEvent(e);
    if (lineRenderer != null) {
      lineRenderer.doAction(myEditor,e);
    }
 else {
      fireEventToTextAnnotationListeners(e);
    }
  }
}
