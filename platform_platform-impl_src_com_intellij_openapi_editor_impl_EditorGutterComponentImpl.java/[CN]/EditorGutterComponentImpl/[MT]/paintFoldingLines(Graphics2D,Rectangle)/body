{
  if (!isFoldingOutlineShown())   return;
  if (myPaintBackground) {
    g.setColor(getOutlineColor(false));
    int x=getWhitespaceSeparatorOffset();
    UIUtil.drawLine(g,x,clip.y,x,clip.y + clip.height);
  }
  final int anchorX=getFoldingAreaOffset();
  final int width=getFoldingAnchorWidth();
  if (myActiveFoldRegion != null && myActiveFoldRegion.isExpanded() && myActiveFoldRegion.isValid()) {
    int foldStart=myEditor.offsetToVisualLine(myActiveFoldRegion.getStartOffset());
    int foldEnd=myEditor.offsetToVisualLine(getEndOffset(myActiveFoldRegion));
    int startY=getLineCenterY(foldStart);
    int endY=getLineCenterY(foldEnd);
    if (startY <= clip.y + clip.height && endY + 1 + myEditor.getDescent() >= clip.y) {
      g.setColor(getOutlineColor(true));
      int lineX=anchorX + width / 2;
      UIUtil.drawLine(g,lineX,startY,lineX,endY);
    }
  }
}
