{
  IdeFrame ideFrame=WindowManager.getInstance().getIdeFrame(myEditor.getProject());
  RelativePoint point=new RelativePoint(myEditor.getComponent(),new Point(0,0));
  Point editorLocationInWindow=point.getPoint(ideFrame.getComponent());
  EditorSettings settings=myEditor.getSettings();
  int rightMargin=settings.getRightMargin(myEditor.getProject());
  if (rightMargin <= 0)   return;
  int editorLocationX=(int)editorLocationInWindow.getX();
  int rightMarginX=rightMargin * EditorUtil.getSpaceWidth(Font.PLAIN,myEditor) + editorLocationX;
  int width=(int)ideFrame.getComponent().getSize().getWidth();
  if (rightMarginX < width && editorLocationX < width - rightMarginX) {
    myTextAnnotationGuttersSize=Math.max(myTextAnnotationGuttersSize,(width - rightMarginX - editorLocationX) / 2 - myIconsAreaWidth - 10);
  }
}
