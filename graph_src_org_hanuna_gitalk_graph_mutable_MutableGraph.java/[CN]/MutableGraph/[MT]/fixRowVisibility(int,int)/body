{
  if (fromRowIndex < 0 || toRowIndex >= allRows.size() || fromRowIndex > toRowIndex) {
    throw new IllegalArgumentException("fromRowIndex: " + fromRowIndex + "toRowIndex: "+ toRowIndex);
  }
  MutableNodeRow upRow=visibleRows.get(fromRowIndex);
  MutableNodeRow downRow=visibleRows.get(toRowIndex);
  for (int i=upRow.getLogIndex(); i <= downRow.getLogIndex(); i++) {
    allRows.get(i).updateVisibleNodes();
  }
  recalculateRowIndex();
  Replace replace=Replace.buildFromToInterval(fromRowIndex,toRowIndex,upRow.getRowIndex(),downRow.getRowIndex());
  listenerController.runDoReplace(replace);
  return replace;
}
