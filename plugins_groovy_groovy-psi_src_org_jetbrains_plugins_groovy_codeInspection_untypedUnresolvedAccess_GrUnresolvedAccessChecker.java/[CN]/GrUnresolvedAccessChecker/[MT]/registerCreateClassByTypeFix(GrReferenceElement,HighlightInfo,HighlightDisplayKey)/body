{
  GrPackageDefinition packageDefinition=PsiTreeUtil.getParentOfType(refElement,GrPackageDefinition.class);
  if (packageDefinition != null)   return;
  PsiElement parent=refElement.getParent();
  if (parent instanceof GrNewExpression && refElement.getManager().areElementsEquivalent(((GrNewExpression)parent).getReferenceElement(),refElement)) {
    QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFromNewAction((GrNewExpression)parent),key);
  }
 else   if (canBeClassOrPackage(refElement)) {
    if (shouldBeInterface(refElement)) {
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.INTERFACE),key);
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.TRAIT),key);
    }
 else     if (shouldBeClass(refElement)) {
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.CLASS),key);
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.ENUM),key);
    }
 else     if (shouldBeAnnotation(refElement)) {
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.ANNOTATION),key);
    }
 else {
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.CLASS),key);
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.INTERFACE),key);
      if (!refElement.isQualified() || resolvesToGroovy(refElement.getQualifier())) {
        QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.TRAIT),key);
      }
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.ENUM),key);
      QuickFixAction.registerQuickFixAction(info,GroovyQuickFixFactory.getInstance().createClassFixAction(refElement,GrCreateClassKind.ANNOTATION),key);
    }
  }
}
