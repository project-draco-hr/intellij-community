{
  byte[] content=from.getFileType().isBinary() ? from.contentsToByteArray() : null;
  final String fileText=from.getFileType().isBinary() ? null : StringUtil.convertLineSeparators(VfsUtilCore.loadText(from));
  EditorInfo editorInfo=fileText == null ? null : new EditorInfo(fileText);
  String newFileText=fileText == null ? null : editorInfo.getNewFileText();
  doWrite(newFileText,to,content,streamsToClose);
  return editorInfo;
}
