{
  Document document=context.getDocument();
  int startOffset=context.getStartOffset();
  PsiDocumentManager documentManager=PsiDocumentManager.getInstance(context.getProject());
  document.replaceString(startOffset,context.getTailOffset(),"postfix");
  context.commitDocument();
  PsiFile file=context.getFile();
  PsiElement psiElement=file.findElementAt(startOffset);
  if (psiElement == null)   return;
  PostfixTemplatesManager manager=ApplicationManager.getApplication().getComponent(PostfixTemplatesManager.class);
  PostfixTemplateAcceptanceContext acceptanceContext=manager.isAvailable(psiElement,true);
  if (acceptanceContext == null)   return;
  for (  PrefixExpressionContext expression : acceptanceContext.expressions) {
    if (myExpressionType.isInstance(expression.expression) && expression.expressionRange.equals(myExpressionRange)) {
      TPsiElement newStatement=handlePostfixInsert(context,expression);
      documentManager.doPostponedOperationsAndUnblockDocument(document);
      postProcess(context,newStatement);
      break;
    }
  }
}
