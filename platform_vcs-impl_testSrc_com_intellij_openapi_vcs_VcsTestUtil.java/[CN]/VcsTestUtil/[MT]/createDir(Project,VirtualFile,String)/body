{
  return new WriteCommandAction<VirtualFile>(project){
    @Override protected void run(    @NotNull Result<VirtualFile> result) throws Throwable {
      VirtualFile dir=parent.findChild(name);
      if (dir == null) {
        dir=parent.createChildDirectory(this,name);
      }
      result.setResult(dir);
    }
  }
.execute().throwException().getResultObject();
}
