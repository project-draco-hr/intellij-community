{
  List<String> args=new ArrayList<String>();
  args.add("--log");
  args.addAll(params);
  AccessToken token=DvcsUtil.workingTreeChangeStarted(project);
  try {
    HgCommandResult result=new HgCommandExecutor(project).executeInCurrentThread(repo.getRoot(),"graft",args);
    repo.update();
    project.getMessageBus().syncPublisher(HgVcs.BRANCH_TOPIC).update(project,null);
    return result;
  }
  finally {
    DvcsUtil.workingTreeChangeFinished(project,token);
  }
}
