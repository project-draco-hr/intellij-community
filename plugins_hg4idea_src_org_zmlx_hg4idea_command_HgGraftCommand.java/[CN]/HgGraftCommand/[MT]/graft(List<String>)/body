{
  List<String> args=new ArrayList<String>();
  args.add("--log");
  args.addAll(params);
  AccessToken token=DvcsUtil.workingTreeChangeStarted(myProject);
  try {
    HgCommandResult result=new HgCommandExecutor(myProject).executeInCurrentThread(myRepository.getRoot(),"graft",args);
    myRepository.update();
    myProject.getMessageBus().syncPublisher(HgVcs.BRANCH_TOPIC).update(myProject,null);
    return result;
  }
  finally {
    DvcsUtil.workingTreeChangeFinished(myProject,token);
  }
}
