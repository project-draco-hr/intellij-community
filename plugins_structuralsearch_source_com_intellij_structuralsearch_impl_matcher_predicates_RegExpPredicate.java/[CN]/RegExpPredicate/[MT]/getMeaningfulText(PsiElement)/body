{
  String text;
  if (matchedNode instanceof PsiReferenceExpression && ((PsiReferenceExpression)matchedNode).getQualifierExpression() != null) {
    final PsiElement referencedElement=((PsiReferenceExpression)matchedNode).getReferenceNameElement();
    text=referencedElement != null ? referencedElement.getText() : "";
  }
 else   if (matchedNode instanceof PsiLiteralExpression) {
    text=matchedNode.getText();
  }
 else   if (matchedNode instanceof XmlAttributeValue) {
    text=matchedNode.getText();
  }
 else {
    text=SubstitutionHandler.getTypedVarString(matchedNode);
  }
  return text;
}
