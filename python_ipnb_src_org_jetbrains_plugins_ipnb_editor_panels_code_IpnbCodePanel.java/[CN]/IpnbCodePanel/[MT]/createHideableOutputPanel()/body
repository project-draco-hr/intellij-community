{
  final OnePixelSplitter splitter=new OnePixelSplitter(true);
  final JPanel toggleBar=createToggleBar(splitter);
  final JPanel outputComponent=createOutputPanel(createHideOutputListener(splitter,toggleBar));
  final Map<String,Object> metadata=myCell.getMetadata();
  if (metadata.containsKey(COLLAPSED_METADATA)) {
    final boolean isCollapsed=(Boolean)metadata.get(COLLAPSED_METADATA);
    if (isCollapsed && !myCell.getCellOutputs().isEmpty()) {
      splitter.setFirstComponent(toggleBar);
      return splitter;
    }
  }
  splitter.setSecondComponent(outputComponent);
  return splitter;
}
