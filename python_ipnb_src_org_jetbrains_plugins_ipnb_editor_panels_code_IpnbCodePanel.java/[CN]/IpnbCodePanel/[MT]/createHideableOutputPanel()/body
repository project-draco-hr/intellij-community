{
  final OnePixelSplitter splitter=new OnePixelSplitter(true);
  final JPanel toggleBar=createToggleBar(splitter);
  final JPanel secondComponent=createOutputPanel(createHideOutputListener(splitter,toggleBar));
  final Map<String,Object> metadata=myCell.getMetadata();
  if (metadata != null && metadata.containsKey(COLLAPSED_METADATA)) {
    final Boolean isCollapsed=(Boolean)metadata.get(COLLAPSED_METADATA);
    if (isCollapsed) {
      splitter.setFirstComponent(toggleBar);
      return splitter;
    }
  }
  splitter.setSecondComponent(secondComponent);
  return splitter;
}
