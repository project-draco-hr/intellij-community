{
  final IpnbEditorUtil.PromptType promptType=addPrompt ? IpnbEditorUtil.PromptType.Out : IpnbEditorUtil.PromptType.None;
  final JPanel panel=new JPanel(new GridBagLayout());
  panel.setBackground(IpnbEditorUtil.getBackground());
  if (outputCell instanceof IpnbImageOutputCell) {
    addPromptPanel(panel,myCell.getPromptNumber(),promptType,new IpnbImagePanel((IpnbImageOutputCell)outputCell));
  }
 else   if (outputCell instanceof IpnbHtmlOutputCell) {
    addPromptPanel(panel,myCell.getPromptNumber(),promptType,new IpnbHtmlPanel((IpnbHtmlOutputCell)outputCell,myParent.getIpnbFilePanel()));
  }
 else   if (outputCell instanceof IpnbLatexOutputCell) {
    addPromptPanel(panel,myCell.getPromptNumber(),promptType,new IpnbLatexPanel((IpnbLatexOutputCell)outputCell,myParent.getIpnbFilePanel()));
  }
 else   if (outputCell instanceof IpnbErrorOutputCell) {
    addPromptPanel(panel,myCell.getPromptNumber(),promptType,new IpnbErrorPanel((IpnbErrorOutputCell)outputCell));
  }
 else   if (outputCell instanceof IpnbStreamOutputCell) {
    addPromptPanel(panel,myCell.getPromptNumber(),IpnbEditorUtil.PromptType.None,new IpnbStreamPanel((IpnbStreamOutputCell)outputCell));
  }
 else   if (outputCell.getSourceAsString() != null) {
    addPromptPanel(panel,myCell.getPromptNumber(),promptType,new IpnbCodeOutputPanel<IpnbOutputCell>(outputCell,myParent.getIpnbFilePanel()));
  }
  mainPanel.add(panel);
}
