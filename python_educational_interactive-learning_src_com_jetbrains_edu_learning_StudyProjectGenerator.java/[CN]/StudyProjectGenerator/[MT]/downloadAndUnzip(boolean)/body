{
  File outputFile=new File(PathManager.getConfigPath(),"courses.zip");
  try {
    if (!needProgressBar) {
      GithubDownloadUtil.downloadAtomically(null,REPO_URL,outputFile,USER_NAME,REPOSITORY_NAME);
    }
 else {
      GithubDownloadUtil.downloadContentToFileWithProgressSynchronously(myProject,REPO_URL,"downloading courses",outputFile,USER_NAME,REPOSITORY_NAME,false);
    }
    if (outputFile.exists()) {
      ZipUtil.unzip(null,myCoursesDir,outputFile,null,null,true);
      if (!outputFile.delete()) {
        LOG.error("Failed to delete",outputFile.getName());
      }
      File[] files=myCoursesDir.listFiles();
      if (files != null) {
        for (        File file : files) {
          String fileName=file.getName();
          if (StudyUtils.isZip(fileName)) {
            ZipUtil.unzip(null,new File(myCoursesDir,fileName.substring(0,fileName.indexOf("."))),file,null,null,true);
            if (!file.delete()) {
              LOG.error("Failed to delete",fileName);
            }
          }
        }
      }
    }
 else {
      LOG.debug("failed to download course");
    }
  }
 catch (  IOException e) {
    LOG.error(e);
  }
catch (  GeneratorException e) {
    LOG.error(e);
  }
}
