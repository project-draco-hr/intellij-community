{
  final PsiDocumentManager documentManager=PsiDocumentManager.getInstance(myProject);
  final Document document=editor.getDocument();
  final PsiFile psiFile=documentManager.getPsiFile(document);
  if (psiFile instanceof PsiClassOwner && psiFile.isPhysical()) {
    final SrcFileAnnotator annotator=new SrcFileAnnotator(psiFile,editor);
    annotator.hideCoverageData();
    if (myCurrentSuite != null) {
      final List<PsiPackage> packages=getCurrentSuitePackages();
      if (isUnderFilteredPackages((PsiClassOwner)psiFile,packages)) {
        Disposer.register(myProject,annotator);
        annotator.showCoverageInformation(myCurrentSuite);
      }
 else {
        final List<PsiClass> classes=getCurrentSuiteClasses();
        for (        PsiClass aClass : classes) {
          final PsiFile containingFile=aClass.getContainingFile();
          if (psiFile.equals(containingFile)) {
            Disposer.register(myProject,annotator);
            annotator.showCoverageInformation(myCurrentSuite);
            break;
          }
        }
      }
    }
  }
}
