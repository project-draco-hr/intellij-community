{
  final VirtualFile[] files;
synchronized (myChangedFiles) {
    myWasRequested=false;
    files=myChangedFiles.toArray(new VirtualFile[myChangedFiles.size()]);
    myChangedFiles.clear();
  }
  final WolfTheProblemSolver problemSolver=WolfTheProblemSolver.getInstance(myProject);
  for (  VirtualFile file : files) {
    if (problemSolver.hasSyntaxErrors(file)) {
synchronized (myChangedFiles) {
        Collections.addAll(myChangedFiles,files);
      }
      return;
    }
  }
  myConsumer.consume(files);
}
