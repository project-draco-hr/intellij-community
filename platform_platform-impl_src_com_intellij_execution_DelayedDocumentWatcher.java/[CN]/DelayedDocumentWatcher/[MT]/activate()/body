{
  if (myConnection == null) {
    myListenerDisposable=Disposer.newDisposable();
    Disposer.register(myProject,myListenerDisposable);
    EditorFactory.getInstance().getEventMulticaster().addDocumentListener(myListener,myListenerDisposable);
    myConnection=ApplicationManager.getApplication().getMessageBus().connect(myProject);
    myConnection.subscribe(AppTopics.FILE_DOCUMENT_SYNC,new FileDocumentManagerAdapter(){
      @Override public void beforeAllDocumentsSaving(){
        myDocumentSavingInProgress=true;
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            myDocumentSavingInProgress=false;
          }
        }
,ModalityState.any());
      }
    }
);
  }
}
