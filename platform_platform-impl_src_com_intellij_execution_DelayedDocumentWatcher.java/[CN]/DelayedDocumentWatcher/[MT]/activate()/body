{
  if (myMessageBusConnection != null) {
    return;
  }
  myMessageBusConnection=myProject.getMessageBus().connect(myProject);
  myMessageBusConnection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener.Adapter(){
    @Override public void after(    @NotNull List<? extends VFileEvent> events){
      for (      VFileEvent event : events) {
        if (event instanceof VFileDeleteEvent) {
synchronized (myChangedFiles) {
            myChangedFiles.remove(event.getFile());
          }
        }
      }
    }
  }
);
  EditorFactory.getInstance().getEventMulticaster().addDocumentListener(myListener,myProject);
}
