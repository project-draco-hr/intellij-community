{
  final String subDirName=inputString;
  if (subDirName.length() == 0) {
    showErrorDialog(IdeBundle.message("error.name.should.be.specified"));
    return false;
  }
  final boolean multiCreation=StringUtil.containsAnyChar(subDirName,myDelimiters);
  if (!multiCreation) {
    try {
      myDirectory.checkCreateSubdirectory(subDirName);
    }
 catch (    IncorrectOperationException ex) {
      showErrorDialog(CreateElementActionBase.filterMessage(ex.getMessage()));
      return false;
    }
  }
  boolean createFile=false;
  if (StringUtil.countChars(subDirName,'.') == 1 && Registry.is("ide.suggest.file.when.creating.filename.like.directory")) {
    FileType fileType=findFileTypeBoundToName(subDirName);
    if (fileType != null) {
      String message="The name you entered looks like a file name. Do you want to create a file named " + subDirName + " instead?";
      int ec=Messages.showYesNoCancelDialog(myProject,message,"File Name Detected","&Yes, create file","&No, create " + (myIsDirectory ? "directory" : "packages"),CommonBundle.getCancelButtonText(),fileType.getIcon());
      if (ec == Messages.CANCEL) {
        return false;
      }
      if (ec == Messages.YES) {
        createFile=true;
      }
    }
  }
  doCreateElement(subDirName,createFile);
  return myCreatedElement != null;
}
