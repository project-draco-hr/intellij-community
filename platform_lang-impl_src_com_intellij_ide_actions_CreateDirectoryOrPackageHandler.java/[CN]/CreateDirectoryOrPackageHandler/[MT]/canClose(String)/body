{
  final String subDirName=inputString;
  if (subDirName.length() == 0) {
    showErrorDialog(IdeBundle.message("error.name.should.be.specified"));
    return false;
  }
  final boolean multiCreation=StringUtil.containsAnyChar(subDirName,myDelimiters);
  if (!multiCreation) {
    try {
      myDirectory.checkCreateSubdirectory(subDirName);
    }
 catch (    IncorrectOperationException ex) {
      showErrorDialog(CreateElementActionBase.filterMessage(ex.getMessage()));
      return false;
    }
  }
  boolean createFile=false;
  if (StringUtil.countChars(subDirName,'.') == 1) {
    FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(subDirName);
    if (!(fileType instanceof UnknownFileType)) {
      String message="The name you entered looks like a file name. Do you want to create " + subDirName + " file instead?";
      int ec=Messages.showYesNoDialog(myProject,message,"File Name Detected","Yes, create file","No, create " + (myIsDirectory ? "directory" : "packages"),fileType.getIcon());
      if (ec == Messages.OK) {
        createFile=true;
      }
    }
  }
  doCreateElement(subDirName,createFile);
  return myCreatedElement != null;
}
