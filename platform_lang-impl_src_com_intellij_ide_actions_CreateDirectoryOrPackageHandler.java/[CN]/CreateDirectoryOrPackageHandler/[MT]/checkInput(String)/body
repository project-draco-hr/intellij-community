{
  boolean firstToken=true;
  for (  String token : StringUtil.tokenize(inputString,myDelimiters)) {
    if (token.equals(".") || token.equals("..")) {
      myErrorText="Can't create a directory with name '" + token + "'";
      return false;
    }
    if (firstToken) {
      final VirtualFile vFile=myDirectory.getVirtualFile();
      final VirtualFile child=vFile.findChild(token);
      if (child != null) {
        myErrorText="A " + (child.isDirectory() ? "directory" : "file") + " with name '"+ token+ "' already exists";
        return false;
      }
    }
    firstToken=false;
    if (FileTypeManager.getInstance().isFileIgnored(token)) {
      myErrorText="Trying to create a " + (myIsDirectory ? "directory" : "package") + " with an ignored name, the result will not be visible";
      return true;
    }
    if (!myIsDirectory && token.length() > 0 && !PsiDirectoryFactory.getInstance(myProject).isValidPackageName(token)) {
      myErrorText="Not a valid package name, it will not be possible to create a class inside";
      return true;
    }
  }
  myErrorText=null;
  return true;
}
