{
  AbstractTreeStructure treeStructure=getTreeStructure();
  ActionCallback result=treeStructure.asyncCommit();
  result.doWhenDone(new TreeRunnable("AbstractTreeUi.updateNodeChildren: on done"){
    @Override public void perform(){
      try {
        removeFromCancelled(node);
        execute(new TreeRunnable("AbstractTreeUi.updateNodeChildren: execute"){
          @Override public void perform(){
            doUpdateChildren(node,pass,loadedChildren,forcedNow,toSmartExpand,forceUpdate,descriptorIsUpToDate,updateChildren);
          }
        }
);
      }
 catch (      ProcessCanceledException e) {
        addToCancelled(node);
        throw e;
      }
    }
  }
);
  return result;
}
