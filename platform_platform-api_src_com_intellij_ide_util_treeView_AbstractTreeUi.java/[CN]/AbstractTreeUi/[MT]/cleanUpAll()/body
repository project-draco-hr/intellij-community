{
  final long now=System.currentTimeMillis();
  final long timeToCleanup=ourUi2Countdown;
  if (timeToCleanup != 0 && now >= timeToCleanup) {
    ourUi2Countdown=0;
    Runnable runnable=new TreeRunnable("AbstractTreeUi.cleanUpAll"){
      @Override public void perform(){
        if (!canInitiateNewActivity())         return;
        myCleanupTask=null;
        getBuilder().cleanUp();
      }
    }
;
    if (isPassthroughMode()) {
      runnable.run();
    }
 else {
      invokeLaterIfNeeded(false,runnable);
    }
  }
}
