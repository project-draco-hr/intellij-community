{
  return new SearchingForTestsTask(myServerSocket,getConfiguration(),myTempFile,client){
    @Override protected void search() throws CantRunException {
      myClasses.clear();
      final Set<String> patterns=TestDiscoverySearchHelper.search(getProject(),getPosition(),getChangeList());
      final Module module=getConfigurationModule().getModule();
      final GlobalSearchScope searchScope=module != null ? GlobalSearchScope.moduleWithDependenciesScope(module) : GlobalSearchScope.projectScope(getProject());
      TestNGTestPattern.fillTestObjects(myClasses,patterns,TestSearchScope.MODULE_WITH_DEPENDENCIES,TestNGTestDiscoveryConfiguration.this,searchScope);
    }
  }
;
}
