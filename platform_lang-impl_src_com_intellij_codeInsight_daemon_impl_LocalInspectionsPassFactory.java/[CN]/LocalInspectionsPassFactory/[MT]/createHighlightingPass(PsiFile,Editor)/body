{
  TextRange textRange=calculateRangeToProcess(editor);
  if (textRange == null || !ProjectInspectionProfileManagerImpl.getInstanceImpl(file.getProject()).isCurrentProfileInitialized()) {
    return new ProgressableTextEditorHighlightingPass.EmptyPass(myProject,editor.getDocument());
  }
  TextRange visibleRange=VisibleHighlightingPassFactory.calculateVisibleRange(editor);
  return new MyLocalInspectionsPass(file,editor.getDocument(),textRange,visibleRange,new DefaultHighlightInfoProcessor());
}
