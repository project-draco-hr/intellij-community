{
  myComboBoxPanel=new JPanel();
  myCardLayout=new CardLayout();
  myComboBoxPanel.setLayout(myCardLayout);
  setBorder(IdeBorderFactory.createEmptyBorder(new Insets(4,0,6,0)));
  myProfilesComboBox=new JComboBox();
  myComboBoxPanel.add(myProfilesComboBox,COMBO_CARD);
  mySaveListener=new SaveInputComponentValidator.Wrapper();
  mySubmitNameComponent=new ValidatedTextField(mySaveListener);
  myComboBoxPanel.add(mySubmitNameComponent,EDIT_CARD);
  myComboModel=new SortedComboBoxModel<InspectionProfileImpl>(new Comparator<InspectionProfileImpl>(){
    @Override public int compare(    final InspectionProfileImpl p1,    final InspectionProfileImpl p2){
      return ProfilesConfigurableComboBox.this.compare(p1,p2);
    }
  }
);
  myProfilesComboBox.setModel(myComboModel);
  myProfilesComboBox.setRenderer(new ListCellRenderer<Object>(){
    @Override public Component getListCellRendererComponent(    JList list,    Object o,    int index,    boolean isSelected,    boolean cellHasFocus){
      InspectionProfileImpl value=(InspectionProfileImpl)o;
      TitledSeparator separator=null;
      if (index != -1) {
        if (!value.isProjectLevel()) {
          if (value == myFirstGlobalProfile) {
            separator=new TitledSeparator(GLOBAL_LEVEL_SEPARATOR_TEXT);
          }
        }
 else {
          if (value == myComboModel.get(0)) {
            separator=new TitledSeparator(PROJECT_LEVEL_SEPARATOR_TEXT);
          }
        }
      }
      Component renderedComponent=comboBoxItemsRenderer.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      if (separator == null) {
        return renderedComponent;
      }
      UIUtil.applyStyle(UIUtil.ComponentStyle.MINI,separator.getLabel());
      separator.getLabel().setIcon(separator.getText().equals(PROJECT_LEVEL_SEPARATOR_TEXT) ? AllIcons.General.ProjectSettings : AllIcons.General.Settings);
      separator.setBorder(IdeBorderFactory.createEmptyBorder(2,2,0,2));
      JPanel p=new JPanel();
      p.setLayout(new BorderLayout());
      p.add(separator,BorderLayout.NORTH);
      p.add(renderedComponent,BorderLayout.CENTER);
      return p;
    }
  }
);
  myProfilesComboBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final InspectionProfileImpl profile=getSelectedProfile();
      if (profile != null) {
        onProfileChosen(profile);
      }
    }
  }
);
  setLayout(new BorderLayout());
  add(mySubmitNameComponent.getHintLabel(),BorderLayout.NORTH);
  add(myComboBoxPanel,BorderLayout.CENTER);
  showComboBoxCard();
}
