{
  if (defaultValue == null) {
    if (ApplicationManager.getApplication() != null) {
      final AsyncPromise<Disposable> result=new AsyncPromise<Disposable>();
      DataManager.getInstance().getDataContextFromFocus().doWhenDone(new Consumer<DataContext>(){
        @Override public void consume(        DataContext context){
          Disposable disposable=key.getData(context);
          if (disposable == null) {
            disposable=Disposer.get("ui");
          }
          result.setResult(disposable);
        }
      }
);
      return result;
    }
 else {
      return null;
    }
  }
 else {
    return Promise.resolve(defaultValue);
  }
}
