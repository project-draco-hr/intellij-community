{
  if (psiElements.length == 1) {
    String text;
    if (psiElements[0] instanceof PsiFile) {
      text=RefactoringBundle.message("move.file.0",CopyFilesOrDirectoriesDialog.shortenPath(((PsiFile)psiElements[0]).getVirtualFile()));
    }
 else {
      text=RefactoringBundle.message("move.directory.0",CopyFilesOrDirectoriesDialog.shortenPath(((PsiDirectory)psiElements[0]).getVirtualFile()));
    }
    myNameLabel.setText(text);
  }
 else {
    boolean isFile=true;
    boolean isDirectory=true;
    for (    PsiElement psiElement : psiElements) {
      isFile&=psiElement instanceof PsiFile;
      isDirectory&=psiElement instanceof PsiDirectory;
    }
    myNameLabel.setText(isFile ? RefactoringBundle.message("move.specified.files") : isDirectory ? RefactoringBundle.message("move.specified.directories") : RefactoringBundle.message("move.specified.elements"));
  }
  final String initialTargetPath=initialTargetDirectory == null ? "" : initialTargetDirectory.getVirtualFile().getPresentableUrl();
  myTargetDirectoryField.getChildComponent().setText(initialTargetPath);
  final int lastDirectoryIdx=initialTargetPath.lastIndexOf(File.separator);
  final int textLength=initialTargetPath.length();
  if (lastDirectoryIdx > 0 && lastDirectoryIdx + 1 < textLength) {
    myTargetDirectoryField.getChildComponent().getTextEditor().select(lastDirectoryIdx + 1,textLength);
  }
  validateOKButton();
  myHelpID=helpID;
}
