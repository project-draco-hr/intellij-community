{
  ListItem listItem=toListItem(line);
  if (listItem != null) {
    finishLastListItem(false);
    String out="<li>" + listItem.getBody();
    if (myFirstListItem == null) {
      myFirstListItem=listItem;
      if (listItem.isUnordered()) {
        out="<ul>" + out;
      }
 else {
        out="<ol>" + out;
      }
    }
    myLines.set(ind,out);
    myLastListItemLineInd=ind;
  }
 else   if (myFirstListItem != null && !line.isEmpty() && !StringUtil.isEmptyOrSpaces(line)) {
    if (ind - 1 >= 0 && StringUtil.isEmptyOrSpaces(myLines.get(ind - 1)) && !Character.isWhitespace(line.charAt(0))) {
      finishLastListItem(true);
    }
 else {
      String m=StringUtil.trimLeading(line);
      myLines.set(ind,m);
      myLastListItemLineInd=ind;
    }
  }
}
