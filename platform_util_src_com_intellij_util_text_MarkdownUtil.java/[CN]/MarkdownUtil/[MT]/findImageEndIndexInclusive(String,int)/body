{
  int n=text.length();
  if (text.charAt(imageStartIndex) == '!' && imageStartIndex + 1 < n && text.charAt(imageStartIndex + 1) == '[') {
    int i=imageStartIndex + 2;
    while (i < n && text.charAt(i) != ']') {
      i++;
    }
    if (i < n && i + 1 < n && text.charAt(i + 1) == '(') {
      i+=2;
      while (i < n && text.charAt(i) != ')') {
        i++;
      }
      if (i < n) {
        return i;
      }
    }
  }
  return -1;
}
