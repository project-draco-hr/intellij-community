{
  final VirtualFile[] copy=new VirtualFile[1];
  new WriteCommandAction.Simple(null){
    @Override protected void run() throws Throwable {
      copy[0]=file.copy(this,newParent,copyName);
    }
  }
.execute().throwException();
  return copy[0];
}
