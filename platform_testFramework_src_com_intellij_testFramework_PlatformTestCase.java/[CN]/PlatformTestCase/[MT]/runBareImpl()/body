{
  ThrowableRunnable<Throwable> runnable=new ThrowableRunnable<Throwable>(){
    @Override public void run() throws Throwable {
      ourTestThread=Thread.currentThread();
      ourTestTime=getTimeRequired();
      try {
        try {
          setUp();
        }
 catch (        Throwable e) {
          try {
            tearDown();
          }
 catch (          Throwable ignored) {
          }
          throw e;
        }
        Throwable exception=null;
        try {
          myAssertionsInTestDetected=true;
          runTest();
          myAssertionsInTestDetected=false;
        }
 catch (        Throwable e) {
          exception=e;
        }
 finally {
          try {
            tearDown();
          }
 catch (          Throwable e) {
            if (exception == null) {
              exception=e;
            }
          }
        }
        if (exception != null) {
          throw exception;
        }
      }
  finally {
        ourTestThread=null;
      }
    }
  }
;
  runBareRunnable(runnable);
  if (IdeaLogger.ourErrorsOccurred != null) {
    throw IdeaLogger.ourErrorsOccurred;
  }
  waitForAllLaters();
  if (IdeaLogger.ourErrorsOccurred != null) {
    throw IdeaLogger.ourErrorsOccurred;
  }
}
