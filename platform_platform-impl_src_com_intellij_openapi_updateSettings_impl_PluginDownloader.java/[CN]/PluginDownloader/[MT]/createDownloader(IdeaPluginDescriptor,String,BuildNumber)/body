{
  try {
    PluginId id=descriptor.getPluginId();
    String url=host != null ? getHostUrl(host,descriptor.getUrl()) : getRepositoryUrl(id,buildNumber);
    PluginDownloader downloader=new PluginDownloader(id.getIdString(),url,descriptor.getVersion(),null,descriptor.getName(),null);
    downloader.setDescriptor(descriptor);
    downloader.setDescription(descriptor.getDescription());
    downloader.setDepends(((PluginNode)descriptor).getDepends());
    return downloader;
  }
 catch (  URISyntaxException e) {
    throw new IOException(e);
  }
}
