{
  Application app=ApplicationManager.getApplication();
  ApplicationInfoEx appInfo=ApplicationInfoImpl.getShadowInstance();
  String buildNumberAsString=buildNumber != null ? buildNumber.asString() : app != null ? ApplicationInfo.getInstance().getApiVersion() : appInfo.getBuild().asString();
  String uuid=app != null ? UpdateChecker.getInstallationUID(PropertiesComponent.getInstance()) : UUID.randomUUID().toString();
  URIBuilder uriBuilder=new URIBuilder(appInfo.getPluginsDownloadUrl());
  uriBuilder.addParameter("action","download");
  uriBuilder.addParameter("id",pluginId.getIdString());
  uriBuilder.addParameter("build",buildNumberAsString);
  uriBuilder.addParameter("uuid",uuid);
  return uriBuilder.toString();
}
