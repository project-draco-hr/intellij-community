{
  if (ApplicationManager.getApplication().isWriteAccessAllowed()) {
    Document doc=FileDocumentManager.getInstance().getDocument(file.getVirtualFile());
    if (doc != null) {
      PsiDocumentManager psiDocumentManager=PsiDocumentManager.getInstance(file.getProject());
      if (psiDocumentManager.isDocumentBlockedByPsi(doc)) {
        psiDocumentManager.doPostponedOperationsAndUnblockDocument(doc);
      }
    }
  }
}
