{
  Data data=Data.collect(e);
  if (!data.isValid()) {
    return;
  }
  List<VcsFullCommitDetails> details=data.log.getSelectedDetails();
  if (details.size() != 1) {
    return;
  }
  VcsFullCommitDetails commit=details.get(0);
  HgRepositoryManager repositoryManager=ServiceManager.getService(data.project,HgRepositoryManager.class);
  final HgRepository repository=repositoryManager.getRepositoryForRoot(commit.getRoot());
  if (repository == null) {
    DvcsUtil.noVcsRepositoryForRoot(LOG,commit.getRoot(),data.project,repositoryManager,HgVcs.getInstance(data.project));
    return;
  }
  actionPerformed(repository,commit);
}
