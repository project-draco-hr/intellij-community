{
  super(false);
  myMemoryKind=memoryKind;
  setTitle(DiagnosticBundle.message("diagnostic.out.of.memory.title"));
  myMessageLabel.setIcon(Messages.getErrorIcon());
  myMessageLabel.setText(DiagnosticBundle.message("diagnostic.out.of.memory.error",memoryKind.optionName,ApplicationNamesInfo.getInstance().getProductName()));
  File file=VMOptions.getWriteFile();
  if (file != null) {
    mySettingsFileHintLabel.setText(DiagnosticBundle.message("diagnostic.out.of.memory.willBeSavedTo",file.getPath()));
  }
 else {
    mySettingsFileHintLabel.setVisible(false);
  }
  myIgnoreAction=new AbstractAction(DiagnosticBundle.message("diagnostic.out.of.memory.ignore")){
    @Override public void actionPerformed(    ActionEvent e){
      save();
      close(0);
    }
  }
;
  myShutdownAction=new AbstractAction(DiagnosticBundle.message("diagnostic.out.of.memory.shutdown")){
    @Override public void actionPerformed(    ActionEvent e){
      save();
      System.exit(0);
    }
  }
;
  myShutdownAction.putValue(DialogWrapper.DEFAULT_ACTION,true);
  myHeapSize=VMOptions.readXmx();
  configControls(MemoryKind.HEAP.optionName,myHeapSize,memoryKind == MemoryKind.HEAP,myHeapSizeLabel,myHeapSizeField,myHeapUnitsLabel,myHeapCurrentValueLabel);
  myPermGenSize=VMOptions.readMaxPermGen();
  configControls(MemoryKind.PERM_GEN.optionName,myPermGenSize,memoryKind == MemoryKind.PERM_GEN,myPermGenSizeLabel,myPermGenSizeField,myPermGenUnitsLabel,myPermGenCurrentValueLabel);
  myCodeCacheSize=VMOptions.readCodeCache();
  configControls(MemoryKind.CODE_CACHE.optionName,myCodeCacheSize,memoryKind == MemoryKind.CODE_CACHE,myCodeCacheSizeLabel,myCodeCacheSizeField,myCodeCacheUnitsLabel,myCodeCacheCurrentValueLabel);
  init();
}
