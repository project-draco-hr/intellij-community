{
  if (myResultsPopup == null || !myResultsPopup.isVisible()) {
    return;
  }
  Dimension size=myResultsPopup.getComponent().getPreferredSize();
  if (size.width + 2 < getWidth()) {
    size.width=getWidth();
  }
  Dimension sz=new Dimension(size.width,size.height);
  if (!SystemInfo.isMac) {
    if ((sz.width > POPUP_MAX_WIDTH || sz.height > POPUP_MAX_WIDTH)) {
      final JBScrollPane pane=new JBScrollPane();
      final int extraWidth=pane.getVerticalScrollBar().getWidth() + 1;
      final int extraHeight=pane.getHorizontalScrollBar().getHeight() + 1;
      sz=new Dimension(Math.min(POPUP_MAX_WIDTH,Math.max(getWidth(),sz.width + extraWidth)),Math.min(POPUP_MAX_WIDTH,sz.height + extraHeight));
      sz.width+=20;
      sz.height+=2;
    }
 else {
      sz.width+=2;
      sz.height+=2;
    }
  }
  myResultsPopup.setSize(sz);
  adjustPopup();
}
