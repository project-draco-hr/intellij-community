{
  final AnAction escape=ActionManager.getInstance().getAction("EditorEscape");
  DumbAwareAction closeAction=new DumbAwareAction(){
    @Override public void actionPerformed(    AnActionEvent e){
      if (myFindBalloon != null && myFindBalloon.isVisible()) {
        myFindBalloon.cancel();
      }
      if (myResultsPopup != null && myResultsPopup.isVisible()) {
        myResultsPopup.cancel();
      }
    }
  }
;
  closeAction.registerCustomShortcutSet(escape == null ? CommonShortcuts.ESCAPE : escape.getShortcutSet(),popup.getContent(),popup);
}
