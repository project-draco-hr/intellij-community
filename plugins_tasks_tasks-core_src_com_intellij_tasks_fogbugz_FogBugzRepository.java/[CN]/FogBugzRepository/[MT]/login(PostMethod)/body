{
  LOG.debug("Requesting new token");
  int status=getHttpClient().executeMethod(method);
  if (status != 200) {
    throw new Exception("Error logging in: " + method.getStatusLine());
  }
  Document document=new SAXBuilder(false).build(method.getResponseBodyAsStream()).getDocument();
  XPath path=XPath.newInstance("/response/token");
  Element result=(Element)path.selectSingleNode(document);
  if (result == null) {
    Element error=(Element)XPath.newInstance("/response/error").selectSingleNode(document);
    throw new Exception(error == null ? "Error logging in" : error.getText());
  }
  myToken=result.getTextTrim();
}
