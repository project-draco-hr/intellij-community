{
  TIntHashSet referentFileIds=getReferentFileIds(element);
  if (referentFileIds == null)   return null;
  return getScopeRestrictedByFileTypes(new ScopeWithoutReferencesOnCompilation(referentFileIds,myProjectFileIndex).intersectWith(notScope(myDirtyModulesHolder.getDirtyScope())),myFileTypes.toArray(new FileType[myFileTypes.size()]));
}
