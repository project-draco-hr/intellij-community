{
  instance.computeDeployments(new ServerRuntimeInstance.ComputeDeploymentsCallback(){
    private final List<DeploymentImpl> myDeployments=new ArrayList<DeploymentImpl>();
    @Override public void addDeployment(    @NotNull String deploymentName){
      addDeployment(deploymentName,null);
    }
    @Override public void addDeployment(    @NotNull String deploymentName,    @Nullable DeploymentRuntime deploymentRuntime){
      myDeployments.add(new DeploymentImpl(deploymentName,DeploymentStatus.DEPLOYED,null,deploymentRuntime,null));
    }
    @Override public void succeeded(){
synchronized (myRemoteDeployments) {
        for (        DeploymentImpl deployment : new ArrayList<DeploymentImpl>(myDeployments)) {
          DeploymentImpl oldDeployment=myRemoteDeployments.get(deployment.getName());
          if (oldDeployment != null) {
            oldDeployment.changeState(oldDeployment.getStatus(),deployment.getStatus(),deployment.getStatusText(),deployment.getRuntime());
            myDeployments.remove(deployment);
            myDeployments.add(oldDeployment);
          }
        }
        myRemoteDeployments.clear();
        for (        DeploymentImpl deployment : myDeployments) {
          myRemoteDeployments.put(deployment.getName(),deployment);
        }
      }
      myEventDispatcher.queueDeploymentsChanged(ServerConnectionImpl.this);
      onFinished.run();
    }
    @Override public void errorOccurred(    @NotNull String errorMessage){
synchronized (myRemoteDeployments) {
        myRemoteDeployments.clear();
      }
      myStatusText="Cannot obtain deployments: " + errorMessage;
      myEventDispatcher.queueDeploymentsChanged(ServerConnectionImpl.this);
      onFinished.run();
    }
  }
);
}
