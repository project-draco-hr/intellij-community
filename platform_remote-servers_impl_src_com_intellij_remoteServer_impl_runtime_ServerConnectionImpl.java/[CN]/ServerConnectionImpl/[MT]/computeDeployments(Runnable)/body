{
  connectIfNeeded(new ConnectionCallbackBase<D>(){
    @Override public void connected(    @NotNull ServerRuntimeInstance<D> instance){
      instance.computeDeployments(new ServerRuntimeInstance.ComputeDeploymentsCallback(){
        @Override public void succeeded(        @NotNull List<Deployment> deployments){
synchronized (myRemoteDeployments) {
            myRemoteDeployments.clear();
            for (            Deployment deployment : deployments) {
              myRemoteDeployments.put(deployment.getName(),deployment);
            }
          }
          myEventDispatcher.queueDeploymentsChanged(ServerConnectionImpl.this);
          onFinished.run();
        }
        @Override public void errorOccurred(        @NotNull String errorMessage){
synchronized (myRemoteDeployments) {
            myRemoteDeployments.clear();
          }
          myStatusText="Cannot obtain deployments: " + errorMessage;
          myEventDispatcher.queueDeploymentsChanged(ServerConnectionImpl.this);
          onFinished.run();
        }
      }
);
    }
  }
);
}
