{
  if (executor != environment.getExecutor()) {
    environment=new ExecutionEnvironmentBuilder(environment).executor(executor).build();
  }
  if (!runner.getRunnerId().equals(environment.getRunnerId())) {
    environment=new ExecutionEnvironmentBuilder(environment).runnerId(runner.getRunnerId()).build();
  }
  return attachVirtualMachine(environment,state,reuseContent,remoteConnection,pollConnection);
}
