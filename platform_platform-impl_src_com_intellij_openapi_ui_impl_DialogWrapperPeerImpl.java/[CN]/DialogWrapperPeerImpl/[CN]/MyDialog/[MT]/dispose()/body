{
  if (isShowing()) {
    hide();
  }
  if (myWindowListener != null) {
    myWindowListener.saveSize();
    removeWindowListener(myWindowListener);
    myWindowListener=null;
  }
  if (myComponentListener != null) {
    removeComponentListener(myComponentListener);
    myComponentListener=null;
  }
  if (myFocusTrackback != null && !(myFocusTrackback.isSheduledForRestore() || myFocusTrackback.isWillBeSheduledForRestore())) {
    myFocusTrackback.dispose();
    myFocusTrackback=null;
  }
  final BufferStrategy strategy=getBufferStrategy();
  if (strategy != null) {
    strategy.dispose();
  }
  super.dispose();
  if (rootPane != null) {
    try {
      ReflectionUtil.resetField(rootPane.getClass(),null,"glassPane");
      ReflectionUtil.resetField(rootPane.getClass(),null,"contentPane");
      rootPane=null;
      ReflectionUtil.resetField(Window.class,null,"windowListener");
    }
 catch (    Exception ignored) {
    }
  }
  try {
    final List<?> list=ReflectionUtil.getField(Dialog.class,null,null,"modalDialogs");
    list.remove(this);
  }
 catch (  final Exception ignored) {
  }
}
