{
  reader.beginObject();
  String sourceRoot=null;
  JsonReaderEx sourcesReader=null;
  List<String> names=null;
  String encodedMappings=null;
  String file=null;
  int version=-1;
  while (reader.hasNext()) {
    String propertyName=reader.nextName();
    if (propertyName.equals("sections")) {
      throw new IOException("sections is not supported yet");
    }
 else     if (propertyName.equals("version")) {
      version=reader.nextInt();
    }
 else     if (propertyName.equals("sourceRoot")) {
      sourceRoot=readSourcePath(reader);
    }
 else     if (propertyName.equals("sources")) {
      sourcesReader=reader.subReader();
      reader.skipValue();
    }
 else     if (propertyName.equals("names")) {
      reader.beginArray();
      if (reader.hasNext()) {
        names=new ArrayList<String>();
        do {
          names.add(reader.nextString(true));
        }
 while (reader.hasNext());
      }
 else {
        names=Collections.emptyList();
      }
      reader.endArray();
    }
 else     if (propertyName.equals("mappings")) {
      encodedMappings=reader.nextString();
    }
 else     if (propertyName.equals("file")) {
      file=reader.nextString();
    }
 else {
      reader.skipValue();
    }
  }
  reader.close();
  if (version != 3) {
    throw new IOException("Unsupported sourcemap version: " + version);
  }
  if (sourcesReader == null) {
    throw new IOException("sources is not specified");
  }
  if (StringUtil.isEmpty(encodedMappings)) {
    return null;
  }
  List<String> sources=readSources(sourcesReader,sourceRoot);
  @SuppressWarnings("unchecked") TreeSet<MappingEntry>[] reverseMappingsBySourceUrl=new TreeSet[sources.size()];
  readMappings(encodedMappings,line,column,mappings,reverseMappingsBySourceUrl,names);
  MappingEntry[][] sourceToEntries=new MappingEntry[reverseMappingsBySourceUrl.length][];
  for (int i=0; i < reverseMappingsBySourceUrl.length; i++) {
    TreeSet<MappingEntry> entries=reverseMappingsBySourceUrl[i];
    if (entries != null) {
      sourceToEntries[i]=entries.toArray(new MappingEntry[entries.size()]);
    }
  }
  return new SourceMap(file,mappings,sourceToEntries,sourceResolverFactory.fun(sources));
}
