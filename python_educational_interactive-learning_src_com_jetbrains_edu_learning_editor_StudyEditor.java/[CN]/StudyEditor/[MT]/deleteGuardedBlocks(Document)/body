{
  if (document instanceof DocumentImpl) {
    DocumentImpl documentImpl=(DocumentImpl)document;
    List<RangeMarker> blocks=documentImpl.getGuardedBlocks();
    for (    final RangeMarker block : blocks) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          ApplicationManager.getApplication().runWriteAction(new Runnable(){
            @Override public void run(){
              document.removeGuardedBlock(block);
            }
          }
);
        }
      }
);
    }
  }
}
