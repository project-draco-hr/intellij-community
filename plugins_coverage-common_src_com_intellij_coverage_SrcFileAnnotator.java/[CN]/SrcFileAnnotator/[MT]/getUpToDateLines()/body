{
  final int lineCount=myDocument.getLineCount();
  final String[] lines=new String[lineCount];
  final Runnable runnable=new Runnable(){
    public void run(){
      final CharSequence chars=myDocument.getCharsSequence();
      for (int i=0; i < lineCount; i++) {
        lines[i]=chars.subSequence(myDocument.getLineStartOffset(i),myDocument.getLineEndOffset(i)).toString();
      }
    }
  }
;
  ApplicationManager.getApplication().runReadAction(runnable);
  return lines;
}
