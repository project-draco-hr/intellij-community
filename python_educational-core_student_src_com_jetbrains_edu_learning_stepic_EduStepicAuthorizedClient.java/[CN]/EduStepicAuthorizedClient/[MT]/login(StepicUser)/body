{
  final String login=user.getEmail();
  final String refreshToken=user.getRefreshToken();
  if (StringUtil.isEmptyOrSpaces(login)) {
    return showLoginDialog();
  }
 else {
    if (StringUtil.isNotEmpty(refreshToken)) {
      final StepicWrappers.TokenInfo tokenInfo=login(refreshToken);
      if (tokenInfo != null) {
        user.setupTokenInfo(tokenInfo);
      }
    }
 else {
      final StepicUser stepicUser=login(login,user.getPassword());
      if (stepicUser == null) {
        return showLoginDialog();
      }
      return stepicUser;
    }
  }
  return null;
}
