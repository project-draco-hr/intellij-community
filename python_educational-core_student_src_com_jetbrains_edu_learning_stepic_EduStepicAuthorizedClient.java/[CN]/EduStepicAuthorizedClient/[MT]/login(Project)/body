{
  final StepicUser user=StudyTaskManager.getInstance(project).getUser();
  final String login=user.getEmail();
  final String refreshToken=user.getRefreshToken();
  if (StringUtil.isEmptyOrSpaces(login)) {
    return showLoginDialog();
  }
 else {
    if (StringUtil.isNotEmpty(refreshToken)) {
      final StepicWrappers.TokenInfo tokenInfo=login(refreshToken);
      user.setupTokenInfo(tokenInfo);
    }
 else {
      final StepicUser stepicUser=login(login,user.getPassword());
      if (stepicUser == null) {
        return showLoginDialog();
      }
 else {
        StudyTaskManager.getInstance(project).setUser(stepicUser);
      }
    }
  }
  return true;
}
