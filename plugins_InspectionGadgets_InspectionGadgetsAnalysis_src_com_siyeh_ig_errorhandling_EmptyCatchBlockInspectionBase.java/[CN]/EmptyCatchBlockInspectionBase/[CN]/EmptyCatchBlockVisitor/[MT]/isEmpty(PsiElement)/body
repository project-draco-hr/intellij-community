{
  if (!m_includeComments && element instanceof PsiComment) {
    return true;
  }
 else   if (element instanceof PsiEmptyStatement) {
    return !m_includeComments || PsiTreeUtil.getChildOfType(element,PsiComment.class) == null;
  }
 else   if (element instanceof PsiWhiteSpace) {
    return true;
  }
 else   if (element instanceof PsiBlockStatement) {
    final PsiBlockStatement block=(PsiBlockStatement)element;
    return isEmpty(block.getCodeBlock());
  }
 else   if (element instanceof PsiCodeBlock) {
    final PsiCodeBlock codeBlock=(PsiCodeBlock)element;
    PsiElement bodyElement=codeBlock.getFirstBodyElement();
    final PsiElement lastBodyElement=codeBlock.getLastBodyElement();
    while (bodyElement != null) {
      if (!isEmpty(bodyElement)) {
        return false;
      }
      if (bodyElement == lastBodyElement) {
        break;
      }
      bodyElement=bodyElement.getNextSibling();
    }
    return true;
  }
  return false;
}
