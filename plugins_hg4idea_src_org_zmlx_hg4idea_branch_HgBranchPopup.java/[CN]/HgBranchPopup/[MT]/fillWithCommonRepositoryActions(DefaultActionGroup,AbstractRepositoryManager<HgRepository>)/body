{
  List<HgRepository> allRepositories=repositoryManager.getRepositories();
  popupGroup.add(new HgBranchPopupActions.HgNewBranchAction(myProject,allRepositories,myCurrentRepository));
  popupGroup.addAction(new HgBranchPopupActions.HgNewBookmarkAction(allRepositories,myCurrentRepository));
  popupGroup.addAction(new HgBranchPopupActions.HgCloseBranchAction(allRepositories,myCurrentRepository));
  popupGroup.addAction(new HgBranchPopupActions.HgShowUnnamedHeadsForCurrentBranchAction(myCurrentRepository));
  popupGroup.addAll(createRepositoriesActions());
  popupGroup.addSeparator("Common Branches");
  for (  String branch : myMultiRootBranchConfig.getLocalBranchNames()) {
    List<HgRepository> repositories=filterRepositoriesNotOnThisBranch(branch,allRepositories);
    if (!repositories.isEmpty()) {
      popupGroup.add(new HgCommonBranchActions(myProject,repositories,branch));
    }
  }
  popupGroup.addSeparator("Common Bookmarks");
  for (  String branch : ((HgMultiRootBranchConfig)myMultiRootBranchConfig).getBookmarkNames()) {
    List<HgRepository> repositories=filterRepositoriesNotOnThisBranch(branch,allRepositories);
    if (!repositories.isEmpty()) {
      popupGroup.add(new HgBranchPopupActions.BookmarkActions(myProject,repositories,branch));
    }
  }
}
