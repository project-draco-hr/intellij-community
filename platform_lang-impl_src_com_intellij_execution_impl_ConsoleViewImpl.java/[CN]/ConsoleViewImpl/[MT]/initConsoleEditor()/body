{
  myEditor=createConsoleEditor();
  registerConsoleEditorActions();
  myEditor.getScrollPane().setBorder(null);
  myEditor.getScrollPane().addMouseWheelListener(new MouseWheelListener(){
    @Override public void mouseWheelMoved(    MouseWheelEvent e){
      if (e.getWheelRotation() < 0) {
        myCancelStickToEnd=true;
      }
    }
  }
);
  myEditor.getScrollPane().getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener(){
    @Override public void adjustmentValueChanged(    AdjustmentEvent e){
      JScrollBar scrollBar=(JScrollBar)e.getAdjustable();
      boolean vscrollAtBottom=scrollBar.getValue() == scrollBar.getMaximum() - scrollBar.getVisibleAmount();
      if (e.getValueIsAdjusting()) {
        myCancelStickToEnd=!vscrollAtBottom;
      }
      if (vscrollAtBottom && !isStickingToEnd()) {
        scrollToEnd();
      }
    }
  }
);
  myHyperlinks=new EditorHyperlinkSupport(myEditor,myProject);
  myEditor.getScrollingModel().addVisibleAreaListener(new VisibleAreaListener(){
    @Override public void visibleAreaChanged(    VisibleAreaEvent e){
      Rectangle oldR=e.getOldRectangle();
      if (oldR != null && oldR.height <= 0 && e.getNewRectangle().height > 0 && isStickingToEnd()) {
        scrollToEnd();
      }
    }
  }
);
}
