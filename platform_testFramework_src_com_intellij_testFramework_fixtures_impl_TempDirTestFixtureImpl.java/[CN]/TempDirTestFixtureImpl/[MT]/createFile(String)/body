{
  final File file=new File(createTempDirectory(),name);
  return ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      FileUtil.createIfDoesntExist(file);
      return LocalFileSystem.getInstance().refreshAndFindFileByIoFile(file);
    }
  }
);
}
