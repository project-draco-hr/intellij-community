{
  final Ref<VirtualFile> result=new Ref<VirtualFile>(null);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        final String fullPath=myTempDir.getCanonicalPath().replace(File.separatorChar,'/') + "/" + path;
        final VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByPath(fullPath);
        result.set(file);
      }
 catch (      IOException e) {
        Assert.fail("Cannot find " + path + ": "+ e);
      }
    }
  }
);
  return result.get();
}
