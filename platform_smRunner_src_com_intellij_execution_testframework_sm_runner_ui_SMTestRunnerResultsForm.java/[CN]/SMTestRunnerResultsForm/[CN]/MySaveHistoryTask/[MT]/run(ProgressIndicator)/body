{
  try {
    SAXTransformerFactory transformerFactory=(SAXTransformerFactory)TransformerFactory.newInstance();
    TransformerHandler handler=transformerFactory.newTransformerHandler();
    handler.getTransformer().setOutputProperty(OutputKeys.INDENT,"yes");
    handler.getTransformer().setOutputProperty("{http://xml.apache.org/xslt}indent-amount","4");
    StringWriter w=new StringWriter();
    handler.setResult(new StreamResult(w));
    final SMTestProxy.SMRootTestProxy root=myRoot;
    final RunConfiguration configuration=myConfiguration;
    if (root != null && configuration != null) {
      TestResultsXmlFormatter.execute(root,configuration,handler);
    }
    myOutput=w.toString();
  }
 catch (  ProcessCanceledException e) {
    throw e;
  }
catch (  Exception e) {
    LOG.info("Export to history failed",e);
  }
}
