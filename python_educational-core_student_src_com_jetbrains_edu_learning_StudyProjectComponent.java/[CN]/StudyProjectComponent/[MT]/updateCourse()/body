{
  final Course currentCourse=StudyTaskManager.getInstance(myProject).getCourse();
  final CourseInfo info=CourseInfo.fromCourse(currentCourse);
  if (info == null)   return;
  final File resourceDirectory=StudyUtils.getCourseDirectory(myProject,currentCourse);
  if (resourceDirectory.exists()) {
    FileUtil.delete(resourceDirectory);
  }
  final Course course=EduStepicConnector.getCourse(myProject,info);
  if (course == null)   return;
  flushCourse(myProject,course);
  course.initCourse(false);
  StudyLanguageManager manager=StudyUtils.getLanguageManager(course);
  if (manager == null) {
    LOG.info("Study Language Manager is null for " + course.getLanguageById().getDisplayName());
    return;
  }
  for (  Lesson lesson : course.getLessons()) {
    final Lesson studentLesson=currentCourse.getLesson(lesson.getName());
    final File lessonDir=new File(myProject.getBasePath(),lesson.getName());
    for (    Task task : lesson.getTaskList()) {
      final Task studentTask=studentLesson.getTask(task.getName());
      if (studentTask == null || StudyStatus.Solved.equals(studentTask.getStatus()))       continue;
      task.initTask(studentLesson,false);
      task.setIndex(studentTask.getIndex());
      studentLesson.updateTask(studentTask,task);
      final File toTask=new File(lessonDir,task.getName());
      final String taskPath=FileUtil.join(resourceDirectory.getPath(),lesson.getName(),task.getName());
      final File taskDir=new File(taskPath);
      if (!taskDir.exists())       return;
      final File[] taskFiles=taskDir.listFiles();
      if (taskFiles == null)       continue;
      for (      File fromFile : taskFiles) {
        copyFile(fromFile,new File(toTask,fromFile.getName()));
      }
    }
  }
  final Notification notification=new Notification("Update.course","Course update","Current course is synchronized",NotificationType.INFORMATION);
  notification.notify(myProject);
}
