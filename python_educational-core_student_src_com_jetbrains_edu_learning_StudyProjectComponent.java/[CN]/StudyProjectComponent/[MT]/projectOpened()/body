{
  final Course course=StudyTaskManager.getInstance(myProject).getCourse();
  if (StudyUtils.hasJavaFx()) {
    Platform.setImplicitExit(false);
  }
  if (course != null && !course.isUpToDate()) {
    updateCourse();
    course.setUpdated();
  }
  registerStudyToolWindow(course);
  ApplicationManager.getApplication().invokeLater(new DumbAwareRunnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new DumbAwareRunnable(){
        @Override public void run(){
          if (course != null) {
            final UISettings instance=UISettings.getInstance();
            if (instance != null) {
              instance.HIDE_TOOL_STRIPES=false;
              instance.fireUISettingsChanged();
            }
            registerShortcuts();
            EduUsagesCollector.projectTypeOpened(course.isAdaptive() ? EduNames.ADAPTIVE : EduNames.STUDY);
          }
        }
      }
);
    }
  }
);
}
