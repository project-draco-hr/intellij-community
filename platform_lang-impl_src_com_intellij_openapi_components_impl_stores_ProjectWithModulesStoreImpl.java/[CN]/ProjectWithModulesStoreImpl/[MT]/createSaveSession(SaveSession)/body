{
  List<ComponentSaveSession> moduleSaveSessions=new SmartList<ComponentSaveSession>();
  for (  Module module : getPersistentModules()) {
    ContainerUtil.addIfNotNull(moduleSaveSessions,((ModuleImpl)module).getStateStore().startSave());
  }
  if (moduleSaveSessions.isEmpty()) {
    return super.createSaveSession(storageManagerSaveSession);
  }
 else {
    return new ProjectWithModulesSaveSession(storageManagerSaveSession,moduleSaveSessions);
  }
}
