{
  return new StateStorageManagerExternalizationSession(){
    @NotNull @Override public List<StateStorage.SaveSession> createSaveSessions(){
      StateStorageManagerImpl storageManager=(StateStorageManagerImpl)ComponentsPackage.getStateStore(myModule).getStateStorageManager();
      FileBasedStorage storage=ContainerUtil.getFirstItem(storageManager.getCachedFileStorages(Collections.singletonList(StoragePathMacros.MODULE_FILE)));
      if (storage != null && storage.getStorageData().isDirty()) {
        getExternalizationSession(storage);
      }
      return super.createSaveSessions();
    }
  }
;
}
