{
  final PsiPackage psiPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (psiPackage == null)   return null;
  final String packageFQName=psiPackage.getQualifiedName();
  final ProjectFileIndex projectFileIndex=ProjectRootManager.getInstance(directory.getProject()).getFileIndex();
  final Module module=projectFileIndex.getModuleForFile(directory.getVirtualFile());
  if (module == null)   return null;
  final boolean isInTestContent=projectFileIndex.isInTestSourceContent(directory.getVirtualFile());
  if (!currentSuite.isTrackTestFolders() && isInTestContent) {
    return null;
  }
  final Pair<String,Module> qualifiedPair=new Pair<String,Module>(packageFQName,module);
  return isInTestContent ? getCoverageInformationString(myTestDirCoverageInfos.get(qualifiedPair),coverageDataManager.isSubCoverageActive()) : getCoverageInformationString(myDirCoverageInfos.get(qualifiedPair),coverageDataManager.isSubCoverageActive());
}
