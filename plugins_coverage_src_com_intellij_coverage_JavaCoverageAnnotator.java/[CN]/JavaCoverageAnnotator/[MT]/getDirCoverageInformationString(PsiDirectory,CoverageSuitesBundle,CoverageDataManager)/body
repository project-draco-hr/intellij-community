{
  final PsiPackage psiPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (psiPackage == null)   return null;
  final ProjectFileIndex projectFileIndex=ProjectRootManager.getInstance(directory.getProject()).getFileIndex();
  final VirtualFile virtualFile=directory.getVirtualFile();
  final boolean isInTestContent=projectFileIndex.isInTestSourceContent(virtualFile);
  if (!currentSuite.isTrackTestFolders() && isInTestContent) {
    return null;
  }
  return isInTestContent ? getCoverageInformationString(myTestDirCoverageInfos.get(virtualFile),coverageDataManager.isSubCoverageActive()) : getCoverageInformationString(myDirCoverageInfos.get(virtualFile),coverageDataManager.isSubCoverageActive());
}
