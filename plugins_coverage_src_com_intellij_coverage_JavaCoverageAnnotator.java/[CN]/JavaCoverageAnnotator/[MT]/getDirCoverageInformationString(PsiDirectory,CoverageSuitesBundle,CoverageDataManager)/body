{
  final PsiPackage psiPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (psiPackage == null)   return null;
  final VirtualFile virtualFile=directory.getVirtualFile();
  final boolean isInTestContent=TestSourcesFilter.isTestSources(virtualFile,directory.getProject());
  if (!currentSuite.isTrackTestFolders() && isInTestContent) {
    return null;
  }
  return getCoverageInformationString(isInTestContent ? myTestDirCoverageInfos.get(virtualFile) : myDirCoverageInfos.get(virtualFile),coverageDataManager.isSubCoverageActive());
}
