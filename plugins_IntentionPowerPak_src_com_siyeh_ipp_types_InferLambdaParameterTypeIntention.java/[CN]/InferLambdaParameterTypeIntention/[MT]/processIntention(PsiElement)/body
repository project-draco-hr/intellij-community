{
  final PsiLambdaExpression lambdaExpression=PsiTreeUtil.getParentOfType(element,PsiLambdaExpression.class);
  LOG.assertTrue(lambdaExpression != null);
  final PsiType functionalInterfaceType=lambdaExpression.getFunctionalInterfaceType();
  final String buf=getInferredTypes(functionalInterfaceType,lambdaExpression,true);
  final Project project=element.getProject();
  final PsiMethod methodFromText=JavaPsiFacade.getElementFactory(project).createMethodFromText("void foo" + buf,element);
  JavaCodeStyleManager.getInstance(project).shortenClassReferences(lambdaExpression.getParameterList().replace(methodFromText.getParameterList()));
}
