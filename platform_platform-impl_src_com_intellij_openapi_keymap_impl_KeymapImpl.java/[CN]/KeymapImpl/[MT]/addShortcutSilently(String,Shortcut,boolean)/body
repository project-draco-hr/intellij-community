{
  LinkedHashSet<Shortcut> list=myActionId2ListOfShortcuts.get(actionId);
  if (list == null) {
    list=new LinkedHashSet<Shortcut>();
    myActionId2ListOfShortcuts.put(actionId,list);
    Shortcut[] boundShortcuts=getBoundShortcuts(actionId);
    if (boundShortcuts != null) {
      ContainerUtil.addAll(list,boundShortcuts);
    }
 else     if (myParent != null) {
      ContainerUtil.addAll(list,getParentShortcuts(actionId));
    }
  }
  list.add(shortcut);
  if (checkParentShortcut && myParent != null && areShortcutsEqual(getParentShortcuts(actionId),getShortcuts(actionId))) {
    myActionId2ListOfShortcuts.remove(actionId);
  }
  cleanShortcutsCache();
}
