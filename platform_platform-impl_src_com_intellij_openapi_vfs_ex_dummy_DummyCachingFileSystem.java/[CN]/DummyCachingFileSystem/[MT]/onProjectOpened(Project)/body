{
  Disposer.register(project,new Disposable(){
    @Override public void dispose(){
      onProjectClosed(project);
    }
  }
);
  clearCache();
  String projectId=project.getLocationHash();
  myProject2Id.put(project,projectId);
  List<Project> projects=myProject2Id.getKeysByValue(projectId);
  if (projects != null && projects.size() > 1) {
    LOG.error("project " + projectId + " already registered: "+ projects);
  }
}
