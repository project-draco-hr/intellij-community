{
  myProtocol=protocol;
  final Application application=ApplicationManager.getApplication();
  application.getMessageBus().connect(application).subscribe(ProjectManager.TOPIC,new ProjectManagerAdapter(){
    @Override public void projectOpened(    final Project project){
      onProjectOpened(project);
      Disposer.register(project,new Disposable(){
        @Override public void dispose(){
          onProjectClosed(project);
        }
      }
);
    }
  }
);
  initProjectMap();
}
