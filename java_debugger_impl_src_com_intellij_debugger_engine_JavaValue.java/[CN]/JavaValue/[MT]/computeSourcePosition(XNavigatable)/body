{
  if (navigatable instanceof XInlineSourcePosition && !(navigatable instanceof XNearestSourcePosition) && !(myValueDescriptor instanceof ThisDescriptorImpl || myValueDescriptor instanceof LocalVariableDescriptor)) {
    return;
  }
  myEvaluationContext.getManagerThread().schedule(new SuspendContextCommandImpl(myEvaluationContext.getSuspendContext()){
    @Override public Priority getPriority(){
      if (navigatable instanceof XInlineSourcePosition) {
        return Priority.LOWEST;
      }
      return Priority.NORMAL;
    }
    @Override protected void commandCancelled(){
      navigatable.setSourcePosition(null);
    }
    @Override public void contextAction() throws Exception {
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        @Override public void run(){
          final boolean nearest=navigatable instanceof XNearestSourcePosition;
          SourcePosition position=SourcePositionProvider.getSourcePosition(myValueDescriptor,getProject(),getDebuggerContext(),nearest);
          if (position != null) {
            navigatable.setSourcePosition(DebuggerUtilsEx.toXSourcePosition(position));
          }
        }
      }
);
    }
  }
);
}
