{
  if (myEvaluationContext.getSuspendContext().isResumed())   return;
  myEvaluationContext.getDebugProcess().getManagerThread().schedule(new DebuggerContextCommandImpl(getDebuggerContext()){
    @Override public void threadAction(){
      Icon nodeIcon;
      if (myValueDescriptor instanceof FieldDescriptorImpl && ((FieldDescriptorImpl)myValueDescriptor).isStatic()) {
        nodeIcon=PlatformIcons.FIELD_ICON;
      }
 else       if (myValueDescriptor.isArray()) {
        nodeIcon=AllIcons.Debugger.Db_array;
      }
 else       if (myValueDescriptor.isPrimitive()) {
        nodeIcon=AllIcons.Debugger.Db_primitive;
      }
 else {
        if (myValueDescriptor instanceof WatchItemDescriptor) {
          nodeIcon=AllIcons.Debugger.Watch;
        }
 else {
          nodeIcon=AllIcons.Debugger.Value;
        }
      }
      final String[] strings=splitValue(myValueDescriptor.getValueLabel());
      XValuePresentation presentation=new XRegularValuePresentation(strings[1],strings[0]);
      if (myValueDescriptor.isString()) {
        presentation=new TypedStringValuePresentation(StringUtil.unquoteString(strings[1]),strings[0]);
        if (strings[1].length() > XValueNode.MAX_VALUE_LENGTH) {
          node.setFullValueEvaluator(new XFullValueEvaluator(){
            @Override public void startEvaluation(            @NotNull XFullValueEvaluationCallback callback){
              final String valueAsString=DebuggerUtilsEx.getValueOrErrorAsString(getEvaluationContext(),myValueDescriptor.getValue());
              callback.evaluated(valueAsString);
            }
          }
);
        }
      }
      node.setPresentation(nodeIcon,presentation,myValueDescriptor.isExpandable());
    }
  }
);
}
