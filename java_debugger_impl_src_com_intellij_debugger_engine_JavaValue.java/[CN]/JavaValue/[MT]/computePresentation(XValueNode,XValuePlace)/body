{
  if (myEvaluationContext.getSuspendContext().isResumed())   return;
  myEvaluationContext.getDebugProcess().getManagerThread().schedule(new DebuggerContextCommandImpl(getDebuggerContext()){
    @Override public void threadAction(){
      Icon nodeIcon;
      if (myValueDescriptor instanceof FieldDescriptorImpl && ((FieldDescriptorImpl)myValueDescriptor).isStatic()) {
        nodeIcon=PlatformIcons.FIELD_ICON;
      }
 else       if (myValueDescriptor.isArray()) {
        nodeIcon=AllIcons.Debugger.Db_array;
      }
 else       if (myValueDescriptor.isPrimitive()) {
        nodeIcon=AllIcons.Debugger.Db_primitive;
      }
 else {
        if (myValueDescriptor instanceof WatchItemDescriptor) {
          nodeIcon=AllIcons.Debugger.Watch;
        }
 else {
          Icon icon=myValueDescriptor.getValueIcon();
          nodeIcon=icon != null ? icon : AllIcons.Debugger.Value;
        }
      }
      final String[] strings=splitValue(myValueDescriptor.getValueLabel());
      String value=StringUtil.notNullize(strings[1]);
      XValuePresentation presentation=new XRegularValuePresentation(value,strings[0]);
      if (myValueDescriptor.isString()) {
        presentation=new TypedStringValuePresentation(StringUtil.unquoteString(value),strings[0]);
      }
      if (value.length() > XValueNode.MAX_VALUE_LENGTH) {
        node.setFullValueEvaluator(new XFullValueEvaluator(){
          @Override public void startEvaluation(          @NotNull final XFullValueEvaluationCallback callback){
            myEvaluationContext.getDebugProcess().getManagerThread().schedule(new DebuggerContextCommandImpl(getDebuggerContext()){
              @Override public void threadAction(){
                final String valueAsString=DebuggerUtilsEx.getValueOrErrorAsString(myEvaluationContext,myValueDescriptor.getValue());
                DebuggerInvocationUtil.invokeLater(getProject(),new Runnable(){
                  @Override public void run(){
                    callback.evaluated(valueAsString);
                  }
                }
);
              }
            }
);
          }
        }
);
      }
      node.setPresentation(nodeIcon,presentation,myValueDescriptor.isExpandable());
    }
  }
);
}
