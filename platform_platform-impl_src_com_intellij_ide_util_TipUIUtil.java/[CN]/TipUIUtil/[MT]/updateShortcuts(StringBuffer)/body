{
  int lastIndex=0;
  while (true) {
    lastIndex=text.indexOf(SHORTCUT_ENTITY,lastIndex);
    if (lastIndex < 0)     return;
    final int actionIdStart=lastIndex + SHORTCUT_ENTITY.length();
    int actionIdEnd=text.indexOf(";",actionIdStart);
    if (actionIdEnd < 0) {
      return;
    }
    final String actionId=text.substring(actionIdStart,actionIdEnd);
    String shortcutText=getShortcutText(actionId,KeymapManager.getInstance().getActiveKeymap());
    if (shortcutText == null) {
      Keymap defKeymap=KeymapManager.getInstance().getKeymap(DefaultKeymap.getInstance().getDefaultKeymapName());
      if (defKeymap != null) {
        shortcutText=getShortcutText(actionId,defKeymap);
        if (shortcutText != null) {
          shortcutText+=" in default keymap";
        }
      }
    }
    if (shortcutText == null) {
      shortcutText="<no shortcut for action " + actionId + ">";
    }
    text.replace(lastIndex,actionIdEnd + 1,shortcutText);
    lastIndex+=shortcutText.length();
  }
}
