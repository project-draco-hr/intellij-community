{
  if (tip == null)   return;
  try {
    PluginDescriptor pluginDescriptor=tip.getPluginDescriptor();
    ClassLoader tipLoader=pluginDescriptor == null ? TipUIUtil.class.getClassLoader() : ObjectUtils.notNull(pluginDescriptor.getPluginClassLoader(),TipUIUtil.class.getClassLoader());
    URL url=ResourceUtil.getResource(tipLoader,"/tips/",tip.fileName);
    if (url == null) {
      setCantReadText(browser,tip);
      return;
    }
    StringBuffer text=new StringBuffer(ResourceUtil.loadText(url));
    updateShortcuts(text);
    updateImages(text,tipLoader);
    String replaced=text.toString().replace("&productName;",ApplicationNamesInfo.getInstance().getFullProductName());
    String major=ApplicationInfo.getInstance().getMajorVersion();
    replaced=replaced.replace("&majorVersion;",major);
    String minor=ApplicationInfo.getInstance().getMinorVersion();
    replaced=replaced.replace("&minorVersion;",minor);
    replaced=replaced.replace("&majorMinorVersion;",major + ("0".equals(minor) ? "" : ("." + minor)));
    if (UIUtil.isUnderDarcula()) {
      replaced=replaced.replace("css/tips.css","css/tips_darcula.css");
    }
    browser.read(new StringReader(replaced),url);
  }
 catch (  IOException e) {
    setCantReadText(browser,tip);
  }
}
