{
  final VirtualFile virtualFile=event.getData(VcsDataKeys.VCS_VIRTUAL_FILE);
  final Project project=event.getData(CommonDataKeys.PROJECT);
  final VcsRevisionNumber revision=getRevisionNumber(event);
  if (revision == null || virtualFile == null || project == null) {
    return;
  }
  final GitLog log=GitProjectLogManager.getInstance(project).getLog();
  if (log == null) {
    return;
  }
  ToolWindow window=ToolWindowManager.getInstance(project).getToolWindow(ChangesViewContentManager.TOOLWINDOW_ID);
  ContentManager cm=window.getContentManager();
  Content[] contents=cm.getContents();
  for (  Content content : contents) {
    if (GitProjectLogManager.CONTENT_KEY.equals(content.getDisplayName())) {
      cm.setSelectedContent(content);
    }
  }
  Runnable selectCommit=new Runnable(){
    @Override public void run(){
      log.selectCommit(revision.asString());
    }
  }
;
  if (!window.isVisible()) {
    window.activate(selectCommit,true);
  }
 else {
    selectCommit.run();
  }
}
