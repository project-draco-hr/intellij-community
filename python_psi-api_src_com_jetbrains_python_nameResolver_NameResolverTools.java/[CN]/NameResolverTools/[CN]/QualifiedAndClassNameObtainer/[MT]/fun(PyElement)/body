{
  PyElement elementToCheck=param;
  final PsiReference reference;
  if (param instanceof PyReferenceOwner) {
    reference=((PyReferenceOwner)param).getReference(PyResolveContext.noImplicits());
  }
 else {
    reference=param.getReference();
  }
  if (reference != null) {
    final PsiElement resolvedElement=reference.resolve();
    if (resolvedElement instanceof PyElement) {
      elementToCheck=(PyElement)resolvedElement;
    }
  }
  String qualifiedName=null;
  if (elementToCheck instanceof PyQualifiedNameOwner) {
    qualifiedName=((PyQualifiedNameOwner)elementToCheck).getQualifiedName();
  }
  String className=null;
  if (elementToCheck instanceof PyFunction) {
    final PyClass aClass=((PyFunction)elementToCheck).getContainingClass();
    if (aClass != null) {
      className=aClass.getQualifiedName();
    }
  }
  return Pair.create(qualifiedName,className);
}
