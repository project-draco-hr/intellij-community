{
  File file=new File(dir,path);
  if (content instanceof BufferExposingByteArrayInputStream) {
    FileUtil.writeToFile(file,((BufferExposingByteArrayInputStream)content).getInternalBuffer(),0,size);
    return;
  }
  FileUtil.createParentDirs(file);
  FileOutputStream out=new FileOutputStream(file);
  try {
    FileUtil.copy(content,size,out);
  }
  finally {
    out.close();
  }
}
