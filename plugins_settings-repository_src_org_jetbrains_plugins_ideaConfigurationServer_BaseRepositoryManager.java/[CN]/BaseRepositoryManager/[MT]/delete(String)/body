{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Remove " + path);
  }
  try {
synchronized (lock) {
      File file=new File(dir,path);
      boolean isFile=file.isFile();
      FileUtil.delete(file);
      if (isFile) {
        File parent=file.getParentFile();
        while (parent != null && !parent.equals(dir) && parent.delete()) {
          parent=parent.getParentFile();
        }
      }
      deleteFromIndex(path,isFile);
    }
  }
 catch (  Exception e) {
    LOG.error(e);
  }
}
