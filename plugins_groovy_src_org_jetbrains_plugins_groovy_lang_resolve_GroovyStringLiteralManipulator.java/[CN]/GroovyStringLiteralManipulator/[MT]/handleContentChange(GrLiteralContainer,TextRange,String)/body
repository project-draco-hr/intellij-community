{
  if (!(expr.getValue() instanceof String)) {
  }
  final String oldText=expr instanceof GrLiteral ? expr.getText() : expr.getParent().getText();
  final String startQuote=GrStringUtil.getStartQuote(oldText);
  if (StringUtil.startsWithChar(startQuote,'\'')) {
    newContent=GrStringUtil.escapeSymbolsForString(newContent,!startQuote.equals("'''"),true);
  }
 else   if (StringUtil.startsWithChar(startQuote,'\"')) {
    newContent=GrStringUtil.escapeSymbolsForGString(newContent,!startQuote.equals("\"\"\""),true);
  }
 else   if ("/".equals(startQuote)) {
    newContent=GrStringUtil.escapeSymbolsForSlashyStrings(newContent);
  }
 else   if ("$/".equals(startQuote)) {
    newContent=GrStringUtil.escapeSymbolsForDollarSlashyStrings(newContent);
  }
  String newText=expr instanceof GrLiteral ? oldText.substring(0,range.getStartOffset()) + newContent + oldText.substring(range.getEndOffset()) : newContent;
  return expr.updateText(newText);
}
