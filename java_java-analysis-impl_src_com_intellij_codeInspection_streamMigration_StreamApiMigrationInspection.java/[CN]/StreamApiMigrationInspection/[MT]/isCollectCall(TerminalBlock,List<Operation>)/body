{
  final PsiMethodCallExpression methodCallExpression=tb.getSingleMethodCall();
  if (methodCallExpression != null) {
    final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    PsiClass qualifierClass=null;
    if (qualifierExpression instanceof PsiReferenceExpression) {
      if (ReferencesSearch.search(tb.getVariable(),new LocalSearchScope(qualifierExpression)).findFirst() != null) {
        return false;
      }
      final PsiElement resolve=((PsiReferenceExpression)qualifierExpression).resolve();
      if (resolve instanceof PsiVariable) {
        if (ReferencesSearch.search(resolve,new LocalSearchScope(methodCallExpression.getArgumentList())).findFirst() != null) {
          return false;
        }
      }
      qualifierClass=PsiUtil.resolveClassInType(qualifierExpression.getType());
    }
 else     if (qualifierExpression == null) {
      final PsiClass enclosingClass=PsiTreeUtil.getParentOfType(methodCallExpression,PsiClass.class);
      if (PsiUtil.getEnclosingStaticElement(methodCallExpression,enclosingClass) == null) {
        qualifierClass=enclosingClass;
      }
    }
    if (qualifierClass != null && InheritanceUtil.isInheritor(qualifierClass,false,CommonClassNames.JAVA_UTIL_COLLECTION)) {
      for (      Operation op : operations) {
        final PsiExpression expression=op.getExpression();
        if (expression != null && isExpressionDependsOnUpdatedCollections(expression,qualifierExpression))         return false;
      }
      final PsiElement resolve=methodExpression.resolve();
      if (resolve instanceof PsiMethod && "add".equals(((PsiMethod)resolve).getName()) && ((PsiMethod)resolve).getParameterList().getParametersCount() == 1) {
        final PsiExpression[] args=methodCallExpression.getArgumentList().getExpressions();
        if (args.length == 1) {
          if (args[0] instanceof PsiCallExpression) {
            final PsiMethod method=((PsiCallExpression)args[0]).resolveMethod();
            return method != null && !method.hasTypeParameters() && !isThrowsCompatible(method);
          }
          return true;
        }
      }
    }
  }
  return false;
}
