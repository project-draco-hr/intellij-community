{
  PsiExpression replacement=factory.createExpressionFromText("java.util.Arrays.stream(" + myExpression.getText() + ")",myExpression);
  String operation="flatMap";
  PsiType type=myExpression.getType();
  if (type instanceof PsiArrayType) {
    PsiType componentType=((PsiArrayType)type).getComponentType();
    if (componentType instanceof PsiPrimitiveType) {
      if (componentType.equals(PsiType.INT)) {
        operation="flatMapToInt";
      }
 else       if (componentType.equals(PsiType.LONG)) {
        operation="flatMapToLong";
      }
 else       if (componentType.equals(PsiType.DOUBLE)) {
        operation="flatMapToDouble";
      }
    }
  }
  return "." + operation + "("+ createLambda(myVariable,replacement)+ ")";
}
