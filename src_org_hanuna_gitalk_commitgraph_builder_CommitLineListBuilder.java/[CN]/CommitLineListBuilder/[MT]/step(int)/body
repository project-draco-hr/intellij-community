{
  LineOfNode prevLine=lines.get(index - 1);
  MutableLineOfNode nextLine=new MutableLineOfNode();
  for (  GraphNode node : prevLine) {
    int indexCommit=node.getIndexCommit();
    if (indexCommit != index - 1) {
      nextLine.add(indexCommit,node.getIndexColor());
    }
 else {
      CommitNode commit=listOfCommits.get(indexCommit);
      if (commit.mainParent() != null) {
        nextLine.add(commit.mainParent().index(),node.getIndexColor());
      }
      if (commit.secondParent() != null) {
        nextLine.add(commit.secondParent().index(),prevLine.getAdditionColor());
      }
    }
  }
  int p=nextLine.getPositionOfCommit(index);
  if (p == -1) {
    nextLine.add(index,indexColor);
    indexColor++;
    nextLine.setMainPosition(nextLine.size() - 1);
  }
 else {
    nextLine.setMainPosition(p);
    if (listOfCommits.get(index).secondParent() != null) {
      nextLine.setAdditionColor(indexColor);
      indexColor++;
    }
  }
  lines.add(nextLine);
}
