{
  EnumSet<GrIntroduceFieldSettings.Init> result=EnumSet.of(GrIntroduceFieldSettings.Init.FIELD_DECLARATION);
  if (!(context.getScope() instanceof GroovyScriptClass || context.getScope() instanceof GroovyFileBase)) {
    result.add(GrIntroduceFieldSettings.Init.CONSTRUCTOR);
  }
  PsiElement scope=context.getScope();
  if (replaceAll) {
    PsiElement anchor=GrIntroduceHandlerBase.findAnchor(context.getOccurrences(),scope);
    if (anchor != null) {
      result.add(GrIntroduceFieldSettings.Init.CUR_METHOD);
    }
  }
  if (scope instanceof GrTypeDefinition && TestFrameworks.getInstance().isTestClass((PsiClass)scope)) {
    result.add(GrIntroduceFieldSettings.Init.SETUP_METHOD);
  }
  return result;
}
