{
  boolean accepted=false;
  if (myState == State.REGISTERED) {
    accepted=newState != State.REGISTERED;
  }
 else   if (myState == State.RUNNING) {
    accepted=newState != State.REGISTERED && newState != State.RUNNING;
  }
  if (myParentNode != null && newState != State.REGISTERED && newState != State.RUNNING) {
    myParentNode.myRunningChildCount--;
  }
  if (!accepted) {
    throw new RuntimeException("Attempt to change state from " + myState + " to "+ newState+ ":"+ toString());
  }
  myState=newState;
}
