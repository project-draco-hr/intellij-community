{
  boolean accepted=false;
  if (myState == State.NOT_RUNNING || myState == State.RUNNING) {
    accepted=myState.ordinal() < newState.ordinal();
  }
  if (!accepted) {
    throw new RuntimeException("Illegal state change [" + myState + " -> "+ newState+ "]: "+ toString());
  }
  if (myParentNode != null) {
    if (newState == State.RUNNING) {
      myParentNode.myRunningChildCount++;
    }
 else     if (myState == State.RUNNING) {
      myParentNode.myRunningChildCount--;
    }
  }
  myState=newState;
}
