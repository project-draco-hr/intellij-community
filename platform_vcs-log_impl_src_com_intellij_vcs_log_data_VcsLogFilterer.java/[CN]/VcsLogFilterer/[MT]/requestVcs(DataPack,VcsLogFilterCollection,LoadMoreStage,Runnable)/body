{
  ApplicationManager.getApplication().assertIsDispatchThread();
  int maxCount=loadMoreStage == LoadMoreStage.INITIAL ? LOAD_MORE_COMMITS_FIRST_STEP_LIMIT : -1;
  myLogDataHolder.getFilteredDetailsFromTheVcs(filters,new Consumer<List<Pair<Hash,VirtualFile>>>(){
    @Override public void consume(    List<Pair<Hash,VirtualFile>> details){
      LoadMoreStage newLoadMoreStage=advanceLoadMoreStage(loadMoreStage);
      AbstractVcsLogTableModel model;
      if (!USE_NEW_GRAPH_FOR_FILTERING) {
        model=new NoGraphTableModel(dataPack,myLogDataHolder,myUI,details,newLoadMoreStage);
      }
 else {
        if (details.isEmpty()) {
          model=new EmptyTableModel(dataPack,myLogDataHolder,myUI,newLoadMoreStage);
        }
 else {
          dataPack.getGraphFacade().setFilter(getFilterFromCommits(details));
          model=new GraphTableModel(dataPack,myLogDataHolder,myUI,newLoadMoreStage);
        }
      }
      myUI.setModel(model);
      myUI.updateUI();
      onSuccess.run();
    }
  }
,maxCount);
}
