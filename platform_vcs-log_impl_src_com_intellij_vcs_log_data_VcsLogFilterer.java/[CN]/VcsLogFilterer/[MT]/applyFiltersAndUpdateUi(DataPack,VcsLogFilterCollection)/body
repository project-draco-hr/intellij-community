{
  List<VcsLogDetailsFilter> detailsFilters=filters.getDetailsFilters();
  applyGraphFilters(dataPack,filters.getBranchFilter());
  final AbstractVcsLogTableModel model;
  if (USE_NEW_GRAPH_FOR_FILTERING) {
    model=updateFacadeAndCreateModel(dataPack,detailsFilters);
  }
 else {
    if (!detailsFilters.isEmpty()) {
      List<Pair<Hash,VirtualFile>> filteredCommits=filterByDetails(dataPack,detailsFilters);
      model=new NoGraphTableModel(dataPack,myLogDataHolder,myUI,filteredCommits,LoadMoreStage.INITIAL);
    }
 else {
      model=new GraphTableModel(dataPack,myLogDataHolder,myUI,LoadMoreStage.INITIAL);
    }
  }
  return model;
}
