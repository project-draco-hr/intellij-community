{
  mailbox.offer(GroovyRtConstants.STUBS_GENERATED);
  while (true) {
    try {
      Thread.sleep(10);
      Object response=mailbox.poll();
      if (GroovyRtConstants.STUBS_GENERATED.equals(response)) {
        mailbox.offer(response);
      }
 else       if (GroovyRtConstants.BUILD_ABORTED.equals(response)) {
        throw new RuntimeException(GroovyRtConstants.BUILD_ABORTED);
      }
 else       if (GroovyRtConstants.JAVAC_COMPLETED.equals(response)) {
        break;
      }
 else       if (response != null) {
        throw new RuntimeException("Unknown response: " + response);
      }
    }
 catch (    InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
}
