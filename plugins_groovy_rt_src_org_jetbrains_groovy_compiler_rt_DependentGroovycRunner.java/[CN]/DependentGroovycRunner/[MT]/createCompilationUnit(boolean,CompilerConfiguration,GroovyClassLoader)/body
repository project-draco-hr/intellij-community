{
  final GroovyClassLoader transformLoader=new GroovyClassLoader(classLoader);
  try {
    if (forStubs) {
      return createStubGenerator(config,classLoader,transformLoader);
    }
  }
 catch (  NoClassDefFoundError ignore) {
  }
  CompilationUnit unit;
  try {
    unit=new CompilationUnit(config,null,classLoader,transformLoader){
      public void gotoPhase(      int phase) throws CompilationFailedException {
        super.gotoPhase(phase);
        if (phase <= Phases.ALL) {
          System.out.println(GroovyRtConstants.PRESENTABLE_MESSAGE + "Groovyc: " + getPhaseDescription());
        }
      }
    }
;
  }
 catch (  NoSuchMethodError e) {
    unit=new CompilationUnit(config,null,classLoader){
      public void gotoPhase(      int phase) throws CompilationFailedException {
        super.gotoPhase(phase);
        if (phase <= Phases.ALL) {
          System.out.println(GroovyRtConstants.PRESENTABLE_MESSAGE + "Groovyc: " + getPhaseDescription());
        }
      }
    }
;
  }
  return unit;
}
