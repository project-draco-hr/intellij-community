{
  final StringBuilder options=new StringBuilder();
  final Charset encoding=CompilerEncodingService.getInstance(getProject()).getPreferredModuleEncoding(myMainModule);
  if (encoding != null) {
    appendOption(options,"-encoding",encoding.name());
  }
  final String languageLevel=getLanguageLevelOption(ApplicationManager.getApplication().runReadAction(new Computable<LanguageLevel>(){
    @Override public LanguageLevel compute(){
      return EffectiveLanguageLevelUtil.getEffectiveLanguageLevel(myMainModule);
    }
  }
));
  appendOption(options,"-source",languageLevel);
  String bytecodeTarget=CompilerConfiguration.getInstance(getProject()).getBytecodeTargetLevel(myMainModule);
  if (StringUtil.isEmpty(bytecodeTarget)) {
    bytecodeTarget=languageLevel;
  }
  appendOption(options,"-target",bytecodeTarget);
  return options.toString();
}
