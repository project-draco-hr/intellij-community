{
  final StringBuilder options=new StringBuilder();
  final Charset encoding=CompilerEncodingService.getInstance(getProject()).getPreferredModuleEncoding(myMainModule);
  if (encoding != null) {
    appendOption(options,"-encoding",encoding.name());
  }
  appendOption(options,"-source",getLanguageLevelOption(ApplicationManager.getApplication().runReadAction(new Computable<LanguageLevel>(){
    @Override public LanguageLevel compute(){
      return EffectiveLanguageLevelUtil.getEffectiveLanguageLevel(myMainModule);
    }
  }
)));
  appendOption(options,"-target",CompilerConfiguration.getInstance(getProject()).getBytecodeTargetLevel(myMainModule));
  return options.toString();
}
