{
  try {
    String iterationParameterName=statement.getIterationParameter().getName();
    myCurrentFragmentEvaluator.setInitialValue(iterationParameterName,null);
    SyntheticVariableEvaluator iterationParameterEvaluator=new SyntheticVariableEvaluator(myCurrentFragmentEvaluator,iterationParameterName);
    Evaluator iteratedValueEvaluator=accept(statement.getIteratedValue());
    Evaluator bodyEvaluator=accept(statement.getBody());
    if (bodyEvaluator == null)     return;
    String label=null;
    if (statement.getParent() instanceof PsiLabeledStatement) {
      label=((PsiLabeledStatement)statement.getParent()).getLabelIdentifier().getText();
    }
    myResult=new ForeachStatementEvaluator(iterationParameterEvaluator,iteratedValueEvaluator,bodyEvaluator,label);
  }
 catch (  EvaluateException e) {
    throw new EvaluateRuntimeException(e);
  }
}
