{
  try {
    if (myFile != null) {
      ((UndoManagerImpl)UndoManager.getInstance(getProject())).clearUndoRedoQueueInTests(myFile.getVirtualFile());
      FileEditorManager.getInstance(getProject()).closeFile(myFile.getVirtualFile());
    }
  }
  finally {
    myEditor=null;
    myFile=null;
    super.tearDown();
  }
}
