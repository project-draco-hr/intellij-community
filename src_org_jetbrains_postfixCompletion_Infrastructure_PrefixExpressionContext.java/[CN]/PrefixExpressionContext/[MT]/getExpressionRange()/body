{
  final TextRange expressionRange=expression.getTextRange();
  final PsiElement reference=parentContext.postfixReference;
  PsiElement qualifier=null;
  if (reference instanceof PsiReferenceExpression) {
    qualifier=((PsiReferenceExpression)reference).getQualifierExpression();
  }
 else   if (reference instanceof PsiJavaCodeReferenceElement) {
    qualifier=((PsiJavaCodeReferenceElement)reference).getQualifier();
  }
  if (qualifier != null && qualifier.isValid()) {
    final int qualifierEndRange=qualifier.getTextRange().getEndOffset();
    if (expressionRange.getEndOffset() > qualifierEndRange) {
      return new TextRange(expressionRange.getStartOffset(),qualifierEndRange);
    }
  }
  return expressionRange;
}
