{
  final String appPath=getTestAppPath();
  final File classesDir=new File(appPath,CLASSES);
  String VERSION_FILE_NAME="version-" + getTestAppVersion();
  final File versionFile=new File(classesDir,VERSION_FILE_NAME);
  if (!classesDir.exists() || !versionFile.exists() || !hasCompiledClasses(classesDir)) {
    FileUtil.delete(classesDir);
    classesDir.mkdirs();
    String toolsJarPath=PathUtil.getJarPathForClass(Main.class);
    if (compileTinyApp(appPath) != 0) {
      throw new Exception("Failed to compile debugger test application using compiler from " + toolsJarPath + ".\nIt must be compiled in order to run debugger tests.\n"+ appPath);
    }
    versionFile.createNewFile();
  }
}
