{
  if (ourOutputRoot == null) {
    ourOutputRoot=FileUtil.createTempDirectory("ExecutionTestCase",null,true);
  }
  myModuleOutputDir=new File(ourOutputRoot,PathUtil.getFileName(getTestAppPath()));
  myChecker=initOutputChecker();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      try {
        ExecutionTestCase.super.setUp();
      }
 catch (      Throwable e) {
        e.printStackTrace();
        assertTrue(false);
      }
    }
  }
);
  if (!myModuleOutputDir.exists()) {
    myCompilerTester=new CompilerTester(myProject,Arrays.asList(ModuleManager.getInstance(myProject).getModules()));
    List<CompilerMessage> messages=myCompilerTester.rebuild();
    for (    CompilerMessage message : messages) {
      if (message.getCategory() == CompilerMessageCategory.ERROR) {
        FileUtil.delete(myModuleOutputDir);
        fail("Compilation failed: " + message);
      }
    }
  }
}
