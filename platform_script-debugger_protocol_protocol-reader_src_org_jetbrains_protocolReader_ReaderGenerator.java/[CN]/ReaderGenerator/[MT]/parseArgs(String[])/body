{
  final StringParam outputDirParam=new StringParam();
  Map<String,StringParam> paramMap=new HashMap<>(3);
  paramMap.put("output-dir",outputDirParam);
  for (  String arg : args) {
    if (!arg.startsWith("--")) {
      throw new IllegalArgumentException("Unrecognized param: " + arg);
    }
    int equalsPos=arg.indexOf('=',2);
    String key;
    String value;
    if (equalsPos == -1) {
      key=arg.substring(2).trim();
      value=null;
    }
 else {
      key=arg.substring(2,equalsPos).trim();
      value=arg.substring(equalsPos + 1).trim();
    }
    ParamListener paramListener=paramMap.get(key);
    if (paramListener == null) {
      throw new IllegalArgumentException("Unrecognized param name: " + key);
    }
    try {
      paramListener.setValue(value);
    }
 catch (    IllegalArgumentException e) {
      throw new IllegalArgumentException("Failed to set value of " + key,e);
    }
  }
  for (  Map.Entry<String,StringParam> en : paramMap.entrySet()) {
    if (en.getValue().getValue() == null) {
      throw new IllegalArgumentException("Parameter " + en.getKey() + " should be set");
    }
  }
  return new Params(){
    @Override public String outputDirectory(){
      return outputDirParam.getValue();
    }
  }
;
}
