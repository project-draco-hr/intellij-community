{
  final Project project=myRepository.getProject();
  new HgCommandExecutor(project).execute(myRepository.getRoot(),"qfinish",Collections.singletonList("qbase:" + revision),new HgCommandResultHandler(){
    @Override public void process(    @Nullable HgCommandResult result){
      if (HgErrorUtil.hasErrorsInCommandExecution(result)) {
        new HgCommandResultNotifier(project).notifyError(result,"QFinish command failed","Could not apply patches into repository history.");
      }
      myRepository.update();
    }
  }
);
}
