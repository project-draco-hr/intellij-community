{
  if (state.presentableName() != State.NameGetter.class) {
    try {
      return ReflectionUtil.newInstance(state.presentableName()).get();
    }
 catch (    Exception e) {
      LOG.error(e);
    }
  }
  String defaultName=state.name();
  String resourceBundleName;
  if (pluginDescriptor != null && pluginDescriptor instanceof IdeaPluginDescriptor && !"com.intellij".equals(pluginDescriptor.getPluginId().getIdString())) {
    resourceBundleName=((IdeaPluginDescriptor)pluginDescriptor).getResourceBundleBaseName();
  }
 else {
    resourceBundleName=OptionsBundle.PATH_TO_BUNDLE;
  }
  if (resourceBundleName == null) {
    return defaultName;
  }
  ClassLoader classLoader=pluginDescriptor == null ? null : pluginDescriptor.getPluginClassLoader();
  classLoader=classLoader == null ? aClass.getClassLoader() : classLoader;
  if (classLoader != null) {
    String message=messageOrDefault(classLoader,resourceBundleName,defaultName);
    if (message != defaultName) {
      return message;
    }
    if (PlatformUtils.isRubyMine()) {
      return messageOrDefault(classLoader,"org.jetbrains.plugins.ruby.RBundle",defaultName);
    }
  }
  return defaultName;
}
