{
  context.commitDocument();
  TailType tailType=getTailType(context.getCompletionChar(),(LookupItem)lookupElement);
  final Editor editor=context.getEditor();
  editor.getCaretModel().moveToOffset(context.getSelectionEndOffset());
  tailType.processTail(editor,context.getSelectionEndOffset());
  editor.getSelectionModel().removeSelection();
  if (tailType == TailType.DOT || context.getCompletionChar() == '.') {
    AutoPopupController.getInstance(context.getProject()).autoPopupMemberLookup(editor,null);
  }
}
