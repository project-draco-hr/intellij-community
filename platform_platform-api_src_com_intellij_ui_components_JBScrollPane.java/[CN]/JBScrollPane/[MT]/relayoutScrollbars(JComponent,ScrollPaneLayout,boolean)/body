{
  JViewport viewport=layout.getViewport();
  if (viewport == null)   return false;
  JScrollBar vsb=layout.getVerticalScrollBar();
  JScrollBar hsb=layout.getHorizontalScrollBar();
  JViewport colHead=layout.getColumnHeader();
  JViewport rowHead=layout.getRowHeader();
  Rectangle viewportBounds=viewport.getBounds();
  boolean extendsViewportUnderVScrollbar=vsb != null && shouldExtendViewportUnderScrollbar(vsb);
  boolean extendsViewportUnderHScrollbar=hsb != null && shouldExtendViewportUnderScrollbar(hsb);
  boolean hasOverlayScrollbars=extendsViewportUnderVScrollbar || extendsViewportUnderHScrollbar;
  if (!hasOverlayScrollbars && !forceRelayout)   return false;
  container.setComponentZOrder(viewport,container.getComponentCount() - 1);
  if (vsb != null)   container.setComponentZOrder(vsb,0);
  if (hsb != null)   container.setComponentZOrder(hsb,0);
  if (extendsViewportUnderVScrollbar) {
    viewportBounds.x=Math.min(viewportBounds.x,vsb.getX());
    viewportBounds.width=Math.max(viewportBounds.width,vsb.getX() + vsb.getWidth());
  }
  if (extendsViewportUnderHScrollbar) {
    viewportBounds.y=Math.min(viewportBounds.y,hsb.getY());
    viewportBounds.height=Math.max(viewportBounds.height,hsb.getY() + hsb.getHeight());
  }
  if (extendsViewportUnderVScrollbar) {
    if (hsb != null) {
      Rectangle scrollbarBounds=hsb.getBounds();
      scrollbarBounds.width=viewportBounds.width - scrollbarBounds.x;
      hsb.setBounds(scrollbarBounds);
    }
    if (colHead != null) {
      Rectangle headerBounds=colHead.getBounds();
      headerBounds.width=viewportBounds.width - headerBounds.x;
      colHead.setBounds(headerBounds);
    }
    hideFromView(layout.getCorner(UPPER_RIGHT_CORNER));
    hideFromView(layout.getCorner(LOWER_RIGHT_CORNER));
  }
  if (extendsViewportUnderHScrollbar) {
    if (vsb != null) {
      Rectangle scrollbarBounds=vsb.getBounds();
      scrollbarBounds.height=viewportBounds.height - scrollbarBounds.y;
      vsb.setBounds(scrollbarBounds);
    }
    if (rowHead != null) {
      Rectangle headerBounds=rowHead.getBounds();
      headerBounds.height=viewportBounds.height - headerBounds.y;
      rowHead.setBounds(headerBounds);
    }
    hideFromView(layout.getCorner(LOWER_LEFT_CORNER));
    hideFromView(layout.getCorner(LOWER_RIGHT_CORNER));
  }
  viewport.setBounds(viewportBounds);
  return hasOverlayScrollbars;
}
