{
  final String PATH="dir with spaces/file with spaces.txt";
  GitTestUtil.createFileStructure(myProjectRoot,PATH);
  addCommit("created some file structure");
  git("branch feature");
  File file=new File(myProjectPath,PATH);
  assertTrue("File doesn't exist!",file.exists());
  overwrite(file,"my content");
  addCommit("modified in master");
  checkout("feature");
  overwrite(file,"brother content");
  addCommit("modified in feature");
  checkout("master");
  git("merge feature",true);
  overwrite(file,"merged content");
  git("add .");
  final ChangeListManager changeListManager=ChangeListManager.getInstance(myProject);
  updateChangeListManager();
  final LocalChangeList changeList=changeListManager.getDefaultChangeList();
  changeList.setComment("Commit message");
  List<Change> changes=ContainerUtil.newArrayList(changeListManager.getChangesIn(myProjectRoot));
  assertTrue(!changes.isEmpty());
  CheckinEnvironment checkingEnv=ObjectUtils.assertNotNull(myVcs.getCheckinEnvironment());
  List<VcsException> exceptions=checkingEnv.commit(changes,"comment");
  assertNoExceptions(exceptions);
  updateChangeListManager();
  assertTrue(changeListManager.getChangesIn(myProjectRoot).isEmpty());
}
