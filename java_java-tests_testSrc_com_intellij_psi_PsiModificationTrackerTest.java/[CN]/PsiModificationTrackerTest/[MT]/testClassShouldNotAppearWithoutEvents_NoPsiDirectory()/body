{
  PsiModificationTracker tracker=PsiManager.getInstance(getProject()).getModificationTracker();
  long count0=tracker.getJavaStructureModificationCount();
  final PsiManagerEx psiManager=(PsiManagerEx)PsiManager.getInstance(getProject());
  VirtualFile parentDir=createChildDirectory(getProject().getBaseDir(),"tmp");
  assertNull(((FileManagerImpl)psiManager.getFileManager()).getCachedDirectory(parentDir));
  File file=new File(parentDir.getPath(),"Foo.java");
  FileUtil.writeToFile(file,"class Foo {}");
  assertNotNull(LocalFileSystem.getInstance().refreshAndFindFileByIoFile(file));
  assertNotNull(JavaPsiFacade.getInstance(getProject()).findClass("Foo",GlobalSearchScope.allScope(getProject())));
  assertFalse(count0 == tracker.getJavaStructureModificationCount());
}
