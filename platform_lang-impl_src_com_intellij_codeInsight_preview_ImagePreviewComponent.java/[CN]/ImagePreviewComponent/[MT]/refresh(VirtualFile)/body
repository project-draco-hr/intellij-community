{
  Long loadedTimeStamp=file.getUserData(TIMESTAMP_KEY);
  SoftReference<BufferedImage> imageRef=file.getUserData(BUFFERED_IMAGE_REF_KEY);
  if (loadedTimeStamp == null || loadedTimeStamp < file.getTimeStamp() || SoftReference.dereference(imageRef) == null) {
    try {
      final byte[] content=file.contentsToByteArray();
      final BufferedImage image=readImageFromBytes(content);
      file.putUserData(BUFFERED_IMAGE_REF_KEY,new SoftReference<BufferedImage>(image));
      return true;
    }
  finally {
      file.putUserData(TIMESTAMP_KEY,System.currentTimeMillis());
    }
  }
  return false;
}
