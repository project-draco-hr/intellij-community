{
  GeneralCommandLine cmd=new GeneralCommandLine();
  final File helpersRoot=PythonHelpersLocator.getHelpersRoot();
  cmd.setExePath(PythonSdkType.getInterpreterPath(myConfig.getSdkHome()));
  if (!StringUtil.isEmptyOrSpaces(myConfig.getWorkingDirectory())) {
    cmd.setWorkDirectory(myConfig.getWorkingDirectory());
  }
  cmd.getParametersList().addParametersString(myConfig.getInterpreterOptions());
  cmd.addParameter(new File(helpersRoot,UTRUNNER_PY).getAbsolutePath());
  for (  String testSpec : getTestSpecs()) {
    cmd.addParameter(testSpec);
  }
  Map<String,String> envs=myConfig.getEnvs();
  if (envs == null)   envs=new HashMap<String,String>();
 else   envs=new HashMap<String,String>(envs);
  envs.put(PYTHONUNBUFFERED,"1");
  insertToPythonPath(envs,helpersRoot);
  cmd.setEnvParams(envs);
  cmd.setPassParentEnvs(myConfig.isPassParentEnvs());
  return cmd;
}
