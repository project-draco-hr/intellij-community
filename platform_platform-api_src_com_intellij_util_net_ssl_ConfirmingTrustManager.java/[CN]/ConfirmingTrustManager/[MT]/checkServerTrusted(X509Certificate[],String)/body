{
  try {
    mySystemManager.checkServerTrusted(certificates,s);
  }
 catch (  RuntimeException e) {
    Throwable cause=e.getCause();
    if (cause != null && cause.getMessage().equals("the trustAnchors parameter must be non-empty")) {
      LOG.error(ERR_EMPTY_TRUST_ANCHORS,e);
      Notifications.Bus.notify(new Notification(Notifications.SYSTEM_MESSAGES_GROUP_ID,"No default keystore",ERR_EMPTY_TRUST_ANCHORS,NotificationType.ERROR));
      throw e;
    }
  }
catch (  CertificateException e) {
    X509Certificate certificate=certificates[0];
    if (certificates.length == 1) {
synchronized (myCustomManager) {
        try {
          myCustomManager.checkServerTrusted(certificates,s);
        }
 catch (        CertificateException e2) {
          if (myCustomManager.isBroken() || !updateTrustStore(certificate)) {
            throw e;
          }
        }
      }
    }
  }
}
