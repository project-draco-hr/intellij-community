{
  PasswordSafeProvider p=null;
switch (mySettings.getProviderType()) {
case DO_NOT_STORE:
    p=myNilProvider;
  break;
case MEMORY_ONLY:
p=myMemoryProvider;
break;
case MASTER_PASSWORD:
p=myMasterKeyProvider;
break;
default :
LOG.error("Unknown provider type: " + mySettings.getProviderType());
}
if (!p.isSupported()) {
p=myMemoryProvider;
}
return p;
}
