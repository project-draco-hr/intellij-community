{
  if (myContent == null) {
    final String localContext=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
      @Override public String compute(){
        final Document doc=FileDocumentManager.getInstance().getDocument(myVf);
        return doc == null ? null : doc.getText();
      }
    }
);
    if (localContext == null) {
      myPatchApplyFailed=true;
      return null;
    }
    final GenericPatchApplier applier=new GenericPatchApplier(localContext,myPatch.getHunks());
    if (applier.execute()) {
      myContent=applier.getAfter();
    }
 else {
      myPatchApplyFailed=true;
    }
  }
  return myContent;
}
