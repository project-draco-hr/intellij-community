{
  final VirtualFile[] files=FileEditorManager.getInstance(project).getOpenFiles();
  List<PsiElement> psiFiles=new ArrayList<PsiElement>(files.length);
  PsiManager psiManager=PsiManager.getInstance(project);
  for (  VirtualFile file : files) {
    PsiFile psiFile=psiManager.findFile(file);
    if (psiFile != null)     psiFiles.add(psiFile);
  }
  return new LocalSearchScope(psiFiles.toArray(new PsiElement[psiFiles.size()]),"Open Files");
}
