{
  if (editor.isDisposed()) {
    return null;
  }
  Project project=editor.getProject();
  if (project == null || project.isDisposed()) {
    return null;
  }
  PsiFile psiFile=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (psiFile == null || psiFile instanceof PsiCompiledElement || !psiFile.isValid()) {
    return null;
  }
  return InjectedLanguageUtil.findElementAtNoCommit(psiFile,editor.logicalPositionToOffset(editor.xyToLogicalPosition(point)));
}
