{
  Editor editor=event.getEditor();
  if (editor.isOneLineMode()) {
    return;
  }
  alarm.cancelAllRequests();
  Point point=event.getMouseEvent().getPoint();
  if (elementRef == null && event.getMouseEvent().isShiftDown()) {
    alarm.addRequest(new PreviewRequest(point,editor),100);
  }
 else   if (elementRef != null && elementRef.get() != getPsiElementAt(point,editor)) {
    PsiElement element=elementRef.get();
    elementRef=null;
    for (    ElementPreviewProvider provider : Extensions.getExtensions(ElementPreviewProvider.EP_NAME)) {
      try {
        provider.hide(element,editor);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
}
