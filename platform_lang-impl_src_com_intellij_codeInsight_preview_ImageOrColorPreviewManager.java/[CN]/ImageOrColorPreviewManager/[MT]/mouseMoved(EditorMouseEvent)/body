{
  Editor editor=event.getEditor();
  if (editor.isOneLineMode()) {
    return;
  }
  alarm.cancelAllRequests();
  Point point=event.getMouseEvent().getPoint();
  if (elementRef == null && event.getMouseEvent().isShiftDown()) {
    alarm.addRequest(new PreviewRequest(point,editor,false),100);
  }
 else {
    PsiElement element=SoftReference.dereference(elementRef);
    if (element != getPsiElementAt(point,editor)) {
      elementRef=null;
      for (      ElementPreviewProvider provider : Extensions.getExtensions(ElementPreviewProvider.EP_NAME)) {
        try {
          provider.hide(element,editor);
        }
 catch (        Exception e) {
          LOG.error(e);
        }
      }
    }
  }
}
