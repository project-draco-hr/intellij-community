{
  List<VirtualFile> files=new ArrayList<VirtualFile>();
  for (  String path : filePaths) {
    VirtualFile virtualFile=findFile(path,currentDirectory);
    if (virtualFile == null)     throw new Exception("Can't find file " + path);
    files.add(virtualFile);
  }
  VfsUtil.markDirtyAndRefresh(false,false,false,VfsUtilCore.toVirtualFileArray(files));
  for (int i=0; i < filePaths.size(); i++) {
    if (!files.get(i).isValid())     throw new Exception("Can't find file " + filePaths.get(i));
  }
  return files;
}
