{
  Element element;
  try {
    element=DefaultStateSerializer.serializeState(state,storageSpec);
  }
 catch (  WriteExternalException e) {
    throw new StateStorageException(e);
  }
catch (  Throwable e) {
    LOG.info("Unable to serialize component state!",e);
    return;
  }
  if (element != null) {
    for (    Pair<Element,String> pair : mySplitter.splitState(element)) {
      Element e=pair.first;
      String name=pair.second;
      Element statePart=new Element(StorageData.COMPONENT);
      statePart.setAttribute(StorageData.NAME,componentName);
      statePart.addContent(e.detach());
      myStorageData.put(componentName,new File(myDir,name),statePart,false);
    }
  }
}
