{
  NotificationLabels labels=getNotificationLabels(userOptions,detectedOptions);
  final Editor editor=fileEditor instanceof TextEditor ? ((TextEditor)fileEditor).getEditor() : null;
  if (labels == null || editor == null)   return null;
  ActionLabelData okAction=new ActionLabelData(ApplicationBundle.message("code.style.indents.detector.accept"),new Runnable(){
    @Override public void run(){
      setAccepted(file);
    }
  }
).setUpdateAllNotificationsOnActionEnd(true);
  ActionLabelData disableForSingleFile=new ActionLabelData(labels.revertToOldSettingsLabel,new Runnable(){
    @Override public void run(){
      disableForFile(file);
      if (editor instanceof EditorEx) {
        ((EditorEx)editor).reinitSettings();
      }
    }
  }
).setUpdateAllNotificationsOnActionEnd(true);
  ActionLabelData showSettings=new ActionLabelData(ApplicationBundle.message("code.style.indents.detector.show.settings"),new Runnable(){
    @Override public void run(){
      ShowSettingsUtilImpl.showSettingsDialog(project,"preferences.sourceCode",ApplicationBundle.message("settings.code.style.general.autodetect.indents"));
    }
  }
).setUpdateAllNotificationsOnActionEnd(true);
  return new EditorNotificationInfo(labels.title,okAction,disableForSingleFile,showSettings);
}
