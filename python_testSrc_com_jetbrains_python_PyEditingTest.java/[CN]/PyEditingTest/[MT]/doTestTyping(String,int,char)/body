{
  final PsiFile file=ApplicationManager.getApplication().runWriteAction(new Computable<PsiFile>(){
    public PsiFile compute(){
      final PsiFile file=myFixture.configureByText(PythonFileType.INSTANCE,text);
      myFixture.getEditor().getCaretModel().moveToOffset(offset);
      myFixture.type(character);
      return file;
    }
  }
);
  return myFixture.getDocument(file).getText();
}
