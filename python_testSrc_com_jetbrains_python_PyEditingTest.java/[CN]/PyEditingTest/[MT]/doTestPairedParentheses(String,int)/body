{
  final PsiFile file=ApplicationManager.getApplication().runWriteAction(new Computable<PsiFile>(){
    public PsiFile compute(){
      try {
        final PsiFile file=myFixture.configureByText(PythonFileType.INSTANCE,text);
        myFixture.getEditor().getCaretModel().moveToOffset(offset);
        myFixture.type('(');
        return file;
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  return myFixture.getDocument(file).getText();
}
