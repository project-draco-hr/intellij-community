{
  while (true) {
    if (element == null || element instanceof PsiFile)     break;
    if (element instanceof PsiClass && element.getParent() != null && ((PsiClass)element).getContainingClass() == null && !(element instanceof PsiAnonymousClass))     break;
    element=element.getParent();
  }
  if (element instanceof PsiClassOwner) {
    PsiClass[] classes=((PsiClassOwner)element).getClasses();
    ArrayList<PsiClass> buffer=new ArrayList<PsiClass>();
    for (    final PsiClass aClass : classes) {
      if (isSynthetic(aClass)) {
        return null;
      }
      buffer.add(aClass);
    }
    return buffer.toArray(new PsiClass[buffer.size()]);
  }
  return element instanceof PsiClass ? new PsiClass[]{(PsiClass)element} : null;
}
