{
  final Matcher matcher=Pattern.compile(textToFoldRegexp).matcher(myEditor.getDocument().getCharsSequence());
  myEditor.getFoldingModel().runBatchFoldingOperation(new Runnable(){
    @Override public void run(){
      while (matcher.find()) {
        FoldRegion foldRegion=myEditor.getFoldingModel().addFoldRegion(matcher.start(),matcher.end(),placeholder);
        assertNotNull(foldRegion);
        foldRegion.setExpanded(false);
      }
    }
  }
);
}
