{
  if (!shouldRunTest())   return;
  if (runInDispatchThread()) {
    TestRunnerUtil.replaceIdeEventQueueSafely();
    EdtTestUtil.runInEdtAndWait(new ThrowableRunnable<Throwable>(){
      @Override public void run() throws Throwable {
        defaultRunBare();
      }
    }
);
  }
 else {
    defaultRunBare();
  }
}
