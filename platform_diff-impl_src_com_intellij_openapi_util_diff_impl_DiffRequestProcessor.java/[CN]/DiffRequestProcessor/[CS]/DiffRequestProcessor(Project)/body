{
  myProject=project;
  myAvailableTools=DiffManagerEx.getInstance().getDiffTools();
  myToolOrder=new LinkedList<DiffTool>(myAvailableTools);
  myContext=new MyDiffContext();
  myActiveRequest=NoDiffRequest.INSTANCE;
  myDiffWindow=new MyDiffWindow();
  myPanel=new MyPanel();
  myContentPanel=new ModifiablePanel();
  myToolbarPanel=new ModifiablePanel();
  myToolbarStatusPanel=new ModifiablePanel();
  JPanel topPanel=new JPanel(new BorderLayout());
  topPanel.add(myToolbarPanel,BorderLayout.CENTER);
  topPanel.add(myToolbarStatusPanel,BorderLayout.EAST);
  myPanel.add(topPanel,BorderLayout.NORTH);
  myPanel.add(myContentPanel,BorderLayout.CENTER);
  myPanel.setFocusTraversalPolicyProvider(true);
  myPanel.setFocusTraversalPolicy(new MyFocusTraversalPolicy());
  myOpenInEditorAction=new OpenInEditorAction(new Runnable(){
    @Override public void run(){
      onAfterNavigate();
    }
  }
);
  new ShowActionGroupPopupAction();
}
