{
  final UsageViewPresentation presentation=new UsageViewPresentation();
  presentation.setTargetsNodeText("XPath Expression");
  presentation.setCodeUsages(false);
  presentation.setCodeUsagesString("Found Matches");
  presentation.setNonCodeUsagesString("Result");
  presentation.setUsagesString("XPath Result");
  presentation.setUsagesWord("match");
  final ItemPresentation targetPresentation=usageTarget.getPresentation();
  if (targetPresentation != null) {
    presentation.setTabText(StringUtil.shortenTextWithEllipsis("XPath '" + targetPresentation.getPresentableText() + '\'',60,0,true));
  }
 else {
    presentation.setTabText("XPath");
  }
  presentation.setScopeText("XML Files");
  presentation.setOpenInNewTab(FindSettings.getInstance().isShowResultsInSeparateView());
  final FindUsagesProcessPresentation processPresentation=new FindUsagesProcessPresentation(presentation);
  processPresentation.setProgressIndicatorFactory(new Factory<ProgressIndicator>(){
    @Override public ProgressIndicator create(){
      return new FindProgressIndicator(project,"XML Document(s)");
    }
  }
);
  processPresentation.setShowPanelIfOnlyOneUsage(true);
  processPresentation.setShowNotFoundMessage(true);
  final UsageTarget[] usageTargets={usageTarget};
  UsageViewManager.getInstance(project).searchAndShowUsages(usageTargets,searcherFactory,processPresentation,presentation,new UsageViewManager.UsageViewStateListener(){
    @Override public void usageViewCreated(    @NotNull UsageView usageView){
      usageView.addButtonToLowerPane(editAction,"&Edit Expression");
    }
    @Override public void findingUsagesFinished(    UsageView usageView){
    }
  }
);
}
