{
  process.setText(ProjectBundle.message("maven.searching.profiles"));
  Set<String> availableProfiles=new LinkedHashSet<>();
  Set<String> activatedProfiles=new LinkedHashSet<>();
  MavenProjectReader reader=new MavenProjectReader();
  MavenGeneralSettings generalSettings=getGeneralSettings();
  MavenProjectReaderProjectLocator locator=new MavenProjectReaderProjectLocator(){
    public VirtualFile findProjectFile(    MavenId coordinates){
      return null;
    }
  }
;
  for (  VirtualFile f : getParameters().myFiles) {
    MavenProject project=new MavenProject(f);
    process.setText2(ProjectBundle.message("maven.reading.pom",f.getPath()));
    project.read(generalSettings,MavenExplicitProfiles.NONE,reader,locator);
    availableProfiles.addAll(project.getProfilesIds());
    activatedProfiles.addAll(project.getActivatedProfilesIds().getEnabledProfiles());
  }
  getParameters().myProfiles=new ArrayList<>(availableProfiles);
  getParameters().myActivatedProfiles=new ArrayList<>(activatedProfiles);
}
