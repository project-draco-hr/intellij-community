{
  final String varName=var.getName();
  if (isReplacementVariable(varName)) {
    saveScriptInfo(getOrAddReplacementVariableDefinition(varName,myConfiguration));
    return;
  }
  final MatchVariableConstraint varInfo=UIUtil.getOrAddVariableConstraint(varName,myConfiguration);
  varInfo.setInvertReadAccess(notRead.isSelected());
  varInfo.setReadAccess(read.isSelected());
  varInfo.setInvertWriteAccess(notWrite.isSelected());
  varInfo.setWriteAccess(write.isSelected());
  varInfo.setRegExp(regexp.getDocument().getText());
  varInfo.setInvertRegExp(notRegexp.isSelected());
  final int minCount=Integer.parseInt(minoccurs.getText());
  varInfo.setMinCount(minCount);
  final int maxCount=maxoccursUnlimited.isSelected() ? Integer.MAX_VALUE : Integer.parseInt(maxoccurs.getText());
  varInfo.setMaxCount(maxCount);
  varInfo.setWithinHierarchy(applyWithinTypeHierarchy.isSelected());
  varInfo.setInvertRegExp(notRegexp.isSelected());
  final boolean target=partOfSearchResults.isSelected();
  if (target) {
    final MatchOptions matchOptions=myConfiguration.getMatchOptions();
    for (    String name : matchOptions.getVariableConstraintNames()) {
      if (!name.equals(varName)) {
        matchOptions.getVariableConstraint(name).setPartOfSearchResults(false);
      }
    }
  }
  varInfo.setPartOfSearchResults(target);
  varInfo.setInvertExprType(notExprType.isSelected());
  varInfo.setNameOfExprType(regexprForExprType.getDocument().getText());
  varInfo.setExprTypeWithinHierarchy(exprTypeWithinHierarchy.isSelected());
  varInfo.setWholeWordsOnly(wholeWordsOnly.isSelected());
  varInfo.setInvertFormalType(invertFormalArgType.isSelected());
  varInfo.setFormalArgTypeWithinHierarchy(formalArgTypeWithinHierarchy.isSelected());
  varInfo.setNameOfFormalArgType(formalArgType.getDocument().getText());
  saveScriptInfo(varInfo);
  final String withinConstraint=(String)withinCombo.getComboBox().getEditor().getItem();
  varInfo.setWithinConstraint(withinConstraint.length() > 0 ? "\"" + withinConstraint + "\"" : "");
  varInfo.setInvertWithinConstraint(invertWithinIn.isSelected());
}
