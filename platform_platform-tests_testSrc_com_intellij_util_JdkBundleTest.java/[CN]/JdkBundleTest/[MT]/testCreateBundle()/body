{
  if (SystemInfo.isWindows)   return;
  File bootJDK=new File(System.getProperty("java.home")).getParentFile();
  if (!new File(bootJDK,"lib/tools.jar").exists())   return;
  if (SystemInfo.isMac) {
    bootJDK=bootJDK.getParentFile().getParentFile();
  }
  String verStr=System.getProperty("java.version");
  JdkBundle bundle=JdkBundle.createBundle(bootJDK,true,true);
  assertNotNull(bundle);
  assertTrue(bundle.isBoot());
  assertTrue(bundle.isBundled());
  assertTrue(FileUtil.filesEqual(bundle.getBundleAsFile(),bootJDK));
  Pair<Version,Integer> verUpdate=bundle.getVersionUpdate();
  assertNotNull(verUpdate);
  assertEquals(verStr,verUpdate.first.toString() + "_" + verUpdate.second.toString());
}
