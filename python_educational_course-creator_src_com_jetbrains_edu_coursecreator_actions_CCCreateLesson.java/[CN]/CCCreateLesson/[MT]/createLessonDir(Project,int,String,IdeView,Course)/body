{
  String lessonFolderName="lesson" + index;
  final PsiDirectory projectDir=PsiManager.getInstance(project).findDirectory(project.getBaseDir());
  final PsiDirectory lessonDirectory=DirectoryUtil.createSubdirectories("lesson" + index,projectDir,"\\/");
  final CCProjectService service=CCProjectService.getInstance(project);
  if (lessonDirectory != null) {
    if (view != null) {
      view.selectElement(lessonDirectory);
    }
    final Lesson lesson=new Lesson();
    lesson.setName(name != null ? name : lessonFolderName);
    lesson.setIndex(index);
    service.addLesson(lesson,lessonDirectory);
  }
  return lessonDirectory;
}
