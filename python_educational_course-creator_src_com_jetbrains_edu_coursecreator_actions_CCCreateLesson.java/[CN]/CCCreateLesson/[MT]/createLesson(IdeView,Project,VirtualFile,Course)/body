{
  Lesson lesson=getLesson(directory,project,course,view);
  if (lesson == null) {
    return null;
  }
  VirtualFile courseDir=project.getBaseDir();
  int lessonIndex=lesson.getIndex();
  CCUtils.updateHigherElements(courseDir.getChildren(),new Function<VirtualFile,StudyOrderable>(){
    @Override public StudyOrderable fun(    VirtualFile file){
      return course.getLesson(file.getName());
    }
  }
,lessonIndex - 1,EduNames.LESSON,1);
  course.addLesson(lesson);
  Collections.sort(course.getLessons(),EduUtils.INDEX_COMPARATOR);
  return createLessonDir(project,lessonIndex,view);
}
