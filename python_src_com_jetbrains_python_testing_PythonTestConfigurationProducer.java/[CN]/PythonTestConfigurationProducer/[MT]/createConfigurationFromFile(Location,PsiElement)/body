{
  PsiElement file=element.getContainingFile();
  if (!isTestFile(file))   return null;
  final PyFile pyFile=(PyFile)file;
  final List<PyStatement> testCases=PythonUnitTestUtil.getTestCaseClassesFromFile(pyFile);
  if (testCases.isEmpty())   return null;
  final RunnerAndConfigurationSettings settings=makeConfigurationSettings(location,"tests from file");
  final AbstractPythonTestRunConfiguration configuration=(AbstractPythonTestRunConfiguration)settings.getConfiguration();
  RunConfiguration conf=findConfiguration(location,pyFile,3);
  if (conf instanceof AbstractPythonTestRunConfiguration) {
    configuration.setEnvs(((AbstractPythonTestRunConfiguration)conf).getEnvs());
  }
  configuration.setTestType(AbstractPythonTestRunConfiguration.TestType.TEST_SCRIPT);
  if (!setupConfigurationScript(configuration,pyFile))   return null;
  configuration.setName(configuration.suggestedName());
  myPsiElement=pyFile;
  return settings;
}
