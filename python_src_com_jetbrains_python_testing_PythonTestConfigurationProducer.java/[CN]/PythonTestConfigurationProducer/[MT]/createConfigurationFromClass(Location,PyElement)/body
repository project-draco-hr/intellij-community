{
  PyClass pyClass=PsiTreeUtil.getParentOfType(element,PyClass.class,false);
  if (!isTestClass(pyClass))   return null;
  final RunnerAndConfigurationSettings settings=makeConfigurationSettings(location,"tests from class");
  final AbstractPythonTestRunConfiguration configuration=(AbstractPythonTestRunConfiguration)settings.getConfiguration();
  RunConfiguration conf=findConfiguration(location,pyClass,2);
  if (conf instanceof AbstractPythonTestRunConfiguration) {
    configuration.setEnvs(((AbstractPythonTestRunConfiguration)conf).getEnvs());
  }
  configuration.setTestType(AbstractPythonTestRunConfiguration.TestType.TEST_CLASS);
  configuration.setClassName(pyClass.getName());
  if (!setupConfigurationScript(configuration,pyClass))   return null;
  configuration.setName(configuration.suggestedName());
  myPsiElement=pyClass;
  return settings;
}
