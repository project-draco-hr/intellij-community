{
  final PsiElement element=location.getPsiElement();
  if (!(element instanceof PsiDirectory))   return null;
  final Module module=location.getModule();
  if (!isPythonModule(module))   return null;
  PsiDirectory dir=(PsiDirectory)element;
  final VirtualFile file=dir.getVirtualFile();
  final String path=file.getPath();
  final RunnerAndConfigurationSettings settings=makeConfigurationSettings(location,"tests from class");
  final AbstractPythonTestRunConfiguration configuration=(AbstractPythonTestRunConfiguration)settings.getConfiguration();
  configuration.setTestType(AbstractPythonTestRunConfiguration.TestType.TEST_FOLDER);
  configuration.setFolderName(path);
  configuration.setWorkingDirectory(path);
  configuration.setName(configuration.suggestedName());
  myPsiElement=dir;
  return settings;
}
