{
  if (sourceInfo == null) {
    String scriptName=script == null ? "unknown" : script.getUrl().trimParameters().toDecodedForm();
    int line=callFrame.getLine();
    component.append(line != -1 ? scriptName + ':' + line : scriptName,SimpleTextAttributes.ERROR_ATTRIBUTES);
    return;
  }
  String fileName=sourceInfo.getFile().getName();
  int line=sourceInfo.getLine() + 1;
  boolean isInLibraryContent=inLibraryContent;
  SimpleTextAttributes textAttributes=isInLibraryContent ? SimpleTextAttributes.GRAYED_ATTRIBUTES : SimpleTextAttributes.REGULAR_ATTRIBUTES;
  String functionName=sourceInfo.getFunctionName();
  List<Scope> scopes=callFrame.getVariableScopes();
  if (functionName == null || (functionName.isEmpty() && scopes.size() == 1 && scopes.get(0).isGlobal())) {
    component.append(fileName + ":" + line,textAttributes);
  }
 else {
    if (functionName.isEmpty()) {
      component.append("anonymous",isInLibraryContent ? SimpleTextAttributes.GRAYED_ITALIC_ATTRIBUTES : SimpleTextAttributes.REGULAR_ITALIC_ATTRIBUTES);
    }
 else {
      component.append(functionName,textAttributes);
    }
    component.append("(), " + fileName + ":"+ line,textAttributes);
  }
  component.setIcon(AllIcons.Debugger.StackFrame);
}
