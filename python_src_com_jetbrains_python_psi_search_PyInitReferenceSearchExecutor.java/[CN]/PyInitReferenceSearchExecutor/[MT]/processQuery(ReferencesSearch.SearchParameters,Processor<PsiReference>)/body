{
  PsiElement element=queryParameters.getElementToSearch();
  if (!(element instanceof PyFunction)) {
    return;
  }
  final AccessToken accessToken=ApplicationManager.getApplication().acquireReadActionLock();
  String className;
  SearchScope searchScope;
  PyFunction function;
  try {
    function=(PyFunction)element;
    if (!PyNames.INIT.equals(function.getName())) {
      return;
    }
    final PyClass pyClass=function.getContainingClass();
    if (pyClass == null) {
      return;
    }
    className=pyClass.getName();
    if (className == null) {
      return;
    }
    searchScope=queryParameters.getEffectiveSearchScope();
    if (searchScope instanceof GlobalSearchScope) {
      searchScope=GlobalSearchScope.getScopeRestrictedByFileTypes((GlobalSearchScope)searchScope,PythonFileType.INSTANCE);
    }
  }
  finally {
    accessToken.finish();
  }
  queryParameters.getOptimizer().searchWord(className,searchScope,UsageSearchContext.IN_CODE,true,function);
}
