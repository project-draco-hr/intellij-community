{
  Cursor currentCursor=getCursor();
  setCursor(new Cursor(Cursor.WAIT_CURSOR));
  if (descriptor != null) {
    final JPanel editorPanel=new JPanel();
    editorPanel.setLayout(new BorderLayout());
    final PsiElement containingElement=refEntity instanceof RefElement ? ((RefElement)refEntity).getElement() : null;
    if (valid && descriptor.getProblemCount() > 0) {
      editorPanel.add(new QuickFixToolbar(descriptor,myTree.getSelectedToolWrapper(),myTree.getSelectionPaths(),myProject,containingElement),BorderLayout.NORTH);
    }
    editorPanel.add(createBaseRightComponentFor(containingElement,descriptor),BorderLayout.CENTER);
    mySplitter.setSecondComponent(editorPanel);
  }
  setCursor(currentCursor);
}
