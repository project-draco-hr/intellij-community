{
  String groupName=toolWrapper.getGroupDisplayName().isEmpty() ? InspectionProfileEntry.GENERAL_GROUP_NAME : toolWrapper.getGroupDisplayName();
  InspectionTreeNode parentNode=getToolParentNode(groupName,toolWrapper.getGroupPath(),errorLevel,groupedBySeverity,isSingleInspectionRun);
  InspectionNode toolNode=new InspectionNode(toolWrapper,myInspectionProfile);
  boolean showStructure=myGlobalInspectionContext.getUIOptions().SHOW_STRUCTURE;
  toolNode=myProvider.appendToolNodeContent(myGlobalInspectionContext,toolNode,parentNode,showStructure,groupedBySeverity);
  InspectionToolPresentation presentation=myGlobalInspectionContext.getPresentation(toolWrapper);
  toolNode=presentation.createToolNode(myGlobalInspectionContext,toolNode,myProvider,parentNode,showStructure,groupedBySeverity);
  ((DefaultInspectionToolPresentation)presentation).setToolNode(toolNode);
  registerActionShortcuts(presentation);
  return toolNode;
}
