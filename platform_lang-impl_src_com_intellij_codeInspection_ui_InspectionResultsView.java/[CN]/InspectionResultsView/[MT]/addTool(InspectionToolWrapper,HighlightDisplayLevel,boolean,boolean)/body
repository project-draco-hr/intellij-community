{
  String groupName=toolWrapper.getGroupDisplayName().isEmpty() ? InspectionProfileEntry.GENERAL_GROUP_NAME : toolWrapper.getGroupDisplayName();
  InspectionTreeNode parentNode=getToolParentNode(groupName,errorLevel,groupedBySeverity,isSingleInspectionRun);
  InspectionNode toolNode=new InspectionNode(toolWrapper,myInspectionProfile);
  boolean showStructure=myGlobalInspectionContext.getUIOptions().SHOW_STRUCTURE;
  myProvider.appendToolNodeContent(myGlobalInspectionContext,toolNode,parentNode,showStructure);
  InspectionToolPresentation presentation=myGlobalInspectionContext.getPresentation(toolWrapper);
  toolNode=presentation.createToolNode(myGlobalInspectionContext,toolNode,myProvider,parentNode,showStructure);
synchronized (getTreeStructureUpdateLock()) {
    ((DefaultInspectionToolPresentation)presentation).setToolNode(toolNode);
  }
  registerActionShortcuts(presentation);
  return toolNode;
}
