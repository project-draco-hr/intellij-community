{
  Cursor currentCursor=getCursor();
  try {
    setCursor(new Cursor(Cursor.WAIT_CURSOR));
    final JPanel editorPanel=new JPanel();
    editorPanel.setLayout(new BorderLayout());
    final int problemCount=myTreeBuilder.getSelectedProblemCount();
    editorPanel.add(createBaseRightComponentFor(problemCount,refEntity),BorderLayout.CENTER);
    if (problemCount > 0) {
      final InspectionToolWrapper tool=myTreeBuilder.getSelectedToolWrapper();
      LOG.assertTrue(tool != null);
      editorPanel.add(new QuickFixToolbar(myTreeBuilder,myProject,myPreviewEditor,myProvider.getQuickFixes(tool,myTreeBuilder)),BorderLayout.NORTH);
    }
    mySplitter.setSecondComponent(editorPanel);
  }
  finally {
    setCursor(currentCursor);
  }
}
