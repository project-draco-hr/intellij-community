{
  List<String> parameters=new LinkedList<String>();
  parameters.add("--logfile");
  parameters.add(saveCommitMessage().getAbsolutePath());
  if (HGENCODING == null) {
    parameters.add("--encoding");
    parameters.add(myCharset.name());
  }
  parameters.addAll(chunk);
  HgCommandExecutor executor=new HgCommandExecutor(myProject);
  executor.setCharset(myCharset);
  ensureSuccess(executor.executeInCurrentThread(myRoot,"commit",parameters));
}
