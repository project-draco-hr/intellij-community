{
  final Module module=ideaPlugin.getModule();
  if (module == null)   return;
  if (!PsiUtil.isIdeaProject(module.getProject()))   return;
  String pluginId=ideaPlugin.getPluginId();
  if (pluginId == null || pluginId.equals(PluginManagerCore.CORE_PLUGIN_ID))   return;
  XmlTag xmlTag=ideaPlugin.getXmlTag();
  if (xmlTag == null)   return;
  VirtualFile virtualFile=xmlTag.getContainingFile().getVirtualFile();
  if (virtualFile == null || !ModuleRootManager.getInstance(module).getFileIndex().isUnderSourceRootOfType(virtualFile,JavaModuleSourceRootTypes.PRODUCTION)) {
    return;
  }
  final Vendor vendor=ContainerUtil.getFirstItem(ideaPlugin.getVendors());
  if (vendor == null) {
    holder.createProblem(DomUtil.getFileElement(ideaPlugin),"Plugin developed as a part of IntelliJ IDEA project should specify 'JetBrains' as its vendor",new SpecifyJetBrainsAsVendorQuickFix());
  }
 else   if (!PluginManagerMain.isDevelopedByJetBrains(vendor.getValue())) {
    holder.createProblem(vendor,"Plugin developed as a part of IntelliJ IDEA project should include 'JetBrains' as one of its vendors");
  }
}
