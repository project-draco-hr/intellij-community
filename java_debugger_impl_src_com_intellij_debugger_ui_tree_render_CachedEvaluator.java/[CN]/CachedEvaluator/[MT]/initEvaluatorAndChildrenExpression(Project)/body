{
  final Cache cache=new Cache();
  try {
    Pair<PsiElement,PsiType> psiClassAndType=DebuggerUtilsImpl.getPsiClassAndType(getClassName(),project);
    if (psiClassAndType.first == null) {
      throw EvaluateExceptionUtil.CANNOT_FIND_SOURCE_CLASS;
    }
    cache.myPsiChildrenExpression=null;
    JavaCodeFragment codeFragment=myDefaultFragmentFactory.createCodeFragment(myReferenceExpression,psiClassAndType.first,project);
    codeFragment.setThisType(psiClassAndType.second);
    DebuggerUtils.checkSyntax(codeFragment);
    cache.myPsiChildrenExpression=codeFragment instanceof PsiExpressionCodeFragment ? ((PsiExpressionCodeFragment)codeFragment).getExpression() : null;
    cache.myEvaluator=myDefaultFragmentFactory.getEvaluatorBuilder().build(codeFragment,null);
  }
 catch (  EvaluateException e) {
    cache.myException=e;
  }
  myCache=new SoftReference<>(cache);
  return cache;
}
