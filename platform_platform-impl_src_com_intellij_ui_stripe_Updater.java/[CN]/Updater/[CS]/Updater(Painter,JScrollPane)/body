{
  myPainter=painter;
  myScrollBar=pane.getVerticalScrollBar();
  myScrollBar.addMouseListener(myMouseAdapter);
  myScrollBar.addMouseMotionListener(myMouseAdapter);
  myQueue=new MergingUpdateQueue("ErrorStripeUpdater",100,true,myScrollBar,this);
  UIUtil.putClientProperty(myScrollBar,RegionPainter.BUTTONLESS_SCROLL_BAR_UI_EXTRA_TRACK,new RegionPainter(){
    @Override public void paint(    Graphics g,    int x,    int y,    int width,    int height){
      DaemonCodeAnalyzerSettings settings=DaemonCodeAnalyzerSettings.getInstance();
      myPainter.setMinimalThickness(settings == null ? 2 : Math.min(settings.ERROR_STRIPE_MARK_MIN_HEIGHT,JBUI.scale(4)));
      myPainter.setErrorStripeGap(Registry.intValue("error.stripe.gap",0));
      myPainter.paint(g,x,y,width,height);
    }
  }
);
}
