{
  final GrListOrMap listOrMap=getElement();
  final PsiClassType conversionType=getTargetConversionType(listOrMap);
  if (conversionType == null)   return null;
  if (listOrMap.isEmpty()) {
    PsiType unboxed=TypesUtil.unboxPrimitiveTypeWrapper(conversionType);
    if (PsiType.BOOLEAN == unboxed || PsiType.CHAR == unboxed) {
      return null;
    }
  }
  final PsiType type=listOrMap.getType();
  final PsiType ownType=type instanceof PsiClassType ? ((PsiClassType)type).rawType() : type;
  if (ownType != null && TypesUtil.isAssignableWithoutConversions(conversionType.rawType(),ownType,listOrMap))   return null;
  final PsiClass resolved=conversionType.resolve();
  if (resolved != null) {
    if (InheritanceUtil.isInheritor(resolved,CommonClassNames.JAVA_UTIL_SET))     return null;
    if (InheritanceUtil.isInheritor(resolved,CommonClassNames.JAVA_UTIL_LIST))     return null;
  }
  return conversionType;
}
