{
  boolean result=((ApplicationEx)ApplicationManager.getApplication()).runProcessWithProgressSynchronouslyInReadAction(getProject(),"title",true,"cancel",null,new Runnable(){
    @Override public void run(){
      try {
        assertFalse(SwingUtilities.isEventDispatchThread());
        assertTrue(ApplicationManager.getApplication().isReadAccessAllowed());
      }
 catch (      Throwable e) {
        exception=e;
      }
    }
  }
);
  assertTrue(result);
  if (exception != null)   throw exception;
}
