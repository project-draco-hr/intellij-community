{
  int length=b.length;
  byte[] btemp=new byte[length];
  int pos=0;
  int bytes_read=-1;
  for (; ; ) {
    bytes_read=read(btemp,0,length - pos);
    if (bytes_read == -1) {
      return -1;
    }
    System.arraycopy(btemp,0,b,pos,bytes_read);
    pos+=bytes_read;
    if (pos == length) {
      break;
    }
  }
  return length;
}
