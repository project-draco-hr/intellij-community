{
  TIntObjectHashMap<DuplicatesProfile> patternCache=ourProfileCache.get(dupInfo);
  if (patternCache == null) {
    patternCache=new TIntObjectHashMap<DuplicatesProfile>();
    ourProfileCache.put(dupInfo,patternCache);
  }
  DuplicatesProfile result=patternCache.get(index);
  if (result == null) {
    DuplicatesProfile[] profiles=Extensions.getExtensions(DuplicatesProfile.EP_NAME);
    DuplicatesProfile theProfile=null;
    for (    DuplicatesProfile profile : profiles) {
      if (profile.isMyDuplicate(dupInfo,index)) {
        theProfile=profile;
        break;
      }
    }
    result=theProfile == null ? NULL_PROFILE : theProfile;
    patternCache.put(index,result);
  }
  return result == NULL_PROFILE ? null : result;
}
