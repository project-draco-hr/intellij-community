{
  if (branch instanceof PsiBlockStatement)   return;
  boolean transformingOneLiner=branch != null && (startLine(doc,beforeBranch) == startLine(doc,branch) || startCol(doc,ifStatement) < startCol(doc,branch));
  if (!transformingOneLiner) {
    doc.insertString(beforeBranch.getTextRange().getEndOffset(),"{}");
  }
 else {
    doc.insertString(beforeBranch.getTextRange().getEndOffset(),"{");
    doc.insertString(branch.getTextRange().getEndOffset() + 1,"}");
  }
}
