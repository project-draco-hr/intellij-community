{
  super(true,true);
  JPanel toolbarPanel=createToolbarPanel();
  setToolbar(toolbarPanel);
  final StudyEditor studyEditor=StudyUtils.getSelectedStudyEditor(project);
  final JTextPane taskTextPane=createTaskTextPane();
  if (studyEditor == null) {
    taskTextPane.setText(EMPTY_TASK_TEXT);
    setContent(taskTextPane);
    return;
  }
  final Task task=studyEditor.getTaskFile().getTask();
  if (task != null) {
    final String taskText=task.getText();
    JBScrollPane scrollPane=new JBScrollPane(taskTextPane);
    taskTextPane.setText(taskText);
    taskTextPane.addHyperlinkListener(BrowserHyperlinkListener.INSTANCE);
    setContent(scrollPane);
    final FileEditorManagerListener listener=new StudyFileEditorManagerListener(project,taskTextPane);
    project.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,listener);
  }
}
