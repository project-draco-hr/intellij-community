{
  super(true,true);
  JPanel toolbarPanel=createToolbarPanel();
  setToolbar(toolbarPanel);
  final StudyEditor studyEditor=StudyUtils.getSelectedStudyEditor(project);
  if (studyEditor == null) {
    final JTextPane taskTextPane=new JTextPane();
    taskTextPane.setEditable(false);
    taskTextPane.setText(EMPTY_TASK_TEXT);
    taskTextPane.setBackground(EditorColorsManager.getInstance().getGlobalScheme().getDefaultBackground());
    taskTextPane.setBorder(new EmptyBorder(15,20,0,100));
    setContent(taskTextPane);
    return;
  }
  Task task=studyEditor.getTaskFile().getTask();
  if (task != null) {
    final String taskText=task.getText();
    final JTextPane taskTextPane=new JTextPane();
    JBScrollPane scrollPane=new JBScrollPane(taskTextPane);
    taskTextPane.setContentType("text/html");
    taskTextPane.setEditable(false);
    taskTextPane.setText(taskText);
    taskTextPane.addHyperlinkListener(BrowserHyperlinkListener.INSTANCE);
    taskTextPane.setBackground(EditorColorsManager.getInstance().getGlobalScheme().getDefaultBackground());
    taskTextPane.setBorder(new EmptyBorder(15,20,0,100));
    setContent(scrollPane);
    final FileEditorManagerListener listener=new StudyFileEditorManagerListener(project,taskTextPane);
    project.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,listener);
  }
}
