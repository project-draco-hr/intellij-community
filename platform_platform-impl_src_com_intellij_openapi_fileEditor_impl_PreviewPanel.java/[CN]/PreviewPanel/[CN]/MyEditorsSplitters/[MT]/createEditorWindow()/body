{
  return new EditorWindow(this){
    @Override protected void onBeforeSetEditor(    VirtualFile file){
      VirtualFile currentFile=getCurrentFile();
      if (currentFile != null && currentFile.equals(myModifiedFile)) {
        myBlocked=true;
        try {
          myManager.openFileWithProviders(myModifiedFile,false,true);
        }
  finally {
          myBlocked=false;
        }
      }
 else {
        toggleToolWindow(true);
      }
    }
  }
;
}
