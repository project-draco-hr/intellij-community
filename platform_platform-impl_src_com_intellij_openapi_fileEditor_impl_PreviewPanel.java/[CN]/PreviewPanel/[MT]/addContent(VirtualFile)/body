{
  myHistory.add(file);
  while (myHistory.size() > HISTORY_LIMIT) {
    myHistory.remove(0);
  }
  String title=StringUtil.getShortened(EditorTabbedContainer.calcTabTitle(myProject,file),UISettings.getInstance().EDITOR_TAB_TITLE_LIMIT);
  Content content=myContentManager.getFactory().createContent(this,title,false);
  content.putUserData(ToolWindow.SHOW_CONTENT_ICON,Boolean.TRUE);
  content.putUserData(FILE_KEY,file);
  content.setIcon(file.getFileType().getIcon());
  content.setPopupIcon(file.getFileType().getIcon());
  myContentManager.addContent(content,0);
  checkStubContent();
  return content;
}
