{
  VirtualFile virtualFile=getCurrentFile();
  if (virtualFile == null)   return null;
  if (!myHistory.contains(virtualFile)) {
    myHistory.add(virtualFile);
    while (myHistory.size() > HISTORY_LIMIT) {
      myHistory.remove(0);
    }
  }
  myWindow.closeFile(virtualFile);
  this.revalidate();
  this.repaint();
  return isModified(virtualFile) ? virtualFile : null;
}
