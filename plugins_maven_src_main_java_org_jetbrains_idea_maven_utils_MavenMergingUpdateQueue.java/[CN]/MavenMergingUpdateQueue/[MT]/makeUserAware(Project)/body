{
  AccessToken accessToken=ReadAction.start();
  try {
    EditorEventMulticaster multicaster=EditorFactory.getInstance().getEventMulticaster();
    multicaster.addCaretListener(new CaretAdapter(){
      @Override public void caretPositionChanged(      CaretEvent e){
        MavenMergingUpdateQueue.this.restartTimer();
      }
    }
,this);
    multicaster.addDocumentListener(new DocumentAdapter(){
      @Override public void documentChanged(      DocumentEvent event){
        MavenMergingUpdateQueue.this.restartTimer();
      }
    }
,this);
    project.getMessageBus().connect(this).subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootListener(){
      int beforeCalled;
      @Override public void beforeRootsChange(      ModuleRootEvent event){
        if (beforeCalled++ == 0) {
          suspend();
        }
      }
      @Override public void rootsChanged(      ModuleRootEvent event){
        if (beforeCalled == 0)         return;
        if (--beforeCalled == 0) {
          resume();
          MavenMergingUpdateQueue.this.restartTimer();
        }
      }
    }
);
  }
  finally {
    accessToken.finish();
  }
}
