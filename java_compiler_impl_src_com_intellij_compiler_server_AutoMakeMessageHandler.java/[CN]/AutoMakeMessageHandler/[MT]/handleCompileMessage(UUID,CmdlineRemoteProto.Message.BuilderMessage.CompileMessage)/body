{
  if (myProject.isDisposed()) {
    return;
  }
  final CmdlineRemoteProto.Message.BuilderMessage.CompileMessage.Kind kind=message.getKind();
  if (kind == CmdlineRemoteProto.Message.BuilderMessage.CompileMessage.Kind.PROGRESS) {
    final ProblemsView view=ProblemsView.SERVICE.getInstance(myProject);
    if (message.hasDone()) {
      view.setProgress(message.getText(),message.getDone());
    }
 else {
      view.setProgress(message.getText());
    }
  }
 else {
    final CompilerMessageCategory category=convertToCategory(kind);
    if (category != null) {
      final String sourceFilePath=message.hasSourceFilePath() ? message.getSourceFilePath() : null;
      final String url=sourceFilePath != null ? VirtualFileManager.constructUrl(LocalFileSystem.PROTOCOL,FileUtil.toSystemIndependentName(sourceFilePath)) : null;
      final long line=message.hasLine() ? message.getLine() : -1;
      final long column=message.hasColumn() ? message.getColumn() : -1;
      final CompilerMessage msg=myContext.createAndAddMessage(category,message.getText(),url,(int)line,(int)column,null);
      if (kind == CmdlineRemoteProto.Message.BuilderMessage.CompileMessage.Kind.ERROR) {
        informWolf(myProject,message);
        ProblemsView.SERVICE.getInstance(myProject).addMessage(msg,sessionId);
      }
    }
  }
}
