{
  PsiType type=lambda.getFunctionalInterfaceType();
  if (type == null)   return lambda;
  String methodReference=convertToMethodReference(lambda.getBody(),lambda.getParameterList().getParameters(),type,lambda);
  if (methodReference == null)   return lambda;
  PsiTypeCastExpression replacement=(PsiTypeCastExpression)lambda.replace(factory.createExpressionFromText("(" + lambda.getFunctionalInterfaceType().getCanonicalText() + ")"+ methodReference,lambda));
  if (RedundantCastUtil.isCastRedundant(replacement)) {
    final PsiExpression operand=replacement.getOperand();
    LOG.assertTrue(operand != null);
    return (PsiExpression)replacement.replace(operand);
  }
  return replacement;
}
