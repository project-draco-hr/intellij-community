{
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null)   return;
  List<Module> pluginModules=new ArrayList<Module>();
  for (  Module aModule : ModuleManager.getInstance(project).getModules()) {
    if (PluginModuleType.isOfType(aModule)) {
      pluginModules.add(aModule);
    }
  }
  ChooseModulesDialog dialog=new ChooseModulesDialog(project,pluginModules,DevKitBundle.message("select.plugin.modules.title"),DevKitBundle.message("select.plugin.modules.description"));
  if (dialog.showAndGet()) {
    doPrepare(dialog.getChosenElements(),project);
  }
}
