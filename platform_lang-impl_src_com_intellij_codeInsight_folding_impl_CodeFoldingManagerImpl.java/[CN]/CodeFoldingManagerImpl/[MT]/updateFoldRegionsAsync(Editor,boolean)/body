{
  if (firstTime) {
    final Document document=editor.getDocument();
    if (!isFoldingsInitializedInDocument(document)) {
      return new Runnable(){
        @Override public void run(){
          final Editor[] editors=EditorFactory.getInstance().getEditors(document);
          for (          Editor anyEditor : editors)           if (!isFoldingsInitializedInEditor(anyEditor)) {
            createInitFoldingAction(updateFoldRegions(anyEditor,true,false),anyEditor).run();
          }
        }
      }
;
    }
    if (!isFoldingsInitializedInEditor(editor)) {
      return createInitFoldingAction(updateFoldRegions(editor,true,false),editor);
    }
  }
  return updateFoldRegions(editor,firstTime,false);
}
