{
  context.setAddCompletionChar(false);
  int lengthOfTypedKey=context.getTailOffset() - context.getStartOffset();
  String templateKey=myTemplate.getKey();
  Editor editor=context.getEditor();
  if (lengthOfTypedKey < templateKey.length()) {
    context.getDocument().insertString(context.getTailOffset(),templateKey.substring(lengthOfTypedKey));
    editor.getCaretModel().moveToOffset(context.getTailOffset() + templateKey.length() - lengthOfTypedKey);
  }
  PsiFile file=context.getFile();
  PostfixLiveTemplate postfixLiveTemplate=getPostfixLiveTemplate(file,editor.getCaretModel().getOffset());
  if (postfixLiveTemplate != null) {
    postfixLiveTemplate.expand(templateKey,new CustomTemplateCallback(editor,file,false));
  }
}
