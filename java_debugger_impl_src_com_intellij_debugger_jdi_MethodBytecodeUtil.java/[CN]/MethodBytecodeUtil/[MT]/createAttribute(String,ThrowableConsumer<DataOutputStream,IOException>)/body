{
  try (ByteArrayOutputStream bos=new ByteArrayOutputStream();DataOutputStream dos=new DataOutputStream(bos)){
    dos.writeInt(0xCAFEBABE);
    dos.writeInt(Opcodes.V1_8);
    dos.writeShort(0);
    int attributeSize=dos.size();
    generator.consume(dos);
    attributeSize=dos.size() - attributeSize;
    ClassReader cr=new ClassReader(bos.toByteArray());
    return new Attribute(name){
      @Override public Attribute read(      ClassReader cr,      int off,      int len,      char[] buf,      int codeOff,      Label[] labels){
        return super.read(cr,off,len,buf,codeOff,labels);
      }
    }
.read(cr,cr.header,attributeSize,null,0,null);
  }
 }
