{
  CredentialsProvider provider=new BasicCredentialsProvider();
  GithubAuthData.BasicAuth basicAuth=myAuth.getBasicAuth();
  if (basicAuth != null) {
    AuthScope authScope=getBasicAuthScope();
    provider.setCredentials(authScope,new UsernamePasswordCredentials(basicAuth.getLogin(),basicAuth.getPassword()));
    builder.addInterceptorFirst(new PreemptiveBasicAuthInterceptor(authScope));
  }
  builder.setDefaultCredentialsProvider(provider);
  if (myAuth.isUseProxy()) {
    IdeHttpClientHelpers.ApacheHttpClient4.setProxyCredentialsForUrlIfEnabled(provider,myAuth.getHost());
  }
  return provider;
}
