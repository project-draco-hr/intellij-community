{
  ProgressIndicatorUtils.scheduleWithWriteActionPriority(new ReadTask(){
    private volatile boolean myComputed=false;
    @Override public void computeInReadAction(    @NotNull ProgressIndicator indicator) throws ProcessCanceledException {
      boolean value=condition.value(myProject);
      myComputed=true;
      if (value) {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            initToolWindow(bean);
          }
        }
);
      }
    }
    @Override public void onCanceled(    @NotNull ProgressIndicator indicator){
      if (!myComputed) {
        checkConditionInReadAction(bean,condition);
      }
    }
  }
);
}
