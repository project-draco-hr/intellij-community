{
  PsiElement[] children1=element1.getChildren();
  ArrayList<PsiElement> array=new ArrayList<PsiElement>();
  for (  PsiElement child : children1) {
    if (!(child instanceof PsiWhiteSpace) && !(child instanceof PsiComment) && !(child instanceof PsiEmptyStatement)) {
      if (child instanceof PsiBlockStatement) {
        child=((PsiBlockStatement)child).getCodeBlock();
      }
      if (child instanceof PsiCodeBlock) {
        final PsiStatement[] statements=((PsiCodeBlock)child).getStatements();
        for (        PsiStatement statement : statements) {
          if (statement instanceof PsiBlockStatement) {
            Collections.addAll(array,getFilteredChildren(statement));
          }
 else           if (!(statement instanceof PsiEmptyStatement)) {
            array.add(statement);
          }
        }
        continue;
      }
 else       if (child instanceof PsiParenthesizedExpression) {
        array.add(PsiUtil.skipParenthesizedExprDown((PsiParenthesizedExpression)child));
        continue;
      }
      array.add(child);
    }
  }
  return PsiUtilCore.toPsiElementArray(array);
}
