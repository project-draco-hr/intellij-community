{
  ErrorState state=ErrorState.get(builder);
  Frame frame=state.currentFrame;
  state.currentFrame=frame == null ? null : frame.parentFrame;
  if (frame != null && frame.elementType != null)   elementType=frame.elementType;
  if (frame == null || level != frame.level) {
    LOG.error("Unbalanced error section: got " + frame + ", expected level "+ level);
    if (frame != null)     state.FRAMES.recycle(frame);
    close_marker_impl_(frame,marker,elementType,result);
    return;
  }
  if (((frame.modifiers & _AND_) | (frame.modifiers & _NOT_)) != 0) {
    close_marker_impl_(frame,marker,null,false);
    replace_variants_with_name_(state,frame,builder,result,pinned);
    state.predicateCount--;
    if ((frame.modifiers & _NOT_) != 0)     state.predicateSign=!state.predicateSign;
  }
 else {
    close_frame_impl_(state,frame,builder,marker,elementType,result,pinned);
    exit_section_impl_(state,frame,builder,elementType,result,pinned,eatMore);
  }
  state.FRAMES.recycle(frame);
}
