{
  PsiBuilder.Marker marker=elementType == null ? null : (PsiBuilder.Marker)builder.getLatestDoneMarker();
  if (elementType != null && marker == null) {
    builder.error("No expected done marker at offset " + builder.getCurrentOffset());
  }
  while (state.hooks != null && state.hooks.level >= level) {
    if (state.hooks.level == level) {
      marker=((Hook<Object>)state.hooks.hook).run(builder,marker,state.hooks.param);
    }
    state.hooks=state.hooks.next;
  }
}
