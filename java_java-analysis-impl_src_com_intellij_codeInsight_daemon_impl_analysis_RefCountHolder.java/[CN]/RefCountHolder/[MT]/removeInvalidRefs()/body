{
synchronized (myLocalRefsMap) {
    List<Pair<PsiElement,PsiReference>> toRemove=new ArrayList<>();
    for (    Map.Entry<PsiElement,Collection<PsiReference>> entry : myLocalRefsMap.entrySet()) {
      PsiElement element=entry.getKey();
      for (      PsiReference ref : entry.getValue()) {
        if (!ref.getElement().isValid()) {
          toRemove.add(Pair.create(element,ref));
        }
      }
    }
    for (    Pair<PsiElement,PsiReference> pair : toRemove) {
      myLocalRefsMap.remove(pair.first,pair.second);
    }
  }
  for (Iterator<PsiReference> iterator=myImportStatements.keySet().iterator(); iterator.hasNext(); ) {
    PsiReference ref=iterator.next();
    if (!ref.getElement().isValid()) {
      iterator.remove();
    }
  }
  removeInvalidFrom(myDclsUsedMap.keySet());
}
