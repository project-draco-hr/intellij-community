{
  final CompiledPattern[] result=new CompiledPattern[1];
  final Runnable runnable=new Runnable(){
    public void run(){
      result[0]=ApplicationManager.getApplication().runWriteAction(new Computable<CompiledPattern>(){
        public CompiledPattern compute(){
          return compilePatternImpl(project,options);
        }
      }
);
    }
  }
;
  if (!ApplicationManager.getApplication().isDispatchThread()) {
    ApplicationManager.getApplication().invokeAndWait(runnable,ModalityState.defaultModalityState());
  }
 else {
    runnable.run();
  }
  return result[0];
}
