{
  final String text="def foo(x): return x.bar\n" + "def xyzzy(a, x):\n" + "    if a:\n"+ "        return foo(x)\n"+ "    else:\n"+ "        return foo(x)\n"+ "expr = xyzzy(a, b)";
  PyExpression expr=parseExpr(text);
  PyType t=getTypeEvalContext(expr).getType(expr);
  assertInstanceOf(t,PyTypeReference.class);
}
