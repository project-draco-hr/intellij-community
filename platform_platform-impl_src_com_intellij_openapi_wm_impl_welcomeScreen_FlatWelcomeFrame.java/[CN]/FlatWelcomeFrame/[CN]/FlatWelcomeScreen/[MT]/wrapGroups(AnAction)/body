{
  if (action instanceof ActionGroup && ((ActionGroup)action).isPopup()) {
    final Pair<JPanel,Runnable> panel=createActionGroupPanel((ActionGroup)action);
    final String name=action.getClass().getName();
    mySlidingPanel.add(name,panel.first);
    final Presentation p=action.getTemplatePresentation();
    return new DumbAwareAction(p.getText(),p.getDescription(),p.getIcon()){
      @Override public void actionPerformed(      @NotNull AnActionEvent e){
        mySlidingPanel.getLayout().swipe(mySlidingPanel,name,JBCardLayout.SwipeDirection.FORWARD,panel.second);
      }
    }
;
  }
  return action;
}
