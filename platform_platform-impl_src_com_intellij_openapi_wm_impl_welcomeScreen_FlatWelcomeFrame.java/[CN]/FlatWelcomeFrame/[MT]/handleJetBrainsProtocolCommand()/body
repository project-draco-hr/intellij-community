{
  String command=JetBrainsProtocolHandler.getCommand();
  if (command != null) {
    try {
      if (command.equals("checkout")) {
        String vcs=JetBrainsProtocolHandler.getMainParameter();
        if (vcs != null) {
          AnAction group=ActionManager.getInstance().getAction("NewProjectFromVCS");
          if (group instanceof ActionGroup) {
            AnActionEvent e=new AnActionEvent(null,DataManager.getInstance().getDataContext(),ActionPlaces.WELCOME_SCREEN,new Presentation(),ActionManager.getInstance(),0);
            for (            AnAction action : ((ActionGroup)group).getChildren(e)) {
              if (vcs.equalsIgnoreCase(action.getTemplatePresentation().getText())) {
                action.actionPerformed(e);
                break;
              }
            }
          }
        }
      }
 else       if (command.equals("open")) {
        String path=URLDecoder.decode(JetBrainsProtocolHandler.getMainParameter());
        if (path.startsWith(LocalFileSystem.PROTOCOL_PREFIX)) {
          path=path.substring(LocalFileSystem.PROTOCOL_PREFIX.length());
        }
        ProjectUtil.openProject(path,null,true);
      }
    }
  finally {
      JetBrainsProtocolHandler.clear();
    }
  }
}
