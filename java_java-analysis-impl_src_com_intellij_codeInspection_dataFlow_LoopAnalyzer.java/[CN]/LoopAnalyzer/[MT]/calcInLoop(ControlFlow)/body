{
  final int[] loop=new int[controlFlow.getInstructionCount()];
  MyGraph graph=new MyGraph(controlFlow);
  final DFSTBuilder<Instruction> builder=new DFSTBuilder<Instruction>(graph);
  TIntArrayList sccs=builder.getSCCs();
  sccs.forEach(new TIntProcedure(){
    private int myTNumber;
    private int component;
    @Override public boolean execute(    int size){
      int value=size > 1 ? ++component : 0;
      for (int i=0; i < size; i++) {
        Instruction instruction=builder.getNodeByTNumber(myTNumber + i);
        loop[instruction.getIndex()]=value;
      }
      myTNumber+=size;
      return true;
    }
  }
);
  return loop;
}
