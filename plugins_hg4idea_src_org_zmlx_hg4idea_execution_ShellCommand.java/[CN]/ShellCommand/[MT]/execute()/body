{
  StringWriter out=new StringWriter();
  StringWriter err=new StringWriter();
  try {
    Process process=myCommandLine.createProcess();
    CapturingProcessHandler processHandler=new CapturingProcessHandler(process,myCommandLine.getCharset());
    final ProcessOutput processOutput=processHandler.runProcess();
    int exitValue=processOutput.getExitCode();
    out.write(processOutput.getStdout());
    err.write(processOutput.getStderr());
    return new HgCommandResult(out,err,exitValue);
  }
 catch (  ExecutionException e) {
    throw new ShellCommandException(e);
  }
}
