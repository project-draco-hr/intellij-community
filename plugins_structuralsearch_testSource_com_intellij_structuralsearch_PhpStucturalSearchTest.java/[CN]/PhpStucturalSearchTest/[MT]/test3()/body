{
  String s="<?php\n" + "function f($param) {\n" + "  echo \"hello\";\n"+ "}\n"+ "function f($param) {\n"+ "  echo \"123\";\n"+ "}\n"+ "function g($param) {\n"+ "  echo $param;\n"+ "}";
  doTest(s,"function f($param$) {\n" + "  echo \"hello\";\n" + "}",1);
  doTest(s,"function $f$($param$) {\n" + "  echo \"hello\";\n" + "}",1);
  doTest(s,"function $f$($param$) {\n" + "  echo $s$;\n" + "}",3);
  doTest(s,"function f($param$) {\n" + "  echo $s$;\n" + "}",2);
  doTest(s,"function $f$($param$) {\n" + "  echo $param$;\n" + "}",1);
  doTest(s,"function g($param$) {\n" + "  echo $param$;\n" + "}",1);
  doTest(s,"function f($param$)",2);
  doTest(s,"function $f$($param$)",3);
}
