{
  if (CommonDataKeys.EDITOR.is(dataId)) {
    return myEditor;
  }
  if (dataId.equals(AnActionEvent.injectedId(CommonDataKeys.EDITOR.getName()))) {
    return InjectedLanguageUtil.getEditorForInjectedLanguageNoCommit(getEditor(),getFile());
  }
  if (CommonDataKeys.PSI_FILE.is(dataId)) {
    return myFile;
  }
  if (dataId.equals(AnActionEvent.injectedId(CommonDataKeys.PSI_FILE.getName()))) {
    Editor editor=InjectedLanguageUtil.getEditorForInjectedLanguageNoCommit(getEditor(),getFile());
    return editor instanceof EditorWindow ? ((EditorWindow)editor).getInjectedFile() : getFile();
  }
  return super.getData(dataId);
}
