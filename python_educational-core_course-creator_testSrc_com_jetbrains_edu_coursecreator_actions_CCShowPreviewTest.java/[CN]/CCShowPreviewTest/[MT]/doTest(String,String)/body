{
  VirtualFile file=configureByTaskFile(beforeName);
  CCShowPreview action=new CCShowPreview();
  TestActionEvent e=getActionEvent(action,getPsiManager().findFile(file));
  action.beforeActionPerformedUpdate(e);
  assertTrue(e.getPresentation().isEnabled() && e.getPresentation().isVisible());
  action.actionPerformed(e);
  Editor editor=EditorFactory.getInstance().getAllEditors()[1];
  Pair<Document,List<AnswerPlaceholder>> pair=getPlaceholders(afterName);
  assertEquals("Files don't match",editor.getDocument().getText(),pair.getFirst().getText());
  for (  AnswerPlaceholder placeholder : pair.getSecond()) {
    assertNotNull("No highlighter for placeholder",getHighlighter(editor.getMarkupModel(),placeholder));
  }
  EditorFactory.getInstance().releaseEditor(editor);
}
