{
  VirtualFile file=configureByTaskFile(name + CCTestsUtil.BEFORE_POSTFIX);
  CCShowPreview action=new CCShowPreview();
  TestActionEvent e=getActionEvent(action,PsiManager.getInstance(getProject()).findFile(file));
  action.beforeActionPerformedUpdate(e);
  assertTrue(e.getPresentation().isEnabled() && e.getPresentation().isVisible());
  action.actionPerformed(e);
  Editor editor=EditorFactory.getInstance().getAllEditors()[1];
  Pair<Document,List<AnswerPlaceholder>> pair=getPlaceholders(name + CCTestsUtil.AFTER_POSTFIX);
  assertEquals("Files don't match",editor.getDocument().getText(),pair.getFirst().getText());
  for (  AnswerPlaceholder placeholder : pair.getSecond()) {
    assertNotNull("No highlighter for placeholder:" + CCTestsUtil.getPlaceholderPresentation(placeholder),getHighlighter(editor.getMarkupModel(),placeholder));
  }
}
