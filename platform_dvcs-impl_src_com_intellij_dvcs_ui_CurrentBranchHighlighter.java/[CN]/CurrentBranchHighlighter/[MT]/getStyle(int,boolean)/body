{
  if (isSelected || !myUiProperties.isHighlightCurrentBranch())   return VcsCommitStyle.DEFAULT;
  VcsShortCommitDetails details=myDataHolder.getMiniDetailsGetter().getCommitDataIfAvailable(commitIndex);
  if (details != null && !(details instanceof LoadingDetails)) {
    Repository repo=myRepositoryManager.getRepositoryForRoot(details.getRoot());
    if (repo != null) {
      String currentBranch=repo.getCurrentBranchName();
      if (currentBranch == null) {
        if (repo.getCurrentRevision() != null)         currentBranch="HEAD";
      }
      if (currentBranch != null) {
        Condition<Hash> condition=myDataHolder.getContainingBranchesGetter().getContainedInBranchCondition(currentBranch,details.getRoot());
        if (condition.value(details.getId())) {
          return VcsCommitStyleFactory.background(CURRENT_BRANCH_BG);
        }
      }
    }
  }
  return VcsCommitStyle.DEFAULT;
}
