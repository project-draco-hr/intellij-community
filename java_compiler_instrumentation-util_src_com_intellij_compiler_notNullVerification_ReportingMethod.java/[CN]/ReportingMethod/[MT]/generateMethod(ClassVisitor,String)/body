{
  MethodVisitor mv=cw.visitMethod(ACC_PRIVATE | ACC_SYNTHETIC | ACC_STATIC,name,getMethodDesc(),null,null);
  mv.visitTypeInsn(NEW,exceptionClass);
  mv.visitInsn(DUP);
  mv.visitLdcInsn(descrPattern);
  mv.visitLdcInsn(argCount);
  mv.visitTypeInsn(ANEWARRAY,OBJECT_CLASS_NAME);
  for (int i=0; i < argCount; i++) {
    mv.visitInsn(DUP);
    mv.visitLdcInsn(i);
    mv.visitVarInsn(ALOAD,i);
    mv.visitInsn(AASTORE);
  }
  mv.visitMethodInsn(INVOKESTATIC,STRING_CLASS_NAME,"format","(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;",false);
  mv.visitMethodInsn(INVOKESPECIAL,exceptionClass,CONSTRUCTOR_NAME,EXCEPTION_INIT_SIGNATURE,false);
  mv.visitInsn(ATHROW);
  mv.visitMaxs(0,0);
}
