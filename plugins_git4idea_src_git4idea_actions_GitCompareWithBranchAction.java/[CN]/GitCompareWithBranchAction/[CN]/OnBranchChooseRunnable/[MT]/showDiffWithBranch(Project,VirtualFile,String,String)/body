{
  FilePath filePath=VcsUtil.getFilePath(file);
  GitRevisionNumber compareRevisionNumber=(GitRevisionNumber)GitHistoryUtils.getCurrentRevision(project,filePath,branchToCompare);
  if (compareRevisionNumber == null) {
    fileDoesntExistInBranchError(project,file,branchToCompare);
    return;
  }
  GitRevisionNumber currentRevisionNumber=(GitRevisionNumber)GitHistoryUtils.getCurrentRevision(project,filePath,head);
  if (currentRevisionNumber == null) {
    LOG.error(String.format("Current revision number is null for file [%s] and branch [%s]",filePath,head));
    return;
  }
  VcsFileRevision compareRevision=new GitFileRevision(project,filePath,new GitRevisionNumber(branchToCompare,compareRevisionNumber.getTimestamp()));
  CurrentRevision currentRevision=new CurrentRevision(file,new GitRevisionNumber(head,currentRevisionNumber.getTimestamp()));
  new GitDiffFromHistoryHandler(project).showDiffForTwo(project,VcsUtil.getFilePath(file),compareRevision,currentRevision);
}
