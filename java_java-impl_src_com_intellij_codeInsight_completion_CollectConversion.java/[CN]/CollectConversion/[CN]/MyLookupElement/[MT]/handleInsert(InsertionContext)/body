{
  context.getDocument().replaceString(context.getStartOffset(),context.getTailOffset(),getInsertString());
  context.commitDocument();
  PsiMethodCallExpression call=PsiTreeUtil.findElementOfClassAtOffset(context.getFile(),context.getStartOffset(),PsiMethodCallExpression.class,false);
  if (call == null)   return;
  PsiExpression[] args=call.getArgumentList().getExpressions();
  if (args.length != 1 || !(args[0] instanceof PsiMethodCallExpression))   return;
  PsiMethodCallExpression innerCall=(PsiMethodCallExpression)args[0];
  PsiMethod collectorMethod=innerCall.resolveMethod();
  if (collectorMethod != null && collectorMethod.getParameterList().getParametersCount() > 0) {
    context.getEditor().getCaretModel().moveToOffset(innerCall.getArgumentList().getFirstChild().getTextRange().getEndOffset());
  }
  JavaCodeStyleManager.getInstance(context.getProject()).shortenClassReferences(innerCall);
}
