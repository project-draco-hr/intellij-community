{
  boolean hadFocus=isFocused();
  DiffRequest request=loadRequest();
  if (!force && request == myActiveRequest)   return;
  resetState();
  setupActiveRequest(request);
  setupSuitableTool();
  setupActiveViewer();
  initActiveViewer();
  if (hadFocus)   requestFocus();
}
