{
  final Sdk sdk=ProjectRootManager.getInstance(project).getProjectSdk();
  if (sdk != null && sdk.getSdkType() instanceof PythonSdkType) {
    VirtualFile libDir=findLibDir(sdk.getRootProvider().getFiles(OrderRootType.CLASSES));
    if (libDir != null) {
      List<VirtualFile> testDirs=findTestDirs(libDir,"test","bsddb/test","ctypes/test","distutils/tests","email/test","importlib/test","json/tests","lib2to3/tests","sqlite3/test","tkinter/test");
      if (!testDirs.isEmpty()) {
        GlobalSearchScope scope=buildUnionScope(project,testDirs);
        return ProjectScope.getAllScope(project).intersectWith(GlobalSearchScope.notScope(scope));
      }
    }
  }
  return ProjectScope.getAllScope(project);
}
