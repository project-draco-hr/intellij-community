{
  String methodName=getFullMethodName(description);
  if (methodName == null) {
    final boolean isIgnored=MapSerializerUtil.TEST_IGNORED.equals(messageName);
    if (!isIgnored) {
      methodName="Class Configuration";
      myPrintStream.println("##teamcity[testStarted name=\'" + escapeName(methodName) + "\' "+ getClassLocation(JUnit4ReflectionUtil.getClassName(description))+ " ]");
      testFailure(failure,messageName,methodName);
      myPrintStream.println("\n##teamcity[testFinished name=\'" + escapeName(methodName) + "\']");
    }
    if (myFinishedCount == 0) {
      for (Iterator iterator=description.getChildren().iterator(); iterator.hasNext(); ) {
        testFailure(isIgnored ? failure : null,(Description)iterator.next(),MapSerializerUtil.TEST_IGNORED,false);
      }
    }
  }
 else {
    if (!local)     testStarted(description);
    testFailure(failure,messageName,methodName);
    if (!local)     testFinished(description);
  }
}
