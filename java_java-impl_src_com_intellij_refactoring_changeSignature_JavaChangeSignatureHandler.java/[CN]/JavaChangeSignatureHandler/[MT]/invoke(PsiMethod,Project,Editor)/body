{
  PsiMethod newMethod=SuperMethodWarningUtil.checkSuperMethod(method,RefactoringBundle.message("to.refactor"));
  if (newMethod == null)   return;
  if (!newMethod.equals(method)) {
    ChangeSignatureUtil.invokeChangeSignatureOn(newMethod,project);
    return;
  }
  if (!CommonRefactoringUtil.checkReadOnlyStatus(project,method))   return;
  final PsiClass containingClass=method.getContainingClass();
  final PsiReferenceExpression refExpr=editor != null ? JavaTargetElementEvaluator.findReferenceExpression(editor) : null;
  final boolean allowDelegation=containingClass != null && (!containingClass.isInterface() || PsiUtil.isLanguageLevel8OrHigher(containingClass));
  final DialogWrapper dialog=new JavaChangeSignatureDialog(project,method,allowDelegation,refExpr == null ? method : refExpr);
  dialog.show();
}
