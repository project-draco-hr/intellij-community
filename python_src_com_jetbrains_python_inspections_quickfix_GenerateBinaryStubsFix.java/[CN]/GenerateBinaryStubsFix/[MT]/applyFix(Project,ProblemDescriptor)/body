{
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      ProgressManager.getInstance().getProgressIndicator().setIndeterminate(true);
      List<String> assemblyRefs=collectAssemblyReferences(descriptor.getPsiElement().getContainingFile());
      try {
        final PySkeletonRefresher refresher=new PySkeletonRefresher(project,mySdk,null,null);
        refresher.generateSkeleton(myQualifiedName,"",assemblyRefs,Consumer.EMPTY_CONSUMER);
        final VirtualFile skeletonDir;
        skeletonDir=LocalFileSystem.getInstance().findFileByPath(refresher.getSkeletonsPath());
        if (skeletonDir != null) {
          skeletonDir.refresh(true,true);
        }
      }
 catch (      InvalidSdkException e) {
        final Notification notification=PythonSdkType.createInvalidSdkNotification(project);
        notification.notify(project);
      }
    }
  }
,"Generating skeletons for binary module",false,project);
}
