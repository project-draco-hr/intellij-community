{
  if (myAppliedTo == null)   return false;
  int line1=myAppliedTo.start;
  int line2=myAppliedTo.end;
  DiffUtil.UpdatedLineRange newRange=DiffUtil.updateRangeOnModification(line1,line2,oldLine1,oldLine2,shift,true,true);
  myAppliedTo=new LineRange(newRange.startLine,newRange.endLine);
  if (newRange.damaged)   myIsValid=false;
  return newRange.damaged || myAppliedTo.start != line1 || myAppliedTo.end != line2;
}
