{
  if (!SwingUtilities.isEventDispatchThread()) {
    return AccessToken.EMPTY_ACCESS_TOKEN;
  }
  Disposable token=Disposer.newDisposable(activityName);
  IdeEventQueue.getInstance().addPostprocessor(new ProhibitAWTEvents(activityName),token);
  return new AccessToken(){
    @Override public void finish(){
      Disposer.dispose(token);
    }
  }
;
}
