{
  if (!SwingUtilities.isEventDispatchThread()) {
    return AccessToken.EMPTY_ACCESS_TOKEN;
  }
  ProhibitAWTEvents dispatcher=new ProhibitAWTEvents(activityName);
  IdeEventQueue.getInstance().addPostprocessor(dispatcher,null);
  return new AccessToken(){
    @Override public void finish(){
      IdeEventQueue.getInstance().removePostprocessor(dispatcher);
    }
  }
;
}
