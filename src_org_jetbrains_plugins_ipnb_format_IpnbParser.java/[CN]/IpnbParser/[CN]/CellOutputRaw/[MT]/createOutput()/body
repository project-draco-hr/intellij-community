{
  final CellOutput cellOutput;
  if (png != null) {
    cellOutput=new PngCellOutput(png,text);
  }
 else   if (latex != null) {
    cellOutput=new LatexCellOutput(latex,prompt_number,text);
  }
 else   if (stream != null) {
    cellOutput=new StreamCellOutput(stream,text);
  }
 else {
    cellOutput=new CellOutput(text);
  }
  return cellOutput;
}
