{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            final Editor editor=event.getEditor();
            VirtualFile vfOpenedFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
            if (vfOpenedFile != null) {
              if (fileChanged(vfOpenedFile)) {
                return;
              }
              TaskManager taskManager=TaskManager.getInstance();
              int currentTask=taskManager.getTaskNumForFile(vfOpenedFile.getName());
              TaskFile tf=taskManager.getTaskFile(currentTask,vfOpenedFile.getName());
              tf.drawFirstUnresolved(editor);
            }
          }
 catch (          Exception e) {
            Log.print("Something wrong with meta file:" + e.getCause());
            Log.print(Arrays.toString(e.getStackTrace()));
            Log.print(e.getMessage());
            Log.flush();
          }
        }
      }
);
    }
  }
);
}
