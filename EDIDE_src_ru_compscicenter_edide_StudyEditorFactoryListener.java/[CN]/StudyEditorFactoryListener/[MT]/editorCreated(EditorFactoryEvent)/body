{
  Project project=event.getEditor().getProject();
  if (project == null) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            final Editor editor=event.getEditor();
            VirtualFile vfOpenedFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
            if (vfOpenedFile != null) {
              if (fileChanged(vfOpenedFile)) {
                return;
              }
              HintManager.getInstance().showInformationHint(editor,"?????????????? ???? ?????????? ???????????? ?? ????????????????");
              TaskManager taskManager=TaskManager.getInstance(editor.getProject());
              int currentTask=taskManager.getTaskNumForFile(vfOpenedFile.getName());
              TaskFile tf=taskManager.getTaskFile(currentTask,vfOpenedFile.getName());
              editor.addEditorMouseListener(new MyMouseListener(tf));
              editor.getMarkupModel().removeAllHighlighters();
              tf.drawAllWindows(editor);
            }
          }
 catch (          Exception e) {
            Log.print("Something wrong with meta file:" + e.getCause());
            Log.print(Arrays.toString(e.getStackTrace()));
            Log.print(e.getMessage());
            Log.flush();
          }
        }
      }
);
    }
  }
);
}
