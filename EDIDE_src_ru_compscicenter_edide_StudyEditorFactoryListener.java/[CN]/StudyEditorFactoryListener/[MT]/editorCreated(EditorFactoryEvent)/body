{
  Project project=event.getEditor().getProject();
  if (project == null) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            final Editor editor=event.getEditor();
            VirtualFile openedFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
            if (openedFile != null) {
              HintManager.getInstance().showInformationHint(editor,"Select any window");
              StudyTaskManager taskManager=StudyTaskManager.getInstance(editor.getProject());
              TaskFile taskFile=taskManager.getTaskFile(openedFile);
              if (taskFile == null) {
                return;
              }
              editor.addEditorMouseListener(new MyMouseListener(taskFile));
              editor.getMarkupModel().removeAllHighlighters();
              taskFile.drawAllWindows(editor);
              for (              StudyTaskWindow window : taskFile.getWindows()) {
                window.setResolveStatus(true);
              }
            }
          }
 catch (          Exception e) {
            Log.print("Something wrong with meta file:" + e.getCause());
            Log.print(Arrays.toString(e.getStackTrace()));
            Log.print(e.getMessage());
            Log.flush();
          }
        }
      }
);
    }
  }
);
}
