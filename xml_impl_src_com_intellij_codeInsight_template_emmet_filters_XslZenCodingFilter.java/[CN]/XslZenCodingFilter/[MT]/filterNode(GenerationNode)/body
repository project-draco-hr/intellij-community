{
  TemplateToken token=node.getTemplateToken();
  if (token != null) {
    XmlDocument document=token.getFile().getDocument();
    if (document != null) {
      final XmlTag tag=document.getRootTag();
      if (tag != null) {
        if (token.getAttributes().containsKey(SELECT_ATTR_NAME)) {
          return node;
        }
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          @Override public void run(){
            if (isOurTag(tag,node.getChildren().size() > 0)) {
              XmlAttribute attribute=tag.getAttribute(SELECT_ATTR_NAME);
              if (attribute != null) {
                attribute.delete();
              }
            }
          }
        }
);
        return node;
      }
    }
  }
  return node;
}
