{
  myDocumentManager=documentManager;
  myPsiDocumentManager=psiDocumentManager;
  myPsiManager=psiManager;
  myFileEditorManager=fileEditorManager;
  myProject=project;
  myTemplateManager=templateManager;
  myPsiManager.addPsiTreeChangeListener(this,this);
  EditorFactory.getInstance().addEditorFactoryListener(this,this);
  Disposer.register(this,new Disposable(){
    @Override public void dispose(){
      LOG.assertTrue(myListenerMap.isEmpty(),myListenerMap);
    }
  }
);
}
