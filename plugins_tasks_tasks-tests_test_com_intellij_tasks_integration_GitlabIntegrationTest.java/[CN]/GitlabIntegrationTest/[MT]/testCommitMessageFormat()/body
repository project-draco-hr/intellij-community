{
  String issueJson="{\n" + "    \"id\": 1,\n" + "    \"iid\": 2,\n"+ "    \"project_id\": 3,\n"+ "    \"title\": \"Sample title\",\n"+ "    \"state\": \"opened\",\n"+ "    \"updated_at\": \"2013-11-14T12:30:39Z\",\n"+ "    \"created_at\": \"2013-11-14T12:30:39Z\"\n"+ "}";
  String projectJson="{\n" + "   \"id\": 3,\n" + "   \"name\": \"project-1\"\n"+ "}";
  GitlabIssue issue=GSON.fromJson(issueJson,GitlabIssue.class);
  GitlabProject project=GSON.fromJson(projectJson,GitlabProject.class);
  myRepository.setProjects(Collections.singletonList(project));
  myRepository.setShouldFormatCommitMessage(true);
  myRepository.setCommitMessageFormat("{project} {number} {id} {summary}");
  LocalTaskImpl localTask=new LocalTaskImpl(new GitlabTask(myRepository,issue));
  String changeListComment=TaskUtil.getChangeListComment(localTask);
  assertEquals("project-1 2 #2 Sample title",changeListComment);
  myRepository.setProjects(Collections.<GitlabProject>emptyList());
  localTask=new LocalTaskImpl(new GitlabTask(myRepository,issue));
  changeListComment=TaskUtil.getChangeListComment(localTask);
  assertEquals(" 2 #2 Sample title",changeListComment);
}
