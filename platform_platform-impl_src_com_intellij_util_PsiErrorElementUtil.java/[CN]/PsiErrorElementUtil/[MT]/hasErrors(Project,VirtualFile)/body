{
  if (project.isDisposed() || !virtualFile.isValid()) {
    return false;
  }
  return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    @Override public Boolean compute(){
      if (project.isDisposed()) {
        return false;
      }
      PsiManagerEx psiManager=(PsiManagerEx)PsiManager.getInstance(project);
      PsiFile psiFile=psiManager.getFileManager().findFile(virtualFile);
      return psiFile != null && hasErrors(psiFile);
    }
  }
);
}
