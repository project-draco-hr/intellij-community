{
  final List<? extends VcsFullCommitDetails> commits=getSelectedCommits(e);
  final Project project=e.getProject();
  if (commits == null || commits.isEmpty() || project == null) {
    return false;
  }
  for (  VcsFullCommitDetails commit : commits) {
    if (myIdsInProgress.contains(commit.getHash())) {
      return false;
    }
    GitRepository repository=myPlatformFacade.getRepositoryManager(project).getRepositoryForRoot(commit.getRoot());
    if (repository == null) {
      return false;
    }
    GitLocalBranch currentBranch=repository.getCurrentBranch();
    Collection<String> containingBranches=getContainingBranches(e,commit,repository);
    if (currentBranch != null && containingBranches != null && containingBranches.contains(currentBranch.getName())) {
      return false;
    }
  }
  return true;
}
