{
  List<GitHeavyCommit> commits=e.getData(GitVcs.SELECTED_COMMITS);
  if (commits != null) {
    return convertHeavyCommitToFullDetails(commits);
  }
  final Project project=e.getProject();
  if (project == null) {
    return null;
  }
  List<VcsFullCommitDetails> selectedCommits=getVcsLog(project).getSelectedCommits();
  boolean nonGitCommitSelected=ContainerUtil.find(selectedCommits,new Condition<VcsFullCommitDetails>(){
    @Override public boolean value(    VcsFullCommitDetails details){
      return myPlatformFacade.getRepositoryManager(project).getRepositoryForRoot(details.getRoot()) == null;
    }
  }
) != null;
  return nonGitCommitSelected ? null : selectedCommits;
}
