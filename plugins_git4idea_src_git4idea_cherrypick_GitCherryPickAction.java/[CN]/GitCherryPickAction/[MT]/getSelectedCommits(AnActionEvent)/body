{
  final Project project=e.getProject();
  if (project == null) {
    return null;
  }
  List<GitHeavyCommit> commits=e.getData(GitVcs.SELECTED_COMMITS);
  if (commits != null) {
    return convertHeavyCommitToFullDetails(commits,project);
  }
  final VcsLog log=getVcsLog(e);
  if (log == null) {
    return null;
  }
  List<Hash> selectedCommits=log.getSelectedCommits();
  List<VcsFullCommitDetails> selectedDetails=ContainerUtil.newArrayList();
  for (  Hash commit : selectedCommits) {
    VcsFullCommitDetails details=log.getDetailsIfAvailable(commit);
    if (details == null) {
      return null;
    }
    GitRepository root=myPlatformFacade.getRepositoryManager(project).getRepositoryForRoot(details.getRoot());
    if (root == null) {
      return null;
    }
    selectedDetails.add(details);
  }
  return selectedDetails;
}
