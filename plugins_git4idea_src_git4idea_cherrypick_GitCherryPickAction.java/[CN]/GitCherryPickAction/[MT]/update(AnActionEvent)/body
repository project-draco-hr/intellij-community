{
  super.update(e);
  VcsLog log=e.getData(VcsLogDataKeys.VCS_LOG);
  Project project=getEventProject(e);
  if (project == null || log == null || !logHasGitRoots(log)) {
    e.getPresentation().setEnabledAndVisible(false);
    return;
  }
  List<VcsFullCommitDetails> details=log.getSelectedDetails();
  if (notFromGitAndProject(project,details)) {
    e.getPresentation().setEnabledAndVisible(false);
    return;
  }
  e.getPresentation().setEnabledAndVisible(enabled(project,log,details));
  e.getPresentation().setText(isAutoCommit(project) ? NAME : NAME + "...");
}
