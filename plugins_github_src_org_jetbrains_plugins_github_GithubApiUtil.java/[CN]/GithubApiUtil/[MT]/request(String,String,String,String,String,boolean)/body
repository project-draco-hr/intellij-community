{
  HttpMethod method=null;
  try {
    method=doREST(host,login,password,path,requestBody,post);
    String resp=method.getResponseBodyAsString();
    if (resp == null) {
      LOG.info(String.format("Unexpectedly empty response: %s",resp));
      return null;
    }
    if (method.getStatusCode() >= 400 && method.getStatusCode() <= 404) {
      throw new AuthenticationException("Request response: " + method.getStatusText());
    }
    JsonElement ret=parseResponse(resp);
    Header header=method.getResponseHeader("Link");
    if (header != null) {
      String s=header.getValue();
      final int end=s.indexOf(">; rel=\"next\"");
      final int begin=s.lastIndexOf('<',end);
      if (begin >= 0 && end >= 0) {
        JsonElement next=request(s.substring(begin + 1,end),login,password,"",requestBody,post);
        if (next != null) {
          JsonArray merged=ret.getAsJsonArray();
          merged.addAll(next.getAsJsonArray());
          return merged;
        }
      }
    }
    return ret;
  }
  finally {
    if (method != null) {
      method.releaseConnection();
    }
  }
}
