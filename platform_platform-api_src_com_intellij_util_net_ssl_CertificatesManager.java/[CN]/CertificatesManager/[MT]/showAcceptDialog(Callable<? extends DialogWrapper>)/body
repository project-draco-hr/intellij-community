{
  Application app=ApplicationManager.getApplication();
  final CountDownLatch proceeded=new CountDownLatch(1);
  final AtomicBoolean accepted=new AtomicBoolean();
  Runnable showDialog=new Runnable(){
    @Override public void run(){
      try {
        DialogWrapper dialog=dialogFactory.call();
        accepted.set(dialog.showAndGet());
      }
 catch (      Exception e) {
        LOG.error("Unexpected error",e);
      }
 finally {
        proceeded.countDown();
      }
    }
  }
;
  if (app.isDispatchThread()) {
    showDialog.run();
  }
 else {
    app.invokeLater(showDialog,ModalityState.any());
  }
  try {
    proceeded.await();
  }
 catch (  InterruptedException e) {
    LOG.error("Interrupted",e);
  }
  return accepted.get();
}
