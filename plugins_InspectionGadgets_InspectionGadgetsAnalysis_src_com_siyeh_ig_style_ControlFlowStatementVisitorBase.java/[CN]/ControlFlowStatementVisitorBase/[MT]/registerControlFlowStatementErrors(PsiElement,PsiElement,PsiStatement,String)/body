{
  boolean highlightOnlyKeyword=isHighlightOnlyKeyword(body);
  if (highlightOnlyKeyword) {
    if (rangeStart != null) {
      registerError(rangeStart,keywordText);
    }
    return;
  }
  final Pair<PsiElement,PsiElement> omittedBodyBounds=getOmittedBodyBounds(body);
  if (omittedBodyBounds == null) {
    if (rangeStart != null && rangeEnd != null) {
      registerErrorAtRange(rangeStart,rangeEnd,keywordText);
    }
    return;
  }
  if (rangeStart != null) {
    final PsiElement beforeOmitted=omittedBodyBounds.getFirst();
    final PsiElement endOfHighlight=beforeOmitted != null ? beforeOmitted : rangeStart;
    registerErrorAtRange(rangeStart,endOfHighlight,keywordText);
  }
  final PsiElement afterOmitted=omittedBodyBounds.getSecond();
  if (afterOmitted != null) {
    PsiElement endOfHighlight=afterOmitted;
    if (rangeEnd != null && rangeEnd != afterOmitted) {
      if (afterOmitted.getParent() == rangeEnd) {
        final PsiElement rangeEndLastChild=rangeEnd.getLastChild();
        if (rangeEndLastChild != null) {
          endOfHighlight=rangeEndLastChild;
        }
      }
 else {
        endOfHighlight=rangeEnd;
      }
    }
    registerErrorAtRange(afterOmitted,endOfHighlight,keywordText);
  }
}
