{
  Set<Integer> walkNodes=new HashSet<Integer>();
  Walker walker=new Walker(startNode,toUp);
  while (walker.notEmpty()) {
    Integer next=walker.doNext();
    if (!stopFunction.value(next)) {
      walkNodes.add(next);
      walker.addAll(getNodes(next,toUp));
    }
  }
  return walkNodes;
}
