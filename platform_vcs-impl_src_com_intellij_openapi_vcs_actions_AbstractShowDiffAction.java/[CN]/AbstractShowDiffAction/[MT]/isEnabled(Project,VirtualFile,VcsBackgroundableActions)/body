{
  boolean result=false;
  if (!file.isDirectory() && (actionKey == null || !BackgroundableActionLock.isLocked(project,actionKey,VcsBackgroundableActions.keyFrom(file)))) {
    AbstractVcs vcs=ChangesUtil.getVcsForFile(file,project);
    result=vcs != null && vcs.getDiffProvider() != null && AbstractVcs.fileInVcsByFileStatus(project,VcsUtil.getFilePath(file));
  }
  return result;
}
