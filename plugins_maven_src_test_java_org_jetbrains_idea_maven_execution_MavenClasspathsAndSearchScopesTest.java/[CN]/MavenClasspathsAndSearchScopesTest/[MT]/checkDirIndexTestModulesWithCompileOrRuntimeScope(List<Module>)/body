{
  assertEquals(6,modules.size());
  DirectoryIndex index=DirectoryIndex.getInstance(myProject);
  VirtualFile m3JavaDir=VfsUtil.findFileByIoFile(new File(getProjectPath(),"m3/src/main/java"),true);
  assertNotNull(m3JavaDir);
  List<OrderEntry> orderEntries=index.getOrderEntries(index.getInfoForFile(m3JavaDir));
  assertEquals(4,orderEntries.size());
  List<Module> ownerModules=orderEntriesToOwnerModules(orderEntries);
  List<Module> depModules=orderEntriesToDepModules(orderEntries);
  assertOrderedElementsAreEqual(ownerModules,Arrays.asList(modules.get(0),modules.get(1),modules.get(2),modules.get(3)));
  assertOrderedElementsAreEqual(depModules,Arrays.asList(modules.get(2),modules.get(2),null,modules.get(2)));
  OrderEntry m3E2=orderEntries.get(2);
  assertInstanceOf(m3E2,ModuleSourceOrderEntry.class);
  VirtualFile m6javaDir=VfsUtil.findFileByIoFile(new File(getProjectPath(),"m6/src/main/java"),true);
  assertNotNull(m6javaDir);
  List<OrderEntry> m6OrderEntries=index.getOrderEntries(index.getInfoForFile(m6javaDir));
  assertEquals(4,m6OrderEntries.size());
  List<Module> m6OwnerModules=orderEntriesToOwnerModules(m6OrderEntries);
  List<Module> m6DepModules=orderEntriesToDepModules(m6OrderEntries);
  assertOrderedElementsAreEqual(m6OwnerModules,Arrays.asList(modules.get(0),modules.get(1),modules.get(4),modules.get(5)));
  assertOrderedElementsAreEqual(m6DepModules,Arrays.asList(modules.get(5),modules.get(5),modules.get(5),null));
  OrderEntry m6E3=m6OrderEntries.get(3);
  assertInstanceOf(m6E3,ModuleSourceOrderEntry.class);
  VirtualFile jmockDir=VfsUtil.findFileByIoFile(new File(getRepositoryPath(),"jmock/jmock/1.0/jmock-1.0.jar"),true);
  assertNotNull(jmockDir);
  VirtualFile jmockJar=JarFileSystem.getInstance().getJarRootForLocalFile(jmockDir);
  assertNotNull(jmockJar);
  List<OrderEntry> jmockOrderEntries=index.getOrderEntries(index.getInfoForFile(jmockJar));
  assertEquals(2,jmockOrderEntries.size());
  OrderEntry jmockE0=jmockOrderEntries.get(0);
  assertEquals(modules.get(1),jmockE0.getOwnerModule());
  assertInstanceOf(jmockE0,LibraryOrderEntry.class);
  OrderEntry jmockE1=jmockOrderEntries.get(1);
  assertEquals(modules.get(2),jmockE1.getOwnerModule());
  assertInstanceOf(jmockE1,LibraryOrderEntry.class);
}
