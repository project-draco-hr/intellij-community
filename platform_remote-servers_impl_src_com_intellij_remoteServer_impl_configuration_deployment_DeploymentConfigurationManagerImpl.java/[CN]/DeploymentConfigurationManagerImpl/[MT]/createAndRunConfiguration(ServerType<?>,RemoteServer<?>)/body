{
  DeployToServerConfigurationType configurationType=DeployToServerConfigurationTypesRegistrar.getDeployConfigurationType(serverType);
  RunManagerEx runManager=RunManagerEx.getInstanceEx(myProject);
  ConfigurationFactoryEx factory=configurationType.getFactory();
  RunnerAndConfigurationSettings settings=runManager.createRunConfiguration(configurationType.getDisplayName(),factory);
  DeployToServerRunConfiguration<?,?> runConfiguration=(DeployToServerRunConfiguration<?,?>)settings.getConfiguration();
  if (remoteServer != null) {
    runConfiguration.setServerName(remoteServer.getName());
  }
  if (RunDialog.editConfiguration(myProject,settings,"Create Deployment Configuration",DefaultRunExecutor.getRunExecutorInstance())) {
    runManager.addConfiguration(settings,runManager.isConfigurationShared(settings),runManager.getBeforeRunTasks(runConfiguration),false);
    runManager.setSelectedConfiguration(settings);
    ProgramRunnerUtil.executeConfiguration(myProject,settings,DefaultRunExecutor.getRunExecutorInstance());
  }
}
