{
  final Git git=ServiceManager.getService(project,Git.class);
  final GitPlatformFacade facade=ServiceManager.getService(project,GitPlatformFacade.class);
  GitPreservingProcess process=new GitPreservingProcess(project,facade,git,Collections.singletonList(gitRepository),"Rebasing","upstream/master",indicator,new Runnable(){
    @Override public void run(){
      doRebaseCurrentBranch(project,gitRepository.getRoot(),indicator);
    }
  }
);
  process.execute();
}
