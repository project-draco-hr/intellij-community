{
  editor.getScrollingModel().scrollToCaret(ScrollType.MAKE_VISIBLE);
  PsiElement element=CommonDataKeys.PSI_ELEMENT.getData(dataContext);
  final InvertBooleanDelegate delegate=findDelegate(element,project,editor);
  if (delegate == null) {
    CommonRefactoringUtil.showErrorHint(project,editor,RefactoringBundle.getCannotRefactorMessage(RefactoringBundle.message("error.wrong.caret.position.method.or.variable.name")),REFACTORING_NAME,INVERT_BOOLEAN_HELP_ID);
    return;
  }
  final PsiElement namedElement=delegate.adjustElement(element,project,editor);
  if (namedElement != null) {
    new InvertBooleanDialog(namedElement).show();
  }
}
