{
  final String[] words=NameUtil.nameToWords(text);
  boolean insertUnderscore=false;
  final StringBuilder buf=new StringBuilder();
  for (  String word : words) {
    if (!Character.isLetterOrDigit(word.charAt(0))) {
      buf.append("_");
      insertUnderscore=false;
      continue;
    }
    if (insertUnderscore) {
      buf.append("_");
    }
 else {
      insertUnderscore=true;
    }
    buf.append(convertCase(word));
  }
  return buf.toString();
}
