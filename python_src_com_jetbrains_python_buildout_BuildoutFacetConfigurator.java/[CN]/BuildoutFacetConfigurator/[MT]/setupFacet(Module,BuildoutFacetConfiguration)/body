{
  FacetManager facetManager=FacetManager.getInstance(module);
  final ModifiableFacetModel model=facetManager.createModifiableModel();
  BuildoutFacetType facetType=BuildoutFacetType.getInstance();
  if (config == null)   config=ProjectFacetManager.getInstance(module.getProject()).createDefaultConfiguration(facetType);
  BuildoutFacet facet=facetManager.createFacet(facetType,facetType.getDefaultFacetName(),config,null);
  model.addFacet(facet);
  new WriteAction(){
    protected void run(    final Result result) throws Throwable {
      model.commit();
    }
  }
.execute();
}
