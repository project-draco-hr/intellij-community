{
  Alignment alignment=Alignment.get(c);
  if (alignment != null && g instanceof Graphics2D) {
    Container parent=c.getParent();
    Color background=!c.isOpaque() ? null : c.getBackground();
    if (background != null) {
      g.setColor(background);
      g.fillRect(0,0,c.getWidth(),c.getHeight());
    }
    Rectangle bounds=new Rectangle(c.getWidth(),c.getHeight());
    JBInsets.removeFrom(bounds,c.getInsets());
    if (parent instanceof JScrollPane) {
      Color foreground=c.getForeground();
      if (foreground != null && !foreground.equals(background) && isBorderNeeded(c)) {
        g.setColor(foreground);
switch (alignment) {
case TOP:
          bounds.height--;
        g.drawLine(bounds.x,bounds.y + bounds.height,bounds.x + bounds.width,bounds.y + bounds.height);
      break;
case LEFT:
    bounds.width--;
  g.drawLine(bounds.x + bounds.width,bounds.y,bounds.x + bounds.width,bounds.y + bounds.height);
break;
case RIGHT:
g.drawLine(bounds.x,bounds.y,bounds.x,bounds.y + bounds.height);
bounds.width--;
bounds.x++;
break;
case BOTTOM:
g.drawLine(bounds.x,bounds.y,bounds.x + bounds.width,bounds.y);
bounds.height--;
bounds.y++;
break;
}
}
}
if (!c.isOpaque() && myTrackAnimator.myValue > 0) {
paintTrack((Graphics2D)g,bounds.x,bounds.y,bounds.width,bounds.height,c);
}
RegionPainter<Object> leading=UIUtil.getClientProperty(c,LEADING_AREA);
if (leading == null) {
myLeadingBounds.setSize(0,0);
}
 else if (alignment == Alignment.LEFT || alignment == Alignment.RIGHT) {
int size=bounds.width;
myLeadingBounds.setBounds(bounds.x,bounds.y,size,size);
leading.paint((Graphics2D)g,bounds.x,bounds.y,size,size,null);
bounds.height-=size;
bounds.y+=size;
}
 else {
int size=bounds.height;
myLeadingBounds.setBounds(bounds.x,bounds.y,size,size);
leading.paint((Graphics2D)g,bounds.x,bounds.y,size,size,null);
bounds.width-=size;
bounds.x+=size;
}
myTrackBounds.setBounds(bounds);
updateThumbBounds();
RegionPainter<Object> track=UIUtil.getClientProperty(c,JBScrollBar.TRACK);
if (track != null && myTrackBounds.width > 0 && myTrackBounds.height > 0) {
track.paint((Graphics2D)g,myTrackBounds.x,myTrackBounds.y,myTrackBounds.width,myTrackBounds.height,null);
}
if (myThumbBounds.width > 0 && myThumbBounds.height > 0) {
paintThumb((Graphics2D)g,myThumbBounds.x,myThumbBounds.y,myThumbBounds.width,myThumbBounds.height,c);
}
}
}
