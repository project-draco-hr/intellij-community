{
  runPythonTest(new PyPackagingTestTask(){
    @Override public void runTestOn(    String sdkHome) throws Exception {
      final Sdk sdk=PythonSkeletonsTest.createTempSdk(sdkHome);
      List<PyPackage> packages=null;
      try {
        packages=((PyPackageManagerImpl)PyPackageManager.getInstance(sdk)).getPackages();
      }
 catch (      PyExternalProcessException e) {
        final int retcode=e.getRetcode();
        if (retcode != PyPackageManagerImpl.ERROR_NO_PIP && retcode != PyPackageManagerImpl.ERROR_NO_DISTRIBUTE) {
          fail(String.format("Error for interpreter '%s': %s",sdk.getHomePath(),e.getMessage()));
        }
      }
      if (packages != null) {
        assertTrue(packages.size() > 0);
        for (        PyPackage pkg : packages) {
          assertTrue(pkg.getName().length() > 0);
        }
      }
    }
  }
);
}
