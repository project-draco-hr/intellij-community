{
  final String path1=args[1];
  final String path2=args[2];
  final String path3=args[3];
  final String path4=args.length == 5 ? args[4] : args[3];
  final VirtualFile file1=findFile(path1,currentDirectory);
  final VirtualFile file2=findFile(path2,currentDirectory);
  final VirtualFile file3=findFile(path3,currentDirectory);
  final VirtualFile file4=findFile(path4,currentDirectory);
  if (file1 == null)   throw new Exception("Can't find file " + path1);
  if (file2 == null)   throw new Exception("Can't find file " + path2);
  if (file3 == null)   throw new Exception("Can't find file " + path3);
  if (file4 == null)   throw new Exception("Can't find file " + path4);
  VfsUtil.markDirtyAndRefresh(false,false,false,file1,file2,file3,file4);
  Project project=getProject();
  List<VirtualFile> contents=ContainerUtil.list(file1,file3,file2);
  MergeRequest request=DiffRequestFactory.getInstance().createMergeRequestFromFiles(project,file4,contents,null);
  DiffManagerEx.getInstance().showMergeBuiltin(project,request);
  Document document=FileDocumentManager.getInstance().getCachedDocument(file4);
  if (document != null)   FileDocumentManager.getInstance().saveDocument(document);
}
