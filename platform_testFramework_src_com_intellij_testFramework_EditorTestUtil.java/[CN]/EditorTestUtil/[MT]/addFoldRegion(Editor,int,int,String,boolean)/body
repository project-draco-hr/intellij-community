{
  final FoldingModel foldingModel=editor.getFoldingModel();
  final Ref<FoldRegion> ref=new Ref<FoldRegion>();
  foldingModel.runBatchFoldingOperation(new Runnable(){
    @Override public void run(){
      FoldRegion region=foldingModel.addFoldRegion(startOffset,endOffset,placeholder);
      assertNotNull(region);
      region.setExpanded(!collapse);
      ref.set(region);
    }
  }
);
  return ref.get();
}
