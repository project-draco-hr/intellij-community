{
  final PyType type=getGenericReturnType(context,callSite);
  if (callSite == null) {
    return type;
  }
  if (PyTypeChecker.hasGenerics(type,context)) {
    final PyTypeChecker.AnalyzeCallResults results=PyTypeChecker.analyzeCallSite(callSite,context);
    if (results != null) {
      final Map<PyGenericType,PyType> substitutions=PyTypeChecker.unifyGenericCall(this,results.getReceiver(),results.getArguments(),context);
      if (substitutions != null) {
        final Ref<PyType> result=PyTypeChecker.substitute(type,substitutions,context);
        if (result != null) {
          return result.get();
        }
      }
    }
    return null;
  }
  return type;
}
