{
  final PyType type=getGenericReturnType(context,callSite);
  if (callSite == null) {
    return type;
  }
  final PyTypeChecker.AnalyzeCallResults results=PyTypeChecker.analyzeCallSite(callSite,context);
  if (PyTypeChecker.hasGenerics(type,context)) {
    if (results != null) {
      final Map<PyGenericType,PyType> substitutions=PyTypeChecker.unifyGenericCall(this,results.getReceiver(),results.getArguments(),context);
      if (substitutions != null) {
        return PyTypeChecker.substitute(type,substitutions,context);
      }
    }
    return null;
  }
  if (results != null && isWeak(results.getArguments(),context)) {
    return PyWeakTypeFactory.create(type);
  }
 else {
    return type;
  }
}
