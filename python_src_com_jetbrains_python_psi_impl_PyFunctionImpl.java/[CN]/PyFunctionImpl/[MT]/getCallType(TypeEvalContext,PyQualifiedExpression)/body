{
  PyType type=null;
  for (  PyTypeProvider typeProvider : Extensions.getExtensions(PyTypeProvider.EP_NAME)) {
    type=typeProvider.getCallType(this,callSite,context);
    if (type != null) {
      type.assertValid(typeProvider.toString());
      break;
    }
  }
  if (type == null) {
    type=getReturnType(context);
  }
  if (callSite == null) {
    return type;
  }
  final PyTypeChecker.AnalyzeCallResults results=PyTypeChecker.analyzeCallSite(callSite,context);
  if (results != null) {
    return analyzeCallType(type,results.getReceiver(),results.getArguments(),context);
  }
  return type;
}
