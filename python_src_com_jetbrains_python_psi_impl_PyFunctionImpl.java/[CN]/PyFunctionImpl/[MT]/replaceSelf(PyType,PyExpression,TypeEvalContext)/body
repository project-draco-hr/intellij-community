{
  if (receiver != null) {
    if (returnType instanceof PyClassType) {
      final PyClassType returnClassType=(PyClassType)returnType;
      if (returnClassType.getPyClass() == getContainingClass()) {
        final PyType receiverType=context.getType(receiver);
        if (receiverType instanceof PyClassType && PyTypeChecker.match(returnType,receiverType,context)) {
          return returnClassType.isDefinition() ? receiverType : ((PyClassType)receiverType).toInstance();
        }
      }
    }
  }
  return returnType;
}
