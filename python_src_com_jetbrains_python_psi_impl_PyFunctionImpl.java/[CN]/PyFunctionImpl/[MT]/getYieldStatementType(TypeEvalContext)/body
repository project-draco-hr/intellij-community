{
  PyType elementType=null;
  final PyBuiltinCache cache=PyBuiltinCache.getInstance(this);
  final PyClass listClass=cache.getClass("list");
  final PyStatementList statements=getStatementList();
  final Set<PyType> types=new HashSet<PyType>();
  if (statements != null && listClass != null) {
    statements.accept(new PyRecursiveElementVisitor(){
      @Override public void visitPyYieldExpression(      PyYieldExpression node){
        PyType t=node.getType(context);
        if (t != null) {
          types.add(t);
        }
 else {
          types.add(cache.getObjectType());
        }
      }
    }
);
    final int n=types.size();
    if (n == 1) {
      elementType=types.iterator().next();
    }
 else     if (n > 0) {
      elementType=new PyUnionType(types);
    }
  }
  if (elementType != null) {
    return new PyCollectionTypeImpl(listClass,false,elementType);
  }
  return null;
}
