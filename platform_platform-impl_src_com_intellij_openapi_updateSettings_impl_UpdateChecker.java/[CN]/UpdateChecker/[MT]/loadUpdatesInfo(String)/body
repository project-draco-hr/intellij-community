{
  if (LOG.isDebugEnabled()) {
    LOG.debug("load update xml (UPDATE_URL='" + updateUrl + "' )");
  }
  if (StringUtil.isEmpty(updateUrl)) {
    LOG.debug("update url is empty: updates will not be checked");
    return null;
  }
  return HttpRequests.request(updateUrl.startsWith("file:") ? updateUrl : updateUrl + '?' + prepareUpdateCheckArgs()).get(new ThrowableConvertor<URLConnection,UpdatesInfo,Exception>(){
    @Override public UpdatesInfo convert(    URLConnection connection) throws Exception {
      InputStream inputStream=HttpRequests.getInputStream(connection);
      try {
        return new UpdatesInfo(JDOMUtil.loadDocument(inputStream).getRootElement());
      }
 catch (      JDOMException e) {
        LOG.info(e);
        return null;
      }
 finally {
        inputStream.close();
      }
    }
  }
);
}
