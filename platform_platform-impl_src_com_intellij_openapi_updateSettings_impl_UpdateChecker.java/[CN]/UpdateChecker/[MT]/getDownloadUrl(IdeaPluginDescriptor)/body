{
  String url=null;
  if (descriptor instanceof PluginNode) {
    url=((PluginNode)descriptor).getDownloadUrl();
  }
  if (url == null) {
    String uuid=ApplicationManager.getApplication() == null ? UUID.randomUUID().toString() : getInstallationUID(PropertiesComponent.getInstance());
    String buildNumber=ApplicationManager.getApplication() != null ? ApplicationInfo.getInstance().getApiVersion() : ApplicationInfoImpl.getShadowInstance().getBuild().asString();
    url=RepositoryHelper.getDownloadUrl() + URLEncoder.encode(descriptor.getPluginId().getIdString(),"UTF8") + "&build="+ buildNumber+ "&uuid="+ URLEncoder.encode(uuid,"UTF8");
  }
  return url;
}
