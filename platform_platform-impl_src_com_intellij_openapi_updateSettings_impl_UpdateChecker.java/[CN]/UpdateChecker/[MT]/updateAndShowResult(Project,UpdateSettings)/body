{
  final UpdateSettings settings=customSettings != null ? customSettings : UpdateSettings.getInstance();
  final boolean fromSettings=customSettings != null;
  ProgressManager.getInstance().run(new Task.Backgroundable(project,IdeBundle.message("updates.checking.progress"),true){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      doUpdateAndShowResult(getProject(),fromSettings,true,settings,indicator,null);
    }
    @Override public boolean isConditionalModal(){
      return fromSettings;
    }
    @Override public boolean shouldStartInBackground(){
      return !fromSettings;
    }
  }
);
}
