{
  final List<Injectable> injectables=getAllInjectables();
  final JList list=new JBList(injectables);
  list.setCellRenderer(new ColoredListCellRendererWrapper<Injectable>(){
    @Override protected void doCustomize(    JList list,    Injectable language,    int index,    boolean selected,    boolean hasFocus){
      setIcon(language.getIcon());
      append(language.getDisplayName());
      String description=language.getAdditionalDescription();
      if (description != null) {
        append(description,SimpleTextAttributes.GRAYED_ATTRIBUTES);
      }
    }
  }
);
  new PopupChooserBuilder(list).setItemChoosenCallback(new Runnable(){
    public void run(){
      onChosen.process((Injectable)list.getSelectedValue());
    }
  }
).setFilteringEnabled(new Function<Object,String>(){
    @Override public String fun(    Object language){
      return ((Injectable)language).getDisplayName();
    }
  }
).createPopup().showInBestPositionFor(editor);
  return true;
}
