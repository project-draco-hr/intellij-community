{
  final List<Injectable> injectables=Injectable.getAllInjectables();
  final JList list=new JBList(injectables);
  list.setCellRenderer(new ListCellRendererWrapper<Injectable>(){
    @Override public void customize(    JList list,    Injectable language,    int index,    boolean selected,    boolean hasFocus){
      setIcon(language.getIcon());
      setText(language.getDisplayName());
    }
  }
);
  new PopupChooserBuilder(list).setItemChoosenCallback(new Runnable(){
    public void run(){
      onChosen.process((Injectable)list.getSelectedValue());
    }
  }
).setFilteringEnabled(new Function<Object,String>(){
    @Override public String fun(    Object language){
      return ((Injectable)language).getDisplayName();
    }
  }
).createPopup().showInBestPositionFor(editor);
  return true;
}
