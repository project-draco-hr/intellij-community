{
  if (distinct) {
    String matchImage=result.getMatchImage();
    if (!caseSensitive)     matchImage=matchImage.toLowerCase();
    if (matches.get(matchImage) != null) {
      return;
    }
    matches.put(matchImage,result);
  }
 else {
    final PsiElement match=result.getMatch();
    if (matches.containsKey(match)) {
      return;
    }
    matches.put(match,result);
  }
  delegate.newMatch(result);
  ++matchCount;
  if (matchCount == maxMatches) {
    JOptionPane.showMessageDialog(null,SSRBundle.message("search.produced.too.many.results.message"));
    process.stop();
  }
}
