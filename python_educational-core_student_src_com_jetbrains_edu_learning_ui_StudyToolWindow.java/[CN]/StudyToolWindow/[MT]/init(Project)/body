{
  String taskText=StudyUtils.getTaskText(project);
  if (taskText == null)   return;
  JPanel toolbarPanel=createToolbarPanel(getActionGroup(project));
  setToolbar(toolbarPanel);
  final JPanel panel=new JPanel(new BorderLayout());
  final Course course=StudyTaskManager.getInstance(project).getCourse();
  if (course != null && course.isAdaptive()) {
    panel.add(createReactionPanel(),BorderLayout.NORTH);
  }
  JComponent taskInfoPanel=createTaskInfoPanel(project);
  panel.add(taskInfoPanel,BorderLayout.CENTER);
  myContentPanel.add(TASK_INFO_ID,panel);
  mySplitPane.setFirstComponent(myContentPanel);
  addAdditionalPanels(project);
  myCardLayout.show(myContentPanel,TASK_INFO_ID);
  setContent(mySplitPane);
  StudyPluginConfigurator configurator=StudyUtils.getConfigurator(project);
  if (configurator != null) {
    final FileEditorManagerListener listener=configurator.getFileEditorManagerListener(project,this);
    project.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,listener);
  }
  if (StudyTaskManager.getInstance(project).isTurnEditingMode() || StudyTaskManager.getInstance(project).getToolWindowMode() == StudyToolWindowMode.EDITING) {
    TaskFile file=StudyUtils.getSelectedTaskFile(project);
    if (file != null) {
      VirtualFile taskDir=file.getTask().getTaskDir(project);
      setTaskText(taskText,taskDir,project);
    }
  }
 else {
    setTaskText(taskText,null,project);
  }
}
