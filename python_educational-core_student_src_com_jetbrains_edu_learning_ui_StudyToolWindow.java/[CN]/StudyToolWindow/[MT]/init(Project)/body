{
  String taskText=StudyUtils.getTaskText(project);
  if (taskText == null)   return;
  JPanel toolbarPanel=createToolbarPanel(getActionGroup(project));
  setToolbar(toolbarPanel);
  myContentPanel.add(TASK_INFO_ID,createTaskInfoPanel(project));
  mySplitPane.setFirstComponent(myContentPanel);
  addAdditionalPanels(project);
  myCardLayout.show(myContentPanel,TASK_INFO_ID);
  setContent(mySplitPane);
  StudyPluginConfigurator configurator=StudyUtils.getConfigurator(project);
  if (configurator != null) {
    final FileEditorManagerListener listener=configurator.getFileEditorManagerListener(project,this);
    project.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,listener);
  }
  if (StudyTaskManager.getInstance(project).isTurnEditingMode() || StudyTaskManager.getInstance(project).getToolWindowMode() == StudyToolWindowMode.EDITING) {
    TaskFile file=StudyUtils.getSelectedTaskFile(project);
    if (file != null) {
      VirtualFile taskDir=file.getTask().getTaskDir(project);
      setTaskText(taskText,taskDir,project);
    }
  }
 else {
    setTaskText(taskText,null,project);
  }
}
