{
  if (!EMPTY_TASK_TEXT.equals(text) && StudyTaskManager.getInstance(project).isTurnEditingMode()) {
    if (taskDirectory == null) {
      LOG.info("Failed to enter editing mode for StudyToolWindow");
      return;
    }
    VirtualFile taskTextFile=StudyUtils.findTaskDescriptionVirtualFile(project,taskDirectory);
    enterEditingMode(taskTextFile,project);
    StudyTaskManager.getInstance(project).setTurnEditingMode(false);
  }
  if (taskDirectory != null && StudyTaskManager.getInstance(project).getToolWindowMode() == StudyToolWindowMode.EDITING) {
    VirtualFile taskTextFile=StudyUtils.findTaskDescriptionVirtualFile(project,taskDirectory);
    enterEditingMode(taskTextFile,project);
  }
 else {
    setText(text);
  }
}
