{
  if (myRestApiVersion == null) {
    myRestApiVersion=discoverRestApiVersion();
  }
  String jqlQuery=mySearchQuery;
  if (!StringUtil.isEmpty(query)) {
    jqlQuery=String.format("summary ~ '%s'",query);
    if (!StringUtil.isEmpty(mySearchQuery)) {
      jqlQuery+=String.format(" and %s",mySearchQuery);
    }
  }
  List<JiraIssue> issues=myRestApiVersion.findIssues(jqlQuery,max);
  return ContainerUtil.map2Array(issues,Task.class,new Function<JiraIssue,Task>(){
    @Override public JiraTask fun(    JiraIssue issue){
      return new JiraTask(issue,JiraRepository.this);
    }
  }
);
}
