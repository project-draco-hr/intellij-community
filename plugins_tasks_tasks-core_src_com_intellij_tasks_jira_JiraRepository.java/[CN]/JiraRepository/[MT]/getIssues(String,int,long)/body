{
  if (myRestApiVersion == null) {
    myRestApiVersion=discoverRestApiVersion();
  }
  String jqlQuery=mySearchQuery;
  if (!StringUtil.isEmpty(searchQuery)) {
    if (JiraUtil.ANY_ISSUE_KEY_REGEX.matcher(searchQuery).matches()) {
      jqlQuery+=String.format(" and key = \"%s\"",searchQuery);
    }
 else {
      jqlQuery+=String.format(" and summary ~ \"%s\"",searchQuery);
    }
  }
  List<JiraIssue> issues=myRestApiVersion.findIssues(jqlQuery,max);
  return ContainerUtil.map2Array(issues,Task.class,new Function<JiraIssue,Task>(){
    @Override public JiraTask fun(    JiraIssue issue){
      return new JiraTask(issue,JiraRepository.this);
    }
  }
);
}
