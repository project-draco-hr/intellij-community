{
  final ProjectViewImpl projectView=(ProjectViewImpl)ProjectView.getInstance(myProject);
  projectView.setShowModules(showModules,PackageViewPane.ID);
  projectView.setShowLibraryContents(showLibraryContents,PackageViewPane.ID);
  projectView.setFlattenPackages(false,PackageViewPane.ID);
  projectView.setHideEmptyPackages(true,PackageViewPane.ID);
  PackageViewPane packageViewPane=new PackageViewPane(myProject);
  packageViewPane.createComponent();
  ((AbstractProjectTreeStructure)packageViewPane.getTreeStructure()).setProviders(new ResourceBundleGrouper(myProject));
  packageViewPane.updateFromRoot(true);
  JTree tree=packageViewPane.getTree();
  TreeUtil.expand(tree,levels);
  IdeaTestUtil.assertTreeEqual(tree,expected);
  BaseProjectViewTestCase.checkContainsMethod(packageViewPane.getTreeStructure().getRootElement(),packageViewPane.getTreeStructure());
  Disposer.dispose(packageViewPane);
}
