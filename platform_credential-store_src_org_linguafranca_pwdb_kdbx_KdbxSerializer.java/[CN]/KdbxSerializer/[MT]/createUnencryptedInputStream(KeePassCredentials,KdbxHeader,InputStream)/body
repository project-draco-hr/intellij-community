{
  readKdbxHeader(kdbxHeader,inputStream);
  InputStream decryptedInputStream=kdbxHeader.createDecryptedStream(credentials.getKey(),inputStream);
  checkStartBytes(kdbxHeader,decryptedInputStream);
  HashedBlockInputStream blockInputStream=new HashedBlockInputStream(decryptedInputStream,true);
  if (kdbxHeader.getCompressionFlags().equals(KdbxHeader.CompressionFlags.NONE)) {
    return blockInputStream;
  }
  return new GZIPInputStream(blockInputStream);
}
