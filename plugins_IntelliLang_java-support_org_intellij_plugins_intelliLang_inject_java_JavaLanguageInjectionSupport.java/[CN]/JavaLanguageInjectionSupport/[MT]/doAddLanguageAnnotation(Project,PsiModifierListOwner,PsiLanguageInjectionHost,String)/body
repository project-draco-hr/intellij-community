{
  return doAddLanguageAnnotation(project,modifierListOwner,host,languageId,new Processor<PsiLanguageInjectionHost>(){
    @Override public boolean process(    PsiLanguageInjectionHost host){
      final Configuration.AdvancedConfiguration configuration=Configuration.getProjectInstance(project).getAdvancedConfiguration();
      boolean allowed=configuration.isSourceModificationAllowed();
      configuration.setSourceModificationAllowed(true);
      try {
        return doInjectInJava(project,host,host,languageId);
      }
  finally {
        configuration.setSourceModificationAllowed(allowed);
      }
    }
  }
);
}
