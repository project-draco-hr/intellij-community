{
  if (startNode.getType() != Node.Type.COMMIT_NODE) {
    return null;
  }
  NewGraphFragment fragment=shortFragmentGenerator.getDownShortFragment(startNode);
  if (fragment == null) {
    return null;
  }
  Set<Node> intermediateNodes=new HashSet<Node>(fragment.getIntermediateNodes());
  Node endNode=fragment.getDownNode();
  while ((fragment=shortFragmentGenerator.getDownShortFragment(endNode)) != null && !unhiddenNodes.isUnhiddenNode(endNode)) {
    intermediateNodes.addAll(fragment.getIntermediateNodes());
    intermediateNodes.add(endNode);
    endNode=fragment.getDownNode();
  }
  if (intermediateNodes.isEmpty()) {
    return null;
  }
 else {
    return new SimpleGraphFragment(startNode,endNode,intermediateNodes);
  }
}
