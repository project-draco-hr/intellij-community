{
  super(session);
  this.executionResult=executionResult;
  this.connection=connection;
  this.editorsProvider=editorsProvider;
  this.smartStepIntoHandler=smartStepIntoHandler;
  connection.addListener(new SocketConnectionListener(){
    @Override public void statusChanged(    @NotNull ConnectionStatus status){
      if (status == ConnectionStatus.DISCONNECTED || status == ConnectionStatus.DETACHED) {
        if (status == ConnectionStatus.DETACHED) {
          if (getRealProcessHandler() != null) {
            getProcessHandler().detachProcess();
          }
        }
        getSession().stop();
      }
 else {
        getSession().rebuildViews();
      }
    }
  }
);
}
