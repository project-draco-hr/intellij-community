{
  FileSystem fs=SoftReference.dereference(myFileSystem);
  if (fs == null) {
    if (SystemInfo.isJavaVersionAtLeast("9")) {
      fs=FileSystems.newFileSystem(ROOT_URI,Collections.singletonMap("java.home",getFile().getPath()));
    }
 else {
      File file=new File(getFile(),"jrt-fs.jar");
      if (!file.exists())       throw new IOException("Missing provider: " + file);
      URL url=file.toURI().toURL();
      ClassLoader loader=new URLClassLoader(new URL[]{url},null);
      fs=FileSystems.newFileSystem(ROOT_URI,Collections.emptyMap(),loader);
    }
    myFileSystem=new SoftReference<>(fs);
  }
  return fs;
}
