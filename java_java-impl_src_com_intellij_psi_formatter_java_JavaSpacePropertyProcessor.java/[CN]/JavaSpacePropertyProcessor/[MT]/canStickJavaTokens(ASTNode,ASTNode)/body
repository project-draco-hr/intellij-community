{
  IElementType type1=token1.getElementType();
  IElementType type2=token2.getElementType();
  Pair<IElementType,IElementType> pair=Pair.create(type1,type2);
  Boolean res=myCanStickJavaTokensMatrix.get(pair);
  if (res == null) {
    Lexer lexer=JavaParserDefinition.createLexer(LanguageLevel.HIGHEST);
    TokenCheckResult res1=checkToken(token1,lexer), res2=checkToken(token2,lexer);
    if (res1 == TokenCheckResult.INCORRECT || res2 == TokenCheckResult.INCORRECT)     return true;
    if (res1 == TokenCheckResult.RESTRICTED_KEYWORD || type1 == JavaTokenType.IDENTIFIER && res2 == TokenCheckResult.RESTRICTED_KEYWORD) {
      res=false;
    }
 else {
      lexer.start(token1.getText() + token2.getText());
      boolean canMerge=lexer.getTokenType() == type1;
      lexer.advance();
      canMerge&=lexer.getTokenType() == type2;
      res=canMerge;
    }
    myCanStickJavaTokensMatrix.put(pair,res);
  }
  return res.booleanValue();
}
