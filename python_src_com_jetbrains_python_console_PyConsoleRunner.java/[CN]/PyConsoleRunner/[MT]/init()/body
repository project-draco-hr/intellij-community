{
  final Process process=Runner.createProcess(myWorkingDir,true,myProvider.getAdditionalEnvs(),myProvider.getArguments());
  final Charset outputEncoding=EncodingManager.getInstance().getDefaultCharset();
  myProcessHandler=new PyConsoleProcessHandler(this,process,getProviderCommandLine(),outputEncoding);
  ProcessTerminatedListener.attach(myProcessHandler);
  myConsoleView=new LanguageConsoleViewImpl(myProject,"title",PythonLanguage.getInstance());
  myProcessHandler.addProcessListener(new ProcessAdapter(){
    @Override public void processTerminated(    ProcessEvent event){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          myConsoleView.setEditorEnabled(false);
        }
      }
);
    }
  }
);
  myConsoleView.getConsole().setPrompt(">>>");
  myConsoleView.attachToProcess(myProcessHandler);
  final Executor defaultExecutor=ExecutorRegistry.getInstance().getExecutorById(DefaultRunExecutor.EXECUTOR_ID);
  final DefaultActionGroup toolbarActions=new DefaultActionGroup();
  final ActionToolbar actionToolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,toolbarActions,false);
  final JPanel panel=new JPanel(new BorderLayout());
  panel.add(actionToolbar.getComponent(),BorderLayout.WEST);
  panel.add(myConsoleView.getComponent(),BorderLayout.CENTER);
  final RunContentDescriptor myDescriptor=new RunContentDescriptor(myConsoleView,myProcessHandler,panel,myConsoleTitle);
  final AnAction[] actions=fillToolBarActions(toolbarActions,defaultExecutor,myDescriptor);
  registerActionShortcuts(actions,getLanguageConsole().getConsoleEditor().getComponent());
  registerActionShortcuts(actions,panel);
  panel.updateUI();
  ExecutionManager.getInstance(myProject).getContentManager().showRunContent(defaultExecutor,myDescriptor);
  IdeFocusManager.getInstance(myProject).requestFocus(myConsoleView.getPreferredFocusableComponent(),true);
}
