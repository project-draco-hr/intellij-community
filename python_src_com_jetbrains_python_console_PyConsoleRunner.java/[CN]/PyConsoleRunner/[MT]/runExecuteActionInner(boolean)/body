{
  final Document document=getLanguageConsole().getCurrentEditor().getDocument();
  final String documentText=document.getText();
  final TextRange range=new TextRange(0,document.getTextLength());
  getLanguageConsole().getCurrentEditor().getSelectionModel().setSelection(range.getStartOffset(),range.getEndOffset());
  getLanguageConsole().addCurrentToHistory(range,false);
  if (erase) {
    getLanguageConsole().setInputText("");
  }
  final String line=documentText;
  if (!StringUtil.isEmptyOrSpaces(line)) {
    myHistory.addToHistory(line);
  }
  if (line.length() == 0) {
    sendInput("\n\n",myProcessHandler.getCharset(),myProcessHandler.getProcessInput());
  }
 else {
    sendInput(line + "\n",myProcessHandler.getCharset(),myProcessHandler.getProcessInput());
  }
}
