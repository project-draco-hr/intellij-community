{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  Map<PsiClass,PsiClass> subClassCache=FindSuperElementsHelper.createSubClassCache();
  Collection<PsiMethod> methods=new THashSet<>();
  for (int i=0; i < elements.size(); i++) {
    PsiElement element=elements.get(i);
    ProgressManager.checkCanceled();
    if (!(element instanceof PsiIdentifier))     continue;
    PsiElement parent=element.getParent();
    if (parent instanceof PsiMethod) {
      final PsiMethod method=(PsiMethod)parent;
      if (PsiUtil.canBeOverriden(method)) {
        methods.add(method);
      }
    }
 else     if (parent instanceof PsiClass && !(parent instanceof PsiTypeParameter)) {
      collectInheritingClasses((PsiClass)parent,result,subClassCache);
    }
  }
  if (!methods.isEmpty()) {
    collectOverridingMethods(methods,result);
    collectSiblingInheritedMethods(methods,result,subClassCache);
  }
}
