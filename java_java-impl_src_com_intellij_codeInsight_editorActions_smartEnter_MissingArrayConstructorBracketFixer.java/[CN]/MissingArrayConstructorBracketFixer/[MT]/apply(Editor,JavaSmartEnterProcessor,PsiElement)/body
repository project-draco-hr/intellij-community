{
  if (!(psiElement instanceof PsiNewExpression))   return;
  PsiNewExpression expr=(PsiNewExpression)psiElement;
  int count=0;
  for (  PsiElement element : expr.getChildren()) {
    if (element.getNode().getElementType() == JavaTokenType.LBRACKET) {
      count++;
    }
 else     if (element.getNode().getElementType() == JavaTokenType.RBRACKET) {
      count--;
    }
  }
  if (count > 0) {
    editor.getDocument().insertString(psiElement.getTextRange().getEndOffset(),"]");
  }
}
