{
  visibleRows.clear();
  for (int i=0; i < allRows.size(); i++) {
    MutableNodeRow row=allRows.get(i);
    if (row.hasVisibleNodes()) {
      row.setRowIndex(visibleRows.size());
      visibleRows.add(row);
    }
  }
}
