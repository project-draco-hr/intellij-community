{
  if (!isEnabled()) {
    executeOriginalHandler(editor,charTyped,dataContext);
    return;
  }
  Document document=editor.getDocument();
  int caretOffset=editor.getCaretModel().getOffset();
  CharSequence text=document.getImmutableCharSequence();
  if (isSpaceAroundAssignment(editor,dataContext) && !isInsideStringLiteral(editor)) {
    if (charTyped == '=' && shouldInsertBefore(caretOffset,text)) {
      EditorModificationUtil.insertStringAtCaret(editor," ");
    }
 else     if (isSameDocumentAsPrevious(editor) && myLastTypedChar == '=' && charTyped != '=' && charTyped != ' ') {
      EditorModificationUtil.insertStringAtCaret(editor," ");
    }
  }
  executeOriginalHandler(editor,charTyped,dataContext);
  myLastTypedChar=charTyped;
  myLastTypedOffset=editor.getCaretModel().getOffset();
  myLastEditedDocument=editor.getDocument();
}
