{
  Element state=new Element("state");
  for (  ConfigurableWebBrowser browser : browsers) {
    Element entry=new Element("browser");
    entry.setAttribute("id",browser.getId().toString());
    entry.setAttribute("name",browser.getName());
    entry.setAttribute("family",browser.getFamily().name());
    if (!StringUtil.isEmpty(browser.getPath())) {
      entry.setAttribute("path",browser.getPath());
    }
    if (!browser.isActive()) {
      entry.setAttribute("active","false");
    }
    BrowserSpecificSettings specificSettings=browser.getSpecificSettings();
    if (specificSettings != null) {
      Element settingsElement=new Element("settings");
      XmlSerializer.serializeInto(specificSettings,settingsElement,new SkipDefaultValuesSerializationFilters());
      if (!JDOMUtil.isEmpty(settingsElement)) {
        entry.addContent(settingsElement);
      }
    }
    state.addContent(entry);
  }
  return state;
}
