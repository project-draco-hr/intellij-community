{
  Element state=new Element("state");
  if (defaultBrowser != DefaultBrowser.SYSTEM) {
    state.setAttribute("default",defaultBrowser.name().toLowerCase());
  }
  for (  ConfigurableWebBrowser browser : browsers) {
    Element entry=new Element("browser");
    entry.setAttribute("id",browser.getId().toString());
    entry.setAttribute("name",browser.getName());
    entry.setAttribute("family",browser.getFamily().name());
    String path=browser.getPath();
    if (path != null && !path.equals(browser.getFamily().getExecutionPath())) {
      entry.setAttribute("path",path);
    }
    if (!browser.isActive()) {
      entry.setAttribute("active","false");
    }
    BrowserSpecificSettings specificSettings=browser.getSpecificSettings();
    if (specificSettings != null) {
      Element settingsElement=new Element("settings");
      XmlSerializer.serializeInto(specificSettings,settingsElement,new SkipDefaultValuesSerializationFilters());
      if (!JDOMUtil.isEmpty(settingsElement)) {
        entry.addContent(settingsElement);
      }
    }
    state.addContent(entry);
  }
  return state;
}
