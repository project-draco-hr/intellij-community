{
  @NonNls Element element=new Element("WebBrowsersConfiguration");
  for (  Map.Entry<BrowserFamily,WebBrowserSettings> entry : myBrowserToSettingsMap.entrySet()) {
    Element browser=new Element("browser");
    browser.setAttribute("family",entry.getKey().toString());
    WebBrowserSettings settings=entry.getValue();
    browser.setAttribute("path",settings.getPath());
    browser.setAttribute("active",Boolean.toString(settings.isActive()));
    BrowserSpecificSettings specificSettings=settings.getBrowserSpecificSettings();
    if (specificSettings != null) {
      Element settingsElement=new Element("settings");
      XmlSerializer.serializeInto(specificSettings,settingsElement,new SkipDefaultValuesSerializationFilters());
      if (!settingsElement.getContent().isEmpty()) {
        browser.addContent(settingsElement);
      }
    }
    element.addContent(browser);
  }
  return element;
}
