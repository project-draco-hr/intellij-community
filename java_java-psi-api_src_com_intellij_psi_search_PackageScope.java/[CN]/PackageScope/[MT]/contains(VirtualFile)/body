{
  VirtualFile parent=file.getParent();
  if (!myIncludeSubpackages) {
    if (myDirs.contains(parent))     return true;
  }
 else {
    while (parent != null) {
      if (myDirs.contains(parent))       return true;
      parent=parent.getParent();
    }
  }
  if (myPartOfPackagePrefix && myIncludeSubpackages) {
    final PsiFile psiFile=myPackage.getManager().findFile(file);
    if (psiFile instanceof PsiClassOwner) {
      final String packageName=((PsiClassOwner)psiFile).getPackageName();
      if (myPackageQualifiedName.equals(packageName) || packageName.startsWith(myPackageQNamePrefix))       return true;
    }
  }
  return false;
}
