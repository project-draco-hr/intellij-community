{
  removeAllItems();
  for (  LanguageLevel level : LanguageLevel.values()) {
    addItem(level);
  }
  myDefaultLevel=null;
  Sdk sdk=ProjectRootManagerEx.getInstanceEx(project).getProjectSdk();
  if (sdk != null) {
    JavaSdkVersion version=JavaSdk.getInstance().getVersion(sdk);
    if (version != null) {
      myDefaultLevel=version.getMaxLanguageLevel();
    }
  }
  Pair<String,String> item=null;
  if (myDefaultLevel != null) {
    item=Pair.create(JavaCoreBundle.message("default.language.level.description"),myDefaultLevel.getPresentableText());
    addItem(item);
  }
 else   if (project.isDefault()) {
    item=Pair.create(JavaCoreBundle.message("default.language.level.description"),null);
    addItem(item);
    myDefaultLevel=LanguageLevelProjectExtension.getInstance(project).getLanguageLevel();
  }
  LanguageLevelProjectExtension extension=LanguageLevelProjectExtension.getInstance(project);
  if (item != null && extension.isDefault()) {
    setSelectedItem(item);
  }
 else {
    setSelectedItem(extension.getLanguageLevel());
  }
}
