{
  for (  String prompt : PROMPTS) {
    if (string.startsWith(prompt)) {
      if (prompt != HELP_PROMPT) {
        final StringBuilder builder=new StringBuilder();
        builder.append(prompt).append(prompt);
        while (string.startsWith(builder.toString())) {
          builder.append(prompt);
        }
        final String multiPrompt=builder.toString().substring(prompt.length());
        if (prompt == INDENT_PROMPT) {
          prompt=multiPrompt;
        }
        string=string.substring(multiPrompt.length());
      }
 else {
        string=string.substring(prompt.length());
      }
      final String currentPrompt=languageConsole.getPrompt();
      final String trimmedPrompt=prompt.trim();
      if (currentPrompt != null && !currentPrompt.equals(trimmedPrompt)) {
        languageConsole.setPrompt(trimmedPrompt);
        scrollDown(languageConsole.getConsoleEditor());
      }
      break;
    }
  }
  return string;
}
