{
  PyStringLiteralExpression string=PsiTreeUtil.getParentOfType(file.findElementAt(editor.getCaretModel().getOffset()),PyStringLiteralExpression.class);
  PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  if (string != null) {
    String stringText=string.getText();
    if (stringText.startsWith("'") && stringText.endsWith("'")) {
      String result=convertSingleToDoubleQuoted(stringText.substring(1,stringText.length() - 1));
      PyStringLiteralExpression st=elementGenerator.createStringLiteralAlreadyEscaped(result);
      string.replace(st);
    }
    if (stringText.startsWith("\"") && stringText.endsWith("\"")) {
      String result=convertDoubleToSingleQuoted(stringText);
      PyStringLiteralExpression st=elementGenerator.createStringLiteralAlreadyEscaped(result);
      string.replace(st);
    }
  }
}
