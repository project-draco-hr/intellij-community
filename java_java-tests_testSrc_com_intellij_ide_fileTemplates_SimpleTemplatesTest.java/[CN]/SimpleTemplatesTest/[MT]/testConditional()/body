{
  CustomFileTemplate template=new CustomFileTemplate("foo","bar");
  template.setText("#set($flag = \"$!IJ_BASE_PACKAGE\" != \"\")\n" + "<option name=\"MAIN_CLASS_NAME\" value=\"$IJ_BASE_PACKAGE#if($flag).#{end}Main\" />");
  Properties attributes=new Properties();
  attributes.setProperty("IJ_BASE_PACKAGE","");
  assertEquals("<option name=\"MAIN_CLASS_NAME\" value=\"Main\" />",template.getText(attributes));
  attributes.setProperty("IJ_BASE_PACKAGE","foo.bar");
  assertEquals("<option name=\"MAIN_CLASS_NAME\" value=\"foo.bar.Main\" />",template.getText(attributes));
}
