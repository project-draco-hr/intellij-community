{
  super(project,true);
  myProject=project;
  setTitle(CodeInsightBundle.message("dialog.reformat.files.title"));
  myOptimizeImports.setSelected(isOptmizeImportsOptionOn());
  boolean canTargetVcsChanges=FormatChangedTextUtil.hasChanges(files,project);
  myOnlyChangedText.setEnabled(canTargetVcsChanges);
  myOnlyChangedText.setSelected(canTargetVcsChanges && PropertiesComponent.getInstance().getBoolean(LayoutCodeConstants.PROCESS_CHANGED_TEXT_KEY,false));
  myOptimizeImports.setSelected(isOptmizeImportsOptionOn());
  myRearrangeEntriesCb.setSelected(LayoutCodeSettingsStorage.getLastSavedRearrangeEntriesCbStateFor(myProject));
  init();
}
