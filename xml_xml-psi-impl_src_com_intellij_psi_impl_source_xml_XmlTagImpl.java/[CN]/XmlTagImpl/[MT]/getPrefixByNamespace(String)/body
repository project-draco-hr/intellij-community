{
  final PsiElement parent=getParent();
  BidirectionalMap<String,String> map=initNamespaceMaps(parent);
  if (map != null) {
    List<String> keysByValue=map.getKeysByValue(namespace);
    final String ns=keysByValue == null || keysByValue.isEmpty() ? null : keysByValue.get(0);
    if (ns != null)     return ns;
  }
  XmlTag parentTag=getParentTag();
  if (parentTag != null)   return parentTag.getPrefixByNamespace(namespace);
  if (XmlUtil.XML_NAMESPACE_URI.equals(namespace))   return XML_NS_PREFIX;
  return null;
}
