{
  runInBackground(new ThrowableConsumer<ProgressIndicator,VcsException>(){
    @Override public void consume(    ProgressIndicator indicator) throws VcsException {
      Map<VirtualFile,List<TimedVcsCommit>> logs=ContainerUtil.newHashMap();
      Map<VirtualFile,Collection<VcsRef>> refs=ContainerUtil.newHashMap();
      for (      Map.Entry<VirtualFile,VcsLogProvider> entry : myLogProviders.entrySet()) {
        VirtualFile root=entry.getKey();
        VcsLogProvider logProvider=entry.getValue();
        logs.put(root,logProvider.readAllHashes(root));
        refs.put(root,logProvider.readAllRefs(root));
      }
      myLogData=new LogData(logs,refs);
    }
  }
);
}
