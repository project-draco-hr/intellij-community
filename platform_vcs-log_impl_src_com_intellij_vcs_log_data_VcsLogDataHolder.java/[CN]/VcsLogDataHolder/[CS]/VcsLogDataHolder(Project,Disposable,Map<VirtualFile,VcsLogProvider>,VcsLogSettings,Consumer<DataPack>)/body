{
  Disposer.register(parentDisposable,this);
  myProject=project;
  myLogProviders=logProviders;
  myDataLoaderQueue=new BackgroundTaskQueue(project,"Loading history...");
  myMiniDetailsGetter=new MiniDetailsGetter(this,logProviders);
  myDetailsGetter=new CommitDetailsGetter(this,logProviders);
  mySettings=settings;
  myDataPackUpdateHandler=dataPackUpdateHandler;
  myUserRegistry=(VcsUserRegistryImpl)ServiceManager.getService(project,VcsUserRegistry.class);
  try {
    myHashMap=new VcsLogHashMap(myProject);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  myContainingBranchesGetter=new ContainingBranchesGetter(project,this,this);
  myRefresher=new VcsLogRefresherImpl(myProject,myHashMap,myLogProviders,myUserRegistry,myTopCommitsDetailsCache,dataPackUpdateHandler,new Consumer<Exception>(){
    @Override public void consume(    Exception e){
      LOG.error(e);
    }
  }
,mySettings.getRecentCommitsCount());
}
