{
  final List<CandidateClass> prepared=ContainerUtil.map(candidates,new Function<PyClass,CandidateClass>(){
    @Override public CandidateClass fun(    PyClass pyClass){
      return new CandidateClass(pyClass,anchor);
    }
  }
);
  Collections.sort(prepared);
  return prepared.subList(0,Math.min(prepared.size(),MAX_CANDIDATES));
}
