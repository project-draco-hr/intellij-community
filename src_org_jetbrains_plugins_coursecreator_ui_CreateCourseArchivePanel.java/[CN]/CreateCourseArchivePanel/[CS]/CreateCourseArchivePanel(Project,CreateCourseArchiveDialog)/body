{
  setLayout(new BorderLayout());
  add(myPanel,BorderLayout.CENTER);
  myProject=project;
  myErrorIcon.setIcon(AllIcons.Actions.Lightning);
  setState(false);
  myDlg=dlg;
  myDlg.enableOKAction(false);
  FileChooserDescriptor descriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
  myLocationField.addBrowseFolderListener("Choose location folder",null,myProject,descriptor);
  myLocationField.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String location=myLocationField.getText();
      File file=new File(location);
      if (!file.exists() || !file.isDirectory()) {
        myDlg.enableOKAction(false);
        setError("Invalid location");
      }
      myDlg.enableOKAction(true);
    }
  }
);
}
