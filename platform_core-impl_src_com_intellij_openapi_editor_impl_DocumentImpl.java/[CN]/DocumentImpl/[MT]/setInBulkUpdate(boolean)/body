{
  if (myAssertThreading) {
    ApplicationManager.getApplication().assertIsDispatchThread();
  }
  if (myUpdatingBulkModeStatus) {
    throw new IllegalStateException("Detected bulk mode status update from DocumentBulkUpdateListener");
  }
  if (myDoingBulkUpdate == value) {
    return;
  }
  myUpdatingBulkModeStatus=true;
  try {
    if (value) {
      getPublisher().updateStarted(this);
      notifyInternalListenersOnBulkModeStarted();
      myBulkUpdateEnteringTrace=new Throwable();
      myDoingBulkUpdate=true;
    }
 else {
      myDoingBulkUpdate=false;
      myBulkUpdateEnteringTrace=null;
      notifyInternalListenersOnBulkModeFinished();
      getPublisher().updateFinished(this);
    }
  }
  finally {
    myUpdatingBulkModeStatus=false;
  }
}
