{
  PsiSubstitutor substitutor=PsiSubstitutor.EMPTY;
  final InferenceVariable[] oldVars=inferenceVariables.toArray(new InferenceVariable[inferenceVariables.size()]);
  for (  InferenceVariable variable : oldVars) {
    final InferenceVariable newVariable=new InferenceVariable(context,variable.getParameter());
    substitutor=substitutor.put(variable,JavaPsiFacade.getElementFactory(variable.getProject()).createType(newVariable));
    targetVars.add(newVariable);
  }
  for (int i=0; i < targetVars.size(); i++) {
    InferenceVariable var=targetVars.get(i);
    for (    InferenceBound boundType : InferenceBound.values()) {
      for (      PsiType bound : oldVars[i].getBounds(boundType)) {
        var.addBound(substitutor.substitute(bound),boundType);
      }
    }
  }
  return substitutor;
}
