{
  final PsiFile file=getFile();
  if (file == null)   return;
  final IndentOptions currentDefault=getDefaultIndentOptions(file,myDocument);
  myOptionsToAdjust.copyFrom(currentDefault);
  adjuster.adjust(myOptionsToAdjust);
  if (myOptionsToAdjust instanceof TimeStampedIndentOptions) {
    TimeStampedIndentOptions cachedInDocument=(TimeStampedIndentOptions)myOptionsToAdjust;
    cachedInDocument.setTimeStamp(myDocument.getModificationStamp());
    cachedInDocument.setOriginalIndentOptionsHash(currentDefault.hashCode());
  }
}
