{
  byte[] savedKey=key.get().get();
  key.get().set(EncryptionUtil.genPasswordKey(password));
  String rc;
  try {
    rc=getPassword(null,MasterKeyPasswordSafe.class,testKey(password));
  }
 catch (  PasswordSafeException e) {
    throw new IllegalStateException("There should be no problem with password at this point",e);
  }
  if (!TEST_PASSWORD_VALUE.equals(rc)) {
    key.get().set(savedKey);
    return false;
  }
 else {
    return true;
  }
}
