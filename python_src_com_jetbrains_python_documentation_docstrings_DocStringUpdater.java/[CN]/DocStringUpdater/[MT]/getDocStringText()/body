{
  scheduleUpdates();
  Collections.reverse(myUpdates);
  Collections.sort(myUpdates);
  for (int i=myUpdates.size() - 1; i >= 0; i--) {
    final UpdateOperation update=myUpdates.get(i);
    final TextRange updateRange=update.range;
    if (updateRange.getStartOffset() == updateRange.getEndOffset()) {
      myBuilder.insert(updateRange.getStartOffset(),update.text);
    }
 else {
      myBuilder.replace(updateRange.getStartOffset(),updateRange.getEndOffset(),update.text);
    }
  }
  return myBuilder.toString();
}
