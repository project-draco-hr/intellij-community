{
  UsageTrigger.trigger("ide.help." + id);
  if (MacHelpUtil.isApplicable() && MacHelpUtil.invokeHelp(id)) {
    return;
  }
  IdeaHelpBroker broker=SoftReference.dereference(myBrokerReference);
  if (broker == null) {
    HelpSet set=createHelpSet();
    if (set != null) {
      broker=new IdeaHelpBroker(set);
      myBrokerReference=new WeakReference<IdeaHelpBroker>(broker);
    }
  }
  if (broker == null) {
    ApplicationInfoEx info=ApplicationInfoEx.getInstanceEx();
    String url=info.getWebHelpUrl() + "?";
    if (PlatformUtils.isCLion()) {
      url+="Keyword=" + id;
      url+="&ProductVersion=" + info.getMajorVersion() + "."+ info.getMinorVersion();
      if (info.isEAP()) {
        url+="&EAP";
      }
    }
 else {
      url+=id;
    }
    BrowserUtil.browse(url);
    return;
  }
  Window activeWindow=KeyboardFocusManager.getCurrentKeyboardFocusManager().getActiveWindow();
  broker.setActivationWindow(activeWindow);
  if (id != null) {
    try {
      broker.setCurrentID(id);
    }
 catch (    BadIDException e) {
      Messages.showErrorDialog(IdeBundle.message("help.topic.not.found.error",id),CommonBundle.getErrorTitle());
      return;
    }
  }
  broker.setDisplayed(true);
}
