{
  ProjectConnection connection=getConnection(projectPath,settings);
  try {
    return f.fun(connection);
  }
 catch (  ExternalSystemException e) {
    throw e;
  }
catch (  Throwable e) {
    throw new ExternalSystemException(e);
  }
 finally {
    try {
      connection.close();
    }
 catch (    Throwable e) {
    }
  }
}
