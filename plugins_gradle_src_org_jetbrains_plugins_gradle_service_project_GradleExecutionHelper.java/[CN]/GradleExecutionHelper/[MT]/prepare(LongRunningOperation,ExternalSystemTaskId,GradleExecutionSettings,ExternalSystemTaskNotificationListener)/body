{
  if (settings == null) {
    return;
  }
  int xmx=settings.getDaemonXmx();
  if (xmx > 0) {
    operation.setJvmArguments(String.format("-Xmx%dm",xmx));
  }
  listener.onStart(id);
  final String javaHome=settings.getJavaHome();
  if (javaHome != null && new File(javaHome).isDirectory()) {
    operation.setJavaHome(new File(javaHome));
  }
  operation.addProgressListener(new ProgressListener(){
    @Override public void statusChanged(    ProgressEvent event){
      listener.onStatusChange(new ExternalSystemTaskNotificationEvent(id,event.getDescription()));
    }
  }
);
  operation.setStandardOutput(new OutputWrapper(listener,id,true));
  operation.setStandardError(new OutputWrapper(listener,id,false));
}
