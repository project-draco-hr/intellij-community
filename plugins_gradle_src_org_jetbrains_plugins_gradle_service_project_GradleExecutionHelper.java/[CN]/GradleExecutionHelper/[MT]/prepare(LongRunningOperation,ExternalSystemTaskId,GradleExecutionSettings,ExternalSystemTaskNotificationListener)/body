{
  if (settings == null) {
    return;
  }
  String vmOptions=settings.getDaemonVmOptions();
  if (vmOptions != null) {
    operation.setJvmArguments(vmOptions.trim());
  }
  listener.onStart(id);
  final String javaHome=settings.getJavaHome();
  if (javaHome != null && new File(javaHome).isDirectory()) {
    operation.setJavaHome(new File(javaHome));
  }
  operation.addProgressListener(new ProgressListener(){
    @Override public void statusChanged(    ProgressEvent event){
      listener.onStatusChange(new ExternalSystemTaskNotificationEvent(id,event.getDescription()));
    }
  }
);
  operation.setStandardOutput(new OutputWrapper(listener,id,true));
  operation.setStandardError(new OutputWrapper(listener,id,false));
}
