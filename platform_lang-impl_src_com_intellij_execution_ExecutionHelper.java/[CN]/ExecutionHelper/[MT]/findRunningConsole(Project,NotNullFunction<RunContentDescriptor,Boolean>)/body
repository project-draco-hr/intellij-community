{
  RunContentManager contentManager=ExecutionManager.getInstance(project).getContentManager();
  final RunContentDescriptor selectedContent=contentManager.getSelectedContent();
  if (selectedContent != null) {
    final ToolWindow toolWindow=contentManager.getToolWindowByDescriptor(selectedContent);
    if (toolWindow != null && toolWindow.isVisible()) {
      if (descriptorMatcher.fun(selectedContent)) {
        return Collections.singletonList(selectedContent);
      }
    }
  }
  final ArrayList<RunContentDescriptor> result=ContainerUtil.newArrayList();
  for (  RunContentDescriptor runContentDescriptor : contentManager.getAllDescriptors()) {
    if (descriptorMatcher.fun(runContentDescriptor)) {
      result.add(runContentDescriptor);
    }
  }
  return result;
}
