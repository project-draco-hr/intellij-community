{
  return new Runnable(){
    private final Semaphore mySemaphore=new Semaphore();
    private final Runnable myProcessThread=new Runnable(){
      @Override public void run(){
        try {
          final boolean finished=processHandler.waitFor(1000 * mode.getTimeout());
          if (!finished) {
            mode.getTimeoutCallback().fun(Pair.create(mode,presentableCmdline));
            processHandler.destroyProcess();
          }
        }
  finally {
          mySemaphore.up();
        }
      }
    }
;
    @Override public void run(){
      mySemaphore.down();
      ApplicationManager.getApplication().executeOnPooledThread(myProcessThread);
      mySemaphore.waitFor();
    }
  }
;
}
