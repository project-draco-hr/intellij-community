{
  RowOfNode prevRow=rows.get(index - 1);
  MutableRowOfNode nextLine=new MutableRowOfNode();
  for (  GraphNode node : prevRow) {
    int indexCommit=node.getIndexCommit();
    if (indexCommit != index - 1) {
      nextLine.add(indexCommit,node.getIndexColor());
    }
 else {
      Commit commit=listOfCommits.get(indexCommit);
      if (commit.mainParent() != null) {
        nextLine.add(commit.mainParent().index(),node.getIndexColor());
      }
      if (commit.secondParent() != null) {
        nextLine.add(commit.secondParent().index(),prevRow.getAdditionColor());
      }
    }
  }
  int p=nextLine.getPositionOfCommit(index);
  if (p == -1) {
    nextLine.add(index,indexColor);
    indexColor++;
    nextLine.setMainPosition(nextLine.size() - 1);
  }
 else {
    nextLine.setMainPosition(p);
  }
  if (listOfCommits.get(index).secondParent() != null) {
    nextLine.setAdditionColor(indexColor);
    indexColor++;
  }
  rows.add(nextLine);
}
