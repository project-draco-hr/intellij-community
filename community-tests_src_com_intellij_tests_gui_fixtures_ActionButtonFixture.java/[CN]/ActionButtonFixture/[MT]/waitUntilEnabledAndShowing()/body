{
  pause(new Condition("wait for action to be enabled and showing"){
    @Override public boolean test(){
      return execute(new GuiQuery<Boolean>(){
        @Nullable @Override protected Boolean executeInEDT() throws Throwable {
          ActionButton target=target();
          if (target.getAction().getTemplatePresentation().isEnabledAndVisible()) {
            return target.isShowing() && target.isVisible() && target.isEnabled();
          }
          return false;
        }
      }
);
    }
  }
,LONG_TIMEOUT);
  return this;
}
