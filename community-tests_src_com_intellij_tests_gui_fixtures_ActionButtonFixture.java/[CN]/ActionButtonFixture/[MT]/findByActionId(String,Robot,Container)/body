{
  final Ref<ActionButton> actionButtonRef=new Ref<ActionButton>();
  pause(new Condition("Find ActionButton with ID '" + actionId + "'"){
    @Override public boolean test(){
      Collection<ActionButton> found=robot.finder().findAll(container,new GenericTypeMatcher<ActionButton>(ActionButton.class){
        @Override protected boolean isMatching(        @NotNull ActionButton button){
          if (button.isVisible()) {
            AnAction action=button.getAction();
            if (action != null) {
              String id=ActionManager.getInstance().getId(action);
              return actionId.equals(id);
            }
          }
          return false;
        }
      }
);
      if (found.size() == 1) {
        actionButtonRef.set(getFirstItem(found));
        return true;
      }
      return false;
    }
  }
,SHORT_TIMEOUT);
  ActionButton button=actionButtonRef.get();
  if (button == null) {
    throw new ComponentLookupException("Failed to find ActionButton with ID '" + actionId + "'");
  }
  return new ActionButtonFixture(robot,button);
}
