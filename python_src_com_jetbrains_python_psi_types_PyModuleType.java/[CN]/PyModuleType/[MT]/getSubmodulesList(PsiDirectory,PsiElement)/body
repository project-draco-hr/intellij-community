{
  List<PsiFileSystemItem> result=new ArrayList<PsiFileSystemItem>();
  if (directory != null) {
    for (    PsiFile f : directory.getFiles()) {
      final String filename=f.getName();
      if (!isExcluded(f) && (f instanceof PyFile && !filename.equals(PyNames.INIT_DOT_PY)) || isBinaryModule(filename)) {
        result.add(f);
      }
    }
    for (    PsiDirectory dir : directory.getSubdirectories()) {
      if (!isExcluded(dir) && PyUtil.isPackage(dir,anchor)) {
        result.add(dir);
      }
    }
  }
  return result;
}
