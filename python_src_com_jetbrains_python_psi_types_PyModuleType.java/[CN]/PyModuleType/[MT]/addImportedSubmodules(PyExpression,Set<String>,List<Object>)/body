{
  PsiFile file=location.getContainingFile();
  if (file instanceof PyFile) {
    PyFile pyFile=(PyFile)file;
    PsiElement moduleBase=PyUtil.isPackage(myModule) ? myModule.getContainingDirectory() : myModule;
    for (    PyImportElement importElement : pyFile.getImportTargets()) {
      PsiElement target=ResolveImportUtil.resolveImportElement(importElement);
      if (target != null && PsiTreeUtil.isAncestor(moduleBase,target,true)) {
        if (target instanceof PsiFile && PyUtil.isPackage((PsiFile)target)) {
          continue;
        }
        LookupElement element=null;
        if (target instanceof PsiFileSystemItem) {
          element=buildFileLookupElement((PsiFileSystemItem)target,existingNames);
        }
 else         if (target instanceof PsiNamedElement) {
          element=LookupElementBuilder.createWithIcon((PsiNamedElement)target);
        }
        if (element != null) {
          result.add(element);
        }
      }
    }
  }
}
