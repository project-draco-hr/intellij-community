{
  ActivityManager.getInstance(project).rebuildAllModules(new ActivityStatusNotification(){
    @Override public void finished(    @NotNull ActivityExecutionResult executionResult){
      if (executionResult.isAborted() || project.isDisposed()) {
        return;
      }
      String text=getTemplatePresentation().getText();
      LocalHistory.getInstance().putSystemLabel(project,CompilerBundle.message(executionResult.getErrors() == 0 ? "rebuild.lvcs.label.no.errors" : "rebuild.lvcs.label.with.errors",text));
    }
  }
);
}
