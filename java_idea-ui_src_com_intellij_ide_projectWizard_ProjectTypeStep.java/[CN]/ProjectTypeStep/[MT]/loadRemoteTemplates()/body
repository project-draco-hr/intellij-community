{
  ProgressManager.getInstance().run(new Task.Backgroundable(myContext.getProject(),"Loading Templates"){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      try {
        myTemplatesList.setPaintBusy(true);
        RemoteTemplatesFactory factory=new RemoteTemplatesFactory();
        String[] groups=factory.getGroups();
        for (        String group : groups) {
          ProjectTemplate[] templates=factory.createTemplates(group,myContext);
          for (          ProjectTemplate template : templates) {
            String id=((ArchivedProjectTemplate)template).getCategory();
            for (            TemplatesGroup templatesGroup : myTemplatesMap.keySet()) {
              if (Comparing.equal(id,templatesGroup.getId()) || Comparing.equal(group,templatesGroup.getName())) {
                myTemplatesMap.putValue(templatesGroup,template);
              }
            }
          }
        }
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            TemplatesGroup group=getSelectedGroup();
            if (group == null)             return;
            Collection<ProjectTemplate> templates=myTemplatesMap.get(group);
            setTemplatesList(group,templates);
          }
        }
);
      }
  finally {
        myTemplatesList.setPaintBusy(false);
        myRemoteTemplatesLoaded=true;
      }
    }
  }
);
}
