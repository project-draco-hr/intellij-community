{
  TemplatesGroup group=getSelectedGroup();
  if (group == null)   return;
  PropertiesComponent.getInstance().setValue(PROJECT_WIZARD_GROUP,group.getId());
  ModuleBuilder groupModuleBuilder=group.getModuleBuilder();
  if (groupModuleBuilder == null || groupModuleBuilder.isTemplateBased()) {
    showTemplates(group);
  }
 else   if (!showCustomOptions(groupModuleBuilder)) {
    List<FrameworkSupportInModuleProvider> providers=FrameworkSupportUtil.getProviders(groupModuleBuilder);
    final ProjectCategory category=group.getProjectCategory();
    if (category != null) {
      List<FrameworkSupportInModuleProvider> filtered=ContainerUtil.filter(providers,new Condition<FrameworkSupportInModuleProvider>(){
        @Override public boolean value(        FrameworkSupportInModuleProvider provider){
          return matchFramework(category,provider);
        }
      }
);
      Map<String,FrameworkSupportInModuleProvider> map=ContainerUtil.newMapFromValues(providers.iterator(),PROVIDER_STRING_CONVERTOR);
      Set<FrameworkSupportInModuleProvider> set=new HashSet<FrameworkSupportInModuleProvider>(filtered);
      for (      FrameworkSupportInModuleProvider provider : filtered) {
        for (        FrameworkSupportInModuleProvider.FrameworkDependency depId : provider.getDependenciesFrameworkIds()) {
          FrameworkSupportInModuleProvider dependency=map.get(depId.getFrameworkId());
          set.add(dependency);
        }
      }
      myFrameworksPanel.setProviders(new ArrayList<FrameworkSupportInModuleProvider>(set),new HashSet<String>(Arrays.asList(category.getAssociatedFrameworkIds())),new HashSet<String>(Arrays.asList(category.getPreselectedFrameworkIds())));
    }
 else {
      myFrameworksPanel.setProviders(providers);
    }
    getSelectedBuilder().addModuleConfigurationUpdater(myConfigurationUpdater);
    showCard(FRAMEWORKS_CARD);
  }
  updateSelection();
}
