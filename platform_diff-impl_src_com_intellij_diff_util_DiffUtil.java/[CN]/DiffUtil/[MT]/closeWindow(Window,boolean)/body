{
  if (window instanceof IdeFrameImpl)   return false;
  if (modalOnly && window instanceof Frame)   return false;
  if (window instanceof DialogWrapperDialog) {
    ((DialogWrapperDialog)window).getDialogWrapper().doCancelAction();
    return !window.isVisible();
  }
  window.setVisible(false);
  window.dispose();
  return true;
}
