{
  WindowWrapper.Mode mode=hints.getMode();
  if (mode == null) {
    boolean isUnderDialog=LaterInvocator.isInModalContext();
    mode=isUnderDialog ? WindowWrapper.Mode.MODAL : WindowWrapper.Mode.FRAME;
  }
  if (mode == WindowWrapper.Mode.FRAME && (hints.getOkAction() != null || hints.getCancelAction() != null)) {
    mode=WindowWrapper.Mode.MODAL;
  }
  return mode;
}
