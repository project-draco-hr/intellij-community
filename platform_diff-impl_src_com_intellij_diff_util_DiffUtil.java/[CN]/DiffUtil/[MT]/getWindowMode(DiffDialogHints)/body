{
  WindowWrapper.Mode mode=hints.getMode();
  if (mode == null) {
    boolean isUnderDialog=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusedWindow() instanceof JDialog;
    mode=isUnderDialog ? WindowWrapper.Mode.MODAL : WindowWrapper.Mode.FRAME;
  }
  return mode;
}
