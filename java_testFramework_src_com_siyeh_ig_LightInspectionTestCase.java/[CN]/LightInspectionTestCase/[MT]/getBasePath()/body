{
  final InspectionProfileEntry inspection=getInspection();
  assertNotNull("File-based tests should either return an inspection or override this method",inspection);
  final String className=inspection.getClass().getName();
  final String[] words=className.split("\\.");
  final StringBuilder basePath=new StringBuilder("/plugins/InspectionGadgets/test/");
  final int lastWordIndex=words.length - 1;
  for (int i=0; i < lastWordIndex; i++) {
    String word=words[i];
    if (word.equals("ig")) {
      word="igtest";
    }
    basePath.append(word).append('/');
  }
  String lastWord=words[lastWordIndex];
  if (lastWord.endsWith("Inspection")) {
    lastWord=lastWord.substring(0,lastWord.length() - 10);
  }
  final int length=lastWord.length();
  boolean upperCase=false;
  for (int i=0; i < length; i++) {
    final char ch=lastWord.charAt(i);
    if (Character.isUpperCase(ch)) {
      if (!upperCase) {
        upperCase=true;
        if (i != 0) {
          basePath.append('_');
        }
      }
      basePath.append(Character.toLowerCase(ch));
    }
 else {
      upperCase=false;
      basePath.append(ch);
    }
  }
  return basePath.toString();
}
