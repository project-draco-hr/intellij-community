{
  PsiReference reference=parameters.getPosition().getContainingFile().findReferenceAt(parameters.getOffset());
  if (reference instanceof TagNameReference) {
    TagNameReference tagNameReference=(TagNameReference)reference;
    PsiElement element=tagNameReference.getElement();
    if (element instanceof XmlTag) {
      if (!tagNameReference.isStartTagFlag()) {
        result.addElement(createClosingTagLookupElement((XmlTag)element,false,tagNameReference.getNameElement()));
      }
 else {
        XmlTag tag=(XmlTag)element;
        LookupElement[] variants=getTagNameVariants(tag,tag.getNamespacePrefix());
        result.addAllElements(Arrays.asList(variants));
      }
    }
  }
}
