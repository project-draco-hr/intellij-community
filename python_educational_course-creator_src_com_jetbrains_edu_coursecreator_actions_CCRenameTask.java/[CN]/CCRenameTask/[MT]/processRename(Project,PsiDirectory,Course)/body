{
  PsiDirectory lessonDir=directory.getParent();
  if (lessonDir == null || !lessonDir.getName().contains(EduNames.LESSON)) {
    return false;
  }
  final CCProjectService service=CCProjectService.getInstance(project);
  Lesson lesson=service.getLesson(lessonDir.getName());
  if (lesson == null) {
    return false;
  }
  Task task=service.getTask(directory.getVirtualFile().getPath());
  if (task == null) {
    return false;
  }
  String newName=Messages.showInputDialog(project,"Enter new name","Rename " + getFolderName(),null);
  if (newName == null) {
    return false;
  }
  task.setName(newName);
  return true;
}
