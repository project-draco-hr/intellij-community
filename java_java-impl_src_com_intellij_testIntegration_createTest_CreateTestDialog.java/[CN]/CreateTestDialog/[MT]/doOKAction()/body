{
  RecentsManager.getInstance(myProject).registerRecentEntry(RECENTS_KEY,myTargetPackageField.getText());
  RecentsManager.getInstance(myProject).registerRecentEntry(RECENT_SUPERS_KEY,mySuperClassField.getText());
  String errorMessage=null;
  try {
    myTargetDirectory=selectTargetDirectory();
    if (myTargetDirectory == null)     return;
  }
 catch (  IncorrectOperationException e) {
    errorMessage=e.getMessage();
  }
  if (errorMessage == null) {
    try {
      errorMessage=checkCanCreateClass();
    }
 catch (    IncorrectOperationException e) {
      errorMessage=e.getMessage();
    }
  }
  if (errorMessage != null) {
    final int result=Messages.showOkCancelDialog(myProject,errorMessage + ". Update existing class?",CommonBundle.getErrorTitle(),Messages.getErrorIcon());
    if (result == Messages.CANCEL) {
      super.close(CANCEL_EXIT_CODE);
      return;
    }
  }
  saveDefaultLibraryName();
  saveShowInheritedMembersStatus();
  super.doOKAction();
}
