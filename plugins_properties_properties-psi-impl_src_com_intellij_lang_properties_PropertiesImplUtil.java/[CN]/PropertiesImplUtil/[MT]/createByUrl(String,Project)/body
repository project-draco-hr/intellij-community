{
  final int idx=url.lastIndexOf('/');
  if (idx == -1)   return null;
  final String baseDirectoryName=url.substring(0,idx);
  final String baseName=url.substring(idx + 1);
  final VirtualFile baseDirectoryVirtualFile=VirtualFileManager.getInstance().findFileByUrl(baseDirectoryName);
  if (baseDirectoryVirtualFile == null) {
    return null;
  }
  final PsiDirectory baseDirectory=PsiManager.getInstance(project).findDirectory(baseDirectoryVirtualFile);
  if (baseDirectory == null) {
    return null;
  }
  final ResourceBundleManager bundleBaseNameManager=ResourceBundleManager.getInstance(project);
  for (  PsiFile file : baseDirectory.getFiles()) {
    final PropertiesFile propertiesFile=getPropertiesFile(file);
    if (propertiesFile == null)     continue;
    final String currBaseName=bundleBaseNameManager.getBaseName(file);
    if (currBaseName.equals(baseName)) {
      return getResourceBundle(propertiesFile);
    }
  }
  return null;
}
