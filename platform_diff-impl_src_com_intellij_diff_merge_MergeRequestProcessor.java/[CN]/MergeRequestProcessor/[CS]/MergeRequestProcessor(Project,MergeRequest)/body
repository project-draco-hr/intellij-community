{
  myProject=project;
  myRequest=request;
  myContext=new MyDiffContext();
  myAvailableTools=ContainerUtil.list(TextMergeTool.INSTANCE,BinaryMergeTool.INSTANCE);
  myPanel=new JPanel(new BorderLayout());
  myMainPanel=new MyPanel();
  myContentPanel=new Wrapper();
  myToolbarPanel=new Wrapper();
  myToolbarPanel.setFocusable(true);
  myToolbarStatusPanel=new Wrapper();
  myPanel.add(myMainPanel,BorderLayout.CENTER);
  JPanel topPanel=new JPanel(new BorderLayout());
  topPanel.add(myToolbarPanel,BorderLayout.CENTER);
  topPanel.add(myToolbarStatusPanel,BorderLayout.EAST);
  myMainPanel.add(topPanel,BorderLayout.NORTH);
  myMainPanel.add(myContentPanel,BorderLayout.CENTER);
  myMainPanel.setFocusTraversalPolicyProvider(true);
  myMainPanel.setFocusTraversalPolicy(new MyFocusTraversalPolicy());
  MergeTool.MergeViewer viewer;
  try {
    MergeTool tool=getFittedTool();
    viewer=tool.createComponent(myContext,myRequest);
  }
 catch (  Throwable e) {
    LOG.error(e);
    viewer=ErrorMergeTool.INSTANCE.createComponent(myContext,myRequest);
  }
  myViewer=viewer;
}
