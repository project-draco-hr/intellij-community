{
  if (!StringUtil.isEmptyOrSpaces(line)) {
    myInputBuffer.append(line);
    if (!line.endsWith("\n")) {
      myInputBuffer.append("\n");
    }
  }
 else   if (StringUtil.isEmptyOrSpaces(myInputBuffer.toString())) {
    myInputBuffer.append("");
  }
  if (myMultilineToken == null) {
    myMultilineToken=getOpeningMultilineToken(line);
    if (myMultilineToken != null) {
      onMultilineEnter();
      return;
    }
  }
 else {
    if (closesThisMultilineToken(line,myMultilineToken)) {
      myMultilineToken=null;
      onMultilineExit();
    }
 else {
      if (line.equals("\n")) {
        myInputBuffer.append("\n");
      }
      return;
    }
  }
  if (line.endsWith("\\")) {
    onLineContinuation();
    return;
  }
  if (processLineIfShouldNotExecute(line)) {
    return;
  }
  myDelegateHandler.execute(myInputBuffer.toString(),console);
  initInputBuffer();
}
