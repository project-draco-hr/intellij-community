{
  final SvnConfiguration configuration=SvnConfiguration.getInstance(project);
  final SvnVcs vcs=SvnVcs.getInstance(project);
  SVNURL branchesUrl=SVNURL.parseURIEncoded(url);
  List<SvnBranchItem> result=new LinkedList<SvnBranchItem>();
  SvnTarget target=SvnTarget.fromURL(branchesUrl);
  if (!passive) {
    DirectoryEntryConsumer handler=createConsumer(branchesUrl,result);
    vcs.getFactory(target).createBrowseClient().list(target,SVNRevision.HEAD,SVNDepth.IMMEDIATES,handler);
  }
 else {
    ISVNDirEntryHandler handler=createHandler(branchesUrl,result);
    SVNLogClient client=vcs.getSvnKitManager().createLogClient(configuration.getPassiveAuthenticationManager(project));
    client.doList(target.getURL(),target.getPegRevision(),SVNRevision.HEAD,false,SVNDepth.IMMEDIATES,SVNDirEntry.DIRENT_ALL,handler);
  }
  Collections.sort(result);
  return result;
}
