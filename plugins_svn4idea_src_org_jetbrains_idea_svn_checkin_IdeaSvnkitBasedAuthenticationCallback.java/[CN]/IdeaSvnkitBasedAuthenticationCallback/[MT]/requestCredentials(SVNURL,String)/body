{
  SVNAuthentication authentication=null;
  if (repositoryUrl != null) {
    String realm=repositoryUrl.toDecodedString();
    Object data=SvnConfiguration.RUNTIME_AUTH_CACHE.getData(type,realm);
    if (data != null && data instanceof SVNAuthentication && !myRequestedCredentials.contains(getKey(realm,type))) {
      authentication=(SVNAuthentication)data;
      myRequestedCredentials.add(getKey(realm,type));
    }
 else {
      authentication=myVcs.getSvnConfiguration().getInteractiveManager(myVcs).getInnerProvider().requestClientAuthentication(type,repositoryUrl,realm,null,null,true);
      if (authentication != null) {
        myVcs.getSvnConfiguration().acknowledge(type,realm,authentication);
        myRequestedCredentials.add(getKey(realm,type));
      }
    }
  }
  if (authentication == null) {
    LOG.warn("Could not get authentication. Type - " + type + ", Url - "+ repositoryUrl);
  }
  return authentication;
}
