{
  Foundation.NSAutoreleasePool pool=new Foundation.NSAutoreleasePool();
  ID delegateClass=Foundation.allocateObjcClassPair(Foundation.getObjcClass("NSObject"),"NSScrollerChangesObserver");
  if (!Foundation.addMethod(delegateClass,Foundation.createSelector("handleScrollerStyleChanged:"),APPEARANCE_CALLBACK,"v@")) {
    throw new RuntimeException("Cannot add observer method");
  }
  if (!Foundation.addMethod(delegateClass,Foundation.createSelector("handleBehaviorChanged:"),BEHAVIOR_CALLBACK,"v@")) {
    throw new RuntimeException("Cannot add observer method");
  }
  Foundation.registerObjcClassPair(delegateClass);
  ID delegate=invoke("NSScrollerChangesObserver","new");
  try {
    ID center;
    center=invoke("NSNotificationCenter","defaultCenter");
    invoke(center,"addObserver:selector:name:object:",delegate,Foundation.createSelector("handleScrollerStyleChanged:"),Foundation.nsString("NSPreferredScrollerStyleDidChangeNotification"),ID.NIL);
    center=invoke("NSDistributedNotificationCenter","defaultCenter");
    invoke(center,"addObserver:selector:name:object:",delegate,Foundation.createSelector("handleBehaviorChanged:"),Foundation.nsString("AppleNoRedisplayAppearancePreferenceChanged"),ID.NIL,2);
  }
  finally {
    pool.drain();
  }
}
