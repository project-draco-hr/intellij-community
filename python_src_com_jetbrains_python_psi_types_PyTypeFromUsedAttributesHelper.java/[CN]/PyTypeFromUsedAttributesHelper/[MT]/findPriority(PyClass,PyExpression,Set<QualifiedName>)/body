{
  final PsiFile candidateFile=candidate.getContainingFile();
  if (PyBuiltinCache.getInstance(expression).isBuiltin(candidate)) {
    return Priority.BUILTIN;
  }
  if (candidateFile == expression.getContainingFile()) {
    return Priority.SAME_FILE;
  }
  final String qualifiedName=candidate.getQualifiedName();
  if (qualifiedName != null) {
    for (    QualifiedName qualifier : qualifiers) {
      if (QualifiedName.fromDottedString(qualifiedName).matchesPrefix(qualifier)) {
        return Priority.IMPORTED;
      }
    }
  }
  if (ProjectScope.getProjectScope(candidate.getProject()).contains(candidateFile.getVirtualFile())) {
    return Priority.PROJECT;
  }
  return Priority.OTHER;
}
