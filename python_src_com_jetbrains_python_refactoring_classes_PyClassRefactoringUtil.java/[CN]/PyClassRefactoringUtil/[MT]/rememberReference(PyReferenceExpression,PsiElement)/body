{
  final PyExpression qualifier=node.getQualifier();
  if (qualifier != null && !(resolveExpression(qualifier) instanceof PyImportedModule)) {
    return;
  }
  PyImportElement importElement=null;
  for (  ResolveResult result : node.getReference().multiResolve(false)) {
    final PsiElement e=result.getElement();
    if (e instanceof PyImportElement) {
      importElement=(PyImportElement)e;
    }
  }
  final PsiElement target=resolveExpression(node);
  if (target instanceof PsiNamedElement && !PsiTreeUtil.isAncestor(element,target,false)) {
    node.putCopyableUserData(ENCODED_IMPORT,(PsiNamedElement)target);
    if (importElement != null) {
      node.putCopyableUserData(ENCODED_IMPORT_AS,importElement.getAsName());
    }
  }
}
