{
  PsiElement sibling=elements[0].getPrevSibling();
  sibling=sibling == null ? elements[0].getParent().getPrevSibling() : sibling;
  final String white=sibling.getText();
  final StringBuilder builder=new StringBuilder("class ");
  builder.append(preparedClassName).append(":\n");
  boolean hasChanges=false;
  for (  PyElement element : elements) {
    final String name=element.getName();
    if (name != null && (up || superClass.findMethodByName(name,false) == null)) {
      builder.append(white).append(element.getText()).append("\n");
      hasChanges=true;
    }
  }
  return ignoreNoChanges || hasChanges ? builder.toString() : null;
}
