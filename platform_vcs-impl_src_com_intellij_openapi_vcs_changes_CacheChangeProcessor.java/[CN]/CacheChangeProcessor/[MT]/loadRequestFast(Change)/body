{
  if (change == null)   return new NoDiffRequest();
  Pair<Change,DiffRequest> pair=myRequestCache.get(change);
  if (pair != null) {
    Change oldChange=pair.first;
    if (ChangeDiffRequestPresentable.isEquals(oldChange,change)) {
      return pair.second;
    }
  }
  if (change.getBeforeRevision() instanceof FakeRevision || change.getAfterRevision() instanceof FakeRevision) {
    return new LoadingDiffRequest(ChangeDiffRequestPresentable.getRequestTitle(change));
  }
  return null;
}
