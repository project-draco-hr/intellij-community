{
  final PsiElement parent=expression.getParent();
  if (parent instanceof PsiParenthesizedExpression) {
    final PsiParenthesizedExpression parenthesizedExpression=(PsiParenthesizedExpression)parent;
    return isVariableValueUsed(parenthesizedExpression);
  }
  if (parent instanceof PsiTypeCastExpression) {
    final PsiTypeCastExpression typeCastExpression=(PsiTypeCastExpression)parent;
    return isVariableValueUsed(typeCastExpression);
  }
  if (parent instanceof PsiReturnStatement) {
    return true;
  }
  if (parent instanceof PsiExpressionList) {
    final PsiElement grandParent=parent.getParent();
    if (grandParent instanceof PsiMethodCallExpression) {
      return true;
    }
  }
 else   if (parent instanceof PsiArrayInitializerExpression) {
    return true;
  }
 else   if (parent instanceof PsiAssignmentExpression) {
    final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)parent;
    final PsiExpression rhs=assignmentExpression.getRExpression();
    return expression.equals(rhs);
  }
 else   if (parent instanceof PsiVariable) {
    final PsiVariable variable=(PsiVariable)parent;
    final PsiExpression initializer=variable.getInitializer();
    return expression.equals(initializer);
  }
  return false;
}
