{
  PsiFile baseFile;
  VirtualFile vFile=null;
  baseFile=resolve(null,baseSystemId);
  if (baseFile == null) {
    File workingFile=new File("");
    String workingDir=workingFile.getAbsoluteFile().getAbsolutePath().replace(File.separatorChar,'/');
    String id=StringUtil.replace(baseSystemId,workingDir,myFile.getVirtualFile().getParent().getPath());
    vFile=UriUtil.findRelative(id,myFile);
    if (vFile == null) {
      vFile=UriUtil.findRelative(baseSystemId,myFile);
      if (vFile == null) {
        try {
          vFile=VirtualFileManager.getInstance().findFileByUrl(VfsUtilCore.convertFromUrl(new URL(baseSystemId)));
        }
 catch (        MalformedURLException ignore) {
        }
      }
    }
  }
  if (vFile != null && !vFile.isDirectory() && !(vFile.getFileSystem() instanceof HttpFileSystem)) {
    baseFile=PsiManager.getInstance(myProject).findFile(vFile);
  }
  return baseFile;
}
