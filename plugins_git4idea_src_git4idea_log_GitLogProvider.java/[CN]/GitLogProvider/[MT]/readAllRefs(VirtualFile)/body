{
  myRepositoryManager.waitUntilInitialized();
  GitRepository repository=myRepositoryManager.getRepositoryForRoot(root);
  if (repository == null) {
    LOG.error("Repository not found for root " + root);
    return Collections.emptyList();
  }
  repository.update();
  Collection<GitLocalBranch> localBranches=repository.getBranches().getLocalBranches();
  Collection<GitRemoteBranch> remoteBranches=repository.getBranches().getRemoteBranches();
  Collection<VcsRef> refs=new ArrayList<VcsRef>(localBranches.size() + remoteBranches.size());
  for (  GitLocalBranch localBranch : localBranches) {
    refs.add(myVcsObjectsFactory.createRef(HashImpl.build(localBranch.getHash()),localBranch.getName(),GitRefManager.LOCAL_BRANCH,root));
  }
  for (  GitRemoteBranch remoteBranch : remoteBranches) {
    refs.add(myVcsObjectsFactory.createRef(HashImpl.build(remoteBranch.getHash()),remoteBranch.getNameForLocalOperations(),GitRefManager.REMOTE_BRANCH,root));
  }
  String currentRevision=repository.getCurrentRevision();
  if (currentRevision != null) {
    refs.add(myVcsObjectsFactory.createRef(HashImpl.build(currentRevision),"HEAD",GitRefManager.HEAD,root));
  }
  refs.addAll(readTags(root));
  return refs;
}
