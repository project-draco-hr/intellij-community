{
  myRepositoryManager.waitUntilInitialized();
  GitRepository repository=myRepositoryManager.getRepositoryForRoot(root);
  if (repository == null) {
    LOG.error("Repository not found for root " + root);
    return Collections.emptyList();
  }
  Collection<GitLocalBranch> localBranches=repository.getBranches().getLocalBranches();
  Collection<GitRemoteBranch> remoteBranches=repository.getBranches().getRemoteBranches();
  Collection<Ref> refs=new ArrayList<Ref>(localBranches.size() + remoteBranches.size());
  for (  GitLocalBranch localBranch : localBranches) {
    refs.add(new Ref(Hash.build(localBranch.getHash()),localBranch.getName(),Ref.RefType.LOCAL_BRANCH,root));
  }
  for (  GitRemoteBranch remoteBranch : remoteBranches) {
    refs.add(new Ref(Hash.build(remoteBranch.getHash()),remoteBranch.getNameForLocalOperations(),Ref.RefType.REMOTE_BRANCH,root));
  }
  String currentRevision=repository.getCurrentRevision();
  if (currentRevision != null) {
    refs.add(new Ref(Hash.build(currentRevision),"HEAD",Ref.RefType.HEAD,root));
  }
  return refs;
}
