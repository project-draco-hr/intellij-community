{
  if (!isRepositoryReady(root)) {
    return Collections.emptyList();
  }
  List<String> parameters=new ArrayList<String>(GitHistoryUtils.LOG_ALL);
  parameters.add("--sparse");
  List<TimedVcsCommit> timedVcsCommits=GitHistoryUtils.readCommits(myProject,root,userRegistry,parameters);
  return new GitBekParentFixer(root,this,timedVcsCommits).getCorrectCommits();
}
