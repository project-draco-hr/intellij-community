{
  if (!isRepositoryReady(root)) {
    return Collections.emptyList();
  }
  String[] params=ArrayUtil.mergeArrays(ArrayUtil.toStringArray(GitHistoryUtils.LOG_ALL),"--encoding=UTF-8","--full-history","--sparse","--max-count=" + commitCount);
  if (ordered) {
    params=ArrayUtil.append(params,"--date-order");
  }
  return GitHistoryUtils.loadMetadata(myProject,root,params);
}
