{
  if (!isRepositoryReady(root)) {
    return;
  }
  List<String> parameters=new ArrayList<String>(GitHistoryUtils.LOG_ALL);
  parameters.add("--sparse");
  final GitBekParentFixer parentFixer=GitBekParentFixer.prepare(root,this);
  GitHistoryUtils.readCommits(myProject,root,userRegistry,parameters,new Consumer<TimedVcsCommit>(){
    @Override public void consume(    TimedVcsCommit commit){
      commitConsumer.consume(parentFixer.fixCommit(commit));
    }
  }
);
}
