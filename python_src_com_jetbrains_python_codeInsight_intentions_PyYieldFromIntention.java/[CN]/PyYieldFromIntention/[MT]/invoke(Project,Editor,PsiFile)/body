{
  final PyForStatement forLoop=findForStatementAtCaret(editor,file);
  if (forLoop != null) {
    final PyExpression source=forLoop.getForPart().getSource();
    if (source != null) {
      final PyElementGenerator generator=PyElementGenerator.getInstance(project);
      final String text="yield from foo";
      final PyExpressionStatement exprStmt=generator.createFromText(LanguageLevel.forElement(file),PyExpressionStatement.class,text);
      final PyExpression expr=exprStmt.getExpression();
      if (expr instanceof PyYieldExpression) {
        final PyExpression yieldValue=((PyYieldExpression)expr).getExpression();
        if (yieldValue != null) {
          yieldValue.replace(source);
          forLoop.replace(exprStmt);
        }
      }
    }
  }
}
