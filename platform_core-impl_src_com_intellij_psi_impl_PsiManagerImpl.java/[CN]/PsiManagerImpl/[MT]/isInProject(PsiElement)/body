{
  if (element instanceof PsiDirectoryContainer) {
    PsiDirectory[] dirs=((PsiDirectoryContainer)element).getDirectories();
    for (    PsiDirectory dir : dirs) {
      if (!isInProject(dir))       return false;
    }
    return true;
  }
  PsiFile file=element.getContainingFile();
  VirtualFile virtualFile=null;
  if (file != null) {
    virtualFile=file.getViewProvider().getVirtualFile();
  }
 else   if (element instanceof PsiFileSystemItem) {
    virtualFile=((PsiFileSystemItem)element).getVirtualFile();
  }
  if (virtualFile instanceof LightVirtualFile)   return true;
  if (virtualFile != null && virtualFile.getFileType() instanceof InternalFileType)   return true;
  if (virtualFile != null) {
    return myExcludedFileIndex.isInContent(virtualFile);
  }
  return false;
}
