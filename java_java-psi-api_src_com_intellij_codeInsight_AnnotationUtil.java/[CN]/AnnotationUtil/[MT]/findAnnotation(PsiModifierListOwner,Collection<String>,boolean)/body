{
  if (listOwner == null)   return null;
  final PsiModifierList list=listOwner.getModifierList();
  if (list == null)   return null;
  final PsiAnnotation[] allAnnotations=list.getAnnotations();
  for (  PsiAnnotation annotation : allAnnotations) {
    String qualifiedName=annotation.getQualifiedName();
    if (annotationNames.contains(qualifiedName)) {
      return annotation;
    }
  }
  if (!skipExternal) {
    final Project project=listOwner.getProject();
    final ExternalAnnotationsManager annotationsManager=ExternalAnnotationsManager.getInstance(project);
    for (    String annotationName : annotationNames) {
      final PsiAnnotation annotation=annotationsManager.findExternalAnnotation(listOwner,annotationName);
      if (annotation != null) {
        return annotation;
      }
    }
    final InferredAnnotationsManager inferredAnnotationsManager=InferredAnnotationsManager.getInstance(project);
    for (    String annotationName : annotationNames) {
      final PsiAnnotation annotation=inferredAnnotationsManager.findInferredAnnotation(listOwner,annotationName);
      if (annotation != null) {
        return annotation;
      }
    }
  }
  return null;
}
