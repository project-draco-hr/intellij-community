{
  final GlobalSearchScope scopeToShow=getScopeToShow(aPackage.getProject(),module,searchInLibraries);
  List<PsiPackage> result=new ArrayList<PsiPackage>();
  for (  PsiPackage psiPackage : aPackage.getSubPackages(scopeToShow)) {
    final String name=psiPackage.getName();
    if (name != null && !name.isEmpty()) {
      result.add(psiPackage);
    }
  }
  return result.toArray(new PsiPackage[result.size()]);
}
