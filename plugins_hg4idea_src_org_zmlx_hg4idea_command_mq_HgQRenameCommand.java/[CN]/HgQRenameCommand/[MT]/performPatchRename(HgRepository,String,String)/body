{
  if (oldName.equals(newName))   return;
  final Project project=repository.getProject();
  new HgCommandExecutor(project).execute(repository.getRoot(),"qrename",Arrays.asList(oldName,newName),new HgCommandResultHandler(){
    @Override public void process(    @Nullable HgCommandResult result){
      if (HgErrorUtil.hasErrorsInCommandExecution(result)) {
        new HgCommandResultNotifier(project).notifyError(result,"Qrename command failed","Could not rename patch " + oldName + " to "+ newName);
      }
      repository.update();
    }
  }
);
}
