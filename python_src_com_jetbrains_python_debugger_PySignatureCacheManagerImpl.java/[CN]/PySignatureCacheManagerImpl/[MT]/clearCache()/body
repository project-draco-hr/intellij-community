{
  final Ref<Boolean> deleted=Ref.create(false);
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    @Override public void run(){
      ProjectFileIndex.SERVICE.getInstance(myProject).iterateContent(new ContentIterator(){
        @Override public boolean processFile(        VirtualFile fileOrDir){
          if (readAttribute(fileOrDir) != null) {
            writeAttribute(fileOrDir,"");
            deleted.set(true);
          }
          if (ProgressManager.getInstance().getProgressIndicator().isCanceled()) {
            return false;
          }
          return true;
        }
      }
);
    }
  }
,"Cleaning the cache of dynamically collected types",true,myProject);
  String message;
  if (deleted.get()) {
    message="Collected signatures were deleted";
  }
 else {
    message="Nothing to delete";
  }
  Messages.showInfoMessage(myProject,message,"Delete Cache");
}
