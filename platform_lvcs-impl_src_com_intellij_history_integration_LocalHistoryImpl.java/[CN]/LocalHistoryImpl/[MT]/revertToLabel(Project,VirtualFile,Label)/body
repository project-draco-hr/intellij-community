{
  if (!f.exists() || !f.isValid()) {
    notifyUser(project,String.format("File %s is not valid or doesn't exist",f.getName()));
    return;
  }
  HistoryDialogModel dirHistoryModel=f.isDirectory() ? new DirectoryHistoryDialogModel(project,myGateway,myVcs,f) : new EntireFileHistoryDialogModel(project,myGateway,myVcs,f);
  int leftRev=findRevisionIndexToRevert(dirHistoryModel,label);
  if (leftRev < 0) {
    notifyUser(project,String.format("Couldn't find label revision. Try to use local history dialog for %s and perform revert manually.",f.getName()));
    return;
  }
  if (leftRev == 0)   return;
  try {
    dirHistoryModel.selectRevisions(-1,leftRev - 1);
    dirHistoryModel.createReverter().revert();
  }
 catch (  IOException e) {
    LocalHistoryLog.LOG.error(String.format("Couldn't revert %s to local history label.",f.getName()),e);
  }
}
