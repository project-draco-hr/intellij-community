{
  HistoryDialogModel dirHistoryModel=f.isDirectory() ? new DirectoryHistoryDialogModel(project,myGateway,myVcs,f) : new EntireFileHistoryDialogModel(project,myGateway,myVcs,f);
  int leftRev=findRevisionIndexToRevert(dirHistoryModel,label);
  if (leftRev < 0) {
    LocalHistoryLog.LOG.error(String.format("Couldn't find label revision. try to Use local history dialog for %s and perform revert manually.",f.getName()));
    return;
  }
  try {
    dirHistoryModel.selectRevisions(-1,leftRev - 1);
    dirHistoryModel.createReverter().revert();
  }
 catch (  IOException e) {
    LocalHistoryLog.LOG.error(String.format("Couldn't revert %s to local history label.",f.getName()),e);
  }
}
