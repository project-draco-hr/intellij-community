{
  myProject=project;
  myScopeModules=new HashSet<>();
  for (  Module module : modules) {
    if (module == null) {
      continue;
    }
    if (includeDependentModules) {
      OrderEnumerator enumerator=ModuleRootManager.getInstance(module).orderEntries().recursively();
      if (!includeRuntimeDeps) {
        enumerator=enumerator.compileOnly();
      }
      enumerator.forEachModule(new CommonProcessors.CollectProcessor<>(myScopeModules));
    }
 else {
      myScopeModules.add(module);
    }
  }
  myModules=ModuleManager.getInstance(myProject).getModules();
}
