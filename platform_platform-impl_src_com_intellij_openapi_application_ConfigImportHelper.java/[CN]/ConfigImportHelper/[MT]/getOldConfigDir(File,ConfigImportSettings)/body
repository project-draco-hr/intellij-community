{
  if (oldInstallHome == null) {
    return null;
  }
  if (new File(oldInstallHome,OPTIONS_XML).exists()) {
    return oldInstallHome;
  }
  if (new File(oldInstallHome,CONFIG_RELATED_PATH + OPTIONS_XML).exists()) {
    return new File(oldInstallHome,CONFIG_RELATED_PATH);
  }
  int oldBuildNumber=getBuildNumber(oldInstallHome);
  if (oldBuildNumber != -1 && oldBuildNumber <= 600) {
    return new File(oldInstallHome,"config");
  }
  return getSettingsPath(oldInstallHome,settings,PathManager.PROPERTY_CONFIG_PATH,new Function<String,String>(){
    @Override public String fun(    String pathsSelector){
      return PathManager.getDefaultConfigPathFor(pathsSelector);
    }
  }
);
}
