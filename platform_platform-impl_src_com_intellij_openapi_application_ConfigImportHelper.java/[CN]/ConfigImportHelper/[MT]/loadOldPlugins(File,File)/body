{
  if (plugins.exists()) {
    List<IdeaPluginDescriptorImpl> descriptors=new SmartList<IdeaPluginDescriptorImpl>();
    PluginManagerCore.loadDescriptors(plugins,descriptors,null,0);
    List<String> oldPlugins=new SmartList<String>();
    for (    IdeaPluginDescriptorImpl descriptor : descriptors) {
      if (descriptor.isEnabled() && !descriptor.isBundled()) {
        oldPlugins.add(descriptor.getPluginId().getIdString());
      }
    }
    if (!oldPlugins.isEmpty()) {
      PluginManagerCore.savePluginsList(oldPlugins,false,new File(dest,PluginManager.INSTALLED_TXT));
    }
    return true;
  }
  return false;
}
