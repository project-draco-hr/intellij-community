{
  List<Variable> variables=Variables.filterAndSort(properties,this,false);
  int count=variables.size();
  int bucketSize=XCompositeNode.MAX_CHILDREN_TO_SHOW;
  if (count <= bucketSize) {
    node.addChildren(Variables.createVariablesList(variables,this),true);
    return;
  }
  for (; count > 0; count--) {
    if (Character.isDigit(variables.get(count - 1).getName().charAt(0))) {
      break;
    }
  }
  XValueChildrenList groupList=new XValueChildrenList();
  if (count > 0) {
    addGroups(variables,groupList,0,count,bucketSize);
  }
  int notGroupedVariablesOffset;
  if ((variables.size() - count) > bucketSize) {
    for (notGroupedVariablesOffset=variables.size(); notGroupedVariablesOffset > 0; notGroupedVariablesOffset--) {
      if (!variables.get(notGroupedVariablesOffset - 1).getName().startsWith(Variables.SPECIAL_PROPERTY_PREFIX)) {
        break;
      }
    }
    if (notGroupedVariablesOffset > 0) {
      addGroups(variables,groupList,count,notGroupedVariablesOffset,bucketSize);
    }
  }
 else {
    notGroupedVariablesOffset=count;
  }
  for (int i=notGroupedVariablesOffset; i < variables.size(); i++) {
    groupList.add(new VariableView(this,variables.get(i)));
  }
  node.addChildren(groupList,true);
}
