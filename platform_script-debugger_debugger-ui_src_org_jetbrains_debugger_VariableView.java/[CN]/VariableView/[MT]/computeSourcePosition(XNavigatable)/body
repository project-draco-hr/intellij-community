{
  if (value instanceof FunctionValue) {
    ((FunctionValue)value).resolve().doWhenDone(new Consumer<FunctionValue>(){
      @Override public void consume(      final FunctionValue function){
        getViewSupport().getVm().getScriptManager().getScript(function).doWhenDone(new Consumer<Script>(){
          @Override public void consume(          Script script){
            SourceInfo position=script == null ? null : getViewSupport().getSourceInfo(null,script,function.getOpenParenLine(),function.getOpenParenColumn());
            navigatable.setSourcePosition(position == null ? null : new XSourcePositionWrapper(position){
              @NotNull @Override public Navigatable createNavigatable(              @NotNull Project project){
                Navigatable result=PsiVisitors.visit(myPosition,project,new PsiVisitors.Visitor<Navigatable>(){
                  @Override public Navigatable visit(                  @NotNull PsiElement element,                  int positionOffset,                  @NotNull Document document){
                    PsiElement referenceCandidate=element;
                    PsiElement psiReference=null;
                    while ((referenceCandidate=referenceCandidate.getPrevSibling()) != null) {
                      if (referenceCandidate instanceof PsiReference) {
                        psiReference=referenceCandidate;
                        break;
                      }
                    }
                    if (psiReference == null) {
                      referenceCandidate=element.getParent();
                      if (referenceCandidate != null) {
                        while ((referenceCandidate=referenceCandidate.getPrevSibling()) != null) {
                          if (referenceCandidate instanceof PsiReference) {
                            psiReference=referenceCandidate;
                            break;
                          }
                        }
                      }
                    }
                    PsiElement navigationElement=psiReference == null ? element.getNavigationElement() : psiReference.getNavigationElement();
                    return navigationElement instanceof Navigatable ? (Navigatable)navigationElement : null;
                  }
                }
,null);
                return result == null ? super.createNavigatable(project) : result;
              }
            }
);
          }
        }
);
      }
    }
);
  }
 else {
    getViewSupport().computeSourcePosition(getName(),variable,context,navigatable);
  }
}
