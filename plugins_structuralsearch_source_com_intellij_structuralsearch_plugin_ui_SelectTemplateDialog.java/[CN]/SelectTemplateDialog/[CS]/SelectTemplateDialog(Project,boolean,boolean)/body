{
  super(_project,false);
  project=_project;
  showHistory=_showHistory;
  replace=_replace;
  existingTemplatesComponent=ExistingTemplatesComponent.getInstance(project);
  setTitle((showHistory) ? SSRBundle.message("used.templates.history.dialog.title") : SSRBundle.message("existing.templates.dialog.title"));
  getOKAction().putValue(Action.MNEMONIC_KEY,new Integer('O'));
  init();
  if (showHistory) {
    final int selection=existingTemplatesComponent.getHistoryList().getSelectedIndex();
    if (selection != -1) {
      setPatternFromList(selection);
    }
  }
 else {
    final TreePath selection=existingTemplatesComponent.getPatternTree().getSelectionPath();
    if (selection != null) {
      setPatternFromNode((DefaultMutableTreeNode)selection.getLastPathComponent());
    }
  }
  setupListeners();
}
