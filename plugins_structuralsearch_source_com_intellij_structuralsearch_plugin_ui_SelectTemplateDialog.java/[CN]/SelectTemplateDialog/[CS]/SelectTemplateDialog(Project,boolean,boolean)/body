{
  super(project,false);
  this.project=project;
  this.showHistory=showHistory;
  this.replace=replace;
  existingTemplatesComponent=ExistingTemplatesComponent.getInstance(this.project);
  setTitle(SSRBundle.message(this.showHistory ? "used.templates.history.dialog.title" : "existing.templates.dialog.title"));
  getOKAction().putValue(Action.MNEMONIC_KEY,new Integer('O'));
  init();
  if (this.showHistory) {
    final int selection=existingTemplatesComponent.getHistoryList().getSelectedIndex();
    if (selection != -1) {
      setPatternFromList(selection);
    }
  }
 else {
    final TreePath selection=existingTemplatesComponent.getPatternTree().getSelectionPath();
    if (selection != null) {
      setPatternFromNode((DefaultMutableTreeNode)selection.getLastPathComponent());
    }
  }
  setupListeners();
}
