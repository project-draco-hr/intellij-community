{
  final JPanel centerPanel=new JPanel(new BorderLayout());
  Splitter splitter;
  centerPanel.add(BorderLayout.CENTER,splitter=new Splitter(false,0.3f));
  centerPanel.add(splitter);
  final JPanel panel;
  splitter.setFirstComponent(showHistory ? existingTemplatesComponent.getHistoryPanel() : existingTemplatesComponent.getTemplatesPanel());
  splitter.setSecondComponent(panel=new JPanel(new BorderLayout()));
  searchPatternEditor=UIUtil.createEditor(EditorFactory.getInstance().createDocument(""),project,false,true);
  JComponent centerComponent;
  if (replace) {
    replacePatternEditor=UIUtil.createEditor(EditorFactory.getInstance().createDocument(""),project,false,true);
    centerComponent=new Splitter(true);
    ((Splitter)centerComponent).setFirstComponent(searchPatternEditor.getComponent());
    ((Splitter)centerComponent).setSecondComponent(replacePatternEditor.getComponent());
  }
 else {
    centerComponent=searchPatternEditor.getComponent();
  }
  panel.add(BorderLayout.CENTER,centerComponent);
  panel.add(BorderLayout.NORTH,new JLabel("Template preview:"));
  return centerPanel;
}
