{
  SmartPointerManager smartPointerManager=SmartPointerManager.getInstance(project);
  final List<PsiElement> elementsToFix=new ArrayList<PsiElement>();
  final List<PsiType> migrationTypes=new ArrayList<PsiType>();
  final List<SmartPsiElementPointer> chainsToFix=new ArrayList<SmartPsiElementPointer>();
  final List<PsiType> chainsMigrationTypes=new ArrayList<PsiType>();
  final List<PsiType> chainsInitialTypes=new ArrayList<PsiType>();
  for (  ProblemDescriptor descriptor : descriptors) {
    final MigrateGuavaTypeFix fix=getFix(descriptor);
    if (fix.myInitialType == null) {
      elementsToFix.add(fix.getStartElement());
      migrationTypes.add(fix.myTargetType);
    }
 else {
      chainsToFix.add(smartPointerManager.createSmartPsiElementPointer(fix.getStartElement()));
      chainsMigrationTypes.add(fix.myTargetType);
      chainsInitialTypes.add(fix.myInitialType);
    }
  }
  if (!elementsToFix.isEmpty() && !performTypeMigration(elementsToFix,migrationTypes))   return;
  if (!chainsToFix.isEmpty()) {
    filterAndPerformMethodCallTypeMigration(project,chainsToFix,chainsInitialTypes,chainsMigrationTypes);
  }
}
