{
  final Project project=e.getProject();
  if (project == null)   return;
  final TestStateStorage testStorage=TestStateStorage.getInstance(project);
  final TestLocator testLocator=new TestLocator(project);
  final RecentTestRunnerImpl testRunner=new RecentTestRunnerImpl(project,testLocator);
  final Map<String,TestStateStorage.Record> records=testStorage.getRecentTests(TEST_LIMIT,getSinceDate());
  RunConfigurationByRecordProvider configurationProvider=new RunConfigurationByRecordProvider(project);
  RecentTestsListProvider listProvider=new RecentTestsListProvider(configurationProvider,records);
  List<RecentTestsPopupEntry> entries=listProvider.getTestsToShow();
  SelectTestStep selectStepTest=new SelectTestStep(entries,testRunner);
  RecentTestsListPopup popup=new RecentTestsListPopup(selectStepTest,testRunner,testLocator);
  popup.showCenteredInCurrentWindow(project);
  cleanDeadTests(entries,testLocator,testStorage);
}
