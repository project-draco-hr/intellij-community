{
  while (position != null) {
    ProgressManager.checkCanceled();
    T anchor=position.peek();
    V value=myConvertor.fun(anchor);
    boolean isAccepted=value != null && myApplicableFilter.apply(value);
    if (isAccepted && !classesProcessed.contains(anchor) && classesBeingProcessed.add(anchor)) {
      return Pair.createNonNull(anchor,value);
    }
    position=position.next();
  }
  return null;
}
