{
  ConfigurationState state=new ConfigurationState();
  state.myServerName=myServerName;
  if (myDeploymentSource != null) {
    DeploymentItemState itemState;
    if (myDeploymentSource instanceof ArtifactDeploymentSource) {
      itemState=new ArtifactDeploymentSettingsState(((ArtifactDeploymentSource)myDeploymentSource).getArtifactPointer().getArtifactName());
    }
 else     if (myDeploymentSource instanceof ModuleDeploymentSource) {
      itemState=new ModuleDeploymentSettingsState(((ModuleDeploymentSource)myDeploymentSource).getModulePointer().getModuleName());
    }
 else {
      throw new WriteExternalException("Unknown source " + myDeploymentSource);
    }
    if (myDeploymentConfiguration != null) {
      itemState.setSettings(XmlSerializer.serialize(myDeploymentConfiguration.getSerializer().getState(),SERIALIZATION_FILTERS));
    }
    state.myDeploymentItemState.add(itemState);
  }
  XmlSerializer.serializeInto(state,element,SERIALIZATION_FILTERS);
  super.writeExternal(element);
}
