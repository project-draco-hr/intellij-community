{
  if (mySessions.isEmpty()) {
    return null;
  }
  List<SaveSession> saveSessions=null;
  Collection<StateStorage.ExternalizationSession> externalizationSessions=mySessions.values();
  for (  StateStorage.ExternalizationSession session : externalizationSessions) {
    SaveSession saveSession=session.createSaveSession();
    if (saveSession != null) {
      if (saveSessions == null) {
        if (externalizationSessions.size() == 1) {
          return saveSession;
        }
        saveSessions=new SmartList<SaveSession>();
      }
      saveSessions.add(saveSession);
    }
  }
  final List<SaveSession> list=saveSessions;
  return saveSessions == null ? null : new SaveSession(){
    @Override public void save(){
      for (      SaveSession saveSession : list) {
        saveSession.save();
      }
    }
  }
;
}
