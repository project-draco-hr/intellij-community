{
  final StateSplitter splitter;
  try {
    splitter=ReflectionUtil.newInstance(splitterClass);
  }
 catch (  RuntimeException e) {
    throw new StateStorageException(e);
  }
  return new DirectoryBasedStorage(myPathMacroSubstitutor,expandMacros(file),splitter,this,myPicoContainer);
}
