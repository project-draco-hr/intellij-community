{
  Matcher matcher=MACRO_PATTERN.matcher(file);
  while (matcher.find()) {
    String m=matcher.group(1);
    if (!myMacros.containsKey(m)) {
      throw new IllegalArgumentException("Unknown macro: " + m + " in storage file spec: "+ file);
    }
  }
  String expanded=file;
  for (  Map.Entry<String,String> entry : myMacros.entrySet()) {
    expanded=StringUtil.replace(expanded,entry.getKey(),entry.getValue());
  }
  return expanded;
}
