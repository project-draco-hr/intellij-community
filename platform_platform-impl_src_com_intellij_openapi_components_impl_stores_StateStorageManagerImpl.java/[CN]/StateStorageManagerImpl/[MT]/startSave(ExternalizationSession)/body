{
  StateStorageManagerExternalizationSession myExternalizationSession=(StateStorageManagerExternalizationSession)externalizationSession;
  Map<StateStorage,StateStorage.SaveSession> saveSessions=null;
  for (  StateStorage stateStorage : myExternalizationSession.mySessions.keySet()) {
    StateStorage.SaveSession saveSession=stateStorage.startSave(myExternalizationSession.getExternalizationSession(stateStorage));
    if (saveSession != null) {
      if (saveSessions == null) {
        saveSessions=new SmartHashMap<StateStorage,StateStorage.SaveSession>();
      }
      saveSessions.put(stateStorage,saveSession);
    }
  }
  if (saveSessions == null) {
    return null;
  }
  return new StateStorageSaveSession(saveSessions);
}
