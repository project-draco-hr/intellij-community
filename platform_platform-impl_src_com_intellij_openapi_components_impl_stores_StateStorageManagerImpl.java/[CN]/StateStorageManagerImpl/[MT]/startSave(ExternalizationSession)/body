{
  StateStorageManagerExternalizationSession myExternalizationSession=(StateStorageManagerExternalizationSession)externalizationSession;
  if (myExternalizationSession.mySessions.isEmpty()) {
    return null;
  }
  List<SaveSession> saveSessions=null;
  for (  Map.Entry<StateStorage,StateStorage.ExternalizationSession> entry : myExternalizationSession.mySessions.entrySet()) {
    SaveSession saveSession=entry.getKey().startSave(entry.getValue());
    if (saveSession != null) {
      if (saveSessions == null) {
        saveSessions=new SmartList<SaveSession>();
      }
      saveSessions.add(saveSession);
    }
  }
  return saveSessions == null ? null : new StateStorageSaveSession(saveSessions);
}
