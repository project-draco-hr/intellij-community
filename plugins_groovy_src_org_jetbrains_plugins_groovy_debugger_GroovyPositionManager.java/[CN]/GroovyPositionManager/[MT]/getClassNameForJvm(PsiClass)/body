{
  String suffix=typeDefinition instanceof GrTypeDefinition && ((GrTypeDefinition)typeDefinition).isTrait() ? "$Trait$Helper" : "";
  final PsiClass psiClass=typeDefinition.getContainingClass();
  if (psiClass != null) {
    return getClassNameForJvm(psiClass) + "$" + typeDefinition.getName()+ suffix;
  }
  for (  ScriptPositionManagerHelper helper : ScriptPositionManagerHelper.EP_NAME.getExtensions()) {
    final String s=helper.customizeClassName(typeDefinition);
    if (s != null) {
      return s;
    }
  }
  return typeDefinition.getQualifiedName() + suffix;
}
