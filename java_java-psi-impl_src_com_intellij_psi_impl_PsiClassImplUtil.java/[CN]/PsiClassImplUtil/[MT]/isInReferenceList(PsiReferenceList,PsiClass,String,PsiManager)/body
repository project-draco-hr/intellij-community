{
  if (list == null)   return false;
  if (list instanceof StubBasedPsiElement) {
    StubElement stub=((StubBasedPsiElement)list).getStub();
    if (stub instanceof PsiClassReferenceListStub && baseName != null) {
      PsiClassReferenceListStub classStub=(PsiClassReferenceListStub)stub;
      String[] names=classStub.getReferencedNames();
      for (int i=0; i < names.length; i++) {
        String name=names[i];
        int typeParam=name.indexOf('<');
        if (typeParam != -1) {
          name=name.substring(0,typeParam);
        }
        if (name.endsWith(baseName)) {
          PsiClassType[] referencedTypes=classStub.getReferencedTypes();
          PsiClass resolved=referencedTypes[i].resolve();
          if (manager.areElementsEquivalent(baseClass,resolved))           return true;
        }
      }
      return false;
    }
    if (stub != null) {
      for (      PsiClassType type : list.getReferencedTypes()) {
        if (Comparing.equal(type.getClassName(),baseName) && manager.areElementsEquivalent(baseClass,type.resolve())) {
          return true;
        }
      }
      return false;
    }
  }
  if (list.getLanguage() == JavaLanguage.INSTANCE) {
    for (    PsiJavaCodeReferenceElement referenceElement : list.getReferenceElements()) {
      if (Comparing.strEqual(baseName,referenceElement.getReferenceName()) && manager.areElementsEquivalent(baseClass,referenceElement.resolve())) {
        return true;
      }
    }
    return false;
  }
  for (  PsiClassType type : list.getReferencedTypes()) {
    if (Comparing.equal(type.getClassName(),baseName) && manager.areElementsEquivalent(baseClass,type.resolve())) {
      return true;
    }
  }
  return false;
}
