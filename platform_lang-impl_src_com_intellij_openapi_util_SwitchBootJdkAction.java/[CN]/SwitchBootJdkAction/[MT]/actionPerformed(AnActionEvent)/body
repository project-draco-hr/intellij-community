{
  if (!productJdkConfigDir.exists()) {
    try {
      if (!productJdkConfigDir.mkdirs()) {
        LOG.error("Could not create " + productJdkConfigDir + " productJdkConfigDir");
        return;
      }
      if (!productJdkConfigFile.exists()) {
        if (!productJdkConfigFile.createNewFile()) {
          LOG.error("Could not create " + productJdkConfigFileName + " productJdkConfigFile");
          return;
        }
      }
    }
 catch (    IOException e) {
      LOG.error(e);
      return;
    }
  }
  SwitchBootJdkDialog dialog=new SwitchBootJdkDialog();
  if (dialog.showAndGet()) {
    File selectedJdkBundleFile=dialog.getSelectedFile();
    if (selectedJdkBundleFile == null) {
      LOG.error("SwitchBootJdkDialog returns null selection");
      return;
    }
    FileWriter fooWriter=null;
    try {
      fooWriter=new FileWriter(productJdkConfigFile,false);
      fooWriter.write(selectedJdkBundleFile.getPath());
    }
 catch (    IOException e) {
      LOG.error(e);
    }
 finally {
      try {
        if (fooWriter != null) {
          fooWriter.close();
        }
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
    ApplicationManager.getApplication().restart();
  }
}
