{
  if (type == null) {
    return null;
  }
  PsiUtil.ensureValidType(type);
  PsiType substituted=type.accept(myAddingBoundsSubstitutionVisitor);
  return correctExternalSubstitution(substituted,type);
}
