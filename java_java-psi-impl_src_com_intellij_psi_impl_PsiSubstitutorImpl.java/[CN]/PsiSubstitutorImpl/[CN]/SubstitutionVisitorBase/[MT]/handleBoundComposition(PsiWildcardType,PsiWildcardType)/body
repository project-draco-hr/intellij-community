{
  final PsiType newBoundBound=bound.getBound();
  if (bound.isExtends() == wildcardType.isExtends()) {
    if (newBoundBound != null) {
      return rebound(wildcardType,newBoundBound);
    }
  }
  if (newBoundBound != null) {
    return wildcardType.isExtends() ? PsiWildcardType.createExtends(wildcardType.getManager(),newBoundBound) : PsiWildcardType.createSuper(wildcardType.getManager(),newBoundBound);
  }
  return PsiWildcardType.createUnbounded(wildcardType.getManager());
}
