{
  boolean isDataValid=isDataValid();
  boolean isReadOnly=isDataReadOnly();
  boolean isExcluded=isDataExcluded();
  String text=getText(view);
  boolean cachedValid=isValid();
  boolean cachedReadOnly=isFlagSet(READ_ONLY_MASK);
  boolean cachedExcluded=isFlagSet(EXCLUDED_MASK);
  if (isDataValid != cachedValid || isReadOnly != cachedReadOnly || isExcluded != cachedExcluded || !Comparing.equal(myCachedText,text)) {
    setFlag(INVALID_MASK,!isDataValid);
    setFlag(READ_ONLY_MASK,isReadOnly);
    setFlag(EXCLUDED_MASK,isExcluded);
    myCachedText=text;
    updateNotify();
    edtQueue.consume(new Runnable(){
      @Override public void run(){
        myTreeModel.nodeChanged(Node.this);
      }
    }
);
  }
  setFlag(UPDATED_MASK,true);
}
