{
  return ApplicationManager.getApplication().runReadAction(new Computable<PsiFile>(){
    @Override public PsiFile compute(){
      PsiFile psiFile=myPsiManager.findFile(virtualFile);
      if (psiFile != null && !(psiFile instanceof PsiBinaryFile)) {
        PsiFile sourceFile=(PsiFile)psiFile.getNavigationElement();
        if (sourceFile != null)         psiFile=sourceFile;
        if (psiFile.getFileType().isBinary()) {
          psiFile=null;
        }
      }
      return psiFile;
    }
  }
);
}
