{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (Registry.is("ide.require.transaction.for.model.changes",false) && !myWritingAllowed) {
    String message="Write access is allowed from write-safe contexts only. " + "Please ensure you're using invokeLater/invokeAndWait with a correct modality state (not \"any\"). " + "See TransactionGuard documentation for details";
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      message+="; current modality=" + ModalityState.current() + "; known modalities="+ myWriteSafeModalities;
    }
    LOG.error(message);
  }
}
