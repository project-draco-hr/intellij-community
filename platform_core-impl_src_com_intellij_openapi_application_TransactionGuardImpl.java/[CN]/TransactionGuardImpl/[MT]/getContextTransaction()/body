{
  if (!ApplicationManager.getApplication().isDispatchThread()) {
    ProgressIndicator indicator=ProgressIndicatorProvider.getGlobalProgressIndicator();
    return indicator != null ? myProgresses.get(indicator) : null;
  }
  return myWritingAllowed ? myCurrentTransaction : null;
}
