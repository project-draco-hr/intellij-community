{
  final TransactionIdImpl id=getContextTransaction();
  final ModalityState startModality=ModalityState.defaultModalityState();
  invokeLater(new Runnable(){
    @Override public void run(){
      boolean allowWriting=ModalityState.current() == startModality;
      AccessToken token=startActivity(allowWriting);
      try {
        submitTransaction(parentDisposable,id,transaction);
      }
  finally {
        token.finish();
      }
    }
  }
);
}
