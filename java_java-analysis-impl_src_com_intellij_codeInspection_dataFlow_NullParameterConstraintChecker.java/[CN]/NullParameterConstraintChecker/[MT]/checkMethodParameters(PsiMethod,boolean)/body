{
  if (method.getBody() == null)   return PsiParameter.EMPTY_ARRAY;
  final Collection<PsiParameter> nullableParameters=new SmartList<>();
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  for (int index=0; index < parameters.length; index++) {
    PsiParameter parameter=parameters[index];
    if (!(parameter.getType() instanceof PsiPrimitiveType) && !NullableNotNullManager.isNotNull(parameter) && JavaNullMethodArgumentUtil.hasNullArgument(method,index)) {
      nullableParameters.add(parameter);
    }
  }
  if (nullableParameters.isEmpty())   return PsiParameter.EMPTY_ARRAY;
  final NullParameterConstraintChecker checker=new NullParameterConstraintChecker(nullableParameters,isOnTheFly);
  checker.analyzeMethod(method.getBody(),new StandardInstructionVisitor());
  return checker.myPossiblyViolatedParameters.toArray(new PsiParameter[checker.myPossiblyViolatedParameters.size()]);
}
