{
  dialog.setBusy(true);
  new SwingWorker<List<String>,Void>(){
    @Override protected List<String> doInBackground() throws Exception {
      List<String> result=new ArrayList<String>();
      try {
        final GithubAuthData auth=info.getAuthData();
        final GithubRepoDetailed repo=info.getRepo();
        final GithubRepo parent=repo.getParent();
        final GithubRepo source=repo.getSource();
        result.addAll(getBranches(auth,repo.getUserName(),repo.getName()));
        if (parent != null) {
          result.addAll(getBranches(auth,parent.getUserName(),parent.getName()));
        }
        if (source != null && !equals(source,parent)) {
          result.addAll(getBranches(auth,source.getUserName(),source.getName()));
        }
        if (upstreamPath != null && !equals(upstreamPath,repo) && !equals(upstreamPath,parent) && !equals(upstreamPath,source)) {
          result.addAll(getBranches(auth,upstreamPath.getUser(),upstreamPath.getRepository()));
        }
      }
 catch (      IOException e) {
        GithubNotifications.showError(project,"Can't load available branches",e);
      }
      return result;
    }
    @Override protected void done(){
      try {
        dialog.addBranches(get());
      }
 catch (      Exception ignore) {
      }
      dialog.setBusy(false);
    }
    @NotNull private List<String> getBranches(    @NotNull GithubAuthData auth,    @NotNull final String user,    @NotNull String repo) throws IOException {
      List<GithubBranch> branches=GithubApiUtil.getRepoBranches(auth,user,repo);
      return ContainerUtil.map(branches,new Function<GithubBranch,String>(){
        @Override public String fun(        GithubBranch branch){
          return user + ":" + branch.getName();
        }
      }
);
    }
    private boolean equals(    @NotNull GithubRepo repo1,    @Nullable GithubRepo repo2){
      if (repo2 == null) {
        return false;
      }
      return StringUtil.equalsIgnoreCase(repo1.getUserName(),repo2.getUserName());
    }
    private boolean equals(    @NotNull GithubFullPath repo1,    @Nullable GithubRepo repo2){
      if (repo2 == null) {
        return false;
      }
      return StringUtil.equalsIgnoreCase(repo1.getUser(),repo2.getUserName());
    }
  }
.execute();
}
