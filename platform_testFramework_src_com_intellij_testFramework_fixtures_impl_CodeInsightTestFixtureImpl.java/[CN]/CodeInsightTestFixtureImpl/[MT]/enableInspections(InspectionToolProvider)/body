{
  List<LocalInspectionTool> tools=new ArrayList<>();
  for (  InspectionToolProvider provider : providers) {
    for (    Class<?> clazz : provider.getInspectionClasses()) {
      try {
        Object o=clazz.getConstructor().newInstance();
        if (o instanceof LocalInspectionTool) {
          LocalInspectionTool inspection=(LocalInspectionTool)o;
          tools.add(inspection);
        }
      }
 catch (      Exception e) {
        throw new RuntimeException("Cannot instantiate " + clazz,e);
      }
    }
  }
  enableInspections(tools.toArray(new LocalInspectionTool[tools.size()]));
}
