{
  assertInitialized();
  final Project project=getProject();
  new WriteCommandAction.Simple(project){
    @Override protected void run() throws Exception {
      configureByFiles(ArrayUtil.reverseArray(ArrayUtil.append(additionalFiles,filePath)));
      final VirtualFile file=findFileInTempDir(to);
      Assert.assertNotNull("Directory " + to + " not found",file);
      Assert.assertTrue(to + " is not a directory",file.isDirectory());
      final PsiDirectory directory=myPsiManager.findDirectory(file);
      new MoveFilesOrDirectoriesProcessor(project,new PsiElement[]{getFile()},directory,false,false,null,null).run();
    }
  }
.execute().throwException();
}
