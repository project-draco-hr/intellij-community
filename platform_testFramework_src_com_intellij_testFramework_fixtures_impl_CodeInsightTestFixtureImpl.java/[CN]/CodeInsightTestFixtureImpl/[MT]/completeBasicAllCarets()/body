{
  final CaretModel caretModel=myEditor.getCaretModel();
  final List<Caret> carets=caretModel.getAllCarets();
  final Collection<Integer> originalOffsets=new ArrayList<Integer>(carets.size());
  for (  final Caret caret : carets) {
    originalOffsets.add(caret.getOffset());
  }
  caretModel.removeSecondaryCarets();
  int newOffset=0;
  for (  final int originalOffset : originalOffsets) {
    final int realOffsetBeforeCompletion=originalOffset + newOffset;
    caretModel.moveToOffset(realOffsetBeforeCompletion);
    completeBasic();
    newOffset+=(getCaretOffset() - realOffsetBeforeCompletion);
  }
}
