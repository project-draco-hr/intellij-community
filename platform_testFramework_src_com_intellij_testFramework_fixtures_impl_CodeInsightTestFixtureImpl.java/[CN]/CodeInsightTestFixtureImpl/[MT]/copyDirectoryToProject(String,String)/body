{
  final String testDataPath=getTestDataPath();
  final File fromFile=new File(testDataPath + "/" + sourceFilePath);
  if (myTempDirFixture instanceof LightTempDirTestFixtureImpl) {
    return myTempDirFixture.copyAll(fromFile.getPath(),targetPath);
  }
  final File targetFile=new File(getTempDirPath() + "/" + targetPath);
  try {
    FileUtil.copyDir(fromFile,targetFile);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  final VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(targetFile);
  Assert.assertNotNull(file);
  file.refresh(false,true);
  return file;
}
