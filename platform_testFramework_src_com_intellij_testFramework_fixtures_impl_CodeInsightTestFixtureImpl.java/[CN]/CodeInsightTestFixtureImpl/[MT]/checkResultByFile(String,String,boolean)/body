{
  assertInitialized();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      final String path=filePath.replace(File.separatorChar,'/');
      final VirtualFile copy=findFileInTempDir(path);
      if (copy == null) {
        throw new IllegalArgumentException("could not find results file " + path);
      }
      final PsiFile psiFile=myPsiManager.findFile(copy);
      Assert.assertNotNull(copy.getPath(),psiFile);
      try {
        checkResultByFile(expectedFile,psiFile,ignoreTrailingWhitespaces);
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
}
