{
  final LookupImpl lookup=getLookup();
  Assert.assertNotNull("No lookup is shown",lookup);
  final JList list=lookup.getList();
  List<String> strings=getLookupElementStrings();
  Assert.assertNotNull(strings);
  final List<String> actual=strings.subList(0,Math.min(expected.length,strings.size()));
  if (!actual.equals(Arrays.asList(expected))) {
    UsefulTestCase.assertOrderedEquals(DumpLookupElementWeights.getLookupElementWeights(lookup),expected);
  }
  if (selected != list.getSelectedIndex()) {
    System.out.println(DumpLookupElementWeights.getLookupElementWeights(lookup));
  }
  Assert.assertEquals(selected,list.getSelectedIndex());
}
