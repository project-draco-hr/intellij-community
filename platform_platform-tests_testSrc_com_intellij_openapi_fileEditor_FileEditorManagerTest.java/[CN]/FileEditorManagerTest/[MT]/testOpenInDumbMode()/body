{
  PlatformTestUtil.registerExtension(FileEditorProvider.EP_FILE_EDITOR_PROVIDER,new MyFileEditorProvider(),getTestRootDisposable());
  PlatformTestUtil.registerExtension(FileEditorProvider.EP_FILE_EDITOR_PROVIDER,new DumbAwareProvider(),getTestRootDisposable());
  try {
    DumbServiceImpl.getInstance(getProject()).setDumb(true);
    VirtualFile file=getFile("/src/foo.bar");
    assertEquals(1,myManager.openFile(file,false).length);
    DumbServiceImpl.getInstance(getProject()).setDumb(false);
    assertEquals(2,myManager.getAllEditors(file).length);
  }
  finally {
    DumbServiceImpl.getInstance(getProject()).setDumb(false);
  }
}
