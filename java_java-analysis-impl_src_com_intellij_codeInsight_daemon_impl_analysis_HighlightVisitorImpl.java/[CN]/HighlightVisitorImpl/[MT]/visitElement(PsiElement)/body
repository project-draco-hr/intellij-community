{
  if (myRefCountHolder != null && myFile instanceof ServerPageFile) {
    try {
      for (      PsiReference reference : element.getReferences()) {
        if (reference instanceof PsiJavaReference) {
          final PsiJavaReference psiJavaReference=(PsiJavaReference)reference;
          myRefCountHolder.registerReference(psiJavaReference,psiJavaReference.advancedResolve(false));
        }
      }
    }
 catch (    IndexNotReadyException ignored) {
    }
  }
  if (element.getNode().getElementType() == TokenType.BAD_CHARACTER) {
    String message=String.format("Illegal character: \\u%04X",(int)element.textToCharArray()[0]);
    myHolder.add(HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(element).descriptionAndTooltip(message).create());
  }
}
