{
  Element element=new Element("x");
  if (!myMapping.isEmpty()) {
    List<VirtualFile> files=new ArrayList<VirtualFile>(myMapping.keySet());
    ContainerUtil.quickSort(files,new Comparator<VirtualFile>(){
      @Override public int compare(      @NotNull final VirtualFile o1,      @NotNull final VirtualFile o2){
        return o1.getPath().compareTo(o2.getPath());
      }
    }
);
    for (    VirtualFile file : files) {
      Charset charset=myMapping.get(file);
      Element child=new Element("file");
      element.addContent(child);
      child.setAttribute("url",file.getUrl());
      child.setAttribute("charset",charset.name());
    }
  }
  if (myProjectCharset != null) {
    Element child=new Element("file");
    element.addContent(child);
    child.setAttribute("url",PROJECT_URL);
    child.setAttribute("charset",myProjectCharset.name());
  }
  if (myOldUTFGuessing != null) {
    element.setAttribute("useUTFGuessing",myOldUTFGuessing);
  }
  if (myNative2AsciiForPropertiesFiles || myNative2AsciiForPropertiesFilesWasSpecified) {
    element.setAttribute("native2AsciiForPropertiesFiles",Boolean.toString(myNative2AsciiForPropertiesFiles));
  }
  if (myDefaultCharsetForPropertiesFiles != null) {
    element.setAttribute("defaultCharsetForPropertiesFiles",myDefaultCharsetForPropertiesFiles.name());
  }
  return element;
}
