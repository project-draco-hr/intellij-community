{
  if (myCourse == null) {
    return null;
  }
  VirtualFile taskDir=file.getParent();
  if (taskDir != null) {
    String taskDirName=taskDir.getName();
    if (taskDirName.contains(Task.TASK_DIR)) {
      VirtualFile lessonDir=taskDir.getParent();
      if (lessonDir != null) {
        String lessonDirName=lessonDir.getName();
        int lessonIndex=StudyUtils.getIndex(lessonDirName,Lesson.LESSON_DIR);
        List<Lesson> lessons=myCourse.getLessons();
        if (!StudyUtils.indexIsValid(lessonIndex,lessons)) {
          return null;
        }
        Lesson lesson=lessons.get(lessonIndex);
        int taskIndex=StudyUtils.getIndex(taskDirName,Task.TASK_DIR);
        List<Task> tasks=lesson.getTaskList();
        if (!StudyUtils.indexIsValid(taskIndex,tasks)) {
          return null;
        }
        Task task=tasks.get(taskIndex);
        return task.getFile(file.getName());
      }
    }
  }
  return null;
}
