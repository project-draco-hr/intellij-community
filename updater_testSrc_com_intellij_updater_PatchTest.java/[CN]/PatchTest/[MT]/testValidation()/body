{
  Patch patch=createPatch();
  FileUtil.writeToFile(new File(myOlderDir,"bin/idea.bat"),"changed");
  FileUtil.createDirectory(new File(myOlderDir,"extraDir"));
  FileUtil.writeToFile(new File(myOlderDir,"extraDir/extraFile.txt"),"");
  FileUtil.createDirectory(new File(myOlderDir,"newDir"));
  FileUtil.writeToFile(new File(myOlderDir,"newDir/newFile.txt"),"");
  FileUtil.writeToFile(new File(myOlderDir,"Readme.txt"),"changed");
  FileUtil.writeToFile(new File(myOlderDir,"lib/annotations.jar"),"changed");
  FileUtil.delete(new File(myOlderDir,"lib/bootstrap.jar"));
  assertThat(sortResults(patch.validate(myOlderDir,TEST_UI))).containsExactly(new ValidationResult(ValidationResult.Kind.CONFLICT,"bin/idea.bat",ValidationResult.Action.DELETE,ValidationResult.MODIFIED_MESSAGE,ValidationResult.Option.DELETE,ValidationResult.Option.KEEP),new ValidationResult(ValidationResult.Kind.CONFLICT,"newDir/",ValidationResult.Action.CREATE,ValidationResult.ALREADY_EXISTS_MESSAGE,ValidationResult.Option.REPLACE,ValidationResult.Option.KEEP),new ValidationResult(ValidationResult.Kind.CONFLICT,"newDir/newFile.txt",ValidationResult.Action.CREATE,ValidationResult.ALREADY_EXISTS_MESSAGE,ValidationResult.Option.REPLACE,ValidationResult.Option.KEEP),new ValidationResult(ValidationResult.Kind.ERROR,"Readme.txt",ValidationResult.Action.UPDATE,ValidationResult.MODIFIED_MESSAGE,ValidationResult.Option.IGNORE),new ValidationResult(ValidationResult.Kind.ERROR,"lib/annotations.jar",ValidationResult.Action.UPDATE,ValidationResult.MODIFIED_MESSAGE,ValidationResult.Option.IGNORE),new ValidationResult(ValidationResult.Kind.ERROR,"lib/bootstrap.jar",ValidationResult.Action.UPDATE,ValidationResult.ABSENT_MESSAGE,ValidationResult.Option.IGNORE));
}
