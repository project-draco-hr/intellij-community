{
  File f=new File(myOlderDir,"Readme.txt");
  FileOutputStream s=new FileOutputStream(f,true);
  try {
    FileLock lock=s.getChannel().lock();
    try {
      List<ValidationResult> result=myPatch.validate(myOlderDir,TEST_UI);
      assertEquals(new HashSet<ValidationResult>(Arrays.asList(new ValidationResult(ValidationResult.Kind.ERROR,"Readme.txt",ValidationResult.Action.UPDATE,ValidationResult.ACCESS_DENIED_MESSAGE,ValidationResult.Option.IGNORE))),new HashSet<ValidationResult>(result));
    }
  finally {
      lock.release();
    }
  }
  finally {
    s.close();
  }
}
