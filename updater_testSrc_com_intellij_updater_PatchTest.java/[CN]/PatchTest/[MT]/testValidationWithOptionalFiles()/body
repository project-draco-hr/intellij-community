{
  FileUtil.writeToFile(new File(myOlderDir,"lib/annotations.jar"),"changed".getBytes());
  assertEquals(new HashSet<ValidationResult>(Arrays.asList(new ValidationResult(ValidationResult.Kind.ERROR,"lib/annotations.jar",ValidationResult.Action.UPDATE,ValidationResult.MODIFIED_MESSAGE,ValidationResult.Option.IGNORE))),new HashSet<ValidationResult>(myPatch.validate(myOlderDir,TEST_UI)));
  PatchSpec spec=new PatchSpec().setOldFolder(myOlderDir.getAbsolutePath()).setNewFolder(myNewerDir.getAbsolutePath()).setOptionalFiles(Arrays.asList("lib/annotations.jar"));
  myPatch=new Patch(spec,TEST_UI);
  FileUtil.delete(new File(myOlderDir,"lib/annotations.jar"));
  assertEquals(Collections.<ValidationResult>emptyList(),myPatch.validate(myOlderDir,TEST_UI));
}
