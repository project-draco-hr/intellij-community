{
  Patch patch1=createPatch();
  FileUtil.writeToFile(new File(myOlderDir,"lib/annotations.jar"),"changed");
  assertThat(patch1.validate(myOlderDir,TEST_UI)).containsOnly(new ValidationResult(ValidationResult.Kind.ERROR,"lib/annotations.jar",ValidationResult.Action.UPDATE,ValidationResult.MODIFIED_MESSAGE,ValidationResult.Option.IGNORE));
  PatchSpec spec=new PatchSpec().setOldFolder(myOlderDir.getAbsolutePath()).setNewFolder(myNewerDir.getAbsolutePath()).setOptionalFiles(Collections.singletonList("lib/annotations.jar"));
  Patch patch2=new Patch(spec,TEST_UI);
  FileUtil.delete(new File(myOlderDir,"lib/annotations.jar"));
  assertThat(patch2.validate(myOlderDir,TEST_UI)).isEmpty();
}
