{
  File f=getTempFile("file");
  try {
    FileOutputStream out=new FileOutputStream(f);
    try {
      myPatch.write(out);
    }
  finally {
      out.close();
    }
    FileInputStream in=new FileInputStream(f);
    try {
      assertEquals(myPatch.getActions(),new Patch(in).getActions());
    }
  finally {
      in.close();
    }
  }
  finally {
    f.delete();
  }
}
