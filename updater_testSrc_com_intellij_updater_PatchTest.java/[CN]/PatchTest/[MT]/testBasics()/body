{
  Patch patch=createPatch();
  assertThat(patch.getActions()).containsOnly(new CreateAction(patch,"newDir/newFile.txt"),new UpdateAction(patch,"Readme.txt",CHECKSUMS.README_TXT),new UpdateZipAction(patch,"lib/annotations.jar",Collections.singletonList("org/jetbrains/annotations/NewClass.class"),Collections.singletonList("org/jetbrains/annotations/Nullable.class"),Collections.singletonList("org/jetbrains/annotations/TestOnly.class"),CHECKSUMS.ANNOTATIONS_JAR),new UpdateZipAction(patch,"lib/bootstrap.jar",Collections.emptyList(),Collections.emptyList(),Collections.singletonList("com/intellij/ide/ClassloaderUtil.class"),CHECKSUMS.BOOTSTRAP_JAR),new DeleteAction(patch,"bin/idea.bat",CHECKSUMS.IDEA_BAT));
}
