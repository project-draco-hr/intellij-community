{
  VirtualFile file=getFile("/foo.txt");
  myManager.openFile(file,false);
  DockManager dockManager=DockManager.getInstance(getProject());
  assertEquals(1,dockManager.getContainers().size());
  myManager.initDockableContentFactory();
  myManager.openFileInNewWindow(file);
  assertEquals(2,dockManager.getContainers().size());
  Element context=new Element("context");
  WorkingContextManager contextManager=WorkingContextManager.getInstance(getProject());
  contextManager.saveContext(context);
  assertEquals(2,context.getChild("editors").getChildren().size());
  assertEquals(2,EditorFactory.getInstance().getAllEditors().length);
  contextManager.clearContext();
  assertEquals(1,dockManager.getContainers().size());
  assertEquals(0,EditorFactory.getInstance().getAllEditors().length);
}
