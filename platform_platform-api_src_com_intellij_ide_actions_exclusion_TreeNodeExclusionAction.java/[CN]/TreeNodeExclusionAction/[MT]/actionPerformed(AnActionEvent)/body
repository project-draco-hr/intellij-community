{
  final JTree tree=(JTree)PlatformDataKeys.CONTEXT_COMPONENT.getData(e.getDataContext());
  LOG.assertTrue(tree != null);
  final TreePath[] paths=tree.getSelectionPaths();
  LOG.assertTrue(paths != null);
  final ExclusionHandler<T> exclusionProcessor=ExclusionHandler.EXCLUSION_HANDLER.getData(e.getDataContext());
  LOG.assertTrue(exclusionProcessor != null);
  for (  TreePath path : paths) {
    final T node=(T)path.getLastPathComponent();
    if (Boolean.valueOf(myIsExclude) != exclusionProcessor.isNodeExcluded(node)) {
      if (myIsExclude) {
        exclusionProcessor.excludeNode(node);
      }
 else {
        exclusionProcessor.includeNode(node);
      }
    }
  }
  exclusionProcessor.onDone(myIsExclude);
}
