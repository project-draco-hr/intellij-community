{
  final Rectangle visibleArea=editor.getScrollingModel().getVisibleArea();
  final Point left=editor.logicalPositionToXY(editor.offsetToLogicalPosition(start));
  final int documentLength=editor.getDocument().getTextLength();
  if (end >= documentLength)   end=documentLength;
  final Point right=editor.logicalPositionToXY(editor.offsetToLogicalPosition(end));
  final Point bestPoint=new Point(left.x + (right.x - left.x) / 2,right.y + editor.getLineHeight() / 2);
  if (visibleArea.x > bestPoint.x) {
    bestPoint.x=visibleArea.x;
  }
 else   if (visibleArea.x + visibleArea.width < bestPoint.x) {
    bestPoint.x=visibleArea.x + visibleArea.width - 5;
  }
  final Point p=SwingUtilities.convertPoint(editor.getContentComponent(),bestPoint,editor.getComponent().getRootPane().getLayeredPane());
  final HintHint hint=new HintHint(editor,bestPoint).setAwtTooltip(true).setHighlighterType(true).setShowImmediately(true).setCalloutShift(editor.getLineHeight() / 2 - 1);
  TooltipController.getInstance().showTooltip(editor,p,text,visibleArea.width,false,SS_INFO_TOOLTIP_GROUP,hint);
}
