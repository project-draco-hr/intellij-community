{
  initRepository("foo");
  String defaultBranchName=getDefaultBranchName();
  LocalTaskImpl task=myTaskManager.createLocalTask("foo");
  OpenTaskDialog dialog=new OpenTaskDialog(getProject(),task);
  Disposer.register(myTestRootDisposable,dialog.getDisposable());
  dialog.createTask();
  assertEquals("foo",myTaskManager.getActiveTask().getSummary());
  List<BranchInfo> branches=task.getBranches(true);
  assertEquals(1,branches.size());
  assertEquals(defaultBranchName,branches.get(0).name);
  branches=task.getBranches(false);
  assertEquals(1,branches.size());
  assertEquals("foo",branches.get(0).name);
}
