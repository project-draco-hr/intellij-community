{
  String text="if a:\n pass";
  PyIfStatement ifStatement=PyElementGenerator.getInstance(project).createFromText(LanguageLevel.getDefault(),PyIfStatement.class,text);
  final PyExpression condition=ifStatement.getIfPart().getCondition();
  if (condition != null) {
    condition.replace(expression);
  }
  ifStatement=(PyIfStatement)CodeStyleManager.getInstance(project).reformat(ifStatement);
  ifStatement=(PyIfStatement)expression.getParent().replace(ifStatement);
  PsiDocumentManager.getInstance(project).doPostponedOperationsAndUnblockDocument(editor.getDocument());
  PyStatementList statementList=ifStatement.getIfPart().getStatementList();
  PyStatement[] statements=statementList.getStatements();
  final TextRange range=statements[0].getTextRange();
  editor.getDocument().deleteString(range.getStartOffset(),range.getEndOffset());
  return TextRange.from(range.getStartOffset(),0);
}
