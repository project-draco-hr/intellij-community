{
  LinkedHashSet<Language> set=new LinkedHashSet<>(4);
  Language injectedLanguage=(Language)getData(injectedId(LANGUAGE.getName()),editor,caret);
  addIfNotNull(set,injectedLanguage);
  Language language=(Language)getData(LANGUAGE.getName(),editor,caret);
  addIfNotNull(set,language);
  PsiFile psiFile=(PsiFile)getData(PSI_FILE.getName(),editor,caret);
  if (psiFile != null) {
    addIfNotNull(set,psiFile.getViewProvider().getBaseLanguage());
  }
  return set.toArray(new Language[set.size()]);
}
