{
  if (params.host != null) {
    try {
      final Properties props=new Properties();
      props.setProperty(HOST,params.host);
      props.setProperty(PORT,String.valueOf(params.port));
      if (params.login != null) {
        props.setProperty(LOGIN,params.login);
        props.setProperty(PASSWORD,new String(params.password));
      }
      final ByteArrayOutputStream out=new ByteArrayOutputStream();
      props.store(out,"Proxy Configuration");
      out.close();
      FileUtil.writeToFile(CONFIG_FILE,encrypt(out.toByteArray()));
      return true;
    }
 catch (    Exception ignored) {
    }
  }
 else {
    FileUtil.delete(CONFIG_FILE);
  }
  return false;
}
