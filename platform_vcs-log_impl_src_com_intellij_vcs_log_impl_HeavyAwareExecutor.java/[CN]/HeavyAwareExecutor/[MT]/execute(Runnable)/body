{
  SingleAlarm alarm=new SingleAlarm(new Runnable(){
    @Override public void run(){
      if (!HeavyProcessLatch.INSTANCE.isRunning()) {
        if (myIsExecuted.compareAndSet(false,true)) {
          Disposer.dispose(HeavyAwareExecutor.this);
          command.run();
        }
      }
    }
  }
,DELAY_MILLIS,Alarm.ThreadToUse.SWING_THREAD,this);
  HeavyProcessLatch.INSTANCE.addListener(alarm,new HeavyProcessLatch.HeavyProcessListener(){
    @Override public void processStarted(){
      alarm.cancel();
    }
    @Override public void processFinished(){
      if (!HeavyProcessLatch.INSTANCE.isRunning()) {
        alarm.request();
      }
    }
  }
);
  if (!HeavyProcessLatch.INSTANCE.isRunning()) {
    alarm.request();
  }
}
