{
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      try {
        LightPlatformTestCase.initApplication();
      }
 catch (      RuntimeException e) {
        throw e;
      }
catch (      Exception e) {
        throw new RuntimeException(e);
      }
      PlatformTestUtil.cleanupAllProjects();
      ApplicationImpl application=(ApplicationImpl)ApplicationManager.getApplication();
      System.out.println(application.writeActionStatistics());
      System.out.println(ActionUtil.ACTION_UPDATE_PAUSES.statistics());
      System.out.println(((AppScheduledExecutorService)AppExecutorUtil.getAppScheduledExecutorService()).statistics());
      System.out.println("ProcessIOExecutorService threads created: " + ((ProcessIOExecutorService)ProcessIOExecutorService.INSTANCE).getThreadCounter());
      application.setDisposeInProgress(true);
      LightPlatformTestCase.disposeApplication();
      UIUtil.dispatchAllInvocationEvents();
    }
  }
);
  try {
    LeakHunter.checkProjectLeak();
    Disposer.assertIsEmpty(true);
  }
 catch (  AssertionError|Exception e) {
    captureMemorySnapshot();
    throw e;
  }
}
