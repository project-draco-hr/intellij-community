{
  VirtualFile dir=createChildDirectory(myRoot,"dir");
  VirtualFile f=createChildData(dir,"foo.txt");
  int modificationStamp1=-1;
  setBinaryContent(f,new byte[]{1},modificationStamp1,1000,this);
  int modificationStamp=-1;
  setBinaryContent(f,new byte[]{2},modificationStamp,2000,this);
  delete(dir);
  revertChange(1);
  dir=myRoot.findChild("dir");
  assertNotNull(dir);
  f=dir.findChild("foo.txt");
  assertNotNull(f);
  assertEquals(1,f.contentsToByteArray()[0]);
  assertEquals(1000,f.getTimeStamp());
}
