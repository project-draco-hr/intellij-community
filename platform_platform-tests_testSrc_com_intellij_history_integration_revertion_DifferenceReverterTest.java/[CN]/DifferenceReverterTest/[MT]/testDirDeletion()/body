{
  VirtualFile dir=createChildDirectory(myRoot,"dir");
  VirtualFile subdir=createChildDirectory(dir,"subdir");
  VirtualFile f=createChildData(subdir,"foo.txt");
  int modificationStamp=-1;
  setBinaryContent(f,new byte[]{123},modificationStamp,4000,this);
  delete(dir);
  revertLastChange();
  dir=myRoot.findChild("dir");
  subdir=dir.findChild("subdir");
  f=subdir.findChild("foo.txt");
  assertNotNull(f);
  assertEquals(123,f.contentsToByteArray()[0]);
  assertEquals(4000,f.getTimeStamp());
}
