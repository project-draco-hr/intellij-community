{
  VirtualFile f=createChildData(myRoot,"foo.txt");
  int modificationStamp1=-1;
  setBinaryContent(f,new byte[]{1},modificationStamp1,1000,this);
  getVcs().beginChangeSet();
  rename(f,"bar.txt");
  int modificationStamp=-1;
  setBinaryContent(f,new byte[]{2},modificationStamp,2000,this);
  getVcs().endChangeSet(null);
  createChildDirectory(myRoot,"foo.txt");
  revertChange(1,0,1);
  assertNull(myRoot.findChild("bar.txt"));
  f=myRoot.findChild("foo.txt");
  assertNotNull(f);
  assertFalse(f.isDirectory());
  assertEquals(1,f.contentsToByteArray()[0]);
  assertEquals(1000,f.getTimeStamp());
}
