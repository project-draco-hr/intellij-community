{
  final RunManager runManager=RunManager.getInstance(project);
  final RunnerAndConfigurationSettings selectedConfiguration=runManager.getSelectedConfiguration();
  if (selectedConfiguration != null) {
    final RunConfiguration configuration=selectedConfiguration.getConfiguration();
    if (configuration instanceof AbstractPythonRunConfiguration) {
      AbstractPythonRunConfiguration runConfiguration=(AbstractPythonRunConfiguration)configuration;
      List<String> roots=Lists.newArrayList();
      for (      VirtualFile contentRoot : runConfiguration.getSdk().getSdkModificator().getRoots(OrderRootType.CLASSES)) {
        roots.add(contentRoot.getPath());
      }
      environment.put(LIBRARY_ROOTS,StringUtil.join(roots,File.pathSeparator));
    }
  }
}
