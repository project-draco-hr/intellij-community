{
  final RunManager runManager=RunManager.getInstance(project);
  final RunnerAndConfigurationSettings selectedConfiguration=runManager.getSelectedConfiguration();
  if (selectedConfiguration != null) {
    final RunConfiguration configuration=selectedConfiguration.getConfiguration();
    if (configuration instanceof AbstractPythonRunConfiguration) {
      AbstractPythonRunConfiguration runConfiguration=(AbstractPythonRunConfiguration)configuration;
      final Sdk sdk=runConfiguration.getSdk();
      if (sdk != null) {
        List<String> roots=Lists.newArrayList();
        for (        VirtualFile contentRoot : sdk.getSdkModificator().getRoots(OrderRootType.CLASSES)) {
          roots.add(contentRoot.getPath());
        }
        commandLine.getEnvironment().put(LIBRARY_ROOTS,StringUtil.join(roots,File.pathSeparator));
      }
    }
  }
}
