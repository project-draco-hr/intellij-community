{
  ExecutionConsole console=result.getExecutionConsole();
  ProcessHandler processHandler=result.getProcessHandler();
  if (console instanceof PythonDebugLanguageConsoleView) {
    PythonDebugConsoleView pythonDebugConsoleView=((PythonDebugLanguageConsoleView)console).getPydevConsoleView();
    ConsoleCommunication consoleCommunication=new PythonDebugConsoleCommunication(project,debugProcess,((PythonDebugLanguageConsoleView)console).getTextConsole());
    pythonDebugConsoleView.setConsoleCommunication(consoleCommunication);
    PydevDebugConsoleExecuteActionHandler consoleExecuteActionHandler=new PydevDebugConsoleExecuteActionHandler(pythonDebugConsoleView,processHandler,consoleCommunication);
    pythonDebugConsoleView.setExecutionHandler(consoleExecuteActionHandler);
    debugProcess.getSession().addSessionListener(consoleExecuteActionHandler);
    new ConsoleHistoryController("py","",pythonDebugConsoleView.getConsole(),consoleExecuteActionHandler.getConsoleHistoryModel()).install();
    final AnAction execAction=AbstractConsoleRunnerWithHistory.createConsoleExecAction(pythonDebugConsoleView.getConsole(),processHandler,consoleExecuteActionHandler);
    execAction.registerCustomShortcutSet(execAction.getShortcutSet(),pythonDebugConsoleView.getComponent());
  }
}
