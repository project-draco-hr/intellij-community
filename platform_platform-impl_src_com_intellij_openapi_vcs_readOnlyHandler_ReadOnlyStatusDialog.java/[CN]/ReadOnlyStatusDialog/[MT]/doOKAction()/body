{
  for (  FileInfo info : myFiles) {
    if (myUsingFileSystemRadioButton.isSelected()) {
      info.getHandleType().selectFirst();
    }
 else     if (info.hasVersionControl()) {
      info.getHandleType().select(info.getHandleType().get(1));
    }
  }
  List<FileInfo> files=new ArrayList<FileInfo>();
  Collections.addAll(files,myFiles);
  String changelist=(String)myChangelist.getSelectedItem();
  ReadonlyStatusHandlerImpl.processFiles(files,changelist);
  if (files.isEmpty()) {
    super.doOKAction();
  }
 else {
    String list=StringUtil.join(files,new Function<FileInfo,String>(){
      @Override public String fun(      FileInfo info){
        return info.getFile().getPresentableUrl();
      }
    }
,"<br>");
    String message=VcsBundle.message("handle.ro.file.status.failed",list);
    Messages.showErrorDialog(getRootPane(),message,VcsBundle.message("dialog.title.clear.read.only.file.status"));
    myFiles=files.toArray(new FileInfo[files.size()]);
    initFileList();
  }
}
