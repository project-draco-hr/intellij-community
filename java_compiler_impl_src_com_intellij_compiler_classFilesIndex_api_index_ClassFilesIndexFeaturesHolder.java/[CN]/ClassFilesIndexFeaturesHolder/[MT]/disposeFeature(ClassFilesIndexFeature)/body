{
  for (  final ClassFilesIndexConfigure requiredConfigure : featureToRemove.getRequiredIndicesConfigures()) {
    boolean needClose=true;
    for (    final ClassFilesIndexFeature enabledFeature : myEnabledFeatures.keySet()) {
      if (!enabledFeature.equals(featureToRemove) && enabledFeature.getRequiredIndicesConfigures().contains(requiredConfigure)) {
        needClose=false;
        break;
      }
    }
    if (needClose) {
      final ClassFilesIndexReaderBase readerToClose=myEnabledIndexReaders.remove(requiredConfigure);
      readerToClose.close();
    }
  }
  myEnabledFeatures.remove(featureToRemove);
}
