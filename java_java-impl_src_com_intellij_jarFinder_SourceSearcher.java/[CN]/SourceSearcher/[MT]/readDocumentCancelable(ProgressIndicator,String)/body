{
  return HttpRequests.request(url).accept("application/xml").connect(new HttpRequests.RequestProcessor<Document>(){
    @Override public Document process(    @NotNull HttpRequests.Request request) throws IOException {
      InputStream inputStream=request.getInputStream();
      try {
        return JDOMUtil.loadDocument(new ProgressStream(0,request.getConnection().getContentLength(),inputStream,indicator));
      }
 catch (      JDOMException e) {
        throw new IOException(e);
      }
    }
  }
);
}
