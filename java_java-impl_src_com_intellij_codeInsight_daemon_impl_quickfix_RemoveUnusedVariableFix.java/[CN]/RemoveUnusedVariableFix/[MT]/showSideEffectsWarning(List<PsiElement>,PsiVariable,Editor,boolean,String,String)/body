{
  if (sideEffects.isEmpty())   return RemoveUnusedVariableUtil.RemoveMode.DELETE_ALL;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return canCopeWithSideEffects ? RemoveUnusedVariableUtil.RemoveMode.MAKE_STATEMENT : RemoveUnusedVariableUtil.RemoveMode.DELETE_ALL;
  }
  Project project=editor.getProject();
  HighlightManager highlightManager=HighlightManager.getInstance(project);
  PsiElement[] elements=PsiUtilCore.toPsiElementArray(sideEffects);
  EditorColorsManager manager=EditorColorsManager.getInstance();
  TextAttributes attributes=manager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
  highlightManager.addOccurrenceHighlights(editor,elements,attributes,true,null);
  SideEffectWarningDialog dialog=new SideEffectWarningDialog(project,false,variable,beforeText,afterText,canCopeWithSideEffects);
  dialog.show();
  int code=dialog.getExitCode();
  return RemoveUnusedVariableUtil.RemoveMode.values()[code];
}
