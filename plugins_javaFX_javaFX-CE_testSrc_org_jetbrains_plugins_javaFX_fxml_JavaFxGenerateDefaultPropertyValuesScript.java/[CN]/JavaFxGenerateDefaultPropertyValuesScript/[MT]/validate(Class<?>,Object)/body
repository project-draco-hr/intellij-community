{
  try {
    if (aCls.isPrimitive()) {
      aCls=ourToBoxed.get(aCls);
      Method valueOf=aCls.getDeclaredMethod("valueOf",String.class);
      return valueOf.invoke(null,String.valueOf(val));
    }
    if (Number.class.isAssignableFrom(aCls) || Boolean.class.isAssignableFrom(aCls) || Character.class.isAssignableFrom(aCls)) {
      Method valueOf=aCls.getDeclaredMethod("valueOf",String.class);
      return valueOf.invoke(null,String.valueOf(val));
    }
    if (CharSequence.class.isAssignableFrom(aCls)) {
      return val;
    }
    if (aCls.isEnum()) {
      Method valueOf=aCls.getDeclaredMethod("valueOf",String.class);
      return valueOf.invoke(null,String.valueOf(val));
    }
    throw new IllegalStateException("Cannot cast " + val + " to unsupported class "+ aCls);
  }
 catch (  NoSuchMethodException|InvocationTargetException|IllegalAccessException e) {
    throw new IllegalStateException("Cannot cast " + val + " to "+ aCls,e);
  }
}
