{
  if (foldingChangeStartOffset <= foldingChangeEndOffset) {
    invalidateRange(foldingChangeStartOffset,foldingChangeEndOffset);
  }
  foldingChangeStartOffset=Integer.MAX_VALUE;
  foldingChangeEndOffset=Integer.MIN_VALUE;
  for (  TextRange range : myDeferredRanges) {
    onTextLayoutPerformed(range.getStartOffset(),range.getEndOffset());
  }
  myDeferredRanges.clear();
}
