{
  if (target_dir != null) {
    PsiFile initPy=target_dir.findFile(PyNames.INIT_DOT_PY);
    if (initPy instanceof PyFile) {
      PyModuleType moduleType=new PyModuleType((PyFile)initPy);
      ProcessingContext context=new ProcessingContext();
      context.put(PyType.CTX_NAMES,myNamesAlready);
      Object[] completionVariants=moduleType.getCompletionVariants("",(PyExpression)getElement(),context);
      if (insertHandler != null) {
        replaceInsertHandler(completionVariants,insertHandler);
      }
      myObjects.addAll(Arrays.asList(completionVariants));
    }
 else {
      myObjects.addAll(PyModuleType.getSubmoduleVariants(target_dir,myElement,myNamesAlready));
    }
  }
}
