{
  Map<String,ResourceBundle> map=ourCache.get(loader);
  ResourceBundle result=map.get(pathToBundle);
  if (result == null) {
    try {
      ResourceBundle.Control control=ResourceBundle.Control.getControl(ResourceBundle.Control.FORMAT_PROPERTIES);
      result=ResourceBundle.getBundle(pathToBundle,Locale.getDefault(),loader,control);
    }
 catch (    MissingResourceException e) {
      LOG.info("Cannot load resource bundle from *.properties file, falling back to slow class loading: " + pathToBundle);
      ResourceBundle.clearCache(loader);
      result=ResourceBundle.getBundle(pathToBundle,Locale.getDefault(),loader);
    }
    map.put(pathToBundle,result);
  }
  return result;
}
