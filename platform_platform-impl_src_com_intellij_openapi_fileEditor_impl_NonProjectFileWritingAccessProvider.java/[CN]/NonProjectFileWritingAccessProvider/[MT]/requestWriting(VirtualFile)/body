{
  if (allAccessAllowed(myProject))   return Collections.emptyList();
  List<VirtualFile> deniedFiles=new SmartList<VirtualFile>();
  Map<VirtualFile,AccessStatus> statuses=getRegisteredFiles(myProject);
  for (  VirtualFile each : files) {
    if (statuses.get(each) == AccessStatus.ALLOWED)     continue;
    if (!(each.getFileSystem() instanceof LocalFileSystem))     continue;
    if (isProjectFile(each)) {
      if (statuses.remove(each) != null) {
        EditorNotifications.getInstance(myProject).updateNotifications(each);
      }
      continue;
    }
    statuses.put(each,AccessStatus.REQUESTED);
    deniedFiles.add(each);
    EditorNotifications.getInstance(myProject).updateNotifications(each);
  }
  return deniedFiles;
}
