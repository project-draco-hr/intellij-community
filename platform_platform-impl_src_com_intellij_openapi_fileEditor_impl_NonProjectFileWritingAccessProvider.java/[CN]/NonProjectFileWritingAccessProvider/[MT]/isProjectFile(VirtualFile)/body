{
  if (myProject instanceof ProjectEx) {
    IProjectStore store=((ProjectEx)myProject).getStateStore();
    if (store.getStorageScheme() == StorageScheme.DIRECTORY_BASED) {
      VirtualFile baseDir=myProject.getBaseDir();
      VirtualFile dotIdea=baseDir == null ? null : baseDir.findChild(Project.DIRECTORY_STORE_FOLDER);
      if (dotIdea != null && VfsUtilCore.isAncestor(dotIdea,file,false))       return true;
    }
    if (file.equals(store.getWorkspaceFile()) || file.equals(store.getProjectFile()))     return true;
  }
  return ProjectFileIndex.SERVICE.getInstance(myProject).isInContent(file);
}
