{
  final PsiMethodCallExpression methodCallExpression=PsiTreeUtil.getParentOfType(descriptor.getPsiElement(),PsiMethodCallExpression.class);
  if (methodCallExpression != null) {
    final PsiElement ofNullableExprName=((PsiMethodCallExpression)JavaPsiFacade.getElementFactory(project).createExpressionFromText("Optional." + myTargetMethodName + "(null)",null)).getMethodExpression();
    final PsiElement referenceNameElement=methodCallExpression.getMethodExpression().getReferenceNameElement();
    if (referenceNameElement != null) {
      final PsiElement ofNullableNameElement=((PsiReferenceExpression)ofNullableExprName).getReferenceNameElement();
      LOG.assertTrue(ofNullableNameElement != null);
      referenceNameElement.replace(ofNullableNameElement);
    }
    if (myClearArguments) {
      PsiExpressionList argList=methodCallExpression.getArgumentList();
      PsiExpression[] args=argList.getExpressions();
      if (args.length > 0) {
        argList.deleteChildRange(args[0],args[args.length - 1]);
      }
    }
  }
}
