{
  final String parent_dir=new File(binaryPath).getParent();
  List<String> commandLine=new ArrayList<String>();
  commandLine.add(binaryPath);
  commandLine.add(PythonHelpersLocator.getHelperPath(GENERATOR3));
  commandLine.add("-d");
  commandLine.add(getSkeletonsPath());
  if (assemblyRefs != null && !assemblyRefs.isEmpty()) {
    commandLine.add("-c");
    commandLine.add(StringUtil.join(assemblyRefs,";"));
  }
  if (ApplicationManagerEx.getApplicationEx().isInternal()) {
    commandLine.add("-x");
  }
  if (!StringUtil.isEmpty(extraSyspath)) {
    commandLine.add("-s");
    commandLine.add(extraSyspath);
  }
  commandLine.add(modname);
  if (modfilename != null) {
    commandLine.add(modfilename);
  }
  final List<String> envs=new ArrayList<String>(Arrays.asList(myEnvs));
  final String[] virtualEnvAdditionalEnv=PythonSdkType.getVirtualEnvAdditionalEnv(binaryPath);
  if (virtualEnvAdditionalEnv != null) {
    envs.addAll(Arrays.asList(virtualEnvAdditionalEnv));
  }
  return getProcessOutput(parent_dir,ArrayUtil.toStringArray(commandLine),envs.toArray(new String[envs.size()]),MINUTE * 10);
}
