{
  final String parent_dir=new File(binaryPath).getParent();
  List<String> commandLine=new ArrayList<String>();
  commandLine.add(binaryPath);
  commandLine.add(PythonHelpersLocator.getHelperPath(GENERATOR3));
  commandLine.add("-d");
  commandLine.add(getSkeletonsPath());
  if (assemblyRefs != null && !assemblyRefs.isEmpty()) {
    commandLine.add("-c");
    commandLine.add(StringUtil.join(assemblyRefs,";"));
  }
  if (ApplicationManagerEx.getApplicationEx().isInternal()) {
    commandLine.add("-x");
  }
  if (!StringUtil.isEmpty(extraSyspath)) {
    commandLine.add("-s");
    commandLine.add(extraSyspath);
  }
  commandLine.add(modname);
  if (modfilename != null) {
    commandLine.add(modfilename);
  }
  final Map<String,String> extraEnv=PythonSdkType.getVirtualEnvExtraEnv(binaryPath);
  final Map<String,String> env=extraEnv != null ? PySdkUtil.mergeEnvVariables(myEnv,extraEnv) : myEnv;
  return getProcessOutput(parent_dir,ArrayUtil.toStringArray(commandLine),env,MINUTE * 10);
}
