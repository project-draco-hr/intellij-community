{
  final HttpPost post=new HttpPost(EduStepicNames.STEPIC_API_URL + EduStepicNames.RECOMMENDATION_REACTIONS_URL);
  final String json=new Gson().toJson(new StepicWrappers.RecommendationReactionWrapper(new StepicWrappers.RecommendationReaction(reaction,user,lessonId)));
  post.setEntity(new StringEntity(json,ContentType.APPLICATION_JSON));
  final CloseableHttpClient client=getHttpClient(project);
  setHeaders(post,EduStepicNames.CONTENT_TYPE_APPL_JSON);
  setTimeout(post);
  try {
    final CloseableHttpResponse execute=client.execute(post);
    final int statusCode=execute.getStatusLine().getStatusCode();
    if (statusCode == HttpStatus.SC_CREATED) {
      return true;
    }
 else {
      if ((statusCode == HttpStatus.SC_BAD_REQUEST || statusCode == HttpStatus.SC_UNAUTHORIZED) && login(project)) {
        return postRecommendationReaction(project,lessonId,user,reaction);
      }
      final HttpEntity entity=execute.getEntity();
      final String entityString=EntityUtils.toString(entity);
      EntityUtils.consume(entity);
      LOG.warn("Stepic returned non-201 status code: " + statusCode + " "+ entityString);
      return false;
    }
  }
 catch (  IOException e) {
    LOG.warn(e.getMessage());
  }
  return false;
}
