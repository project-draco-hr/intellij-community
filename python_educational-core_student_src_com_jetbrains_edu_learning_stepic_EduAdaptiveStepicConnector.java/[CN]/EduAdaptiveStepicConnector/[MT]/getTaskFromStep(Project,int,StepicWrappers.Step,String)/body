{
  final Task task=new Task();
  task.setName(name);
  task.setStepicId(lessonID);
  task.setText(step.text);
  task.setStatus(StudyStatus.Unchecked);
  if (step.options.samples != null) {
    final StringBuilder builder=new StringBuilder();
    for (    List<String> sample : step.options.samples) {
      if (sample.size() == 2) {
        builder.append("<b>Sample Input:</b><br>");
        builder.append(StringUtil.replace(sample.get(0),"\n","<br>"));
        builder.append("<br>");
        builder.append("<b>Sample Output:</b><br>");
        builder.append(StringUtil.replace(sample.get(1),"\n","<br>"));
        builder.append("<br><br>");
      }
    }
    task.setText(task.getText() + "<br>" + builder.toString());
  }
  if (step.options.executionMemoryLimit != null && step.options.executionTimeLimit != null) {
    String builder="<b>Memory limit</b>: " + step.options.executionMemoryLimit + " Mb"+ "<br>"+ "<b>Time limit</b>: "+ step.options.executionTimeLimit+ "s"+ "<br><br>";
    task.setText(task.getText() + builder);
  }
  if (step.options.test != null) {
    for (    StepicWrappers.TestFileWrapper wrapper : step.options.test) {
      task.addTestsTexts(wrapper.name,wrapper.text);
    }
  }
 else {
    if (step.options.samples != null) {
      createTestFileFromSamples(task,step.options.samples);
    }
  }
  task.taskFiles=new HashMap<String,TaskFile>();
  if (step.options.files != null) {
    for (    TaskFile taskFile : step.options.files) {
      task.taskFiles.put(taskFile.name,taskFile);
    }
  }
 else {
    final TaskFile taskFile=new TaskFile();
    taskFile.name="code";
    final String templateForTask=getCodeTemplateForTask(step.options.codeTemplates,task,project);
    taskFile.text=templateForTask == null ? "# write your answer here \n" : templateForTask;
    task.taskFiles.put("code.py",taskFile);
  }
  return task;
}
