{
  Collection<E> result=new ArrayList<E>();
  for (  StreamProvider provider : getEnabledProviders()) {
    for (    String subPath : provider.listSubFiles(myFileSpec,myRoamingType)) {
      if (!subPath.equals(DELETED_XML)) {
        try {
          final Document subDocument=StorageUtil.loadDocument(provider.loadContent(getFileFullPath(subPath),myRoamingType));
          if (subDocument != null) {
            E scheme=readScheme(subDocument);
            boolean fileRenamed=false;
            T existing=findSchemeByName(scheme.getName());
            if (existing != null && existing instanceof ExternalizableScheme) {
              String currentFileName=((ExternalizableScheme)existing).getExternalInfo().getCurrentFileName();
              if (currentFileName != null && !currentFileName.equals(subPath)) {
                deleteServerFiles(subPath);
                subPath=currentFileName;
                fileRenamed=true;
              }
            }
            String fileName=checkFileNameIsFree(subPath,scheme.getName());
            if (!fileRenamed && !fileName.equals(subPath)) {
              deleteServerFiles(subPath);
            }
            if (scheme != null) {
              loadScheme(scheme,false,fileName);
              result.add(scheme);
            }
          }
        }
 catch (        Exception e) {
          LOG.info("Cannot load data from IDEAServer: " + e.getLocalizedMessage());
        }
      }
    }
  }
  return result;
}
