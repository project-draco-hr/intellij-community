{
  if (element.getName().equals("shared-scheme")) {
    String schemeName=element.getAttributeValue(NAME);
    String schemePath=element.getAttributeValue("original-scheme-path");
    Element sharedElement=myProvider != null && myProvider.isEnabled() ? loadElementOrNull(myProvider.loadContent(schemePath,myRoamingType)) : null;
    if (sharedElement == null) {
      Element localCopyElement=element.getChild("scheme-local-copy");
      return localCopyElement == null ? null : doReadScheme(localCopyElement.getChildren().get(0));
    }
 else {
      E result=readScheme(sharedElement);
      if (result != null) {
        renameScheme(result,schemeName);
      }
      return result;
    }
  }
 else   if (element.getName().equals("shared-scheme-original")) {
    E scheme=doReadScheme(element.getChildren().get(0));
    if (scheme == null) {
      return null;
    }
    renameScheme(scheme,element.getAttributeValue(NAME));
    return scheme;
  }
 else {
    return doReadScheme(element);
  }
}
