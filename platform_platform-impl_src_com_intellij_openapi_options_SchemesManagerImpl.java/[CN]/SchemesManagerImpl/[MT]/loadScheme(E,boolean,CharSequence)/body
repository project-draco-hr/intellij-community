{
  String fileNameWithoutExtension=createFileName(fileName);
  if (!forceAdd && myFilesToDelete.contains(fileNameWithoutExtension)) {
    return;
  }
  T existing=findSchemeByName(scheme.getName());
  if (existing != null) {
    if (!Comparing.equal(existing.getClass(),scheme.getClass())) {
      LOG.warn("'" + scheme.getName() + "' "+ existing.getClass().getSimpleName()+ " replaced with "+ scheme.getClass().getSimpleName());
    }
    mySchemes.remove(existing);
    if (existing instanceof ExternalizableScheme) {
      myProcessor.onSchemeDeleted((E)existing);
    }
  }
  addScheme((T)scheme);
  ExternalInfo info=getExternalInfo(scheme);
  info.setPreviouslySavedName(scheme.getName());
  info.setCurrentFileName(fileNameWithoutExtension);
}
