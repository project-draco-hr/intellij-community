{
  for (  VirtualFile file : dir.getChildren()) {
    if (!file.is(VFileProperty.HIDDEN)) {
      LOG.info("Directory " + dir.getNameSequence() + " is not deleted: at least one file "+ file.getNameSequence()+ " exists");
      return errors;
    }
  }
  LOG.info("Remove schemes directory " + dir.getNameSequence());
  myDir=null;
  AccessToken token=WriteAction.start();
  try {
    dir.delete(this);
  }
 catch (  Throwable e) {
    if (errors == null) {
      errors=new SmartList<Throwable>();
    }
    errors.add(e);
  }
 finally {
    token.finish();
  }
  return errors;
}
