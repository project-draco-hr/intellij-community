{
  return ApplicationManager.getApplication().runWriteAction(new ThrowableComputable<VirtualFile,IOException>(){
    @Override public VirtualFile compute() throws IOException {
      VirtualFile file=myVFSBaseDir.findChild(fileName);
      if (file == null)       file=myVFSBaseDir.createChildData(SchemesManagerImpl.this,fileName);
      if (!Arrays.equals(file.contentsToByteArray(),text)) {
        file.setBinaryContent(text);
      }
      return file;
    }
  }
);
}
