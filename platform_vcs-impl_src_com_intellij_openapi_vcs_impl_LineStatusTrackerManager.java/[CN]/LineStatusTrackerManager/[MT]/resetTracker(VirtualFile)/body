{
  myApplication.assertReadAccessAllowed();
  if (isDisabled())   return;
  final Document document=FileDocumentManager.getInstance().getCachedDocument(virtualFile);
  if (document == null) {
    log("resetTracker: no cached document for " + virtualFile.getPath());
    return;
  }
  log("resetTracker: for file " + virtualFile.getPath());
  final boolean editorOpened=myFileEditorManager.isFileOpen(virtualFile);
  final boolean shouldBeInstalled=editorOpened && shouldBeInstalled(virtualFile);
synchronized (myLock) {
    final LineStatusTracker tracker=myLineStatusTrackers.get(document);
    log("resetTracker: shouldBeInstalled - " + shouldBeInstalled + ", tracker - "+ (tracker == null ? "null" : "found"));
    if (tracker != null && shouldBeInstalled) {
      refreshTracker(tracker);
    }
 else     if (tracker != null) {
      releaseTracker(document);
    }
 else     if (shouldBeInstalled) {
      installTracker(virtualFile,document);
    }
  }
}
