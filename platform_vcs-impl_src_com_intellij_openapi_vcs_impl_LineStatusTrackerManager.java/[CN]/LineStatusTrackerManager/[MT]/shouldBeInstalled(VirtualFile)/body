{
  if (isDisabled())   return false;
  if (virtualFile == null || virtualFile instanceof LightVirtualFile)   return false;
  final FileStatusManager statusManager=FileStatusManager.getInstance(myProject);
  if (statusManager == null)   return false;
  if (!myStatusProvider.isSupported(virtualFile)) {
    log("shouldBeInstalled failed: no support found",virtualFile);
    return false;
  }
  final FileStatus status=statusManager.getStatus(virtualFile);
  if (status == FileStatus.NOT_CHANGED || status == FileStatus.ADDED || status == FileStatus.UNKNOWN || status == FileStatus.IGNORED) {
    log("shouldBeInstalled skipped: status=" + status,virtualFile);
    return false;
  }
  return true;
}
