{
  if (thumbBounds.isEmpty() || !scrollbar.isEnabled()) {
    return;
  }
  if (isMacOverlayScrollbar()) {
    paintMacThumb(g,thumbBounds);
  }
 else   if (Registry.is("ide.scroll.new.layout")) {
    Rectangle bounds=new Rectangle(thumbBounds);
    if (isThumbTranslucent()) {
      Alignment alignment=Alignment.get(scrollbar);
      if (alignment == Alignment.LEFT || alignment == Alignment.RIGHT) {
        int offset=getThumbOffset(bounds.width);
        if (offset > 0) {
          bounds.width-=offset;
          if (alignment == Alignment.RIGHT)           bounds.x+=offset;
        }
      }
 else {
        int offset=getThumbOffset(bounds.height);
        if (offset > 0) {
          bounds.height-=offset;
          if (alignment == Alignment.BOTTOM)           bounds.y+=offset;
        }
      }
    }
 else     if (Registry.is("ide.scroll.thumb.small.if.opaque")) {
      bounds.x+=1;
      bounds.y+=1;
      bounds.width-=2;
      bounds.height-=2;
    }
    float value=(float)myThumbFadeColorShift / getAnimationColorShift();
    RegionPainter<Float> painter=isDark() ? JBScrollPane.THUMB_DARK_PAINTER : JBScrollPane.THUMB_PAINTER;
    painter.paint((Graphics2D)g,bounds.x,bounds.y,bounds.width,bounds.height,value);
  }
 else {
    RegionPainter<Integer> painter=UIUtil.getClientProperty(scrollbar,MAXI_THUMB);
    if (painter != null) {
      painter.paint((Graphics2D)g,thumbBounds.x,thumbBounds.y,thumbBounds.width,thumbBounds.height,myThumbFadeColorShift);
    }
 else {
      g.translate(thumbBounds.x,thumbBounds.y);
      paintMaxiThumb((Graphics2D)g,thumbBounds);
      g.translate(-thumbBounds.x,-thumbBounds.y);
    }
  }
}
