{
  if (thumbBounds.isEmpty() || !scrollbar.isEnabled()) {
    return;
  }
  if (isMacOverlayScrollbar()) {
    paintMacThumb(g,thumbBounds);
  }
 else   if (Registry.is("ide.scroll.new.layout")) {
    Rectangle bounds=new Rectangle(thumbBounds);
    if (isThumbTranslucent()) {
      Alignment alignment=Alignment.get(scrollbar);
      if (alignment == Alignment.LEFT || alignment == Alignment.RIGHT) {
        int offset=getThumbOffset(bounds.width);
        if (offset > 0) {
          bounds.width-=offset;
          if (alignment == Alignment.RIGHT)           bounds.x+=offset;
        }
      }
 else {
        int offset=getThumbOffset(bounds.height);
        if (offset > 0) {
          bounds.height-=offset;
          if (alignment == Alignment.BOTTOM)           bounds.y+=offset;
        }
      }
    }
 else     if (SystemInfo.isMac) {
      boolean vertical=scrollbar == null || Adjustable.VERTICAL == scrollbar.getOrientation();
      bounds.x+=vertical ? 1 : 0;
      bounds.y+=vertical ? 0 : 1;
      bounds.width-=vertical ? 1 : 0;
      bounds.height-=vertical ? 0 : 1;
    }
 else     if (Registry.is("ide.scroll.thumb.small.if.opaque")) {
      bounds.x+=1;
      bounds.y+=1;
      bounds.width-=2;
      bounds.height-=2;
    }
    if (SystemInfo.isMac) {
      int max=JBUI.scale(12);
      if (max < bounds.width && bounds.width < bounds.height) {
        bounds.x+=(bounds.width - max) / 2;
        bounds.width=max;
      }
 else       if (max < bounds.height && bounds.height < bounds.width) {
        bounds.y+=(bounds.height - max) / 2;
        bounds.height=max;
      }
      float value=(float)myThumbFadeColorShift / getAnimationColorShift();
      RegionPainter<Float> painter=isDark() ? JBScrollPane.MAC_THUMB_DARK_PAINTER : JBScrollPane.MAC_THUMB_PAINTER;
      painter.paint((Graphics2D)g,bounds.x,bounds.y,bounds.width,bounds.height,value);
    }
 else {
      float value=(float)myThumbFadeColorShift / getAnimationColorShift();
      RegionPainter<Float> painter=isDark() ? JBScrollPane.THUMB_DARK_PAINTER : JBScrollPane.THUMB_PAINTER;
      painter.paint((Graphics2D)g,bounds.x,bounds.y,bounds.width,bounds.height,value);
    }
  }
 else {
    RegionPainter<Integer> painter=UIUtil.getClientProperty(scrollbar,MAXI_THUMB);
    if (painter != null) {
      painter.paint((Graphics2D)g,thumbBounds.x,thumbBounds.y,thumbBounds.width,thumbBounds.height,myThumbFadeColorShift);
    }
 else {
      g.translate(thumbBounds.x,thumbBounds.y);
      paintMaxiThumb((Graphics2D)g,thumbBounds);
      g.translate(-thumbBounds.x,-thumbBounds.y);
    }
  }
}
