{
  final PsiDirectory[] directories=view.getDirectories();
  for (  PsiDirectory directory : directories) {
    final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
    if (aPackage == null) {
      continue;
    }
    if (directory.findFile(PsiPackage.PACKAGE_INFO_FILE) != null) {
      Messages.showErrorDialog(CommonDataKeys.PROJECT.getData(dataContext),"'package-info.java' already exists for package '" + aPackage.getQualifiedName() + '\'',IdeBundle.message("title.cannot.create.file"));
      return null;
    }
 else     if (directory.findFile("package.html") != null) {
      if (Messages.showOkCancelDialog(CommonDataKeys.PROJECT.getData(dataContext),"Package '" + aPackage.getQualifiedName() + "' already has a 'package.html' file. Create 'package-info.java' anyway?","Found 'package.html'","Create",CommonBundle.message("button.cancel"),Messages.getQuestionIcon()) != Messages.OK) {
        return null;
      }
    }
  }
  return super.getTargetDirectory(dataContext,view);
}
