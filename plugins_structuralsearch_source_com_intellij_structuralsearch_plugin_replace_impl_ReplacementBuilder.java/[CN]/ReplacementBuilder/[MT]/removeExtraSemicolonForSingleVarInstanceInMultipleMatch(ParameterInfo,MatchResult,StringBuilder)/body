{
  if (info.isStatementContext()) {
    final PsiElement element=r.getMatchRef().getElement();
    if (buf.charAt(buf.length() - 1) == ';' && r.getMatchImage().charAt(r.getMatchImage().length() - 1) == ';' && (element instanceof PsiReturnStatement || element instanceof PsiDeclarationStatement || element instanceof PsiExpressionStatement|| element instanceof PsiAssertStatement|| element instanceof PsiBreakStatement|| element instanceof PsiContinueStatement|| element instanceof PsiMember|| element instanceof PsiIfStatement && !(((PsiIfStatement)element).getThenBranch() instanceof PsiBlockStatement) || element instanceof PsiLoopStatement && !(((PsiLoopStatement)element).getBody() instanceof PsiBlockStatement))) {
      buf.deleteCharAt(buf.length() - 1);
    }
  }
}
