{
synchronized (treeLock) {
    ObjectNode<T> parentNode=getNode(parent);
    if (parentNode == null)     parentNode=createNodeFor(parent,null);
    ObjectNode<T> childNode=getNode(child);
    if (childNode == null) {
      childNode=createNodeFor(child,parentNode);
    }
 else {
      ObjectNode<T> oldParent=childNode.getParent();
      if (oldParent != null) {
        oldParent.removeChild(childNode);
      }
    }
    myRootObjects.remove(child);
    checkWasNotAddedAlready(parentNode,childNode);
    parentNode.addChild(childNode);
    fireRegistered(childNode.getObject());
  }
}
