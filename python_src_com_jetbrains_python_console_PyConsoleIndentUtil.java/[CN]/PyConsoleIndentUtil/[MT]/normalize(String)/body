{
  Scanner s=new Scanner(codeFragment);
  List<String> lines=Lists.newArrayList();
  List<Integer> indents=Lists.newArrayList();
  int minIndent=Integer.MAX_VALUE;
  while (s.hasNextLine()) {
    String line=s.nextLine();
    int indent=0;
    boolean flag=false;
    for (    char c : line.toCharArray()) {
      if (c == ' ') {
        indent++;
      }
 else       if (c == '\t') {
        indent+=TAB_INDENT;
      }
 else {
        flag=true;
        break;
      }
    }
    if (flag && indent < minIndent) {
      minIndent=indent;
    }
    lines.add(line.trim());
    indents.add(indent);
  }
  int[] indentArray=ArrayUtil.toIntArray(indents);
  shiftLeftAll(indentArray,lines);
  shiftToParentOnUnindent(indentArray);
  return padOutput(lines,indentArray);
}
