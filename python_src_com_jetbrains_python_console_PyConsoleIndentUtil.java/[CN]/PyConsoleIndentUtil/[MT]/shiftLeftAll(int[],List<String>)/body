{
  if (indentArray.length == 0) {
    return;
  }
  int indent=indentArray[0];
  int lastIndent=Integer.MAX_VALUE;
  boolean lastIndented=false;
  for (int i=0; i < indentArray.length; i++) {
    if (!StringUtil.isEmpty(lines.get(i))) {
      if (i > 0 && shouldSkipNext(lines.get(i - 1))) {
        indentArray[i]-=indent;
        continue;
      }
      if (indentArray[i] < indent || indentArray[i] > lastIndent && !lastIndented) {
        indent=indentArray[i];
      }
      lastIndent=indentArray[i];
      indentArray[i]-=indent;
      if (shouldIndent(lines.get(i))) {
        lastIndented=true;
      }
 else {
        lastIndented=false;
      }
    }
  }
}
