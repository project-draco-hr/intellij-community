{
  if (myMode == mode)   return;
  XDebuggerSettingsManager.getInstanceImpl().getGeneralSettings().setEvaluationDialogMode(mode);
  myMode=mode;
  if (mode == EvaluationMode.EXPRESSION) {
    text=new XExpressionImpl(StringUtil.replace(text.getExpression(),"\n"," "),text.getLanguage(),text.getCustomInfo());
  }
  myInputComponent=createInputComponent(mode,text);
  myMainPanel.removeAll();
  myInputComponent.addComponent(myMainPanel,myResultPanel);
  setTitle(myInputComponent.getTitle());
  mySwitchModeAction.putValue(Action.NAME,getSwitchButtonText(mode));
  requestFocusInEditor();
}
