{
  if (offset > 0) {
    final PsiElement beforeCaret=file.findElementAt(offset - 1);
    if (beforeCaret instanceof PsiWhiteSpace && beforeCaret.getText().indexOf('\\') >= 0) {
      return false;
    }
  }
  PsiElement atCaret=file.findElementAt(offset);
  if (atCaret == null) {
    return false;
  }
  ASTNode nodeAtCaret=atCaret.getNode();
  return needInsertBackslash(nodeAtCaret,autoWrapInProgress);
}
