{
  LanguageSubstitutors.cancelReparsing(vFile);
  FileViewProvider viewProvider=findCachedViewProvider(vFile);
  if (viewProvider == null) {
    return;
  }
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  ((PsiModificationTrackerImpl)myManager.getModificationTracker()).incCounter();
  setViewProvider(vFile,null);
  VirtualFile dir=vFile.getParent();
  PsiDirectory parentDir=dir == null ? null : getCachedDirectory(dir);
  PsiTreeChangeEventImpl event=new PsiTreeChangeEventImpl(myManager);
  if (parentDir != null) {
    event.setParent(parentDir);
    myManager.childrenChanged(event);
  }
 else {
    firePropertyChangedForUnloadedPsi(event,vFile);
  }
}
