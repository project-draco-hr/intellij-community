{
  if (context instanceof PsiReferenceExpression) {
    if (context.getParent() instanceof PsiExpression) {
      context=(PsiExpression)context.getParent();
    }
 else     return null;
  }
  if (!(context instanceof PsiMethodCallExpression))   return null;
  PsiMethodCallExpression expression=(PsiMethodCallExpression)context;
  final PsiExpression[] arguments=expression.getArgumentList().getExpressions();
  if (arguments.length != 1)   return null;
  final PsiExpression argument=arguments[0];
  PsiAnonymousClass anonymousClass;
  if (argument instanceof PsiNewExpression && (anonymousClass=((PsiNewExpression)argument).getAnonymousClass()) != null) {
    return AnonymousCanBeLambdaInspection.canBeConvertedToLambda(anonymousClass,true) ? new TransformAndConcatConversionRule() : null;
  }
  if (argument instanceof PsiFunctionalExpression) {
    return new TransformAndConcatConversionRule();
  }
  return null;
}
