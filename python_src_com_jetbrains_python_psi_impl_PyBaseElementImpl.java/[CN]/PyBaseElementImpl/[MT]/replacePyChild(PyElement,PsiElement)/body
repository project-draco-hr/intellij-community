{
  if (!oldel.getParent().equals(this)) {
    throw new IncorrectOperationException("Element " + oldel + " is "+ "not my child");
  }
  Class<? extends PsiElement> cls=getValidChildClass();
  if (cls == null) {
    throw new IncorrectOperationException("Delete not imlpemented for " + this);
  }
  if (!cls.isInstance(oldel) || !cls.isInstance(newel)) {
    throw new IncorrectOperationException("Elements must be instance " + "of " + cls.getSimpleName() + ", but are "+ oldel+ ", "+ newel);
  }
  PsiElement copy=newel.copy();
  getNode().replaceChild(oldel.getNode(),copy.getNode());
  return copy;
}
