{
  final Project project=e.getProject();
  final Editor editor=CommonDataKeys.EDITOR.getData(e.getDataContext());
  if (project == null || editor == null)   return;
  final PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (file == null)   return;
  String message=IdeBundle.message("prompt.reload.file.from.disk",file.getVirtualFile().getPresentableUrl());
  int res=Messages.showOkCancelDialog(project,message,IdeBundle.message("title.reload.file"),Messages.getWarningIcon());
  if (res != Messages.OK)   return;
  Runnable command=new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          if (!project.isDisposed()) {
            PsiManager.getInstance(project).reloadFromDisk(file);
          }
        }
      }
);
    }
  }
;
  CommandProcessor.getInstance().executeCommand(project,command,IdeBundle.message("command.reload.from.disk"),null);
}
