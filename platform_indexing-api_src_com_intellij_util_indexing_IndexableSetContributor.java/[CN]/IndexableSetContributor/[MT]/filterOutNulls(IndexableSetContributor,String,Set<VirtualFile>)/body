{
  for (  VirtualFile root : roots) {
    if (root == null || !root.isValid()) {
      LOG.error("Please fix " + contributor.getClass().getName() + "#"+ methodInfo+ ".\n"+ (root == null ? "The returned set is not expected to contain nulls, but it is " + roots : "Invalid file returned: " + root));
      return ContainerUtil.newLinkedHashSet(ContainerUtil.filter(roots,new Condition<VirtualFile>(){
        @Override public boolean value(        VirtualFile virtualFile){
          return virtualFile != null && virtualFile.isValid();
        }
      }
));
    }
  }
  return roots;
}
