{
  List<RebaseCommand> result=new ArrayList<RebaseCommand>();
  int fixupPos=0;
  for (  FakeCommitParents fakeCommit : fakeBranch) {
    Hash hash=fakeCommit.getHash();
    String newMessage=reworded.get(hash);
    RebaseCommand command;
    if (fixedUp.contains(hash)) {
      command=new RebaseCommand(RebaseCommand.RebaseCommandKind.FIXUP,fakeCommit.getCommand().getCommit());
      result.add(fixupPos,command);
      continue;
    }
 else     if (newMessage != null) {
      command=new RebaseCommand(RebaseCommand.RebaseCommandKind.REWORD,fakeCommit.getCommand().getCommit(),newMessage);
    }
 else {
      command=fakeCommit.getCommand();
    }
    result.add(command);
    fixupPos=result.size() - 1;
  }
  return result;
}
