{
  if (expression == null)   return null;
  if (expression.getCustomInfo() == null && expression.getLanguage() == null) {
    return new TextWithImportsImpl(getKind(expression.getMode()),expression.getExpression());
  }
 else {
    return new TextWithImportsImpl(getKind(expression.getMode()),expression.getExpression(),StringUtil.notNullize(expression.getCustomInfo()),expression.getLanguage() != null ? expression.getLanguage().getAssociatedFileType() : null);
  }
}
