{
  if (expression == null || StringUtil.isEmpty(expression.getExpression()))   return null;
  if (expression.getCustomInfo() == null && expression.getLanguage() == null) {
    return new TextWithImportsImpl(CodeFragmentKind.EXPRESSION,expression.getExpression());
  }
 else {
    return new TextWithImportsImpl(CodeFragmentKind.EXPRESSION,expression.getExpression(),StringUtil.notNullize(expression.getCustomInfo()),expression.getLanguage() != null ? expression.getLanguage().getAssociatedFileType() : null);
  }
}
