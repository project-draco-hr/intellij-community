{
  try {
    bootstrap.init(channel);
  }
 catch (  Throwable e) {
    channel.unsafe().closeForcibly();
    throw e;
  }
  ChannelFuture regFuture=bootstrap.group().register(channel);
  if (regFuture.cause() != null) {
    if (channel.isRegistered()) {
      channel.close();
    }
 else {
      channel.unsafe().closeForcibly();
    }
  }
  return regFuture;
}
