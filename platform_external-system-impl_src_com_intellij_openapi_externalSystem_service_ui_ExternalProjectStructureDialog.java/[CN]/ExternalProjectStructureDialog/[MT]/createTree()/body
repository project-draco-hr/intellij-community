{
  final Couple<CheckedTreeNode> rootAndPreselectedNode=createRoot();
  final CheckedTreeNode root=rootAndPreselectedNode.first;
  final CheckboxTree tree=new CheckboxTree(new CheckboxTree.CheckboxTreeCellRenderer(true,false){
    @Override public void customizeRenderer(    JTree tree,    Object value,    boolean selected,    boolean expanded,    boolean leaf,    int row,    boolean hasFocus){
      if (!(value instanceof DataNodeCheckedTreeNode)) {
        return;
      }
      final DataNodeCheckedTreeNode node=(DataNodeCheckedTreeNode)value;
      ColoredTreeCellRenderer renderer=getTextRenderer();
      renderer.setIcon(node.icon);
      renderer.append(node.text);
      if (!StringUtil.isEmptyOrSpaces(node.comment)) {
        String description=node.comment;
        if (node.comment.length() > MAX_PATH_LENGTH) {
          description=node.comment.substring(0,MAX_PATH_LENGTH) + "...";
        }
        renderer.append(" (" + description + ")",SimpleTextAttributes.GRAY_ATTRIBUTES);
        setToolTipText(node.comment);
      }
 else {
        setToolTipText(null);
      }
    }
  }
,root,new CheckboxTreeBase.CheckPolicy(true,true,false,false));
  TreeUtil.expand(tree,1);
  if (rootAndPreselectedNode.second != null) {
    TreeUtil.selectNode(tree,rootAndPreselectedNode.second);
  }
 else {
    tree.setSelectionRow(0);
  }
  return tree;
}
