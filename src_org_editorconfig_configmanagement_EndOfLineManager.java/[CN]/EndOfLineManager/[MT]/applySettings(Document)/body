{
  final VirtualFile file=FileDocumentManager.getInstance().getFile(document);
  if (file == null) {
    return;
  }
  String filePath=file.getCanonicalPath();
  final List<EditorConfig.OutPair> outPairs=SettingsProviderComponent.getInstance().getOutPairs(filePath);
  String endOfLine=ConfigConverter.valueForKey(outPairs,"end_of_line");
  if (!endOfLine.isEmpty()) {
    if (endOfLineMap.containsKey(endOfLine)) {
      String lineSeparator=endOfLineMap.get(endOfLine);
      try {
        LoadTextUtil.changeLineSeparators(project,file,lineSeparator,this);
      }
 catch (      IOException error) {
        LOG.error("IOException while changing line separator");
      }
    }
 else {
      LOG.error("Value of charset is invalid");
    }
  }
  LOG.debug("Applied end of line settings for: " + filePath);
}
