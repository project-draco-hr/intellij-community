{
  for (  Document document : documentsToChange) {
    final VirtualFile file=FileDocumentManager.getInstance().getFile(document);
    if (file == null) {
      return;
    }
    String filePath=file.getCanonicalPath();
    final List<EditorConfig.OutPair> outPairs=SettingsProviderComponent.getInstance().getOutPairs(filePath);
    String endOfLine=ConfigConverter.valueForKey(outPairs,endOfLineKey);
    if (!endOfLine.isEmpty()) {
      if (endOfLineMap.containsKey(endOfLine)) {
        String lineSeparator=endOfLineMap.get(endOfLine);
        changeSeparators(file,document,lineSeparator);
      }
 else {
        LOG.warn(new InvalidConfigException(endOfLineKey,endOfLine,filePath));
      }
    }
    LOG.debug("Applied end of line settings for: " + filePath);
  }
  documentsToChange.clear();
}
