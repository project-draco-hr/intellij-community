{
  if (commits.size() == 0) {
    throw new IllegalArgumentException("Empty list commits");
  }
  if (isSimpleEndOfGraph()) {
    int startIndex=getLastRowInGraph().getRowIndex() + 1;
    simpleAppend(commits,new MutableNodeRow(graph,startIndex),new HashMap<Hash,MutableNode>());
  }
 else {
    Map<Hash,MutableNode> underdoneNodes=fixUnderdoneNodes(commits.get(0).getCommitHash());
    MutableNodeRow lastRow=getLastRowInGraph();
    graph.getAllRows().remove(graph.getAllRows().size() - 1);
    simpleAppend(commits,lastRow,underdoneNodes);
  }
}
