{
  List<VirtualFile> result=myPackageDirectoryCache.getDirectoriesByPackageName(packageName);
  if (!includeLibrarySources) {
    result=ContainerUtil.filter(result,new Condition<VirtualFile>(){
      @Override public boolean value(      VirtualFile file){
        DirectoryInfo info=getInfoForFile(file);
        return info.isInProject() && (!info.isInLibrarySource() || info.isInModuleSource() || info.hasLibraryClassRoot());
      }
    }
);
  }
  return new CollectionQuery<VirtualFile>(result);
}
