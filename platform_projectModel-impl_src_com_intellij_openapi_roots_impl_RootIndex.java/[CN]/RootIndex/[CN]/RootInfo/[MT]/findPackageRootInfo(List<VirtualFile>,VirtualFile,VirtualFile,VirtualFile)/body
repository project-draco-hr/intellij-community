{
  for (  VirtualFile root : hierarchy) {
    if (moduleContentRoot != null && sourceRootOf.get(root).contains(contentRootOf.get(moduleContentRoot)) && librarySourceRoot == null) {
      return root;
    }
    if (root.equals(libraryClassRoot) || root.equals(librarySourceRoot)) {
      return root;
    }
    if (root.equals(moduleContentRoot) && !sourceRootOf.containsKey(root) && librarySourceRoot == null && libraryClassRoot == null) {
      return null;
    }
  }
  return null;
}
