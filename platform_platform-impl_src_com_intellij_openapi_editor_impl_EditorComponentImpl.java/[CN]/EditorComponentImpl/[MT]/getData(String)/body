{
  if (myEditor.isDisposed() || myEditor.isRendererMode())   return null;
  if (CommonDataKeys.EDITOR.is(dataId)) {
    return myEditor.getVirtualFile() == null ? myEditor : null;
  }
  if (CommonDataKeys.CARET.is(dataId)) {
    return myEditor.getCaretModel().getCurrentCaret();
  }
  if (PlatformDataKeys.DELETE_ELEMENT_PROVIDER.is(dataId)) {
    return myEditor.getDeleteProvider();
  }
  if (PlatformDataKeys.CUT_PROVIDER.is(dataId)) {
    return myEditor.getCutProvider();
  }
  if (PlatformDataKeys.COPY_PROVIDER.is(dataId)) {
    return myEditor.getCopyProvider();
  }
  if (PlatformDataKeys.PASTE_PROVIDER.is(dataId)) {
    return myEditor.getPasteProvider();
  }
  if (CommonDataKeys.EDITOR_VIRTUAL_SPACE.is(dataId)) {
    LogicalPosition location=myEditor.myLastMousePressedLocation;
    if (location == null) {
      location=myEditor.getCaretModel().getLogicalPosition();
    }
    return EditorUtil.inVirtualSpace(myEditor,location);
  }
  return null;
}
