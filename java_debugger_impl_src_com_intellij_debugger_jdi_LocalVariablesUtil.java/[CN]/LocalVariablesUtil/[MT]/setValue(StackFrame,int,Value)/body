{
  try {
    final Long frameId=ReflectionUtil.getField(frame.getClass(),frame,long.class,"id");
    final VirtualMachine vm=frame.virtualMachine();
    final Method stateMethod=ReflectionUtil.getDeclaredMethod(vm.getClass(),"state");
    Object slotInfoArray=createSlotInfoArraySet(slot,value);
    Object ps;
    final Object vmState=stateMethod.invoke(vm);
synchronized (vmState) {
      ps=ourEnqueueMethodSet.invoke(null,vm,frame.thread(),frameId,slotInfoArray);
    }
    ourWaitForReplyMethodSet.invoke(null,vm,ps);
  }
 catch (  Exception e) {
    throw new EvaluateException("Unable to set value",e);
  }
}
