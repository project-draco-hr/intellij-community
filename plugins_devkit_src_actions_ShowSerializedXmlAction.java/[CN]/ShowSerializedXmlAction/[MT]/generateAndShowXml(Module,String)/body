{
  final List<URL> urls=new ArrayList<URL>();
  final List<String> list=OrderEnumerator.orderEntries(module).recursively().runtimeOnly().getPathsList().getPathList();
  for (  String path : list) {
    try {
      urls.add(new File(FileUtil.toSystemIndependentName(path)).toURI().toURL());
    }
 catch (    MalformedURLException e1) {
      LOG.info(e1);
    }
  }
  final Project project=module.getProject();
  UrlClassLoader loader=UrlClassLoader.build().urls(urls).parent(XmlSerializer.class.getClassLoader()).get();
  final Class<?> aClass;
  try {
    aClass=Class.forName(className,true,loader);
  }
 catch (  ClassNotFoundException e) {
    Messages.showErrorDialog(project,"Cannot find class '" + className + "'",CommonBundle.getErrorTitle());
    LOG.info(e);
    return;
  }
  final Object o;
  try {
    o=new SampleObjectGenerator().createValue(aClass,FList.<Type>emptyList());
  }
 catch (  Exception e) {
    Messages.showErrorDialog(project,"Cannot generate class '" + className + "': "+ e.getMessage(),CommonBundle.getErrorTitle());
    LOG.info(e);
    return;
  }
  final Element element;
  try {
    element=XmlSerializer.serialize(o);
  }
 catch (  XmlSerializationException e) {
    LOG.info(e);
    Throwable cause=e.getCause();
    Messages.showErrorDialog(project,e.getMessage() + (cause != null ? ": " + cause.getMessage() : ""),CommonBundle.getErrorTitle());
    return;
  }
  final String text=JDOMUtil.writeElement(element,"\n");
  Messages.showIdeaMessageDialog(project,text,"Serialized XML for '" + className + "'",new String[]{CommonBundle.getOkButtonText()},0,Messages.getInformationIcon(),null);
}
