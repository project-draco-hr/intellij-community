{
  String jdkHome=getSystemPropertyOrEnvironmentVariable(JDK_HOME_FOR_TESTS);
  if (isNullOrEmpty(jdkHome) || !checkForJdk(jdkHome)) {
    jdkHome=getBundledJdLocation();
  }
  if (isNullOrEmpty(jdkHome) || !checkForJdk(jdkHome)) {
    fail("Please specify the path to a valid JDK using system property " + JDK_HOME_FOR_TESTS);
  }
  return jdkHome;
}
