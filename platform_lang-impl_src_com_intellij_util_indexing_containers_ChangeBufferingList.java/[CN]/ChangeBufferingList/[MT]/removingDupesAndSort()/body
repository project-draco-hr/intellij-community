{
  final int[] currentChanges=changes;
  final int intLength=length;
  if (intLength < 250) {
    Arrays.sort(currentChanges,0,intLength);
    boolean hasDupes=false;
    for (int i=0, max=intLength - 1; i < max; ++i) {
      if (currentChanges[i] == currentChanges[i + 1]) {
        hasDupes=true;
        break;
      }
    }
    if (hasDupes) {
      int ptr=0;
      for (int i=1; i < intLength; ++i) {
        if (currentChanges[i] != currentChanges[ptr]) {
          currentChanges[++ptr]=currentChanges[i];
        }
      }
      length=(short)(ptr + 1);
    }
  }
 else {
    ValueContainer.IntIterator sorted=SortedFileIdSetIterator.getTransientIterator(new ChangesIterator(currentChanges,length,false));
    int lastIndex=0;
    while (sorted.hasNext()) {
      currentChanges[lastIndex++]=sorted.next();
    }
    length=(short)lastIndex;
  }
  mayHaveDupes=false;
}
