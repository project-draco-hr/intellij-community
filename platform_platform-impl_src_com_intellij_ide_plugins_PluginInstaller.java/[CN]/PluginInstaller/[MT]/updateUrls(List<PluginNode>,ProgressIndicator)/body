{
  boolean unknownNodes=false;
  for (  PluginNode node : pluginsToInstall) {
    if (node.getRepositoryName() == UNKNOWN_HOST_MARKER) {
      unknownNodes=true;
      break;
    }
  }
  if (!unknownNodes)   return;
  List<String> hosts=ContainerUtil.newSmartList();
  ContainerUtil.addIfNotNull(hosts,ApplicationInfoEx.getInstanceEx().getBuiltinPluginsUrl());
  hosts.addAll(UpdateSettings.getInstance().getPluginHosts());
  Map<PluginId,IdeaPluginDescriptor> allPlugins=ContainerUtil.newHashMap();
  for (  String host : hosts) {
    try {
      List<IdeaPluginDescriptor> descriptors=RepositoryHelper.loadPlugins(host,null,indicator);
      for (      IdeaPluginDescriptor descriptor : descriptors) {
        allPlugins.put(descriptor.getPluginId(),descriptor);
      }
    }
 catch (    IOException ignored) {
    }
  }
  for (  PluginNode node : pluginsToInstall) {
    if (node.getRepositoryName() == UNKNOWN_HOST_MARKER) {
      IdeaPluginDescriptor descriptor=allPlugins.get(node.getPluginId());
      if (descriptor != null) {
        node.setRepositoryName(((PluginNode)descriptor).getRepositoryName());
        node.setDownloadUrl(((PluginNode)descriptor).getDownloadUrl());
      }
 else {
        node.setRepositoryName(null);
      }
    }
  }
}
