{
switch (state) {
case PENDING:
    break;
case FULFILLED:
  fulfilled.setResult((T)result);
return this;
case REJECTED:
fulfilled.setError((String)result);
return this;
}
addHandlers(new Consumer<T>(){
@Override public void consume(T result){
try {
fulfilled.setResult(result);
}
 catch (Throwable e) {
fulfilled.setError(e.getMessage());
}
}
}
,new Consumer<String>(){
@Override public void consume(String error){
fulfilled.setError(error);
}
}
);
return this;
}
