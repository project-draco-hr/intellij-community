{
switch (state) {
case PENDING:
    break;
case FULFILLED:
  child.setResult((T)result);
return;
case REJECTED:
child.setError((String)result);
return;
}
addHandlers(new Consumer<T>(){
@Override public void consume(T result){
try {
child.setResult(result);
}
 catch (Throwable e) {
child.setError(e.getMessage());
}
}
}
,new Consumer<String>(){
@Override public void consume(String error){
child.setError(error);
}
}
);
}
