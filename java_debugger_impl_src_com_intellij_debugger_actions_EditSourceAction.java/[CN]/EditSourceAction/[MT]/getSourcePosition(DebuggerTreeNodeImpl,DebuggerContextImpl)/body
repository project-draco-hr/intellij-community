{
  DebuggerTreeNodeImpl node=selectedNode;
  final DebuggerContextImpl context=debuggerContext;
  if (node == null || context == null) {
    return null;
  }
  final Project project=context.getProject();
  final DebuggerSession debuggerSession=context.getDebuggerSession();
  if (debuggerSession == null) {
    return null;
  }
  NodeDescriptorImpl nodeDescriptor=node.getDescriptor();
  if (nodeDescriptor instanceof WatchItemDescriptor) {
    Modifier modifier=((WatchItemDescriptor)nodeDescriptor).getModifier();
    if (modifier == null) {
      return null;
    }
    nodeDescriptor=(NodeDescriptorImpl)modifier.getInspectItem(project);
  }
  final NodeDescriptorImpl nodeDescriptor1=nodeDescriptor;
  return ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
    public SourcePosition compute(){
      return SourcePositionProvider.getSourcePosition(nodeDescriptor1,project,context);
    }
  }
);
}
