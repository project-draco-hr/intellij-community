{
  ApplicationManager.getApplication().assertIsDispatchThread();
synchronized (myLock) {
    try {
      if (myReleased)       return;
      if (myBaseRevisionNumber != null && myBaseRevisionNumber.after(baseRevisionNumber))       return;
      myBaseRevisionNumber=baseRevisionNumber;
      myPreviousBaseRevision=null;
      myVcsDocument.setReadOnly(false);
      myVcsDocument.replaceString(0,myVcsDocument.getTextLength(),vcsContent);
      myVcsDocument.setReadOnly(true);
      reinstallRanges();
      if (myDocumentListener == null) {
        myDocumentListener=new MyDocumentListener();
        myDocument.addDocumentListener(myDocumentListener);
      }
    }
  finally {
      myBaseLoaded=BaseLoadState.LOADED;
    }
  }
}
