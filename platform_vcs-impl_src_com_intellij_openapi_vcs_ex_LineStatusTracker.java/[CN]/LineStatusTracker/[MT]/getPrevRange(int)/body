{
synchronized (myLock) {
    final Range currentRange=getRangeForLine(line);
    if (currentRange != null) {
      return getPrevRange(currentRange);
    }
    for (ListIterator<Range> iterator=myRanges.listIterator(myRanges.size()); iterator.hasPrevious(); ) {
      final Range range=iterator.previous();
      if (range.getLine1() > line) {
        continue;
      }
      return range;
    }
    return null;
  }
}
