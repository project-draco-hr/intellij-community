{
  for (  Range range : ranges) {
    int offset1=range.getType() == Range.DELETED ? range.getOffset1() - 1 : range.getOffset1();
    int offset2=range.getOffset2();
    if (offset2 < firstChangedLine) {
      rangesBeforeChange.add(range);
    }
 else     if (offset1 > lastChangedLine) {
      rangesAfterChange.add(range);
    }
 else {
      changedRanges.add(range);
    }
  }
}
