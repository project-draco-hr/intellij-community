{
  if (myNonEnglishKeyboardSupportOption != null) {
    KeyboardSettingsExternalizable.getInstance().setNonEnglishKeyboardSupportEnabled(false);
    myNonEnglishKeyboardSupportOption.setSelected(KeyboardSettingsExternalizable.getInstance().isNonEnglishKeyboardSupportEnabled());
  }
  mySelectedKeymap=null;
  List<Keymap> list=getManagerKeymaps();
  for (  Keymap keymap : list) {
    if (mySelectedKeymap == null && keymap == KeymapManagerEx.getInstanceEx().getActiveKeymap()) {
      mySelectedKeymap=keymap;
    }
  }
  myEditor.reset(list);
  if (myEditor.getModel().isEmpty()) {
    KeymapImpl keymap=new KeymapImpl();
    keymap.setName(KeyMapBundle.message("keymap.no.name"));
    myEditor.getModel().add(keymap);
    mySelectedKeymap=keymap;
  }
  myEditor.getModel().setSelectedItem(mySelectedKeymap);
  processCurrentKeymapChanged(myQuickLists);
}
