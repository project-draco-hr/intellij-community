{
  if (myNonEnglishKeyboardSupportOption != null) {
    KeyboardSettingsExternalizable.getInstance().setNonEnglishKeyboardSupportEnabled(false);
    myNonEnglishKeyboardSupportOption.setSelected(KeyboardSettingsExternalizable.getInstance().isNonEnglishKeyboardSupportEnabled());
  }
  Keymap selectedKeymap=null;
  List<Keymap> list=getManagerKeymaps();
  for (  Keymap keymap : list) {
    if (selectedKeymap == null && keymap == KeymapManagerEx.getInstanceEx().getActiveKeymap()) {
      selectedKeymap=keymap;
    }
  }
  myEditor.reset(list);
  if (myEditor.getModel().isEmpty()) {
    KeymapImpl keymap=new KeymapImpl();
    keymap.setName(KeyMapBundle.message("keymap.no.name"));
    myEditor.getModel().add(keymap);
    selectedKeymap=keymap;
  }
  myEditor.getModel().setSelectedItem(selectedKeymap);
  currentKeymapChanged();
}
