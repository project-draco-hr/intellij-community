{
  Keymap keymap=myEditor.getModel().getSelected();
  if (keymap == null) {
    return;
  }
  String newKeymapName=KeyMapBundle.message("new.keymap.name",keymap.getPresentableName());
  if (!tryNewKeymapName(newKeymapName)) {
    for (int i=0; ; i++) {
      newKeymapName=KeyMapBundle.message("new.indexed.keymap.name",keymap.getPresentableName(),i);
      if (tryNewKeymapName(newKeymapName)) {
        break;
      }
    }
  }
  KeymapImpl newKeymap=((KeymapImpl)keymap).deriveKeymap(newKeymapName);
  newKeymap.setCanModify(true);
  myEditor.getModel().add(newKeymap);
  myEditor.getModel().setSelectedItem(newKeymap);
  myEditor.getComboBox().getEditor().selectAll();
  currentKeymapChanged();
}
