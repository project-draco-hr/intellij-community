{
  ensureNonEmptyKeymapNames();
  ensureUniqueKeymapNames();
  KeymapManagerImpl keymapManager=(KeymapManagerImpl)KeymapManager.getInstance();
  List<Keymap> keymaps=new ArrayList<Keymap>();
  for (int i=0; i < myKeymapListModel.getSize(); i++) {
    Keymap modelKeymap=(Keymap)myKeymapListModel.getElementAt(i);
    if (modelKeymap.canModify()) {
      keymaps.add(((KeymapImpl)modelKeymap).copy());
    }
  }
  keymapManager.setKeymaps(keymaps);
  keymapManager.setActiveKeymap(mySelectedKeymap);
  ActionToolbarImpl.updateAllToolbarsImmediately();
}
