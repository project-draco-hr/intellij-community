{
  final List<ExternalSystemNode<?>> result=new SmartList<ExternalSystemNode<?>>();
  addModuleNodes(externalProjectsView,dataNodes,result);
  TasksNode tasksNode=new TasksNode(externalProjectsView,dataNodes.get(ProjectKeys.TASK));
  if (externalProjectsView.useTasksNode()) {
    result.add(tasksNode);
  }
 else {
    ContainerUtil.addAll(result,tasksNode.getChildren());
  }
  addDependenciesNode(externalProjectsView,dataNodes,result);
  return result;
}
