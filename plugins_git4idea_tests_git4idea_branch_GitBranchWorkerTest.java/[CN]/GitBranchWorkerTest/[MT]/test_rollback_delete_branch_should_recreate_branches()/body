{
  prepareUnmergedBranch(myCommunity);
  final Ref<String> rollbackMsg=Ref.create();
  deleteBranch("todelete",new TestUiHandler(){
    @Override public boolean showBranchIsNotFullyMergedDialog(    @NotNull Project project,    @NotNull Map<GitRepository,List<GitCommit>> history,    @NotNull String unmergedBranch,    @NotNull List<String> mergedToBranches,    @NotNull String baseBranch){
      return false;
    }
    @Override public boolean notifyErrorWithRollbackProposal(    @NotNull String title,    @NotNull String message,    @NotNull String rollbackProposal){
      rollbackMsg.set(message);
      return true;
    }
  }
);
  assertNotNull("Rollback messages was not shown",rollbackMsg.get());
  assertBranchExists(myUltimate,"todelete");
  assertBranchExists(myCommunity,"todelete");
  assertBranchExists(myContrib,"todelete");
}
