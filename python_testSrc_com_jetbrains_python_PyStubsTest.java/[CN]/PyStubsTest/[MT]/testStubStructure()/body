{
  final PyFile file=getTestFile();
  final List<PyClass> classes=file.getTopLevelClasses();
  assertEquals(1,classes.size());
  PyClass pyClass=classes.get(0);
  assertEquals("FooClass",pyClass.getName());
  final PyTargetExpression[] attrs=pyClass.getClassAttributes();
  assertEquals(1,attrs.length);
  assertEquals("staticField",attrs[0].getName());
  final PyFunction[] methods=pyClass.getMethods();
  assertEquals(2,methods.length);
  assertEquals("__init__",methods[0].getName());
  assertEquals("fooFunction",methods[1].getName());
  final PyTargetExpression[] instanceAttrs=pyClass.getInstanceAttributes();
  assertEquals(1,instanceAttrs.length);
  assertEquals("instanceField",instanceAttrs[0].getName());
  final List<PyFunction> functions=file.getTopLevelFunctions();
  assertEquals(1,functions.size());
  PyFunction func=functions.get(0);
  assertEquals("topLevelFunction",func.getName());
  assertNull("Operations should have been performed on stubs but caused file to be parsed",((PyFileImpl)file).getTreeElement());
}
