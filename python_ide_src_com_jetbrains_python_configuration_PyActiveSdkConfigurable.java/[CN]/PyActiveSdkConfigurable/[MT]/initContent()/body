{
  myInterpreterList=PyConfigurableInterpreterList.getInstance(myProject);
  myProjectSdksModel=myInterpreterList.getModel();
  mySdkModelListener=new MySdkModelListener(this);
  myProjectSdksModel.addListener(mySdkModelListener);
  mySdkCombo.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final Sdk selectedSdk=(Sdk)mySdkCombo.getSelectedItem();
      myPackagesPanel.updatePackages(selectedSdk != null ? new PyPackageManagementService(myProject,selectedSdk) : null);
      myPackagesPanel.updateNotifications(selectedSdk);
    }
  }
);
  myDetailsCallback=new NullableConsumer<Sdk>(){
    @Override public void consume(    @Nullable Sdk sdk){
      if (sdk instanceof PyDetectedSdk) {
        final Sdk addedSdk=SdkConfigurationUtil.createAndAddSDK(sdk.getHomePath(),PythonSdkType.getInstance());
        if (addedSdk != null) {
          myProjectSdksModel.addSdk(addedSdk);
          updateSdkList(false);
          PythonSdkUpdater.getInstance().markAlreadyUpdated(addedSdk.getHomePath());
          mySdkCombo.getModel().setSelectedItem(myProjectSdksModel.findSdk(addedSdk.getName()));
        }
      }
 else       if (sdk != null) {
        PythonSdkAdditionalData additionalData=(PythonSdkAdditionalData)sdk.getSdkAdditionalData();
        if (additionalData != null) {
          final String path=additionalData.getAssociatedProjectPath();
          final String basePath=myProject.getBasePath();
          if (basePath != null && !basePath.equals(path))           additionalData.setAssociatedProjectPath(null);
        }
        updateSdkList(false);
        mySdkCombo.getModel().setSelectedItem(myProjectSdksModel.findSdk(sdk.getName()));
      }
      mySdkSettingsWereModified=true;
    }
  }
;
  myDetailsButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      showDetails();
    }
  }
);
}
