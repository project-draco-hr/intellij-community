{
  try {
    fireWriteActionFinished(clazz);
  }
  finally {
    myWriteActionsStack.pop();
    if (gatherStatistics && myWriteActionsStack.isEmpty() && !myWriteActionPending) {
      writePauses.finished("write action (" + clazz + ")");
    }
    if (myWriteActionsStack.isEmpty()) {
      myLock.writeUnlock();
      fireAfterWriteActionFinished(clazz);
    }
  }
}
