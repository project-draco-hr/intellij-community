{
  AccessToken token=HeavyProcessLatch.INSTANCE.processStarted("Loading application components");
  try {
    long t=System.currentTimeMillis();
    init(mySplash == null ? null : new EmptyProgressIndicator(){
      @Override public void setFraction(      double fraction){
        mySplash.showProgress("",(float)(0.65 + getPercentageOfComponentsLoaded() * 0.35));
      }
    }
,new Runnable(){
      @Override public void run(){
        getPicoContainer().getComponentInstance(ServiceManagerImpl.class);
        String effectiveConfigPath=FileUtilRt.toSystemIndependentName(configPath == null ? PathManager.getConfigPath() : configPath);
        for (        ApplicationLoadListener listener : ApplicationLoadListener.EP_NAME.getExtensions()) {
          try {
            listener.beforeApplicationLoaded(ApplicationImpl.this,effectiveConfigPath);
          }
 catch (          Throwable e) {
            LOG.error(e);
          }
        }
        ComponentsPackage.getStateStore(ApplicationImpl.this).setPath(effectiveConfigPath);
      }
    }
);
    t=System.currentTimeMillis() - t;
    LOG.info(getComponentConfigCount() + " application components initialized in " + t+ " ms");
  }
  finally {
    token.finish();
  }
  myLoaded=true;
  createLocatorFile();
}
