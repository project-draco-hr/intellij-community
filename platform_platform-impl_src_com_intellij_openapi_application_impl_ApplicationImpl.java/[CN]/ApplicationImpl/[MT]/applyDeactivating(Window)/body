{
  if (isActive() && !myDeactivating) {
    myDeactivationCancelled=false;
    myDeactivating=true;
    IdeFrame ideFrame=getIdeFrameFromWindow(window);
    if (ideFrame != null) {
      getMessageBus().syncPublisher(ApplicationActivationListener.TOPIC).applicationDeactivating(ideFrame);
      return true;
    }
  }
  return false;
}
