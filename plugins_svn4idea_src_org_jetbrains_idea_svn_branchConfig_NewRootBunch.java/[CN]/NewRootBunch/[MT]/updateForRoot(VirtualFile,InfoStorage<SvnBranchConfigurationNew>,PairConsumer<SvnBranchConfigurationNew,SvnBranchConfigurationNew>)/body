{
synchronized (myLock) {
    SvnBranchConfigurationNew previous;
    boolean override;
    final InfoStorage<SvnBranchConfigurationNew> existing=myMap.get(root);
    if (existing == null) {
      previous=null;
      override=true;
      myMap.put(root,config);
    }
 else {
      previous=existing.getValue();
      override=existing.accept(config);
    }
    if (callbackOnUpdate != null && override) {
      callbackOnUpdate.consume(previous,config.getValue());
    }
  }
}
