{
  FileDocumentManager.getInstance().saveAllDocuments();
  ExecutionResult executionResult;
  RunProfile profile=env.getRunProfile();
  if (state instanceof PythonCommandLineState && profile instanceof CommandLinePatcher) {
    executionResult=((PythonCommandLineState)state).execute(executor,(CommandLinePatcher)profile);
  }
 else {
    executionResult=state.execute(executor,this);
  }
  if (executionResult == null)   return null;
  final RunContentBuilder contentBuilder=new RunContentBuilder(project,this,executor);
  contentBuilder.setExecutionResult(executionResult);
  contentBuilder.setEnvironment(env);
  return contentBuilder.showRunContent(contentToReuse);
}
