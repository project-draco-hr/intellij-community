{
  final String tempVar=getTempVar(factory.createExpressionFromText(newArrayInitializer,myContext));
  final Map<PsiExpression,String> map=new HashMap<>();
  if (initializer instanceof PsiReferenceExpression && Comparing.strEqual(parameter.getName(),initializer.getText())) {
    initializer=factory.createExpressionFromText(tempVar,myContext);
  }
 else {
    initializer=(PsiExpression)initializer.copy();
    initializer.accept(new JavaRecursiveElementWalkingVisitor(){
      @Override public void visitReferenceExpression(      PsiReferenceExpression expression){
        super.visitReferenceExpression(expression);
        if (Comparing.strEqual(parameter.getName(),expression.getText())) {
          map.put(expression,tempVar);
        }
      }
    }
);
    replaceOldRefWithNew(map.entrySet(),factory);
  }
  return initializer;
}
