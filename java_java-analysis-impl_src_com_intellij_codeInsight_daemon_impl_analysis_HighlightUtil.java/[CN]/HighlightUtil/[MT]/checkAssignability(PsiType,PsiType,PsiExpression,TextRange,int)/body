{
  if (lType == rType)   return null;
  if (expression == null) {
    if (rType == null || lType == null || TypeConversionUtil.isAssignable(lType,rType))     return null;
  }
 else   if (TypeConversionUtil.areTypesAssignmentCompatible(lType,expression)) {
    return null;
  }
  if (rType == null) {
    rType=expression.getType();
  }
  HighlightInfo highlightInfo=createIncompatibleTypeHighlightInfo(lType,rType,textRange,navigationShift);
  if (rType != null && expression != null && isCastIntentionApplicable(expression,lType)) {
    QuickFixAction.registerQuickFixAction(highlightInfo,QUICK_FIX_FACTORY.createAddTypeCastFix(lType,expression));
  }
  if (expression != null) {
    if (PsiType.INT.equals(lType) && rType != null && (PsiType.LONG.equals(rType) || PsiType.LONG.getBoxedTypeName().equals(rType.getCanonicalText(false)))) {
      QuickFixAction.registerQuickFixAction(highlightInfo,QUICK_FIX_FACTORY.createWrapLongWithMathToIntExactFix(expression));
    }
    QuickFixAction.registerQuickFixAction(highlightInfo,QUICK_FIX_FACTORY.createWrapExpressionFix(lType,expression));
    AddTypeArgumentsConditionalFix.register(highlightInfo,expression,lType);
  }
  ChangeNewOperatorTypeFix.register(highlightInfo,expression,lType);
  return highlightInfo;
}
