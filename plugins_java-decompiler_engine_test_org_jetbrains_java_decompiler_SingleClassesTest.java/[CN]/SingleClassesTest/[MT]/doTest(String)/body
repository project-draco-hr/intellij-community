{
  try {
    File testDataDir=new File("testData");
    if (!isTestDataDir(testDataDir))     testDataDir=new File("community/plugins/java-decompiler/engine/testData");
    if (!isTestDataDir(testDataDir))     testDataDir=new File("plugins/java-decompiler/engine/testData");
    assertTrue(isTestDataDir(testDataDir));
    File classFile=new File(testDataDir,"/classes/pkg/" + testName + ".class");
    assertTrue(classFile.isFile());
    decompiler.addSpace(classFile,true);
    decompiler.decompileContext(tempDir);
    File decompiledFile=new File(tempDir,testName + ".java");
    assertTrue(decompiledFile.isFile());
    File referenceFile=new File(testDataDir,"results/" + testName + ".dec");
    assertTrue(referenceFile.isFile());
    String decompiledContent=getContent(decompiledFile);
    String referenceContent=getContent(referenceFile);
    assertEquals(referenceContent,decompiledContent);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
