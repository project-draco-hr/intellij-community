{
  final PsiElement resolve=resolveResult.getElement();
  if (resolve instanceof PsiMethod) {
    final PsiMethod psiMethod=(PsiMethod)resolve;
    if (psiMethod.isVarArgs()) {
      if (!languageLevel.isAtLeast(LanguageLevel.JDK_1_7) || !AnnotationUtil.isAnnotated(psiMethod,"java.lang.SafeVarargs",false)) {
        final int parametersCount=psiMethod.getParameterList().getParametersCount();
        final PsiParameter varargParameter=psiMethod.getParameterList().getParameters()[parametersCount - 1];
        final PsiType componentType=((PsiEllipsisType)varargParameter.getType()).getComponentType();
        if (!isReifiableType(resolveResult.getSubstitutor().substitute(componentType))) {
          if (expression instanceof PsiMethodReferenceExpression)           return true;
          final PsiElement parent=expression.getParent();
          if (parent instanceof PsiCall) {
            final PsiExpressionList argumentList=((PsiCall)parent).getArgumentList();
            if (argumentList != null) {
              final PsiExpression[] args=argumentList.getExpressions();
              if (args.length == parametersCount) {
                final PsiExpression lastArg=args[args.length - 1];
                if (lastArg.getType() instanceof PsiArrayType) {
                  return false;
                }
              }
              for (int i=parametersCount - 1; i < args.length; i++) {
                if (!isReifiableType(resolveResult.getSubstitutor().substitute(args[i].getType()))) {
                  return true;
                }
              }
              return args.length < parametersCount;
            }
          }
        }
      }
    }
  }
  return false;
}
