{
  PsiElement element=PsiTreeUtil.getParentOfType(file.findElementAt(editor.getCaretModel().getOffset()),PyBinaryExpression.class,false);
  if (element == null) {
    return false;
  }
  while (element.getParent() instanceof PyBinaryExpression) {
    element=element.getParent();
  }
  if (((PyBinaryExpression)element).getOperator() != PyTokenTypes.PLUS) {
    return false;
  }
  final Collection<PyExpression> expressions=getSimpleExpressions((PyBinaryExpression)element);
  if (expressions.size() == 0) {
    return false;
  }
  boolean hasReferenceOrCall=false;
  for (  PyExpression expression : expressions) {
    if (expression instanceof PyReferenceExpression || expression instanceof PyCallExpression)     hasReferenceOrCall=true;
 else     if (!(expression instanceof PyStringLiteralExpression))     return false;
  }
  if (!hasReferenceOrCall)   return false;
  setText(PyBundle.message("INTN.replace.plus.with.format.operator"));
  return true;
}
