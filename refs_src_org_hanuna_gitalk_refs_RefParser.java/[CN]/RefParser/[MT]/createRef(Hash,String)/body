{
  if (longRefPath.equals("HEAD")) {
    return new Ref(hash,"HEAD",Ref.Type.LOCAL_BRANCH);
  }
  if (longRefPath.equals("refs/stash")) {
    return new Ref(hash,"stash",Ref.Type.STASH);
  }
  String name;
  if ((name=getRefName(longRefPath,"refs/heads/")) != null) {
    return new Ref(hash,name,Ref.Type.LOCAL_BRANCH);
  }
  if ((name=getRefName(longRefPath,"refs/remotes/")) != null) {
    return new Ref(hash,name,Ref.Type.REMOTE_BRANCH);
  }
  if ((name=getRefName(longRefPath,"refs/tags/")) != null) {
    return new Ref(hash,name,Ref.Type.TAG);
  }
  throw new IllegalArgumentException("Illegal path ref: " + longRefPath);
}
