{
  final PsiDocumentManager manager=PsiDocumentManager.getInstance(whitespace.getProject());
  final Document document=manager.getDocument(whitespace.getContainingFile());
  if (document != null) {
    final PyElementGenerator generator=PyElementGenerator.getInstance(whitespace.getProject());
    final PsiWhiteSpace newWhitespace=generator.createPhysicalFromText(LanguageLevel.forElement(whitespace),PsiWhiteSpace.class,"\n");
    manager.doPostponedOperationsAndUnblockDocument(document);
    CodeStyleManager.getInstance(newWhitespace.getProject()).performActionWithFormatterDisabled(new Computable<PsiWhiteSpace>(){
      @Override public PsiWhiteSpace compute(){
        return (PsiWhiteSpace)whitespace.replace(newWhitespace);
      }
    }
);
  }
  return whitespace;
}
