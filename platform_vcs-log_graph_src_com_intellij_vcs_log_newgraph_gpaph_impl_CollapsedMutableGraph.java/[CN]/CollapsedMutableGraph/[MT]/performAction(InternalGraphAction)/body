{
  myThickHoverController.performAction(action);
  if (action instanceof ClickInternalGraphAction) {
    GraphElement element=((ClickInternalGraphAction)action).getInfo();
    if (element != null) {
      Edge edge=containedCollapsedEdge(element);
      if (edge != null) {
        myGraphWithElementsInfo.expand(getIndexInPermanentGraph(edge.getUpNodeVisibleIndex()),getIndexInPermanentGraph(edge.getDownNodeVisibleIndex()));
        return edge.getUpNodeVisibleIndex();
      }
      GraphFragment fragment=myFragmentGenerator.getLongFragment(element);
      if (fragment != null) {
        myGraphWithElementsInfo.collapse(getIndexInPermanentGraph(fragment.upVisibleNodeIndex),getIndexInPermanentGraph(fragment.downVisibleNodeIndex));
        return fragment.upVisibleNodeIndex;
      }
    }
  }
  return -1;
}
