{
  final Getter<Boolean> cancelGetter=new Getter<Boolean>(){
    public Boolean get(){
      return myVcs.getProject().isDisposed();
    }
  }
;
  for (  final VirtualFile vcsRoot : roots) {
    final List<Node> foundRoots=new ForNestedRootChecker(myVcs).getAllNestedWorkingCopies(vcsRoot,false,cancelGetter);
    if (foundRoots.isEmpty()) {
      myLonelyRoots.add(vcsRoot);
    }
    registerTopRoots(vcsRoot,foundRoots);
  }
  addNestedRoots(clearState,callback);
}
