{
  final Getter<Boolean> cancelGetter=new Getter<Boolean>(){
    public Boolean get(){
      return myVcs.getProject().isDisposed();
    }
  }
;
  for (  final VirtualFile vcsRoot : roots) {
    final List<Real> foundRoots=ForNestedRootChecker.getAllNestedWorkingCopies(vcsRoot,myVcs,false,cancelGetter);
    if (foundRoots.isEmpty()) {
      myLonelyRoots.add(vcsRoot);
    }
    registerTopRoots(vcsRoot,foundRoots);
  }
  addNestedRoots(clearState,callback);
}
