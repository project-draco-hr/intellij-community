{
  if (ThreadLocalDefendedInvoker.isInside())   return ContainerUtil.newArrayList(result);
synchronized (myMonitor) {
    final List<VirtualFile> cachedRoots=myMoreRealMapping.getUnderVcsRoots();
    final List<VirtualFile> lonelyRoots=myMoreRealMapping.getLonelyRoots();
    if (!lonelyRoots.isEmpty()) {
      myChecker.reportNoRoots(lonelyRoots);
    }
    return ContainerUtil.newArrayList(cachedRoots.isEmpty() ? result : cachedRoots);
  }
}
