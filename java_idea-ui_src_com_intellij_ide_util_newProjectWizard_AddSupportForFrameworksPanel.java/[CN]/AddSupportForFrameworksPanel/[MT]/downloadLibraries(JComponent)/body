{
  final Ref<Boolean> result=Ref.create(true);
  DumbService.allowStartingDumbModeInside(DumbModePermission.MAY_START_BACKGROUND,new Runnable(){
    @Override public void run(){
      applyLibraryOptionsForSelected();
      List<LibraryCompositionSettings> list=getLibrariesCompositionSettingsList();
      for (      LibraryCompositionSettings compositionSettings : list) {
        if (!compositionSettings.downloadFiles(parentComponent)) {
          result.set(false);
          return;
        }
      }
    }
  }
);
  if (!result.get()) {
    int answer=Messages.showYesNoDialog(parentComponent,ProjectBundle.message("warning.message.some.required.libraries.wasn.t.downloaded"),CommonBundle.getWarningTitle(),Messages.getWarningIcon());
    if (answer != Messages.YES) {
      return false;
    }
  }
  return true;
}
