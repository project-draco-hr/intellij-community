{
  final Ref<Boolean> result=Ref.create(true);
  DumbService.allowStartingDumbModeInside(DumbModePermission.MAY_START_BACKGROUND,ProjectManager.getInstance().getOpenProjects(),new Runnable(){
    @Override public void run(){
      applyLibraryOptionsForSelected();
      List<LibraryCompositionSettings> list=getLibrariesCompositionSettingsList();
      for (      LibraryCompositionSettings compositionSettings : list) {
        if (!compositionSettings.downloadFiles(myMainPanel)) {
          result.set(false);
          return;
        }
      }
    }
  }
);
  return result.get();
}
