{
  final AbstractExternalSystemSettings externalSystemSettings=ExternalSystemApiUtil.getSettings(myProject,myProjectSystemId);
  Collection<ExternalProjectSettings> projectsSettings=externalSystemSettings.getLinkedProjectsSettings();
  List<ProjectItem> projects=ContainerUtil.map(projectsSettings,new Function<ExternalProjectSettings,ProjectItem>(){
    @Override public ProjectItem fun(    ExternalProjectSettings settings){
      return new ProjectItem(uiAware.getProjectRepresentationName(settings.getExternalProjectPath(),null),settings);
    }
  }
);
  myTree=new SimpleTree();
  myRootNode=new RootNode();
  treeBuilder=createTreeBuilder(myProject,myRootNode,myTree);
  final ExternalProjectSettings currentProjectSettings=externalSystemSettings.getLinkedProjectSettings(projectPath);
  if (currentProjectSettings != null) {
    SwingHelper.updateItems(projectCombobox,projects,new ProjectItem(uiAware.getProjectRepresentationName(projectPath,null),currentProjectSettings));
  }
  projectCombobox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      updateTree(myRootNode);
    }
  }
);
}
