{
  List<String> paths=ContainerUtil.newArrayList(stateProvider.getProjectsTasksActivationMap(myProjectSystemId).keySet());
  paths.retainAll(projectSettings.getModules());
  return ContainerUtil.mapNotNull(ArrayUtil.toStringArray(paths),new Function<String,MyNode>(){
    @Override public MyNode fun(    final String path){
      final MyNode node=new ProjectNode(parent,stateProvider,projectSettings.getExternalProjectPath(),path);
      return node.getChildren().length > 0 ? node : null;
    }
  }
,new MyNode[]{});
}
