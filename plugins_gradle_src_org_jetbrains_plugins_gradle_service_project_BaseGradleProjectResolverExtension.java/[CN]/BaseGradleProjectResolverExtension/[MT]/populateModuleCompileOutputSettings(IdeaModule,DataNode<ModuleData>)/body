{
  ExternalProject externalProject=resolverCtx.getExtraProject(gradleModule,ExternalProject.class);
  if (externalProject != null) {
    processSourceSets(externalProject,ideModule,new SourceSetsProcessor(){
      @Override public void process(      @NotNull DataNode<GradleSourceSetData> dataNode,      @NotNull ExternalSourceSet sourceSet){
        for (        Map.Entry<IExternalSystemSourceType,ExternalSourceDirectorySet> directorySetEntry : sourceSet.getSources().entrySet()) {
          ExternalSystemSourceType sourceType=ExternalSystemSourceType.from(directorySetEntry.getKey());
          ExternalSourceDirectorySet sourceDirectorySet=directorySetEntry.getValue();
          final GradleSourceSetData sourceSetData=dataNode.getData();
          sourceSetData.setCompileOutputPath(sourceType,sourceDirectorySet.getOutputDir().getAbsolutePath());
          sourceSetData.setInheritProjectCompileOutputPath(sourceDirectorySet.isCompilerOutputPathInherited());
        }
      }
    }
);
    return;
  }
  IdeaCompilerOutput moduleCompilerOutput=gradleModule.getCompilerOutput();
  File buildDir=null;
  try {
    buildDir=gradleModule.getGradleProject().getBuildDirectory();
  }
 catch (  UnsupportedMethodException ignore) {
  }
  Map<ExternalSystemSourceType,File> compileOutputPaths=ContainerUtil.newHashMap();
  boolean inheritOutputDirs=false;
  ModuleData moduleData=ideModule.getData();
  if (moduleCompilerOutput != null) {
    compileOutputPaths.put(ExternalSystemSourceType.SOURCE,moduleCompilerOutput.getOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.RESOURCE,moduleCompilerOutput.getOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.TEST,moduleCompilerOutput.getTestOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.TEST_RESOURCE,moduleCompilerOutput.getTestOutputDir());
    inheritOutputDirs=moduleCompilerOutput.getInheritOutputDirs();
  }
  for (  Map.Entry<ExternalSystemSourceType,File> sourceTypeFileEntry : compileOutputPaths.entrySet()) {
    final File outputPath=ObjectUtils.chooseNotNull(sourceTypeFileEntry.getValue(),buildDir);
    if (outputPath != null) {
      moduleData.setCompileOutputPath(sourceTypeFileEntry.getKey(),outputPath.getAbsolutePath());
    }
  }
  moduleData.setInheritProjectCompileOutputPath(inheritOutputDirs);
}
