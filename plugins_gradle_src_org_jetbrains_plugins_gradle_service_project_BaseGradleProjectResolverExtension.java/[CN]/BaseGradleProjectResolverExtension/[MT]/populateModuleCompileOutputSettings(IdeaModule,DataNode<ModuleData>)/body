{
  IdeaCompilerOutput moduleCompilerOutput=gradleModule.getCompilerOutput();
  File sourceCompileOutputPath=null;
  File testCompileOutputPath=null;
  boolean inheritOutputDirs=false;
  ModuleData moduleData=ideModule.getData();
  if (moduleCompilerOutput != null) {
    sourceCompileOutputPath=moduleCompilerOutput.getOutputDir();
    testCompileOutputPath=moduleCompilerOutput.getTestOutputDir();
    inheritOutputDirs=moduleCompilerOutput.getInheritOutputDirs();
  }
  if (!inheritOutputDirs && (sourceCompileOutputPath == null || testCompileOutputPath == null)) {
    ModuleExtendedModel moduleExtendedModel=resolverCtx.getExtraProject(gradleModule,ModuleExtendedModel.class);
    if (moduleExtendedModel != null) {
      ExtIdeaCompilerOutput output=moduleExtendedModel.getCompilerOutput();
      if (output != null) {
        if (sourceCompileOutputPath == null) {
          sourceCompileOutputPath=output.getMainClassesDir();
        }
        if (testCompileOutputPath == null) {
          testCompileOutputPath=output.getTestClassesDir();
        }
      }
    }
  }
  if (sourceCompileOutputPath != null) {
    moduleData.setCompileOutputPath(ExternalSystemSourceType.SOURCE,sourceCompileOutputPath.getAbsolutePath());
  }
  if (testCompileOutputPath != null) {
    moduleData.setCompileOutputPath(ExternalSystemSourceType.TEST,testCompileOutputPath.getAbsolutePath());
  }
  moduleData.setInheritProjectCompileOutputPath(inheritOutputDirs || sourceCompileOutputPath == null);
}
