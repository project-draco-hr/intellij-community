{
  IdeaCompilerOutput moduleCompilerOutput=gradleModule.getCompilerOutput();
  File buildDir=null;
  try {
    buildDir=gradleModule.getGradleProject().getBuildDirectory();
  }
 catch (  UnsupportedMethodException ignore) {
  }
  Map<ExternalSystemSourceType,File> compileOutputPaths=ContainerUtil.newHashMap();
  boolean inheritOutputDirs=false;
  ModuleData moduleData=ideModule.getData();
  if (moduleCompilerOutput != null) {
    compileOutputPaths.put(ExternalSystemSourceType.SOURCE,moduleCompilerOutput.getOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.RESOURCE,moduleCompilerOutput.getOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.TEST,moduleCompilerOutput.getTestOutputDir());
    compileOutputPaths.put(ExternalSystemSourceType.TEST_RESOURCE,moduleCompilerOutput.getOutputDir());
    inheritOutputDirs=moduleCompilerOutput.getInheritOutputDirs();
  }
  ExternalProject externalProject=resolverCtx.getExtraProject(gradleModule,ExternalProject.class);
  if (externalProject != null) {
    externalProject=new DefaultExternalProject(externalProject);
    buildDir=buildDir == null ? externalProject.getBuildDir() : buildDir;
    if (!inheritOutputDirs) {
      fixCompileOutputPaths(compileOutputPaths,externalProject);
    }
  }
 else {
    LOG.warn(String.format("Unable to get ExternalProject model for '%s'",gradleModule.getName()));
  }
  for (  Map.Entry<ExternalSystemSourceType,File> sourceTypeFileEntry : compileOutputPaths.entrySet()) {
    final File outputPath=ObjectUtils.chooseNotNull(sourceTypeFileEntry.getValue(),buildDir);
    if (outputPath != null) {
      moduleData.setCompileOutputPath(sourceTypeFileEntry.getKey(),outputPath.getAbsolutePath());
    }
  }
  moduleData.setInheritProjectCompileOutputPath(inheritOutputDirs);
}
