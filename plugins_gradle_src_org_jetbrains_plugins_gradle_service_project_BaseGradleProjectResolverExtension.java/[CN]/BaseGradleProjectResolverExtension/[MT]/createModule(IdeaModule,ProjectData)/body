{
  final String moduleName=gradleModule.getName();
  if (moduleName == null) {
    throw new IllegalStateException("Module with undefined name detected: " + gradleModule);
  }
  final String moduleConfigPath=GradleUtil.getConfigPath(gradleModule.getGradleProject(),projectData.getLinkedExternalProjectPath());
  if (ExternalSystemDebugEnvironment.DEBUG_ORPHAN_MODULES_PROCESSING) {
    LOG.info(String.format("Creating module data ('%s') with the external config path: '%s'",gradleModule.getGradleProject().getPath(),moduleConfigPath));
  }
  final String path=gradleModule.getGradleProject().getPath();
  final ModuleData moduleData=new ModuleData(StringUtil.isEmpty(path) || ":".equals(path) ? moduleName : path,GradleConstants.SYSTEM_ID,StdModuleTypes.JAVA.getId(),moduleName,moduleConfigPath,moduleConfigPath);
  final ModuleExtendedModel moduleExtendedModel=resolverCtx.getExtraProject(gradleModule,ModuleExtendedModel.class);
  if (moduleExtendedModel != null) {
    moduleData.setGroup(moduleExtendedModel.getGroup());
    moduleData.setVersion(moduleExtendedModel.getVersion());
    moduleData.setArtifacts(moduleExtendedModel.getArtifacts());
  }
  return moduleData;
}
