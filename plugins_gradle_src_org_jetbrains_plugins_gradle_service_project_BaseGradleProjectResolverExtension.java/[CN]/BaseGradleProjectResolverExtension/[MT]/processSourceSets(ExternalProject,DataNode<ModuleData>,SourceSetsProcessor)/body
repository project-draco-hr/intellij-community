{
  Map<String,DataNode<GradleSourceSetData>> sourceSetsMap=ContainerUtil.newHashMap();
  for (  DataNode<GradleSourceSetData> dataNode : ExternalSystemApiUtil.findAll(ideModule,GradleSourceSetData.KEY)) {
    sourceSetsMap.put(dataNode.getData().getId(),dataNode);
  }
  for (  ExternalSourceSet sourceSet : externalProject.getSourceSets().values()) {
    if (sourceSet == null || sourceSet.getSources().isEmpty())     continue;
    final String moduleId=getModuleId(externalProject,sourceSet);
    final DataNode<? extends ModuleData> moduleDataNode=sourceSetsMap.isEmpty() ? ideModule : sourceSetsMap.get(moduleId);
    if (moduleDataNode == null)     continue;
    processor.process(moduleDataNode,sourceSet);
  }
}
