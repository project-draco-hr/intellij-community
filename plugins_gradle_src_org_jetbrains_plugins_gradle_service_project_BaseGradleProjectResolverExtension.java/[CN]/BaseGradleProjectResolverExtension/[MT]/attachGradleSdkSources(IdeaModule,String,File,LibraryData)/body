{
  if (libFile == null || !libName.startsWith("gradle-"))   return;
  final BuildScriptClasspathModel buildScriptClasspathModel=resolverCtx.getExtraProject(gradleModule,BuildScriptClasspathModel.class);
  if (buildScriptClasspathModel == null)   return;
  final File gradleHomeDir=buildScriptClasspathModel.getGradleHomeDir();
  if (gradleHomeDir == null)   return;
  if (!FileUtil.isAncestor(gradleHomeDir,libFile,true))   return;
  File libOrPluginsFile=libFile.getParentFile();
  if (libOrPluginsFile != null && ("plugins".equals(libOrPluginsFile.getName()))) {
    libOrPluginsFile=libOrPluginsFile.getParentFile();
  }
  if (libOrPluginsFile != null && "lib".equals(libOrPluginsFile.getName()) && libOrPluginsFile.getParentFile() != null) {
    File srcDir=new File(libOrPluginsFile.getParentFile(),"src");
    GradleVersion current=GradleVersion.version(buildScriptClasspathModel.getGradleVersion());
    if (current.compareTo(GradleVersion.version("1.9")) >= 0) {
      int endIndex=libName.indexOf(current.getVersion());
      if (endIndex != -1) {
        String srcDirChild=libName.substring("gradle-".length(),endIndex - 1);
        srcDir=new File(srcDir,srcDirChild);
      }
    }
    if (srcDir.isDirectory()) {
      library.addPath(LibraryPathType.SOURCE,srcDir.getAbsolutePath());
    }
  }
}
