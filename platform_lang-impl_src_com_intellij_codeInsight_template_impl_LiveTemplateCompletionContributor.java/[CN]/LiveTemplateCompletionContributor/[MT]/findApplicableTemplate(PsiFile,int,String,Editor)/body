{
  final Set<String> possiblePrefixes=ContainerUtil.newLinkedHashSet(key);
  final CustomTemplateCallback callback=new CustomTemplateCallback(editor,file,false);
  for (  CustomLiveTemplate customLiveTemplate : CustomLiveTemplate.EP_NAME.getExtensions()) {
    final String customKey=customLiveTemplate.computeTemplateKey(callback);
    if (customKey != null) {
      possiblePrefixes.add(customKey);
    }
  }
  return ContainerUtil.find(listApplicableTemplates(file,offset),new Condition<TemplateImpl>(){
    @Override public boolean value(    TemplateImpl template){
      return possiblePrefixes.contains(template.getKey());
    }
  }
);
}
