{
  if (!templatesShown.getAndSet(true)) {
    for (    final Map.Entry<TemplateImpl,String> entry : templates.entrySet()) {
      result.withPrefixMatcher(result.getPrefixMatcher().cloneWithPrefix(StringUtil.notNullize(entry.getValue()))).addElement(new LiveTemplateLookupElementImpl(entry.getKey(),false));
    }
  }
}
