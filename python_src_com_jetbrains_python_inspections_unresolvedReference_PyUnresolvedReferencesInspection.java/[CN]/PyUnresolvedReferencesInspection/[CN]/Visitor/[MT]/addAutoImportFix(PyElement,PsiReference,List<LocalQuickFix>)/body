{
  final PsiFile file=InjectedLanguageManager.getInstance(node.getProject()).getTopLevelFile(node);
  if (!(file instanceof PyFile))   return;
  AutoImportQuickFix importFix=PythonReferenceImporter.proposeImportFix(node,reference);
  if (importFix != null) {
    if (!suppressHintForAutoImport(node,importFix) && PyCodeInsightSettings.getInstance().SHOW_IMPORT_POPUP) {
      final AutoImportHintAction autoImportHintAction=new AutoImportHintAction(importFix);
      actions.add(autoImportHintAction);
    }
 else {
      actions.add(importFix);
    }
    if (ScopeUtil.getScopeOwner(node) instanceof PyFunction) {
      actions.add(importFix.forLocalImport());
    }
  }
}
