{
  DataWaiter dataWaiter=new DataWaiter();
  VcsLogRefresher loader=createLoader(dataWaiter);
  loader.readFirstBlock();
  myLogProvider.blockRefresh();
  loader.refresh(Collections.singletonList(myProjectRoot));
  loader.readFirstBlock();
  myLogProvider.unblockRefresh();
  dataWaiter.get(1,TimeUnit.SECONDS);
  assertFalse("Only one refresh should have happened",dataWaiter.failed());
}
