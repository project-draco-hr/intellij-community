{
  DataWaiter dataWaiter=new DataWaiter();
  VcsLogRefresher loader=createLoader(dataWaiter);
  initAndWaitForFirstRefresh(dataWaiter,loader);
  String newCommit="4|-a3|-a2";
  myLogProvider.appendHistory(log(newCommit));
  loader.refresh(Collections.singletonList(myProjectRoot));
  DataPack result=dataWaiter.get(1,TimeUnit.SECONDS);
  assertNotNull(result);
  List<String> allCommits=ContainerUtil.newArrayList();
  allCommits.add(newCommit);
  allCommits.addAll(myCommits);
  assertDataPack(log(allCommits),result.getPermanentGraph().getAllCommits());
}
