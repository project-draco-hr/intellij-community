{
  DataWaiter dataWaiter=new DataWaiter();
  VcsLogRefresher loader=createLoader(dataWaiter);
  myLogProvider.blockFullLog();
  loader.readFirstBlock();
  assertTimeout(dataWaiter,"Refresh waiter should have failed on the timeout");
  myLogProvider.unblockFullLog();
  DataPack result=dataWaiter.get(1,TimeUnit.SECONDS);
  assertNotNull(result);
  assertDataPack(log(myCommits),result.getPermanentGraph().getAllCommits());
}
