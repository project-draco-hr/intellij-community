{
  myDataHolder=new VcsLogDataHolder(myProject,myProject,myLogProviders,ServiceManager.getService(myProject,VcsLogSettings.class),ServiceManager.getService(myProject,VcsLogUiProperties.class),Consumer.EMPTY_CONSUMER);
  return new VcsLogRefresherImpl(myProject,myDataHolder.getHashMap(),myLogProviders,myDataHolder.getUserRegistry(),myTopDetailsCache,dataPackConsumer,FAILING_EXCEPTION_HANDLER,RECENT_COMMITS_COUNT){
    @Override protected void startNewBackgroundTask(    @NotNull final Task.Backgroundable refreshTask){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          LOG.debug("Starting a background task...");
          myStartedTasks.add(((ProgressManagerImpl)ProgressManager.getInstance()).runProcessWithProgressAsynchronously(refreshTask));
          LOG.debug(myStartedTasks.size() + " started tasks");
        }
      }
);
    }
  }
;
}
