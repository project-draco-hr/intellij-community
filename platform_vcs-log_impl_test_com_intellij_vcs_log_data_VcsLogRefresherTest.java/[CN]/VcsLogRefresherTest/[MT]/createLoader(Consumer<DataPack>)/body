{
  myLogData=new VcsLogData(myProject,myLogProviders,new Consumer<Exception>(){
    @Override public void consume(    Exception e){
      LOG.error(e);
    }
  }
);
  Disposer.register(myProject,myLogData);
  return new VcsLogRefresherImpl(myProject,myLogData.getHashMap(),myLogProviders,myLogData.getUserRegistry(),myTopDetailsCache,dataPackConsumer,FAILING_EXCEPTION_HANDLER,RECENT_COMMITS_COUNT){
    @Override protected void startNewBackgroundTask(    @NotNull final Task.Backgroundable refreshTask){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          LOG.debug("Starting a background task...");
          myStartedTasks.add(((ProgressManagerImpl)ProgressManager.getInstance()).runProcessWithProgressAsynchronously(refreshTask));
          LOG.debug(myStartedTasks.size() + " started tasks");
        }
      }
);
    }
  }
;
}
