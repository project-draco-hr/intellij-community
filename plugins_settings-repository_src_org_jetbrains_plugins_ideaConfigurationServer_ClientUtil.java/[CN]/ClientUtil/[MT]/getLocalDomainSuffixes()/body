{
  Set<String> domains=new HashSet<String>();
  final Enumeration<NetworkInterface> interfaces;
  try {
    interfaces=NetworkInterface.getNetworkInterfaces();
  }
 catch (  SocketException ignored) {
    return domains;
  }
  while (interfaces.hasMoreElements()) {
    NetworkInterface networkInterface=interfaces.nextElement();
    final Enumeration<InetAddress> addresses=networkInterface.getInetAddresses();
    while (addresses.hasMoreElements()) {
      InetAddress address=addresses.nextElement();
      if (address.isMulticastAddress() || address instanceof Inet6Address || address.isLoopbackAddress()) {
        continue;
      }
      String domain=extractDomainSuffix(address.getCanonicalHostName());
      if (hasLetters(domain)) {
        domains.add(domain);
      }
    }
  }
  return domains;
}
