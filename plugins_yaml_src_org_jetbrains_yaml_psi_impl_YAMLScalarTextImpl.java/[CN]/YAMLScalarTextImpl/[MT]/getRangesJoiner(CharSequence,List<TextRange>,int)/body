{
  final TextRange leftRange=contentRanges.get(indexBefore);
  final TextRange rightRange=contentRanges.get(indexBefore + 1);
  if (leftRange.isEmpty()) {
    return "\n";
  }
  if (startsWithWhitespace(text,leftRange) || startsWithWhitespace(text,rightRange)) {
    return "\n";
  }
  if (rightRange.isEmpty()) {
    int i=indexBefore + 2;
    while (i < contentRanges.size() && contentRanges.get(i).isEmpty()) {
      i++;
    }
    if (i < contentRanges.size() && startsWithWhitespace(text,contentRanges.get(i))) {
      return "\n";
    }
 else {
      return "";
    }
  }
  return " ";
}
