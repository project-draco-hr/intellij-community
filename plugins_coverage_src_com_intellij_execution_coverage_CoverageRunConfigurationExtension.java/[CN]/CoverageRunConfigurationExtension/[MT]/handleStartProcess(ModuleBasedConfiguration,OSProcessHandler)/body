{
  final CoverageEnabledConfiguration coverageEnabledConfiguration=CoverageEnabledConfiguration.get(configuration);
  if (coverageEnabledConfiguration.isCoverageEnabled()) {
    handler.addProcessListener(new ProcessAdapter(){
      public void processTerminated(      final ProcessEvent event){
        final CoverageDataManager coverageDataManager=CoverageDataManager.getInstance(configuration.getProject());
        final CoverageEnabledConfiguration coverageEnabledConfiguration=CoverageEnabledConfiguration.get(configuration);
        final CoverageSuite coverageSuite=coverageEnabledConfiguration.getCurrentCoverageSuite();
        if (coverageSuite != null) {
          coverageDataManager.coverageGathered(coverageSuite);
        }
      }
    }
);
  }
}
