{
  if (context == null)   return Collections.emptySet();
  if (packageName.contains("*")) {
    final Pattern pattern=PatternUtil.fromMask(packageName);
    final Set<PsiPackage> packages=new LinkedHashSet<PsiPackage>();
    processSubPackages(context,new Processor<PsiPackage>(){
      @Override public boolean process(      PsiPackage psiPackage){
        String name=psiPackage.getName();
        if (name != null && pattern.matcher(name).matches()) {
          packages.add(psiPackage);
        }
        return true;
      }
    }
);
    return packages;
  }
  return super.resolvePackageName(context,packageName);
}
