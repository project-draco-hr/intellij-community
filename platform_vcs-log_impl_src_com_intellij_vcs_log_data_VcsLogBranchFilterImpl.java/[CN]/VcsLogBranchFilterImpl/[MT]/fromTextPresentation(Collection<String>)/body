{
  if (strings.isEmpty())   return null;
  List<String> branches=new ArrayList<String>();
  List<String> excludedBranches=new ArrayList<String>();
  List<Pattern> patterns=new ArrayList<Pattern>();
  List<Pattern> excludedPatterns=new ArrayList<Pattern>();
  for (  String string : strings) {
    boolean isRegexp=isRegexp(string);
    boolean isExcluded=string.startsWith("-");
    string=isExcluded ? string.substring(1) : string;
    if (isRegexp) {
      if (isExcluded) {
        excludedPatterns.add(Pattern.compile(string));
      }
 else {
        patterns.add(Pattern.compile(string));
      }
    }
 else {
      if (isExcluded) {
        excludedBranches.add(string);
      }
 else {
        branches.add(string);
      }
    }
  }
  return new VcsLogBranchFilterImpl(branches,patterns,excludedBranches,excludedPatterns);
}
