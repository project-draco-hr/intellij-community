{
  List<String> branchNames=new ArrayList<String>();
  List<String> excludedBranches=new ArrayList<String>();
  List<Pattern> patterns=new ArrayList<Pattern>();
  List<Pattern> excludedPatterns=new ArrayList<Pattern>();
  for (  String string : strings) {
    boolean isExcluded=string.startsWith("-");
    string=isExcluded ? string.substring(1) : string;
    boolean isRegexp=!existingBranches.contains(string);
    if (isRegexp) {
      try {
        Pattern pattern=Pattern.compile(string);
        if (isExcluded) {
          excludedPatterns.add(pattern);
        }
 else {
          patterns.add(pattern);
        }
      }
 catch (      PatternSyntaxException e) {
        LOG.warn("Pattern " + string + " is not a proper regular expression and no branch can be found with that name.",e);
        if (isExcluded) {
          excludedBranches.add(string);
        }
 else {
          branchNames.add(string);
        }
      }
    }
 else {
      if (isExcluded) {
        excludedBranches.add(string);
      }
 else {
        branchNames.add(string);
      }
    }
  }
  return new VcsLogBranchFilterImpl(branchNames,patterns,excludedBranches,excludedPatterns);
}
