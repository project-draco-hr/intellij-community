{
  myUpdateQueue.queue(new Update(MavenProjectIndicesManager.this){
    public void run(){
      Set<Pair<String,String>> remoteRepositoriesIdsAndUrls;
      File localRepository;
      AccessToken accessToken=ReadAction.start();
      try {
        if (myProject.isDisposed())         return;
        remoteRepositoriesIdsAndUrls=collectRemoteRepositoriesIdsAndUrls();
        localRepository=getLocalRepository();
      }
  finally {
        accessToken.finish();
      }
      myProjectIndices=MavenIndicesManager.getInstance().ensureIndicesExist(myProject,localRepository,remoteRepositoriesIdsAndUrls);
      if (consumer != null) {
        consumer.consume(myProjectIndices);
      }
    }
  }
);
}
