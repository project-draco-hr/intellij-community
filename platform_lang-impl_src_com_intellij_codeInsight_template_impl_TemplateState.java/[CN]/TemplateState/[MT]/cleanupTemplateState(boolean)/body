{
  final Editor editor=myEditor;
  fireBeforeTemplateFinished();
  if (!isDisposed()) {
    int oldVar=myCurrentVariableNumber;
    setCurrentVariableNumber(-1);
    currentVariableChanged(oldVar);
    TemplateManagerImpl.clearTemplateState(editor);
    fireTemplateFinished(brokenOff);
  }
  myListeners.clear();
  myProject=null;
}
