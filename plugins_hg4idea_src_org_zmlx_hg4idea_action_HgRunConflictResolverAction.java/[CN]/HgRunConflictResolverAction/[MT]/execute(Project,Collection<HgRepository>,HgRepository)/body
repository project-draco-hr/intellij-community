{
  final HgRepository repository;
  if (repositories.size() > 1) {
    repository=letUserSelectRepository(project,repositories,selectedRepo);
  }
 else   if (repositories.size() == 1) {
    repository=repositories.iterator().next();
  }
 else {
    repository=null;
  }
  if (repository != null) {
    new Task.Backgroundable(project,HgVcsMessages.message("action.hg4idea.run.conflict.resolver.description")){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        new HgConflictResolver(project).resolve(repository.getRoot());
        markDirtyAndHandleErrors(project,repository.getRoot());
      }
    }
.queue();
  }
}
