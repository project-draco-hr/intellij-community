{
  final HgRepository repository=repositories.size() > 1 ? letUserSelectRepository(project,repositories,selectedRepo) : ContainerUtil.getFirstItem(repositories);
  if (repository != null) {
    new Task.Backgroundable(project,HgVcsMessages.message("action.hg4idea.run.conflict.resolver.description")){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        new HgConflictResolver(project).resolve(repository.getRoot());
        HgErrorUtil.markDirtyAndHandleErrors(project,repository.getRoot());
      }
    }
.queue();
  }
}
