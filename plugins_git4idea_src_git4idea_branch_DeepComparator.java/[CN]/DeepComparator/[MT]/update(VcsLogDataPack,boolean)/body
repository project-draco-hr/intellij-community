{
  if (myTask == null) {
    return;
  }
  if (refreshHappened) {
    String comparedBranch=myTask.myComparedBranch;
    Map<GitRepository,GitBranch> repositoriesWithCurrentBranches=myTask.myRepositoriesWithCurrentBranches;
    VcsLogDataProvider provider=myTask.myProvider;
    stopTask();
    Map<GitRepository,GitBranch> repositories=getRepositories(dataPack.getLogProviders(),comparedBranch);
    if (repositories.equals(repositoriesWithCurrentBranches)) {
      highlightInBackground(comparedBranch,provider);
    }
  }
 else {
    VcsLogBranchFilter branchFilter=dataPack.getFilters().getBranchFilter();
    if (branchFilter == null || !myTask.myComparedBranch.equals(VcsLogUtil.getSingleFilteredBranch(branchFilter,dataPack.getRefs()))) {
      stopAndUnhighlight();
    }
  }
}
