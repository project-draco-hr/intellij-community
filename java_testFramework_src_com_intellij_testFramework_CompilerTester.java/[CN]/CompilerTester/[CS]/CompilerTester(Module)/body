{
  myModule=module;
  myMainOutput=new TempDirTestFixtureImpl();
  myMainOutput.setUp();
  CompilerManagerImpl.testSetup();
  new WriteCommandAction(getProject()){
    @Override protected void run(    Result result) throws Throwable {
      CompilerProjectExtension.getInstance(getProject()).setCompilerOutputUrl(myMainOutput.findOrCreateDir("out").getUrl());
      CompilerTestUtil.enableExternalCompiler();
      ModuleRootModificationUtil.setModuleSdk(myModule,JavaAwareProjectJdkTableImpl.getInstanceEx().getInternalJdk());
    }
  }
.execute();
}
