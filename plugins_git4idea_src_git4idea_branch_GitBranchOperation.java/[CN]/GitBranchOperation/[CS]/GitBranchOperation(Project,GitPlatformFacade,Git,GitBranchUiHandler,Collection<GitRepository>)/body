{
  myProject=project;
  myFacade=facade;
  myGit=git;
  myUiHandler=uiHandler;
  myRepositories=repositories;
  myCurrentHeads=ContainerUtil.map2Map(repositories,new Function<GitRepository,Pair<GitRepository,String>>(){
    @Override public Pair<GitRepository,String> fun(    GitRepository repository){
      GitLocalBranch currentBranch=repository.getCurrentBranch();
      return Pair.create(repository,currentBranch == null ? repository.getCurrentRevision() : currentBranch.getName());
    }
  }
);
  mySuccessfulRepositories=new ArrayList<GitRepository>();
  mySkippedRepositories=new ArrayList<GitRepository>();
  myRemainingRepositories=new ArrayList<GitRepository>(myRepositories);
  mySettings=myFacade.getSettings(myProject);
}
