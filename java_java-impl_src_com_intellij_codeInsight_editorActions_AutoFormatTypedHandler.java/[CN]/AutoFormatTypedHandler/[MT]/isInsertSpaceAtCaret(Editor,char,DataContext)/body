{
  if (!isSpaceAroundAssignment(editor,dataContext)) {
    return false;
  }
  int caretOffset=editor.getCaretModel().getOffset();
  CharSequence text=editor.getDocument().getImmutableCharSequence();
  boolean insertBeforeEq=charTyped == '=' && isInsertSpaceBeforeEq(caretOffset,text);
  boolean insertAfterEq=myLastTypedChar == '=' && isInsertSpaceBeforeNewChar(charTyped) && isSameDocumentAsPrevious(editor);
  return (insertBeforeEq || insertAfterEq) && !isInsideStringLiteral(editor);
}
