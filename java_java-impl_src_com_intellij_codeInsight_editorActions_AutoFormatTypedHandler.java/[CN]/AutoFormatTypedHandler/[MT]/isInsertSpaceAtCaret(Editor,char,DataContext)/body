{
  if (!isSpaceAroundAssignment(editor,dataContext)) {
    return false;
  }
  int caretOffset=editor.getCaretModel().getOffset();
  CharSequence text=editor.getDocument().getImmutableCharSequence();
  boolean insertBeforeEq=charTyped == '=' && isInsertSpaceBeforeEq(caretOffset,text);
  boolean insertAfterEq=caretOffset > 0 && caretOffset - 1 < text.length() && text.charAt(caretOffset - 1) == '=' && isInsertSpaceBeforeNewChar(charTyped);
  return (insertBeforeEq || insertAfterEq) && !isInsideStringLiteral(editor);
}
