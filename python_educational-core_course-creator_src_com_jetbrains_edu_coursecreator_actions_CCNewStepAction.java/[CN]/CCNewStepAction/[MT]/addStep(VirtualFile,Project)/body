{
  TaskFile taskFile=StudyUtils.getTaskFile(project,virtualFile);
  if (taskFile == null) {
    return;
  }
  VirtualFile taskDir=StudyUtils.getTaskDir(virtualFile);
  if (taskDir == null) {
    return;
  }
  Task task=taskFile.getTask();
  List<Step> steps=task.getAdditionalSteps();
  createTestsForNewStep(project,task);
  createTaskDescriptionFile(project,taskDir,steps.size());
  Step step=new Step(task);
  steps.add(step);
  StudyStepManager.switchStep(project,task,steps.size() - 1);
}
