{
  return ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
    @Override public SourcePosition compute(){
      for (      PsiElement elem : getLineElements(original.getFile(),original.getLine())) {
        PsiElement remappedElement=remapElement(elem);
        if (remappedElement != null) {
          if (remappedElement.getTextOffset() <= original.getOffset())           break;
          return SourcePosition.createFromElement(remappedElement);
        }
      }
      return original;
    }
  }
);
}
