{
  return ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
    @Override public SourcePosition compute(){
      int lineNumber=original.getLine();
      PsiElement element=original.getElementAt();
      PsiClass aClass=getEnclosingClass(element);
      if (aClass != null) {
        if (Comparing.equal(myExpectedClassName,JVMNameUtil.getClassVMName(aClass))) {
          return original;
        }
        PsiFile file=original.getFile();
        for (        PsiElement elem : getLineElements(file,lineNumber)) {
          if (Comparing.equal(myExpectedClassName,JVMNameUtil.getClassVMName(getEnclosingClass(elem)))) {
            return SourcePosition.createFromElement(elem);
          }
        }
      }
      return original;
    }
  }
);
}
