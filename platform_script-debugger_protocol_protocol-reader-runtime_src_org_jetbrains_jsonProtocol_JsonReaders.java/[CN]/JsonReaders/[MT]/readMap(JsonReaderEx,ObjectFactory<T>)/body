{
  if (reader.peek() == JsonToken.NULL) {
    reader.skipValue();
    return null;
  }
  reader.beginObject();
  if (!reader.hasNext()) {
    reader.endObject();
    return Collections.emptyMap();
  }
  Map<String,T> map=new THashMap<String,T>();
  while (reader.hasNext()) {
    if (factory == null) {
      map.put(reader.nextName(),(T)read(reader));
    }
 else {
      map.put(reader.nextName(),factory.read(reader));
    }
  }
  reader.endObject();
  return map;
}
