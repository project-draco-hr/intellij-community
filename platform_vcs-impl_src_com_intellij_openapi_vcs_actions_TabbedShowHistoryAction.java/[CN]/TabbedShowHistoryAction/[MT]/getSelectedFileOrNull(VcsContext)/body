{
  FilePath result=null;
  VirtualFile[] virtualFileArray=context.getSelectedFiles();
  if (virtualFileArray.length != 0) {
    if (virtualFileArray.length > 1)     return null;
    if (virtualFileArray.length > 0) {
      result=VcsUtil.getFilePath(virtualFileArray[0]);
    }
  }
  File[] fileArray=context.getSelectedIOFiles();
  if (fileArray != null && fileArray.length > 0) {
    for (    File file : fileArray) {
      final File parentIoFile=file.getParentFile();
      if (parentIoFile == null)       continue;
      final VirtualFile parent=LocalFileSystem.getInstance().findFileByIoFile(parentIoFile);
      if (parent != null) {
        final FilePathImpl child=new FilePathImpl(parent,file.getName(),false);
        if (result != null)         return null;
        result=child;
      }
    }
  }
  return result;
}
