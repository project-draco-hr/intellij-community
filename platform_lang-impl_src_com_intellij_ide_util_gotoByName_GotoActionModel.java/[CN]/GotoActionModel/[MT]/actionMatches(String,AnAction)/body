{
  final Pattern compiledPattern=getPattern(pattern);
  final Presentation presentation=anAction.getTemplatePresentation();
  final String text=presentation.getText();
  final String description=presentation.getDescription();
  PatternMatcher matcher=getMatcher();
  if (text != null && matcher.matches(text,compiledPattern)) {
    return MatchMode.NAME;
  }
 else   if (description != null && !description.equals(text) && matcher.matches(description,compiledPattern)) {
    return MatchMode.DESCRIPTION;
  }
  if (text == null) {
    return MatchMode.NONE;
  }
  final String groupName=myActionGroups.get(anAction);
  if (groupName == null) {
    return matcher.matches(text,compiledPattern) ? MatchMode.NON_MENU : MatchMode.NONE;
  }
  return matcher.matches(groupName + " " + text,compiledPattern) ? MatchMode.GROUP : MatchMode.NONE;
}
