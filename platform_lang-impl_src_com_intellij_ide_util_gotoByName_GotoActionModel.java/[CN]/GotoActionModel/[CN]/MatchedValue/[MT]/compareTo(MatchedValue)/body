{
  boolean edt=ApplicationManager.getApplication().isDispatchThread();
  if (value instanceof ActionWrapper) {
    boolean available=edt && ((ActionWrapper)value).isAvailable();
    if (o.value instanceof BooleanOptionDescription || o.value instanceof ActionWrapper)     return available ? -1 : 1;
  }
  if (o.value instanceof ActionWrapper) {
    boolean available=edt && ((ActionWrapper)o.value).isAvailable();
    if (value instanceof BooleanOptionDescription)     return available ? 1 : -1;
  }
  if (value instanceof OptionDescription && o.value instanceof BooleanOptionDescription)   return 1;
  if (o.value instanceof OptionDescription && value instanceof BooleanOptionDescription)   return -1;
  if (value instanceof OptionDescription && !(o.value instanceof OptionDescription))   return 1;
  if (o.value instanceof OptionDescription && !(value instanceof OptionDescription))   return -1;
  int diff=o.getMatchingDegree() - getMatchingDegree();
  return diff != 0 ? diff : value.compareTo(o.value);
}
