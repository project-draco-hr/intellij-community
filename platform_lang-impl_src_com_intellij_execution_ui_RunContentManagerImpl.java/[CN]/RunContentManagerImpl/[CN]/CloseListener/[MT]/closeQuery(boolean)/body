{
  final RunContentDescriptor descriptor=getRunContentDescriptorByContent(myContent);
  if (descriptor == null) {
    return true;
  }
  final ProcessHandler processHandler=descriptor.getProcessHandler();
  if (processHandler == null || processHandler.isProcessTerminated() || processHandler.isProcessTerminating()) {
    return true;
  }
  final boolean destroyProcess;
  if (processHandler.isSilentlyDestroyOnClose() || Boolean.TRUE.equals(processHandler.getUserData(ProcessHandler.SILENTLY_DESTROY_ON_CLOSE))) {
    destroyProcess=true;
  }
 else {
    boolean canDisconnect=!Boolean.TRUE.equals(processHandler.getUserData(ALWAYS_USE_DEFAULT_STOPPING_BEHAVIOUR_KEY));
    GeneralSettings.ProcessCloseConfirmation rc=TerminateRemoteProcessDialog.show(myProject,descriptor.getDisplayName(),canDisconnect,processHandler.detachIsDefault());
    if (rc == null) {
      return false;
    }
    destroyProcess=rc == GeneralSettings.ProcessCloseConfirmation.TERMINATE;
  }
  if (destroyProcess) {
    processHandler.destroyProcess();
  }
 else {
    processHandler.detachProcess();
  }
  waitForProcess(descriptor,modal);
  return true;
}
