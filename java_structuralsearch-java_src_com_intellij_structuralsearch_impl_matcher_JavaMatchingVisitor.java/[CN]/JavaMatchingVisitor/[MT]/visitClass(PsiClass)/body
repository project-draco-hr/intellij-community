{
  if (clazz.hasTypeParameters()) {
    myMatchingVisitor.setResult(myMatchingVisitor.match(clazz.getTypeParameterList(),((PsiClass)myMatchingVisitor.getElement()).getTypeParameterList()));
    if (!myMatchingVisitor.getResult())     return;
  }
  PsiClass clazz2;
  if (myMatchingVisitor.getElement() instanceof PsiDeclarationStatement && myMatchingVisitor.getElement().getFirstChild() instanceof PsiClass) {
    clazz2=(PsiClass)myMatchingVisitor.getElement().getFirstChild();
  }
 else {
    clazz2=(PsiClass)myMatchingVisitor.getElement();
  }
  final boolean isTypedVar=myMatchingVisitor.getMatchContext().getPattern().isTypedVar(clazz.getNameIdentifier());
  if (clazz.getModifierList().getTextLength() > 0) {
    if (!myMatchingVisitor.match(clazz.getModifierList(),clazz2.getModifierList())) {
      myMatchingVisitor.setResult(false);
      return;
    }
  }
  myMatchingVisitor.setResult((myMatchingVisitor.matchText(clazz.getNameIdentifier(),clazz2.getNameIdentifier()) || isTypedVar) && compareClasses(clazz,clazz2));
  if (myMatchingVisitor.getResult() && isTypedVar) {
    PsiElement id=clazz2.getNameIdentifier();
    if (id == null)     id=clazz2;
    myMatchingVisitor.setResult(myMatchingVisitor.handleTypedElement(clazz.getNameIdentifier(),id));
  }
}
