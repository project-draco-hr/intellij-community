{
  Object prevScaleVal=defaults.get("hidpi.scaleFactor");
  float prevScale=prevScaleVal != null ? (Float)prevScaleVal : JBUI.scale(1f);
  if (prevScale == JBUI.scale(1f) && prevScaleVal != null)   return;
  List<String> myIntKeys=Arrays.asList("Tree.leftChildIndent","Tree.rightChildIndent");
  for (  Map.Entry<Object,Object> entry : defaults.entrySet()) {
    Object value=entry.getValue();
    String key=entry.getKey().toString();
    if (value instanceof Dimension && value instanceof UIResource) {
      entry.setValue(JBUI.size((Dimension)value).asUIResource());
    }
 else     if (value instanceof Insets && value instanceof UIResource) {
      entry.setValue(JBUI.insets(((Insets)value)).asUIResource());
    }
 else     if (value instanceof Integer) {
      if (key.endsWith(".maxGutterIconWidth") || myIntKeys.contains(key)) {
        int normValue=(int)((Integer)value / prevScale);
        entry.setValue(Integer.valueOf(JBUI.scale(normValue)));
      }
    }
  }
  defaults.put("hidpi.scaleFactor",JBUI.scale(1f));
}
