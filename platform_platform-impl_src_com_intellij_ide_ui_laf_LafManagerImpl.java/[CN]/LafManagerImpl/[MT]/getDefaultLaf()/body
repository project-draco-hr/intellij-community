{
  String wizardLafName=WelcomeWizardUtil.getWizardLAF();
  if (wizardLafName != null) {
    UIManager.LookAndFeelInfo laf=findLaf(wizardLafName);
    if (laf != null)     return laf;
    LOG.error("Could not find wizard L&F: " + wizardLafName);
  }
  if (SystemInfo.isMac) {
    String className=useIntelliJInsteadOfAqua() ? IntelliJLaf.class.getName() : UIManager.getSystemLookAndFeelClassName();
    UIManager.LookAndFeelInfo laf=findLaf(className);
    if (laf != null)     return laf;
    LOG.error("Could not find OS X L&F: " + className);
  }
  String defaultLafName=WelcomeWizardUtil.getDefaultLAF();
  if (defaultLafName == null) {
    defaultLafName=isIntelliJLafEnabled() ? IntelliJLaf.class.getName() : IdeaLookAndFeelInfo.CLASS_NAME;
  }
  UIManager.LookAndFeelInfo laf=findLaf(defaultLafName);
  if (laf != null)   return laf;
  throw new IllegalStateException("No default L&F found");
}
