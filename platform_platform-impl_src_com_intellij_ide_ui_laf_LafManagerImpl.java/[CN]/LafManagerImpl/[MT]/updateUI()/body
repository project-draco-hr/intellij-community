{
  final UIDefaults uiDefaults=UIManager.getLookAndFeelDefaults();
  fixPopupWeight();
  fixGtkPopupStyle();
  fixTreeWideSelection(uiDefaults);
  fixMenuIssues(uiDefaults);
  if (UIUtil.isUnderAquaLookAndFeel()) {
    uiDefaults.put("Panel.opaque",Boolean.TRUE);
  }
 else   if (UIUtil.isWinLafOnVista()) {
    uiDefaults.put("ComboBox.border",null);
  }
  initInputMapDefaults(uiDefaults);
  uiDefaults.put("Button.defaultButtonFollowsFocus",Boolean.FALSE);
  patchFileChooserStrings(uiDefaults);
  patchLafFonts(uiDefaults);
  patchHiDPI(uiDefaults);
  patchGtkDefaults(uiDefaults);
  fixSeparatorColor(uiDefaults);
  updateToolWindows();
  for (  Frame frame : Frame.getFrames()) {
    if (SystemInfo.isMac) {
      frame.setBackground(new Color(UIUtil.getPanelBackground().getRGB()));
    }
    updateUI(frame);
  }
  fireLookAndFeelChanged();
}
