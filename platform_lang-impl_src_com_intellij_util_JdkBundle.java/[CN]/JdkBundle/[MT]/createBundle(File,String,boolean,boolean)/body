{
  File javaHome=SystemInfo.isMac ? new File(jvm,homeSubPath) : jvm;
  boolean hasToolsJar=new File(javaHome,"lib" + File.separator + "tools.jar").exists();
  if (!SystemInfo.isMac && !hasToolsJar)   return null;
  Pair<String,Pair<Version,Integer>> nameVersionAndUpdate=getJDKNameVersionAndUpdate(jvm,homeSubPath);
  if (SystemInfo.isMac && nameVersionAndUpdate.second != null && nameVersionAndUpdate.second.first.isOrGreaterThan(1,7) && !hasToolsJar)   return null;
  return new JdkBundle(jvm,nameVersionAndUpdate.first,nameVersionAndUpdate.second,boot,bundled);
}
