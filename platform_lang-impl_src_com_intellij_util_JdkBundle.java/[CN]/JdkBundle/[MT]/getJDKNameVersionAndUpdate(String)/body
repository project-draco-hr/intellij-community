{
  GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(jvmPath + (SystemInfo.isMac ? "/Contents/Home/" : "/") + "jre"+ File.separator+ "bin"+ File.separator+ "java");
  commandLine.addParameter("-version");
  String displayVersion=null;
  Pair<Version,Integer> versionAndUpdate=null;
  try {
    displayVersion=ExecUtil.readFirstLine(commandLine.createProcess().getErrorStream(),null);
  }
 catch (  ExecutionException e) {
    LOG.debug(e);
  }
  if (displayVersion != null) {
    versionAndUpdate=VersionUtil.parseVersionAndUpdate(displayVersion,VERSION_UPDATE_PATTERNS);
    displayVersion=displayVersion.replaceFirst("\".*\"","");
  }
 else {
    displayVersion=new File(jvmPath).getName();
  }
  return Pair.create(displayVersion,versionAndUpdate);
}
