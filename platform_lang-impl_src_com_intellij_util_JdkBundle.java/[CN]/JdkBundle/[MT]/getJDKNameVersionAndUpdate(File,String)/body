{
  GeneralCommandLine commandLine=new GeneralCommandLine().withParentEnvironmentType(GeneralCommandLine.ParentEnvironmentType.NONE);
  commandLine.setExePath(new File(jvm,homeSubPath + File.separator + "jre"+ File.separator+ "bin"+ File.separator+ "java").getAbsolutePath());
  commandLine.addParameter("-version");
  String displayVersion=null;
  Pair<Version,Integer> versionAndUpdate=null;
  try {
    displayVersion=ExecUtil.readFirstLine(commandLine.createProcess().getErrorStream(),null);
  }
 catch (  ExecutionException e) {
    if (SystemInfo.isMac) {
      commandLine.setExePath(new File(jvm,homeSubPath + File.separator + "bin"+ File.separator+ "java").getAbsolutePath());
      try {
        displayVersion=ExecUtil.readFirstLine(commandLine.createProcess().getErrorStream(),null);
      }
 catch (      ExecutionException e1) {
        LOG.debug(e);
      }
    }
    LOG.debug(e);
  }
  if (displayVersion != null) {
    versionAndUpdate=VersionUtil.parseVersionAndUpdate(displayVersion,VERSION_UPDATE_PATTERNS);
    displayVersion=displayVersion.replaceFirst("\".*\"","");
  }
 else {
    displayVersion=jvm.getName();
  }
  return Pair.create(displayVersion,versionAndUpdate);
}
