{
  final CaretModel caretModel=editor.getCaretModel();
  final Caret caret=caretModel.getPrimaryCaret();
  final Document document=editor.getDocument();
  return !(editor.getComponent().getParent() instanceof EditorTextField) && document instanceof DocumentImpl && editor.getHighlighter() instanceof LexerEditorHighlighter&& !editor.getSelectionModel().hasSelection()&& caretModel.getCaretCount() == 1 && !isInVirtualSpace(editor,caret) && !isInsertion(document,caret.getOffset()) && !caret.isAtRtlLocation() && !caret.isAtBidiRunBoundary() && !KEY_CHARS_TO_SKIP.contains(c);
}
