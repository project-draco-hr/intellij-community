{
  final StringTokenizer tokenizer=new StringTokenizer(inputString,"\\/");
  boolean firstToken=true;
  while (tokenizer.hasMoreTokens()) {
    final String token=tokenizer.nextToken();
    if (token.equals(".") || token.equals("..")) {
      myErrorText=tokenizer.hasMoreTokens() ? "Can't create directory with name '" + token + "'" : "Can't create file with name '" + token + "'";
      return false;
    }
    if (firstToken) {
      final VirtualFile vFile=getDirectory().getVirtualFile();
      final VirtualFile child=vFile.findChild(token);
      if (child != null) {
        myErrorText="A " + (child.isDirectory() ? "directory" : "file") + " with name '"+ token+ "' already exists";
        return false;
      }
    }
    firstToken=false;
    if (FileTypeManager.getInstance().isFileIgnored(getFileName(token))) {
      myErrorText="'" + token + "' is an ignored name (Settings | Editor | File Types | Ignore files and folders)";
      return true;
    }
  }
  myErrorText=null;
  return true;
}
