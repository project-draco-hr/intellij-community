{
  final ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
  toolWindowManager.invokeLater(new Runnable(){
    @Override public void run(){
      boolean available=getFactory().getContribution().canContribute(myProject);
      final ToolWindow toolWindow=toolWindowManager.getToolWindow(myWindowId);
      if (toolWindow == null) {
        if (available) {
          createToolWindow(myProject,toolWindowManager).show(null);
        }
        return;
      }
      boolean doShow=!toolWindow.isAvailable() && available;
      if (toolWindow.isAvailable() && !available) {
        toolWindow.hide(null);
      }
      toolWindow.setAvailable(available,null);
      if (showIfAvailable && doShow) {
        toolWindow.show(null);
      }
    }
  }
);
}
