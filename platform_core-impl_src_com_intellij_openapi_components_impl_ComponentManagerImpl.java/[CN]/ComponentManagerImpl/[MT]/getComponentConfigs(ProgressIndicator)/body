{
  ArrayList<ComponentConfig> componentConfigs=new ArrayList<ComponentConfig>();
  boolean isDefaultProject=this instanceof Project && ((Project)this).isDefault();
  boolean headless=ApplicationManager.getApplication().isHeadlessEnvironment();
  for (  IdeaPluginDescriptor plugin : PluginManagerCore.getPlugins(new StartupProgress(){
    @Override public void showProgress(    String message,    float progress){
      indicator.setFraction(progress);
    }
  }
)) {
    if (PluginManagerCore.shouldSkipPlugin(plugin)) {
      continue;
    }
    ComponentConfig[] configs=getMyComponentConfigsFromDescriptor(plugin);
    componentConfigs.ensureCapacity(componentConfigs.size() + configs.length);
    for (    ComponentConfig config : configs) {
      if ((!isDefaultProject || config.isLoadForDefaultProject()) && isComponentSuitable(config.options) && config.prepareClasses(headless)) {
        config.pluginDescriptor=plugin;
        componentConfigs.add(config);
      }
    }
  }
  return componentConfigs;
}
