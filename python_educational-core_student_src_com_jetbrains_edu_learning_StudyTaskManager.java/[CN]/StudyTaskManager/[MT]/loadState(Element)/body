{
  int version=StudySerializationUtils.Xml.getVersion(state);
  if (version == -1) {
    LOG.error("StudyTaskManager doesn't contain any version:\n" + state.getValue());
    return;
  }
switch (version) {
case 1:
    state=StudySerializationUtils.Xml.convertToSecondVersion(state);
case 2:
  state=StudySerializationUtils.Xml.convertToThirdVersion(state,myProject);
}
XmlSerializer.deserializeInto(this,state.getChild(StudySerializationUtils.Xml.MAIN_ELEMENT));
VERSION=CURRENT_VERSION;
if (myCourse != null) {
myCourse.initCourse(true);
if (version != VERSION) {
  String updatedCoursePath=FileUtil.join(PathManager.getConfigPath(),"courses",myCourse.getName());
  if (new File(updatedCoursePath).exists()) {
    myCourse.setCourseDirectory(updatedCoursePath);
  }
}
}
}
