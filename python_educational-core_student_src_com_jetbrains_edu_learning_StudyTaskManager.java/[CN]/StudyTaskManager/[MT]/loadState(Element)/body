{
  try {
    int version=StudySerializationUtils.Xml.getVersion(state);
    if (version == -1) {
      LOG.error("StudyTaskManager doesn't contain any version:\n" + state.getValue());
      return;
    }
switch (version) {
case 1:
      state=StudySerializationUtils.Xml.convertToSecondVersion(state);
case 2:
    state=StudySerializationUtils.Xml.convertToThirdVersion(state,myProject);
}
XmlSerializer.deserializeInto(this,state.getChild(StudySerializationUtils.Xml.MAIN_ELEMENT));
VERSION=CURRENT_VERSION;
if (myCourse != null) {
  myCourse.initCourse(true);
  if (version != VERSION) {
    final File updatedCourse=new File(StudyProjectGenerator.OUR_COURSES_DIR,myCourse.getName());
    if (updatedCourse.exists()) {
      myCourse.setCourseDirectory(updatedCourse.getAbsolutePath());
    }
  }
}
}
 catch (StudySerializationUtils.StudyUnrecognizedFormatException e) {
LOG.error("Unexpected course format:\n",new XMLOutputter().outputString(state));
}
}
