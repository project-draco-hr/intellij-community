{
  MultiMap<String,String> groupNameToPatternsMap=MultiMap.createLinked();
  String currentGroupName="";
  @SuppressWarnings({"IOResourceOpenedButNotSafelyClosed"}) BufferedReader bufferedReader=new BufferedReader(reader);
  String line;
  while ((line=bufferedReader.readLine()) != null) {
    if (line.startsWith("#"))     continue;
    if (line.startsWith("[") && line.endsWith("]")) {
      currentGroupName=line.substring(1,line.length() - 1);
    }
 else {
      groupNameToPatternsMap.putValue(currentGroupName,line);
    }
  }
  return groupNameToPatternsMap;
}
