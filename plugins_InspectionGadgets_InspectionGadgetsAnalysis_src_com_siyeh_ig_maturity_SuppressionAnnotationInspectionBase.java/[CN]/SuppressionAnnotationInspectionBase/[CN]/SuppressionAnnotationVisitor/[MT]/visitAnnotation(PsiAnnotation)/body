{
  super.visitAnnotation(annotation);
  final PsiJavaCodeReferenceElement reference=annotation.getNameReferenceElement();
  if (reference == null) {
    return;
  }
  @NonNls final String text=reference.getText();
  if ("SuppressWarnings".equals(text) || BatchSuppressManager.SUPPRESS_INSPECTIONS_ANNOTATION_NAME.equals(text)) {
    final PsiElement annotationParent=annotation.getParent();
    if (annotationParent instanceof PsiModifierList) {
      final Collection<String> ids=JavaSuppressionUtil.getInspectionIdsSuppressedInAnnotation((PsiModifierList)annotationParent);
      if (!myAllowedSuppressions.containsAll(ids)) {
        registerError(annotation,annotation,Boolean.TRUE);
      }
 else       if (ids.isEmpty()) {
        registerError(annotation,annotation,Boolean.FALSE);
      }
    }
  }
}
