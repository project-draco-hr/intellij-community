{
  VirtualFile dir=createChildDirectory(myRoot,"dir");
  createChildDataWithContent(dir,"f1.txt");
  createChildDataWithContent(dir,"f2.txt");
  delete(dir);
  createPatchBetweenRevisions(1,0,false);
  dir=createChildDirectory(myRoot,"dir");
  createChildDataWithContent(dir,"f1.txt");
  createChildDataWithContent(dir,"f2.txt");
  applyPatch();
  assertNotNull(myRoot.findChild("dir"));
  assertNull(myRoot.findChild("dir").findChild("f1.txt"));
  assertNull(myRoot.findChild("dir").findChild("f2.txt"));
}
