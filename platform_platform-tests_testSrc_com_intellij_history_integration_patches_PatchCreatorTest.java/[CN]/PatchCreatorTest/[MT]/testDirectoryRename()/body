{
  VirtualFile dir=createChildDirectory(myRoot,"dir1");
  createChildDataWithContent(dir,"f.txt");
  rename(dir,"dir2");
  createPatchBetweenRevisions(1,0);
  rename(dir,"dir1");
  applyPatch();
  VirtualFile afterDir1=myRoot.findChild("dir1");
  VirtualFile afterDir2=myRoot.findChild("dir2");
  assertNotNull(afterDir1);
  assertNotNull(afterDir2);
  assertNull(afterDir1.findChild("f.txt"));
  assertNotNull(afterDir2.findChild("f.txt"));
}
