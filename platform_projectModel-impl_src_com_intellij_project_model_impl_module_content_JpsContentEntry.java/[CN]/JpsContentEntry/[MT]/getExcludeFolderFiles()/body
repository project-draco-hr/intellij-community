{
  List<VirtualFile> excluded=new ArrayList<VirtualFile>();
  for (  JpsExcludeFolder folder : myExcludeFolders) {
    ContainerUtil.addIfNotNull(excluded,folder.getFile());
  }
  for (  DirectoryIndexExcludePolicy excludePolicy : Extensions.getExtensions(DirectoryIndexExcludePolicy.EP_NAME,myRootModel.getProject())) {
    for (    VirtualFilePointer pointer : excludePolicy.getExcludeRootsForModule(myRootModel)) {
      ContainerUtil.addIfNotNull(excluded,pointer.getFile());
    }
  }
  return VfsUtilCore.toVirtualFileArray(excluded);
}
