{
  List<String> urls=ContainerUtil.map(jarPaths,new Function<String,String>(){
    @Override public String fun(    String path){
      return refreshAndConvertToUrl(path);
    }
  }
);
  boolean inTests=false;
  if (location != null) {
    final VirtualFile vFile=location.getContainingFile().getVirtualFile();
    if (vFile != null && ModuleRootManager.getInstance(module).getFileIndex().isInTestSourceContent(vFile)) {
      inTests=true;
    }
  }
  ModuleRootModificationUtil.addModuleLibrary(module,libraryName,urls,Collections.<String>emptyList(),inTests ? DependencyScope.TEST : DependencyScope.COMPILE);
}
