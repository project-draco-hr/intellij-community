{
  myRefPositions=ContainerUtil.newHashMap();
  int paddingX=BIG_ROOTS_GAP;
  for (  Map.Entry<VirtualFile,List<RefGroup>> entry : myRefGroups.entrySet()) {
    VirtualFile root=entry.getKey();
    for (    RefGroup group : entry.getValue()) {
      if (myRoots == null || myRoots.contains(root)) {
        Color rootIndicatorColor=VcsLogColorManagerImpl.getIndicatorColor(myUI.getColorManager().getRootColor(root));
        Rectangle rectangle=myReferencePainter.paint(group.getName(),g,paddingX,(getHeight() - myReferencePainter.getHeight(this)) / 2 - VERTICAL_SPACE,group.getBgColor(),rootIndicatorColor);
        paddingX+=rectangle.width + SMALL_ROOTS_GAP;
        myRefPositions.put(rectangle.x,group);
      }
    }
    paddingX+=BIG_ROOTS_GAP - SMALL_ROOTS_GAP;
  }
}
