{
  CopyData result=null;
  debug(trunk,branch,isBranchFromTrunk);
  if (trunk.hasCopyPath()) {
    if (StringUtil.equals(trunk.copyPath(),branch.relativePath())) {
      result=trunk.toCopyData(!isBranchFromTrunk);
    }
 else {
      if (branch.hasCopyPath()) {
        if (branch.copyRevision() == trunk.copyRevision()) {
          result=branch.revision() > trunk.revision() ? branch.toCopyData(isBranchFromTrunk) : trunk.toCopyData(!isBranchFromTrunk);
        }
 else {
          result=branch.copyRevision() > trunk.copyRevision() ? find(trunk,new BranchPoint(branch.copyTarget()),isBranchFromTrunk) : find(new BranchPoint(trunk.copyTarget()),branch,isBranchFromTrunk);
        }
      }
 else {
        result=find(branch,trunk,!isBranchFromTrunk);
      }
    }
  }
 else   if (branch.hasCopyPath()) {
    result=StringUtil.equals(branch.copyPath(),trunk.relativePath()) ? branch.toCopyData(isBranchFromTrunk) : find(trunk,new BranchPoint(branch.copyTarget()),isBranchFromTrunk);
  }
  return result;
}
