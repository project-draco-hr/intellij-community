{
  this.refsModel=refsModel;
  this.commitParentses=commitParentses;
  this.commitDataGetter=commitDataGetter;
  final MyTimer graphTimer=new MyTimer("graph build");
  final Set<Hash> trackedHashes=refsModel.getTrackedCommitHashes();
  graph=GraphBuilder.build(commitParentses);
  graphModel=new GraphModelImpl(graph);
  graphModel.getFragmentManager().setUnhiddenNodes(new Get<Node,Boolean>(){
    @NotNull @Override public Boolean get(    @NotNull Node key){
      return key.getDownEdges().size() == 0 || trackedHashes.contains(key.getCommitHash());
    }
  }
);
  System.out.println("graph row count:" + graph.getNodeRows().size());
  graphTimer.print();
  updatePrintModel();
}
