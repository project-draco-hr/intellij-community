{
  final String workingDirectoryFromConfig=getWorkingDirectory();
  if (StringUtil.isNotEmpty(workingDirectoryFromConfig)) {
    return workingDirectoryFromConfig;
  }
  final String testToRun=myTestToRun;
  if (testToRun != null) {
    final VirtualFile path=LocalFileSystem.getInstance().findFileByPath(testToRun);
    if (path != null) {
      if (path.isDirectory()) {
        return path.getPath();
      }
      return path.getParent().getPath();
    }
  }
  return super.getWorkingDirectorySafe();
}
