{
  final int indexOfBrace=failedTest.getName().indexOf('[');
  if (indexOfBrace == -1) {
    return super.getTestSpec(location,failedTest);
  }
  final List<String> testNameParts=new ArrayList<String>();
  final VirtualFile file=location.getVirtualFile();
  if (file == null) {
    return null;
  }
  final String fileName=file.getName();
  testNameParts.add(failedTest.getName().substring(0,indexOfBrace));
  for (AbstractTestProxy test=failedTest.getParent(); test != null && !test.getName().equals(fileName); test=test.getParent()) {
    testNameParts.add(test.getName());
  }
  testNameParts.add(file.getCanonicalPath());
  return StringUtil.join(Lists.reverse(testNameParts),TEST_NAME_PARTS_SPLITTER);
}
