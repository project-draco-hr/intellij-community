{
  final Ref<File> canonicalSkeleton=Ref.create();
  final Ref<File> canonicalUserSkeletonsDir=Ref.create();
  try {
    if (skeletonsPath != null) {
      canonicalSkeleton.set(new File(skeletonsPath).getCanonicalFile());
    }
    final VirtualFile userSkeletonsDir=PyUserSkeletonsUtil.getUserSkeletonsDirectory();
    if (userSkeletonsDir != null) {
      canonicalUserSkeletonsDir.set(new File(userSkeletonsDir.getPath()));
    }
  }
 catch (  final IOException e) {
    LOG.error("Error getting real paths",e);
  }
  final VirtualFile[] classDirs=sdk.getRootProvider().getFiles(OrderRootType.CLASSES);
  return Joiner.on(File.pathSeparator).join(ContainerUtil.mapNotNull(classDirs,new com.intellij.util.Function<VirtualFile,Object>(){
    @Override public Object fun(    VirtualFile file){
      if (file.isInLocalFileSystem()) {
        final File canonicalFile=new File(file.getPath());
        if (canonicalFile.exists() && !FileUtil.filesEqual(canonicalFile,canonicalSkeleton.get()) && !FileUtil.filesEqual(canonicalFile,canonicalUserSkeletonsDir.get())) {
          return file.getPath();
        }
      }
      return null;
    }
  }
));
}
