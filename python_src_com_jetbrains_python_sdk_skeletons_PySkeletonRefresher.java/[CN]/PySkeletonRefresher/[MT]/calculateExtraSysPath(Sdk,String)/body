{
  final Ref<File> skeletons=Ref.create();
  final Ref<File> userSkeletons=Ref.create();
  final Ref<File> remoteSources=Ref.create();
  try {
    if (skeletonsPath != null) {
      skeletons.set(new File(skeletonsPath).getCanonicalFile());
    }
    final VirtualFile userSkeletonsDir=PyUserSkeletonsUtil.getUserSkeletonsDirectory();
    if (userSkeletonsDir != null) {
      userSkeletons.set(new File(userSkeletonsDir.getPath()));
    }
    final VirtualFile remoteSourcesDir=PySdkUtil.findRemoteLibrariesDir(sdk);
    if (remoteSourcesDir != null) {
      remoteSources.set(new File(remoteSourcesDir.getPath()));
    }
  }
 catch (  final IOException e) {
    LOG.error("Error getting real paths",e);
  }
  final VirtualFile[] classDirs=sdk.getRootProvider().getFiles(OrderRootType.CLASSES);
  return Joiner.on(File.pathSeparator).join(ContainerUtil.mapNotNull(classDirs,new com.intellij.util.Function<VirtualFile,Object>(){
    @Override public Object fun(    VirtualFile file){
      if (file.isInLocalFileSystem()) {
        final File canonicalFile=new File(file.getPath());
        if (canonicalFile.exists() && !FileUtil.filesEqual(canonicalFile,skeletons.get()) && !FileUtil.filesEqual(canonicalFile,userSkeletons.get())&& !FileUtil.filesEqual(canonicalFile,remoteSources.get())) {
          return file.getPath();
        }
      }
      return null;
    }
  }
));
}
