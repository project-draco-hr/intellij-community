{
  final File root=findPregeneratedSkeletonsRoot();
  if (root == null) {
    return null;
  }
  LOG.info("Pregenerated skeletons root is " + root);
  final String versionString=mySdk.getVersionString();
  if (versionString == null) {
    return null;
  }
  if (PySdkUtil.isRemote(mySdk)) {
    return null;
  }
  String version=versionString.toLowerCase().replace(" ","-");
  File f;
  if (SystemInfo.isMac) {
    String osVersion=SystemInfo.OS_VERSION;
    int dot=osVersion.indexOf('.');
    if (dot >= 0) {
      int secondDot=osVersion.indexOf('.',dot + 1);
      if (secondDot >= 0) {
        osVersion=osVersion.substring(0,secondDot);
      }
    }
    f=new File(root,"skeletons-mac-" + myGeneratorVersion + "-"+ osVersion+ "-"+ version+ ".zip");
  }
 else {
    String os=SystemInfo.isWindows ? "win" : "nix";
    f=new File(root,"skeletons-" + os + "-"+ myGeneratorVersion+ "-"+ version+ ".zip");
  }
  if (f.exists()) {
    LOG.info("Found pregenerated skeletons at " + f.getPath());
    final VirtualFile virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(f);
    if (virtualFile == null) {
      LOG.info("Could not find pregenerated skeletons in VFS");
      return null;
    }
    return JarFileSystem.getInstance().getJarRootForLocalFile(virtualFile);
  }
 else {
    LOG.info("Not found pregenerated skeletons at " + f.getPath());
    return null;
  }
}
