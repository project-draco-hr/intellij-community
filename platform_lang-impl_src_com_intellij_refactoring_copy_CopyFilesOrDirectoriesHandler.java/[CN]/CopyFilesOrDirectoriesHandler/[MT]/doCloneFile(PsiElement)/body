{
  PsiDirectory targetDirectory;
  if (element instanceof PsiDirectory) {
    targetDirectory=((PsiDirectory)element).getParentDirectory();
  }
 else {
    targetDirectory=PlatformPackageUtil.getDirectory(element);
  }
  targetDirectory=tryNotNullizeDirectory(element.getProject(),targetDirectory);
  if (targetDirectory == null)   return;
  PsiElement[] elements={element};
  CopyFilesOrDirectoriesDialog dialog=new CopyFilesOrDirectoriesDialog(elements,null,element.getProject(),true);
  if (dialog.showAndGet()) {
    String newName=dialog.getNewName();
    copyImpl(elements,newName,targetDirectory,true,true);
  }
}
