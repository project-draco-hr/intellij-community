{
  myEventsProcessor.onSuiteTreeStarted("suite1",null);
  myEventsProcessor.onSuiteTreeNodeAdded("test1",null);
  myEventsProcessor.onSuiteTreeEnded("suite1");
  myEventsProcessor.onStartTesting();
  for (int i=0; i < 2; i++) {
    myEventsProcessor.onSuiteStarted(new TestSuiteStartedEvent("suite1",null));
    myEventsProcessor.onTestStarted(new TestStartedEvent("test1",null));
    myResultsViewer.performUpdate();
    myEventsProcessor.onTestFailure(new TestFailedEvent("test1","","",false,"a","b"));
    myResultsViewer.performUpdate();
    myEventsProcessor.onTestFinished(new TestFinishedEvent("test1",10l));
    myResultsViewer.performUpdate();
    myEventsProcessor.onSuiteFinished(new TestSuiteFinishedEvent("suite1"));
    myResultsViewer.performUpdate();
  }
  myEventsProcessor.onFinishTesting();
  myResultsViewer.performUpdate();
  assertEquals(2,myResultsViewer.getFailedTestCount());
}
