{
  try {
    ToolWindowAnchor anchor=myInfo.getAnchor();
    JComponent c=getComponentAt(anchor);
    if (c instanceof Splitter) {
      Splitter splitter=(Splitter)c;
      final InternalDecorator component=myInfo.isSplit() ? (InternalDecorator)splitter.getFirstComponent() : (InternalDecorator)splitter.getSecondComponent();
      if (myInfo.isSplit() && component != null) {
        myId2SplitProportion.put(component.getWindowInfo().getId(),splitter.getProportion());
      }
      setComponent(component,anchor,component != null ? component.getWindowInfo().getWeight() : 0);
    }
 else {
      setComponent(null,anchor,0);
    }
    if (!myDirtyMode) {
      myLayeredPane.validate();
      myLayeredPane.repaint();
    }
  }
  finally {
    finish();
  }
}
