{
  final boolean modified=isModified();
  if (!modified) {
    return;
  }
  final InspectionProfileImpl selectedProfile=getProfile();
  BaseInspectionProfileManager profileManager=selectedProfile.isProjectLevel() ? myProjectProfileManager : (BaseInspectionProfileManager)InspectionProfileManager.getInstance();
  InspectionProfileImpl parentProfile=selectedProfile.getParentProfile();
  if (parentProfile.getProfileManager().getProfile(parentProfile.getName(),false) == parentProfile) {
    parentProfile.getProfileManager().deleteProfile(parentProfile.getName());
  }
  if (selectedProfile.getProfileManager() != profileManager) {
    copyUsedSeveritiesIfUndefined(selectedProfile,profileManager);
    selectedProfile.setProfileManager(profileManager);
  }
 else {
    selectedProfile.getProfileManager().updateProfile(selectedProfile);
  }
  selectedProfile.commit();
  myProfile=parentProfile.getModifiableModel();
  setSelectedProfileModified(false);
  myModified=false;
  myRoot.dropCache();
  initToolStates();
  updateOptionsAndDescriptionPanel();
}
