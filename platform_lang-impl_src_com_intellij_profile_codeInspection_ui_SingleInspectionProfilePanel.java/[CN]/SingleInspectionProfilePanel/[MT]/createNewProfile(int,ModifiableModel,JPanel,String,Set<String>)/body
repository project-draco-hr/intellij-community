{
  profileName=Messages.showInputDialog(parent,profileName,"Create New Inspection Profile",Messages.getQuestionIcon());
  if (profileName == null)   return null;
  final ProfileManager profileManager=selectedProfile.getProfileManager();
  if (existingProfileNames.contains(profileName)) {
    Messages.showErrorDialog(InspectionsBundle.message("inspection.unable.to.create.profile.message",profileName),InspectionsBundle.message("inspection.unable.to.create.profile.dialog.title"));
    return null;
  }
  InspectionProfileImpl inspectionProfile=new InspectionProfileImpl(profileName,InspectionToolRegistrar.getInstance(),profileManager);
  if (initValue == -1) {
    inspectionProfile.initInspectionTools(null);
    ModifiableModel profileModifiableModel=inspectionProfile.getModifiableModel();
    final InspectionToolWrapper[] profileEntries=(InspectionToolWrapper[])profileModifiableModel.getInspectionTools(null);
    for (    InspectionToolWrapper toolWrapper : profileEntries) {
      profileModifiableModel.disableTool(toolWrapper.getShortName(),(NamedScope)null);
    }
    profileModifiableModel.setLocal(true);
    profileModifiableModel.setModified(true);
    return profileModifiableModel;
  }
 else   if (initValue == 0) {
    inspectionProfile.copyFrom(selectedProfile);
    inspectionProfile.setName(profileName);
    inspectionProfile.initInspectionTools(null);
    inspectionProfile.setModified(true);
    return inspectionProfile;
  }
  return null;
}
