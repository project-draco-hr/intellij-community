{
  final DefaultActionGroup group=new DefaultActionGroup();
  final SeverityRegistrar severityRegistrar=((SeverityProvider)mySelectedProfile.getProfileManager()).getOwnSeverityRegistrar();
  for (  HighlightSeverity severity : LevelChooserAction.getSeverities(severityRegistrar,includeDoNotShow())) {
    final HighlightDisplayLevel level=HighlightDisplayLevel.find(severity);
    group.add(new AnAction(renderSeverity(severity),renderSeverity(severity),level.getIcon()){
      @Override public void actionPerformed(      @NotNull AnActionEvent e){
        setNewHighlightingLevel(level);
      }
      @Override public boolean isDumbAware(){
        return true;
      }
    }
);
  }
  group.add(Separator.getInstance());
  ActionPopupMenu menu=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,group);
  return menu.getComponent();
}
