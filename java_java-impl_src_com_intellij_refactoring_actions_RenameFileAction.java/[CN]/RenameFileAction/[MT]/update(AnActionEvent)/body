{
  PsiFile file=e.getData(CommonDataKeys.PSI_FILE);
  Presentation presentation=e.getPresentation();
  String place=e.getPlace();
  boolean enabled=file != null && (file instanceof PsiClassOwner || !ActionPlaces.PROJECT_VIEW_POPUP.equals(place)) && place != ActionPlaces.EDITOR_POPUP && e.getData(CommonDataKeys.PROJECT) != null;
  presentation.setEnabled(enabled);
  presentation.setVisible(enabled);
  if (enabled) {
    presentation.setText(RENAME_FILE);
    presentation.setDescription("Rename selected file");
  }
}
