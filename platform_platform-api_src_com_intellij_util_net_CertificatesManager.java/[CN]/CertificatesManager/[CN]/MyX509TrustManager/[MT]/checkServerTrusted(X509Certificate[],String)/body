{
  try {
    mySystemManager.checkServerTrusted(certificates,s);
  }
 catch (  CertificateException e1) {
    X509Certificate certificate=certificates[0];
    if (certificates.length == 1 && certificateIsSelfSigned(certificate)) {
synchronized (myCustomManager) {
        try {
          myCustomManager.checkServerTrusted(certificates,s);
        }
 catch (        CertificateException e2) {
          if (myCustomManager.isBroken() || !updateTrustStore(certificate)) {
            throw e1;
          }
        }
      }
    }
  }
}
