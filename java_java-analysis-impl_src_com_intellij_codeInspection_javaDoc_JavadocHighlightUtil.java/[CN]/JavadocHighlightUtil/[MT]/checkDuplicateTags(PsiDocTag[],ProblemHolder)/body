{
  Set<String> documentedParamNames=null;
  Set<String> documentedExceptions=null;
  Set<String> uniqueTags=null;
  for (  PsiDocTag tag : tags) {
    if ("param".equals(tag.getName())) {
      PsiDocTagValue value=tag.getValueElement();
      if (value instanceof PsiDocParamRef) {
        PsiReference reference=value.getReference();
        if (reference != null) {
          String paramName=reference.getCanonicalText();
          documentedParamNames=set(documentedParamNames);
          if (documentedParamNames.contains(paramName)) {
            holder.problem(tag.getNameElement(),InspectionsBundle.message("inspection.javadoc.problem.duplicate.param",paramName),null);
          }
          documentedParamNames.add(paramName);
        }
      }
    }
 else     if (!holder.inspection().isIgnoreDuplicatedThrows() && ("throws".equals(tag.getName()) || "exception".equals(tag.getName()))) {
      PsiDocTagValue value=tag.getValueElement();
      if (value != null) {
        PsiElement firstChild=value.getFirstChild();
        if (firstChild != null && firstChild.getFirstChild() instanceof PsiJavaCodeReferenceElement) {
          PsiJavaCodeReferenceElement refElement=(PsiJavaCodeReferenceElement)firstChild.getFirstChild();
          PsiElement element=refElement.resolve();
          if (element instanceof PsiClass) {
            String fqName=((PsiClass)element).getQualifiedName();
            documentedExceptions=set(documentedExceptions);
            if (documentedExceptions.contains(fqName)) {
              holder.problem(tag.getNameElement(),InspectionsBundle.message("inspection.javadoc.problem.duplicate.throws",fqName),null);
            }
            documentedExceptions.add(fqName);
          }
        }
      }
    }
 else     if (UNIQUE_TAGS.contains(tag.getName())) {
      uniqueTags=set(uniqueTags);
      if (uniqueTags.contains(tag.getName())) {
        holder.problem(tag.getNameElement(),InspectionsBundle.message("inspection.javadoc.problem.duplicate.tag",tag.getName()),null);
      }
      uniqueTags.add(tag.getName());
    }
  }
}
