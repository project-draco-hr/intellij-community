{
  if (!isValid()) {
    return null;
  }
  LanguageLevel level=LanguageLevel.getDefault();
  final PsiFile file=getParentByStub() != null ? getContainingFile() : null;
  if (file != null) {
    final VirtualFile vfile=file.getVirtualFile();
    if (vfile != null) {
      level=LanguageLevel.forFile(vfile);
    }
  }
  final boolean useAdvancedSyntax=level.isAtLeast(LanguageLevel.PYTHON26);
  final Property local=processPropertiesInClass(name,filter,useAdvancedSyntax);
  if (local != null) {
    return local;
  }
  if (inherited) {
    if (name != null && (findMethodByName(name,false) != null || findClassAttribute(name,false) != null)) {
      return null;
    }
    for (    PyClass cls : iterateAncestorClasses()) {
      final Property property=((PyClassImpl)cls).processPropertiesInClass(name,filter,useAdvancedSyntax);
      if (property != null) {
        return property;
      }
    }
  }
  return null;
}
