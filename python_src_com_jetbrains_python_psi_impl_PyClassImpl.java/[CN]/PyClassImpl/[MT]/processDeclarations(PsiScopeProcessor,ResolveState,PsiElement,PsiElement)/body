{
  final PyStatementList statementList=getStatementList();
  for (  PsiElement element : statementList.getChildren()) {
    if (element instanceof PyFunction) {
      final PyFunction function=(PyFunction)element;
      final String name=function.getName();
      if (processor instanceof PyResolveUtil.VariantsProcessor && name != null && name.startsWith("__") && name.endsWith("__")) {
        continue;
      }
      if (!processor.execute(element,substitutor))       return false;
    }
  }
  for (  PsiElement psiElement : statementList.getChildren()) {
    if (psiElement instanceof PyAssignmentStatement) {
      final PyAssignmentStatement assignmentStatement=(PyAssignmentStatement)psiElement;
      final PyExpression[] targets=assignmentStatement.getTargets();
      for (      PyExpression target : targets) {
        if (target instanceof PyTargetExpression) {
          if (!processor.execute(target,substitutor))           return false;
        }
      }
    }
  }
  if (processor instanceof PyResolveUtil.VariantsProcessor) {
    return true;
  }
  return processor.execute(this,substitutor);
}
