{
  if (qualifiedName == null) {
    return new PyClassRef((String)null);
  }
  NameDefiner currentParent=parent;
  for (  String component : qualifiedName.getComponents()) {
    PsiElement element=currentParent.getElementNamed(component);
    element=PyUtil.turnDirIntoInit(element);
    if (element instanceof PyImportElement) {
      element=ResolveImportUtil.resolveImportElement((PyImportElement)element);
    }
    if (!(element instanceof NameDefiner)) {
      currentParent=null;
      break;
    }
    currentParent=(NameDefiner)element;
  }
  if (currentParent != null) {
    return new PyClassRef(currentParent);
  }
  if (qualifiedName.getComponentCount() == 1) {
    final PyClass builtinClass=PyBuiltinCache.getInstance(parent).getClass(qualifiedName.getComponents().get(0));
    if (builtinClass != null) {
      return new PyClassRef(builtinClass);
    }
  }
  return new PyClassRef(qualifiedName.toString());
}
