{
  iterations:   while (true) {
    if (prefetch != null) {
      PyClass ret=prefetch;
      prefetch=null;
      return ret;
    }
    if (percolator.hasNext()) {
      PyClassImpl it=(PyClassImpl)percolator.next();
      if (seen.contains(it)) {
        continue iterations;
      }
      pending.add(it);
      seen.add(it);
      return it;
    }
 else     if (pending.size() > 0) {
      PyClassImpl it=pending.get(0);
      pending.remove(0);
      percolator=new AncestorsIterator(it,new HashSet<PyClass>(seen));
    }
 else     return null;
  }
}
