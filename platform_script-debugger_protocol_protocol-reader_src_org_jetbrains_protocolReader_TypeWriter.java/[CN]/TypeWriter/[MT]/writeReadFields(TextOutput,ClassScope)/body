{
  boolean stopIfAllFieldsWereRead=hasLazyFields;
  boolean hasOnlyOneFieldLoader=fieldLoaders.size() == 1;
  boolean isTracedStop=stopIfAllFieldsWereRead && !hasOnlyOneFieldLoader;
  if (isTracedStop) {
    out.newLine().append("int i = 0").semi();
  }
  out.newLine().append("do").openBlock();
  boolean isFirst=true;
  String operator="if";
  for (  FieldLoader fieldLoader : fieldLoaders) {
    if (fieldLoader.skipRead) {
      continue;
    }
    if (!isFirst) {
      out.newLine();
    }
    out.append(operator).append(" (name");
    out.append(".equals(\"").append(fieldLoader.jsonName).append("\"))").openBlock();
{
      String primitiveValueName=fieldLoader.valueReader instanceof ObjectValueReader ? ((ObjectValueReader)fieldLoader.valueReader).primitiveValueName : null;
      if (primitiveValueName != null) {
        out.append("if (reader.peek() == com.google.gson.stream.JsonToken.BEGIN_OBJECT)").openBlock();
      }
      assignField(out,fieldLoader.name);
      fieldLoader.valueReader.writeReadCode(classScope,false,out);
      out.semi();
      if (primitiveValueName != null) {
        out.closeBlock();
        out.newLine().append("else").openBlock();
        assignField(out,primitiveValueName + "Type");
        out.append("reader.peek()").semi().newLine();
        assignField(out,primitiveValueName);
        out.append("reader.nextString(true)").semi();
        out.closeBlock();
      }
      if (stopIfAllFieldsWereRead && !isTracedStop) {
        out.newLine().append(Util.READER_NAME).append(".skipValues()").semi().newLine().append("break").semi();
      }
    }
    out.closeBlock();
    if (isFirst) {
      isFirst=false;
      operator="else if";
    }
  }
  out.newLine().append("else").openBlock().append("reader.skipValue();");
  if (isTracedStop) {
    out.newLine().append("continue").semi();
  }
  out.closeBlock();
  if (isTracedStop) {
    out.newLine().newLine().append("if (i == ").append(fieldLoaders.size() - 1).append(")").openBlock();
    out.append(Util.READER_NAME).append(".skipValues()").semi().newLine().append("break").semi().closeBlock();
    out.newLine().append("else").openBlock().append("i++").semi().closeBlock();
  }
  out.closeBlock();
  out.newLine().append("while ((name = reader.nextNameOrNull()) != null)").semi();
}
