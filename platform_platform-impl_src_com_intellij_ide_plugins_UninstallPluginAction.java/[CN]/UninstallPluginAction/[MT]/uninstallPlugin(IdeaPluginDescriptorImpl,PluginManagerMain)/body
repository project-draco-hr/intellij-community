{
  PluginId pluginId=descriptor.getPluginId();
  descriptor.setDeleted(true);
  try {
    PluginInstaller.prepareToUninstall(pluginId);
    PluginManagerUISettings.getInstance().getInstalledPlugins().remove(pluginId.getIdString());
    host.setRequireShutdown(descriptor.isEnabled());
  }
 catch (  IOException e1) {
    PluginManagerMain.LOG.error(e1);
  }
}
