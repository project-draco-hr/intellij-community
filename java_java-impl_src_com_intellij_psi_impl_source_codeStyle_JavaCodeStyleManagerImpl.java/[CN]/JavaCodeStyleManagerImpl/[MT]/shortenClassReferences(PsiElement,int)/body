{
  CheckUtil.checkWritable(element);
  if (!SourceTreeToPsiMap.hasTreeElement(element))   return element;
  final boolean addImports=(flags & DO_NOT_ADD_IMPORTS) == 0;
  final boolean incompleteCode=(flags & UNCOMPLETE_CODE) != 0;
  final ReferenceAdjuster adjuster=ReferenceAdjusterFactory.Extension.getFactory(element.getLanguage()).createReferenceAdjuster(myProject);
  final ASTNode reference=adjuster.process(element.getNode(),addImports,incompleteCode);
  return SourceTreeToPsiMap.treeToPsiNotNull(reference);
}
