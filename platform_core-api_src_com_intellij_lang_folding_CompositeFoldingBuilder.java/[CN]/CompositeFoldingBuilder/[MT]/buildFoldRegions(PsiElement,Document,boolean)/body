{
  final List<FoldingDescriptor> descriptors=new ArrayList<FoldingDescriptor>();
  final Set<TextRange> rangesCoveredByDescriptors=ContainerUtil.newHashSet();
  for (  FoldingBuilder builder : myBuilders) {
    for (    FoldingDescriptor descriptor : LanguageFolding.buildFoldingDescriptors(builder,root,document,quick)) {
      if (rangesCoveredByDescriptors.add(descriptor.getRange())) {
        descriptor.getElement().putUserData(FOLDING_BUILDER,builder);
        descriptors.add(descriptor);
      }
    }
  }
  return descriptors.toArray(new FoldingDescriptor[descriptors.size()]);
}
