{
  XStackFrame frame=session.getCurrentStackFrame();
  assertNotNull(frame);
  XDebuggerEvaluator evaluator=frame.getEvaluator();
  assertNotNull(evaluator);
  XTestEvaluationCallback callback=new XTestEvaluationCallback();
  evaluator.evaluate(expression,callback,session.getCurrentPosition());
  return callback.waitFor(timeout);
}
