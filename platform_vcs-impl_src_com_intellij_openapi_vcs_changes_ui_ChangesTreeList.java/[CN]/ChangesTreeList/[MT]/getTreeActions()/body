{
  final ToggleShowDirectoriesAction directoriesAction=new ToggleShowDirectoriesAction();
  final ExpandAllAction expandAllAction=new ExpandAllAction(myTree){
    @Override public void update(    AnActionEvent e){
      e.getPresentation().setEnabledAndVisible(!myShowFlatten || !myIsModelFlat);
    }
  }
;
  final CollapseAllAction collapseAllAction=new CollapseAllAction(myTree){
    @Override public void update(    AnActionEvent e){
      e.getPresentation().setEnabledAndVisible(!myShowFlatten || !myIsModelFlat);
    }
  }
;
  final AnAction[] actions=new AnAction[]{directoriesAction,expandAllAction,collapseAllAction};
  directoriesAction.registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_P,SystemInfo.isMac ? InputEvent.META_DOWN_MASK : InputEvent.CTRL_DOWN_MASK)),this);
  expandAllAction.registerCustomShortcutSet(new CustomShortcutSet(KeymapManager.getInstance().getActiveKeymap().getShortcuts(IdeActions.ACTION_EXPAND_ALL)),myTree);
  collapseAllAction.registerCustomShortcutSet(new CustomShortcutSet(KeymapManager.getInstance().getActiveKeymap().getShortcuts(IdeActions.ACTION_COLLAPSE_ALL)),myTree);
  return actions;
}
