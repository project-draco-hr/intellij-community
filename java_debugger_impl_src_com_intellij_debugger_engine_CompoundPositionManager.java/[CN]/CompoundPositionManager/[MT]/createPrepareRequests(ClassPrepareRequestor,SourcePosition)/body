{
  return iterate(new Processor<List<ClassPrepareRequest>>(){
    @Override public List<ClassPrepareRequest> process(    PositionManager positionManager) throws NoDataException {
      if (positionManager instanceof MultiRequestPositionManager) {
        return ((MultiRequestPositionManager)positionManager).createPrepareRequests(requestor,position);
      }
 else {
        ClassPrepareRequest prepareRequest=positionManager.createPrepareRequest(requestor,position);
        if (prepareRequest == null) {
          return Collections.emptyList();
        }
        return Collections.singletonList(prepareRequest);
      }
    }
  }
,Collections.<ClassPrepareRequest>emptyList());
}
