{
  super.readExternal(element);
  final String locked=element.getAttributeValue(IS_LOCKED);
  if (locked != null) {
    myLockedProfile=Boolean.parseBoolean(locked);
  }
  if (!ApplicationManager.getApplication().isUnitTestMode() || myBaseProfile == null) {
    myBaseProfile=getDefaultProfile();
  }
  final String version=element.getAttributeValue(VERSION_TAG);
  if (version == null || !version.equals(VALID_VERSION)) {
    try {
      element=InspectionProfileConvertor.convertToNewFormat(element,this);
    }
 catch (    IOException e) {
      LOG.error(e);
    }
catch (    JDOMException e) {
      LOG.error(e);
    }
  }
  final Element highlightElement=element.getChild(USED_LEVELS);
  if (highlightElement != null) {
    ((SeverityProvider)getProfileManager()).getOwnSeverityRegistrar().readExternal(highlightElement);
  }
  for (  final Object o : element.getChildren(INSPECTION_TOOL_TAG)) {
    Element toolElement=((Element)o).clone();
    IdeaPluginDescriptorImpl.internJDOMElement(toolElement);
    String toolClassName=toolElement.getAttributeValue(CLASS_TAG);
    myDeinstalledInspectionsSettings.put(toolClassName,toolElement);
  }
  for (  InspectionElementsMerger merger : Extensions.getExtensions(InspectionElementsMerger.EP_NAME)) {
    final String newToolName=merger.getNewToolName();
    final String mergedToolName=newToolName + "Merged";
    if (!myDeinstalledInspectionsSettings.containsKey(mergedToolName)) {
      final Element merged=merger.merge(myDeinstalledInspectionsSettings);
      if (merged != null) {
        myDeinstalledInspectionsSettings.put(newToolName,merged);
        myDeinstalledInspectionsSettings.put(mergedToolName,new Element(INSPECTION_TOOL_TAG).setAttribute(CLASS_TAG,mergedToolName));
      }
    }
  }
}
