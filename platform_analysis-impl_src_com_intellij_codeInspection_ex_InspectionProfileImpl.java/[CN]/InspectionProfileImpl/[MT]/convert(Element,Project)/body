{
  final Element scopes=element.getChild("scopes");
  if (scopes == null) {
    return;
  }
  initInspectionTools(project);
  for (  Element scopeElement : scopes.getChildren(SCOPE)) {
    final String profile=scopeElement.getAttributeValue(PROFILE);
    InspectionProfileImpl inspectionProfile=profile == null ? null : (InspectionProfileImpl)getProfileManager().getProfile(profile);
    NamedScope scope=inspectionProfile == null ? null : getProfileManager().getScopesManager().getScope(scopeElement.getAttributeValue(NAME));
    if (scope == null) {
      continue;
    }
    for (    InspectionToolWrapper toolWrapper : inspectionProfile.getInspectionTools(null)) {
      final HighlightDisplayKey key=HighlightDisplayKey.find(toolWrapper.getShortName());
      try {
        InspectionToolWrapper toolWrapperCopy=copyToolSettings(toolWrapper);
        HighlightDisplayLevel errorLevel=inspectionProfile.getErrorLevel(key,null,project);
        getTools(toolWrapper.getShortName(),project).addTool(scope,toolWrapperCopy,inspectionProfile.isToolEnabled(key),errorLevel);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
  reduceConvertedScopes();
}
