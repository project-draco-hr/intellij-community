{
  final List<PropertiesFile> propertiesFiles=getPropertiesFiles(e);
  final String newBaseName=Messages.showInputDialog(propertiesFiles.get(0).getProject(),PropertiesBundle.message("combine.properties.files.prompt.text"),PropertiesBundle.message("combine.properties.files.title"),Messages.getQuestionIcon(),PropertiesUtil.getDefaultBaseName(propertiesFiles),new MyInputValidator(propertiesFiles));
  if (newBaseName != null) {
    final Project project=propertiesFiles.get(0).getProject();
    ResourceBundleManager.getInstance(project).combineToResourceBundle(propertiesFiles,newBaseName);
    final ResourceBundle resourceBundle=propertiesFiles.get(0).getResourceBundle();
    FileEditorManager.getInstance(project).openFile(new ResourceBundleAsVirtualFile(resourceBundle),true);
    ProjectView.getInstance(project).refresh();
  }
}
