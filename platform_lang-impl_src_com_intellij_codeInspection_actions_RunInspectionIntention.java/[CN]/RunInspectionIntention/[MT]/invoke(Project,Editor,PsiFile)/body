{
  final Module module=file != null ? ModuleUtilCore.findModuleForPsiElement(file) : null;
  AnalysisScope analysisScope=new AnalysisScope(project);
  if (file != null) {
    final VirtualFile virtualFile=file.getVirtualFile();
    if (file.isPhysical() && virtualFile != null && virtualFile.isInLocalFileSystem()) {
      analysisScope=new AnalysisScope(file);
    }
  }
  selectScopeAndRunInspection(myShortName,analysisScope,module,file,project);
}
