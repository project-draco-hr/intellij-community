{
  if (promises.size() == 1) {
    return promises instanceof List ? ((List<Promise<?>>)promises).get(0) : promises.iterator().next();
  }
 else {
    return all(promises,null);
  }
}
