{
  final Project project=parent.getProject();
  final Sdk sdk=getPythonSdk(parent);
  if (sdk != null && project != null) {
    final Collection<AbstractTreeNode> newChildren=hideSkeletons(children);
    final PySkeletonsNode skeletonsNode=PySkeletonsNode.create(project,sdk,settings);
    if (skeletonsNode != null) {
      newChildren.add(skeletonsNode);
    }
    final PyUserSkeletonsNode userSkeletonsNode=PyUserSkeletonsNode.create(project,settings);
    if (userSkeletonsNode != null) {
      newChildren.add(userSkeletonsNode);
    }
    return newChildren;
  }
  if (settings.isShowMembers()) {
    List<AbstractTreeNode> newChildren=new ArrayList<AbstractTreeNode>();
    for (    AbstractTreeNode child : children) {
      if (child instanceof PsiFileNode && ((PsiFileNode)child).getValue() instanceof PyFile) {
        newChildren.add(new PyFileNode(project,((PsiFileNode)child).getValue(),settings));
      }
 else {
        newChildren.add(child);
      }
    }
    return newChildren;
  }
  return children;
}
