{
  consoleView.addAttachToProcessListener(new AttachToProcessListener(){
    @Override public void onAttachToProcess(    @NotNull ProcessHandler processHandler){
      TestProxyPrinterProvider printerProvider=null;
      if (filterProvider != null) {
        printerProvider=new TestProxyPrinterProvider(consoleView,filterProvider);
      }
      TestConsoleProperties properties=consoleView.getProperties();
      SMTestLocator testLocator=null;
      if (properties instanceof SMTRunnerConsoleProperties) {
        testLocator=((SMTRunnerConsoleProperties)properties).getTestLocator();
      }
      if (testLocator != null) {
        testLocator=new CombinedTestLocator(testLocator);
      }
 else {
        testLocator=new CompositeTestLocationProvider(locator);
      }
      SMTestRunnerResultsForm resultsForm=consoleView.getResultsViewer();
      attachEventsProcessors(properties,resultsForm,resultsForm.getStatisticsPane(),processHandler,testFrameworkName,testLocator,idBasedTreeConstruction,printerProvider);
    }
  }
);
  consoleView.setHelpId("reference.runToolWindow.testResultsTab");
  consoleView.initUI();
}
