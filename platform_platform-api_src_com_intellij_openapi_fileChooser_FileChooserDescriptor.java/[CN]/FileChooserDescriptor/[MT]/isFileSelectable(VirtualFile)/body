{
  if (file == null)   return false;
  if (file.is(VFileProperty.SYMLINK) && file.getCanonicalPath() == null) {
    return false;
  }
  if (file.isDirectory() && myChooseFolders) {
    return true;
  }
  if (acceptAsJarFile(file)) {
    return true;
  }
  if (acceptAsGeneralFile(file)) {
    return true;
  }
  if (myFileFilter != null && !file.isDirectory() && myFileFilter.value(file)) {
    return true;
  }
  return false;
}
