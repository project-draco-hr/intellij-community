{
  final MatchResultImpl matchResult=context.getResult();
  final MatchResultImpl substituion=matchResult.findSon(name);
  if (substituion == null) {
    matchResult.addSon(createMatch(match,start,end));
  }
 else   if (maxOccurs > 1 && totalMatchedOccurs == -1) {
    final MatchResultImpl result=createMatch(match,start,end);
    if (!substituion.hasSons()) {
      MatchResultImpl sonresult;
      substituion.addSon(sonresult=new MatchResultImpl(substituion.getName(),substituion.getMatchImage(),substituion.getMatchRef(),substituion.getStart(),substituion.getEnd(),target));
      sonresult.setParent(substituion);
      substituion.setMatchRef(new SmartPsiPointer((match != null) ? match : null));
    }
    result.setParent(substituion);
    substituion.addSon(result);
  }
}
