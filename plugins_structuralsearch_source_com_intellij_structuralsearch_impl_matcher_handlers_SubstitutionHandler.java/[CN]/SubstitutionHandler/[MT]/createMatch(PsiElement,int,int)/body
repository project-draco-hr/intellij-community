{
  final String image=match == null ? null : MatchingVisitor.getText(match,start,end);
  final SmartPsiPointer ref=new SmartPsiPointer(match);
  final MatchResultImpl result=myNestedResult == null ? new MatchResultImpl(name,image,ref,start,end,target) : myNestedResult;
  if (myNestedResult != null) {
    myNestedResult.setName(name);
    myNestedResult.setMatchImage(image);
    myNestedResult.setMatchRef(ref);
    myNestedResult.setStart(start);
    myNestedResult.setEnd(end);
    myNestedResult.setTarget(target);
    myNestedResult=null;
  }
  return result;
}
