{
  GeneralCommandLine cmdLine=new GeneralCommandLine();
  cmdLine.setExePath(toSystemDependentName(executablePath));
  if (workingDir != null) {
    cmdLine.setWorkDirectory(toSystemDependentName(workingDir));
  }
  List<String> fixedArguments=new ArrayList<String>();
  Collections.addAll(fixedArguments,arguments);
  cmdLine.addParameters(fixedArguments);
  cmdLine.setPassParentEnvironment(passParentEnv);
  Map<String,String> env=cmdLine.getEnvironment();
  if (userDefinedEnv != null) {
    env.putAll(userDefinedEnv);
  }
  EnvironmentUtil.inlineParentOccurrences(env);
  return cmdLine;
}
