{
  GeneralCommandLine cmdLine=new GeneralCommandLine();
  cmdLine.setExePath(toSystemDependentName(executablePath));
  if (workingDir != null) {
    cmdLine.setWorkDirectory(toSystemDependentName(workingDir));
  }
  cmdLine.addParameters(arguments);
  cmdLine.withParentEnvironmentType(passParentEnv ? ParentEnvironmentType.SHELL : ParentEnvironmentType.NONE);
  cmdLine.withEnvironment(userDefinedEnv);
  EnvironmentUtil.inlineParentOccurrences(cmdLine.getEnvironment());
  return cmdLine;
}
