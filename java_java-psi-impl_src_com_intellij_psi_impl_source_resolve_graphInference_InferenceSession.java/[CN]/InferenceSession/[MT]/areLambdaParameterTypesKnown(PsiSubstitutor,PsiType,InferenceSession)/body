{
  final PsiClassType.ClassResolveResult resolveResult=PsiUtil.resolveGenericsClassInType(targetType);
  final PsiMethod method=LambdaUtil.getFunctionalInterfaceMethod(resolveResult);
  if (method != null) {
    final PsiSubstitutor substitutor=LambdaUtil.getSubstitutor(method,resolveResult);
    for (    PsiParameter parameter : method.getParameterList().getParameters()) {
      final PsiType parameterType=parameter.getType();
      if (parameter instanceof PsiLambdaParameterType)       return false;
      if (!session.isProperType(siteSubstitutor.substitute(substitutor.substitute(parameterType))))       return false;
    }
    return true;
  }
  return false;
}
