{
  for (  InferenceVariable var : vars) {
    LOG.assertTrue(var.getInstantiation() == PsiType.NULL);
    final PsiTypeParameter typeParameter=var.getParameter();
    final PsiType type=checkBoundsConsistency(substitutor,var);
    if (type != PsiType.NULL) {
      if (foreignMap != null) {
        foreignMap.put(var,type);
      }
      if (substitutor.putAll(mySiteSubstitutor).getSubstitutionMap().containsKey(typeParameter) && var.getCallContext() != myContext) {
        continue;
      }
      substitutor=substitutor.put(typeParameter,type);
    }
  }
  return substitutor;
}
