{
  for (  InferenceVariable var : vars) {
    LOG.assertTrue(var.getInstantiation() == PsiType.NULL);
    final PsiTypeParameter typeParameter=var.getParameter();
    final PsiType eqBound=getEqualsBound(var,substitutor);
    final PsiType lub=eqBound != PsiType.NULL && (myErased || eqBound != null) ? eqBound : getLowerBound(var,substitutor);
    if (lub != PsiType.NULL) {
      substitutor=substitutor.put(typeParameter,lub);
    }
 else     if (var.isThrownBound() && isThrowable(var.getBounds(InferenceBound.UPPER))) {
      final PsiClassType runtimeException=PsiType.getJavaLangRuntimeException(myManager,GlobalSearchScope.allScope(myManager.getProject()));
      substitutor=substitutor.put(typeParameter,runtimeException);
    }
 else {
      substitutor=substitutor.put(typeParameter,getUpperBound(var,substitutor));
    }
  }
  return checkResult ? myIncorporationPhase.checkIncorporated(substitutor,vars) : substitutor;
}
