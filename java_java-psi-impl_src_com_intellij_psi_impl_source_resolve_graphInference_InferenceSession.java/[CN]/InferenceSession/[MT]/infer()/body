{
  repeatInferencePhases();
  PsiSubstitutor substitutor=mySiteSubstitutor;
  for (  InferenceVariable inferenceVariable : myInferenceVariables.values()) {
    final PsiTypeParameter typeParameter=inferenceVariable.getParameter();
    PsiType instantiation=inferenceVariable.getInstantiation();
    if (instantiation == null) {
      instantiation=JavaPsiFacade.getInstance(typeParameter.getProject()).getElementFactory().createType(typeParameter);
    }
    substitutor=substitutor.put(typeParameter,instantiation);
  }
  return substitutor;
}
