{
  for (  InferenceVariable var : vars) {
    LOG.assertTrue(var.getInstantiation() == PsiType.NULL);
    final PsiTypeParameter typeParameter=var.getParameter();
    if (substitutor.putAll(mySiteSubstitutor).getSubstitutionMap().containsKey(typeParameter) && var.getCallContext() != myContext) {
      continue;
    }
    final PsiType eqBound=getEqualsBound(var,substitutor);
    if (eqBound != PsiType.NULL && eqBound instanceof PsiPrimitiveType)     continue;
    PsiType type=eqBound != PsiType.NULL && (myErased || eqBound != null) ? eqBound : getLowerBound(var,substitutor);
    if (type == PsiType.NULL) {
      if (var.isThrownBound() && isThrowable(var.getBounds(InferenceBound.UPPER))) {
        type=PsiType.getJavaLangRuntimeException(myManager,GlobalSearchScope.allScope(myManager.getProject()));
      }
 else {
        if (substitutor.putAll(mySiteSubstitutor).getSubstitutionMap().get(typeParameter) != null)         continue;
        type=myErased ? null : getUpperBound(var,substitutor);
      }
    }
    substitutor=substitutor.put(typeParameter,type);
  }
  return substitutor;
}
