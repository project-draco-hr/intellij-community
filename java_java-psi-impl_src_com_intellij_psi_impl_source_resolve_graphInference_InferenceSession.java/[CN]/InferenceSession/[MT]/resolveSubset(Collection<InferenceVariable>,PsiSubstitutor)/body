{
  for (  InferenceVariable var : vars) {
    LOG.assertTrue(var.getInstantiation() == PsiType.NULL);
    final PsiTypeParameter typeParameter=var.getParameter();
    if (substitutor.putAll(mySiteSubstitutor).getSubstitutionMap().containsKey(typeParameter) && var.getCallContext() != myContext) {
      continue;
    }
    final PsiType type=checkBoundsConsistency(substitutor,var);
    if (type != PsiType.NULL) {
      substitutor=substitutor.put(typeParameter,type);
    }
  }
  return substitutor;
}
