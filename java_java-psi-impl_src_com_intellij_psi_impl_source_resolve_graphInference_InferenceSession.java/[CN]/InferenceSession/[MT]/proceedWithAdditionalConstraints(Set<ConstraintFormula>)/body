{
  while (!additionalConstraints.isEmpty()) {
    final Set<InferenceVariable> varsToResolve=new HashSet<InferenceVariable>();
    final Set<ConstraintFormula> subset=buildSubset(additionalConstraints,varsToResolve);
    PsiSubstitutor substitutor=resolveBounds(varsToResolve,mySiteSubstitutor,true);
    if (myContext instanceof PsiCallExpression) {
      PsiExpressionList argumentList=((PsiCallExpression)myContext).getArgumentList();
      LOG.assertTrue(argumentList != null);
      MethodCandidateInfo.updateSubstitutor(argumentList,substitutor);
    }
    for (    ConstraintFormula additionalConstraint : subset) {
      additionalConstraint.apply(substitutor);
    }
    myConstraints.addAll(subset);
    if (!repeatInferencePhases(true)) {
      return false;
    }
  }
  return true;
}
