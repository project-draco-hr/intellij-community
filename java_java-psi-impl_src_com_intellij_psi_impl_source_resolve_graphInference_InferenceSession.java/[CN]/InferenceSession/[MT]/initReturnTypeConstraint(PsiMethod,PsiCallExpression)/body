{
  if (PsiPolyExpressionUtil.isPolyExpression(context) || context instanceof PsiNewExpression && PsiDiamondType.ourDiamondGuard.currentStack().contains(context)) {
    final PsiType returnType=method.getReturnType();
    if (!PsiType.VOID.equals(returnType) && returnType != null) {
      final PsiType targetType=PsiPolyExpressionUtil.getTargetType(context);
      if (targetType != null) {
        myConstraints.add(new TypeCompatibilityConstraint(targetType,returnType));
      }
    }
  }
}
