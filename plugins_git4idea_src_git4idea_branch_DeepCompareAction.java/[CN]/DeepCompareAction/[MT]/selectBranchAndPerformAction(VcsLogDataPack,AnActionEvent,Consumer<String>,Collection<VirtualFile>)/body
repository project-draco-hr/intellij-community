{
  ActionGroup actionGroup=BranchFilterPopupComponent.constructActionGroup(dataPack,null,new Function<String,AnAction>(){
    @Override public AnAction fun(    final String s){
      return new DumbAwareAction(s){
        @Override public void actionPerformed(        AnActionEvent e){
          consumer.consume(s);
        }
      }
;
    }
  }
,visibleRoots);
  ListPopup popup=JBPopupFactory.getInstance().createActionGroupPopup("Select branch to compare",actionGroup,event.getDataContext(),false,false,false,null,-1,null);
  InputEvent inputEvent=event.getInputEvent();
  if (inputEvent instanceof MouseEvent) {
    popup.show(new RelativePoint((MouseEvent)inputEvent));
  }
 else {
    popup.showInBestPositionFor(event.getDataContext());
  }
}
