{
  List<ReferenceType> allClasses=process.getPositionManager().getAllClasses(mySourcePosition);
  if (allClasses.size() > 1) {
    String name=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
      public String compute(){
        return getClassVMName(getClassAt(mySourcePosition));
      }
    }
);
    for (    ReferenceType aClass : allClasses) {
      if (Comparing.equal(aClass.name(),name)) {
        return name;
      }
    }
  }
  if (!allClasses.isEmpty()) {
    return allClasses.get(0).name();
  }
  throw EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("error.class.not.loaded",getDisplayName(process)));
}
