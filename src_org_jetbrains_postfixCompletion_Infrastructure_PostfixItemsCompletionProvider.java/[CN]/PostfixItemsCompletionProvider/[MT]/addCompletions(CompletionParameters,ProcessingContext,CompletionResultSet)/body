{
  final PostfixTemplatesManager templatesManager=ApplicationManager.getApplication().getComponent(PostfixTemplatesManager.class);
  final PsiElement positionElement=parameters.getPosition();
  final boolean forceMode=!parameters.isAutoPopup();
  final PostfixTemplateAcceptanceContext acceptanceContext=templatesManager.isAvailable(positionElement,forceMode);
  if (acceptanceContext != null) {
    for (    final LookupElement lookupElement : templatesManager.collectTemplates(acceptanceContext)) {
      resultSet.addElement(lookupElement);
    }
  }
}
