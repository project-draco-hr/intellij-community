{
  if (expression instanceof PsiNewExpression) {
    return (PsiNewExpression)expression;
  }
 else   if (expression instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)expression;
    final PsiElement target=referenceExpression.resolve();
    if (!(target instanceof PsiVariable)) {
      return null;
    }
    final PsiVariable variable=(PsiVariable)target;
    final PsiExpression initializer=variable.getInitializer();
    if ((initializer instanceof PsiNewExpression)) {
      return (PsiNewExpression)initializer;
    }
    final PsiCodeBlock block=PsiTreeUtil.getParentOfType(target,PsiCodeBlock.class);
    final PsiElement[] defs=DefUseUtil.getDefs(block,variable,expression);
    if (defs.length != 1) {
      return null;
    }
    final PsiElement def=defs[0];
    if (!(def instanceof PsiReferenceExpression) || !(def.getParent() instanceof PsiAssignmentExpression)) {
      return null;
    }
    final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)def.getParent();
    if (assignmentExpression.getOperationTokenType() != JavaTokenType.EQ)     return null;
    final PsiExpression rhs=ParenthesesUtils.stripParentheses(assignmentExpression.getRExpression());
    if (!(rhs instanceof PsiNewExpression)) {
      return null;
    }
    return (PsiNewExpression)rhs;
  }
  return null;
}
