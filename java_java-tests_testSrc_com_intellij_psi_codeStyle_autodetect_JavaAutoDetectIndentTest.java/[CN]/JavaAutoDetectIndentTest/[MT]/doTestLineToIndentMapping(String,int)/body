{
  configureFromFileText("x.java",text);
  Document document=PsiDocumentManager.getInstance(getProject()).getDocument(myFile);
  FormattingModelBuilder builder=LanguageFormatting.INSTANCE.forContext(myFile);
  Assert.assertNotNull(document);
  Assert.assertNotNull(builder);
  FormattingModel model=builder.createModel(myFile,CodeStyleSettingsManager.getSettings(getProject()));
  Block block=model.getRootBlock();
  List<LineIndentInfo> list=new FormatterBasedLineIndentInfoBuilder(document,block).build();
  Assert.assertEquals(list.size(),spacesForLine.length);
  for (int i=0; i < spacesForLine.length; i++) {
    int indentSize=list.get(i).getIndentSize();
    Assert.assertEquals("Mismatch on line " + i,spacesForLine[i],indentSize);
  }
}
