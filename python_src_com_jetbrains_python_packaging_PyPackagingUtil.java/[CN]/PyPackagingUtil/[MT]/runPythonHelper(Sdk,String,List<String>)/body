{
  final String homePath=sdk.getHomePath();
  if (homePath == null) {
    throw new PyExternalProcessException(ERROR_INVALID_SDK,"Cannot find interpreter for SDK");
  }
  final String helperPath=PythonHelpersLocator.getHelperPath(helper);
  if (helperPath == null) {
    throw new PyExternalProcessException(ERROR_HELPER_NOT_FOUND,String.format("Cannot find helper tool: '%s'",helper));
  }
  final String parentDir=new File(homePath).getParent();
  final List<String> cmdline=new ArrayList<String>();
  cmdline.add(homePath);
  cmdline.add(helperPath);
  cmdline.addAll(args);
  ProcessOutput output=SdkUtil.getProcessOutput(parentDir,cmdline.toArray(new String[cmdline.size()]),TIMEOUT);
  final int retcode=output.getExitCode();
  if (output.isTimeout()) {
    throw new PyExternalProcessException(ERROR_TIMEOUT,"Timed out");
  }
 else   if (retcode != 0) {
    final String stdout=output.getStdout();
    final String stderr=output.getStderr();
    String message=stderr;
    if (message.trim().isEmpty()) {
      message=stdout;
    }
    LOG.debug(String.format("Error when running '%s'\nSTDOUT: %s\nSTDERR: %s\n\n",StringUtil.join(cmdline," "),stdout,stderr));
    throw new PyExternalProcessException(retcode,message);
  }
  return output.getStdout();
}
