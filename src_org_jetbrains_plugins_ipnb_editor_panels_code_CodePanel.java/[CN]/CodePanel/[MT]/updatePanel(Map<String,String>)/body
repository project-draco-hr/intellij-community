{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      final String output=outputMap.get("text/plain");
      final String errorOutput=outputMap.get("error");
      myCell.removeCellOutputs();
      myViewPanel.removeAll();
      final GridBagConstraints c=new GridBagConstraints();
      c.fill=GridBagConstraints.HORIZONTAL;
      c.gridx=0;
      c.gridy=0;
      c.gridwidth=1;
      addPromptPanel(myViewPanel,myCell.getPromptNumber(),IpnbEditorUtil.PromptType.In,myCodeSourcePanel,c);
      if (output != null) {
        myCell.addCellOutput(new CellOutput(new String[]{output}));
        c.gridx=0;
        c.gridy+=1;
        addPromptPanel(myViewPanel,myCell.getPromptNumber(),IpnbEditorUtil.PromptType.Out,new CodeOutputPanel(output),c);
      }
      if (errorOutput != null) {
        c.gridx=0;
        c.gridy+=1;
        myCell.addCellOutput(new CellOutput(new String[]{errorOutput}));
        addPromptPanel(myViewPanel,myCell.getPromptNumber(),IpnbEditorUtil.PromptType.None,new CodeOutputPanel(errorOutput),c);
      }
      revalidate();
      repaint();
    }
  }
);
}
