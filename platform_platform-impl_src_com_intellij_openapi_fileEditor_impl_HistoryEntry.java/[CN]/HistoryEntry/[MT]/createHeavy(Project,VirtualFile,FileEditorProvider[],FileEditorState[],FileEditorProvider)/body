{
  if (project.isDisposed())   return createLight(file,providers,states,selectedProvider);
  Disposable disposable=Disposer.newDisposable();
  VirtualFilePointer pointer=VirtualFilePointerManager.getInstance().create(file,disposable,null);
  HistoryEntry entry=new HistoryEntry(pointer,selectedProvider,disposable);
  for (int i=0; i < providers.length; i++) {
    entry.putState(providers[i],states[i]);
  }
  return entry;
}
