{
  boolean effectivelyFinal;
  if (variable instanceof PsiParameter) {
    effectivelyFinal=notAccessedForWriting(variable,new LocalSearchScope(((PsiParameter)variable).getDeclarationScope()));
  }
 else {
    final ControlFlow controlFlow;
    try {
      PsiElement codeBlock=PsiUtil.getVariableCodeBlock(variable,context);
      if (codeBlock == null)       return true;
      controlFlow=getControlFlow(codeBlock);
    }
 catch (    AnalysisCanceledException e) {
      return true;
    }
    final List<PsiReferenceExpression> readBeforeWriteLocals=ControlFlowUtil.getReadBeforeWriteLocals(controlFlow);
    for (    PsiReferenceExpression expression : readBeforeWriteLocals) {
      if (expression.resolve() == variable) {
        return PsiUtil.isAccessedForReading(expression);
      }
    }
    final Collection<ControlFlowUtil.VariableInfo> initializedTwice=ControlFlowUtil.getInitializedTwice(controlFlow);
    effectivelyFinal=!initializedTwice.contains(new ControlFlowUtil.VariableInfo(variable,null));
    if (effectivelyFinal) {
      effectivelyFinal=notAccessedForWriting(variable,new LocalSearchScope(scope));
    }
  }
  return effectivelyFinal;
}
