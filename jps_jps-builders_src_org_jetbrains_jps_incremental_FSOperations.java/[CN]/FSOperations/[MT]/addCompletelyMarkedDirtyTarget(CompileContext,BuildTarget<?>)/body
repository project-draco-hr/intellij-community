{
synchronized (TARGETS_COMPLETELY_MARKED_DIRTY) {
    Set<BuildTarget<?>> marked=TARGETS_COMPLETELY_MARKED_DIRTY.get(context);
    if (marked == null) {
      marked=new HashSet<BuildTarget<?>>();
      TARGETS_COMPLETELY_MARKED_DIRTY.set(context,marked);
    }
    marked.add(target);
  }
}
