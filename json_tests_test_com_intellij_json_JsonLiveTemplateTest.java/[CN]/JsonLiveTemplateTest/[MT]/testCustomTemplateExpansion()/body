{
  final String templateContent="{\n" + "  \"foo\": \"$1$\"\n" + "}";
  createJsonTemplate("foo","foo",templateContent);
  myFixture.configureByText(JsonFileType.INSTANCE,"foo<caret>");
  final Editor editor=myFixture.getEditor();
  WriteCommandAction.runWriteCommandAction(null,new Runnable(){
    @Override public void run(){
      new ListTemplatesAction().actionPerformedImpl(getProject(),editor);
      final LookupImpl lookup=(LookupImpl)LookupManager.getActiveLookup(editor);
      assertNotNull(lookup);
      lookup.finishLookup(Lookup.NORMAL_SELECT_CHAR);
    }
  }
);
  myFixture.checkResult(templateContent.replaceAll("\\$.*?\\$",""));
}
