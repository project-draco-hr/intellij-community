{
  SvnBranchConfigurationNew configuration=SvnBranchConfigurationManager.getInstance(myVcs.getProject()).get(rootUrlInfo.getVirtualFile());
  Ref<WCInfoWithBranches.Branch> workingCopyBranch=Ref.create();
  List<WCInfoWithBranches.Branch> branches=ContainerUtil.newArrayList();
  String url=info.getUrl().toString();
  String trunkUrl=configuration.getTrunkUrl();
  if (trunkUrl != null) {
    add(url,trunkUrl,branches,workingCopyBranch);
  }
  for (  String branchUrl : configuration.getBranchUrls()) {
    for (    SvnBranchItem branchItem : configuration.getBranches(branchUrl)) {
      add(url,branchItem.getUrl(),branches,workingCopyBranch);
    }
  }
  Collections.sort(branches,new Comparator<WCInfoWithBranches.Branch>(){
    public int compare(    final WCInfoWithBranches.Branch o1,    final WCInfoWithBranches.Branch o2){
      return Comparing.compare(o1.getUrl(),o2.getUrl());
    }
  }
);
  return new WCInfoWithBranches(info,branches,rootUrlInfo.getRoot(),workingCopyBranch.get());
}
