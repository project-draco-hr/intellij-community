{
  if (!(expression instanceof PsiMethodCallExpression)) {
    return false;
  }
  final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)expression;
  if (methodCallExpression.getMethodExpression().getQualifierExpression() == null) {
    return false;
  }
  final PsiMethod psiMethod=methodCallExpression.resolveMethod();
  if (psiMethod == null || !"compareTo".equals(psiMethod.getName()) || psiMethod.getParameterList().getParametersCount() != 1) {
    return false;
  }
  if (methodCallExpression.getArgumentList().getExpressions().length != 1) {
    return false;
  }
  final PsiClass containingClass=psiMethod.getContainingClass();
  if (containingClass == null) {
    return false;
  }
  final PsiClass javaLangComparable=JavaPsiFacade.getInstance(expression.getProject()).findClass(CommonClassNames.JAVA_LANG_COMPARABLE,GlobalSearchScope.allScope(expression.getProject()));
  if (javaLangComparable == null) {
    return false;
  }
  if (!containingClass.isInheritor(javaLangComparable,true)) {
    return false;
  }
  return true;
}
