{
  List<GraphCommit> commits=SimpleCommitListParser.parseCommitList(in);
  GraphFlags flags=new GraphFlags(commits.size());
  final PermanentGraph graph=PermanentGraphBuilder.build(flags.getSimpleNodeFlags(),commits).first;
  DfsUtil dfsUtil=new DfsUtil(commits.size());
  PermanentGraphLayout graphLayout=PermanentGraphLayoutBuilder.build(dfsUtil,graph,new Comparator<Integer>(){
    @Override public int compare(    @NotNull Integer o1,    @NotNull Integer o2){
      Integer hashIndex1=graph.getHashIndex(o1);
      return hashIndex1.compareTo(graph.getHashIndex(o2));
    }
  }
);
  assertEquals(out,permanentGraphLayoutModelToStr(graphLayout,graph.nodesCount()));
}
