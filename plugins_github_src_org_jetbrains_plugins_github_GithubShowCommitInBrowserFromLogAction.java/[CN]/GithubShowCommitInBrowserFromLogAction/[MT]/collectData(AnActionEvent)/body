{
  Project project=e.getData(PlatformDataKeys.PROJECT);
  if (project == null || project.isDefault()) {
    return null;
  }
  GitHeavyCommit commit=e.getData(GitVcs.GIT_COMMIT);
  if (commit == null) {
    return null;
  }
  VirtualFile root=commit.getRoot();
  GitRepository repository=GitUtil.getRepositoryManager(project).getRepositoryForRoot(root);
  if (repository == null) {
    return null;
  }
  return new EventData(project,repository,commit);
}
