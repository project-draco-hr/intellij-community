{
  Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null || project.isDefault()) {
    return null;
  }
  VcsShortCommitDetails commit=getCurrentlySelectedCommitInTheLog(e);
  if (commit == null) {
    return null;
  }
  VirtualFile root=commit.getRoot();
  GitRepository repository=GitUtil.getRepositoryManager(project).getRepositoryForRoot(root);
  if (repository == null) {
    return null;
  }
  return new EventData(project,repository,commit);
}
