{
  Dimension size=super.getPreferredSize();
  int k=(int)Math.ceil(Math.sqrt(size.getHeight() / size.getWidth()));
  return getLayout().getDimension(this,Math.min(size.width * k,myMaxWidth));
}
