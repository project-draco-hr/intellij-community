{
  if (ExecutionTargetManager.canRun(settings,env.getExecutionTarget())) {
    return env.getExecutionTarget();
  }
  List<ExecutionTarget> targets=ApplicationManager.getApplication().runReadAction(new Computable<List<ExecutionTarget>>(){
    @Override public List<ExecutionTarget> compute(){
      return ExecutionTargetManager.getTargetsFor(env.getProject(),settings);
    }
  }
);
  return ContainerUtil.getFirstItem(targets);
}
