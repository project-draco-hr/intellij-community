{
  Map<HgRepository,List<VcsFullCommitDetails>> commitsInRoots=DvcsUtil.groupCommitsByRoots(HgUtil.getRepositoryManager(myProject),commits);
  for (  Map.Entry<HgRepository,List<VcsFullCommitDetails>> entry : commitsInRoots.entrySet()) {
    processGrafting(entry.getKey(),ContainerUtil.map(entry.getValue(),new Function<VcsFullCommitDetails,String>(){
      @Override public String fun(      VcsFullCommitDetails commitDetails){
        return commitDetails.getId().asString();
      }
    }
));
  }
}
