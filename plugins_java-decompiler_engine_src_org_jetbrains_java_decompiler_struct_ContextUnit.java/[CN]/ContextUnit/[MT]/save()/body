{
switch (type) {
case TYPE_FOLDER:
    resultSaver.saveFolder(filename);
  for (  String[] pair : otherEntries) {
    resultSaver.copyFile(pair[0],filename,pair[1]);
  }
for (int i=0; i < classes.size(); i++) {
  StructClass cl=classes.get(i);
  String entryName=decompiledData.getClassEntryName(cl,classEntries.get(i));
  if (entryName != null) {
    String content=decompiledData.getClassContent(cl);
    if (content != null) {
      int[] mapping=null;
      if (DecompilerContext.getOption(IFernflowerPreferences.BYTECODE_SOURCE_MAPPING)) {
        mapping=DecompilerContext.getBytecodeSourceMapper().getOriginalLinesMapping();
      }
      resultSaver.saveClassFile(filename,cl.qualifiedName,entryName,content,mapping);
    }
  }
}
break;
case TYPE_JAR:
case TYPE_ZIP:
resultSaver.saveFolder(archivePath);
resultSaver.createArchive(archivePath,filename,manifest);
for (String dirEntry : dirEntries) {
resultSaver.saveDirEntry(archivePath,filename,dirEntry);
}
for (String[] pair : otherEntries) {
if (type != TYPE_JAR || !JarFile.MANIFEST_NAME.equalsIgnoreCase(pair[1])) {
resultSaver.copyEntry(pair[0],archivePath,filename,pair[1]);
}
}
for (int i=0; i < classes.size(); i++) {
StructClass cl=classes.get(i);
String entryName=decompiledData.getClassEntryName(cl,classEntries.get(i));
if (entryName != null) {
String content=decompiledData.getClassContent(cl);
resultSaver.saveClassEntry(archivePath,filename,cl.qualifiedName,entryName,content);
}
}
resultSaver.closeArchive(archivePath,filename);
}
}
