{
  createTwoModulesPom("m1","m2");
  VirtualFile m1=createModulePom("m1","<groupId>test</groupId>" + "<artifactId>m1</artifactId>" + "<version>1</version>");
  createModulePom("m2","<groupId>test</groupId>" + "<artifactId>m2</artifactId>" + "<version>1</version>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>junit</groupId>"+ "    <artifactId>junit</artifactId>"+ "    <version>4.0</version>"+ "    <scope>test</scope>"+ "  </dependency>"+ "</dependencies>");
  importProject();
  String libName="Maven: junit:junit:4.0";
  assertModuleLibDep("m2",libName);
  Library library=LibraryTablesRegistrar.getInstance().getLibraryTable(myProject).getLibraryByName(libName);
  assertNotNull(library);
  Promise<Void> result=getExtension().addLibraryDependency(getModule("m1"),library,DependencyScope.COMPILE);
  assertNotNull(result);
  assertHasDependency(m1,"junit","junit");
  waitUntilImported(result);
  assertModuleLibDep("m1",libName);
}
