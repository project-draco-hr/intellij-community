{
  if (element instanceof PyFile) {
    final VirtualFile file=((PyFile)element).getVirtualFile();
    if (file != null) {
      if (myName.equals(file.getNameWithoutExtension())) {
        return setResult(element);
      }
 else       if (PyNames.INIT_DOT_PY.equals(file.getName())) {
        VirtualFile dir=file.getParent();
        if ((dir != null) && myName.equals(dir.getName())) {
          return setResult(element);
        }
      }
    }
  }
 else   if (element instanceof PsiNamedElement) {
    if (myName.equals(((PsiNamedElement)element).getName())) {
      return setResult(element);
    }
  }
 else   if (element instanceof PyReferenceExpression) {
    PyReferenceExpression expr=(PyReferenceExpression)element;
    String referencedName=expr.getReferencedName();
    if (referencedName != null && referencedName.equals(myName)) {
      return setResult(element);
    }
  }
 else   if (element instanceof NameDefiner) {
    final NameDefiner definer=(NameDefiner)element;
    PsiElement by_name=definer.getElementNamed(myName);
    if (by_name != null) {
      setResult(by_name);
      if (!PsiTreeUtil.isAncestor(element,by_name,true)) {
        addNameDefiner(definer);
      }
      if (!(myResult instanceof PyImportedModule)) {
        return false;
      }
    }
 else     if (element instanceof PyImportElement) {
      final PyImportElement importElement=(PyImportElement)element;
      String definedName=importElement.getAsName();
      if (definedName == null) {
        final PyQualifiedName qName=importElement.getImportedQName();
        if (qName != null && qName.getComponentCount() == 1) {
          definedName=qName.getComponents().get(0);
        }
      }
      if (myName.equals(definedName)) {
        addNameDefiner(importElement);
      }
    }
  }
  return true;
}
