{
  String root="/refactoring/move/" + getTestName(true);
  String rootBefore=root + "/before/src";
  String rootAfter=root + "/after/src";
  VirtualFile dir1=myFixture.copyDirectoryToProject(rootBefore,"");
  PsiDocumentManager.getInstance(myFixture.getProject()).commitAllDocuments();
  PsiNamedElement element=findFirstNamedElement(symbolName);
  assertNotNull(element);
  VirtualFile toVirtualFile=dir1.findFileByRelativePath(toFileName);
  String path=toVirtualFile != null ? toVirtualFile.getPath() : (dir1.getPath() + "/" + toFileName);
  new PyMoveClassOrFunctionProcessor(myFixture.getProject(),new PsiNamedElement[]{element},path,false).run();
  VirtualFile dir2=getVirtualFileByName(PythonTestUtil.getTestDataPath() + rootAfter);
  try {
    PlatformTestUtil.assertDirectoriesEqual(dir2,dir1,null);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
