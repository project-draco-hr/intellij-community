{
  final List<PyReferenceExpression> result=new ArrayList<PyReferenceExpression>();
  PyRecursiveElementVisitor visitor=new PyRecursiveElementVisitor(){
    @Override public void visitPyReferenceExpression(    PyReferenceExpression node){
      if (node.textMatches(expression) && !isValidReference(node.getReference())) {
        result.add(node);
      }
      super.visitPyReferenceExpression(node);
    }
  }
;
  parentScope.accept(visitor);
  return result;
}
