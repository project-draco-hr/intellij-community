{
  if (FilePatchStatus.DELETED.equals(myStatus))   return null;
  if (myNewContentRevision == null) {
    myConflicts=null;
    if (FilePatchStatus.ADDED.equals(myStatus)) {
      final FilePath newFilePath=FilePathImpl.createNonLocal(myIoCurrentBase.getAbsolutePath(),false);
      final String content=myPatch.getNewFileText();
      myNewContentRevision=new SimpleContentRevision(content,newFilePath,myPatch.getAfterVersionId());
    }
 else {
      final FilePath newFilePath;
      if (FilePatchStatus.MOVED_OR_RENAMED.equals(myStatus)) {
        newFilePath=VcsUtil.getFilePath(PathMerger.getFile(new File(myBase.getPath()),myPatch.getAfterName()),false);
      }
 else {
        newFilePath=(myCurrentBase != null) ? VcsUtil.getFilePath(myCurrentBase) : VcsUtil.getFilePath(myIoCurrentBase,false);
      }
      myNewContentRevision=new LazyPatchContentRevision(myCurrentBase,newFilePath,myPatch.getAfterVersionId(),myPatch);
      if (myCurrentBase != null) {
        ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
          public void run(){
            ((LazyPatchContentRevision)myNewContentRevision).getContent();
          }
        }
);
      }
    }
  }
  return myNewContentRevision;
}
