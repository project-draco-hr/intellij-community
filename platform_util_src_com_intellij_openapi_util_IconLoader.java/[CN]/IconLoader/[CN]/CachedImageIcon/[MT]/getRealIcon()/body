{
  if (isLoaderDisabled() && (myRealIcon == null || dark != USE_DARK_ICONS || scale != SCALE || filter != IMAGE_FILTER))   return EMPTY_ICON;
  if (dark != USE_DARK_ICONS || scale != SCALE || filter != IMAGE_FILTER) {
    myRealIcon=null;
    dark=USE_DARK_ICONS;
    scale=SCALE;
    filter=IMAGE_FILTER;
  }
  Object realIcon=myRealIcon;
  if (realIcon instanceof Icon)   return (Icon)realIcon;
  Icon icon;
  if (realIcon instanceof Reference) {
    icon=((Reference<Icon>)realIcon).get();
    if (icon != null)     return icon;
  }
  Image image=ImageLoader.loadFromUrl(myUrl,true,filter);
  icon=checkIcon(image,myUrl);
  if (icon != null) {
    if (icon.getIconWidth() < 50 && icon.getIconHeight() < 50) {
      realIcon=icon;
    }
 else {
      realIcon=new SoftReference<Icon>(icon);
    }
    myRealIcon=realIcon;
  }
  return icon == null ? EMPTY_ICON : icon;
}
