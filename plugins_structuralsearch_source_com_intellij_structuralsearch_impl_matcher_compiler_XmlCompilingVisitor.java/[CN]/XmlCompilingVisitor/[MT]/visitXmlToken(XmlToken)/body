{
  super.visitXmlToken(token);
  if (token.getParent() instanceof XmlText && myCompilingVisitor.getContext().getPattern().isRealTypedVar(token)) {
    final MatchingHandler handler=myCompilingVisitor.getContext().getPattern().getHandler(token);
    handler.setFilter(TagValueFilter.getInstance());
    final XmlTextHandler parentHandler=new XmlTextHandler();
    myCompilingVisitor.getContext().getPattern().setHandler(token.getParent(),parentHandler);
    parentHandler.setFilter(TagValueFilter.getInstance());
  }
}
