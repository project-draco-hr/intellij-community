{
  StateStorageManager storageManager=((ApplicationImpl)ApplicationManager.getApplication()).getStateStore().getStateStorageManager();
  String baseDirPath=storageManager.expandMacros(fileSpec);
  StreamProvider provider=storageManager.getStreamProvider();
  SchemeManagerImpl<T,E> manager=new SchemeManagerImpl<T,E>(fileSpec,processor,roamingType,provider,new File(baseDirPath));
  myRegisteredManagers.add(manager);
  return manager;
}
