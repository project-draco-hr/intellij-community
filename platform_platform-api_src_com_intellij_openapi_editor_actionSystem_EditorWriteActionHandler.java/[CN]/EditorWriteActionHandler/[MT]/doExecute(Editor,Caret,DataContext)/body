{
  if (editor.isViewer() || !EditorModificationUtil.requestWriting(editor))   return;
  DocumentRunnable runnable=new DocumentRunnable(editor.getDocument(),editor.getProject()){
    @Override public void run(){
      final Document doc=editor.getDocument();
      doc.startGuardedBlockChecking();
      try {
        executeWriteAction(editor,caret,dataContext);
      }
 catch (      ReadOnlyFragmentModificationException e) {
        EditorActionManager.getInstance().getReadonlyFragmentModificationHandler(doc).handle(e);
      }
 finally {
        doc.stopGuardedBlockChecking();
      }
    }
  }
;
  if (editor instanceof TextComponentEditor) {
    runnable.run();
  }
 else {
    ApplicationManager.getApplication().runWriteAction(runnable);
  }
}
