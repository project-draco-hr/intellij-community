{
  String url=StringUtil.nullize(urlTextField.getText());
  if (url != null) {
    boolean isFile;
    if (url.startsWith(StandardFileSystems.FILE_PROTOCOL_PREFIX)) {
      url=url.substring(StandardFileSystems.FILE_PROTOCOL_PREFIX.length());
      isFile=true;
    }
 else {
      isFile=!url.startsWith("git@") && !URLUtil.containsScheme(url);
    }
    if (isFile && !IcsManager.OBJECT$.getInstance().getRepositoryService().checkFileRepo(url,getContentPane())) {
      return false;
    }
  }
  try {
    IcsManager.OBJECT$.getInstance().getRepositoryManager().createRepositoryIfNeed().setUpstream(url,null);
    return true;
  }
 catch (  Exception e) {
    Messages.showErrorDialog(getContentPane(),IcsBundle.OBJECT$.message("set.upstream.failed.message",e.getMessage()),IcsBundle.OBJECT$.message("set.upstream.failed.title"));
    return false;
  }
}
