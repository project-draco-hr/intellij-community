{
  final ControlFlow controlFlow=ControlFlowCache.getControlFlow(owner);
  final List<PsiElement> result=new ArrayList<PsiElement>();
  for (  Instruction instruction : controlFlow.getInstructions()) {
    if (instruction instanceof ReadWriteInstruction) {
      final ReadWriteInstruction readInstruction=(ReadWriteInstruction)instruction;
      if (readInstruction.getAccess().isReadAccess()) {
        final PsiElement element=readInstruction.getElement();
        if (element != null) {
          for (          PsiReference reference : element.getReferences()) {
            final PsiElement resolved=reference.resolve();
            if (resolved != null && isFromEnclosingScope(resolved,targetFunction)) {
              result.add(element);
              break;
            }
          }
        }
      }
    }
  }
  return result;
}
