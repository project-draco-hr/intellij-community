{
  Project project=variable.getProject();
  if (!FileModificationService.getInstance().prepareFileForWrite(variable.getContainingFile()))   return;
  try {
    variable.normalizeDeclaration();
    final TypeMigrationRules rules=new TypeMigrationRules(TypeMigrationLabeler.getElementType(variable));
    rules.setMigrationRootType(targetType);
    rules.setBoundScope(GlobalSearchScope.projectScope(project));
    TypeMigrationProcessor.runHighlightingTypeMigration(project,editor,rules,variable);
    JavaCodeStyleManager.getInstance(project).shortenClassReferences(variable);
    UndoUtil.markPsiFileForUndo(variable.getContainingFile());
  }
 catch (  IncorrectOperationException e) {
    LOG1.error(e);
  }
}
