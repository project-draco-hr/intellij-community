{
  final String newContent=myNeedToUpdateFileContent ? getContentFromModel() : null;
  myNeedToUpdateFileContent=false;
  new Task.Backgroundable(myProject,"Updating patch series for " + myRepository.getPresentableUrl()){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      if (newContent != null) {
        writeSeriesFile(newContent);
      }
      if (runAfterUpdate != null) {
        runAfterUpdate.run();
      }
    }
  }
.queue();
}
