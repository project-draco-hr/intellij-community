{
  if (type instanceof Class) {
    Class<?> typeClass=(Class<?>)type;
    if (type == Long.TYPE) {
      nullableIsNotSupported(declaredNullable);
      return LONG_PARSER;
    }
 else     if (type == Integer.TYPE) {
      return declaredNullable ? NULLABLE_INTEGER_PARSER : INTEGER_PARSER;
    }
 else     if (type == Boolean.TYPE) {
      nullableIsNotSupported(declaredNullable);
      return BOOLEAN_PARSER;
    }
 else     if (type == Float.TYPE) {
      nullableIsNotSupported(declaredNullable);
      return FLOAT_PARSER;
    }
 else     if (type == Number.class || type == Double.TYPE) {
      return declaredNullable ? NULLABLE_NUMBER_PARSER : NUMBER_PARSER;
    }
 else     if (type == Void.TYPE) {
      nullableIsNotSupported(declaredNullable);
      return VOID_PARSER;
    }
 else     if (type == String.class) {
      if (declaredNullable) {
        return NULLABLE_STRING_PARSER;
      }
 else {
        if (method != null) {
          JsonField jsonField=method.getAnnotation(JsonField.class);
          if (jsonField != null && jsonField.allowAnyPrimitiveValue()) {
            return RAW_STRING_PARSER;
          }
        }
        return STRING_PARSER;
      }
    }
 else     if (type == Object.class) {
      return RAW_STRING_OR_MAP_PARSER;
    }
 else     if (type == JsonReaderEx.class) {
      return declaredNullable ? NULLABLE_JSON_PARSER : JSON_PARSER;
    }
 else     if (type == Map.class) {
      return declaredNullable ? NULLABLE_MAP_PARSER : MAP_PARSER;
    }
 else     if (type == StringIntPair.class) {
      return STRING_INT_PAIR_PARSER;
    }
 else     if (typeClass.isArray()) {
      return new ArrayReader(getFieldTypeParser(typeClass.getComponentType(),false,false,null),false,declaredNullable);
    }
 else     if (typeClass.isEnum()) {
      return EnumReader.create((Class<RetentionPolicy>)typeClass,declaredNullable);
    }
    TypeRef<?> ref=getTypeRef(typeClass);
    if (ref != null) {
      return createJsonParser(ref,declaredNullable,isSubtyping);
    }
    throw new JsonProtocolModelParseException("Method return type " + type + " (simple class) not supported");
  }
 else   if (type instanceof ParameterizedType) {
    ParameterizedType parameterizedType=(ParameterizedType)type;
    if (parameterizedType.getRawType() == List.class) {
      Type argumentType=parameterizedType.getActualTypeArguments()[0];
      if (argumentType instanceof WildcardType) {
        WildcardType wildcard=(WildcardType)argumentType;
        if (wildcard.getLowerBounds().length == 0 && wildcard.getUpperBounds().length == 1) {
          argumentType=wildcard.getUpperBounds()[0];
        }
      }
      return new ArrayReader(getFieldTypeParser(argumentType,false,false,null),true,declaredNullable);
    }
 else     if (parameterizedType.getRawType() == Map.class) {
      return declaredNullable ? NULLABLE_MAP_PARSER : MAP_PARSER;
    }
 else {
      throw new JsonProtocolModelParseException("Method return type " + type + " (generic) not supported");
    }
  }
 else {
    throw new JsonProtocolModelParseException("Method return type " + type + " not supported");
  }
}
