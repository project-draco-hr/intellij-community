{
  PsiClass aClass=super.findClass(qualifiedName,scope);
  if (aClass == null || scope instanceof ExternalModuleBuildGlobalSearchScope || scope instanceof EverythingGlobalScope) {
    return aClass;
  }
  PsiFile containingFile=aClass.getContainingFile();
  VirtualFile file=containingFile != null ? containingFile.getVirtualFile() : null;
  return (file != null && !ProjectFileIndex.SERVICE.getInstance(myProject).isInContent(file) && !ProjectFileIndex.SERVICE.getInstance(myProject).isInLibraryClasses(file) && !ProjectFileIndex.SERVICE.getInstance(myProject).isInLibrarySource(file)) ? aClass : null;
}
