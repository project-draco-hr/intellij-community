{
  return DumbService.getInstance(constructor.getProject()).runReadActionInSmartMode(new Computable<Boolean>(){
    @Override public Boolean compute(){
      for (      PsiField field : aClass.getFields()) {
        if (field instanceof PsiEnumConstant) {
          PsiReference reference=field.getReference();
          if (reference != null && reference.isReferenceTo(constructor)) {
            if (!processor.process(reference)) {
              return false;
            }
          }
        }
      }
      return true;
    }
  }
);
}
