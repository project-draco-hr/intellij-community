{
  final ByteArrayEnumerator byteSeqEum=myIndex.getByteSeqEum();
  final List<LightRef> usages=ContainerUtil.mapNotNull(refs,new Function<JavacRefSymbol,LightRef>(){
    @Override public LightRef fun(    JavacRefSymbol symbol){
      return fromSymbol(symbol,byteSeqEum);
    }
  }
);
  if (myRebuild) {
    for (    LightRef usage : usages) {
      myIndex.getBackwardReferenceMap().put(usage,fileId);
      myIndex.getReferenceMap().put(fileId,usage);
    }
  }
 else {
    updateReferenceIndicesIncrementally(fileId,usages);
  }
}
