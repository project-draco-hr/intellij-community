{
  String working_dir=new File(bin_path).getParent();
  Application application=ApplicationManager.getApplication();
  if (application != null && !application.isUnitTestMode()) {
    String scriptFile=PythonHelpersLocator.getHelperPath("syspath.py");
    String[] add_environment=getVirtualEnvAdditionalEnv(bin_path);
    return SdkUtil.getProcessOutput(new File(scriptFile).getParent(),new String[]{bin_path,scriptFile},add_environment,RUN_TIMEOUT).getStdoutLines();
  }
 else {
    List<String> ret=new ArrayList<String>(1);
    ret.add(working_dir);
    return ret;
  }
}
