{
  TreeSet<String> candidates=new TreeSet<String>(new Comparator<String>(){
    public int compare(    String o1,    String o2){
      return findDigits(o1).compareTo(findDigits(o2));
    }
  }
);
  if (SystemInfo.isWindows) {
    findSubdirInstallations(candidates,"C:\\",PYTHON_STR,"python.exe");
    findSubdirInstallations(candidates,"C:\\Program Files\\",PYTHON_STR,"python.exe");
    findSubdirInstallations(candidates,"C:\\","jython","jython.bat");
  }
 else   if (SystemInfo.isMac) {
    final String pythonPath="/Library/Frameworks/Python.framework/Versions";
    VirtualFile rootVDir=LocalFileSystem.getInstance().findFileByPath(pythonPath);
    if (rootVDir != null) {
      for (      VirtualFile dir : rootVDir.getChildren()) {
        final String dir_name=dir.getName().toLowerCase();
        if (dir.isDirectory()) {
          if ("Current".equals(dir_name) || dir_name.startsWith("2") || dir_name.startsWith("3")|| dir_name.startsWith("jython")) {
            VirtualFile bin_dir=dir.findChild("bin");
            if (bin_dir != null && bin_dir.isDirectory()) {
              VirtualFile python_exe=dir.findChild(PYTHON_STR);
              if (python_exe != null)               candidates.add(python_exe.getPath());
              python_exe=dir.findChild("jython");
              if (python_exe != null)               candidates.add(python_exe.getPath());
            }
 else {
              VirtualFile python_exe=dir.findChild("jython");
              if (python_exe != null)               candidates.add(python_exe.getPath());
            }
          }
        }
      }
    }
  }
 else   if (SystemInfo.isUnix) {
    VirtualFile rootDir=LocalFileSystem.getInstance().findFileByPath("/usr/bin");
    if (rootDir != null) {
      VirtualFile[] suspects=rootDir.getChildren();
      for (      VirtualFile child : suspects) {
        if (!child.isDirectory()) {
          final String child_name=child.getName();
          if (child_name.startsWith(PYTHON_STR) || child_name.startsWith("jython")) {
            candidates.add(child.getPath());
          }
        }
      }
      candidates.add(rootDir.getPath());
    }
  }
  if (candidates.size() > 0) {
    String[] candidateArray=ArrayUtil.toStringArray(candidates);
    return candidateArray[candidateArray.length - 1];
  }
  return null;
}
