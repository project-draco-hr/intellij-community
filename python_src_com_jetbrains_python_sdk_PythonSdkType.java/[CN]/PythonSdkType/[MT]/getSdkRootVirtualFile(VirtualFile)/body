{
  String suffix=path.getExtension();
  if (suffix != null) {
    suffix=suffix.toLowerCase();
  }
  if ((!path.isDirectory()) && ("zip".equals(suffix) || "egg".equals(suffix))) {
    final VirtualFile jar=JarFileSystem.getInstance().getJarRootForLocalFile(path);
    if (jar != null) {
      return jar;
    }
  }
  return path;
}
