{
  Application application=ApplicationManager.getApplication();
  if (application != null && !application.isUnitTestMode()) {
    @NonNls String script="import sys\n" + "import os.path\n" + "for x in sys.path:\n"+ "  if x != os.path.dirname(sys.argv [0]): sys.stdout.write(x+chr(10))";
    try {
      final File scriptFile=File.createTempFile("script",".py");
      try {
        PrintStream out=new PrintStream(scriptFile);
        try {
          out.print(script);
        }
  finally {
          out.close();
        }
        String[] add_environment=getVirtualEnvAdditionalEnv(bin_path);
        return SdkUtil.getProcessOutput(sdk_path,new String[]{bin_path,scriptFile.getPath()},add_environment,RUN_TIMEOUT).getStdoutLines();
      }
  finally {
        FileUtil.delete(scriptFile);
      }
    }
 catch (    IOException e) {
      LOG.info(e);
      return Collections.emptyList();
    }
  }
 else {
    List<String> ret=new ArrayList<String>(1);
    ret.add(sdk_path);
    return ret;
  }
}
