{
  final ProcessHandler processHandler=createProcessHandler(module);
  if (processHandler == null)   return null;
  final String title=GroovyConsoleUtil.getTitle(module);
  final ConsoleViewImpl consoleView=new ConsoleViewImpl(project,true);
  final RunContentDescriptor descriptor=new RunContentDescriptor(consoleView,processHandler,new JPanel(new BorderLayout()),title);
  final GroovyConsole console=new GroovyConsole(project,descriptor,consoleView,processHandler);
  final CloseAction closeAction=new CloseAction(defaultExecutor,descriptor,project);
  consoleView.addCustomConsoleAction(closeAction);
  final JComponent consoleViewComponent=consoleView.getComponent();
  final ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,new DefaultActionGroup(consoleView.createConsoleActions()),false);
  toolbar.setTargetComponent(consoleViewComponent);
  final JComponent ui=descriptor.getComponent();
  ui.add(consoleViewComponent,BorderLayout.CENTER);
  ui.add(toolbar.getComponent(),BorderLayout.WEST);
  contentFile.putUserData(GROOVY_CONSOLE,console);
  consoleView.attachToProcess(processHandler);
  processHandler.startNotify();
  processHandler.addProcessListener(new ProcessAdapter(){
    @Override public void processTerminated(    ProcessEvent event){
      contentFile.putUserData(GROOVY_CONSOLE,null);
    }
  }
);
  ExecutionManager.getInstance(project).getContentManager().showRunContent(defaultExecutor,descriptor);
  return console;
}
