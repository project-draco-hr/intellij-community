{
  String testRunner="";
  final Module[] modules=ModuleManager.getInstance(project).getModules();
  for (  Module module : modules) {
    if (!testRunner.isEmpty())     break;
    final PyFile setupPy=PyPackageUtil.findSetupPy(module);
    if (setupPy == null)     continue;
    final PyCallExpression setupCall=PyPackageUtil.findSetupCall(setupPy);
    if (setupCall == null)     continue;
    for (    PyExpression arg : setupCall.getArguments()) {
      if (arg instanceof PyKeywordArgument) {
        final PyKeywordArgument kwarg=(PyKeywordArgument)arg;
        if ("test_loader".equals(kwarg.getKeyword()) || "test_suite".equals(kwarg.getKeyword())) {
          final PyExpression value=kwarg.getValueExpression();
          if (value instanceof PyStringLiteralExpression) {
            final String stringValue=((PyStringLiteralExpression)value).getStringValue();
            if (stringValue.contains(PyNames.NOSE_TEST)) {
              testRunner=PythonTestConfigurationsModel.PYTHONS_NOSETEST_NAME;
              break;
            }
            if (stringValue.contains(PyNames.PY_TEST)) {
              testRunner=PythonTestConfigurationsModel.PY_TEST_NAME;
              break;
            }
            if (stringValue.contains(PyNames.AT_TEST_IMPORT)) {
              testRunner=PythonTestConfigurationsModel.PYTHONS_ATTEST_NAME;
              break;
            }
          }
        }
      }
    }
  }
  return testRunner;
}
