{
  if (anchor instanceof SmartClassAnchor.DirectSmartClassAnchor) {
    return ((SmartClassAnchor.DirectSmartClassAnchor)anchor).myPsiClass;
  }
 else   if (anchor instanceof SmartClassAnchor.StubSmartClassAnchor) {
    SmartClassAnchor.StubSmartClassAnchor stubAnchor=((SmartClassAnchor.StubSmartClassAnchor)anchor);
    VirtualFile file=PersistentFS.getInstance().findFileById(stubAnchor.myFileId);
    PsiFile psiFile=PsiManager.getInstance(project).findFile(file);
    return (PsiClass)restoreFromStubIndex((PsiFileWithStubSupport)psiFile,stubAnchor.myStubId);
  }
  return null;
}
