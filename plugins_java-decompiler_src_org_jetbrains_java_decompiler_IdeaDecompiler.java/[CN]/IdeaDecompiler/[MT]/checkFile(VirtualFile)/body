{
  final Ref<Boolean> isGroovy=Ref.create(false);
  try {
    new ClassReader(file.contentsToByteArray()).accept(new ClassVisitor(Opcodes.ASM5){
      @Override public void visit(      int version,      int access,      String name,      String signature,      String superName,      String[] interfaces){
        for (        String anInterface : interfaces) {
          if ("groovy/lang/GroovyObject".equals(anInterface)) {
            isGroovy.set(true);
            break;
          }
        }
      }
      @Override public void visitSource(      String source,      String debug){
        if (source != null && source.endsWith(".groovy")) {
          isGroovy.set(true);
        }
      }
    }
,ClassReader.SKIP_CODE);
  }
 catch (  Exception e) {
    throw new CannotDecompileException(e);
  }
  if (isGroovy.get()) {
    throw new CannotDecompileException("Groovy class rejected");
  }
}
