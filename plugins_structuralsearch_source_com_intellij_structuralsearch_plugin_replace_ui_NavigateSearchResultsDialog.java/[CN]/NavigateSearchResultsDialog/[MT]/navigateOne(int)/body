{
  List l=(List)replacements.get(index);
  SmartPsiElementPointer pointer=null;
  int start=0;
  int end=0;
  for (Iterator i=l.iterator(); i.hasNext(); ) {
    final SmartPsiElementPointer ptr=(SmartPsiElementPointer)i.next();
    final PsiElement element=UIUtil.getNavigationElement(ptr.getElement());
    if (pointer == null) {
      pointer=ptr;
      start=element.getTextRange().getStartOffset();
    }
    end=element.getTextRange().getEndOffset();
  }
  if (replaceButton != null) {
    if (pointer.getElement().isValid()) {
      UIUtil.setContent(replacement,replacements.get(index).getReplacement(),0,-1,project);
      replaceButton.setVisible(true);
      replacement.getComponent().setVisible(true);
    }
 else {
      replaceButton.setVisible(false);
      replacement.getComponent().setVisible(false);
    }
  }
  boolean hasNextMatch=index + 1 < replacements.size();
  if (!matchingProcess.isEnded()) {
    hasNextMatch=true;
  }
  setOKActionEnabled(hasNextMatch);
  previousMatch.setEnabled(index > 0);
  if (pointer != null) {
    UIUtil.navigate(pointer.getElement());
    hilight(start,end);
  }
}
