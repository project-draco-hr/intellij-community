{
  if (!WebBrowserManager.getInstance().getBrowserSettings(browser).isActive()) {
    e.getPresentation().setEnabled(false);
    e.getPresentation().setVisible(false);
    return;
  }
  Pair<OpenInBrowserRequest,WebBrowserUrlProvider> result=OpenInBrowserBaseGroupAction.doUpdate(e);
  if (result == null) {
    return;
  }
  String description=getTemplatePresentation().getText();
  if (ActionPlaces.CONTEXT_TOOLBAR.equals(e.getPlace())) {
    StringBuilder builder=new StringBuilder(description);
    builder.append(" (");
    Shortcut[] shortcuts=KeymapManager.getInstance().getActiveKeymap().getShortcuts("WebOpenInAction");
    if (shortcuts.length > 0) {
      builder.append(KeymapUtil.getShortcutText(shortcuts[0]));
    }
    if (HtmlUtil.isHtmlFile(result.first.getFile())) {
      builder.append(", hold Shift to open URL of local file");
    }
    builder.append(')');
    description=builder.toString();
  }
  e.getPresentation().setText(description);
}
