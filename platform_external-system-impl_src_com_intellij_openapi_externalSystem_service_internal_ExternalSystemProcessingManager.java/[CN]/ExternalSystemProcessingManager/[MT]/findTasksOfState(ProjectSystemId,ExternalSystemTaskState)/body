{
  List<ExternalSystemTask> result=new SmartList<ExternalSystemTask>();
  for (  ExternalSystemTask task : myTasksDetails.values()) {
    if (task instanceof AbstractExternalSystemTask) {
      AbstractExternalSystemTask externalSystemTask=(AbstractExternalSystemTask)task;
      if (externalSystemTask.getExternalSystemId().getId().equals(projectSystemId.getId()) && ArrayUtil.contains(externalSystemTask.getState(),taskStates)) {
        result.add(task);
      }
    }
  }
  return result;
}
