{
  Set<PsiClass> supers=ContainerUtil.newHashSet();
  final PsiModifierList modifierList=psiClass.getModifierList();
  if (modifierList != null) {
    for (    PsiAnnotation annotation : modifierList.getAnnotations()) {
      if (isJavaLangAnnotation(annotation))       continue;
      PsiJavaCodeReferenceElement ref=annotation.getNameReferenceElement();
      if (ref != null) {
        PsiElement annotationType=ref.resolve();
        if (annotationType instanceof PsiClass) {
          final PsiClass aClass=(PsiClass)annotationType;
          final PsiAnnotation.TargetType target=AnnotationTargetUtil.findAnnotationTarget(aClass,PsiAnnotation.TargetType.TYPE,PsiAnnotation.TargetType.ANNOTATION_TYPE);
          if (target != null && target != PsiAnnotation.TargetType.UNKNOWN) {
            supers.add(aClass);
          }
        }
      }
    }
  }
  return supers.toArray(new PsiClass[supers.size()]);
}
