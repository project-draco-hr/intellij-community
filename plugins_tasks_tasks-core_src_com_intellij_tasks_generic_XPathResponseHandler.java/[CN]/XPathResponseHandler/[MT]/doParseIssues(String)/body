{
  String idSelector=getSelectorPath("id"), summarySelector=getSelectorPath("summary");
  if (idSelector == null || summarySelector == null) {
    throw new IllegalArgumentException("Selectors 'task', 'id' and 'summary' are mandatory");
  }
  Document document=ourDocumentBuilder.parse(new ByteArrayInputStream(response.getBytes()));
  XPathExpression idPath=ourXPathFactory.newXPath().compile(idSelector);
  NodeList idNodes=(NodeList)idPath.evaluate(document,XPathConstants.NODESET);
  XPathExpression summaryPath=ourXPathFactory.newXPath().compile(summarySelector);
  NodeList summaryNodes=(NodeList)summaryPath.evaluate(document,XPathConstants.NODESET);
  if (summaryNodes.getLength() != idNodes.getLength()) {
    throw new IllegalArgumentException("Number of tasks selected by 'id' and 'summary' XPath expressions is not the same.");
  }
  ArrayList<Task> tasks=new ArrayList<Task>(idNodes.getLength());
  for (int i=0; i < idNodes.getLength(); i++) {
    String id=idNodes.item(i).getNodeValue();
    String summary=summaryNodes.item(i).getNodeValue();
    tasks.add(new GenericTask(id,summary,myRepository));
  }
  return tasks.toArray(new Task[tasks.size()]);
}
