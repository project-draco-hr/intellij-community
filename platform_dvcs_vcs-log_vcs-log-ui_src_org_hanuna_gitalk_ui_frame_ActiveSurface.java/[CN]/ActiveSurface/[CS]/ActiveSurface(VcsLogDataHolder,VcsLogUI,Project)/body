{
  myLogDataHolder=logDataHolder;
  myGraphTable=new VcsLogGraphTable(vcsLogUI);
  myBranchesPanel=new BranchesPanel(logDataHolder,vcsLogUI);
  final ChangesBrowser changesBrowser=new ChangesBrowser(project,null,Collections.<Change>emptyList(),null,false,false,null,ChangesBrowser.MyUseCase.COMMITTED_CHANGES,null);
  changesBrowser.getDiffAction().registerCustomShortcutSet(CommonShortcuts.getDiff(),myGraphTable);
  setDefaultEmptyText(changesBrowser);
  myGraphTable.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    @Override public void valueChanged(    ListSelectionEvent e){
      int rows=myGraphTable.getSelectedRowCount();
      if (rows < 1) {
        setDefaultEmptyText(changesBrowser);
        changesBrowser.setChangesToDisplay(Collections.<Change>emptyList());
      }
 else {
        List<Change> changes=new ArrayList<Change>();
        for (        Node node : myGraphTable.getSelectedNodes()) {
          try {
            VcsCommit commitData=myLogDataHolder.getDataPack().getCommitDataGetter().getCommitData(node);
            changes.addAll(commitData.getChanges());
          }
 catch (          VcsException ex) {
            LOG.error(ex);
          }
        }
        changesBrowser.setChangesToDisplay(CommittedChangesTreeBrowser.zipChanges(changes));
      }
    }
  }
);
  Splitter splitter=new Splitter(false,0.7f);
  splitter.setFirstComponent(ScrollPaneFactory.createScrollPane(myGraphTable));
  splitter.setSecondComponent(changesBrowser);
  setLayout(new BorderLayout());
  add(myBranchesPanel,BorderLayout.NORTH);
  add(splitter,BorderLayout.CENTER);
}
