{
  VirtualFile pkgFile=mySource.createPackageDir(packageName);
  final PsiDirectory toDir=PsiManager.getInstance(myProject).findDirectory(pkgFile);
  assertNotNull(toDir);
  new WriteCommandAction(myProject,psiElement.getContainingFile()){
    @Override protected void run(    @NotNull Result result) throws Throwable {
      PackageWrapper wrapper=PackageWrapper.create(JavaDirectoryService.getInstance().getPackage(toDir));
      new MoveClassesOrPackagesProcessor(myProject,new PsiElement[]{psiElement},new SingleSourceRootMoveDestination(wrapper,toDir),false,false,null).run();
    }
  }
.executeSilently();
}
