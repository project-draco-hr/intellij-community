{
  VirtualFile pkgFile=mySource.createPackageDir(packageName);
  final PsiDirectory toDir=PsiManager.getInstance(myProject).findDirectory(pkgFile);
  new WriteCommandAction(myProject,psiElement.getContainingFile()){
    @Override protected void run(    final Result result) throws Throwable {
      new MoveClassesOrPackagesProcessor(myProject,new PsiElement[]{psiElement},new SingleSourceRootMoveDestination(PackageWrapper.create(JavaDirectoryService.getInstance().getPackage(toDir)),toDir),false,false,null).run();
    }
  }
.executeSilently();
}
