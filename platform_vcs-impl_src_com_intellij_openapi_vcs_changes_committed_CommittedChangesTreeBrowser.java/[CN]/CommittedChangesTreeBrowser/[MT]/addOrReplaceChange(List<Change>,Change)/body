{
  final ContentRevision beforeRev=c.getBeforeRevision();
  if (beforeRev != null) {
    final FilePath beforePath=beforeRev.getFile();
    for (    Change oldChange : result) {
      ContentRevision rev=oldChange.getAfterRevision();
      if (rev != null && rev.getFile().equals(beforePath)) {
        result.remove(oldChange);
        if (oldChange.getBeforeRevision() != null || c.getAfterRevision() != null) {
          result.add(new Change(oldChange.getBeforeRevision(),c.getAfterRevision()));
        }
        return;
      }
    }
  }
  result.add(c);
}
