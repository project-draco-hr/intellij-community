{
  final ContentRevision beforeRev=c.getBeforeRevision();
  if (beforeRev != null) {
    final FilePath beforePath=beforeRev.getFile();
    for (    Change oldChange : changes) {
      ContentRevision rev=oldChange.getAfterRevision();
      if (rev != null && rev.getFile().equals(beforePath)) {
        changes.remove(oldChange);
        if (oldChange.getBeforeRevision() != null || c.getAfterRevision() != null) {
          changes.add(new Change(oldChange.getBeforeRevision(),c.getAfterRevision()));
        }
        return;
      }
    }
  }
  changes.add(c);
}
