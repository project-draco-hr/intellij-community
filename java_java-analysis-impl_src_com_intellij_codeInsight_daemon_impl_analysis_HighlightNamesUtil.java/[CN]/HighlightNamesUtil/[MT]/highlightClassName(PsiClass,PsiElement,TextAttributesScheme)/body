{
  TextRange range=elementToHighlight.getTextRange();
  if (elementToHighlight instanceof PsiJavaCodeReferenceElement) {
    final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)elementToHighlight;
    PsiElement identifier=referenceElement.getReferenceNameElement();
    if (identifier != null) {
      range=identifier.getTextRange();
    }
  }
  final PsiElement parent=elementToHighlight.getParent();
  if (parent instanceof PsiAnnotation) {
    final PsiAnnotation psiAnnotation=(PsiAnnotation)parent;
    range=new TextRange(psiAnnotation.getTextRange().getStartOffset(),range.getEndOffset());
  }
  HighlightInfoType type=getClassNameHighlightType(aClass,elementToHighlight);
  TextAttributes attributes=mergeWithScopeAttributes(aClass,type,colorsScheme);
  HighlightInfo.Builder builder=HighlightInfo.newHighlightInfo(type).range(range);
  if (attributes != null) {
    builder.textAttributes(attributes);
  }
  return builder.createUnconditionally();
}
