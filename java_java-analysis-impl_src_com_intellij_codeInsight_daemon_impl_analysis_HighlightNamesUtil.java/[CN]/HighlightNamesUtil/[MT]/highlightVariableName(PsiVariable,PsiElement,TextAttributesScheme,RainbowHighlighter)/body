{
  HighlightInfoType varType=getVariableNameHighlightType(variable);
  if (varType == null) {
    return null;
  }
  if (variable instanceof PsiField) {
    TextAttributes attributes=mergeWithScopeAttributes(variable,varType,colorsScheme);
    HighlightInfo.Builder builder=HighlightInfo.newHighlightInfo(varType).range(elementToHighlight.getTextRange());
    if (attributes != null) {
      builder.textAttributes(attributes);
    }
    return builder.createUnconditionally();
  }
  HighlightInfo.Builder builder=HighlightInfo.newHighlightInfo(varType).range(elementToHighlight);
  if (rainbowHighlighter != null && (varType == JavaHighlightInfoTypes.LOCAL_VARIABLE || varType == JavaHighlightInfoTypes.PARAMETER)) {
    String name=variable.getName();
    if (name != null) {
      TextAttributes rainbowAttributes=rainbowHighlighter.getAttributes(name);
      builder.textAttributes(rainbowAttributes);
    }
  }
  return builder.create();
}
