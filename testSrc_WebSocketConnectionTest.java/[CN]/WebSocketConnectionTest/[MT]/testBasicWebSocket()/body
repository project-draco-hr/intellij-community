{
  final Kernel kernel=getFirstKernel("http://" + LOCATION + KERNELS_URL);
  assertNotNull(kernel);
  final URI shellURI=new URI("ws://" + LOCATION + KERNELS_URL+ "/"+ kernel.getId()+ "/shell");
  final WebSocketClient shellClient=new WebSocketClient(shellURI,new Draft_17()){
    @Override public void onOpen(    @NotNull ServerHandshake handshakeData){
      System.out.format("onOpen(%s)\n",handshakeData);
    }
    @Override public void onMessage(    @NotNull String message){
      System.out.format("onMessage(%s)\n",message);
    }
    @Override public void onClose(    int code,    @NotNull String reason,    boolean remote){
      System.out.format("onClose(%d, %s, %b)\n",code,reason,remote);
    }
    @Override public void onError(    @NotNull Exception e){
      System.out.format("onError(%s)\n",e);
    }
  }
;
  final Thread thread=new Thread(shellClient);
  thread.start();
  try {
    thread.join();
  }
  finally {
    shellClient.close();
  }
}
