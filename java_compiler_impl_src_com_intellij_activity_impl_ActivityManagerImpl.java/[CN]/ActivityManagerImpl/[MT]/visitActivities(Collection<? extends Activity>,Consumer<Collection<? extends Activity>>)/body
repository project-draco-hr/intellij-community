{
  for (  Activity child : activities) {
    Collection<? extends Activity> _activities;
    if (child instanceof AbstractActivity) {
      _activities=((AbstractActivity)child).getDependsOn();
    }
 else     if (child instanceof ActivityList) {
      _activities=(ActivityList)child;
    }
 else {
      _activities=Collections.singleton(child);
    }
    visitActivities(_activities,consumer);
  }
  consumer.consume(activities);
}
