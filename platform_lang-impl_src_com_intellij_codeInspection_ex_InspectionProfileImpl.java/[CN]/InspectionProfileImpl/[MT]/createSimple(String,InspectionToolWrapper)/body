{
  InspectionProfileImpl profile=new InspectionProfileImpl(name,new InspectionToolRegistrar(null){
    @NotNull @Override public List<InspectionToolWrapper> createTools(){
      return Arrays.asList(toolWrappers);
    }
  }
,InspectionProfileManager.getInstance());
  boolean init=INIT_INSPECTIONS;
  try {
    INIT_INSPECTIONS=true;
    profile.initialize(null);
  }
  finally {
    INIT_INSPECTIONS=init;
  }
  for (  InspectionToolWrapper toolWrapper : toolWrappers) {
    profile.enableTool(toolWrapper.getShortName());
  }
  return profile;
}
