{
  myDoneButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      done();
    }
  }
);
  final AnAction doneAction=new DumbAwareAction(){
    @Override public void update(    AnActionEvent e){
      super.update(e);
      boolean lookup=LookupManager.getInstance(getEventProject(e)).getActiveLookup() != null;
      Editor editor=e.getData(CommonDataKeys.EDITOR);
      e.getPresentation().setEnabled(!lookup && (editor == null || StringUtil.isEmpty(editor.getSelectionModel().getSelectedText())));
    }
    public void actionPerformed(    AnActionEvent e){
      Component component=PlatformDataKeys.CONTEXT_COMPONENT.getData(e.getDataContext());
      if (component instanceof JComboBox && SwingUtilities.isDescendingFrom(component,getMainPanel())) {
        ((JComboBox)component).hidePopup();
      }
      done();
    }
  }
;
  doneAction.registerCustomShortcutSet(new CompositeShortcutSet(CustomShortcutSet.fromString("ESCAPE"),CustomShortcutSet.fromString("ENTER")),myMainPanel);
}
