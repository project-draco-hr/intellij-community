{
  myDoneButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      done();
    }
  }
);
  final AnAction doneAction=new DumbAwareAction(){
    @Override public void update(    AnActionEvent e){
      super.update(e);
      boolean lookup=LookupManager.getInstance(getEventProject(e)).getActiveLookup() != null;
      Editor editor=e.getData(CommonDataKeys.EDITOR);
      final Component owner=IdeFocusManager.findInstance().getFocusOwner();
      if (owner != null) {
        final JComboBox comboBox=UIUtil.getParentOfType(JComboBox.class,owner);
        if (comboBox != null && comboBox.isPopupVisible()) {
          lookup=true;
        }
      }
      e.getPresentation().setEnabled(!lookup && (editor == null || StringUtil.isEmpty(editor.getSelectionModel().getSelectedText())));
    }
    public void actionPerformed(    AnActionEvent e){
      done();
    }
  }
;
  doneAction.registerCustomShortcutSet(new CompositeShortcutSet(CommonShortcuts.ESCAPE,CommonShortcuts.ENTER,CommonShortcuts.CTRL_ENTER),myMainPanel);
}
