{
  List<SourceFolder> result=new ArrayList<SourceFolder>();
  List<String> actual=new ArrayList<String>();
  for (  ContentEntry contentRoot : contentRoots) {
    for (    SourceFolder f : contentRoot.getSourceFolders(rootType)) {
      rootUrl=rootUrl == null ? VirtualFileManager.extractPath(contentRoot.getUrl()) : VirtualFileManager.extractPath(rootUrl);
      String folderUrl=VirtualFileManager.extractPath(f.getUrl());
      if (folderUrl.startsWith(rootUrl)) {
        int length=rootUrl.length() + 1;
        folderUrl=folderUrl.substring(Math.min(length,folderUrl.length()));
      }
      actual.add(folderUrl);
      result.add(f);
    }
  }
  assertOrderedElementsAreEqual(actual,Arrays.asList(expected));
  return result;
}
