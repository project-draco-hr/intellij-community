{
  myRootDir=dir;
  try {
    myProject=doCreateProject(getIprFile());
    List<DetectedRootData> list=RootDetectionProcessor.detectRoots(dir);
    myBuilder.setupProjectStructure(RootDetectionProcessor.createRootsMap(list));
    myBuilder.commit(myProject,null,ModulesProvider.EMPTY_MODULES_PROVIDER);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
