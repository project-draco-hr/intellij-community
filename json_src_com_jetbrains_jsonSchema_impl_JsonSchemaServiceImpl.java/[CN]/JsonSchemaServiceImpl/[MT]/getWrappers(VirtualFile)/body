{
  if (file == null)   return null;
  final List<JsonSchemaObjectCodeInsightWrapper> wrappers=new ArrayList<>();
  JsonSchemaProviderFactory[] factories=getProviderFactories();
  for (  JsonSchemaProviderFactory factory : factories) {
    for (    JsonSchemaFileProvider provider : factory.getProviders(myProject)) {
      if (provider.isAvailable(file)) {
        final VirtualFile key=provider.getSchemaFile();
synchronized (myLock) {
          JsonSchemaObjectCodeInsightWrapper wrapper=myWrappers.get(key);
          if (wrapper == null) {
            wrapper=createWrapper(provider);
            if (wrapper == null)             return null;
            myWrappers.putIfAbsent(key,wrapper);
          }
          wrappers.add(wrapper);
        }
      }
    }
  }
  return wrappers;
}
