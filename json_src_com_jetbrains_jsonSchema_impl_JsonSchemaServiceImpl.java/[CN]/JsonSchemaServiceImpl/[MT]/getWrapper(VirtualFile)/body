{
  if (file == null)   return null;
  JsonSchemaProviderFactory[] factories=getProviderFactories();
  for (  JsonSchemaProviderFactory factory : factories) {
    for (    JsonSchemaFileProvider provider : factory.getProviders(myProject)) {
      if (provider.isAvailable(file)) {
        JsonSchemaObjectCodeInsightWrapper wrapper=myWrappers.get(provider);
        if (wrapper == null) {
          JsonSchemaObjectCodeInsightWrapper newWrapper=createWrapper(provider);
          if (newWrapper == null)           return null;
          myWrappers.putIfAbsent(provider,newWrapper);
          wrapper=myWrappers.get(provider);
        }
        if (wrapper != null) {
          return wrapper;
        }
      }
    }
  }
  return null;
}
