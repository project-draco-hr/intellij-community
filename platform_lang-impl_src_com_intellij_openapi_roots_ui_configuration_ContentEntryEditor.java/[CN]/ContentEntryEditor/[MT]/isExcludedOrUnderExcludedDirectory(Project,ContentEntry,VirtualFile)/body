{
  List<VirtualFile> excludedFiles=ContainerUtil.newArrayList(entry.getExcludeFolderFiles());
  if (project != null) {
    for (    DirectoryIndexExcludePolicy policy : DirectoryIndexExcludePolicy.getExtensions(project)) {
      ContainerUtil.addAllNotNull(excludedFiles,policy.getExcludeRootsForProject());
    }
  }
  for (  VirtualFile excludedFile : excludedFiles) {
    if (VfsUtilCore.isAncestor(excludedFile,file,false)) {
      return true;
    }
  }
  return false;
}
