{
  if (isSuitable(fileEditorManager.getProject(),file)) {
    FileEditor[] fileEditors=fileEditorManager.getAllEditors(file);
    for (    final FileEditor fileEditor : fileEditors) {
      if (fileEditor instanceof TextEditor) {
        Editor editor=((TextEditor)fileEditor).getEditor();
        final BreadcrumbsXmlWrapper existingWrapper=BreadcrumbsXmlWrapper.getBreadcrumbsComponent(editor);
        if (existingWrapper != null) {
          existingWrapper.queueUpdate();
          continue;
        }
        final BreadcrumbsXmlWrapper wrapper=new BreadcrumbsXmlWrapper(editor);
        final JComponent c=wrapper.getComponent();
        fileEditorManager.addTopComponent(fileEditor,c);
        Disposer.register(fileEditor,new Disposable(){
          @Override public void dispose(){
            disposeWrapper(fileEditorManager,fileEditor,wrapper);
          }
        }
);
      }
    }
  }
 else {
    removeBreadcrumbs(fileEditorManager,file);
  }
}
