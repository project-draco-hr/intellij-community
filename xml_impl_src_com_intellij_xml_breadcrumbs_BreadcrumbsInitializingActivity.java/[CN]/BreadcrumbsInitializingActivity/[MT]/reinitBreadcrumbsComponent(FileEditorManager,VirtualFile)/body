{
  if (isSuitable(fileEditorManager.getProject(),file)) {
    FileEditor[] fileEditors=fileEditorManager.getAllEditors(file);
    for (    final FileEditor fileEditor : fileEditors) {
      if (fileEditor instanceof TextEditor) {
        Editor editor=((TextEditor)fileEditor).getEditor();
        BreadcrumbsXmlWrapper wrapper=BreadcrumbsXmlWrapper.getBreadcrumbsComponent(editor);
        if (wrapper != null) {
          wrapper.queueUpdate();
          continue;
        }
        wrapper=new BreadcrumbsXmlWrapper(editor);
        final JComponent c=wrapper.getComponent();
        fileEditorManager.addTopComponent(fileEditor,c);
        BreadcrumbsXmlWrapper finalWrapper=wrapper;
        Disposer.register(fileEditor,new Disposable(){
          @Override public void dispose(){
            disposeWrapper(fileEditorManager,fileEditor,finalWrapper);
          }
        }
);
      }
    }
  }
 else {
    removeBreadcrumbs(fileEditorManager,file);
  }
}
