{
  for (  VirtualFile root : hierarchy) {
    if (moduleContentRoot != null && myRoots.sourceRootOf.get(root).contains(myRoots.contentRootOf.get(moduleContentRoot)) && librarySourceRoot == null) {
      return root;
    }
    if (root == libraryClassRoot || root == librarySourceRoot) {
      return root;
    }
    if (root == moduleContentRoot && !myRoots.sourceRootOf.containsKey(root) && librarySourceRoot == null && libraryClassRoot == null) {
      return null;
    }
  }
  return null;
}
