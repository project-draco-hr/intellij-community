{
  final Set<Hash> checkedCommitHashes=refTreeModel.getCheckedCommits();
  if (!prevSelectionBranches.equals(checkedCommitHashes)) {
    MyTimer timer=new MyTimer("update branch shows");
    prevSelectionBranches=new HashSet<Hash>(checkedCommitHashes);
    dataPack.getGraphModel().setVisibleBranchesNodes(new Function<Node,Boolean>(){
      @NotNull @Override public Boolean get(      @NotNull Node key){
        return key.getType() == Node.NodeType.COMMIT_NODE && checkedCommitHashes.contains(key.getCommitHash());
      }
    }
);
    mySwingUi.updateUI();
    mySwingUi.jumpToRow(0);
    timer.print();
  }
}
