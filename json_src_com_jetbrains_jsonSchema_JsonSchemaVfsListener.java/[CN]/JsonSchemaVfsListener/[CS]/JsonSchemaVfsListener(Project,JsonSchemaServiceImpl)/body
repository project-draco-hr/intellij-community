{
  super(new VirtualFileAdapter(){
    @NotNull private final JsonSchemaServiceImpl myService=service;
    private JsonSchemaMappingsProjectConfiguration myMappingsProjectConfiguration=JsonSchemaMappingsProjectConfiguration.getInstance(project);
    @Override public void contentsChanged(    @NotNull VirtualFileEvent event){
      onFileChange(event.getFile());
    }
    @Override public void fileCreated(    @NotNull VirtualFileEvent event){
      onFileChange(event.getFile());
    }
    @Override public void beforeFileDeletion(    @NotNull VirtualFileEvent event){
      onFileChange(event.getFile());
    }
    @Override public void beforeFileMovement(    @NotNull VirtualFileMoveEvent event){
      onFileChange(event.getFile());
    }
    @Override public void fileMoved(    @NotNull VirtualFileMoveEvent event){
      onFileChange(event.getFile());
    }
    @Override public void fileCopied(    @NotNull VirtualFileCopyEvent event){
      onFileChange(event.getFile());
    }
    private void onFileChange(    @NotNull final VirtualFile file){
      if (myMappingsProjectConfiguration.isRegisteredSchemaFile(file)) {
        myService.dropProviderFromCache(file);
      }
    }
  }
);
}
