{
  super.setupRootModel(testDir,sourceDir,sdkName);
  VirtualFile projectDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(new File(testDir));
  VfsUtilCore.visitChildrenRecursively(projectDir,new VirtualFileVisitor(){
    @Override public boolean visitFile(    @NotNull VirtualFile v){
      myFilter.allowTreeAccessForFile(v);
      return super.visitFile(v);
    }
  }
);
  PsiClass cls=JavaPsiFacade.getInstance(getProject()).findClass("javax.swing.JFrame",GlobalSearchScope.allScope(getProject()));
  PsiClass aClass=(PsiClass)cls.getNavigationElement();
  assertTrue(aClass instanceof PsiClassImpl);
  myFilter.allowTreeAccessForFile(aClass.getContainingFile().getVirtualFile());
}
