{
  start();
  boolean finished;
  do {
    finished=waitFor(500);
    if (!finished && (wasError() || needsDestroy() || wasCancelled())) {
      waitFor(1000);
      doDestroyProcess();
      break;
    }
  }
 while (!finished);
  throwIfError();
}
