{
  final TemporaryPlacesRegistry registry=TemporaryPlacesRegistry.getInstance(context.getProject());
  if (context instanceof PsiLanguageInjectionHost) {
    final PsiFile file=context.getContainingFile();
    final InjectedLanguage injectedLanguage=registry.getLanguageFor((PsiLanguageInjectionHost)context,file);
    if (injectedLanguage != null) {
      return injectedLanguage.getLanguage();
    }
  }
  return null;
}
