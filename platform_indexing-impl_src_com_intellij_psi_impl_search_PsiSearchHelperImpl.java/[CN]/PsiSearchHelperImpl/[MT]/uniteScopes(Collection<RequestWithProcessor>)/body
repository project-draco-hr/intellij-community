{
  Set<GlobalSearchScope> scopes=ContainerUtil.map2Set(requests,new Function<RequestWithProcessor,GlobalSearchScope>(){
    @Override public GlobalSearchScope fun(    RequestWithProcessor request){
      return (GlobalSearchScope)request.request.searchScope;
    }
  }
);
  return GlobalSearchScope.union(scopes.toArray(new GlobalSearchScope[scopes.size()]));
}
