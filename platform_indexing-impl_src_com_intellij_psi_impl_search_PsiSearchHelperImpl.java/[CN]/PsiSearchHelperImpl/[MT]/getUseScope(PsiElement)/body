{
  SearchScope scope=element.getUseScope();
  for (  UseScopeEnlarger enlarger : UseScopeEnlarger.EP_NAME.getExtensions()) {
    final SearchScope additionalScope=enlarger.getAdditionalUseScope(element);
    if (additionalScope != null) {
      scope=scope.union(additionalScope);
    }
  }
  for (  UseScopeOptimizer optimizer : UseScopeOptimizer.EP_NAME.getExtensions()) {
    final GlobalSearchScope scopeToExclude=optimizer.getScopeToExclude(element);
    if (scopeToExclude != null) {
      scope=scope.intersectWith(GlobalSearchScope.notScope(scopeToExclude));
    }
  }
  return scope;
}
