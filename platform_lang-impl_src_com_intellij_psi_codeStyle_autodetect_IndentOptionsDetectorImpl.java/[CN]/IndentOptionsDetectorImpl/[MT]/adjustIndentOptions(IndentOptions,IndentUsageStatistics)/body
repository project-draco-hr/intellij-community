{
  if (isTabsUsed(stats)) {
    setUseTabs(indentOptions,true);
    int continuationRatio=indentOptions.INDENT_SIZE == 0 ? 1 : indentOptions.CONTINUATION_INDENT_SIZE / indentOptions.INDENT_SIZE;
    indentOptions.INDENT_SIZE=indentOptions.TAB_SIZE;
    indentOptions.CONTINUATION_INDENT_SIZE=indentOptions.TAB_SIZE * continuationRatio;
  }
 else   if (isSpacesUsed(stats)) {
    setUseTabs(indentOptions,false);
    int newIndentSize=getPositiveIndentSize(stats);
    if (newIndentSize > 0) {
      if (indentOptions.INDENT_SIZE != newIndentSize) {
        indentOptions.INDENT_SIZE=newIndentSize;
        LOG.debug("Detected indent size: " + newIndentSize + " for file "+ myFile);
      }
    }
  }
}
