{
  IndentOptions indentOptions=(IndentOptions)CodeStyleSettingsManager.getSettings(myProject).getIndentOptions(myFile.getFileType()).clone();
  if (myDocument != null) {
    List<LineIndentInfo> linesInfo=new FormatterBasedLineIndentInfoBuilder(myFile).build();
    if (linesInfo != null) {
      IndentUsageStatistics stats=new IndentUsageStatisticsImpl(linesInfo);
      adjustIndentOptions(indentOptions,stats);
    }
  }
  return indentOptions;
}
