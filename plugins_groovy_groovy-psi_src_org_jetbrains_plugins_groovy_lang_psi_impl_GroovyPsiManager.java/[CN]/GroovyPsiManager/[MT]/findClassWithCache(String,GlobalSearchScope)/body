{
  Map<GlobalSearchScope,Ref<PsiClass>> map=myClassCache.get(fqName);
  if (map == null) {
    map=ContainerUtil.newConcurrentMap();
    myClassCache.put(fqName,map);
  }
  Ref<PsiClass> cached=map.get(resolveScope);
  if (cached != null) {
    return cached.get();
  }
  PsiClass result=JavaPsiFacade.getInstance(myProject).findClass(fqName,resolveScope);
  map.put(resolveScope,result != null ? Ref.create(result) : EMPTY_REF);
  return result;
}
