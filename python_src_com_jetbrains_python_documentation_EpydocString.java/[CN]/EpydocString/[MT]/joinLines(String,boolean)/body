{
  while (true) {
    int lineBreakStart=s.indexOf('\n');
    if (lineBreakStart < 0)     break;
    int lineBreakEnd=lineBreakStart + 1;
    while (lineBreakEnd < s.length() && s.charAt(lineBreakEnd) == ' ') {
      lineBreakEnd++;
    }
    s=s.substring(0,lineBreakStart) + (addSpace ? " " : "") + s.substring(lineBreakEnd);
  }
  return s;
}
