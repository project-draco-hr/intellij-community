{
  if (s == null)   return null;
  StringBuilder resultBuilder=new StringBuilder();
  int pos=0;
  while (true) {
    int bracePos=s.indexOf('{',pos);
    if (bracePos < 1)     break;
    char prevChar=s.charAt(bracePos - 1);
    if (prevChar >= 'A' && prevChar <= 'Z') {
      resultBuilder.append(s.substring(pos,bracePos - 1));
      int rbracePos=s.indexOf('}',bracePos);
      if (rbracePos < 0) {
        pos=bracePos + 1;
        break;
      }
      resultBuilder.append(s.substring(bracePos + 1,rbracePos));
      pos=rbracePos + 1;
    }
 else {
      resultBuilder.append(s.substring(pos,bracePos + 1));
      pos=bracePos + 1;
    }
  }
  resultBuilder.append(s.substring(pos));
  return resultBuilder.toString();
}
