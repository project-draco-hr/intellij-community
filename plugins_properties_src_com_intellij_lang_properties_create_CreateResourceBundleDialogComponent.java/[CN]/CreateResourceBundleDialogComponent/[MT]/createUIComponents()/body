{
  final JBList projectExistLocalesList=new JBList();
  final MyExistLocalesListModel existLocalesListModel=new MyExistLocalesListModel();
  projectExistLocalesList.setModel(existLocalesListModel);
  projectExistLocalesList.setCellRenderer(getLocaleRenderer());
  myProjectExistLocalesPanel=ToolbarDecorator.createDecorator(projectExistLocalesList).disableRemoveAction().disableUpDownActions().createPanel();
  myProjectExistLocalesPanel.setBorder(IdeBorderFactory.createTitledBorder("Project locales",false));
  final JBList localesToAddList=new JBList();
  myLocalesModel=new MyLocalesToAddModel();
  localesToAddList.setModel(myLocalesModel);
  localesToAddList.setCellRenderer(getLocaleRenderer());
  myNewBundleLocalesPanel=ToolbarDecorator.createDecorator(localesToAddList).setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      final String rawAddedLocales=Messages.showInputDialog(myProject,PropertiesBundle.message("create.resource.bundle.dialog.add.locales.validator.message"),PropertiesBundle.message("create.resource.bundle.dialog.add.locales.validator.title"),null,null,new InputValidatorEx(){
        @Nullable @Override public String getErrorText(        String inputString){
          return checkInput(inputString) ? null : "Invalid locales";
        }
        @Override public boolean checkInput(        String inputString){
          return extractLocalesFromString(inputString) != null;
        }
        @Override public boolean canClose(        String inputString){
          return checkInput(inputString);
        }
      }
);
      if (rawAddedLocales != null) {
        final List<Locale> locales=extractLocalesFromString(rawAddedLocales);
        LOG.assertTrue(locales != null);
        myLocalesModel.addRows(locales);
      }
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      myLocalesModel.removeRow(localesToAddList.getSelectedIndices());
    }
  }
).disableUpDownActions().createPanel();
  myNewBundleLocalesPanel.setBorder(IdeBorderFactory.createTitledBorder("Locales to add",false));
  myAddLocaleFromExistButton=new JButton(AllIcons.Actions.Forward);
  new ClickListener(){
    @Override public boolean onClick(    @NotNull MouseEvent event,    int clickCount){
      if (clickCount == 1) {
        myLocalesModel.addRows(ContainerUtil.map(projectExistLocalesList.getSelectedValues(),new Function<Object,Locale>(){
          @Override public Locale fun(          Object o){
            return (Locale)o;
          }
        }
));
        return true;
      }
      return false;
    }
  }
.installOn(myAddLocaleFromExistButton);
  myAddAllButton=new JButton("Add All");
  new ClickListener(){
    @Override public boolean onClick(    @NotNull MouseEvent event,    int clickCount){
      if (clickCount == 1) {
        myLocalesModel.addRows(existLocalesListModel.getLocales());
      }
      return false;
    }
  }
.installOn(myAddAllButton);
}
