{
  final Set<String> fileNames=getFileNamesToCreate();
  final List<PsiFile> createdFiles=WriteCommandAction.runWriteCommandAction(myProject,new Computable<List<PsiFile>>(){
    @Override public List<PsiFile> compute(){
      return ApplicationManager.getApplication().runWriteAction(new Computable<List<PsiFile>>(){
        @Override public List<PsiFile> compute(){
          return ContainerUtil.map(fileNames,new Function<String,PsiFile>(){
            @Override public PsiFile fun(            String n){
              return myDirectory.createFile(n);
            }
          }
);
        }
      }
);
    }
  }
);
  combineToResourceBundleIfNeed(createdFiles);
  return createdFiles;
}
