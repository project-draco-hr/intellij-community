{
  String langId=wrapper.getLanguage();
  if (langId == null) {
    return null;
  }
  Language language=Language.findLanguageByID(langId);
  Set<String> result;
  if (language != null) {
    List<Language> dialects=language.getDialects();
    boolean applyToDialects=wrapper.applyToDialects();
    result=applyToDialects && !dialects.isEmpty() ? new THashSet<String>(1 + dialects.size()) : new SmartHashSet<String>();
    result.add(langId);
    if (applyToDialects) {
      for (      Language dialect : dialects) {
        result.add(dialect.getID());
      }
    }
  }
 else {
    result=Collections.singleton(langId);
  }
  return result;
}
