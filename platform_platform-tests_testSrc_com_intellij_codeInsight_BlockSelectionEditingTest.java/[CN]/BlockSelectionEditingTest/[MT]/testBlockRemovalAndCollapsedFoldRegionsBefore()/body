{
  String initialText="fold line #1\n" + "fold line #2\n" + "initialText    line 1\n"+ "initialText    line 2\n"+ "initialText    line 3";
  init(initialText,TestFileType.TEXT);
  final int foldEndOffset=initialText.indexOf("initialText");
  addCollapsedFoldRegion(0,foldEndOffset,"...");
  int column="initialText".length();
  final LogicalPosition blockStart=new LogicalPosition(3,column);
  final LogicalPosition blockEnd=new LogicalPosition(4,column);
  final SelectionModel selectionModel=myEditor.getSelectionModel();
  selectionModel.setBlockSelection(blockStart,blockEnd);
  delete();
  delete();
  String expectedText="fold line #1\n" + "fold line #2\n" + "initialText    line 1\n"+ "initialText  line 2\n"+ "initialText  line 3";
  assertEquals(expectedText,myEditor.getDocument().getText());
  assertSelectionRanges(new int[][]{{59,59},{79,79}});
  final FoldRegion foldRegion=getFoldRegion(0);
  assertNotNull(foldRegion);
  assertEquals(0,foldRegion.getStartOffset());
  assertEquals(foldEndOffset,foldRegion.getEndOffset());
}
