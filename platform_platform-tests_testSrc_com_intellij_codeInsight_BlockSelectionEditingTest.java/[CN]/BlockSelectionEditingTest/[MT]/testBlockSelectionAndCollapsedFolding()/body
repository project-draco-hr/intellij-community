{
  String text="class Test {\n" + "    private class Inner1 {\n" + "        int i;\n"+ "    }\n"+ "\n"+ "    private class Inner2 {\n"+ "        int i;\n"+ "    }\n"+ "}";
  init(text,TestFileType.JAVA);
  int foldStart1=text.indexOf("Inner1");
  foldStart1=text.indexOf('{',foldStart1);
  int foldEnd1=text.indexOf('}',foldStart1) + 1;
  addCollapsedFoldRegion(foldStart1,foldEnd1,"...");
  int foldStart2=text.indexOf('{',foldEnd1);
  int foldEnd2=text.indexOf('}',foldStart2) + 1;
  addCollapsedFoldRegion(foldStart2,foldEnd2,"...");
  LogicalPosition blockStart=new LogicalPosition(1,4);
  LogicalPosition blockEnd=new LogicalPosition(5,5 + "private".length());
  getEditor().getSelectionModel().setBlockSelection(blockStart,blockEnd);
  assertTrue(getFoldRegion(foldStart1).isExpanded());
  assertFalse(getFoldRegion(foldStart2).isExpanded());
}
