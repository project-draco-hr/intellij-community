{
  myFacetListener=new MyFacetManagerAdapter();
  messageBus.connect().subscribe(ProjectTopics.MODULES,new ModuleAdapter(){
    @Override public void moduleAdded(    @NotNull Project project,    @NotNull Module module){
      onModuleAdded(module);
    }
    @Override public void beforeModuleRemoved(    @NotNull final Project project,    @NotNull final Module module){
      Facet[] allFacets=FacetManager.getInstance(module).getAllFacets();
      for (      Facet facet : allFacets) {
        onFacetRemoved(facet,true);
      }
    }
    @Override public void moduleRemoved(    @NotNull Project project,    @NotNull Module module){
      onModuleRemoved(module);
    }
  }
);
}
