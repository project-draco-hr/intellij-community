{
  try {
    final HashMap<String,Object> variableMap=new HashMap<>();
    variableMap.put(ScriptLog.SCRIPT_LOG_VAR_NAME,myScriptLog);
    if (result != null) {
      buildVariableMap(result,variableMap);
      if (context == null) {
        context=result.getMatch();
      }
    }
    context=StructuralSearchUtil.getPresentableElement(context);
    variableMap.put(myName,context);
    variableMap.put(Configuration.CONTEXT_VAR_NAME,context);
    script.setBinding(new Binding(variableMap));
    final Object o=script.run();
    return String.valueOf(o);
  }
 catch (  GroovyRuntimeException ex) {
    throw new StructuralSearchException(SSRBundle.message("groovy.script.error",ex.getMessage()));
  }
 finally {
    script.setBinding(null);
  }
}
