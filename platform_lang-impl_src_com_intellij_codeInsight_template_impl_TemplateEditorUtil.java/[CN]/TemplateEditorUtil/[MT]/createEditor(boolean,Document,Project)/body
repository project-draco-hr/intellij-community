{
  EditorFactory editorFactory=EditorFactory.getInstance();
  Editor editor=(isReadOnly ? editorFactory.createViewer(document,project) : editorFactory.createEditor(document,project));
  editor.getContentComponent().setFocusable(!isReadOnly);
  EditorSettings editorSettings=editor.getSettings();
  editorSettings.setVirtualSpace(false);
  editorSettings.setLineMarkerAreaShown(false);
  editorSettings.setIndentGuidesShown(false);
  editorSettings.setLineNumbersShown(false);
  editorSettings.setFoldingOutlineShown(false);
  editorSettings.setCaretRowShown(false);
  EditorColorsScheme scheme=editor.getColorsScheme();
  VirtualFile file=FileDocumentManager.getInstance().getFile(document);
  if (file != null) {
    EditorHighlighter highlighter=EditorHighlighterFactory.getInstance().createEditorHighlighter(file,scheme,project);
    ((EditorEx)editor).setHighlighter(highlighter);
  }
  return editor;
}
