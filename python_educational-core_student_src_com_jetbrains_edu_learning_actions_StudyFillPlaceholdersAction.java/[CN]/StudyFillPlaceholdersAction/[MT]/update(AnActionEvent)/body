{
  StudyUtils.updateAction(e);
  final Project project=e.getProject();
  if (project != null) {
    Course course=StudyTaskManager.getInstance(project).getCourse();
    Presentation presentation=e.getPresentation();
    if (course != null && !EduNames.STUDY.equals(course.getCourseMode())) {
      presentation.setEnabled(false);
      presentation.setVisible(true);
      return;
    }
    StudyEditor studyEditor=StudyUtils.getSelectedStudyEditor(project);
    StudyState studyState=new StudyState(studyEditor);
    if (!studyState.isValid()) {
      presentation.setEnabledAndVisible(false);
      return;
    }
    TaskFile taskFile=studyState.getTaskFile();
    if (taskFile.getAnswerPlaceholders().isEmpty()) {
      presentation.setEnabledAndVisible(false);
    }
  }
}
