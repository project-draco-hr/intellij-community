{
  if (file instanceof VirtualFilePathWrapper) {
    return includeFilePath ? ((VirtualFilePathWrapper)file).getPresentablePath() : file.getName();
  }
  String url;
  if (includeFilePath) {
    url=file.getPresentableUrl();
  }
 else   if (includeUniqueFilePath) {
    url=UniqueVFilePathBuilder.getInstance().getUniqueVirtualFilePath(project,file);
  }
 else {
    url=file.getName();
  }
  if (project == null) {
    return url;
  }
 else {
    return ProjectUtilCore.displayUrlRelativeToProject(file,url,project,includeFilePath,keepModuleAlwaysOnTheLeft);
  }
}
