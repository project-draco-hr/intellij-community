{
  final String path=file.getPath();
  final long stamp=file.getModificationStamp();
  Pair<Long,Icon> iconInfo;
synchronized (iconsCache) {
    iconInfo=iconsCache.get(path);
    if (iconInfo == null || iconInfo.getFirst() < stamp) {
      try {
        final Icon icon=createOrFindBetterIcon(file,isIdeaProject(myProject));
        iconInfo=new Pair<>(stamp,hasProperSize(icon) ? icon : null);
        iconsCache.put(file.getPath(),iconInfo);
      }
 catch (      Exception e) {
        iconInfo=null;
        iconsCache.remove(path);
      }
    }
  }
  return iconInfo == null ? null : iconInfo.getSecond();
}
