{
  super.initAndRun();
  ((PydevLanguageConsoleView)getConsoleView()).setConsoleCommunication(myPydevConsoleCommunication);
  final LanguageConsoleImpl console=getConsoleView().getConsole();
  if (handshake()) {
    PyConsoleHighlightingUtil.processOutput(console,PYTHON_ENV_COMMAND,ProcessOutputTypes.SYSTEM);
    getConsoleExecuteActionHandler().processLine(PYTHON_ENV_COMMAND);
    for (    String statement : statements2execute) {
      PyConsoleHighlightingUtil.processOutput(console,statement + "\n",ProcessOutputTypes.SYSTEM);
      getConsoleExecuteActionHandler().processLine(statement + "\n");
    }
  }
 else {
    PyConsoleHighlightingUtil.processOutput(console,"Couldn't connect to console process.",ProcessOutputTypes.STDERR);
    myProcessHandler.destroyProcess();
    finishConsole();
  }
}
