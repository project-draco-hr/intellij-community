{
  if (myPydevConsoleCommunication != null) {
    myPydevConsoleCommunication.execInterpreter(input,new ICallback<Object,InterpreterResponse>(){
      public Object call(      final InterpreterResponse interpreterResponse){
        final LanguageConsoleImpl console=myConsoleView.getConsole();
        if (interpreterResponse.more) {
          if (!PyConsoleHighlightingUtil.INDENT_PROMPT.equals(console.getPrompt())) {
            console.setPrompt(PyConsoleHighlightingUtil.INDENT_PROMPT);
            final int indent=myHelper.getIndent(input,false);
            new WriteCommandAction(myProject){
              @Override protected void run(              Result result) throws Throwable {
                EditorModificationUtil.insertStringAtCaret(console.getConsoleEditor(),myHelper.fillIndent(indent + currentPythonIndentSize));
              }
            }
.execute();
          }
        }
 else {
          if (!PyConsoleHighlightingUtil.ORDINARY_PROMPT.equals(console.getPrompt())) {
            console.setPrompt(PyConsoleHighlightingUtil.ORDINARY_PROMPT);
          }
        }
        if (interpreterResponse.need_input) {
          if (!PyConsoleHighlightingUtil.INPUT_PROMPT.equals(console.getPrompt())) {
            console.setPrompt(PyConsoleHighlightingUtil.INPUT_PROMPT);
          }
        }
        if (!StringUtil.isEmpty(interpreterResponse.err)) {
          PyConsoleHighlightingUtil.processOutput(console,interpreterResponse.err,ProcessOutputTypes.STDERR);
        }
 else {
          PyConsoleHighlightingUtil.processOutput(console,interpreterResponse.out,ProcessOutputTypes.STDOUT);
        }
        return null;
      }
    }
);
  }
}
