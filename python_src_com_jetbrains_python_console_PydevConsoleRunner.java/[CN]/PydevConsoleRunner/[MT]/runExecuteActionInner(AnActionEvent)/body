{
  final Editor editor=getLanguageConsole().getCurrentEditor();
  final Document document=editor.getDocument();
  int lineCount=document.getLineCount();
  final String text=document.getText();
  final String lastLine=StringUtil.isEmpty(text) ? "" : text.substring(document.getLineStartOffset(lineCount - 1));
  if (myInMultilineStringState != null) {
    if (lastLine.contains(myInMultilineStringState)) {
      myInMultilineStringState=null;
      super.runExecuteActionInner(actionEvent);
      myConsoleView.getConsole().setLanguage(PythonLanguage.getInstance());
      return;
    }
    typeInEditor(actionEvent,editor);
    return;
  }
 else {
    if (lastLine.contains(DOUBLE_QUOTE_MULTILINE)) {
      myInMultilineStringState=DOUBLE_QUOTE_MULTILINE;
    }
 else     if (lastLine.contains(SINGLE_QUOTE_MULTILINE)) {
      myInMultilineStringState=SINGLE_QUOTE_MULTILINE;
    }
    if (myInMultilineStringState != null) {
      myConsoleView.getConsole().setLanguage(PlainTextLanguage.INSTANCE);
      typeInEditor(actionEvent,editor);
      return;
    }
  }
  if (lastLine.endsWith("\\")) {
    typeInEditor(actionEvent,editor);
    return;
  }
  super.runExecuteActionInner(actionEvent);
}
