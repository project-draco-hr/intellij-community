{
  final Listener listener=addPomListener();
  final XmlTag tagFromText=XmlElementFactory.getInstance(getProject()).createTagFromText("<a>aaa</a>");
  final XmlTag otherTag=XmlElementFactory.getInstance(getProject()).createTagFromText("<a/>");
  final XmlText xmlText=tagFromText.getValue().getTextElements()[0];
  WriteCommandAction.runWriteCommandAction(null,new Runnable(){
    @Override public void run(){
      xmlText.insertAtOffset(otherTag,2);
    }
  }
);
  assertEquals("(text changed to 'aa' was: 'aaa'), (child added to a child: XmlText), (child added to a child: XmlTag:a)\n",listener.getEventString());
}
