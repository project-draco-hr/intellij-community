{
  final Listener listener=addPomListener();
  configureFromFileText("x.xml","<a>aaa\n<x>xxx</x>\n<y>yyy</y></a>");
  final XmlTag x=((XmlFile)getFile()).getRootTag().findSubTags("x")[0];
  WriteCommandAction.runWriteCommandAction(null,new Runnable(){
    @Override public void run(){
      TextRange range=x.getTextRange();
      getEditor().getDocument().deleteString(range.getStartOffset(),range.getEndOffset() + 1);
      PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
    }
  }
);
  assertEquals("(child removed from a child: XmlTag:x), (child removed from a child: XmlText)\n",listener.getEventString());
}
