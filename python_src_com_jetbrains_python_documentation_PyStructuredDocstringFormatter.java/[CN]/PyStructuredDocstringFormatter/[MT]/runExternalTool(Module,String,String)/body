{
  final Sdk sdk=PythonSdkType.findPython2Sdk(module);
  if (sdk == null)   return null;
  final String sdkHome=sdk.getHomePath();
  if (sdkHome == null)   return null;
  final Charset charset=EncodingProjectManager.getInstance(module.getProject()).getDefaultCharset();
  final ByteBuffer encoded=charset.encode(docstring);
  final byte[] data=new byte[encoded.limit()];
  encoded.get(data);
  final ProcessOutput output=PySdkUtil.getProcessOutput(new File(sdkHome).getParent(),new String[]{sdkHome,formatter},null,5000,data,true);
  if (output.isTimeout()) {
    LOG.info("timeout when calculating docstring");
    return null;
  }
 else   if (output.getExitCode() != 0) {
    final String error="error when calculating docstring: " + output.getStderr();
    LOG.info(error);
    return null;
  }
  return output.getStdout();
}
