{
  Module module=ModuleUtilCore.findModuleForPsiElement(element);
  if (module == null)   module=ModuleManager.getInstance(element.getProject()).getModules()[0];
  final PyDocumentationSettings documentationSettings=PyDocumentationSettings.getInstance(module);
  final List<String> result=new ArrayList<String>();
  final String[] lines=PyDocumentationBuilder.removeCommonIndentation(docstring);
  final String preparedDocstring=StringUtil.join(lines,"\n");
  final String formatter;
  final StructuredDocStringBase structuredDocString;
  if (documentationSettings.isEpydocFormat(element.getContainingFile()) || DocStringUtil.isEpydocDocString(preparedDocstring)) {
    formatter=PythonHelpersLocator.getHelperPath("epydoc_formatter.py");
    structuredDocString=new EpydocString(preparedDocstring);
    result.add(formatStructuredDocString(structuredDocString));
  }
 else   if (documentationSettings.isReSTFormat(element.getContainingFile()) || DocStringUtil.isSphinxDocString(preparedDocstring)) {
    formatter=PythonHelpersLocator.getHelperPath("rest_formatter.py");
    structuredDocString=new SphinxDocString(preparedDocstring);
  }
 else {
    return null;
  }
  final String output=runExternalTool(module,formatter,docstring);
  if (output != null)   result.add(0,output);
 else   result.add(0,structuredDocString.getDescription());
  return result;
}
