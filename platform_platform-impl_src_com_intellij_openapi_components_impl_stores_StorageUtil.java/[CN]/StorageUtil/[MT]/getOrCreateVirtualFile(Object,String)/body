{
  VirtualFile virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByPath(path);
  if (virtualFile != null) {
    return virtualFile;
  }
  String parentFile=PathUtilRt.getParentPath(path);
  VirtualFile parentVirtualFile=StringUtil.isEmpty(parentFile) ? null : LocalFileSystem.getInstance().refreshAndFindFileByPath(parentFile);
  if (parentVirtualFile == null) {
    throw new IOException(ProjectBundle.message("project.configuration.save.file.not.found",parentFile));
  }
  if (ApplicationManager.getApplication().isWriteAccessAllowed()) {
    return parentVirtualFile.createChildData(requestor,PathUtilRt.getFileName(path));
  }
 else {
    AccessToken token=WriteAction.start();
    try {
      return parentVirtualFile.createChildData(requestor,PathUtilRt.getFileName(path));
    }
  finally {
      token.finish();
    }
  }
}
