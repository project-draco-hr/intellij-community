{
  boolean equals=true;
  int headerLength=lineSeparatorIfPrependXmlProlog == null ? 0 : XML_PROLOG.length + lineSeparatorIfPrependXmlProlog.getSeparatorBytes().length;
  int toWriteLength=headerLength + content.size();
  if (result.getLength() != toWriteLength) {
    equals=false;
  }
 else {
    byte[] bytes=result.contentsToByteArray();
    if (lineSeparatorIfPrependXmlProlog != null) {
      if (!ArrayUtil.startsWith(bytes,XML_PROLOG) || !ArrayUtil.startsWith(bytes,XML_PROLOG.length,lineSeparatorIfPrependXmlProlog.getSeparatorBytes())) {
        equals=false;
      }
    }
    if (!ArrayUtil.startsWith(bytes,headerLength,content.toByteArray())) {
      equals=false;
    }
  }
  return equals;
}
