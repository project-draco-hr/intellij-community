{
  VersionedMap<KeyT,T> map=CACHE.get();
  if (version != map.version) {
    CACHE.remove();
    map=CACHE.get();
  }
  List<T> cached=map.get(key);
  if (cached == null) {
    Collection<T> templates=initialValue(key);
    cached=cloneTemplates(templates);
    map.put(key,cached);
  }
  return cached;
}
