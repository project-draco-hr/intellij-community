{
  final ArrayList<Block> localResult=new ArrayList<Block>();
  processChild(localResult,child,AlignmentStrategy.getNullStrategy(),null,Indent.getNoneIndent());
  child=child.getTreeNext();
  ChildAlignmentStrategyProvider alignmentStrategyProvider=ChildAlignmentStrategyProvider.NULL_STRATEGY_PROVIDER;
  if (mySettings.ALIGN_GROUP_FIELD_DECLARATIONS) {
    alignmentStrategyProvider=new SubsequentFieldAligner(mySettings);
  }
  while (child != null) {
    if (FormatterUtil.containsWhiteSpacesOnly(child)) {
      child=child.getTreeNext();
      continue;
    }
    Indent childIndent=getIndentForCodeBlock(child,childrenIndent);
    AlignmentStrategy alignmentStrategyToUse=alignmentStrategyProvider.getNextChildStrategy(child);
    final boolean isRBrace=isRBrace(child);
    child=processChild(localResult,child,alignmentStrategyToUse,childWrap,childIndent);
    if (isRBrace) {
      result.add(createCodeBlockBlock(localResult,indent,childrenIndent));
      return child;
    }
    if (child != null) {
      child=child.getTreeNext();
    }
  }
  result.add(createCodeBlockBlock(localResult,indent,childrenIndent));
  return null;
}
