{
  List<ChainedCallChunk> methodCall=splitMethodCallOnChunksByDots(nodes);
  Wrap wrapToUse=null;
  Alignment alignmentToUse=null;
  List<Block> blocks=new ArrayList<Block>();
  for (  ChainedCallChunk currentCallChunk : methodCall) {
    if (isMethodCall(currentCallChunk)) {
      wrapToUse=myWrap;
      alignmentToUse=shouldAlignMethod(currentCallChunk,methodCall) ? myChainedCallsAlignment : null;
    }
 else     if (wrapToUse != null) {
      wrapToUse=null;
      alignmentToUse=null;
      myChainedCallsAlignment=getNewAlignment();
      myWrap=getNewWrap();
    }
    blocks.add(createSyntheticBlock(currentCallChunk.nodes,wrapToUse,alignmentToUse));
  }
  return blocks;
}
