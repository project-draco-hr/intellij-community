{
  Project project=getProject();
  if ((project == null) || project.isDisposed()) {
    emptyTextAndTooltip();
    return;
  }
  final HgRepository repo=HgUtil.getCurrentRepository(project);
  if (repo == null) {
    emptyTextAndTooltip();
    return;
  }
  myTooltip=HgUtil.getDisplayableBranchOrBookmarkText(repo);
  myText=StringUtil.shortenTextWithEllipsis(myTooltip,MAX_STRING.length(),5);
  if (!isDisposed() && myStatusBar != null) {
    myStatusBar.updateWidget(ID());
  }
}
