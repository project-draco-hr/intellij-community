{
  super(facetType,module,name,configuration,underlyingFacet);
  final MessageBusConnection connection=module.getMessageBus().connect();
  connection.subscribe(FacetManager.FACETS_TOPIC,new FacetManagerAdapter(){
    @Override public void beforeFacetRemoved(    @NotNull Facet facet){
      if (facet == LibraryContributingFacet.this) {
        ((LibraryContributingFacet)facet).removeLibrary();
      }
    }
    @Override public void facetConfigurationChanged(    @NotNull Facet facet){
      if (facet == LibraryContributingFacet.this) {
        ((LibraryContributingFacet)facet).updateLibrary();
      }
    }
  }
);
  Disposer.register(this,connection);
}
