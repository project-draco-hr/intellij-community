{
  try {
    for (    DockContainer container : DockManager.getInstance(getProject()).getContainers()) {
      if (!myOldDockContainers.contains(container)) {
        Disposer.dispose(container);
      }
    }
    myOldDockContainers=null;
    ((ComponentManagerImpl)getProject()).registerComponentInstance(FileEditorManager.class,myOldManager);
    myManager.closeAllFiles();
    ((FileEditorProviderManagerImpl)FileEditorProviderManager.getInstance()).clearSelectedProviders();
  }
  finally {
    super.tearDown();
  }
}
