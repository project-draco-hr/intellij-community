{
  Document document=JDOMUtil.loadDocument(s);
  Element rootElement=document.getRootElement();
  ExpandMacroToPathMap map=new ExpandMacroToPathMap();
  map.addMacroExpand(PathMacroUtil.PROJECT_DIR_MACRO_NAME,getTestDataPath());
  map.substitute(rootElement,true,true);
  myManager.readExternal(rootElement);
  Future<?> future=ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      myManager.getMainSplitters().openFiles();
    }
  }
);
  while (true) {
    try {
      future.get(100,TimeUnit.MILLISECONDS);
      return;
    }
 catch (    TimeoutException e) {
      UIUtil.dispatchAllInvocationEvents();
    }
  }
}
