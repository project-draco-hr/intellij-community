{
  if (t instanceof PsiClassType && !((PsiClassType)t).isRaw() && s instanceof PsiClassType) {
    final PsiClassType.ClassResolveResult tResult=((PsiClassType)t).resolveGenerics();
    final PsiClassType.ClassResolveResult sResult=((PsiClassType)s).resolveGenerics();
    final PsiClass tClass=tResult.getElement();
    final PsiClass sClass=sResult.getElement();
    if (tClass != null && sClass != null && !(sClass instanceof InferenceVariable)) {
      final PsiSubstitutor sSubstitutor=TypeConversionUtil.getClassSubstitutor(tClass,sClass,sResult.getSubstitutor());
      if (sSubstitutor != null) {
        if (PsiUtil.isRawSubstitutor(tClass,sSubstitutor)) {
          return true;
        }
      }
 else       if (tClass instanceof InferenceVariable && ((PsiClassType)s).isRaw() && tClass.isInheritor(sClass,true)) {
        return true;
      }
    }
  }
 else   if (t instanceof PsiArrayType && t.getArrayDimensions() == s.getArrayDimensions()) {
    return isUncheckedConversion(t.getDeepComponentType(),s.getDeepComponentType());
  }
  return false;
}
