{
  final TextAttributes forcedAttributes=annotation.getEnforcedTextAttributes();
  TextAttributesKey key=annotation.getTextAttributes();
  final TextAttributesKey forcedAttributesKey=forcedAttributes == null ? (key == HighlighterColors.NO_HIGHLIGHTING ? null : key) : null;
  HighlightInfo info=new HighlightInfo(forcedAttributes,forcedAttributesKey,convertType(annotation),fixedRange != null ? fixedRange.getStartOffset() : annotation.getStartOffset(),fixedRange != null ? fixedRange.getEndOffset() : annotation.getEndOffset(),annotation.getMessage(),annotation.getTooltip(),annotation.getSeverity(),annotation.isAfterEndOfLine(),annotation.needsUpdateOnTyping(),annotation.isFileLevelAnnotation(),0,annotation.getProblemGroup(),annotation.getGutterIconRenderer());
  appendFixes(fixedRange,info,batchMode ? annotation.getBatchFixes() : annotation.getQuickFixes());
  return info;
}
