{
  if (channel.isOpen()) {
    return channel.writeAndFlush(new TextWebSocketFrame(message));
  }
 else {
    return channel.newFailedFuture(new ClosedChannelException());
  }
}
