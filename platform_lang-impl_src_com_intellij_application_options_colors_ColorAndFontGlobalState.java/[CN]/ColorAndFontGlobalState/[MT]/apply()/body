{
  for (  Map.Entry<Language,Boolean> entry : myLanguage2RainbowEnabled.entrySet()) {
    RainbowHighlighter.setRainbowEnabled(entry.getKey(),entry.getValue());
  }
  Editor[] allEditors=EditorFactory.getInstance().getAllEditors();
  for (  Editor editor : allEditors) {
    final Project project=editor.getProject();
    if (project != null) {
      PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
      if (file != null) {
        DaemonCodeAnalyzer.getInstance(project).restart(file);
      }
    }
  }
  myReferenceState.copyFrom(this);
}
