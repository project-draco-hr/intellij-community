{
  if (!(thenExpression instanceof PsiCallExpression))   return false;
  final PsiMethod thenMethod=((PsiCallExpression)thenExpression).resolveMethod();
  final PsiExpressionList thenArgsList=((PsiCallExpression)thenExpression).getArgumentList();
  if (thenArgsList == null)   return false;
  final PsiExpression[] thenExpressions=thenArgsList.getExpressions();
  if (!(elseExpression instanceof PsiCallExpression))   return false;
  final PsiMethod elseMethod=((PsiCallExpression)elseExpression).resolveMethod();
  final PsiExpressionList elseArgsList=((PsiCallExpression)elseExpression).getArgumentList();
  if (elseArgsList == null)   return false;
  final PsiExpression[] elseExpressions=elseArgsList.getExpressions();
  if (thenMethod != elseMethod || thenMethod == null)   return false;
  if (thenExpressions.length != elseExpressions.length)   return false;
  final Pair<PsiExpression,PsiExpression> qualifiers=getQualifiers(thenExpression,elseExpression);
  if (qualifiers != null) {
    if (!isSameCall(thenExpressions,elseExpressions) && level == 0) {
      return false;
    }
    if (level > 0) {
      setText("Push condition '" + conditionText + "' inside "+ (thenMethod.isConstructor() ? "constructor" : "method")+ " call");
      return true;
    }
    return level > 0 || isAvailable(conditionText,qualifiers.first,qualifiers.second,level + 1);
  }
  PsiExpression tExpr=null;
  for (int i=0; i < thenExpressions.length; i++) {
    PsiExpression lExpr=thenExpressions[i];
    PsiExpression rExpr=elseExpressions[i];
    if (!PsiEquivalenceUtil.areElementsEquivalent(lExpr,rExpr)) {
      if (tExpr == null) {
        tExpr=lExpr;
      }
 else {
        return false;
      }
    }
  }
  setText("Push condition '" + conditionText + "' inside "+ (thenMethod.isConstructor() ? "constructor" : "method")+ " call");
  return true;
}
