{
  return new FutureTask<Boolean>(new Callable<Boolean>(){
    @Override public Boolean call() throws Exception {
      try {
        Collection<TextRange> ranges=getRangesToFormat(file,processChangedTextOnly);
        RearrangeCommand rearranger=new RearrangeCommand(myProject,file,COMMAND_NAME,ranges);
        if (rearranger.couldRearrange()) {
          rearranger.run();
        }
        return true;
      }
 catch (      FilesTooBigForDiffException e) {
        handleFileTooBigException(LOG,e,file);
        return false;
      }
    }
  }
);
}
