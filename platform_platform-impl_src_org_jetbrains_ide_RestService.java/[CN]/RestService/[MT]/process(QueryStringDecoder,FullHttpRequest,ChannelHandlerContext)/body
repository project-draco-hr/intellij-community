{
  try {
    String error=execute(urlDecoder,request,context);
    if (error == null) {
      Responses.send(new DefaultFullHttpResponse(HttpVersion.HTTP_1_1,HttpResponseStatus.OK),context.channel(),request);
    }
 else {
      Responses.sendStatus(HttpResponseStatus.BAD_REQUEST,context.channel(),error,request);
    }
  }
 catch (  Throwable e) {
    HttpResponseStatus status;
    if (e instanceof MalformedJsonException || (e instanceof IllegalStateException && e.getMessage().startsWith("Expected a "))) {
      LOG.warn(e);
      status=HttpResponseStatus.BAD_REQUEST;
    }
 else {
      LOG.error(e);
      status=HttpResponseStatus.INTERNAL_SERVER_ERROR;
    }
    Responses.sendStatus(status,context.channel(),ExceptionUtil.getThrowableText(e),request);
  }
  return true;
}
