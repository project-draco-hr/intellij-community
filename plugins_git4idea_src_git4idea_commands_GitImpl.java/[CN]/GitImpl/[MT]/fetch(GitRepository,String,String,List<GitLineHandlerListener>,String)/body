{
  return runCommand(new Computable<GitLineHandler>(){
    @Override public GitLineHandler compute(){
      final GitLineHandler h=new GitLineHandler(repository.getProject(),repository.getRoot(),GitCommand.FETCH);
      h.setSilent(false);
      h.setStdoutSuppressed(false);
      h.setUrl(url);
      h.addParameters(remote);
      h.addParameters(params);
      h.addProgressParameter();
      GitVcs vcs=GitVcs.getInstance(repository.getProject());
      if (vcs != null && GitVersionSpecialty.SUPPORTS_FETCH_PRUNE.existsIn(vcs.getVersion())) {
        h.addParameters("--prune");
      }
      addListeners(h,listeners);
      return h;
    }
  }
);
}
