{
  return runCommand(new Computable<GitLineHandler>(){
    @Override public GitLineHandler compute(){
      final GitLineHandler h=new GitLineHandler(repository.getProject(),repository.getRoot(),GitCommand.PUSH);
      if (url != null) {
        h.setUrl(url);
      }
      h.setSilent(false);
      h.setStdoutSuppressed(false);
      addListeners(h,listeners);
      h.addProgressParameter();
      h.addParameters("--porcelain");
      h.addParameters(remote);
      h.addParameters(spec);
      if (updateTracking) {
        h.addParameters("--set-upstream");
      }
      if (force) {
        h.addParameters("--force");
      }
      if (tagMode != null) {
        h.addParameters(tagMode);
      }
      return h;
    }
  }
);
}
