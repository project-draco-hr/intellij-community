{
  final String[] schemeNames=readSchemeNames(selectedFile);
  final ImportSchemeChooserDialog schemeChooserDialog=new ImportSchemeChooserDialog(project,schemeNames,!currentScheme.isDefault() ? currentScheme.getName() : null);
  if (!schemeChooserDialog.showAndGet())   return false;
  final CodeStyleScheme scheme=schemeCreator.convert(schemeChooserDialog.getTargetName(),schemeChooserDialog.isUseCurrentScheme());
  if (scheme == null)   return false;
  readFromStream(selectedFile,new ThrowableConsumer<InputStream,SchemeImportException>(){
    @Override public void consume(    InputStream stream) throws SchemeImportException {
      new EclipseCodeStyleImportWorker().importScheme(stream,schemeChooserDialog.getSelectedName(),scheme);
    }
  }
);
  return true;
}
