{
  final String[] schemeNames=readSchemeNames(selectedFile);
  final ImportSchemeChooserDialog schemeChooserDialog=new ImportSchemeChooserDialog(project,schemeNames,!currentScheme.isDefault() ? currentScheme.getName() : null);
  if (!schemeChooserDialog.showAndGet())   return null;
  final CodeStyleScheme scheme=schemeChooserDialog.isUseCurrentScheme() && (!currentScheme.isDefault()) ? currentScheme : schemeFactory.createNewScheme(schemeChooserDialog.getTargetName());
  if (scheme == null)   return null;
  readFromStream(selectedFile,new ThrowableConsumer<InputStream,SchemeImportException>(){
    @Override public void consume(    InputStream stream) throws SchemeImportException {
      new EclipseCodeStyleImportWorker().importScheme(stream,schemeChooserDialog.getSelectedName(),scheme);
    }
  }
);
  return scheme;
}
