{
  Inflater inflater=new Inflater();
  byte[] inflated=new byte[1024];
  try {
    String line=input.next();
    while (line != null && line.length() > 0) {
      int len=getLineSizeFromChar(line.charAt(0));
      byte[] toInflate=Base85x.decode(line.substring(1));
      inflater.setInput(toInflate,0,len);
      int resultLength;
      while (!inflater.needsInput()) {
        try {
          resultLength=inflater.inflate(inflated);
        }
 catch (        DataFormatException e) {
          throw new BinaryPatchException("Can't decode binary file patch: can't decompress data");
        }
        output.write(inflated,0,resultLength);
      }
      if (!input.hasNext())       break;
      line=input.next();
    }
    int count=output.size();
    if (count != size) {
      throw new BinaryPatchException(String.format("Length of decoded binary patch mismatches: expected %d, received %d",size,count));
    }
  }
 catch (  Base85x.Base85FormatException e) {
    throw new BinaryPatchException(e);
  }
 finally {
    inflater.end();
  }
}
