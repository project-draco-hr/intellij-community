{
  StudyEditor.deleteGuardedBlocks(document);
  BufferedReader reader=null;
  StudyDocumentListener listener=StudyEditor.getListener(document);
  if (listener != null) {
    document.removeDocumentListener(listener);
  }
  clearDocument(document);
  try {
    String lessonDir=Lesson.LESSON_DIR + String.valueOf(task.getLesson().getIndex() + 1);
    String taskDir=Task.TASK_DIR + String.valueOf(task.getIndex() + 1);
    File resourceFile=new File(course.getResourcePath());
    File resourceRoot=resourceFile.getParentFile();
    File pattern=new File(new File(new File(resourceRoot,lessonDir),taskDir),fileName);
    reader=new BufferedReader(new InputStreamReader(new FileInputStream(pattern)));
    String line;
    StringBuilder patternText=new StringBuilder();
    while ((line=reader.readLine()) != null) {
      patternText.append(line);
      patternText.append("\n");
    }
    int patternLength=patternText.length();
    if (patternLength != 0) {
      if (patternText.charAt(patternLength - 1) == '\n') {
        patternText.delete(patternLength - 1,patternLength);
      }
      document.setText(patternText);
    }
  }
 catch (  FileNotFoundException e) {
    LOG.error(e);
  }
catch (  IOException e) {
    LOG.error(e);
  }
 finally {
    StudyUtils.closeSilently(reader);
  }
  if (listener != null) {
    document.addDocumentListener(listener);
  }
}
