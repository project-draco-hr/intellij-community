{
  if (!(reference instanceof GrReferenceExpression))   return null;
  boolean findSet=descriptor.isToEncapsulateSet();
  boolean findGet=descriptor.isToEncapsulateGet();
  GrReferenceExpression ref=(GrReferenceExpression)reference;
  if (findGet && JavaEncapsulateFieldHelper.isUsedInExistingAccessor(descriptor.getTargetClass(),fieldDescriptor.getGetterPrototype(),ref)) {
    return null;
  }
  if (findSet && JavaEncapsulateFieldHelper.isUsedInExistingAccessor(descriptor.getTargetClass(),fieldDescriptor.getSetterPrototype(),ref)) {
    return null;
  }
  if (!findGet) {
    if (!PsiUtil.isAccessedForWriting(ref))     return null;
  }
  if (!findSet || fieldDescriptor.getField().hasModifierProperty(PsiModifier.FINAL)) {
    if (!PsiUtil.isAccessedForReading(ref))     return null;
  }
  return new EncapsulateFieldUsageInfo(ref,fieldDescriptor);
}
