{
  FileType fileType=text.getFileType();
  if (fileType == null)   return;
  if (myContext == null)   return;
  CodeFragmentFactory newFactory=findFactoryForRestore(text,myContext);
  if (!newFactory.equals(myFactory)) {
    myExplicitlyChosen=false;
    setFactory(newFactory);
  }
}
