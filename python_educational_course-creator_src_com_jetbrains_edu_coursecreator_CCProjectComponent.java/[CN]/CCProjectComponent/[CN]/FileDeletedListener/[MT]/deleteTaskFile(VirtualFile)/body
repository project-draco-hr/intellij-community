{
  final CCProjectService projectService=CCProjectService.getInstance(myProject);
  final VirtualFile taskDir=removedFile.getParent();
  if (taskDir == null || !taskDir.getName().contains(EduNames.TASK)) {
    return;
  }
  VirtualFile lessonDir=taskDir.getParent();
  if (lessonDir == null || !lessonDir.getName().contains(EduNames.LESSON)) {
    return;
  }
  VirtualFile courseDir=lessonDir.getParent();
  if (!courseDir.getName().equals(myProject.getName())) {
    return;
  }
  final Course course=projectService.getCourse();
  Lesson lesson=course.getLesson(lessonDir.getName());
  if (lesson == null) {
    return;
  }
  Task task=projectService.getTask(taskDir.getPath());
  if (task == null) {
    return;
  }
  TaskFile taskFile=projectService.getTaskFile(removedFile);
  if (taskFile == null) {
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      CCRunTestsAction.clearTestEnvironment(taskDir,myProject);
    }
  }
);
  String name=CCProjectService.getRealTaskFileName(removedFile.getName());
  task.getTaskFiles().remove(name);
}
