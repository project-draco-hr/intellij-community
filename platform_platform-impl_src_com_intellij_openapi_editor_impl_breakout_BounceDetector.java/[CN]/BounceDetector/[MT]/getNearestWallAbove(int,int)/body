{
  int currLine=getLineNumber(y);
  int lineStart=getLineStart(currLine);
  int lineEnd=getLineEnd(currLine);
  if (x > lineEnd || x < lineStart) {
    int prevLineStart=getLineStart(currLine - 1);
    int prevLineEnd=getLineEnd(currLine - 1);
    if (x > prevLineStart && x < prevLineEnd) {
      return currLine * editor.getLineHeight();
    }
  }
  return editor.getScrollingModel().getVisibleArea().y;
}
