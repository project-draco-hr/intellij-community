{
  int currLine=getLineNumber(y);
  int lineStart=getLineStart(currLine + 1);
  int lineEnd=getLineEnd(currLine + 1);
  if (x > lineEnd || x < lineStart) {
    int nextLineStart=getLineStart(currLine + 2);
    int nextLineEnd=getLineEnd(currLine + 2);
    if (x > nextLineStart && x < nextLineEnd) {
      return (currLine + 2) * editor.getLineHeight() - getHeightEstimate();
    }
  }
  Rectangle visibleArea=editor.getScrollingModel().getVisibleArea();
  return visibleArea.y + visibleArea.height - getHeightEstimate();
}
