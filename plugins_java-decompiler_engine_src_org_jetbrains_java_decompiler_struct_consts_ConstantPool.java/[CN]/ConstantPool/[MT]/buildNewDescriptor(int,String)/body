{
  boolean updated=false;
  if (type == CodeConstants.CONSTANT_Fieldref) {
    FieldDescriptor fd=FieldDescriptor.parseDescriptor(descriptor);
    VarType fType=fd.type;
    if (fType.type == CodeConstants.TYPE_OBJECT) {
      String newClassName=buildNewClassname(fType.value);
      if (newClassName != null) {
        fType.value=newClassName;
        updated=true;
      }
    }
    if (updated) {
      return fd.getDescriptor();
    }
  }
 else {
    MethodDescriptor md=MethodDescriptor.parseDescriptor(descriptor);
    for (    VarType paramType : md.params) {
      if (paramType.type == CodeConstants.TYPE_OBJECT) {
        String newClassName=buildNewClassname(paramType.value);
        if (newClassName != null) {
          paramType.value=newClassName;
          updated=true;
        }
      }
    }
    if (md.ret.type == CodeConstants.TYPE_OBJECT) {
      String newClassName=buildNewClassname(md.ret.value);
      if (newClassName != null) {
        md.ret.value=newClassName;
        updated=true;
      }
    }
    if (updated) {
      return md.getDescriptor();
    }
  }
  return null;
}
