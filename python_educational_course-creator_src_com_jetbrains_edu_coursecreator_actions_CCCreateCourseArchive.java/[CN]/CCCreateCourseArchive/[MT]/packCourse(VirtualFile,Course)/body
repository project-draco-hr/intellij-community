{
  try {
    final File zipFile=new File(myLocationDir,myZipName + ".zip");
    ZipOutputStream zos=new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(zipFile)));
    final CCLanguageManager manager=CCUtils.getStudyLanguageManager(course);
    VirtualFile[] courseFiles=baseDir.getChildren();
    for (    VirtualFile file : courseFiles) {
      ZipUtil.addFileOrDirRecursively(zos,null,new File(file.getPath()),file.getName(),new FileFilter(){
        @Override public boolean accept(        File pathname){
          String name=pathname.getName();
          String nameWithoutExtension=FileUtil.getNameWithoutExtension(pathname);
          if (nameWithoutExtension.endsWith(".answer") || name.contains(EduNames.WINDOWS_POSTFIX) || name.contains(".idea")|| FileUtil.filesEqual(pathname,zipFile)) {
            return false;
          }
          return manager != null && !manager.doNotPackFile(pathname);
        }
      }
,null);
    }
    zos.close();
    Messages.showInfoMessage("Course archive was saved to " + zipFile.getPath(),"Course Archive Was Created Successfully");
  }
 catch (  IOException e1) {
    LOG.error(e1);
  }
}
