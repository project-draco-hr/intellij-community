{
  final Set<String> keys=new THashSet<String>();
  final FileBasedIndex index=FileBasedIndex.getInstance();
  index.processAllKeys(NAME,new Processor<String>(){
    @Override public boolean process(    String value){
      if (name.equalsIgnoreCase(value)) {
        keys.add(value);
      }
      return true;
    }
  }
,scope,idFilter);
  final Set<VirtualFile> files=new THashSet<VirtualFile>();
  for (  String each : keys) {
    files.addAll(index.getContainingFiles(NAME,each,scope));
  }
  return files;
}
