{
  SmartList<PsiFileSystemItem> result=new SmartList<>();
  Processor<PsiFileSystemItem> processor=Processors.cancelableCollectProcessor(result);
  processFilesByName(name,includeDirs,processor,scope,project,null);
  if (includeDirs) {
    return ArrayUtil.toObjectArray(result,PsiFileSystemItem.class);
  }
  return result.toArray(new PsiFile[result.size()]);
}
