{
  return new ProgressTracker(){
    public void consume(    ProgressEvent event){
      if (event.getAction() == EventAction.REVERT) {
        final File file=event.getFile();
        if (file != null) {
          listener.accept(file);
        }
      }
      if (event.getAction() == EventAction.FAILED_REVERT) {
        exceptions.add(new VcsException("Revert failed"));
      }
    }
    public void checkCancelled(){
      listener.checkCanceled();
    }
  }
;
}
