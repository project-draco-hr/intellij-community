{
  if (referencedKeys.add(key)) {
    TextAttributesKey fallbackKey=key.getFallbackAttributeKey();
    if (fallbackKey != null) {
      checkDependencies(fallbackKey,referencedKeys);
    }
  }
 else {
    StringBuilder sb=new StringBuilder();
    sb.append("Cyclic TextAttributesKey dependency found: ");
    printDependencyLoop(sb,key);
    myFallbackAttributeKey=null;
    LOG.error(sb.toString());
  }
}
