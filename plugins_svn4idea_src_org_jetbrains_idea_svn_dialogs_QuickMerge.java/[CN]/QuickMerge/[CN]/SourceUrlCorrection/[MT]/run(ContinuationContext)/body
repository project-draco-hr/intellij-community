{
  final SVNURL branch=SvnBranchConfigurationManager.getInstance(myMergeContext.getProject()).getSvnBranchConfigManager().getWorkingBranchWithReload(myMergeContext.getWcInfo().getUrl(),myMergeContext.getRoot());
  if (branch != null && (!myMergeContext.getWcInfo().getUrl().equals(branch))) {
    final String branchString=branch.toString();
    if (SVNPathUtil.isAncestor(branchString,myMergeContext.getWcInfo().getRootUrl())) {
      final String subPath=SVNPathUtil.getRelativePath(branchString,myMergeContext.getWcInfo().getRootUrl());
      myMergeContext.setSourceUrl(SVNPathUtil.append(myMergeContext.getSourceUrl(),subPath));
    }
  }
}
