{
  Collection<VirtualFile> roots=getRoots();
  final Ref<VcsException> exception=Ref.create();
  LinkedHashSet<String> messages=ContainerUtil.newLinkedHashSet();
  for (  VirtualFile root : roots) {
    String message=getLastCommitMessage(root);
    if (message != null) {
      messages.add(message);
    }
  }
  if (!exception.isNull()) {
    throw exception.get();
  }
  return DvcsUtil.joinMessagesOrNull(messages);
}
