{
  String[] lines=LineTokenizer.tokenize(docstring,false);
  boolean is_first=true;
  int cut_width=Integer.MAX_VALUE;
  int firstIndentedLine=0;
  for (  String frag : lines) {
    if (frag.length() == 0)     continue;
    int pad_width=0;
    final Matcher matcher=ourSpacesPattern.matcher(frag);
    if (matcher.find()) {
      pad_width=matcher.end();
    }
    if (is_first) {
      is_first=false;
      if (pad_width == 0) {
        firstIndentedLine=1;
        continue;
      }
    }
    if (pad_width < cut_width)     cut_width=pad_width;
  }
  if (cut_width > 0 && cut_width < Integer.MAX_VALUE) {
    for (int i=firstIndentedLine; i < lines.length; i+=1) {
      if (lines[i].length() > 0)       lines[i]=lines[i].substring(cut_width);
    }
  }
  List<String> result=new ArrayList<String>();
  for (  String line : lines) {
    if (line.startsWith(PyConsoleUtil.ORDINARY_PROMPT))     break;
    result.add(line);
  }
  return result.toArray(new String[result.size()]);
}
