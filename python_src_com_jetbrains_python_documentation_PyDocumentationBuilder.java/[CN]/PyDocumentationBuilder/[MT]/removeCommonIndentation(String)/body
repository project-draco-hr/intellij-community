{
  final String[] lines=LineTokenizer.tokenize(docstring,false);
  boolean isFirst=true;
  int cutWidth=Integer.MAX_VALUE;
  int firstIndentedLine=0;
  for (  String frag : lines) {
    if (frag.length() == 0)     continue;
    int padWidth=0;
    final Matcher matcher=ourSpacesPattern.matcher(frag);
    if (matcher.find()) {
      padWidth=matcher.end();
    }
    if (isFirst) {
      isFirst=false;
      if (padWidth == 0) {
        firstIndentedLine=1;
        continue;
      }
    }
    if (padWidth < cutWidth)     cutWidth=padWidth;
  }
  if (cutWidth > 0 && cutWidth < Integer.MAX_VALUE) {
    for (int i=firstIndentedLine; i < lines.length; i+=1) {
      if (lines[i].length() >= cutWidth) {
        lines[i]=lines[i].substring(cutWidth);
      }
    }
  }
  final List<String> result=new ArrayList<String>();
  for (  String line : lines) {
    if (line.startsWith(PyConsoleUtil.ORDINARY_PROMPT))     break;
    result.add(line);
  }
  return ArrayUtil.toStringArray(result);
}
