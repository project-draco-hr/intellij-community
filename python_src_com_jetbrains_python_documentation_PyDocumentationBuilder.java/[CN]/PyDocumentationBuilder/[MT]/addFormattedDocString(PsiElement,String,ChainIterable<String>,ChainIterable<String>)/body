{
  final Project project=element.getProject();
  final List<String> formatted=PyStructuredDocstringFormatter.formatDocstring(element,docstring);
  if (formatted != null) {
    unformattedOutput.add(formatted);
    return;
  }
  boolean isFirstLine;
  final List<String> result=new ArrayList<String>();
  final String[] lines=removeCommonIndentation(docstring);
  isFirstLine=true;
  final int tabSize=CodeStyleSettingsManager.getSettings(project).getTabSize(PythonFileType.INSTANCE);
  for (  String line : lines) {
    if (isFirstLine && ourSpacesPattern.matcher(line).matches())     continue;
    if (isFirstLine) {
      isFirstLine=false;
    }
 else {
      result.add(BR);
    }
    int leadingTabs=0;
    while (leadingTabs < line.length() && line.charAt(leadingTabs) == '\t') {
      leadingTabs++;
    }
    if (leadingTabs > 0) {
      line=StringUtil.repeatSymbol(' ',tabSize * leadingTabs) + line.substring(leadingTabs);
    }
    result.add(combUp(line));
  }
  formattedOutput.add(result);
}
