{
  if (!(expression instanceof PsiExpression)) {
    return;
  }
  if (expression.getParent() instanceof PsiMethodCallExpression) {
    expression=expression.getParent();
  }
  while (expression.getParent() instanceof PsiPrefixExpression && ((PsiPrefixExpression)expression.getParent()).getOperationTokenType() == JavaTokenType.EXCL) {
    expression=expression.getParent();
  }
  if (!(expression.getParent() instanceof PsiExpressionStatement)) {
    expression.replace(CodeInsightServicesUtil.invertCondition((PsiExpression)expression));
  }
}
