{
  String in="public class A {\n" + "  public class B<T> extends A implements java.io.Serializable {}\n" + "}";
  String what="class '_A {" + "  class '_B {}" + "}";
  String by="class $A$ {\n" + "  private class $B$ {\n" + "  }\n"+ "}";
  assertEquals("public class A {\n" + "  private class B<T> extends A implements java.io.Serializable {\n" + "  }\n"+ "}",replacer.testReplace(in,what,by,options));
  String in2="public class A {\n" + "  void m1() {}\n" + "  public void m2() {}\n"+ "  public class B<T> extends A implements java.io.Serializable {\n"+ "    int zero() {\n"+ "      return 0;\n"+ "    }\n"+ "  }\n"+ "  void m3() {}\n"+ "}";
  assertEquals("should replace unmatched class content correctly","public class A {\n" + "  void m1() {}\n" + "  public void m2() {}\n"+ "  private class B<T> extends A implements java.io.Serializable {\n"+ "    int zero() {\n"+ "      return 0;\n"+ "    }\n"+ "  }\n"+ "  void m3() {}\n"+ "}",replacer.testReplace(in2,what,by,options));
}
