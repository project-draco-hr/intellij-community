{
  final VcsEventsListenerManager manager=myVcsManager.getVcsEventsListenerManager();
  final List<VirtualFile> list=Arrays.asList(new VirtualFile[]{myWorkingCopyDir});
  final MyCheckinListener listener=new MyCheckinListener(list);
  final Object key=manager.addCheckin(new ForwardingListener<CheckinEnvironment>(listener));
  myVcs.getCheckinEnvironment().scheduleUnversionedFilesForAddition(list);
  Assert.assertTrue(listener.isChecked());
  listener.assertCheckOk();
  listener.reset();
  manager.removeCheckin(key);
  listener.reset();
  myVcs.getCheckinEnvironment().scheduleUnversionedFilesForAddition(list);
  Assert.assertFalse(listener.isChecked());
}
