{
  final String charsetName=getCharsetFromEncodingDeclaration(content);
  if (charsetName == null) {
    return null;
  }
  try {
    return Charset.forName(charsetName);
  }
 catch (  IllegalCharsetNameException e) {
    return null;
  }
catch (  UnsupportedCharsetException e) {
    return null;
  }
}
