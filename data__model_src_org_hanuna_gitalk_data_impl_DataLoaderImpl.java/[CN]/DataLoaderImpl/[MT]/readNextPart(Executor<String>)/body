{
switch (state) {
case ALL_LOG_READER:
    throw new IllegalStateException("data was read");
case UNINITIALIZED:
  List<CommitParents> commitParentsList=partReader.readNextBlock(statusUpdater);
nextPreLoadPart=partReader.readNextBlock(statusUpdater);
state=State.PART_LOG_READER;
dataPack=new DataPackImpl(commitParentsList,statusUpdater);
break;
case PART_LOG_READER:
if (nextPreLoadPart.isEmpty()) {
throw new IllegalStateException("no next commits, but readNextPart was called");
}
List<CommitParents> nextPart=partReader.readNextBlock(statusUpdater);
dataPack.appendCommits(nextPreLoadPart,statusUpdater);
nextPreLoadPart=nextPart;
break;
default :
throw new IllegalStateException();
}
}
