{
  final RefactoringSupportProvider supportProvider=LanguageRefactoringSupport.INSTANCE.forLanguage(context.getPlace().getLanguage());
  return supportProvider != null && context.getEditor().getSettings().isVariableInplaceRenameEnabled() && supportProvider.isInplaceIntroduceAvailable(context.getPlace(),context.getPlace()) && !ApplicationManager.getApplication().isUnitTestMode();
}
