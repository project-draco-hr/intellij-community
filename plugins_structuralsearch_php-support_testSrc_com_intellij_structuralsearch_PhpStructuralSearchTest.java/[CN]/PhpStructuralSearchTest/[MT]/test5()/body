{
  String s="<?php\n" + "function f($a, $b) {}";
  doTest(s,"function $f$('_T+) {}",1,1);
  doTest(s,"function $f$('_T*)",1,1);
  String pattern="function $f$($param$)";
  options.clearVariableConstraints();
  options.setSearchPattern(pattern);
  MatcherImplUtil.transform(options);
  pattern=options.getSearchPattern();
  options.setFileType(PhpFileType.INSTANCE);
  options.setDialect(null);
  final MatchVariableConstraint constraint=new MatchVariableConstraint();
  constraint.setName("param");
  options.addVariableConstraint(constraint);
  constraint.setMinCount(2);
  MatcherImpl.validate(myProject,options);
  assertEquals(1,testMatcher.testFindMatches(s,pattern,options,true,PhpFileType.INSTANCE,null,false).size());
  constraint.setMinCount(3);
  MatcherImpl.validate(myProject,options);
  assertEquals(0,testMatcher.testFindMatches(s,pattern,options,true,PhpFileType.INSTANCE,null,false).size());
}
