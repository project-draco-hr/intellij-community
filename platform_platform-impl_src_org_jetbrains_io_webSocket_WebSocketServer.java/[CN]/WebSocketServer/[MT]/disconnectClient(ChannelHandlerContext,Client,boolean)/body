{
synchronized (clients) {
    if (!clients.remove(client)) {
      return false;
    }
  }
  try {
    context.attr(WebSocketHandshakeHandler.CLIENT).set(null);
    if (closeChannel) {
      context.channel().close();
    }
    client.rejectAsyncResults(exceptionHandler);
  }
  finally {
    if (listener != null) {
      listener.disconnected(client);
    }
  }
  return true;
}
