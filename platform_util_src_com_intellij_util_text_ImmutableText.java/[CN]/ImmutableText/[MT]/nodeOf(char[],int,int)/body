{
  if (length <= BLOCK_SIZE) {
    if (offset == 0 && length == chars.length) {
      return new LeafNode(chars);
    }
    char[] subArray=new char[length];
    System.arraycopy(chars,offset,subArray,0,length);
    return new LeafNode(subArray);
  }
 else {
    int half=((length + BLOCK_SIZE) >> 1) & BLOCK_MASK;
    return new CompositeNode(nodeOf(chars,offset,half),nodeOf(chars,offset + half,length - half));
  }
}
