{
  GraphCommitCell cell=(GraphCommitCell)value;
  if (cell == null) {
    return;
  }
  int width=calcPaddingBeforeText(cell,(Graphics2D)g);
  BufferedImage image=UIUtil.createImage(width,HEIGHT_CELL,BufferedImage.TYPE_INT_ARGB);
  Graphics2D g2=image.createGraphics();
  g2.setBackground(new Color(0,0,0,0));
  graphPainter.draw(g2,cell.getPrintCell());
  int countCells=cell.getPrintCell().countCell();
  int padding=countCells * WIDTH_NODE;
  Collection<VcsRef> refs=cell.getRefsToThisCommit();
  if (!refs.isEmpty()) {
    VirtualFile root=refs.iterator().next().getRoot();
    refs=myDataHolder.getLogProvider(root).getReferenceManager().sort(refs);
  }
  drawRefs(g2,refs,padding);
  UIUtil.drawImage(g,image,0,0,null);
}
