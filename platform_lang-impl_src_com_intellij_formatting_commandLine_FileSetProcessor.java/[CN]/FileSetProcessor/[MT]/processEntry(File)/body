{
  if (entry.exists()) {
    if (entry.isDirectory()) {
      File[] subEntries=entry.listFiles();
      if (subEntries != null) {
        for (        File subEntry : subEntries) {
          processEntry(subEntry);
        }
      }
    }
 else {
      if (myPattern == null || entry.getCanonicalPath().matches(myPattern)) {
        VirtualFile virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(entry);
        if (virtualFile == null) {
          throw new IOException("Can not find " + entry.getPath());
        }
        processFile(virtualFile);
      }
    }
  }
}
