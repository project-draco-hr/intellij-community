{
  final TreePath[] paths=myTree.getSelectionPaths();
  if (paths == null) {
    return null;
  }
  Set<AntBuildFile> antFiles=new LinkedHashSet<AntBuildFile>();
  for (  final TreePath path : paths) {
    for (DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent(); node != null; node=(DefaultMutableTreeNode)node.getParent()) {
      final Object userObject=node.getUserObject();
      if (!(userObject instanceof AntBuildFileNodeDescriptor)) {
        continue;
      }
      final AntBuildFile buildFile=((AntBuildFileNodeDescriptor)userObject).getBuildFile();
      if (buildFile != null) {
        antFiles.add(buildFile);
      }
      break;
    }
  }
  final List<T> result=new ArrayList<T>();
  ContainerUtil.addAllNotNull(result,ContainerUtil.map(antFiles,new Function<AntBuildFile,T>(){
    @Override public T fun(    AntBuildFile buildFile){
      return function.fun(buildFile);
    }
  }
));
  return result.isEmpty() ? null : result;
}
