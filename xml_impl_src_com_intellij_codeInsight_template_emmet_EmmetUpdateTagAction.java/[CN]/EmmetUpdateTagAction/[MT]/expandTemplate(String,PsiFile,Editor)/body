{
  final CollectCustomTemplateCallback callback=new CollectCustomTemplateCallback(editor,file);
  ZenCodingTemplate.expand(abbreviation,callback,XmlZenCodingGeneratorImpl.INSTANCE,Collections.<ZenCodingFilter>emptyList(),true,Registry.intValue("emmet.segments.limit"));
  TemplateImpl template=callback.getGeneratedTemplate();
  return template != null ? template.getTemplateText() : null;
}
