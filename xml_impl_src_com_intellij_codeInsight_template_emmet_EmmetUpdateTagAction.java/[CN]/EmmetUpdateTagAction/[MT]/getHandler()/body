{
  return new CodeInsightActionHandler(){
    @Override public void invoke(    @NotNull final Project project,    @NotNull final Editor editor,    @NotNull final PsiFile file){
      final XmlTag tag=findTag(editor,file);
      if (tag != null) {
        new EmmetAbbreviationBalloon(EMMET_RECENT_UPDATE_ABBREVIATIONS_KEY,EMMET_LAST_UPDATE_ABBREVIATIONS_KEY,new EmmetAbbreviationBalloon.Callback(){
          @Override public void onEnter(          @NotNull String abbreviation){
            try {
              doUpdateTag(abbreviation,tag,file,editor);
            }
 catch (            EmmetException ignore) {
            }
          }
        }
,XmlBundle.message("emmet.update.tag.title")).show(new CustomTemplateCallback(editor,file));
      }
    }
    @Override public boolean startInWriteAction(){
      return false;
    }
  }
;
}
