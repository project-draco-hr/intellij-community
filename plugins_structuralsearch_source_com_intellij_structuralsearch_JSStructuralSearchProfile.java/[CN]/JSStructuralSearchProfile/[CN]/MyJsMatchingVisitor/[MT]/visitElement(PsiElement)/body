{
  PsiElement e=myGlobalVisitor.getElement();
  if (e instanceof JSBlockStatement) {
    JSStatement[] statements=((JSBlockStatement)e).getStatements();
    if (statements.length == 1) {
      myGlobalVisitor.setResult(myGlobalVisitor.match(element,statements[0]));
      return;
    }
  }
  super.visitElement(element);
  if (canBePatternVariable(element)) {
    String text=element.getText();
    final boolean isTypedVar=myGlobalVisitor.getMatchContext().getPattern().isTypedVar(text);
    if (isTypedVar) {
      myGlobalVisitor.setResult(myGlobalVisitor.handleTypedElement(element,myGlobalVisitor.getElement()));
    }
 else {
      myGlobalVisitor.setResult(text.equals(myGlobalVisitor.getElement().getText()));
    }
  }
 else {
    myGlobalVisitor.setResult(myGlobalVisitor.matchSequentially(new FilteringNodeIterator(element.getFirstChild()),new FilteringNodeIterator(myGlobalVisitor.getElement().getFirstChild())));
  }
}
