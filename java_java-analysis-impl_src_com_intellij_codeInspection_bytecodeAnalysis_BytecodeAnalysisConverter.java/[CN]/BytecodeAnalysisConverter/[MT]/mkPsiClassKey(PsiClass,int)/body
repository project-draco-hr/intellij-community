{
  PsiFile containingFile=psiClass.getContainingFile();
  if (!(containingFile instanceof PsiClassOwner)) {
    LOG.debug("containingFile was not resolved for " + psiClass.getQualifiedName());
    return -1;
  }
  PsiClassOwner psiFile=(PsiClassOwner)containingFile;
  String packageName=psiFile.getPackageName();
  String qname=psiClass.getQualifiedName();
  if (qname == null) {
    return -1;
  }
  String className=qname;
  if (packageName.length() > 0) {
    className=qname.substring(packageName.length() + 1).replace('.','$');
  }
  int[] classKey=new int[2];
  classKey[0]=enumerateString(packageName);
  if (dimensions == 0) {
    classKey[1]=enumerateString(className);
  }
 else {
    StringBuilder sb=new StringBuilder(className);
    for (int j=0; j < dimensions; j++) {
      sb.append("[]");
    }
    classKey[1]=enumerateString(sb.toString());
  }
  return enumerateCompoundKey(classKey);
}
