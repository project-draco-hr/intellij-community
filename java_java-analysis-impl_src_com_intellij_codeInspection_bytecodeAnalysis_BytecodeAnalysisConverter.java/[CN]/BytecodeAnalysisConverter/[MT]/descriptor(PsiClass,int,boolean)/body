{
  PsiFile containingFile=psiClass.getContainingFile();
  if (!(containingFile instanceof PsiClassOwner)) {
    LOG.debug("containingFile was not resolved for " + psiClass.getQualifiedName());
    return null;
  }
  PsiClassOwner psiFile=(PsiClassOwner)containingFile;
  String packageName=psiFile.getPackageName();
  String qname=psiClass.getQualifiedName();
  if (qname == null) {
    return null;
  }
  String className;
  if (packageName.length() > 0) {
    className=qname.substring(packageName.length() + 1).replace('.','$');
  }
 else {
    className=qname.replace('.','$');
  }
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < dimensions; i++) {
    sb.append('[');
  }
  if (full) {
    sb.append('L');
  }
  if (packageName.length() > 0) {
    sb.append(packageName.replace('.','/'));
    sb.append('/');
  }
  sb.append(className);
  if (full) {
    sb.append(';');
  }
  return sb.toString();
}
