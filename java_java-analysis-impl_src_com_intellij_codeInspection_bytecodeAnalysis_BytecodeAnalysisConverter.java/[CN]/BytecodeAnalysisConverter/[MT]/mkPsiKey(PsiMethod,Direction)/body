{
  final PsiClass psiClass=PsiTreeUtil.getParentOfType(psiMethod,PsiClass.class,false);
  if (psiClass == null) {
    LOG.debug("PsiClass was null for " + psiMethod.getName());
    return -1;
  }
  long sigKey=mkPsiSignatureKey(psiMethod);
  if (sigKey == -1) {
    return -1;
  }
  long directionKey=mkDirectionKey(direction);
  return sigKey * SHIFT + directionKey;
}
