{
  TIntObjectHashMap<List<String>> contractClauses=new TIntObjectHashMap<List<String>>();
  TIntObjectIterator<Value> solutionsIterator=internalIdSolutions.iterator();
  TIntHashSet notNulls=annotations.notNulls;
  TIntObjectHashMap<String> contracts=annotations.contracts;
  for (int i=internalIdSolutions.size(); i-- > 0; ) {
    solutionsIterator.advance();
    int key=Math.abs(solutionsIterator.key());
    Value value=solutionsIterator.value();
    if (value == Value.Top || value == Value.Bot) {
      continue;
    }
    try {
      int[] compoundKey=myCompoundKeyEnumerator.valueOf(key);
      Direction direction=extractDirection(myCompoundKeyEnumerator.valueOf(compoundKey[0]));
      if (value == Value.NotNull && (direction instanceof In || direction instanceof Out)) {
        notNulls.add(key);
      }
 else       if (direction instanceof InOut) {
        compoundKey[0]=mkDirectionKey(new Out());
        try {
          int baseKey=myCompoundKeyEnumerator.enumerate(compoundKey);
          List<String> clauses=contractClauses.get(baseKey);
          if (clauses == null) {
            clauses=new ArrayList<String>();
            contractClauses.put(baseKey,clauses);
          }
          int[] sig=myCompoundKeyEnumerator.valueOf(compoundKey[1]);
          int[] shortSig=myCompoundKeyEnumerator.valueOf(sig[1]);
          int arity=shortSig[2];
          clauses.add(contractElement(arity,(InOut)direction,value));
        }
 catch (        IOException e) {
          LOG.debug(e);
        }
      }
    }
 catch (    IOException e) {
      LOG.debug(e);
    }
  }
  TIntObjectIterator<List<String>> buildersIterator=contractClauses.iterator();
  for (int i=contractClauses.size(); i-- > 0; ) {
    buildersIterator.advance();
    int key=buildersIterator.key();
    if (!notNulls.contains(key)) {
      List<String> clauses=buildersIterator.value();
      Collections.sort(clauses);
      StringBuilder sb=new StringBuilder("\"");
      StringUtil.join(clauses,";",sb);
      sb.append('"');
      contracts.put(key,sb.toString().intern());
    }
  }
}
