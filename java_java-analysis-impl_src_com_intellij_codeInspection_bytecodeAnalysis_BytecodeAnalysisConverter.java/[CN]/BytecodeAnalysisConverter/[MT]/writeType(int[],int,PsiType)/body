{
  int dimensions=0;
  psiType=TypeConversionUtil.erasure(psiType);
  if (psiType instanceof PsiArrayType) {
    PsiArrayType arrayType=(PsiArrayType)psiType;
    psiType=arrayType.getDeepComponentType();
    dimensions=arrayType.getArrayDimensions();
  }
  if (psiType instanceof PsiClassType) {
    PsiClass psiClass=((PsiClassType)psiType).resolve();
    if (psiClass != null) {
      writeClass(compoundKey,i,psiClass,dimensions);
      return true;
    }
 else {
      return false;
    }
  }
 else   if (psiType instanceof PsiPrimitiveType) {
    String packageName="";
    String className=psiType.getPresentableText();
    compoundKey[i]=myPackageEnumerator.enumerate(packageName);
    if (dimensions == 0) {
      compoundKey[i + 1]=myNamesEnumerator.enumerate(className);
    }
 else {
      StringBuilder sb=new StringBuilder(className);
      for (int j=0; j < dimensions; j++) {
        sb.append("[]");
      }
      compoundKey[i + 1]=myNamesEnumerator.enumerate(sb.toString());
    }
    return true;
  }
  return false;
}
