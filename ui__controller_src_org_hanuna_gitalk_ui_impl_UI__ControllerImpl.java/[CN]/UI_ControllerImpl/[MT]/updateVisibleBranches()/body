{
  final Set<Hash> checkedCommitHashes=refTreeModel.getCheckedCommits();
  if (!prevSelectionBranches.equals(checkedCommitHashes)) {
    MyTimer timer=new MyTimer("update branch shows");
    prevSelectionBranches=new HashSet<Hash>(checkedCommitHashes);
    dataPack.getGraphModel().setVisibleBranchesNodes(new Function<Node,Boolean>(){
      @NotNull @Override public Boolean get(      @NotNull Node key){
        return checkedCommitHashes.contains(key.getCommitHash());
      }
    }
);
    events.runUpdateUI();
    events.runJumpToRow(0);
    timer.print();
  }
}
