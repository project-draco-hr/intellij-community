{
  if (className == null) {
    className=getTestName(false);
    configureByFiles(null,getTestName(true) + ".fxml",getTestName(false) + ".java");
  }
 else {
    configureByFiles(null,getTestName(true) + ".fxml",getTestName(false) + ".java",className.replace('.','/') + ".java");
  }
  final MapDataContext dataContext=new MapDataContext();
  dataContext.put(CommonDataKeys.EDITOR,myEditor);
  dataContext.put(PsiElementRenameHandler.DEFAULT_NAME,newName);
  final JavaFxPropertyRenameHandler renameHandler=new JavaFxPropertyRenameHandler();
  assertTrue(renameHandler.isAvailableOnDataContext(dataContext));
  renameHandler.invoke(myProject,myEditor,null,dataContext);
  checkResultByFile(getTestName(true) + "_after.fxml");
  final PsiClass psiClass=findClass(className);
  assertNotNull(psiClass);
  return psiClass;
}
