{
  CoverageSuitesBundle bundle=loadCoverageSuite(IDEACoverageRunner.class,"simple$foo_in_simple.coverage");
  PsiPackage psiPackage=JavaPsiFacade.getInstance(myProject).findPackage("foo");
  PackageAnnotator annotator=new PackageAnnotator(psiPackage);
  PackageAnnotationConsumer consumer=new PackageAnnotationConsumer();
  annotator.annotate(bundle,consumer);
  PackageAnnotator.ClassCoverageInfo barClassCoverage=consumer.myClassCoverageInfo.get("foo.bar.BarClass");
  assertEquals(3,barClassCoverage.totalMethodCount);
  assertEquals(1,barClassCoverage.coveredMethodCount);
  PackageAnnotator.PackageCoverageInfo barPackageCoverage=consumer.myPackageCoverage.get("foo.bar");
  assertEquals(2,barPackageCoverage.coveredLineCount);
  assertEquals(9,barPackageCoverage.totalLineCount);
  assertEquals(1,barPackageCoverage.coveredMethodCount);
  assertEquals(7,barPackageCoverage.totalMethodCount);
  PackageAnnotator.ClassCoverageInfo uncoveredClassInfo=consumer.myClassCoverageInfo.get("foo.bar.UncoveredClass");
  assertEquals(4,uncoveredClassInfo.totalMethodCount);
  assertEquals(0,uncoveredClassInfo.coveredMethodCount);
}
