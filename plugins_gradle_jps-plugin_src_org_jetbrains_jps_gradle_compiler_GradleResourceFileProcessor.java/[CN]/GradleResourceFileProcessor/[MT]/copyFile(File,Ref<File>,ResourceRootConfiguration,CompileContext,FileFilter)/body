{
  boolean shouldFilter=rootConfiguration.isFiltered && !rootConfiguration.filters.isEmpty() && filteringFilter.accept(file);
  if (shouldFilter && file.length() > FILTERING_SIZE_LIMIT) {
    context.processMessage(new CompilerMessage(GradleResourcesBuilder.BUILDER_NAME,BuildMessage.Kind.WARNING,"File is too big to be filtered. Most likely it is a binary file and should be excluded from filtering",file.getPath()));
    shouldFilter=false;
  }
  if (shouldFilter) {
    copyWithFiltering(file,targetFileRef,rootConfiguration.filters,context);
  }
 else {
    FileUtil.copyContent(file,targetFileRef.get());
  }
}
