{
  return new BaseInspectionVisitor(){
    @Override public void visitClass(    PsiClass aClass){
      TestFramework framework=TestFrameworks.detectFramework(aClass);
      if (framework == null || !"JUnit4".equals(framework.getName())) {
        return;
      }
      if (AnnotationUtil.isAnnotated(aClass,TestUtils.RUN_WITH,true)) {
        return;
      }
      for (      PsiField field : aClass.getAllFields()) {
        if (AnnotationUtil.isAnnotated(field,ruleAnnotations)) {
          return;
        }
      }
      for (      PsiMethod method : aClass.getMethods()) {
        if (AnnotationUtil.isAnnotated(method,ruleAnnotations)) {
          return;
        }
      }
      registerClassError(aClass);
    }
  }
;
}
