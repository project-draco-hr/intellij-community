{
synchronized (myStateMap) {
    WindowState state=myStateMap.get(key);
    return state != null && state.isVisible() ? state : null;
  }
}
