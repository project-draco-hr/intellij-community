{
  resetMarkup();
  if (myAppender1.getEditor() == null || myAppender2.getEditor() == null) {
    return LineBlocks.EMPTY;
  }
  if (myHighlightMode == HighlightMode.NO_HIGHLIGHTING) {
    return LineBlocks.fromLineFragments(Collections.<LineFragment>emptyList());
  }
  return addMarkup(new TextCompareProcessor(myComparisonPolicy,myDiffPolicy,myHighlightMode == HighlightMode.BY_WORD).process(myAppender1.getText(),myAppender2.getText()));
}
