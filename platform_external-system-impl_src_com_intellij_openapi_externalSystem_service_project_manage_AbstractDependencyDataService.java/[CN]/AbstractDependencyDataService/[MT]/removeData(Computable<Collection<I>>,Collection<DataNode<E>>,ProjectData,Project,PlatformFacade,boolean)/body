{
  List<ModifiableRootModel> models=ContainerUtilRt.newArrayList();
  try {
    Map<Module,Collection<ExportableOrderEntry>> byModule=groupByModule(toRemoveComputable.compute());
    for (    Map.Entry<Module,Collection<ExportableOrderEntry>> entry : byModule.entrySet()) {
      Module module=entry.getKey();
      Collection<ExportableOrderEntry> depsToRemove=entry.getValue();
      ModifiableRootModel model=platformFacade.getModuleModifiableModel(module);
      removeData(depsToRemove,model);
      models.add(model);
    }
    ExternalSystemApiUtil.commitModels(synchronous,project,models);
  }
 catch (  Throwable t) {
    ExternalSystemApiUtil.disposeModels(models);
    ExceptionUtil.rethrowAllAsUnchecked(t);
  }
}
