{
  if (statement instanceof PsiBreakStatement) {
    return ((PsiBreakStatement)statement).findExitedStatement() == loop;
  }
  if (statement instanceof PsiReturnStatement) {
    PsiExpression returnValue=((PsiReturnStatement)statement).getReturnValue();
    PsiElement cur=loop;
    for (PsiElement parent=cur.getParent(); ; parent=cur.getParent()) {
      if (parent instanceof PsiLabeledStatement) {
        cur=parent;
      }
 else       if (parent instanceof PsiCodeBlock) {
        PsiCodeBlock block=(PsiCodeBlock)parent;
        PsiStatement[] statements=block.getStatements();
        if (block.getParent() instanceof PsiBlockStatement && statements.length > 0 && statements[statements.length - 1] == cur) {
          cur=block.getParent();
        }
 else         break;
      }
 else       if (parent instanceof PsiIfStatement) {
        if (cur == ((PsiIfStatement)parent).getThenBranch() || cur == ((PsiIfStatement)parent).getElseBranch()) {
          cur=parent;
        }
 else         break;
      }
 else       break;
    }
    PsiElement nextElement=PsiTreeUtil.skipSiblingsForward(cur,PsiComment.class,PsiWhiteSpace.class);
    if (nextElement instanceof PsiReturnStatement) {
      return EquivalenceChecker.getCanonicalPsiEquivalence().expressionsAreEquivalent(returnValue,((PsiReturnStatement)nextElement).getReturnValue());
    }
    if (nextElement == null && returnValue == null && cur.getParent() instanceof PsiMethod) {
      return true;
    }
  }
  return false;
}
