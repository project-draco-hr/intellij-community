{
  super(new BorderLayout());
  myModifiedPatterns=patterns;
  final JBTable table=createTableForPatterns();
  final String addPatternMessage="Add Class Name Pattern";
  final String addClassMessage="Add Class";
  final ToolbarDecorator toolbarDecorator=ToolbarDecorator.createDecorator(table).setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      Project project=CommonDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(table));
      if (project == null)       project=ProjectManager.getInstance().getDefaultProject();
      TreeClassChooser chooser=TreeClassChooserFactory.getInstance(project).createWithInnerClassesScopeChooser(addClassMessage,GlobalSearchScope.projectScope(project),ClassFilter.ALL,null);
      chooser.showDialog();
      final PsiClass selected=chooser.getSelected();
      if (selected != null) {
        insertRow(selected.getQualifiedName(),table);
      }
    }
  }
).setAddActionName(addClassMessage).setAddIcon(IconUtil.getAddClassIcon()).addExtraAction(new AnActionButton(addPatternMessage,IconUtil.getAddPatternIcon()){
    @Override public void actionPerformed(    AnActionEvent e){
      String selectedPattern=Messages.showInputDialog("Pattern:","Class Name Pattern",Messages.getQuestionIcon());
      if (selectedPattern != null) {
        insertRow(selectedPattern,table);
      }
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      TableUtil.removeSelectedItems(table);
      table.repaint();
    }
  }
).setRemoveActionUpdater(new AnActionButtonUpdater(){
    @Override public boolean isEnabled(    AnActionEvent e){
      return table.getSelectedRow() >= 0;
    }
  }
).setButtonComparator(addClassMessage,addPatternMessage,"Remove");
  add(SeparatorFactory.createSeparator("Mark class as entry point if qualified name matches",null),BorderLayout.NORTH);
  add(toolbarDecorator.createPanel(),BorderLayout.CENTER);
  setPreferredSize(new JBDimension(-1,250));
}
