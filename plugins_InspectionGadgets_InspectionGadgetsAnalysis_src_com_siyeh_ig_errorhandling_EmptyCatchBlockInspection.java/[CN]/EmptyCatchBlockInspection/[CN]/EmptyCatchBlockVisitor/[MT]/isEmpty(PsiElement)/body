{
  if (!m_includeComments && element instanceof PsiComment) {
    return true;
  }
 else   if (element instanceof PsiEmptyStatement) {
    if (m_includeComments) {
      final PsiElement[] children=element.getChildren();
      for (      PsiElement child : children) {
        if (child instanceof PsiComment) {
          return false;
        }
      }
    }
    return true;
  }
 else   if (element instanceof PsiWhiteSpace) {
    return true;
  }
 else   if (element instanceof PsiBlockStatement) {
    final PsiBlockStatement block=(PsiBlockStatement)element;
    return isEmpty(block.getCodeBlock());
  }
 else   if (element instanceof PsiCodeBlock) {
    final PsiCodeBlock codeBlock=(PsiCodeBlock)element;
    final PsiElement[] children=codeBlock.getChildren();
    if (children.length == 2) {
      return true;
    }
    for (int i=1; i < children.length - 1; i++) {
      final PsiElement child=children[i];
      if (!isEmpty(child)) {
        return false;
      }
    }
    return true;
  }
  return false;
}
