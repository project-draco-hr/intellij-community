{
  while (true) {
switch (state) {
case HEADER:
{
        if (paddingLength > 0) {
          if (input.readableBytes() >= paddingLength) {
            input.skipBytes(paddingLength);
            paddingLength=0;
          }
 else {
            paddingLength-=input.readableBytes();
            input.skipBytes(input.readableBytes());
            input.release();
            return;
          }
        }
        ByteBuf buffer=getBufferIfSufficient(input,FastCgiConstants.HEADER_LENGTH,context);
        if (buffer == null) {
          input.release();
          return;
        }
        decodeHeader(buffer);
        state=State.CONTENT;
      }
case CONTENT:
{
      if (contentLength > 0) {
        ByteBuf buffer=getBufferIfSufficient(input,contentLength,context);
        if (buffer == null) {
          input.release();
          return;
        }
        FastCgiResponse response=readContent(buffer);
        if (response != null) {
          context.fireChannelRead(response);
        }
      }
      state=State.HEADER;
    }
}
}
}
