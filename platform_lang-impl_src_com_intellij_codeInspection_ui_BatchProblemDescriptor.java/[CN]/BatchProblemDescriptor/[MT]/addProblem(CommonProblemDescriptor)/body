{
  myDescriptors.add(descriptor);
  if (myOnlyCount) {
    return;
  }
  if (isIntersectionTrivial()) {
    return;
  }
  final boolean exist;
  if (myMap == null) {
    myMap=new MultiMap<>();
    exist=false;
  }
 else {
    exist=true;
  }
  if (descriptor == null) {
    myMap.clear();
    return;
  }
  final QuickFix[] fixes=descriptor.getFixes();
  if (fixes != null) {
    MultiMap<String,CommonProblemDescriptor> mapToUse=exist ? new MultiMap<>() : myMap;
    for (    QuickFix fix : fixes) {
      mapToUse.putValue(fix.getName(),descriptor);
    }
    if (exist) {
      for (      String name : new ArrayList<>(myMap.keySet())) {
        if (mapToUse.containsKey(name)) {
          myMap.put(name,mapToUse.get(name));
        }
 else {
          myMap.remove(name);
        }
      }
    }
  }
}
