{
  ServerBootstrap bootstrap=NettyUtil.nioServerBootstrap(eventLoopGroup);
  if (xmlRpcHandlers == null) {
    final PortUnificationServerHandler portUnificationServerHandler=new PortUnificationServerHandler();
    bootstrap.childHandler(new ChannelInitializer(){
      @Override protected void initChannel(      Channel channel) throws Exception {
        channel.pipeline().addLast(channelRegistrar,portUnificationServerHandler,ChannelExceptionHandler.getInstance());
      }
    }
);
  }
 else {
    final XmlRpcDelegatingHttpRequestHandler handler=new XmlRpcDelegatingHttpRequestHandler(xmlRpcHandlers);
    bootstrap.childHandler(new ChannelInitializer(){
      @Override protected void initChannel(      Channel channel) throws Exception {
        channel.pipeline().addLast(channelRegistrar);
        NettyUtil.addHttpServerCodec(channel.pipeline());
        channel.pipeline().addLast(handler,ChannelExceptionHandler.getInstance());
      }
    }
);
  }
  return bootstrap;
}
