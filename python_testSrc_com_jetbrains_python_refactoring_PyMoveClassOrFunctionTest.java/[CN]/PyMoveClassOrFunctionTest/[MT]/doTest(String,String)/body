{
  String root="/refactoring/moveClassOrFunction/" + getTestName(true);
  String rootBefore=root + "/before/src";
  String rootAfter=root + "/after/src";
  VirtualFile dir1=myFixture.copyDirectoryToProject(rootBefore,"");
  PsiDocumentManager.getInstance(myFixture.getProject()).commitAllDocuments();
  PsiNamedElement element=findFirstNamedElement(symbolName);
  assertNotNull(element);
  VirtualFile toVirtualFile=dir1.findFileByRelativePath(toFileName);
  assertNotNull(toVirtualFile);
  PyFile toFile=(PyFile)PsiManager.getInstance(myFixture.getProject()).findFile(toVirtualFile);
  new PyMoveClassOrFunctionProcessor(myFixture.getProject(),new PsiNamedElement[]{element},toFile,false).run();
  VirtualFile dir2=getVirtualFileByName(PythonTestUtil.getTestDataPath() + rootAfter);
  try {
    PlatformTestUtil.assertDirectoriesEqual(dir2,dir1,null);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
