{
  final String text=reference.getElement().getText();
  final String refText=reference.getRangeInElement().substring(text);
  final Module module=ModuleUtilCore.findModuleForPsiElement(node);
  if (module != null && PythonSdkType.findPythonSdk(module) == null) {
    return null;
  }
  ScopeOwner scopeOwner=PsiTreeUtil.getParentOfType(node,ScopeOwner.class);
  if (scopeOwner != null && ControlFlowCache.getScope(scopeOwner).containsDeclaration(refText)) {
    return null;
  }
  AutoImportQuickFix fix=addCandidates(node,reference,refText,null);
  if (fix != null)   return fix;
  final String packageName=PyPackageAliasesProvider.commonImportAliases.get(refText);
  if (packageName != null) {
    fix=addCandidates(node,reference,packageName,refText);
    if (fix != null)     return fix;
  }
  return null;
}
