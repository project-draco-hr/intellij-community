{
  final String name=ref.getName();
  if (name != null) {
    PsiElement outermost_context=ref;
    PsiElement seeker=ref;
    do {
      seeker=PsiTreeUtil.getParentOfType(seeker,PyFunction.class);
      if (seeker != null)       outermost_context=seeker;
    }
 while (seeker != null);
    final ResolveProcessor processor=new ResolveProcessor(name);
    PyResolveUtil.treeCrawlUp(processor,true,outermost_context);
    return (processor.getResult() != null || processor.getDefiners().size() > 0);
  }
  return false;
}
