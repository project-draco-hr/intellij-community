{
  Map<String,StateMap> states=new THashMap<String,StateMap>(map.size());
  for (  Map.Entry<String,Map<String,Object>> entry : map.entrySet()) {
    states.put(entry.getKey(),StateMap.fromMap(entry.getValue()));
  }
  return new DirectoryStorageData(states);
}
