{
  return ApplicationManager.getApplication().runReadAction(new Computable<List<VirtualFile>>(){
    @Override public List<VirtualFile> compute(){
      if (module.isDisposed())       return Collections.emptyList();
      List<VirtualFile> result=ContainerUtil.newArrayList();
      for (      VirtualFile contentRoot : ModuleRootManager.getInstance(module).getContentRoots()) {
        DirectoryInfo info=getInfoForFileOrDirectory(contentRoot);
        if (!info.isInProject())         continue;
        if (!module.equals(info.getModule()))         continue;
        VirtualFile parent=contentRoot.getParent();
        if (parent != null) {
          DirectoryInfo parentInfo=getInfoForFileOrDirectory(parent);
          if (parentInfo.isInProject() && parentInfo.getModule() != null)           continue;
        }
        result.add(contentRoot);
      }
      return result;
    }
  }
);
}
