{
  if (myIsDuringUpdate)   return;
  try {
    myIsDuringUpdate=true;
    List<VcsFileRevision> newItems;
    if (myChangesOnlyCheckBox.isSelected()) {
      try {
        loadContentsFor(myRevisions.toArray(new VcsFileRevision[myRevisions.size()]));
        newItems=filteredRevisions();
      }
 catch (      final VcsException e) {
        canNotLoadRevisionMessage(e);
        return;
      }
    }
 else {
      newItems=myRevisions;
    }
    List<VcsFileRevision> oldSelection=getSelectedRevisions();
    myListModel.setItems(newItems);
    myList.setSelection(oldSelection);
    if (myList.getSelectedRowCount() == 0) {
      int index=getNearestVisibleRevision(ContainerUtil.getFirstItem(oldSelection));
      myList.getSelectionModel().setSelectionInterval(index,index);
    }
  }
  finally {
    myIsDuringUpdate=false;
  }
  updateDiff();
}
