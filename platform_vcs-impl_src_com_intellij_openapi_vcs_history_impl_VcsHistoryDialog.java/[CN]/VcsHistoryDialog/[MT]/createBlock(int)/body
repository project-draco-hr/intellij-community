{
  if (index == 0) {
    return new Block(myEditor.getDocument().getText(),mySelectionStart,mySelectionEnd + 1);
  }
  Block previousBlock=getBlock(index - 1);
  if (previousBlock == EMPTY_BLOCK)   return EMPTY_BLOCK;
  String revisionContent=getContentOf(myRevisions.get(index));
  if (revisionContent == null)   return EMPTY_BLOCK;
  Block newBlock=previousBlock.createPreviousBlock(revisionContent);
  return newBlock.getStart() != newBlock.getEnd() ? newBlock : EMPTY_BLOCK;
}
