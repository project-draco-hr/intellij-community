{
  Function<VcsFullCommitDetails,DefaultMutableTreeNode> commitToNode=new Function<VcsFullCommitDetails,DefaultMutableTreeNode>(){
    @Override public DefaultMutableTreeNode fun(    VcsFullCommitDetails commit){
      return new VcsFullCommitDetailsNode(project,commit);
    }
  }
;
  List<DefaultMutableTreeNode> childrenToShown=new ArrayList<DefaultMutableTreeNode>();
  for (int i=0; i < commits.size(); ++i) {
    if (i >= commitsNum) {
      final MoreCommitsLink moreCommitsLink=new MoreCommitsLink();
      moreCommitsLink.addClickListener(new TreeNodeLinkListener(){
        @Override public void onClick(        @NotNull DefaultMutableTreeNode source){
          TreeNode parentNode=source.getParent();
          if (parentNode instanceof RepositoryNode) {
            addMoreCommits((RepositoryNode)parentNode);
          }
        }
      }
);
      childrenToShown.add(new TextWithLinkNode(moreCommitsLink));
      break;
    }
    childrenToShown.add(commitToNode.fun(commits.get(i)));
  }
  return childrenToShown;
}
