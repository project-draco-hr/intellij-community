{
  PyBinaryExpression element=PsiTreeUtil.getParentOfType(file.findElementAt(editor.getCaretModel().getOffset()),PyBinaryExpression.class);
  while (element.getParent() instanceof PyBinaryExpression) {
    element=(PyBinaryExpression)element.getParent();
  }
  PyIfStatement ifStatement=PsiTreeUtil.getParentOfType(element,PyIfStatement.class);
  PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  PyIfStatement subIf=(PyIfStatement)ifStatement.copy();
  subIf.getIfPart().getCondition().replace(element.getRightExpression());
  ifStatement.getIfPart().getCondition().replace(element.getLeftExpression());
  PyStatementList statementList=elementGenerator.createFromText(PyIfStatement.class,"if a:\n    a = 1").getIfPart().getStatementList();
  statementList.getStatements()[0].replace(subIf);
  ifStatement.getIfPart().getStatementList().replace(statementList);
}
