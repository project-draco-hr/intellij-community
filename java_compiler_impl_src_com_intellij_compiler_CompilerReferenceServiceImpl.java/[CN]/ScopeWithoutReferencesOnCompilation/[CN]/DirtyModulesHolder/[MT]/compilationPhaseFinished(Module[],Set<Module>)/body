{
synchronized (myLock) {
    myCompilationPhase=false;
    ContainerUtil.removeAll(myChangedModules,compilationModules);
    myChangedModules.addAll(modulesWithErrors);
    myChangedModules.addAll(ContainerUtil.newHashSet(myChangedModulesDuringCompilation));
    myChangedModulesDuringCompilation.clear();
  }
}
