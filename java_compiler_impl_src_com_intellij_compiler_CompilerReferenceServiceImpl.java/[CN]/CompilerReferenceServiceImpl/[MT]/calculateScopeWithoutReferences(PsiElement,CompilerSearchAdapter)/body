{
  TIntHashSet referentFileIds=getReferentFileIds(element,adapter);
  if (referentFileIds == null)   return null;
  return getScopeRestrictedByFileTypes(new ScopeWithoutReferencesOnCompilation(referentFileIds).intersectWith(notScope(myDirtyModulesHolder.getDirtyScope())),myFileTypes.toArray(new FileType[myFileTypes.size()]));
}
