{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    context.setLaterRunnable(new Runnable(){
      @Override public void run(){
        IntroduceVariableHandler handler=getMockHandler();
        handler.invoke(context.getProject(),context.getEditor(),statement.getExpression());
      }
    }
);
  }
 else {
    IntroduceVariableHandler handler=new IntroduceVariableHandler();
    handler.invoke(context.getProject(),context.getEditor(),statement.getExpression());
  }
}
