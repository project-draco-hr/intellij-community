{
  VirtualFile taskDir=virtualFile.getParent();
  if (taskDir == null) {
    return null;
  }
  String taskDirName=taskDir.getName();
  if (!taskDirName.contains(EduNames.TASK)) {
    return null;
  }
  VirtualFile lessonDir=taskDir.getParent();
  if (lessonDir == null) {
    return null;
  }
  String lessonDirName=lessonDir.getName();
  if (!lessonDirName.contains(EduNames.LESSON)) {
    return null;
  }
  Lesson lesson=myLessonsMap.get(lessonDirName);
  if (lesson == null) {
    return null;
  }
  Task task=getTask(taskDir.getPath());
  if (task == null) {
    return null;
  }
  String fileName=getRealTaskFileName(virtualFile.getName());
  return task.getTaskFile(fileName);
}
