{
  JavaPsiFacade javaFacade=JavaPsiFacade.getInstance(myModule.getProject());
  VirtualFile lib=LocalFileSystem.getInstance().refreshAndFindFileByPath(PathManagerEx.getTestDataPath() + "/../../../lib");
  assertNotNull(lib);
  PsiTestUtil.addLibrary(myModule,"velocity",lib.getPath(),new String[]{"/velocity.jar!/"},new String[]{});
  PsiClass psiClass=javaFacade.findClass(SystemUtils.class.getName(),GlobalSearchScope.moduleWithLibrariesScope(myModule));
  assertNotNull(psiClass);
  PsiMethod getJavaHomeMethod=psiClass.findMethodsByName("getJavaHome",false)[0];
  assertNotNull(InferredAnnotationsManager.getInstance(myModule.getProject()).findInferredAnnotation(getJavaHomeMethod,AnnotationUtil.NOT_NULL));
}
