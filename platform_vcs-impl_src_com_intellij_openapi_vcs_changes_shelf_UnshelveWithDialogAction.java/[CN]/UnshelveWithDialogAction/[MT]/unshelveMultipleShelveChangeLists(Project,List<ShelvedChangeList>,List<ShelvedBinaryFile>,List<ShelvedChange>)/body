{
  String suggestedName=changeLists.get(0).DESCRIPTION;
  final ChangeListManager changeListManager=ChangeListManager.getInstance(project);
  final ChangeListChooser chooser=new ChangeListChooser(project,changeListManager.getChangeListsCopy(),changeListManager.getDefaultChangeList(),VcsBundle.message("unshelve.changelist.chooser.title"),suggestedName){
    @Nullable @Override protected JComponent createSouthPanel(){
      return addDoNotShowCheckBox(ObjectUtils.assertNotNull(super.createSouthPanel()),createRemoveFilesStrategyCheckbox(project));
    }
  }
;
  if (!chooser.showAndGet())   return;
  final ShelveChangesManager shelveChangesManager=ShelveChangesManager.getInstance(project);
  ProgressManager.getInstance().run(new Task.Backgroundable(project,"Unshelve Changes",true){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      for (      ShelvedChangeList changeList : changeLists) {
        shelveChangesManager.unshelveChangeList(changeList,changes,binaryFiles,chooser.getSelectedList(),true);
      }
    }
  }
);
}
