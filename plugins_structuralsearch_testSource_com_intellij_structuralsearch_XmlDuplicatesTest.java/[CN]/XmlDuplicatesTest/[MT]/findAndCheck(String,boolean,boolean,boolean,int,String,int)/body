{
  final DefaultDuplocatorState xmlState=(DefaultDuplocatorState)DuplocatorUtil.registerAndGetState(XMLLanguage.INSTANCE);
  final DefaultDuplocatorState htmlState=(DefaultDuplocatorState)DuplocatorUtil.registerAndGetState(HTMLLanguage.INSTANCE);
  final boolean xmlOldLits=xmlState.DISTINGUISH_LITERALS;
  final int xmlOldLowerBound=xmlState.LOWER_BOUND;
  final boolean htmlOldLits=htmlState.DISTINGUISH_LITERALS;
  final int htmlOldLowerBound=htmlState.LOWER_BOUND;
  try {
    if ("html".equals(FileUtil.getExtension(fileName))) {
      htmlState.DISTINGUISH_LITERALS=distinguishListerals;
      htmlState.LOWER_BOUND=lowerBound;
    }
 else {
      xmlState.DISTINGUISH_LITERALS=distinguishListerals;
      xmlState.LOWER_BOUND=lowerBound;
    }
    doFindAndCheck(fileName,patternCount,suffix);
  }
  finally {
    xmlState.DISTINGUISH_LITERALS=xmlOldLits;
    xmlState.LOWER_BOUND=xmlOldLowerBound;
    htmlState.DISTINGUISH_LITERALS=htmlOldLits;
    htmlState.LOWER_BOUND=htmlOldLowerBound;
  }
}
