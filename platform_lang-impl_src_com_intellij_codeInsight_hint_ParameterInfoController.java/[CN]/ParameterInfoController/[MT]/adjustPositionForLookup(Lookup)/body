{
  if (!myHint.isVisible() || myEditor.isDisposed()) {
    Disposer.dispose(this);
    return;
  }
  IdeTooltip tooltip=myHint.getCurrentIdeTooltip();
  if (tooltip != null) {
    JRootPane root=myEditor.getComponent().getRootPane();
    if (root != null) {
      Point p=tooltip.getShowingPoint().getPoint(root.getLayeredPane());
      if (lookup.isPositionedAboveCaret()) {
        if (Position.above == tooltip.getPreferredPosition()) {
          myHint.pack();
          myHint.updatePosition(Position.below);
          myHint.updateLocation(p.x,p.y + tooltip.getPositionChangeY());
        }
      }
 else {
        if (Position.below == tooltip.getPreferredPosition()) {
          myHint.pack();
          myHint.updatePosition(Position.above);
          myHint.updateLocation(p.x,p.y - tooltip.getPositionChangeY());
        }
      }
    }
  }
}
