{
  MutableNode parentNode=underdoneNodes.remove(parentCommit);
  if (parentNode == null) {
    parentNode=new MutableNode(branch,parentCommit);
    createUsualEdge(node,parentNode,branch);
    underdoneNodes.put(parentCommit,parentNode);
  }
 else {
    createUsualEdge(node,parentNode,branch);
    int parentRowIndex=getLogIndexOfCommit(parentCommit);
    if (nextRow.getRowIndex() != parentRowIndex) {
      parentNode.setNodeRow(nextRow);
      parentNode.setType(EDGE_NODE);
      nextRow.getInnerNodeList().add(parentNode);
      MutableNode newParentNode=new MutableNode(parentNode.getBranch(),parentCommit);
      createUsualEdge(parentNode,newParentNode,parentNode.getBranch());
      underdoneNodes.put(parentCommit,newParentNode);
    }
 else {
      underdoneNodes.put(parentCommit,parentNode);
    }
  }
}
