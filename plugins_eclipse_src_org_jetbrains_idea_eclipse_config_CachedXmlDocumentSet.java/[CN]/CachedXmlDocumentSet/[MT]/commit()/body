{
  for (  String key : modifiedContent.keySet()) {
    if (hasChanged(key)) {
      Document content=modifiedContent.get(key);
      if (content != null) {
        Writer writer=new OutputStreamWriter(getOrCreateVFile(key).getOutputStream(this),CharsetToolkit.UTF8_CHARSET);
        try {
          EclipseJDOMUtil.output(content,writer,project);
        }
  finally {
          writer.close();
        }
        savedContent.put(key,content);
      }
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      for (      String deleted : deletedContent) {
        VirtualFile file=getFile(deleted);
        if (file != null) {
          try {
            file.delete(this);
          }
 catch (          IOException ignore) {
          }
        }
      }
      deletedContent.clear();
    }
  }
);
}
