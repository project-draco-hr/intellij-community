{
  byte[] binaryContent;
  if (revision instanceof BinaryContentRevision) {
    binaryContent=((BinaryContentRevision)revision).getBinaryContent();
  }
 else {
    String stringContent=revision.getContent();
    binaryContent=stringContent != null ? stringContent.getBytes(charset) : EMPTY_BYTE_ARRAY;
  }
  return binaryContent != null ? binaryContent : EMPTY_BYTE_ARRAY;
}
