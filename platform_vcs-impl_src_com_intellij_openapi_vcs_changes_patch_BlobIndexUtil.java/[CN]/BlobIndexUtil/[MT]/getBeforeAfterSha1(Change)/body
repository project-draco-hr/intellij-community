{
  ContentRevision beforeRevision=change.getBeforeRevision();
  ContentRevision afterRevision=change.getAfterRevision();
  Charset detectCharset=ObjectUtils.chooseNotNull(afterRevision,beforeRevision).getFile().getCharset();
  String before=beforeRevision == null ? NOT_COMMITTED_HASH : getSha1(getContentBytes(beforeRevision,detectCharset));
  String after=afterRevision == null ? NOT_COMMITTED_HASH : getSha1(getContentBytes(afterRevision,detectCharset));
  return new Couple<>(before,after);
}
