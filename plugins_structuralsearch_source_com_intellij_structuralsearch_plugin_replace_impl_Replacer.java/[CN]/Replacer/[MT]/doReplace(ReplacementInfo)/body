{
  final ReplacementInfoImpl replacementInfo=(ReplacementInfoImpl)info;
  final PsiElement element=replacementInfo.matchesPtrList.get(0).getElement();
  if (element == null || !element.isWritable() || !element.isValid())   return null;
  final PsiElement elementParent=element.getParent();
  CommandProcessor.getInstance().executeCommand(project,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          doReplace(element,replacementInfo);
        }
      }
);
      PsiDocumentManager.getInstance(project).commitAllDocuments();
    }
  }
,"ssreplace","test");
  if (!elementParent.isValid() || !elementParent.isWritable()) {
    return null;
  }
  return elementParent;
}
