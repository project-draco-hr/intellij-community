{
  myMovedMembers=ContainerUtil.newHashSet();
  myMembersAfterMove=ContainerUtil.newHashSet();
  for (  MemberInfo info : myMembersToMove) {
    myMovedMembers.add(info.getMember());
  }
  final PsiSubstitutor substitutor=upDownSuperClassSubstitutor();
  for (  MemberInfo info : myMembersToMove) {
    PullUpHelper<MemberInfo> processor=getProcessor(info);
    LOG.assertTrue(processor != null,info.getMember());
    if (!(info.getMember() instanceof PsiClass) || info.getOverrides() == null) {
      processor.setCorrectVisibility(info);
      processor.encodeContextInfo(info);
    }
    processor.move(info,substitutor);
  }
  for (  PsiMember member : myMembersAfterMove) {
    PullUpHelper<MemberInfo> processor=getProcessor(member);
    LOG.assertTrue(processor != null,member);
    processor.postProcessMember(member);
    final JavaRefactoringListenerManager listenerManager=JavaRefactoringListenerManager.getInstance(myProject);
    ((JavaRefactoringListenerManagerImpl)listenerManager).fireMemberMoved(mySourceClass,member);
  }
}
