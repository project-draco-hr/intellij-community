{
  HashMap<Integer,Integer> lineStartOffsets=new HashMap<Integer,Integer>();
  for (  Map.Entry<Integer,Integer> entry : tracer.getMapping().entrySet()) {
    Integer lineNumber=entry.getValue() - startLine;
    Integer curr=lineStartOffsets.get(lineNumber);
    if (curr == null || curr > entry.getKey()) {
      lineStartOffsets.put(lineNumber,entry.getKey());
    }
  }
  String lineSeparator=DecompilerContext.getNewLineSeparator();
  StringBuilder text=code.getOriginalText();
  int pos=text.indexOf(lineSeparator);
  int lineNumber=0;
  while (pos != -1) {
    Integer startOffset=lineStartOffsets.get(lineNumber);
    if (startOffset != null) {
      int number=table.findLineNumber(startOffset);
      if (number >= 0) {
        code.setLineMapping(number,pos);
      }
    }
    pos=text.indexOf(lineSeparator,pos + 1);
    lineNumber++;
  }
}
