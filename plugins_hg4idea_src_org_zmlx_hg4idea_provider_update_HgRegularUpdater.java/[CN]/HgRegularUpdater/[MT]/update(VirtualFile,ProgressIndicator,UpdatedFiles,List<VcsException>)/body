{
  indicator.setText2(HgVcsMessages.message("hg4idea.progress.updatingworkingdir"));
  HgRevisionNumber parentBeforeUpdate=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
  HgUpdateCommand hgUpdateCommand=new HgUpdateCommand(project,repo);
  HgCommandResult updateResult=hgUpdateCommand.execute();
  String warningMessages=ensureSuccess(updateResult).getRawError();
  handlePossibleWarning(warnings,warningMessages);
  HgRevisionNumber parentAfterUpdate=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
  addUpdatedFiles(repo,updatedFiles,parentBeforeUpdate,parentAfterUpdate);
}
