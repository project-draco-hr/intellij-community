{
  if (mergeResult.getExitValue() == 0) {
    try {
      HgRepository hgRepository=HgUtil.getRepositoryForFile(project,repoRoot);
      if (hgRepository == null) {
        LOG.warn("Couldn't find repository info for " + repoRoot.getName());
        return;
      }
      new HgCommitCommand(project,hgRepository,"Automated merge").executeInCurrentThread();
    }
 catch (    HgCommandException e) {
      throw new VcsException(e);
    }
  }
 else {
    reportWarning(exceptions,HgVcsMessages.message("hg4idea.update.warning.merge.conflicts",repoRoot.getPath()));
  }
}
