{
  MultiMap<VcsUser,String> commits=generateHistory("User [company]","user@company.com","Userovich, User","userovich@company.com","User (user)","useruser@company.com");
  StringBuilder builder=new StringBuilder();
  for (  VcsUser user : commits.keySet()) {
    VcsLogUserFilter userFilter=new VcsLogUserFilterImpl(singleton(user.getName() + " <" + user.getEmail()+ ">"),Collections.<VirtualFile,VcsUser>emptyMap(),commits.keySet());
    List<String> actualHashes=getFilteredHashes(userFilter);
    List<String> expected=ContainerUtil.reverse(ContainerUtil.newArrayList(commits.get(user)));
    if (!expected.equals(actualHashes)) {
      builder.append(TestCase.format(user.toString(),commits.get(user),actualHashes)).append("\n");
    }
  }
  assertTrue("Incorrectly filtered log for\n" + builder.toString(),builder.toString().isEmpty());
}
