{
  List<String> names=ContainerUtil.newArrayList();
  for (  Character c : new char[]{'.','^','$','*','+','-','?','(',')','[',']','{','}','|'}) {
    String name="user" + Character.toString(c) + "userovich";
    names.add(name);
    names.add(name + "@company.com");
  }
  MultiMap<VcsUser,String> commits=generateHistory(ArrayUtil.toStringArray(names));
  StringBuilder builder=new StringBuilder();
  for (  VcsUser user : commits.keySet()) {
    VcsLogUserFilter userFilter=new VcsLogUserFilterImpl(singleton(user.getName()),Collections.<VirtualFile,VcsUser>emptyMap(),commits.keySet());
    List<String> actualHashes=getFilteredHashes(userFilter);
    List<String> expected=ContainerUtil.reverse(ContainerUtil.newArrayList(commits.get(user)));
    if (!expected.equals(actualHashes)) {
      builder.append(TestCase.format(user.toString(),commits.get(user),actualHashes)).append("\n");
    }
  }
  assertTrue("Incorrectly filtered log for\n" + builder.toString(),builder.toString().isEmpty());
}
