{
  while (element != null) {
    if (element == stop) {
      return null;
    }
    if (element instanceof PsiModifierListOwner) {
      final PsiModifierListOwner modifierListOwner=(PsiModifierListOwner)element;
      final PsiAnnotation annotation=AnnotationUtil.findAnnotationInHierarchy(modifierListOwner,fqAnnotationNames);
      if (annotation != null) {
        return annotation;
      }
    }
    if (element instanceof PsiClassOwner) {
      final PsiClassOwner classOwner=(PsiClassOwner)element;
      final String packageName=classOwner.getPackageName();
      final PsiPackage aPackage=JavaPsiFacade.getInstance(element.getProject()).findPackage(packageName);
      if (aPackage == null) {
        return null;
      }
      return AnnotationUtil.findAnnotation(aPackage,fqAnnotationNames);
    }
    element=element.getContext();
  }
  return null;
}
