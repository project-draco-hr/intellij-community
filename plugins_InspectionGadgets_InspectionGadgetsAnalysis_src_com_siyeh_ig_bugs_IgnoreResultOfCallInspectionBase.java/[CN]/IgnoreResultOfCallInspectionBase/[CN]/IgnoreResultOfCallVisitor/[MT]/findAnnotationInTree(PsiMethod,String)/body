{
  final PsiAnnotation methodAnnotation=AnnotationUtil.findAnnotationInHierarchy(method,Collections.singleton(fqAnnotationName));
  if (methodAnnotation != null) {
    return methodAnnotation;
  }
  final PsiClass aClass=method.getContainingClass();
  if (aClass == null) {
    return null;
  }
  final PsiAnnotation classAnnotation=AnnotationUtil.findAnnotation(aClass,fqAnnotationName);
  if (classAnnotation != null) {
    return classAnnotation;
  }
  final PsiDirectory directory=aClass.getContainingFile().getContainingDirectory();
  final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
  return AnnotationUtil.findAnnotation(aPackage,fqAnnotationName);
}
