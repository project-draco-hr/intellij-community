{
  if (isSelected || !myUiProperties.isHighlighterEnabled(Factory.ID))   return VcsCommitStyle.DEFAULT;
  VcsShortCommitDetails details=myDataHolder.getMiniDetailsGetter().getCommitDataIfAvailable(commitIndex);
  if (details != null && !(details instanceof LoadingDetails)) {
    VcsLogProvider provider=myDataHolder.getLogProvider(details.getRoot());
    String currentBranch=provider.getCurrentBranch(details.getRoot());
    VcsLogBranchFilter branchFilter=myFilterUi.getFilters().getBranchFilter();
    if (currentBranch != null && (branchFilter == null || !(currentBranch.equals(mySingleFilteredBranch)))) {
      Condition<CommitId> condition=myDataHolder.getContainingBranchesGetter().getContainedInBranchCondition(currentBranch,details.getRoot());
      if (condition.value(new CommitId(details.getId(),details.getRoot()))) {
        return VcsCommitStyleFactory.background(CURRENT_BRANCH_BG);
      }
    }
  }
  return VcsCommitStyle.DEFAULT;
}
