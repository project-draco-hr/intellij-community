{
  myDataHolder=logDataHolder;
  myUiProperties=uiProperties;
  myFilterUi=filterUi;
  ((VcsLogClassicFilterUi)filterUi).getLogUi().addLogListener(new VcsLogListener(){
    @Override public void onChange(    @NotNull VcsLogDataPack dataPack,    boolean refreshHappened){
      VcsLogBranchFilter branchFilter=myFilterUi.getFilters().getBranchFilter();
      mySingleFilteredBranch=branchFilter == null ? null : VcsLogUtil.getSingleFilteredBranch(branchFilter,dataPack.getRefs(),dataPack.getLogProviders().keySet());
    }
  }
);
}
