{
  Project project=event.getRequiredData(CommonDataKeys.PROJECT);
  CommittedChangeList changeList=(CommittedChangeList)event.getRequiredData(VcsDataKeys.CHANGE_LISTS)[0];
  AbstractVcs vcs=assertNotNull(getVcsForChangeList(project,changeList));
  VcsHistoryProviderEx vcsHistoryProvider=assertNotNull((VcsHistoryProviderEx)vcs.getVcsHistoryProvider());
  AnnotationProvider annotationProvider=vcs.getAnnotationProvider();
  Change change=event.getRequiredData(VcsDataKeys.CHANGES)[0];
  FilePath path=assertNotNull(getChangedPath(change));
  VcsRevisionNumber revisionNumber=((VcsRevisionNumberAware)changeList).getRevisionNumber();
  AbstractVcsHelper.getInstance(project).showFileHistory(vcsHistoryProvider,annotationProvider,path,null,vcs,revisionNumber);
}
