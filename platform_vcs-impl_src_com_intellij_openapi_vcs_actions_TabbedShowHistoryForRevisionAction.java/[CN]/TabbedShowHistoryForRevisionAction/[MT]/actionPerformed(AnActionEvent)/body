{
  Project project=event.getRequiredData(CommonDataKeys.PROJECT);
  AbstractVcs vcs=assertNotNull(getVcs(project,event.getData(VcsDataKeys.VCS)));
  VcsHistoryProviderEx vcsHistoryProvider=assertNotNull((VcsHistoryProviderEx)vcs.getVcsHistoryProvider());
  Change change=event.getRequiredData(VcsDataKeys.SELECTED_CHANGES)[0];
  ContentRevision revision=assertNotNull(getContentRevision(change));
  AbstractVcsHelperImpl helper=assertNotNull(getVcsHelper(project));
  helper.showFileHistory(vcsHistoryProvider,revision.getFile(),vcs,revision.getRevisionNumber());
}
