{
  if (!isVisible(context) || !isEnabled(context))   return;
  Project project=context.getProject();
  CommittedChangeList changeList=(CommittedChangeList)context.getSelectedChangeLists()[0];
  AbstractVcs vcs=getVcsForChangeList(project,changeList);
  VcsHistoryProviderEx vcsHistoryProvider=(VcsHistoryProviderEx)vcs.getVcsHistoryProvider();
  AnnotationProvider annotationProvider=vcs.getAnnotationProvider();
  Change change=context.getSelectedChanges()[0];
  FilePath path=getChangedPath(change);
  VcsRevisionNumber revisionNumber=((VcsRevisionNumberAware)changeList).getRevisionNumber();
  AbstractVcsHelper.getInstance(project).showFileHistory(vcsHistoryProvider,annotationProvider,path,null,vcs,revisionNumber);
}
