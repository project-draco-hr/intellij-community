{
  Project project=event.getProject();
  if (project == null)   return false;
  ChangeList[] changeLists=event.getData(VcsDataKeys.CHANGE_LISTS);
  if (changeLists == null || changeLists.length != 1)   return false;
  ChangeList changeList=changeLists[0];
  if (!(changeList instanceof CommittedChangeList) || !(changeList instanceof VcsRevisionNumberAware))   return false;
  AbstractVcs vcs=getVcsForChangeList(project,changeList);
  if (vcs == null)   return false;
  VcsHistoryProvider vcsHistoryProvider=vcs.getVcsHistoryProvider();
  if (!(vcsHistoryProvider instanceof VcsHistoryProviderEx))   return false;
  return true;
}
