{
  List<RepoPackage> packages=new ArrayList<RepoPackage>();
  final Collection<String> packageNames;
  try {
    packageNames=PyPIPackageUtil.INSTANCE.getPackageNames();
  }
 catch (  IOException e) {
    throw new IOException("Could not reach URL " + e.getMessage() + ". Please, check your internet connection.");
  }
  final boolean customRepoConfigured=!PyPackageService.getInstance().additionalRepositories.isEmpty();
  String url=customRepoConfigured ? PyPIPackageUtil.PYPI_URL : "";
  for (  String name : packageNames) {
    packages.add(new RepoPackage(name,url));
  }
  packages.addAll(PyPIPackageUtil.INSTANCE.getAdditionalPackageNames());
  return packages;
}
