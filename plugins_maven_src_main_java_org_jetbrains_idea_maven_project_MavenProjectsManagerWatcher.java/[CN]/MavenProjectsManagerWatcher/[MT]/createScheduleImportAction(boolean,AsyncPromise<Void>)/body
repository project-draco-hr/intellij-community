{
  return new Runnable(){
    @Override public void run(){
      if (myProject.isDisposed()) {
        promise.setError("Project disposed");
        return;
      }
      if (forceImportAndResolve || myManager.getImportingSettings().isImportAutomatically()) {
        myManager.scheduleImportAndResolve().done(new Consumer<List<Module>>(){
          @Override public void consume(          List<Module> modules){
            promise.setResult(null);
          }
        }
);
      }
 else {
        promise.setResult(null);
      }
    }
  }
;
}
