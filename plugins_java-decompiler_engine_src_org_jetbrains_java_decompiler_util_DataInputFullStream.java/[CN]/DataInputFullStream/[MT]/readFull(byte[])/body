{
  int length=b.length;
  byte[] temp=new byte[length];
  int pos=0;
  int bytes_read;
  while (true) {
    bytes_read=read(temp,0,length - pos);
    if (bytes_read == -1) {
      return -1;
    }
    System.arraycopy(temp,0,b,pos,bytes_read);
    pos+=bytes_read;
    if (pos == length) {
      break;
    }
  }
  return length;
}
