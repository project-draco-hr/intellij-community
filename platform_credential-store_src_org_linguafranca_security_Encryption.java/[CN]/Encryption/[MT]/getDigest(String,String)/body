{
  if (string == null || string.length() == 0)   throw new IllegalArgumentException("String cannot be null or empty");
  if (encoding == null || encoding.length() == 0)   throw new IllegalArgumentException("Encoding cannot be null or empty");
  MessageDigest md=getMessageDigestInstance();
  try {
    byte[] bytes=string.getBytes(encoding);
    md.update(bytes,0,bytes.length);
    return md.digest();
  }
 catch (  UnsupportedEncodingException e) {
    throw new IllegalStateException(encoding + " is not supported");
  }
}
