{
  g2.setFont(getFont());
  g2.setStroke(new BasicStroke(1.5f));
  g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  FontMetrics fontMetrics=g2.getFontMetrics();
  int width=fontMetrics.stringWidth(text) + 2 * TEXT_PADDING_X + textPadding;
  int height=fontMetrics.getHeight() + TOP_TEXT_PADDING + BOTTOM_TEXT_PADDING;
  g2.setColor(color);
  if (mySquare) {
    g2.fillRect(paddingX,paddingY,width,height);
  }
 else {
    g2.fill(new RoundRectangle2D.Double(paddingX,paddingY,width,height,LABEL_ARC,LABEL_ARC));
  }
  g2.setColor(JBColor.BLACK);
  int x=paddingX + textPadding + TEXT_PADDING_X;
  int y=paddingY + fontMetrics.getHeight() / 2 + TOP_TEXT_PADDING + (fontMetrics.getAscent() - fontMetrics.getDescent()) / 2;
  g2.drawString(text,x,y);
  return new Rectangle(x,y,width,height);
}
