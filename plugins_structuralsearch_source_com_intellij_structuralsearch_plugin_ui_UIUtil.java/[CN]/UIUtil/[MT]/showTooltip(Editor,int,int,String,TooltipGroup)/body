{
  Rectangle visibleArea=editor.getScrollingModel().getVisibleArea();
  Point top=editor.logicalPositionToXY(editor.offsetToLogicalPosition(start));
  final int documentLength=editor.getDocument().getTextLength();
  if (end >= documentLength)   end=documentLength;
  Point bottom=editor.logicalPositionToXY(editor.offsetToLogicalPosition(end));
  Point bestPoint=new Point(top.x,bottom.y + editor.getLineHeight());
  if (!visibleArea.contains(bestPoint)) {
    int defaultOffset=editor.logicalPositionToOffset(editor.xyToLogicalPosition(new Point(0,0)));
    bestPoint=editor.logicalPositionToXY(editor.offsetToLogicalPosition(defaultOffset));
  }
  Point p=SwingUtilities.convertPoint(editor.getContentComponent(),bestPoint,editor.getComponent().getRootPane().getLayeredPane());
  HintManager.getInstance().getTooltipController().showTooltip(editor,p,text,false,group);
}
