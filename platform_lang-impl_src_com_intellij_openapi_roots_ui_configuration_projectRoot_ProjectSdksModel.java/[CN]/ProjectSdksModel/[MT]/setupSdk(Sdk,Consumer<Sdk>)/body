{
  String home=newJdk.getHomePath();
  SdkType sdkType=(SdkType)newJdk.getSdkType();
  if (!sdkType.setupSdkPaths(newJdk,this))   return;
  if (newJdk.getVersionString() == null) {
    String message=ProjectBundle.message("sdk.java.corrupt.error",home);
    Messages.showMessageDialog(message,ProjectBundle.message("sdk.java.corrupt.title"),Messages.getErrorIcon());
  }
  doAdd(newJdk,callback);
}
