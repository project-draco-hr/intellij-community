{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final ArrayList<Sdk> itemsInTable=new ArrayList<Sdk>();
      final ProjectJdkTable jdkTable=ProjectJdkTable.getInstance();
      final Sdk[] allFromTable=jdkTable.getAllJdks();
      for (      final Sdk tableItem : allFromTable) {
        if (myProjectSdks.containsKey(tableItem)) {
          itemsInTable.add(tableItem);
        }
 else {
          jdkTable.removeJdk(tableItem);
        }
      }
      for (      Sdk originalJdk : itemsInTable) {
        final Sdk modifiedJdk=myProjectSdks.get(originalJdk);
        LOG.assertTrue(modifiedJdk != null);
        LOG.assertTrue(originalJdk != modifiedJdk);
        jdkTable.updateJdk(originalJdk,modifiedJdk);
      }
      final Sdk[] allJdks=jdkTable.getAllJdks();
      for (      final Sdk projectJdk : myProjectSdks.keySet()) {
        LOG.assertTrue(projectJdk != null);
        if (ArrayUtilRt.find(allJdks,projectJdk) == -1) {
          jdkTable.addJdk(projectJdk);
          jdkTable.updateJdk(projectJdk,myProjectSdks.get(projectJdk));
        }
      }
    }
  }
);
}
