{
  if (command instanceof SuspendContextCommand) {
    SuspendContextCommand suspendContextCommand=(SuspendContextCommand)command;
    schedule(new SuspendContextCommandImpl((SuspendContextImpl)suspendContextCommand.getSuspendContext()){
      @Override public void contextAction() throws Exception {
        command.action();
      }
      @Override protected void commandCancelled(){
        command.commandCancelled();
      }
    }
);
  }
 else {
    schedule(new DebuggerCommandImpl(){
      @Override protected void action() throws Exception {
        command.action();
      }
      @Override protected void commandCancelled(){
        command.commandCancelled();
      }
    }
);
  }
}
