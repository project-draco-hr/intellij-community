{
  assertIsManagerThread();
  startNewWorkerThread();
  try {
    process.run();
  }
  finally {
    final WorkerThreadRequest request=getCurrentThreadRequest();
    if (LOG.isDebugEnabled()) {
      LOG.debug("Switching back to " + request);
    }
    super.invokeAndWait(new DebuggerCommandImpl(){
      @Override protected void action() throws Exception {
        switchToRequest(request);
      }
      @Override protected void commandCancelled(){
        if (LOG.isDebugEnabled()) {
          LOG.debug("Event queue was closed, killing request");
        }
        request.requestStop();
      }
    }
);
  }
}
