{
  final PsiElement psiElement=element.getPointer().getContainingFile();
  if (psiElement != null) {
    if (myContext != null) {
      final Tools tools=myContext.getTools().get(getShortName());
      if (tools != null) {
        for (        ScopeToolState state : tools.getTools()) {
          InspectionToolWrapper toolWrapper=(InspectionToolWrapper)state.getTool();
          if (toolWrapper == this) {
            return myContext.getCurrentProfile().getErrorLevel(HighlightDisplayKey.find(getShortName()),psiElement).getSeverity();
          }
        }
      }
      final InspectionProfile profile=InspectionProjectProfileManager.getInstance(getContext().getProject()).getInspectionProfile();
      final HighlightDisplayLevel level=profile.getErrorLevel(HighlightDisplayKey.find(getShortName()),psiElement);
      return level.getSeverity();
    }
  }
  return null;
}
