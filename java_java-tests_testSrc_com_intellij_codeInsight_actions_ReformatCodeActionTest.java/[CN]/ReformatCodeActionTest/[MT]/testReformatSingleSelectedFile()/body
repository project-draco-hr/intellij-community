{
  List<PsiFile> files=createTestFiles(getTempRootDirectory(),classNames);
  PsiFile fileToReformat=files.get(0);
  List<PsiFile> shouldNotBeFormatted=files.subList(1,files.size());
  injectMockDialogFlags(new MockReformatFileSettings().setOptimizeImports(true));
  performReformatActionOnSelectedFile(fileToReformat);
  checkFormationAndImportsOptimizationFor(Arrays.asList(fileToReformat));
  checkNoProcessingWasPerformedOn(shouldNotBeFormatted);
}
