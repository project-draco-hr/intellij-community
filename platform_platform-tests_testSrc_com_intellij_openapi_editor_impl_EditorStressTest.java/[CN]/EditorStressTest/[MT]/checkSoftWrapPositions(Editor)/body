{
  Document document=editor.getDocument();
  FoldingModel foldingModel=editor.getFoldingModel();
  List<? extends SoftWrap> softWraps=((SoftWrapModelEx)editor.getSoftWrapModel()).getRegisteredSoftWraps();
  int lastSoftWrapOffset=-1;
  for (  SoftWrap wrap : softWraps) {
    int softWrapOffset=wrap.getStart();
    assertTrue("Soft wraps are not ordered",softWrapOffset > lastSoftWrapOffset);
    FoldRegion foldRegion=foldingModel.getCollapsedRegionAtOffset(softWrapOffset);
    assertTrue("Soft wrap is inside fold region",foldRegion == null || foldRegion.getStartOffset() == softWrapOffset);
    assertFalse("Soft wrap before line break",softWrapOffset == DocumentUtil.getLineEndOffset(softWrapOffset,document) && foldRegion == null);
    assertFalse("Soft wrap after line break",softWrapOffset == DocumentUtil.getLineStartOffset(softWrapOffset,document) && !foldingModel.isOffsetCollapsed(softWrapOffset - 1));
    lastSoftWrapOffset=softWrapOffset;
  }
}
