{
  Document document=editor.getDocument();
  int textLength=document.getTextLength();
  if (textLength <= 0)   return;
  int offset=random.nextInt(textLength);
  int targetOffset=random.nextInt(textLength + 1);
  if (targetOffset < offset || targetOffset > offset + 1) {
    new WriteCommandAction.Simple(getProject()){
      @Override protected void run() throws Throwable {
        ((DocumentEx)document).moveText(offset,offset + 1,targetOffset);
      }
    }
.execute().throwException();
  }
}
