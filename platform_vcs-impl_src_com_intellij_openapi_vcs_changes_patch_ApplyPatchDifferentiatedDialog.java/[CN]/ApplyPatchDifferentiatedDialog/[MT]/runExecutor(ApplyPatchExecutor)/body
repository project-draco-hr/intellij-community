{
  final Collection<FilePatchInProgress> included=getIncluded();
  if (included.isEmpty())   return;
  final MultiMap<VirtualFile,FilePatchInProgress> patchGroups=new MultiMap<VirtualFile,FilePatchInProgress>();
  for (  FilePatchInProgress patchInProgress : included) {
    patchGroups.putValue(patchInProgress.getBase(),patchInProgress);
  }
  final LocalChangeList selected=getSelectedChangeList();
  FilePresentation presentation=myRecentPathFileChange.get();
  VirtualFile vf=presentation != null ? presentation.getVf() : null;
  executor.apply(patchGroups,selected,vf == null ? null : vf.getName(),myReader == null ? null : myReader.getAdditionalInfo(ApplyPatchDefaultExecutor.pathsFromGroups(patchGroups)));
}
