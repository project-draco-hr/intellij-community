{
  final PanelWithActions instance=new PanelWithActions();
  final LayoutManager layout=new BoxLayout(instance,BoxLayout.LINE_AXIS);
  instance.setLayout(layout);
  final List<AnAction> actionList=new ArrayList<>(Arrays.asList(customActions));
  final DefaultActionGroup toolbarActions=new DefaultActionGroup();
  actionList.add(new MyCloseAction(closeListeners));
  toolbarActions.addAll(actionList);
  final ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.EDITOR_TOOLBAR,toolbarActions,false);
  toolbar.setTargetComponent(dataComponent);
  toolbar.updateActionsImmediately();
  final JComponent toolbarComponent=toolbar.getComponent();
  toolbarComponent.setMaximumSize(toolbarComponent.getPreferredSize());
  toolbarComponent.setAlignmentY(0);
  instance.add(toolbarComponent);
  instance.add(dataComponent);
  if (actionListenerComponent != null) {
    AbstractConsoleRunnerWithHistory.registerActionShortcuts(actionList,actionListenerComponent);
  }
  return instance;
}
