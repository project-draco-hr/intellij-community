{
  final PsiElement parent=myPlaceToInferContext.getParent();
  if (parent instanceof GrReturnStatement || exitsContains(myPlaceToInferContext)) {
    final GrMethod method=PsiTreeUtil.getParentOfType(parent,GrMethod.class,true,GrClosableBlock.class);
    if (method != null) {
      return method.getReturnType();
    }
  }
 else   if (parent instanceof GrAssignmentExpression && myPlaceToInferContext.equals(((GrAssignmentExpression)parent).getRValue())) {
    GrExpression lValue=((GrAssignmentExpression)parent).getLValue();
    if (lValue instanceof GrIndexProperty) {
      return null;
    }
 else {
      return lValue.getType();
    }
  }
 else   if (parent instanceof GrVariable) {
    return ((GrVariable)parent).getDeclaredType();
  }
  return null;
}
