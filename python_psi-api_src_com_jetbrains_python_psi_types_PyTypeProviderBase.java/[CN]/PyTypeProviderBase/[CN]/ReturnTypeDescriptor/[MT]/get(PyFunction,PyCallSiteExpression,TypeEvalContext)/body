{
  PyClass containingClass=function.getContainingClass();
  if (containingClass != null) {
    final ReturnTypeCallback typeCallback=myStringToReturnTypeMap.get(containingClass.getQualifiedName());
    if (typeCallback != null) {
      final PyExpression callee=callSite instanceof PyCallExpression ? ((PyCallExpression)callSite).getCallee() : null;
      final PyExpression qualifier=callee instanceof PyQualifiedExpression ? ((PyQualifiedExpression)callee).getQualifier() : null;
      PyType qualifierType=qualifier != null ? context.getType(qualifier) : null;
      return typeCallback.getType(callSite,qualifierType,context);
    }
  }
  return null;
}
