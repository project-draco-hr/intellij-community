{
  command.redirectErrorStream(true);
  final Process process=command.start();
  Thread thread=new Thread(new Runnable(){
    @Override public void run(){
      try {
        final BufferedReader reader=new BufferedReader(new InputStreamReader(process.getInputStream()));
        try {
          String line;
          while ((line=reader.readLine()) != null) {
            System.out.println(line);
          }
        }
  finally {
          reader.close();
        }
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
,"io test");
  thread.start();
  int ret=process.waitFor();
  thread.join();
  return ret;
}
