{
  final String testName=getTestName(false);
  configureByFile("/refactoring/extractMethodObject4Debugger/" + testName + ".java");
  int startOffset=getEditor().getSelectionModel().getSelectionStart();
  int endOffset=getEditor().getSelectionModel().getSelectionEnd();
  PsiElement[] elements=CodeInsightUtil.findStatementsInRange(getFile(),startOffset,endOffset);
  assertTrue(elements.length > 0);
  final ExtractLightMethodObjectHandler.ExtractedData extractedData=ExtractLightMethodObjectHandler.extractLightMethodObject(getProject(),getEditor(),getFile(),elements,"test");
  assertNotNull(extractedData);
  assertEquals(expectedCallSite,extractedData.getGeneratedCallText());
  final PsiClass innerClass=extractedData.getGeneratedInnerClass();
  assertEquals(expectedClass,innerClass.getText());
}
