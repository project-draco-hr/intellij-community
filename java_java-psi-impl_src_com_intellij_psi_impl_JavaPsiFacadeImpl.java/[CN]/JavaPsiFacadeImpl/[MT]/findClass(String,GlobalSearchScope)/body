{
  ProgressIndicatorProvider.checkCanceled();
  Map<GlobalSearchScope,PsiClass> map=myClassCache.get(qualifiedName);
  if (map == null) {
    map=ContainerUtil.createConcurrentWeakKeyWeakValueMap();
    map=ConcurrencyUtil.cacheOrGet(myClassCache,qualifiedName,map);
  }
  PsiClass result=map.get(scope);
  if (result == null) {
    result=doFindClass(qualifiedName,scope);
    if (result != null) {
      map.put(scope,result);
    }
  }
  return result;
}
