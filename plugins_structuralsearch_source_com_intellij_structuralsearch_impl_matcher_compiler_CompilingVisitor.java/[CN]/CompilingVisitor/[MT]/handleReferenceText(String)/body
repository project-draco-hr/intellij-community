{
  if (!context.findMatchingFiles)   return;
  if (refname == null)   return;
  if (context.pattern.isTypedVar(refname)) {
    SubstitutionHandler handler=(SubstitutionHandler)context.pattern.getHandler(refname);
    RegExpPredicate predicate=getSimpleRegExpPredicate(handler);
    if (IsNotSuitablePredicate(predicate,handler)) {
      return;
    }
    refname=predicate.getRegExp();
    if (handler.isStrictSubtype() || handler.isSubtype()) {
      List classes=buildDescendants(refname,handler.isSubtype());
      for (Iterator i=classes.iterator(); i.hasNext(); ) {
        final PsiClass clazz=(PsiClass)i.next();
        String text;
        if (clazz instanceof PsiAnonymousClass) {
          text=((PsiAnonymousClass)clazz).getBaseClassReference().getReferenceName();
        }
 else {
          text=clazz.getName();
        }
        addFilesToSearchForGivenWord(text,false);
      }
      if (classes.size() > 0) {
        endTransaction();
      }
      return;
    }
  }
  addFilesToSearchForGivenWord(refname,true);
}
