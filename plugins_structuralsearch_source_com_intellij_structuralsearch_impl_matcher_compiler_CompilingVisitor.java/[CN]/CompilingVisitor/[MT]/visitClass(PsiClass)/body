{
  super.visitClass(psiClass);
  final Handler handler=context.pattern.getHandler(psiClass);
  if (needsSupers(psiClass,handler)) {
    context.pattern.setRequestsSuperInners(true);
  }
  setFilter(handler,ClassFilter.getInstance());
  for (PsiElement element=psiClass.getFirstChild(); element != null; element=element.getNextSibling()) {
    if (element instanceof PsiTypeElement && element.getNextSibling() instanceof PsiErrorElement) {
      psiClass.putUserData(CompiledPattern.ALL_CLASS_CONTENT_VAR_KEY,element);
    }
  }
}
