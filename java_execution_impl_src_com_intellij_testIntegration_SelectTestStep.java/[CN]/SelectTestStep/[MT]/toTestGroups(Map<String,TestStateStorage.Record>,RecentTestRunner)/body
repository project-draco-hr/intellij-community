{
  Set<String> failedTests=ContainerUtil.newHashSet();
  Set<String> passedSuites=ContainerUtil.newHashSet();
  Set<String> otherSuites=ContainerUtil.newHashSet();
  for (  Map.Entry<String,TestStateStorage.Record> item : records.entrySet()) {
    String url=item.getKey();
    TestStateInfo.Magnitude magnitude=getMagnitude(item.getValue().magnitude);
    if (magnitude == null)     continue;
switch (magnitude) {
case COMPLETE_INDEX:
      if (runner.isSuite(url)) {
        passedSuites.add(url);
      }
    break;
case PASSED_INDEX:
  if (runner.isSuite(url)) {
    passedSuites.add(url);
  }
break;
case ERROR_INDEX:
failedTests.add(url);
break;
default :
otherSuites.add(url);
break;
}
}
return new TestGroup(failedTests,passedSuites,otherSuites);
}
