{
  Set<String> failedTests=ContainerUtil.newHashSet();
  Set<String> passedSuites=ContainerUtil.newHashSet();
  Set<String> otherSuites=ContainerUtil.newHashSet();
  List<TestInfo> infos=getTestInfos(records.entrySet(),runner);
  for (  TestInfo info : infos) {
    String url=info.url;
    TestStateInfo.Magnitude magnitude=info.magnitude;
    if (magnitude == null)     continue;
switch (magnitude) {
case COMPLETE_INDEX:
      if (info.isSuite) {
        passedSuites.add(url);
      }
    break;
case PASSED_INDEX:
  if (info.isSuite) {
    passedSuites.add(url);
  }
break;
case ERROR_INDEX:
failedTests.add(url);
break;
default :
otherSuites.add(url);
break;
}
}
return new TestGroup(failedTests,passedSuites,otherSuites);
}
