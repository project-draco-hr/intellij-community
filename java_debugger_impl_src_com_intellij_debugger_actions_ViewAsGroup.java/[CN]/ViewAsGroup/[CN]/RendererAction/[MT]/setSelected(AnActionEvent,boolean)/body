{
  final DebuggerContextImpl debuggerContext=DebuggerAction.getDebuggerContext(e.getDataContext());
  final XValueNodeImpl node=XDebuggerTreeActionBase.getSelectedNode(e.getDataContext());
  LOG.assertTrue(debuggerContext != null && node != null);
  debuggerContext.getDebugProcess().getManagerThread().schedule(new DebuggerContextCommandImpl(debuggerContext){
    public void threadAction(){
      XValue container=node.getValueContainer();
      if (container instanceof JavaValue) {
        final ValueDescriptorImpl valueDescriptor=(ValueDescriptorImpl)((JavaValue)container).getDescriptor();
        if (state) {
          valueDescriptor.setRenderer(myNodeRenderer);
          valueDescriptor.updateRepresentation(debuggerContext.createEvaluationContext(),DescriptorLabelListener.DUMMY_LISTENER);
          container.computePresentation(node,XValuePlace.TREE);
        }
      }
    }
  }
);
}
