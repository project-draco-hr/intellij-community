{
  File dotIdeaFolderPath=new File(projectPath,Project.DIRECTORY_STORE_FOLDER);
  if (dotIdeaFolderPath.isDirectory()) {
    File modulesXmlFilePath=new File(dotIdeaFolderPath,"modules.xml");
    if (modulesXmlFilePath.isFile()) {
      SAXBuilder saxBuilder=new SAXBuilder();
      try {
        Document document=saxBuilder.build(modulesXmlFilePath);
        XPath xpath=XPath.newInstance("//*[@fileurl]");
        java.util.List<Element> modules=xpath.selectNodes(document);
        int urlPrefixSize="file://$PROJECT_DIR$/".length();
        for (        Element module : modules) {
          String fileUrl=module.getAttributeValue("fileurl");
          if (!StringUtil.isEmpty(fileUrl)) {
            String relativePath=toSystemDependentName(fileUrl.substring(urlPrefixSize));
            File imlFilePath=new File(projectPath,relativePath);
            if (imlFilePath.isFile()) {
              delete(imlFilePath);
            }
            File buildFilePath=new File(imlFilePath.getParentFile(),"build");
            if (buildFilePath.isDirectory()) {
              delete(buildFilePath);
            }
          }
        }
      }
 catch (      Throwable ignored) {
      }
    }
    delete(dotIdeaFolderPath);
  }
}
