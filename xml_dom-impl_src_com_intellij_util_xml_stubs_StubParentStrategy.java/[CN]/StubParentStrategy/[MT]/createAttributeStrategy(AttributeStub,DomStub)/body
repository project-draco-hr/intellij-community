{
  if (stub == null) {
    return new Empty(parent);
  }
 else {
    return new StubParentStrategy(stub){
      @Override public XmlElement getXmlElement(){
        DomInvocationHandler parentHandler=getParentHandler();
        if (parentHandler == null) {
          LOG.error("no parent handler for " + this);
          return null;
        }
        XmlTag tag=parentHandler.getXmlTag();
        if (tag == null) {
          LOG.error("can't find tag for " + parentHandler + "\n"+ "parent stub: "+ myStub.getParentStub()+ "\n"+ "parent's children: "+ myStub.getParentStub().getChildrenStubs());
          return null;
        }
        return tag.getAttribute(myStub.getName());
      }
    }
;
  }
}
