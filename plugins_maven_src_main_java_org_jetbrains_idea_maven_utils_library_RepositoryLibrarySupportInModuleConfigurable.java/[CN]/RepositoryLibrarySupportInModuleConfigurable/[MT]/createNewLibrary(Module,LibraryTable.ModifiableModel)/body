{
  final LibraryEx library=(LibraryEx)modifiableModel.createLibrary(LibraryEditingUtil.suggestNewLibraryName(modifiableModel,RepositoryLibraryType.getInstance().getDescription(editor.getProperties())),RepositoryLibraryType.REPOSITORY_LIBRARY_KIND);
  RepositoryLibraryProperties libraryProperties=(RepositoryLibraryProperties)library.getProperties();
  libraryProperties.setMavenId(editor.getProperties().getMavenId());
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      modifiableModel.commit();
    }
  }
);
  Task task=new Task.Backgroundable(project,"Maven",false){
    public void run(    @NotNull ProgressIndicator indicator){
      RepositoryUtils.loadDependencies(indicator,module.getProject(),library,editor.downloadSources(),editor.downloadJavaDocs());
    }
  }
;
  ProgressManager.getInstance().run(task);
  return library;
}
