{
  final PsiClass aClass=field.getContainingClass();
  if (aClass == null) {
    return;
  }
  final String fieldName=field.getName();
  if (HardcodedMethodConstants.SERIAL_VERSION_UID.equals(fieldName)) {
    return;
  }
  boolean reportStaticsOnly=aClass.hasModifierProperty(PsiModifier.STATIC);
  PsiClass ancestorClass=ClassUtils.getContainingClass(aClass);
  while (ancestorClass != null) {
    final PsiField ancestorField=ancestorClass.findFieldByName(fieldName,false);
    if (ancestorField != null) {
      if (!m_ignoreInvisibleFields || !reportStaticsOnly || ancestorField.hasModifierProperty(PsiModifier.STATIC)) {
        registerFieldError(field);
      }
    }
    if (ancestorClass.hasModifierProperty(PsiModifier.STATIC)) {
      reportStaticsOnly=true;
    }
    ancestorClass=ClassUtils.getContainingClass(ancestorClass);
  }
}
