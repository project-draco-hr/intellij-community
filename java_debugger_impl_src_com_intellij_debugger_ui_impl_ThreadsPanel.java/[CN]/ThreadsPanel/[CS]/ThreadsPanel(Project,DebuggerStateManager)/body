{
  super(project,stateManager);
  final Disposable disposable=DebuggerAction.installEditAction(getThreadsTree(),DebuggerActions.EDIT_FRAME_SOURCE);
  registerDisposable(disposable);
  getThreadsTree().addKeyListener(new KeyAdapter(){
    @Override public void keyPressed(    KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_ENTER && getThreadsTree().getSelectionCount() == 1) {
        DebuggerTreeNodeImpl node=(DebuggerTreeNodeImpl)getThreadsTree().getLastSelectedPathComponent();
        if (node != null) {
          NodeDescriptorImpl descriptor=node.getDescriptor();
          if (descriptor instanceof StackFrameDescriptorImpl) {
            selectFrame(node);
          }
        }
      }
    }
  }
);
  add(ScrollPaneFactory.createScrollPane(getThreadsTree()),BorderLayout.CENTER);
  stateManager.addListener(new DebuggerContextListener(){
    @Override public void changeEvent(    DebuggerContextImpl newContext,    DebuggerSession.Event event){
      if (DebuggerSession.Event.ATTACHED == event || DebuggerSession.Event.RESUME == event) {
        startLabelsUpdate();
      }
 else       if (DebuggerSession.Event.PAUSE == event || DebuggerSession.Event.DETACHED == event || DebuggerSession.Event.DISPOSE == event) {
        myUpdateLabelsAlarm.cancelAllRequests();
      }
      if (DebuggerSession.Event.DETACHED == event || DebuggerSession.Event.DISPOSE == event) {
        stateManager.removeListener(this);
      }
    }
  }
);
  startLabelsUpdate();
}
