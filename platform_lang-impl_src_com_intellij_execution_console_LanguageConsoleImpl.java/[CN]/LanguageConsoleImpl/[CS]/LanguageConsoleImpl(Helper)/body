{
  super(helper.project,GlobalSearchScope.allScope(helper.project),true,true);
  myHelper=helper;
  EditorFactory editorFactory=EditorFactory.getInstance();
  myEditorDocument=helper.getDocument();
  myConsoleEditor=(EditorEx)editorFactory.createEditor(myEditorDocument,getProject());
  myConsoleEditor.getScrollPane().getHorizontalScrollBar().setEnabled(false);
  myConsoleEditor.addFocusListener(myFocusListener);
  myCurrentEditor=myConsoleEditor;
  Document historyDocument=((EditorFactoryImpl)editorFactory).createDocument(true);
  UndoUtil.disableUndoFor(historyDocument);
  myHistoryViewer=(EditorEx)editorFactory.createViewer(historyDocument,getProject());
  myScrollBar.setOpaque(false);
  myScrollBar.setModel(new MyModel(myScrollBar,myHistoryViewer,myConsoleEditor));
  myScrollBar.putClientProperty(Alignment.class,Alignment.BOTTOM);
  myBusConnection=getProject().getMessageBus().connect();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      installEditorFactoryListener();
    }
  }
,getProject().getDisposed());
}
