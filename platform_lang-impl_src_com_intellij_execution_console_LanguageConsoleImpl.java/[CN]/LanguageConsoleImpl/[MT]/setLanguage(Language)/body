{
  if (!(myVirtualFile instanceof LightVirtualFile)) {
    throw new UnsupportedOperationException();
  }
  LightVirtualFile virtualFile=(LightVirtualFile)myVirtualFile;
  virtualFile.setLanguage(language);
  virtualFile.setContent(myEditorDocument,myEditorDocument.getText(),false);
  FileContentUtil.reparseFiles(myProject,Collections.<VirtualFile>singletonList(virtualFile),false);
  myFile=createFile(myProject,virtualFile);
}
