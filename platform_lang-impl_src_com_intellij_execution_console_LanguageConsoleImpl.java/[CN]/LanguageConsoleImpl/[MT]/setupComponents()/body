{
  setupEditorDefault(myConsoleEditor);
  setupEditorDefault(myHistoryViewer);
  myHistoryViewer.getComponent().setMinimumSize(JBUI.emptySize());
  myHistoryViewer.getComponent().setPreferredSize(JBUI.emptySize());
  myHistoryViewer.setCaretEnabled(false);
  myConsoleEditor.addEditorMouseListener(EditorActionUtil.createEditorPopupHandler(IdeActions.GROUP_CONSOLE_EDITOR_POPUP));
  myConsoleEditor.setHighlighter(EditorHighlighterFactory.getInstance().createEditorHighlighter(myVirtualFile,myConsoleEditor.getColorsScheme(),myProject));
  myConsoleEditor.getScrollPane().getHorizontalScrollBar().setModel(myHistoryViewer.getScrollPane().getHorizontalScrollBar().getModel());
  setHistoryScrollBarVisible(false);
  myHistoryViewer.getContentComponent().addKeyListener(new KeyAdapter(){
    @Override public void keyTyped(    KeyEvent event){
      if (isConsoleEditorEnabled() && UIUtil.isReallyTypedEvent(event)) {
        myConsoleEditor.getContentComponent().requestFocus();
        myConsoleEditor.processKeyTyped(event);
      }
    }
  }
);
  EmptyAction.registerActionShortcuts(myHistoryViewer.getComponent(),myConsoleEditor.getComponent());
}
