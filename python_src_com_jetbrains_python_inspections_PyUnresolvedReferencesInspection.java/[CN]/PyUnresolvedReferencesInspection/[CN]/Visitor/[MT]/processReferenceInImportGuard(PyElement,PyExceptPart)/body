{
  final PyImportElement importElement=PsiTreeUtil.getParentOfType(node,PyImportElement.class);
  if (importElement != null) {
    Collection<PsiElement> allWrites=ScopeUtil.getReadWriteElements(importElement.getVisibleName(),ScopeUtil.getScopeOwner(importElement),false,true);
    Collection<PsiElement> writesInsideGuard=new ArrayList<PsiElement>();
    for (    PsiElement write : allWrites) {
      if (PsiTreeUtil.isAncestor(guard,write,false)) {
        writesInsideGuard.add(write);
      }
    }
    if (writesInsideGuard.isEmpty()) {
      final PyTargetExpression asElement=importElement.getAsNameElement();
      final PyElement toHighlight=asElement != null ? asElement : node;
      registerProblem(toHighlight,PyBundle.message("INSP.try.except.import.error",importElement.getVisibleName()),ProblemHighlightType.LIKE_UNKNOWN_SYMBOL,null);
    }
  }
}
