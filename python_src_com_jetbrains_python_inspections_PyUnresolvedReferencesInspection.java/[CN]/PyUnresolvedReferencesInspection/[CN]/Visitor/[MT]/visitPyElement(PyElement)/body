{
  super.visitPyElement(node);
  final PsiFile file=node.getContainingFile();
  if (file instanceof CythonFile && ((CythonFile)file).isIncludeFile()) {
    return;
  }
  final InjectedLanguageManager injectedLanguageManager=InjectedLanguageManager.getInstance(node.getProject());
  if (injectedLanguageManager.isInjectedFragment(file)) {
    final PsiLanguageInjectionHost host=injectedLanguageManager.getInjectionHost(node);
    processInjection(host);
  }
  if (node instanceof PyReferenceOwner) {
    final PyResolveContext resolveContext=PyResolveContext.noImplicits().withTypeEvalContext(myTypeEvalContext);
    processReference(node,((PyReferenceOwner)node).getReference(resolveContext));
  }
 else {
    if (node instanceof PsiLanguageInjectionHost) {
      processInjection((PsiLanguageInjectionHost)node);
    }
    for (    final PsiReference reference : node.getReferences()) {
      processReference(node,reference);
    }
  }
}
