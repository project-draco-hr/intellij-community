{
  super.visitPyElement(node);
  for (  final PsiReference reference : node.getReferences()) {
    if (reference.isSoft())     continue;
    HighlightSeverity severity=HighlightSeverity.ERROR;
    if (reference instanceof PsiReferenceEx) {
      severity=((PsiReferenceEx)reference).getUnresolvedHighlightSeverity();
      if (severity == null)       continue;
    }
    boolean unresolved;
    if (reference instanceof PsiPolyVariantReference) {
      final PsiPolyVariantReference poly=(PsiPolyVariantReference)reference;
      unresolved=(poly.multiResolve(false).length == 0);
    }
 else {
      unresolved=(reference.resolve() == null);
    }
    if (unresolved) {
      registerUnresolvedReferenceProblem(node,reference,severity);
    }
  }
}
