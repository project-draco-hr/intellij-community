{
  this.template=template;
  final EditorFactory factory=EditorFactory.getInstance();
  Document doc=factory.createDocument(template.getTemplate());
  final FileType ftl=FileTypeManager.getInstance().findFileTypeByName("VTL");
  if (project != null && ftl != null) {
    final PsiFile file=PsiFileFactory.getInstance(project).createFileFromText(template.getFileName(),ftl,template.getTemplate(),LocalTimeCounter.currentTime(),true);
    final Document document=PsiDocumentManager.getInstance(project).getDocument(file);
    if (document != null) {
      doc=document;
    }
  }
  myEditor=factory.createEditor(doc,project,ftl != null ? ftl : FileTypes.PLAIN_TEXT,template.isDefault());
}
