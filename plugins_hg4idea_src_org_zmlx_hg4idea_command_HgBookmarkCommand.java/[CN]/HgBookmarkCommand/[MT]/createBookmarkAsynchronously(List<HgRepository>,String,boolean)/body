{
  final Project project=ObjectUtils.assertNotNull(ContainerUtil.getFirstItem(repositories)).getProject();
  if (StringUtil.isEmptyOrSpaces(name)) {
    VcsNotifier.getInstance(project).notifyError("Hg Error","Bookmark name is empty");
  }
  new Task.Backgroundable(project,HgVcsMessages.message("hg4idea.progress.bookmark",name)){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      for (      HgRepository repository : repositories) {
        executeBookmarkCommandSynchronously(project,repository.getRoot(),name,isActive ? emptyList() : singletonList("--inactive"));
      }
    }
  }
.queue();
}
