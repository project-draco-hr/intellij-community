{
  if (file == null || !file.isInLocalFileSystem())   return;
  if (!Utils.isEnabled(CodeStyleSettingsManager.getInstance(myProject).getCurrentSettings()))   return;
  isApplyingSettings=true;
  final String filePath=file.getCanonicalPath();
  final List<OutPair> outPairs=SettingsProviderComponent.getInstance().getOutPairs(filePath);
  final EncodingProjectManager encodingProjectManager=EncodingProjectManager.getInstance(myProject);
  final String charset=Utils.configValueForKey(outPairs,charsetKey);
  if (!charset.isEmpty()) {
    if (encodingMap.containsKey(charset)) {
      encodingProjectManager.setEncoding(file,encodingMap.get(charset));
      Utils.appliedConfigMessage(myProject,charset,charsetKey,filePath);
    }
 else {
      Utils.invalidConfigMessage(myProject,charset,charsetKey,filePath);
    }
  }
  isApplyingSettings=false;
}
