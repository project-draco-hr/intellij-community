{
  if (myCatchStack.isEmpty()) {
    addInstruction(new ReturnInstruction());
    return;
  }
  PsiElement currentElement=myElementStack.peek();
  CatchDescriptor cd=myCatchStack.get(myCatchStack.size() - 1);
  if (!cd.isFinally() && PsiTreeUtil.isAncestor(cd.getBlock().getParent(),currentElement,false)) {
    int i=myCatchStack.size() - 2;
    while (!catchRethrow && i >= 0 && !myCatchStack.get(i).isFinally() && myCatchStack.get(i).getTryStatement() == cd.getTryStatement()) {
      i--;
    }
    if (i < 0) {
      addInstruction(new ReturnInstruction());
      return;
    }
    cd=myCatchStack.get(i);
  }
  flushVariablesOnControlTransfer(cd.getBlock());
  addInstruction(new GotoInstruction(cd.getJumpOffset(this)));
}
