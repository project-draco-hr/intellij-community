{
  myIgnoreAssertions=ignoreAssertions;
  PsiManager manager=codeFragment.getManager();
  GlobalSearchScope scope=codeFragment.getResolveScope();
  myRuntimeException=myFactory.getNotNullFactory().create(PsiType.getJavaLangRuntimeException(manager,scope));
  myError=myFactory.getNotNullFactory().create(PsiType.getJavaLangError(manager,scope));
  myNpe=JavaPsiFacade.getElementFactory(manager.getProject()).createTypeByFQClassName(JAVA_LANG_NULL_POINTER_EXCEPTION,scope);
  myFields=new HashSet<DfaVariableValue>();
  myCatchStack=new Stack<CatchDescriptor>();
  myCurrentFlow=new ControlFlow(myFactory);
  try {
    codeFragment.accept(this);
  }
 catch (  CannotAnalyzeException e) {
    return null;
  }
  myCurrentFlow.setFields(myFields.toArray(new DfaVariableValue[myFields.size()]));
  addInstruction(new ReturnInstruction());
  return myCurrentFlow;
}
