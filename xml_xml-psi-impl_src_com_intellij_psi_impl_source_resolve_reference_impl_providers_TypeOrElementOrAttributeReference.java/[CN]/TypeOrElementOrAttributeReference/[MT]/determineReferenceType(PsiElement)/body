{
  final XmlAttribute attribute=PsiTreeUtil.getParentOfType(element,XmlAttribute.class);
  if (attribute == null) {
    return null;
  }
  final XmlTag tag=attribute.getParent();
  final String localName=tag.getLocalName();
  final String attributeLocalName=attribute.getLocalName();
  if (SchemaReferencesProvider.REF_ATTR_NAME.equals(attributeLocalName) || SchemaReferencesProvider.SUBSTITUTION_GROUP_ATTR_NAME.equals(attributeLocalName)) {
    if (localName.equals(SchemaReferencesProvider.GROUP_TAG_NAME)) {
      return ReferenceType.GroupReference;
    }
 else     if (localName.equals(SchemaReferencesProvider.ATTRIBUTE_GROUP_TAG_NAME)) {
      return ReferenceType.AttributeGroupReference;
    }
 else     if (SchemaReferencesProvider.ELEMENT_TAG_NAME.equals(localName)) {
      return ReferenceType.ElementReference;
    }
 else     if (SchemaReferencesProvider.ATTRIBUTE_TAG_NAME.equals(localName)) {
      return ReferenceType.AttributeReference;
    }
  }
 else   if (SchemaReferencesProvider.TYPE_ATTR_NAME.equals(attributeLocalName) || SchemaReferencesProvider.BASE_ATTR_NAME.equals(attributeLocalName) || SchemaReferencesProvider.MEMBER_TYPES_ATTR_NAME.equals(attributeLocalName)|| SchemaReferencesProvider.ITEM_TYPE_ATTR_NAME.equals(attributeLocalName)) {
    return ReferenceType.TypeReference;
  }
  return null;
}
