{
  GitLocalBranch source=repository.getBranches().findLocalBranch(from);
  assertNotNull(source);
  GitRemoteBranch target=(GitRemoteBranch)repository.getBranches().findBranchByName(to);
  boolean newBranch;
  if (target == null) {
    int firstSlash=to.indexOf('/');
    GitRemote remote=GitUtil.findRemoteByName(repository,to.substring(0,firstSlash));
    assertNotNull(remote);
    target=new GitStandardRemoteBranch(remote,to.substring(firstSlash + 1),GitBranch.DUMMY_HASH);
    newBranch=true;
  }
 else {
    newBranch=false;
  }
  return new PushSpec<GitPushSource,GitPushTarget>(new GitPushSource(source),new GitPushTarget(target,newBranch));
}
