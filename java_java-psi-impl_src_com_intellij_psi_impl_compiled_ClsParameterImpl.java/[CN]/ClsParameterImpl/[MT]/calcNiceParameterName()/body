{
  String name=null;
  PsiParameterStubImpl stub=(PsiParameterStubImpl)getStub();
  if (!stub.isAutoGeneratedName() || DumbService.getInstance(getProject()).isDumb()) {
    name=stub.getName();
  }
  if (name == null) {
    JavaCodeStyleManager codeStyleManager=JavaCodeStyleManager.getInstance(getProject());
    String[] nameSuggestions=codeStyleManager.suggestVariableName(VariableKind.PARAMETER,null,null,getType()).names;
    name="p";
    if (nameSuggestions.length > 0 && nameSuggestions[0] != null) {
      name=nameSuggestions[0];
    }
    String base=name;
    int n=0;
    AttemptsLoop:     while (true) {
      for (      PsiParameter parameter : ((PsiParameterList)getParent()).getParameters()) {
        if (parameter == this)         break AttemptsLoop;
        String prevName=((ClsParameterImpl)parameter).getMirrorName();
        if (name.equals(prevName)) {
          name=base + (++n);
          continue AttemptsLoop;
        }
      }
    }
  }
  return name;
}
