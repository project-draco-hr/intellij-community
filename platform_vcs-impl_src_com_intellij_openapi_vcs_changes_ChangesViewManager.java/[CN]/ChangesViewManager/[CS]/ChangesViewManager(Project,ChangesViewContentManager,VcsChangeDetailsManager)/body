{
  myProject=project;
  myContentManager=contentManager;
  myView=new ChangesListView(project);
  Disposer.register(project,myView);
  myRepaintAlarm=new Alarm(Alarm.ThreadToUse.SWING_THREAD,project);
  myDiffDetails=new MyChangeProcessor(myProject);
  myDiffDetails.init();
  myTsl=new TreeSelectionListener(){
    @Override public void valueChanged(    TreeSelectionEvent e){
      if (LOG.isDebugEnabled()) {
        LOG.debug("selection changed. selected:  " + toStringPaths(myView.getSelectionPaths()) + " from: "+ DebugUtil.currentStackTrace());
      }
      SwingUtilities.invokeLater(new Runnable(){
        @Override public void run(){
          changeDetails();
        }
      }
);
    }
    private String toStringPaths(    TreePath[] paths){
      if (paths == null)       return "null";
      if (paths.length == 0)       return "empty";
      final StringBuilder sb=new StringBuilder();
      for (      TreePath path : paths) {
        if (sb.length() > 0) {
          sb.append(", ");
        }
        sb.append(path.toString());
      }
      return sb.toString();
    }
  }
;
}
