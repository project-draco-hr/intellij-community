{
  final boolean projectLevelIsHigh=PsiUtil.getLanguageLevel(project).isAtLeast(LanguageLevel.JDK_1_8);
  final Set<Module> highLevelModules=new HashSet<Module>();
  for (  Module module : ModuleManager.getInstance(project).getModules()) {
    final LanguageLevelModuleExtension extension=ModuleRootManager.getInstance(module).getModuleExtension(LanguageLevelModuleExtension.class);
    if (extension != null) {
      final LanguageLevel level=extension.getLanguageLevel();
      if (level == null && projectLevelIsHigh || level != null && level.isAtLeast(LanguageLevel.JDK_1_8)) {
        highLevelModules.add(module);
      }
    }
  }
  return highLevelModules;
}
