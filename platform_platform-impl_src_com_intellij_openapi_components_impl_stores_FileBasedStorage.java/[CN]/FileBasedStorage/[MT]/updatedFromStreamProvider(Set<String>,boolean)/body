{
  if (myRoamingType == RoamingType.DISABLED) {
    return;
  }
  try {
    Element newElement=deleted ? null : loadDataFromStreamProvider();
    if (newElement == null) {
      StorageUtil.deleteFile(myFile,this,myCachedVirtualFile);
      if (myStorageData != null) {
        changedComponentNames.addAll(myStorageData.getComponentNames());
        myStorageData=null;
      }
    }
 else     if (myStorageData != null) {
      StorageData newStorageData=createStorageData();
      loadState(newStorageData,newElement);
      changedComponentNames.addAll(myStorageData.getChangedComponentNames(newStorageData,myPathMacroSubstitutor));
      myStorageData=newStorageData;
    }
  }
 catch (  Throwable e) {
    LOG.error(e);
  }
}
