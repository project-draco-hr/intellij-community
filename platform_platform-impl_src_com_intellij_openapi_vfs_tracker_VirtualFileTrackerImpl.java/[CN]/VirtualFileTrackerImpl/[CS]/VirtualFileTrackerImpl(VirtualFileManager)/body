{
  virtualFileManager.addVirtualFileListener(new VirtualFileListener(){
    @Override public void propertyChanged(    @NotNull final VirtualFilePropertyEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.propertyChanged(event);
      }
    }
    @Override public void contentsChanged(    @NotNull final VirtualFileEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.contentsChanged(event);
      }
    }
    @Override public void fileCreated(    @NotNull final VirtualFileEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.fileCreated(event);
      }
    }
    @Override public void fileDeleted(    @NotNull final VirtualFileEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.fileDeleted(event);
      }
    }
    @Override public void fileMoved(    @NotNull final VirtualFileMoveEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.fileMoved(event);
      }
    }
    @Override public void fileCopied(    @NotNull final VirtualFileCopyEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.fileCopied(event);
      }
    }
    @Override public void beforePropertyChange(    @NotNull final VirtualFilePropertyEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.beforePropertyChange(event);
      }
    }
    @Override public void beforeContentsChange(    @NotNull final VirtualFileEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.beforeContentsChange(event);
      }
    }
    @Override public void beforeFileDeletion(    @NotNull final VirtualFileEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.beforeFileDeletion(event);
      }
    }
    @Override public void beforeFileMovement(    @NotNull final VirtualFileMoveEvent event){
      final Collection<VirtualFileListener> listeners=getListeners(event.getFile(),event.isFromRefresh());
      if (listeners == null)       return;
      for (      VirtualFileListener listener : listeners) {
        listener.beforeFileMovement(event);
      }
    }
  }
);
}
