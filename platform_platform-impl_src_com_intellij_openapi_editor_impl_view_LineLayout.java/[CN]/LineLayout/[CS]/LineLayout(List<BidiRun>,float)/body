{
  myBidiRunsInLogicalOrder=runs.toArray(new BidiRun[runs.size()]);
  myBidiRunsInVisualOrder=myBidiRunsInLogicalOrder.clone();
  if (myBidiRunsInLogicalOrder.length > 1) {
    byte[] levels=new byte[myBidiRunsInLogicalOrder.length];
    for (int i=0; i < myBidiRunsInLogicalOrder.length; i++) {
      levels[i]=myBidiRunsInLogicalOrder[i].level;
    }
    Bidi.reorderVisually(levels,0,myBidiRunsInVisualOrder,0,levels.length);
  }
  myMaxX=calculateMaxX(startX);
}
