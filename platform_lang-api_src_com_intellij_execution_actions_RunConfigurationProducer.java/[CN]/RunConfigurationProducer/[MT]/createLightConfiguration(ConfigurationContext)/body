{
  RunConfiguration configuration=myConfigurationFactory.createTemplateConfiguration(context.getProject());
  try {
    if (!setupConfigurationFromContext((T)configuration,context,new Ref<PsiElement>(context.getPsiLocation()))) {
      return null;
    }
  }
 catch (  ClassCastException e) {
    LOG.error(myConfigurationFactory + " produced wrong type",e);
    return null;
  }
  return configuration;
}
