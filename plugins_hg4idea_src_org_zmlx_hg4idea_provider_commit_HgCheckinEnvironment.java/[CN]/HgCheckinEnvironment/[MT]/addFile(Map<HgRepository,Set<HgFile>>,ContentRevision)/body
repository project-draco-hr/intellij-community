{
  FilePath filePath=contentRevision.getFile();
  HgRepository repo=HgUtil.getRepositoryForFile(myProject,contentRevision instanceof HgCurrentBinaryContentRevision ? ((HgCurrentBinaryContentRevision)contentRevision).getRepositoryRoot() : ChangesUtil.findValidParentAccurately(filePath));
  if (repo == null) {
    return;
  }
  Set<HgFile> hgFiles=result.get(repo);
  if (hgFiles == null) {
    hgFiles=new HashSet<HgFile>();
    result.put(repo,hgFiles);
  }
  hgFiles.add(new HgFile(repo.getRoot(),filePath));
}
