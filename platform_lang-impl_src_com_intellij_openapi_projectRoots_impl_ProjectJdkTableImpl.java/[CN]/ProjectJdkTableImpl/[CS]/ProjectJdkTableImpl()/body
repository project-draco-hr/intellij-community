{
  myMessageBus=ApplicationManager.getApplication().getMessageBus();
  myListenerList=new MessageListenerList<Listener>(myMessageBus,JDK_TABLE_TOPIC);
  VirtualFileManager.getInstance().addVirtualFileListener(new VirtualFileAdapter(){
    private FileTypeManager myFileTypeManager=FileTypeManager.getInstance();
    @Override public void fileCreated(    @NotNull VirtualFileEvent event){
      updateJdks(event.getFile());
    }
    private void updateJdks(    VirtualFile file){
      if (file.isDirectory() || !FileTypes.ARCHIVE.equals(myFileTypeManager.getFileTypeByFileName(file.getName()))) {
        return;
      }
      for (      Sdk sdk : mySdks) {
        final SdkType sdkType=(SdkType)sdk.getSdkType();
        if (!(sdkType instanceof JavaSdkType)) {
          continue;
        }
        final VirtualFile home=sdk.getHomeDirectory();
        if (home == null) {
          continue;
        }
        if (VfsUtilCore.isAncestor(home,file,true)) {
          sdkType.setupSdkPaths(sdk);
          break;
        }
      }
    }
  }
);
}
