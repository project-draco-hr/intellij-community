{
  Module module=getModifiableModuleModel().newModule(filePath,moduleTypeId);
  final String moduleName=FileUtil.getNameWithoutExtension(new File(filePath));
  if (!module.getName().equals(moduleName)) {
    try {
      getModifiableModuleModel().renameModule(module,moduleName);
    }
 catch (    ModuleWithNameAlreadyExists exists) {
      LOG.warn(exists);
    }
  }
  module.setOption(Module.ELEMENT_TYPE,moduleTypeId);
  return module;
}
