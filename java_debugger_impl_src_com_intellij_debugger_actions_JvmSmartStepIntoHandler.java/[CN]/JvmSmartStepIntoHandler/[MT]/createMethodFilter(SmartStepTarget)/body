{
  if (stepTarget instanceof MethodSmartStepTarget) {
    final PsiMethod method=((MethodSmartStepTarget)stepTarget).getMethod();
    return stepTarget.needsBreakpointRequest() ? new AnonymousClassMethodFilter(method,stepTarget.getCallingExpressionLines()) : new BasicStepMethodFilter(method,stepTarget.getCallingExpressionLines());
  }
  if (stepTarget instanceof LambdaSmartStepTarget) {
    final LambdaSmartStepTarget lambdaTarget=(LambdaSmartStepTarget)stepTarget;
    return new LambdaMethodFilter(lambdaTarget.getLambda(),lambdaTarget.getOrdinal(),stepTarget.getCallingExpressionLines());
  }
  return null;
}
