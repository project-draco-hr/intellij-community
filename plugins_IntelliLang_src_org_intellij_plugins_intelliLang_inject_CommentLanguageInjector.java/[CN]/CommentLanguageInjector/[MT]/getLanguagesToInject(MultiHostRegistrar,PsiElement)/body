{
  PsiLanguageInjectionHost host=(PsiLanguageInjectionHost)context;
  if (!host.isValidHost())   return;
  if (context.getClass().getSimpleName().startsWith("XmlAttribute"))   return;
  ElementManipulator<PsiLanguageInjectionHost> manipulator=ElementManipulators.getManipulator(host);
  if (manipulator == null)   return;
  TextRange rangeInElement=manipulator.getRangeInElement(host);
  if (rangeInElement.isEmpty())   return;
  PsiElement anchor=rangeInElement.getStartOffset() == 0 ? context.getParent() : context;
  BaseInjection injection=InjectorUtils.findCommentInjection(anchor,"comment",Ref.<PsiComment>create());
  if (injection == null)   return;
  InjectedLanguage injectedLanguage=InjectedLanguage.create(injection.getInjectedLanguageId(),injection.getPrefix(),injection.getSuffix(),false);
  Language language=injectedLanguage != null ? injectedLanguage.getLanguage() : null;
  if (language != null) {
    Trinity<PsiLanguageInjectionHost,InjectedLanguage,TextRange> info=Trinity.create(host,injectedLanguage,rangeInElement);
    InjectorUtils.registerInjection(language,Collections.singletonList(info),context.getContainingFile(),registrar);
  }
}
