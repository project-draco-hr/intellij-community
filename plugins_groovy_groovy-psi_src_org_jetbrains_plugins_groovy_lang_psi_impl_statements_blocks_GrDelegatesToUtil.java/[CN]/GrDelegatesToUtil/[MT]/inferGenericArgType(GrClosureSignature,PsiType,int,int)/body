{
  if (targetType instanceof PsiClassType) {
    final PsiClassType.ClassResolveResult result=((PsiClassType)targetType).resolveGenerics();
    final PsiClass psiClass=result.getElement();
    if (psiClass != null) {
      final PsiSubstitutor substitutor=result.getSubstitutor();
      final PsiType baseType=signature.getParameters()[param].getType();
      final PsiClass baseClass=PsiUtil.resolveClassInClassTypeOnly(baseType);
      if (baseClass != null && psiClass.isInheritor(baseClass,true)) {
        final PsiTypeParameter[] typeParameters=baseClass.getTypeParameters();
        if (genericIndex < typeParameters.length) {
          final PsiSubstitutor superClassSubstitutor=TypeConversionUtil.getSuperClassSubstitutor(baseClass,psiClass,substitutor);
          return superClassSubstitutor.substitute(typeParameters[genericIndex]);
        }
      }
    }
  }
  return null;
}
