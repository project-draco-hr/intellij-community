{
  final SimpleJavaSdkType sdkType=new SimpleJavaSdkType();
  final Sdk ideaJdk=sdkType.createJdk("tmp",SystemProperties.getJavaHome());
  SimpleJavaParameters parameters=new SimpleJavaParameters();
  parameters.setJdk(ideaJdk);
  parameters.setMainClass("org.python.util.jython");
  File jythonJar=new File(PyTestCase.getPythonCommunityPath(),"lib/jython.jar");
  parameters.getClassPath().add(jythonJar.getPath());
  parameters.getProgramParametersList().add("-Dpython.path=" + pythonPath + File.pathSeparator+ workDir);
  parameters.getProgramParametersList().addAll(args);
  parameters.setWorkingDirectory(workDir);
  final GeneralCommandLine commandLine=JdkUtil.setupJVMCommandLine(sdkType.getVMExecutablePath(ideaJdk),parameters,false);
  final CapturingProcessHandler processHandler=new CapturingProcessHandler(commandLine.createProcess());
  return processHandler.runProcess();
}
