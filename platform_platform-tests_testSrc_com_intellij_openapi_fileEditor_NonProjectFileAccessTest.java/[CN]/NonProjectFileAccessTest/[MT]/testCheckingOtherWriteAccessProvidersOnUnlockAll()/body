{
  final VirtualFile nonProjectFile1=createNonProjectFile();
  final VirtualFile nonProjectFile2=createNonProjectFile();
  final List<VirtualFile> requested=registerWriteAccessProvider(nonProjectFile1);
  NonProjectFileNotificationPanel panel=typeAndCheck(nonProjectFile1,false);
  typeAndCheck(nonProjectFile2,false);
  assertNotNull(getNotificationPanel(nonProjectFile1));
  assertNotNull(getNotificationPanel(nonProjectFile2));
  panel.getUnlockAllLabel().doClick();
  assertSameElements(requested,nonProjectFile1);
  typeAndCheck(nonProjectFile1,false,false);
  typeAndCheck(nonProjectFile2,true);
}
