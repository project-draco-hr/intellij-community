{
  VirtualFile nonProjectFile=createNonProjectFile();
  typeAndCheck(nonProjectFile,false);
  final VirtualFile[] createdNonProject=new VirtualFile[1];
  final VirtualFile[] copiedNonProject=new VirtualFile[1];
  new WriteAction<Object>(){
    @Override protected void run(    @NotNull Result<Object> result) throws Throwable {
      createdNonProject[0]=nonProjectFile.getParent().createChildData(this,"createdNonProject.txt");
      copiedNonProject[0]=nonProjectFile.copy(this,nonProjectFile.getParent(),"copiedNonProject.txt");
      myCreatedFiles.add(createdNonProject[0]);
      myCreatedFiles.add(copiedNonProject[0]);
    }
  }
.execute();
  typeAndCheck(createdNonProject[0],true);
  typeAndCheck(copiedNonProject[0],true);
  typeAndCheck(nonProjectFile,false);
}
