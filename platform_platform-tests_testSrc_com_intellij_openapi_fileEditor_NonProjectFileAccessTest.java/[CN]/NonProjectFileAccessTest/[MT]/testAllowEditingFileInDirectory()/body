{
  VirtualFile nonProjectFileDir11=createNonProjectFile();
  File dir=new File(nonProjectFileDir11.getParent().getPath());
  VirtualFile nonProjectFileDir12=createFileExternally(dir);
  File subDir=new File(dir,"subdir");
  subDir.mkdirs();
  VirtualFile nonProjectFileDirSubdir1=createFileExternally(subDir);
  VirtualFile nonProjectFileDir2=createNonProjectFile();
  typeAndCheck(nonProjectFileDir11,false);
  typeAndCheck(nonProjectFileDir12,false);
  typeAndCheck(nonProjectFileDir2,false);
  typeAndCheck(nonProjectFileDir11,NonProjectFileWritingAccessProvider.UnlockOption.UNLOCK_DIR,true);
  typeAndCheck(nonProjectFileDir12,true);
  typeAndCheck(nonProjectFileDirSubdir1,true);
  typeAndCheck(nonProjectFileDir2,false);
}
