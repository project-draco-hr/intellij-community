{
  PlatformTestUtil.saveProject(getProject());
  VirtualFile fileUnderProjectDir=new WriteAction<VirtualFile>(){
    @Override protected void run(    @NotNull Result<VirtualFile> result) throws Throwable {
      result.setResult(getProject().getBaseDir().createChildData(this,"fileUnderProjectDir.txt"));
    }
  }
.execute().getResultObject();
  assertFalse(ProjectFileIndex.SERVICE.getInstance(getProject()).isInContent(fileUnderProjectDir));
  typeAndCheck(getProject().getProjectFile(),true);
  typeAndCheck(getProject().getWorkspaceFile(),true);
  typeAndCheck(fileUnderProjectDir,false);
}
