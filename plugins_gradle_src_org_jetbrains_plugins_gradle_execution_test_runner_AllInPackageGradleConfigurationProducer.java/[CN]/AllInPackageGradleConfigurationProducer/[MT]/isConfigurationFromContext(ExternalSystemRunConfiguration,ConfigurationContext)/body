{
  if (configuration == null)   return false;
  if (!GradleConstants.SYSTEM_ID.equals(configuration.getSettings().getExternalSystemId()))   return false;
  final PsiPackage psiPackage=JavaRuntimeConfigurationProducerBase.checkPackage(context.getPsiLocation());
  if (psiPackage == null)   return false;
  if (context.getModule() == null)   return false;
  if (!StringUtil.equals(context.getModule().getOptionValue(ExternalSystemConstants.LINKED_PROJECT_PATH_KEY),configuration.getSettings().getExternalProjectPath())) {
    return false;
  }
  if (!configuration.getSettings().getTaskNames().containsAll(TASKS_TO_RUN))   return false;
  final String scriptParameters=configuration.getSettings().getScriptParameters() + ' ';
  return psiPackage.getQualifiedName().isEmpty() ? scriptParameters.contains("--tests * ") : scriptParameters.contains(String.format("--tests %s.* ",psiPackage.getQualifiedName()));
}
