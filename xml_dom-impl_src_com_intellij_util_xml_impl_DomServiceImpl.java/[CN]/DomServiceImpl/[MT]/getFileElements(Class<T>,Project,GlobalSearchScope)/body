{
  final Collection<VirtualFile> list=getDomFileCandidates(clazz,project,scope != null ? scope : GlobalSearchScope.allScope(project));
  final ArrayList<DomFileElement<T>> result=new ArrayList<>(list.size());
  for (  VirtualFile file : list) {
    final PsiFile psiFile=PsiManager.getInstance(project).findFile(file);
    if (psiFile instanceof XmlFile) {
      final DomFileElement<T> element=DomManager.getDomManager(project).getFileElement((XmlFile)psiFile,clazz);
      if (element != null) {
        result.add(element);
      }
    }
  }
  return result;
}
