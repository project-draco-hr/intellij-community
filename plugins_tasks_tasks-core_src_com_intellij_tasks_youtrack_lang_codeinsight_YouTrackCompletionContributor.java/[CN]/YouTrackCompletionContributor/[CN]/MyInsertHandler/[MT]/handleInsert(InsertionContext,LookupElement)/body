{
  final CompletionItem completionItem=(CompletionItem)item.getObject();
  final Document document=context.getDocument();
  final Editor editor=context.getEditor();
  context.commitDocument();
  context.setAddCompletionChar(false);
  final String prefix=completionItem.getPrefix();
  final String suffix=completionItem.getSuffix();
  if (!prefix.isEmpty() && !hasPrefixAt(document,context.getStartOffset() - prefix.length(),prefix)) {
    document.insertString(context.getStartOffset(),prefix);
  }
  if (!suffix.isEmpty() && !hasPrefixAt(document,context.getTailOffset(),suffix)) {
    document.insertString(context.getTailOffset(),suffix);
  }
  editor.getCaretModel().moveToOffset(context.getTailOffset());
}
