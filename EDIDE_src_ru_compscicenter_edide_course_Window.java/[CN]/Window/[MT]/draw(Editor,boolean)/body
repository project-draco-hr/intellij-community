{
  if (myOffsetInLine == 0) {
    myOffsetInLine=text.length();
  }
  TextAttributes defaultTestAttributes=EditorColorsManager.getInstance().getGlobalScheme().getAttributes(EditorColors.LIVE_TEMPLATE_ATTRIBUTES);
  JBColor color;
  if (myResolveStatus) {
    color=JBColor.GREEN;
  }
 else {
    color=JBColor.BLUE;
  }
  int startOffset=editor.getDocument().getLineStartOffset(line) + start;
  RangeHighlighter rh=editor.getMarkupModel().addRangeHighlighter(startOffset,startOffset + myOffsetInLine,HighlighterLayer.LAST + 1,new TextAttributes(defaultTestAttributes.getForegroundColor(),defaultTestAttributes.getBackgroundColor(),color,defaultTestAttributes.getEffectType(),defaultTestAttributes.getFontType()),HighlighterTargetArea.EXACT_RANGE);
  myRangeHighlighter=rh;
  if (drawSelection) {
    editor.getSelectionModel().setSelection(startOffset,startOffset + myOffsetInLine);
  }
  editor.getCaretModel().moveToOffset(startOffset);
  rh.setGreedyToLeft(true);
  rh.setGreedyToRight(true);
}
