{
  final TextAttributes ta=EditorColorsManager.getInstance().getGlobalScheme().getAttributes(EditorColors.LIVE_TEMPLATE_ATTRIBUTES);
  final int startOffset=editor.getDocument().getLineStartOffset(line) + start;
  RangeHighlighter rh=editor.getMarkupModel().addRangeHighlighter(startOffset,startOffset + text.length(),HighlighterLayer.LAST + 1,ta,HighlighterTargetArea.EXACT_RANGE);
  if (drawSelection) {
    editor.getSelectionModel().setSelection(startOffset,startOffset + text.length());
    editor.getCaretModel().moveToOffset(startOffset);
  }
  rh.setGreedyToLeft(true);
  rh.setGreedyToRight(true);
}
