{
  myDefaultColorSchemesManager=defaultColorSchemesManager;
  mySchemesManager=schemesManagerFactory.createSchemesManager(FILE_SPEC,new MySchemeProcessor(),RoamingType.PER_USER);
  addDefaultSchemes();
  if (!isUnitTestOrHeadlessMode()) {
    loadSchemesFromBeans();
  }
  mySchemesManager.loadSchemes();
  loadAdditionalTextAttributes();
  String wizardEditorScheme=WelcomeWizardUtil.getWizardEditorScheme();
  EditorColorsScheme scheme=null;
  if (wizardEditorScheme != null) {
    scheme=getScheme(wizardEditorScheme);
    LOG.assertTrue(scheme != null,"Wizard scheme " + wizardEditorScheme + " not found");
  }
  if (scheme == null)   scheme=myDefaultColorSchemesManager.getAllSchemes()[0];
  setGlobalSchemeInner(scheme);
}
