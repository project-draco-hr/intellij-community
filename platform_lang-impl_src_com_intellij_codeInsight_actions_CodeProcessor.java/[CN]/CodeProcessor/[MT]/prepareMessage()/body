{
  StringBuilder builder=new StringBuilder("<html>");
  LayoutCodeNotification notifications=myProcessor.getNotificationInfo();
  LOG.assertTrue(notifications != null);
  if (notifications.isEmpty() && !myNoChangesDetected) {
    if (myProcessChangesTextOnly) {
      builder.append("Changes since last revision: processed, nothing modified").append("<br>");
    }
 else {
      builder.append("Code processed, nothing modified").append("<br>");
    }
  }
 else {
    if (notifications.hasReformatOrRearrangeNotification()) {
      String reformatNotification=notifications.getReformatCodeNotification();
      String rearrangeNotification=notifications.getRearrangeCodeNotification();
      if (rearrangeNotification != null || reformatNotification != null) {
        String firstNotificationLine=joinAndCapitalizeFirst(reformatNotification,rearrangeNotification);
        if (myProcessChangesTextOnly) {
          builder.append("Changes since last revision: ");
          firstNotificationLine=StringUtil.decapitalize(firstNotificationLine);
        }
        builder.append(firstNotificationLine);
        builder.append("<br>");
      }
    }
 else     if (myNoChangesDetected) {
      builder.append("Nothing to format");
      if (myShouldRearrangeCode) {
        builder.append(" and rearrange");
      }
      builder.append(", no changes since last revision").append("<br>");
    }
    String optimizeImportsNotification=notifications.getOptimizeImportsNotification();
    if (optimizeImportsNotification != null) {
      builder.append(StringUtil.capitalize(optimizeImportsNotification)).append("<br>");
    }
  }
  String shortcutText=KeymapUtil.getFirstKeyboardShortcutText(ActionManager.getInstance().getAction("ReformatFile"));
  builder.append("<span style='color:").append(COLOR).append("'>").append("Show reformat dialog: ").append(shortcutText).append("</span>").append("</html>");
  return builder.toString();
}
