{
  List<Integer> toRemove=Lists.newArrayList();
  for (  Pair<VirtualFile,Integer> e : files) {
    if (myAdded.contains(e.first)) {
      toRemove.add(e.second);
      myAdded.remove(e.first);
      myUserAddedToRemove.add(e.first);
    }
 else     if (myExcluded.contains(e.first)) {
      myExcluded.remove(e.first);
    }
 else {
      myExcluded.add(e.first);
    }
  }
  return ArrayUtil.toIntArray(toRemove);
}
