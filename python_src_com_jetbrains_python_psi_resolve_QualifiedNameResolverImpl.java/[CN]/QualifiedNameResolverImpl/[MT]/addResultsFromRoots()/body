{
  if (myVisitAllModules) {
    for (    Module mod : ModuleManager.getInstance(myContext.getProject()).getModules()) {
      RootVisitorHost.visitRoots(mod,true,this);
    }
    if (myContext.getSdk() != null) {
      RootVisitorHost.visitSdkRoots(myContext.getSdk(),this);
    }
 else     if (myContext.getFootholdFile() != null) {
      RootVisitorHost.visitSdkRoots(myContext.getFootholdFile(),this);
    }
  }
 else   if (myContext.getModule() != null) {
    final boolean otherSdk=withOtherSdk();
    RootVisitorHost.visitRoots(myContext.getModule(),otherSdk,this);
    if (otherSdk) {
      RootVisitorHost.visitSdkRoots(myContext.getSdk(),this);
    }
  }
 else   if (myContext.getFootholdFile() != null) {
    RootVisitorHost.visitSdkRoots(myContext.getFootholdFile(),this);
  }
 else   if (myContext.getSdk() != null) {
    RootVisitorHost.visitSdkRoots(myContext.getSdk(),this);
  }
 else {
    throw new IllegalStateException();
  }
}
