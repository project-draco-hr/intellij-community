{
  final PsiElement argList=PsiUtil.skipParenthesizedExprUp(qualifier).getParent();
  if (argList instanceof PsiExpressionList) {
    final PsiElement parent=argList.getParent();
    if (parent instanceof PsiMethodCallExpression) {
      final PsiMethod method=((PsiMethodCallExpression)parent).resolveMethod();
      if (method != null) {
        final PsiClass containingClass=method.getContainingClass();
        if ("of".equals(method.getName()) && containingClass != null) {
          final String qualifiedName=containingClass.getQualifiedName();
          if (CommonClassNames.JAVA_UTIL_OPTIONAL.equals(qualifiedName)) {
            return new ReplaceOptionalOfWithOfNullableFix("ofNullable");
          }
 else           if (GUAVA_OPTIONAL.equals(qualifiedName)) {
            return new ReplaceOptionalOfWithOfNullableFix("fromNullable");
          }
        }
      }
    }
  }
  return null;
}
