{
  Pair<Set<Instruction>,Set<Instruction>> constConditions=runner.getConstConditionalExpressions();
  Set<Instruction> trueSet=constConditions.getFirst();
  Set<Instruction> falseSet=constConditions.getSecond();
  ArrayList<Instruction> allProblems=new ArrayList<Instruction>();
  allProblems.addAll(trueSet);
  allProblems.addAll(falseSet);
  allProblems.addAll(visitor.myCCEInstructions);
  allProblems.addAll(ContainerUtil.filter(runner.getInstructions(),new Condition<Instruction>(){
    @Override public boolean value(    Instruction instruction1){
      return instruction1 instanceof InstanceofInstruction && visitor.isInstanceofRedundant((InstanceofInstruction)instruction1);
    }
  }
));
  HashSet<PsiElement> reportedAnchors=new HashSet<PsiElement>();
  for (  PsiElement element : visitor.getProblems(NullabilityProblem.callNPE)) {
    if (reportedAnchors.add(element)) {
      reportCallMayProduceNpe(holder,(PsiMethodCallExpression)element,holder.isOnTheFly());
    }
  }
  for (  PsiElement element : visitor.getProblems(NullabilityProblem.fieldAccessNPE)) {
    if (reportedAnchors.add(element)) {
      PsiElement parent=element.getParent();
      PsiElement fieldAccess=parent instanceof PsiArrayAccessExpression || parent instanceof PsiReferenceExpression ? parent : element;
      reportFieldAccessMayProduceNpe(holder,element,(PsiExpression)fieldAccess);
    }
  }
  for (  Instruction instruction : allProblems) {
    if (instruction instanceof TypeCastInstruction && reportedAnchors.add(((TypeCastInstruction)instruction).getCastExpression().getCastType())) {
      reportCastMayFail(holder,(TypeCastInstruction)instruction);
    }
 else     if (instruction instanceof BranchingInstruction) {
      handleBranchingInstruction(holder,visitor,trueSet,falseSet,reportedAnchors,(BranchingInstruction)instruction,onTheFly);
    }
  }
  reportNullableArguments(visitor,holder,reportedAnchors);
  reportNullableAssignments(visitor,holder,reportedAnchors);
  reportUnboxedNullables(visitor,holder,reportedAnchors);
  reportNullableReturns(visitor,holder,reportedAnchors,scope);
  if (SUGGEST_NULLABLE_ANNOTATIONS) {
    reportNullableArgumentsPassedToNonAnnotated(visitor,holder,reportedAnchors);
  }
  reportOptionalOfNullableImprovements(holder,reportedAnchors,runner.getInstructions());
  if (REPORT_CONSTANT_REFERENCE_VALUES) {
    reportConstantReferenceValues(holder,visitor,reportedAnchors);
  }
}
