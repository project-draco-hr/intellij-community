{
  if (myStopFormatting) {
    return true;
  }
  if (!myFilesCountingFinished) {
    countingIteration();
    return true;
  }
  updateIndicator(myFilesProcessed);
  if (myFileTreeIterator.hasNext()) {
    PsiFile file=myFileTreeIterator.next();
    myFilesProcessed++;
    if (file.isWritable() && canBeFormatted(file)) {
      performFileProcessing(file);
    }
  }
  return true;
}
