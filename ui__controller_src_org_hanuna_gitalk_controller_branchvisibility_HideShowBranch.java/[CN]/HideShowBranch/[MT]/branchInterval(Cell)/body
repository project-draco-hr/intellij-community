{
  if (cell == null) {
    return null;
  }
  Node up=null, down=null;
  if (cell.getClass() == EdgeCell.class) {
    Edge edge=((EdgeCell)cell).getEdge();
    if (isSimpleNode(edge.getUpNode())) {
      up=upNode(edge.getUpNode());
    }
    if (isSimpleNode(edge.getDownNode())) {
      down=downNode(edge.getDownNode());
    }
    if (up == null || down == null) {
      return null;
    }
  }
 else {
    if (cell.getClass() != NodeCell.class) {
      throw new IllegalStateException();
    }
    Node node=((NodeCell)cell).getNode();
    if (!isSimpleNode(node)) {
      return null;
    }
    up=upNode(node);
    down=downNode(node);
  }
  if (up == down) {
    return null;
  }
  if (up.getDownEdges().get(0).getDownNode() == down) {
    return null;
  }
  return new NodeInterval(up,down);
}
