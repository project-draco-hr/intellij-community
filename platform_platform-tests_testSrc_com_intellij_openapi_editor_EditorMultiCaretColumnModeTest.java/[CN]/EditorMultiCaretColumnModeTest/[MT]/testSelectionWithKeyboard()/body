{
  init("line1\n" + "li<caret>ne2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_RIGHT_WITH_SELECTION);
  checkResultByText("line1\n" + "li<selection>n<caret></selection>e2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_DOWN_WITH_SELECTION);
  checkResultByText("line1\n" + "li<selection>n<caret></selection>e2\n" + "li<selection>n<caret></selection>e3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_LEFT_WITH_SELECTION);
  checkResultByText("line1\n" + "li<caret>ne2\n" + "li<caret>ne3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_LEFT_WITH_SELECTION);
  checkResultByText("line1\n" + "l<selection><caret>i</selection>ne2\n" + "l<selection><caret>i</selection>ne3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_UP_WITH_SELECTION);
  checkResultByText("line1\n" + "l<selection><caret>i</selection>ne2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_UP_WITH_SELECTION);
  checkResultByText("l<selection><caret>i</selection>ne1\n" + "l<selection><caret>i</selection>ne2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_RIGHT_WITH_SELECTION);
  checkResultByText("li<caret>ne1\n" + "li<caret>ne2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_RIGHT_WITH_SELECTION);
  checkResultByText("li<selection>n<caret></selection>e1\n" + "li<selection>n<caret></selection>e2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_DOWN_WITH_SELECTION);
  checkResultByText("line1\n" + "li<selection>n<caret></selection>e2\n" + "line3");
  executeAction(IdeActions.ACTION_EDITOR_MOVE_CARET_LEFT_WITH_SELECTION);
  checkResultByText("line1\n" + "li<caret>ne2\n" + "line3");
}
