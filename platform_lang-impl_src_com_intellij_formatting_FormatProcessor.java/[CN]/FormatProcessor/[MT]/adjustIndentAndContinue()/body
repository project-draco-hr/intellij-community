{
  AlignmentImpl alignment=CoreFormatterUtil.getAlignment(myCurrentBlock);
  WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
  if (alignment == null || myAlignmentHelper.shouldSkip(alignment)) {
    if (whiteSpace.containsLineFeeds()) {
      adjustSpacingByIndentOffset();
    }
 else {
      whiteSpace.arrangeSpaces(myCurrentBlock.getSpaceProperty());
    }
    return true;
  }
  LeafBlockWrapper newCurrentBlock=myAlignmentHelper.applyAlignmentAndContinueFormatting(alignment,myCurrentBlock);
  if (newCurrentBlock != myCurrentBlock) {
    myCurrentBlock=newCurrentBlock;
    onCurrentLineChanged();
    return false;
  }
  return true;
}
