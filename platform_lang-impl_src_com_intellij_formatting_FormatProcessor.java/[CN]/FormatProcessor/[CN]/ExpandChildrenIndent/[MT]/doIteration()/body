{
  if (myIterator == null) {
    myIterator=myExpandableIndents.keySet().iterator();
  }
  if (!myIterator.hasNext()) {
    setDone(true);
    return;
  }
  Collection<AbstractBlockWrapper> blocksToExpandIndent=myExpandableIndents.get(myIterator.next());
  if (shouldExpand(blocksToExpandIndent)) {
    for (    AbstractBlockWrapper block : blocksToExpandIndent) {
      ExpandableIndent indent=(ExpandableIndent)block.getIndent();
      indent.setEnforceIndent(true);
      reindentNewLineChildren(block);
      indent.setEnforceIndent(false);
    }
  }
}
