{
  if (file.isDirectory() || !file.isWritable() || FileTypeRegistry.getInstance().isFileIgnored(file)|| file.getFileType().isBinary()|| file.equals(project.getProjectFile())|| file.equals(project.getWorkspaceFile())) {
    return false;
  }
  Module module=FileIndexFacade.getInstance(project).getModuleForFile(file);
  return module == null || !ModuleUtilCore.isModuleFile(module,file);
}
