{
  final Project project=env.getProject();
  final RunProfileState state=env.getState();
  if (state == null) {
    return;
  }
  RunManager.getInstance(project).refreshUsagesList(env.getRunProfile());
  final AsyncResult<RunProfileStarter> result=prepare(project,env,state);
  result.doWhenProcessed(new Runnable(){
    @Override public void run(){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          startRunProfile(project,env,state,callback,result.getResult());
        }
      }
);
    }
  }
);
}
