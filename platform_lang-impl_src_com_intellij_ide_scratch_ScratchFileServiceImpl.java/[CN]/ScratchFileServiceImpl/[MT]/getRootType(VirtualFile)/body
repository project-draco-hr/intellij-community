{
  if (!file.isInLocalFileSystem())   return null;
  LocalFileSystem fileSystem=LocalFileSystem.getInstance();
  VirtualFile rootRoot=fileSystem.findFileByPath(getRootPath());
  if (rootRoot == null || !VfsUtilCore.isAncestor(rootRoot,file,true))   return null;
  for (  RootType r : RootType.getAllRootIds()) {
    String root=getRootPath(r);
    VirtualFile rootFile=fileSystem.findFileByPath(root);
    if (rootFile != null && VfsUtilCore.isAncestor(rootFile,file,false))     return r;
  }
  return null;
}
