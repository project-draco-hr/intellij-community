{
  if (project == null || file == null || !(fileType instanceof ScratchFileType))   return null;
  RootType rootType=ScratchFileService.getInstance().getRootType(file);
  if (rootType == null)   return null;
  Language language=rootType.substituteLanguage(project,file);
  SyntaxHighlighter highlighter=language == null ? null : SyntaxHighlighterFactory.getSyntaxHighlighter(language,project,file);
  if (highlighter != null)   return highlighter;
  FileType originalFileType=RootType.getOriginalFileType(file);
  highlighter=originalFileType == null ? null : SyntaxHighlighterFactory.getSyntaxHighlighter(originalFileType,project,file);
  return highlighter;
}
