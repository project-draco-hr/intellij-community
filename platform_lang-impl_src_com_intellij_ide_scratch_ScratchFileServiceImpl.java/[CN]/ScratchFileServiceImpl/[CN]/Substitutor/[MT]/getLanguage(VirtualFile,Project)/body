{
  if (file.getFileType() != SCRATCH_FILE_TYPE)   return null;
  PerFileMappings<Language> mapping=ScratchFileService.getInstance().getScratchesMapping();
  Language language=mapping.getMapping(file);
  return language != null && language != SCRATCH_FILE_TYPE.getLanguage() ? LanguageSubstitutors.INSTANCE.substituteLanguage(language,file,project) : language;
}
