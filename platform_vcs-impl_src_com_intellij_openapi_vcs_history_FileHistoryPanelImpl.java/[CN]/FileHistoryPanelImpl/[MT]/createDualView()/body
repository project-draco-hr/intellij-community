{
  myDualView.setShowGrid(true);
  PopupHandler.installPopupHandler(myDualView.getTreeView(),myPopupActions,ActionPlaces.UPDATE_POPUP,ActionManager.getInstance());
  PopupHandler.installPopupHandler(myDualView.getFlatView(),myPopupActions,ActionPlaces.UPDATE_POPUP,ActionManager.getInstance());
  myDualView.requestFocus();
  myDualView.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      updateMessage();
    }
  }
);
  myDualView.setRootVisible(false);
  myDualView.expandAll();
  final TreeCellRenderer defaultCellRenderer=myDualView.getTree().getCellRenderer();
  final Getter<VcsHistorySession> sessionGetter=new Getter<VcsHistorySession>(){
    public VcsHistorySession get(){
      return myHistorySession;
    }
  }
;
  myDualView.setTreeCellRenderer(new MyTreeCellRenderer(defaultCellRenderer,sessionGetter));
  myDualView.setCellWrapper(new MyCellWrapper(sessionGetter));
  myDualView.installDoubleClickHandler(new MyDiffAction());
  final TableView flatView=myDualView.getFlatView();
  TableViewModel sortableModel=flatView.getTableViewModel();
  sortableModel.setSortable(true);
  final RowSorter<? extends TableModel> rowSorter=flatView.getRowSorter();
  if (rowSorter != null) {
    rowSorter.setSortKeys(Arrays.asList(new RowSorter.SortKey(0,SortOrder.DESCENDING)));
  }
}
