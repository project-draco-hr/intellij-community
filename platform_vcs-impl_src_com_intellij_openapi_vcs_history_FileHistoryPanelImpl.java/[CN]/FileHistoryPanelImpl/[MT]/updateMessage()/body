{
  List selection=getSelection();
  final VcsFileRevision revision;
  if (selection.size() != 1) {
    revision=null;
    myComments.setText("");
    myOriginalComment="";
  }
 else {
    revision=getFirstSelectedRevision();
    if (revision != null) {
      String message=revision.getCommitMessage();
      myOriginalComment=message;
      if (StringUtil.isEmpty(message)) {
        myComments.setText("");
      }
 else {
        myComments.setText("<html><head>" + UIUtil.getCssFontDeclaration(UIUtil.getLabelFont()) + "</head><body>"+ getHtmlWithFonts(formatTextWithLinks(myVcs.getProject(),message))+ "</body></html>");
        myComments.setCaretPosition(0);
      }
    }
  }
  if (myListener != null) {
    myListener.consume(revision);
  }
}
