{
  List selection=getSelection();
  final VcsFileRevision revision;
  if (selection.size() != 1) {
    revision=null;
    myComments.setText("");
    myOriginalComment="";
  }
 else {
    revision=getFirstSelectedRevision();
    if (revision != null) {
      final String message=revision.getCommitMessage();
      myOriginalComment=message;
      @NonNls final String text=message == null ? "" : "<html><head>" + UIUtil.getCssFontDeclaration(UIUtil.getLabelFont()) + "</head><body>"+ FontUtil.getHtmlWithFonts(IssueLinkHtmlRenderer.formatTextWithLinks(myVcs.getProject(),message))+ "</body></html>";
      myComments.setText(text);
      myComments.setCaretPosition(0);
    }
  }
  if (myListener != null) {
    myListener.consume(revision);
  }
}
