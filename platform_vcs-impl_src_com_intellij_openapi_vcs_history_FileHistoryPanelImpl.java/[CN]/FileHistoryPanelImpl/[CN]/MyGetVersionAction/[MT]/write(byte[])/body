{
  if (getVirtualFile() == null) {
    writeContentToIOFile(revision);
  }
 else {
    Document document=null;
    VirtualFile virtualFile=myFilePath.getVirtualFile();
    if (virtualFile != null && !virtualFile.getFileType().isBinary()) {
      document=FileDocumentManager.getInstance().getDocument(virtualFile);
    }
    if (document == null) {
      writeContentToFile(revision);
    }
 else {
      writeContentToDocument(document,revision);
    }
  }
}
