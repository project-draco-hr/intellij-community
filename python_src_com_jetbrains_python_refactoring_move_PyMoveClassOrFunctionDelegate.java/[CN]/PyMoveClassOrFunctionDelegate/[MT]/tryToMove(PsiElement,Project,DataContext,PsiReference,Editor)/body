{
  final PsiNamedElement e=getElementToMove(element);
  if (e instanceof PyClass || e instanceof PyFunction) {
    if (PyPsiUtils.isTopLevel(e)) {
      PsiElement targetContainer=null;
      if (editor != null) {
        final Document document=editor.getDocument();
        targetContainer=PsiDocumentManager.getInstance(project).getPsiFile(document);
      }
      doMove(project,new PsiElement[]{e},targetContainer,null);
    }
 else {
      CommonRefactoringUtil.showErrorHint(project,editor,PyBundle.message("refactoring.move.class.or.function.error.selection"),RefactoringBundle.message("error.title"),null);
    }
    return true;
  }
  return false;
}
