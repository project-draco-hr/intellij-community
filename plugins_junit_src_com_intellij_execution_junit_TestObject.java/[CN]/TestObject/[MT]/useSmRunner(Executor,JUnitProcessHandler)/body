{
  TestConsoleProperties testConsoleProperties=new SMTRunnerConsoleProperties(myConfiguration,JUNIT_TEST_FRAMEWORK_NAME,executor);
  testConsoleProperties.setIfUndefined(TestConsoleProperties.HIDE_PASSED_TESTS,false);
  final ConsoleView consoleView=SMTestRunnerConnectionUtil.createConsoleWithCustomLocator(JUNIT_TEST_FRAMEWORK_NAME,testConsoleProperties,myEnvironment,null);
  Disposer.register(myConfiguration.getProject(),consoleView);
  consoleView.attachToProcess(handler);
  RerunFailedTestsAction rerunFailedTestsAction=new RerunFailedTestsAction(consoleView,testConsoleProperties);
  rerunFailedTestsAction.setModelProvider(new Getter<TestFrameworkRunningModel>(){
    @Override public TestFrameworkRunningModel get(){
      return ((SMTRunnerConsoleView)consoleView).getResultsViewer();
    }
  }
);
  final DefaultExecutionResult result=new DefaultExecutionResult(consoleView,handler);
  result.setRestartActions(rerunFailedTestsAction);
  return result;
}
