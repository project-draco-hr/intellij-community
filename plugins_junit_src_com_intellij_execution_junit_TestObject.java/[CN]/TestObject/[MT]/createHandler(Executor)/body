{
  appendForkInfo(executor);
  final String repeatMode=getConfiguration().getRepeatMode();
  if (!RepeatCount.ONCE.equals(repeatMode)) {
    final int repeatCount=getConfiguration().getRepeatCount();
    final String countString=RepeatCount.N.equals(repeatMode) && repeatCount > 0 ? RepeatCount.getCountString(repeatCount) : repeatMode;
    getJavaParameters().getProgramParametersList().add(countString);
  }
  final OSProcessHandler processHandler=new KillableColoredProcessHandler(createCommandLine());
  ProcessTerminatedListener.attach(processHandler);
  final SearchForTestsTask searchForTestsTask=createSearchingForTestsTask();
  if (searchForTestsTask != null) {
    searchForTestsTask.attachTaskToProcess(processHandler);
  }
  return processHandler;
}
