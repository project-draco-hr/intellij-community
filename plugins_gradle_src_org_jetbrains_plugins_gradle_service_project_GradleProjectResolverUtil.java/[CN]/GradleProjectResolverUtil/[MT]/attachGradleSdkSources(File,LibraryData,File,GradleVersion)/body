{
  if (libFile == null || !libFile.getName().startsWith("gradle-"))   return;
  if (!FileUtil.isAncestor(gradleHomeDir,libFile,true))   return;
  File libOrPluginsFile=libFile.getParentFile();
  if (libOrPluginsFile != null && ("plugins".equals(libOrPluginsFile.getName()))) {
    libOrPluginsFile=libOrPluginsFile.getParentFile();
  }
  if (libOrPluginsFile != null && "lib".equals(libOrPluginsFile.getName()) && libOrPluginsFile.getParentFile() != null) {
    File srcDir=new File(libOrPluginsFile.getParentFile(),"src");
    if (gradleVersion.compareTo(GradleVersion.version("1.9")) >= 0) {
      int endIndex=libFile.getName().indexOf(gradleVersion.getVersion());
      if (endIndex != -1) {
        String srcDirChild=libFile.getName().substring("gradle-".length(),endIndex - 1);
        srcDir=new File(srcDir,srcDirChild);
      }
    }
    if (srcDir.isDirectory()) {
      library.addPath(LibraryPathType.SOURCE,srcDir.getAbsolutePath());
    }
  }
}
