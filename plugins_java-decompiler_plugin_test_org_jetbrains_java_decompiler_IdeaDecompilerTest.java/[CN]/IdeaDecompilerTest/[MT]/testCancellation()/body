{
  final VirtualFile file=getTestFile(PlatformTestUtil.getRtJarPath() + "!/javax/swing/JTable.class");
  final IdeaDecompiler decompiler=(IdeaDecompiler)ClassFileDecompilers.find(file);
  assertNotNull(decompiler);
  final Alarm alarm=new Alarm(Alarm.ThreadToUse.SWING_THREAD,getProject());
  alarm.addRequest(new Runnable(){
    @Override public void run(){
      ProgressIndicator progress=decompiler.getProgress(file);
      if (progress != null) {
        progress.cancel();
      }
 else {
        alarm.addRequest(this,200,ModalityState.any());
      }
    }
  }
,750,ModalityState.any());
  try {
    FileDocumentManager.getInstance().getDocument(file);
    fail("should have been cancelled");
  }
 catch (  ProcessCanceledException ignored) {
  }
}
