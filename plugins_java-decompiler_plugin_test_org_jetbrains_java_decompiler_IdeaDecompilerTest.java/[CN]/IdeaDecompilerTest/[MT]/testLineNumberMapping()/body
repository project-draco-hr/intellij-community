{
  RegistryValue value=Registry.get("decompiler.use.line.mapping");
  boolean old=value.asBoolean();
  try {
    value.setValue(true);
    VirtualFile file=getTestFile("LineNumbers.class");
    assertNull(file.getUserData(PositionManager.LINE_NUMBERS_MAPPING_KEY));
    new IdeaDecompiler().getText(file);
    int[] mapping=file.getUserData(PositionManager.LINE_NUMBERS_MAPPING_KEY);
    assertNotNull(mapping);
    assertEquals(20,mapping.length);
  }
  finally {
    value.setValue(old);
  }
}
