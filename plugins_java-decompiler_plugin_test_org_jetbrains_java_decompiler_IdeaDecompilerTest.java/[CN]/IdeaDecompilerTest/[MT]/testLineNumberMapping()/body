{
  RegistryValue value=Registry.get("decompiler.use.line.mapping");
  boolean old=value.asBoolean();
  try {
    value.setValue(true);
    VirtualFile file=getTestFile("LineNumbers.class");
    assertNull(file.getUserData(LineNumbersMapping.LINE_NUMBERS_MAPPING_KEY));
    new IdeaDecompiler().getText(file);
    LineNumbersMapping mapping=file.getUserData(LineNumbersMapping.LINE_NUMBERS_MAPPING_KEY);
    assertNotNull(mapping);
    assertEquals(11,mapping.bytecodeToSource(3));
    assertEquals(23,mapping.bytecodeToSource(13));
  }
  finally {
    value.setValue(old);
  }
}
