{
  final CommonCodeStyleSettings settings=getCommonCodeStyleSettings();
  final int oldValue=settings.RIGHT_MARGIN;
  settings.RIGHT_MARGIN=margin;
  try {
    String baseName="/fillParagraph/" + getTestName(true);
    myFixture.configureByFile(baseName + ".py");
    CommandProcessor.getInstance().executeCommand(myFixture.getProject(),new Runnable(){
      @Override public void run(){
        FillParagraphAction action=new FillParagraphAction();
        action.actionPerformed(new AnActionEvent(null,DataManager.getInstance().getDataContext(),"",action.getTemplatePresentation(),ActionManager.getInstance(),0));
      }
    }
,"",null);
    myFixture.checkResultByFile(baseName + "_after.py",true);
  }
  finally {
    settings.RIGHT_MARGIN=oldValue;
  }
}
