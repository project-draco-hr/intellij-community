{
  final PsiBuilder builder;
  if (lexer instanceof ForeignTokenClassifierLexer) {
    builder=new MasqueradingPsiBuilderAdapter(project,parserDefinition,((ForeignTokenClassifierLexer)lexer),chameleon,chameleon.getChars());
  }
 else {
    builder=new PsiBuilderImpl(project,parserDefinition,lexer,chameleon,chameleon.getChars());
  }
  return builder;
}
