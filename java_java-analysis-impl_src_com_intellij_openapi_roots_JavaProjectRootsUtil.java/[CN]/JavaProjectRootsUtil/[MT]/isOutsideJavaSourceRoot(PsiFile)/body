{
  if (psiFile == null)   return false;
  if (psiFile instanceof PsiCodeFragment)   return false;
  final VirtualFile file=psiFile.getVirtualFile();
  if (file == null)   return false;
  final ProjectFileIndex projectFileIndex=ProjectRootManager.getInstance(psiFile.getProject()).getFileIndex();
  return !projectFileIndex.isUnderSourceRootOfType(file,JavaModuleSourceRootTypes.SOURCES) && !projectFileIndex.isInLibrarySource(file) && !projectFileIndex.isInLibraryClasses(file);
}
