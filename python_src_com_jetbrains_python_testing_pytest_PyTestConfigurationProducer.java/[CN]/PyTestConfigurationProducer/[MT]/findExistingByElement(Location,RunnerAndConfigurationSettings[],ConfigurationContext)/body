{
  for (  RunnerAndConfigurationSettings existingConfiguration : existingConfigurations) {
    final RunConfiguration configuration=existingConfiguration.getConfiguration();
    if (configuration instanceof PyTestRunConfiguration) {
      final PsiElement element=location.getPsiElement();
      PsiFileSystemItem file=element instanceof PsiDirectory ? (PsiDirectory)element : element.getContainingFile();
      final VirtualFile virtualFile=file.getVirtualFile();
      if (virtualFile == null || !((PyTestRunConfiguration)configuration).getTestToRun().equals(virtualFile.getPath())) {
        continue;
      }
      PyFunction testFunction=findTestFunction(location);
      String keyword=testFunction != null ? testFunction.getName() : null;
      if (Comparing.equal(((PyTestRunConfiguration)configuration).getKeywords(),keyword)) {
        return existingConfiguration;
      }
    }
  }
  return null;
}
