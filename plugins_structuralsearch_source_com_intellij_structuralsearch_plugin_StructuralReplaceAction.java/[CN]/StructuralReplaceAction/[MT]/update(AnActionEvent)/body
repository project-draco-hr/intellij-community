{
  final Presentation presentation=event.getPresentation();
  final DataContext context=event.getDataContext();
  final Project project=CommonDataKeys.PROJECT.getData(context);
  final StructuralSearchPlugin plugin=(project == null) ? null : StructuralSearchPlugin.getInstance(project);
  if (plugin == null || plugin.isSearchInProgress() || plugin.isReplaceInProgress() || plugin.isDialogVisible()) {
    presentation.setEnabled(false);
  }
 else {
    presentation.setEnabled(true);
  }
  super.update(event);
}
