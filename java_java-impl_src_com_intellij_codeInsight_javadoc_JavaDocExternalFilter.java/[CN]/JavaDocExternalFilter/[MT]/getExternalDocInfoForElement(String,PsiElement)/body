{
  CharSequence externalDoc=null;
  String builtInServer="http://localhost:" + BuiltInServerOptions.getInstance().getEffectiveBuiltInServerPort() + "/"+ myProject.getName()+ "/";
  if (docURL.startsWith(builtInServer)) {
    VirtualFile file=WebServerPathToFileManager.getInstance(myProject).get(docURL.substring(builtInServer.length()));
    if (file != null) {
      InputStreamReader reader=new InputStreamReader(file.getInputStream(),CharsetToolkit.UTF8_CHARSET);
      StringBuilder result=new StringBuilder();
      try {
        doBuildFromStream(docURL,reader,result);
      }
  finally {
        reader.close();
      }
      externalDoc=result;
    }
  }
  if (externalDoc == null) {
    externalDoc=super.getExternalDocInfoForElement(docURL,element);
  }
  if (externalDoc == null) {
    return null;
  }
  if (element instanceof PsiMethod) {
    final String className=ApplicationManager.getApplication().runReadAction(new NullableComputable<String>(){
      @Override @Nullable public String compute(){
        PsiClass aClass=((PsiMethod)element).getContainingClass();
        return aClass == null ? null : aClass.getQualifiedName();
      }
    }
);
    Matcher matcher=ourMethodHeading.matcher(externalDoc);
    StringBuilder buffer=new StringBuilder("<h3>");
    DocumentationManager.createHyperlink(buffer,className,className,false);
    return matcher.replaceFirst(buffer.append("</h3>").toString());
  }
  return externalDoc.toString();
}
