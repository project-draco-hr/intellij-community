{
  CachedValuesManager manager=getManager(psi.getProject());
  return manager.getCachedValue(psi,manager.<T>getKeyForClass(provider.getClass()),new CachedValueProvider<T>(){
    @Nullable @Override public Result<T> compute(){
      Result<T> result=provider.compute();
      if (result != null && !psi.isPhysical()) {
        return Result.create(result.getValue(),ArrayUtil.append(result.getDependencyItems(),psi));
      }
      return result;
    }
  }
,false);
}
