{
  Product product=myUpdatesInfo.getProduct(myCurrentBuild.getProductCode());
  if (product == null || product.getChannels().isEmpty()) {
    return new CheckForUpdateResult(State.NOTHING_LOADED,null);
  }
  UpdateChannel updatedChannel=null;
  BuildInfo newBuild=null;
  List<UpdateChannel> activeChannels=getActiveChannels(product);
  for (  UpdateChannel channel : activeChannels) {
    BuildInfo latestBuild=channel.getLatestBuild(myCurrentBuild.getBaselineVersion());
    if (latestBuild == null || latestBuild.getNumber().compareTo(myCurrentBuild) <= 0) {
      latestBuild=channel.getLatestBuild();
    }
    if (isNewVersion(latestBuild)) {
      updatedChannel=channel;
      newBuild=latestBuild;
      break;
    }
  }
  UpdateChannel channelToPropose=null;
  for (  UpdateChannel channel : product.getChannels()) {
    if (!myUpdateSettings.getKnownChannelsIds().contains(channel.getId()) && channel.getMajorVersion() >= myMajorVersion && channel.getStatus().compareTo(myChannelStatus) >= 0 && isNewVersion(channel.getLatestBuild()) && (channelToPropose == null || isBetter(channelToPropose,channel))) {
      channelToPropose=channel;
    }
  }
  return new CheckForUpdateResult(newBuild,updatedChannel,channelToPropose,product.getAllChannelIds());
}
