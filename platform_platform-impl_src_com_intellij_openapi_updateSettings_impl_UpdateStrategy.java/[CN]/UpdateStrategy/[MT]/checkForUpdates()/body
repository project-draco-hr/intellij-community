{
  Product product=myUpdatesInfo.getProduct(myCurrentBuild.getProductCode());
  if (product == null || product.getChannels().isEmpty()) {
    return new CheckForUpdateResult(State.NOTHING_LOADED,null);
  }
  UpdateChannel updatedChannel=null;
  BuildInfo newBuild=null;
  List<UpdateChannel> activeChannels=getActiveChannels(product);
  for (  UpdateChannel channel : activeChannels) {
    if (hasNewVersion(channel)) {
      updatedChannel=channel;
      newBuild=updatedChannel.getLatestBuild();
      break;
    }
  }
  UpdateChannel channelToPropose=null;
  for (  UpdateChannel channel : product.getChannels()) {
    if (!myUpdateSettings.getKnownChannelsIds().contains(channel.getId()) && channel.getMajorVersion() >= myMajorVersion && channel.getStatus().compareTo(myChannelStatus) >= 0 && hasNewVersion(channel) && (channelToPropose == null || isBetter(channelToPropose,channel))) {
      channelToPropose=channel;
    }
  }
  return new CheckForUpdateResult(newBuild,updatedChannel,channelToPropose,product.getAllChannelIds());
}
