{
  final Module module=ModuleManager.getInstance(project).getModules()[0];
  final PyDocumentationSettings documentationSettings=PyDocumentationSettings.getInstance(module);
  if (documentationSettings.isPlain(function.getContainingFile())) {
    final String[] values={DocStringFormat.EPYTEXT,DocStringFormat.REST};
    final int i=Messages.showChooseDialog("Docstring format:","Select Docstring Type",values,DocStringFormat.EPYTEXT,null);
    if (i < 0)     return;
    final String value=values[i];
    documentationSettings.setFormat(value);
  }
  PyDocstringGenerator docstringGenerator=new PyDocstringGenerator(function).withSignatures();
  if (function.getDocStringValue() == null) {
    docstringGenerator.withReturn();
  }
  docstringGenerator.build();
}
