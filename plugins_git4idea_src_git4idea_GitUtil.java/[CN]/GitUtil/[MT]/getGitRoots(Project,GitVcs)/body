{
  final VirtualFile[] contentRoots=ProjectLevelVcsManager.getInstance(project).getRootsUnderVcs(vcs);
  if (contentRoots == null || contentRoots.length == 0) {
    throw new VcsException(GitBundle.getString("repository.action.missing.roots.unconfigured.message"));
  }
  final List<VirtualFile> sortedRoots=DvcsUtil.sortVirtualFilesByPresentation(gitRootsForPaths(Arrays.asList(contentRoots)));
  if (sortedRoots.size() == 0) {
    throw new VcsException(GitBundle.getString("repository.action.missing.roots.misconfigured"));
  }
  return sortedRoots;
}
