{
  super.checkConfiguration();
  if (StringUtil.isEmptyOrSpaces(getSdkHome())) {
    final Sdk projectSdk=ProjectRootManager.getInstance(getProject()).getProjectJdk();
    if (projectSdk == null || !(projectSdk.getSdkType() instanceof PythonSdkType)) {
      throw new RuntimeConfigurationException(PyBundle.message("runcfg.unittest.no_sdk"));
    }
  }
 else   if (!PythonSdkType.getInstance().isValidSdkHome(getSdkHome())) {
    throw new RuntimeConfigurationException(PyBundle.message("runcfg.unittest.no_valid_sdk"));
  }
}
