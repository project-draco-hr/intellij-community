{
  super.checkConfiguration();
  if (PythonProduct.isPyCharm()) {
    final String path=getInterpreterPath();
    if (path == null) {
      throw new RuntimeConfigurationError("Please select a valid Python interpreter");
    }
  }
 else {
    if (!myUseModuleSdk) {
      if (StringUtil.isEmptyOrSpaces(getSdkHome())) {
        final Sdk projectSdk=ProjectRootManager.getInstance(getProject()).getProjectSdk();
        if (projectSdk == null || !(projectSdk.getSdkType() instanceof PythonSdkType)) {
          throw new RuntimeConfigurationError(PyBundle.message("runcfg.unittest.no_sdk"));
        }
      }
 else       if (!PythonSdkType.getInstance().isValidSdkHome(getSdkHome())) {
        throw new RuntimeConfigurationError(PyBundle.message("runcfg.unittest.no_valid_sdk"));
      }
    }
 else {
      Sdk sdk=PythonSdkType.findPythonSdk(getModule());
      if (sdk == null) {
        throw new RuntimeConfigurationError(PyBundle.message("runcfg.unittest.no_module_sdk"));
      }
    }
  }
}
