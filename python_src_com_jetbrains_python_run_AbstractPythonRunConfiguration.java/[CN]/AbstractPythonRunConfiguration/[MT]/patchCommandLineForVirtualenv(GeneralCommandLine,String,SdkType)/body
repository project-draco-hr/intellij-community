{
  String path_value;
  if (sdk_type instanceof PythonSdkType) {
    File virtualenv_root=PythonSdkType.getVirtualEnvRoot(sdk_home);
    if (virtualenv_root != null) {
      String virtualenv_bin=new File(virtualenv_root,"bin").getPath();
      if (isPassParentEnvs()) {
        path_value=System.getenv("PATH");
        path_value=appendToPathEnvVar(path_value,virtualenv_bin);
      }
 else       path_value=virtualenv_bin;
      Map<String,String> new_env=cloneEnv(commandLine.getEnvParams());
      String existing_path=new_env.get("PATH");
      if (existing_path == null || existing_path.indexOf(virtualenv_bin) < 0) {
        new_env.put("PATH",path_value);
        commandLine.setEnvParams(new_env);
      }
    }
  }
}
