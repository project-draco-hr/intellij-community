{
  if (icon != null) {
    myIcon=icon;
  }
  myDoNotAskOption=doNotAskOption;
  myDoNotAskResult=(doNotAskOption != null) && !doNotAskOption.isToBeShown();
  mySheetMessage=sheetMessage;
  buttons=new JButton[buttonTitles.length];
  myResult=null;
  int defaultButtonIndex=-1;
  int focusedButtonIndex=-1;
  boolean moveFocusedToTheLeft=defaultButtonTitle != null && defaultButtonTitle.equals(focusedButtonTitle);
  for (int i=0; i < buttons.length; i++) {
    String buttonTitle=buttonTitles[i];
    buttons[i]=new JButton();
    buttons[i].setOpaque(false);
    handleMnemonics(i,buttonTitle);
    if (buttonTitle.equals(defaultButtonTitle)) {
      defaultButtonIndex=i;
    }
    if (buttonTitle.equals("Cancel")) {
      moveFocusedToTheLeft=true;
    }
    if (buttonTitle.equals(focusedButtonTitle)) {
      focusedButtonIndex=moveFocusedToTheLeft ? buttons.length - 1 : i;
    }
  }
  defaultButtonIndex=(focusedButtonIndex == defaultButtonIndex) || defaultButtonTitle == null ? 0 : defaultButtonIndex;
  if (focusedButtonIndex != -1 && !moveFocusedToTheLeft) {
    myFocusedComponent=buttons[focusedButtonIndex];
  }
 else   if (doNotAskOption != null) {
    myFocusedComponent=doNotAskCheckBox;
  }
 else {
    myFocusedComponent=buttons[buttons.length - 1];
  }
  myDefaultButton=(defaultButtonIndex == -1) ? buttons[0] : buttons[defaultButtonIndex];
  if (myResult == null) {
    myResult=Messages.CANCEL_BUTTON;
  }
  mySheetPanel=createSheetPanel(title,message,buttons);
  initShadowImage();
}
