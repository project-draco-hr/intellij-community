{
  if (icon != null) {
    myIcon=icon;
  }
  myDoNotAskOption=doNotAskOption;
  myDoNotAskResult=(doNotAskOption != null) && !doNotAskOption.isToBeShown();
  mySheetMessage=sheetMessage;
  buttons=new JButton[buttonTitles.length];
  myResult=null;
  int defaultButtonIndex=-1;
  int focusedButtonIndex=-1;
  for (int i=0; i < buttons.length; i++) {
    String buttonTitle=buttonTitles[i];
    buttons[i]=new JButton();
    buttons[i].setOpaque(false);
    handleMnemonics(i,buttonTitle);
    if (buttonTitle.equals(defaultButtonTitle)) {
      defaultButtonIndex=i;
    }
    if (buttonTitle.equals(focusedButton)) {
      focusedButtonIndex=i;
    }
  }
  myFocusedButton=(focusedButtonIndex == -1) ? buttons[buttons.length - 1] : buttons[focusedButtonIndex];
  myDefaultButton=(defaultButtonIndex == -1 && focusedButtonIndex != defaultButtonIndex) ? buttons[0] : buttons[defaultButtonIndex];
  myDefaultButton=buttons[0];
  if (myFocusedButton == null) {
    myFocusedButton=myDefaultButton;
  }
  if (myResult == null) {
    myResult=Messages.CANCEL_BUTTON;
  }
  mySheetPanel=createSheetPanel(title,message,buttons);
  initShadowImage();
}
