{
  Trinity<Charset,CharsetToolkit.GuessedEncoding,byte[]> guessed=LoadTextUtil.guessFromContent(file,content,content.length);
  Charset charset=guessed == null || guessed.first == null ? EncodingRegistry.getInstance().getDefaultCharsetForPropertiesFiles(file) : guessed.first;
  if (charset == null) {
    charset=CharsetToolkit.getDefaultSystemCharset();
  }
  if (EncodingRegistry.getInstance().isNative2Ascii(file)) {
    charset=Native2AsciiCharset.wrap(charset);
  }
  return charset.name();
}
