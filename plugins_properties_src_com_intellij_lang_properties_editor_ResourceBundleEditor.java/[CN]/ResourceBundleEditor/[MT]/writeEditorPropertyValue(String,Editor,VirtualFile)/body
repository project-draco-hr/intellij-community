{
  final String currentValue=editor.getDocument().getText();
  final String currentSelectedProperty=propertyName == null ? getSelectedPropertyName() : propertyName;
  if (currentSelectedProperty == null) {
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      WriteCommandAction.runWriteCommandAction(myProject,new Runnable(){
        @Override public void run(){
          try {
            if (currentValue.isEmpty() && ResourceBundleEditorKeepEmptyValueToggleAction.keepEmptyProperties() && propertiesFile.equals(myResourceBundle.getDefaultPropertiesFile().getVirtualFile())) {
              myPropertiesInsertDeleteManager.deletePropertyIfExist(currentSelectedProperty,PropertiesImplUtil.getPropertiesFile(propertiesFile,myProject));
            }
 else {
              myPropertiesInsertDeleteManager.insertOrUpdateTranslation(currentSelectedProperty,currentValue,PropertiesImplUtil.getPropertiesFile(propertiesFile,myProject));
            }
          }
 catch (          final IncorrectOperationException e) {
            LOG.error(e);
          }
        }
      }
);
    }
  }
);
}
