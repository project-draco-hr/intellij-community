{
  final String currentValue=editor.getDocument().getText();
  final String currentSelectedProperty=propertyName == null ? getSelectedPropertyName() : propertyName;
  if (currentSelectedProperty == null) {
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      WriteCommandAction.runWriteCommandAction(myProject,new Runnable(){
        @Override public void run(){
          try {
            if (currentValue.isEmpty() && ResourceBundleEditorKeepEmptyValueToggleAction.keepEmptyProperties() && !PsiManager.getInstance(myProject).areElementsEquivalent(propertiesFile.getContainingFile(),myResourceBundle.getDefaultPropertiesFile().getContainingFile())) {
              myPropertiesInsertDeleteManager.deletePropertyIfExist(currentSelectedProperty,propertiesFile);
            }
 else {
              myPropertiesInsertDeleteManager.insertOrUpdateTranslation(currentSelectedProperty,currentValue,propertiesFile);
            }
          }
 catch (          final IncorrectOperationException e) {
            LOG.error(e);
          }
        }
      }
);
    }
  }
);
}
