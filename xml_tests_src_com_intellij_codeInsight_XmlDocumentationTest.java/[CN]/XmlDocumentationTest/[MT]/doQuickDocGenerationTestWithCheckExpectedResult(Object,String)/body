{
  final DocumentationTestContext context=new DocumentationTestContext(baseFileNames);
  String pathname=getTestDataPath() + baseFileNames[0] + ".expected.html";
  VirtualFile vfile=LocalFileSystem.getInstance().findFileByIoFile(new File(pathname));
  assertNotNull(pathname + " not found",vfile);
  String expectedText=StringUtil.convertLineSeparators(VfsUtilCore.loadText(vfile));
  String text=context.generateDoc();
  assertNotNull(text);
  assertEquals(stripFirstLine(expectedText),stripFirstLine(StringUtil.convertLineSeparators(text)));
  if (completionVariant != null) {
    vfile=LocalFileSystem.getInstance().findFileByIoFile(new File(getTestDataPath() + baseFileNames[0] + ".expected.completion.html"));
    expectedText=StringUtil.convertLineSeparators(VfsUtilCore.loadText(vfile),"\n");
    assertEquals(stripFirstLine(expectedText),stripFirstLine(StringUtil.convertLineSeparators(context.generateDocForCompletion(completionVariant),"\n")));
  }
}
