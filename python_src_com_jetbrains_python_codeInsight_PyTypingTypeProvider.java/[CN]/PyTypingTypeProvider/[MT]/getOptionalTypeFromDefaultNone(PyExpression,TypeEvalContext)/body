{
  if (expression instanceof PySubscriptionExpression) {
    final PySubscriptionExpression subscriptionExpr=(PySubscriptionExpression)expression;
    final PyExpression operand=subscriptionExpr.getOperand();
    final String operandName=resolveToQualifiedName(operand,context);
    if ("typing.Optional".equals(operandName)) {
      final PyExpression indexExpr=subscriptionExpr.getIndexExpression();
      if (indexExpr != null) {
        final PyType type=getType(indexExpr,context);
        if (type != null) {
          return Ref.create(PyUnionType.union(type,PyNoneType.INSTANCE));
        }
      }
      return Ref.create();
    }
  }
  return null;
}
