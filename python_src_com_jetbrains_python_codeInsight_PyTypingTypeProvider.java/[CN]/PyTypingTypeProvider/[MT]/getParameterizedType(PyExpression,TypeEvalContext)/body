{
  if (expression instanceof PySubscriptionExpression) {
    final PySubscriptionExpression subscriptionExpr=(PySubscriptionExpression)expression;
    final PyExpression operand=subscriptionExpr.getOperand();
    final PyExpression indexExpr=subscriptionExpr.getIndexExpression();
    final PyType operandType=getType(operand,context);
    if (operandType instanceof PyClassType) {
      final PyClass cls=((PyClassType)operandType).getPyClass();
      if (PyNames.TUPLE.equals(cls.getQualifiedName())) {
        final List<PyType> indexTypes=getIndexTypes(subscriptionExpr,context);
        return PyTupleType.create(expression,indexTypes.toArray(new PyType[indexTypes.size()]));
      }
 else       if (indexExpr != null) {
        final PyType indexType=context.getType(indexExpr);
        return new PyCollectionTypeImpl(cls,false,indexType);
      }
    }
  }
  return null;
}
