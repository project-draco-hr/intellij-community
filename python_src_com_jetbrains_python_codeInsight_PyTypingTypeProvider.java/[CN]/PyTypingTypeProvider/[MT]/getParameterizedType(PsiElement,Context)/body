{
  if (element instanceof PySubscriptionExpression) {
    final PySubscriptionExpression subscriptionExpr=(PySubscriptionExpression)element;
    final PyExpression operand=subscriptionExpr.getOperand();
    final PyExpression indexExpr=subscriptionExpr.getIndexExpression();
    final PyType operandType=getType(operand,context);
    if (operandType instanceof PyClassType) {
      final PyClass cls=((PyClassType)operandType).getPyClass();
      final List<PyType> indexTypes=getIndexTypes(subscriptionExpr,context);
      if (PyNames.TUPLE.equals(cls.getQualifiedName())) {
        if (indexExpr instanceof PyTupleExpression) {
          final PyExpression[] elements=((PyTupleExpression)indexExpr).getElements();
          if (elements.length == 2 && isEllipsis(elements[1])) {
            return PyTupleType.createHomogeneous(element,indexTypes.get(0));
          }
        }
        return PyTupleType.create(element,indexTypes.toArray(new PyType[indexTypes.size()]));
      }
 else       if (indexExpr != null) {
        return new PyCollectionTypeImpl(cls,false,indexTypes);
      }
    }
  }
  return null;
}
