{
  if (expression instanceof PyReferenceExpression) {
    final PyReferenceExpression referenceExpr=(PyReferenceExpression)expression;
    final PyResolveContext resolveContext=PyResolveContext.noImplicits().withTypeEvalContext(context);
    final PsiPolyVariantReference reference=referenceExpr.getReference(resolveContext);
    final PsiElement element=reference.resolve();
    if (element instanceof PyFunction) {
      final PyFunction function=(PyFunction)element;
      if (PyUtil.isInit(function)) {
        final PyClass cls=function.getContainingClass();
        if (cls != null) {
          return cls;
        }
      }
    }
 else     if (element instanceof PyTargetExpression) {
      final PyTargetExpression targetExpr=(PyTargetExpression)element;
      final PyExpression assignedValue=targetExpr.findAssignedValue();
      if (assignedValue != null) {
        return assignedValue;
      }
    }
    if (element != null) {
      return element;
    }
  }
  return expression;
}
