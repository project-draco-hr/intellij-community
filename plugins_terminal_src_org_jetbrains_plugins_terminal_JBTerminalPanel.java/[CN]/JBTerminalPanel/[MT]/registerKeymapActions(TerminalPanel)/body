{
  Keymap keymap=KeymapManager.getInstance().getActiveKeymap();
  String[] actionIds=keymap.getActionIds();
  ActionManager actionManager=ActionManager.getInstance();
  for (  String actionId : actionIds) {
    final AnAction action=actionManager.getAction(actionId);
    if (action != null) {
      AnAction a=new DumbAwareAction(){
        @Override public void actionPerformed(        AnActionEvent e){
          if (e.getInputEvent() instanceof KeyEvent) {
            AnActionEvent event=new AnActionEvent(e.getInputEvent(),e.getDataContext(),e.getPlace(),new Presentation(),e.getActionManager(),e.getModifiers());
            action.update(event);
            if (event.getPresentation().isEnabled()) {
              action.actionPerformed(event);
            }
 else {
              terminalPanel.handleKeyEvent((KeyEvent)event.getInputEvent());
            }
            event.getInputEvent().consume();
          }
        }
      }
;
      for (      Shortcut sc : action.getShortcutSet().getShortcuts()) {
        if (sc.isKeyboard() && sc instanceof KeyboardShortcut) {
          KeyboardShortcut ksc=(KeyboardShortcut)sc;
          a.registerCustomShortcutSet(ksc.getFirstKeyStroke().getKeyCode(),ksc.getFirstKeyStroke().getModifiers(),terminalPanel);
        }
      }
    }
  }
}
