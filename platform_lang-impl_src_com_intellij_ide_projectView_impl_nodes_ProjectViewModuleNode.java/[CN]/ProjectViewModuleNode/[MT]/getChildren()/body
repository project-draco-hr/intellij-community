{
  Module module=getValue();
  if (module == null || module.isDisposed()) {
    return Collections.emptyList();
  }
  final List<VirtualFile> contentRoots=ProjectViewDirectoryHelper.getInstance(myProject).getTopLevelModuleRoots(module,getSettings());
  final List<AbstractTreeNode> children=new ArrayList<>(contentRoots.size());
  final PsiManager psiManager=PsiManager.getInstance(module.getProject());
  for (  final VirtualFile contentRoot : contentRoots) {
    if (contentRoot.isDirectory()) {
      PsiDirectory directory=psiManager.findDirectory(contentRoot);
      if (directory != null) {
        children.add(new PsiDirectoryNode(getProject(),directory,getSettings()));
      }
    }
 else {
      PsiFile file=psiManager.findFile(contentRoot);
      if (file != null) {
        children.add(new PsiFileNode(getProject(),file,getSettings()));
      }
    }
  }
  return children;
}
