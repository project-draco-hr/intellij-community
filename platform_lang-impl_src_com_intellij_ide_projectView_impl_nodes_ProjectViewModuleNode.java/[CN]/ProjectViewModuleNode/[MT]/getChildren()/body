{
  Module module=getValue();
  if (module == null || module.isDisposed()) {
    return Collections.emptyList();
  }
  ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
  ModuleFileIndex moduleFileIndex=rootManager.getFileIndex();
  final VirtualFile[] contentRoots=rootManager.getContentRoots();
  final List<AbstractTreeNode> children=new ArrayList<AbstractTreeNode>(contentRoots.length + 1);
  final PsiManager psiManager=PsiManager.getInstance(module.getProject());
  for (  final VirtualFile contentRoot : contentRoots) {
    if (!moduleFileIndex.isInContent(contentRoot))     continue;
    if (contentRoot.isDirectory()) {
      PsiDirectory directory=psiManager.findDirectory(contentRoot);
      if (directory != null) {
        children.add(new PsiDirectoryNode(getProject(),directory,getSettings()));
      }
    }
 else {
      PsiFile file=psiManager.findFile(contentRoot);
      if (file != null) {
        children.add(new PsiFileNode(getProject(),file,getSettings()));
      }
    }
  }
  return children;
}
