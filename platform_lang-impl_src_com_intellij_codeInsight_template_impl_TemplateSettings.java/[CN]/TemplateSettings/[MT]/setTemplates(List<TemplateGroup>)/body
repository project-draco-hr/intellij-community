{
  myTemplates.clear();
  myState.deletedKeys.clear();
  for (  TemplateImpl template : myDefaultTemplates.values()) {
    myState.deletedKeys.add(TemplateKey.keyOf(template));
  }
  myMaxKeyLength=0;
  List<TemplateGroup> schemes=new SmartList<TemplateGroup>();
  for (  TemplateGroup group : newGroups) {
    if (!group.isEmpty()) {
      schemes.add(group);
      for (      TemplateImpl template : group.getElements()) {
        clearPreviouslyRegistered(template);
        addTemplateImpl(template);
      }
    }
  }
  mySchemesManager.setSchemes(schemes);
}
