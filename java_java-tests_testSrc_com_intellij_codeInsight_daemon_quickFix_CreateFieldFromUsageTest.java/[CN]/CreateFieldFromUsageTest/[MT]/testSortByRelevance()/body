{
  new WriteCommandAction(getProject()){
    @Override protected void run(    @NotNull Result result) throws Exception {
      VirtualFile foo=getSourceRoot().createChildDirectory(this,"foo").createChildData(this,"Foo.java");
      VfsUtil.saveText(foo,"package foo; public class Foo { public void put(Object key, Object value) {} }");
      PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
    }
  }
.execute();
  PsiClass aClass=JavaPsiFacade.getInstance(getProject()).findClass("foo.Foo",GlobalSearchScope.allScope(getProject()));
  assertNotNull(aClass);
  doSingleTest();
}
