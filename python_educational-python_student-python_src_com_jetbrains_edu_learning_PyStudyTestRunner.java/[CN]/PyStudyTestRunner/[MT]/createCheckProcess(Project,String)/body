{
  final Sdk sdk=PythonSdkType.findPythonSdk(ModuleManager.getInstance(project).getModules()[0]);
  Course course=myTask.getLesson().getCourse();
  StudyLanguageManager manager=StudyUtils.getLanguageManager(course);
  if (manager == null) {
    LOG.info("Language manager is null for " + course.getLanguageById().getDisplayName());
    return null;
  }
  String testsFileName=manager.getTestFileName();
  final File testRunner=new File(myTaskDir.getPath(),testsFileName);
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.withWorkDirectory(myTaskDir.getPath());
  final Map<String,String> env=commandLine.getEnvironment();
  final VirtualFile courseDir=project.getBaseDir();
  if (courseDir != null) {
    env.put(PYTHONPATH,courseDir.getPath());
  }
  if (sdk != null) {
    String pythonPath=sdk.getHomePath();
    if (pythonPath != null) {
      commandLine.setExePath(pythonPath);
      commandLine.addParameter(testRunner.getPath());
      File resourceFile=new File(course.getCourseDirectory());
      commandLine.addParameter(resourceFile.getPath());
      commandLine.addParameter(FileUtil.toSystemDependentName(executablePath));
      return commandLine.createProcess();
    }
  }
  return null;
}
