{
  final JPanel basePanel=createBasePanel();
  initGeneratorListeners();
  registerValidators();
  final JPanel mainPanel=new JPanel(new BorderLayout());
  final JPanel scrollPanel=new JPanel(new BorderLayout());
  myErrorLabel=new JLabel("");
  myErrorLabel.setForeground(JBColor.RED);
  myCreateButton=new JButton("Create");
  myCreateButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      boolean isValid=checkValid();
      if (isValid && myCallback != null) {
        final DialogWrapper dialog=DialogWrapper.findInstance(myCreateButton);
        if (dialog != null) {
          dialog.close(DialogWrapper.OK_EXIT_CODE);
        }
        myCallback.consume(ProjectSettingsStepBase.this);
      }
    }
  }
);
  myCreateButton.putClientProperty(DialogWrapper.DEFAULT_ACTION,Boolean.TRUE);
  scrollPanel.add(basePanel,BorderLayout.NORTH);
  final JPanel advancedSettings=createAdvancedSettings();
  if (advancedSettings != null) {
    scrollPanel.add(advancedSettings,BorderLayout.CENTER);
  }
  final JBScrollPane scrollPane=new JBScrollPane(scrollPanel,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
  scrollPane.setBorder(null);
  mainPanel.add(scrollPane,BorderLayout.CENTER);
  final JPanel bottomPanel=new JPanel(new BorderLayout());
  bottomPanel.add(myErrorLabel,BorderLayout.NORTH);
  bottomPanel.add(myCreateButton,BorderLayout.EAST);
  mainPanel.add(bottomPanel,BorderLayout.SOUTH);
  UIUtil.setBackgroundRecursively(mainPanel,FlatWelcomeFrame.getMainBackground());
  return mainPanel;
}
