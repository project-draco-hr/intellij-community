{
  if (expression instanceof PsiFunctionalExpression) {
    return true;
  }
 else   if (expression instanceof PsiParenthesizedExpression) {
    return isPolyExpression(((PsiParenthesizedExpression)expression).getExpression());
  }
 else   if (expression instanceof PsiNewExpression && PsiDiamondTypeUtil.hasDiamond((PsiNewExpression)expression)) {
    return isInAssignmentOrInvocationContext(expression);
  }
 else   if (expression instanceof PsiMethodCallExpression) {
    final MethodCandidateInfo.CurrentCandidateProperties candidateProperties=MethodCandidateInfo.getCurrentMethod(((PsiMethodCallExpression)expression).getArgumentList());
    return isMethodCallPolyExpression(expression,candidateProperties != null ? candidateProperties.getMethod() : ((PsiMethodCallExpression)expression).resolveMethod());
  }
 else   if (expression instanceof PsiConditionalExpression) {
    final ConditionalKind conditionalKind=isBooleanOrNumeric(expression);
    if (conditionalKind == null) {
      return isInAssignmentOrInvocationContext(expression);
    }
  }
  return false;
}
