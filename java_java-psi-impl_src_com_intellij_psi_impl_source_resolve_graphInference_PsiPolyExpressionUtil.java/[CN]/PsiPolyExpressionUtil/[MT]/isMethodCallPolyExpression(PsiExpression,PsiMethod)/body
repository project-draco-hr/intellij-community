{
  if (isInAssignmentOrInvocationContext(expression) && ((PsiCallExpression)expression).getTypeArguments().length == 0) {
    if (method != null) {
      final Set<PsiTypeParameter> typeParameters=new HashSet<PsiTypeParameter>(Arrays.asList(method.getTypeParameters()));
      if (!typeParameters.isEmpty()) {
        final PsiType returnType=method.getReturnType();
        if (returnType != null) {
          return mentionsTypeParameters(returnType,typeParameters);
        }
      }
 else       if (method.isConstructor() && expression instanceof PsiNewExpression && PsiDiamondTypeUtil.hasDiamond((PsiNewExpression)expression)) {
        return true;
      }
    }
 else {
      return true;
    }
  }
  return false;
}
