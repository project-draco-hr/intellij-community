{
  String name=descriptor.getName(element);
  if (name != null && isOptionalEndForHtmlTag(name)) {
    PsiElement parent=element.getParent();
    if (parent != null) {
      parent=parent.getParent();
    }
    if (parent instanceof HtmlTag) {
      final XmlElementDescriptor parentDescriptor=((HtmlTag)parent).getDescriptor();
      if (parentDescriptor != descriptor && parentDescriptor != null) {
        for (        final XmlElementDescriptor elementsDescriptor : parentDescriptor.getElementsDescriptors((XmlTag)parent)) {
          if (isHtmlBlockTag(elementsDescriptor.getName())) {
            variants.add(elementsDescriptor);
          }
        }
      }
    }
 else     if (parent instanceof HtmlDocumentImpl) {
      final XmlNSDescriptor nsDescriptor=descriptor.getNSDescriptor();
      for (      XmlElementDescriptor elementDescriptor : nsDescriptor.getRootElementsDescriptors((XmlDocument)parent)) {
        if (isHtmlBlockTag(elementDescriptor.getName()) && !variants.contains(elementDescriptor)) {
          variants.add(elementDescriptor);
        }
      }
    }
  }
}
