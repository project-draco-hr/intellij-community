{
  String name=data.name;
  int idx=1;
  while (true) {
    if (nameGenerator.isUnique(name,"","")) {
      final PsiVariable definedVariable=PsiResolveHelper.SERVICE.getInstance(expr.getProject()).resolveReferencedVariable(name,expr);
      if (definedVariable == null || !scope.containsRange(expr.getContainingFile(),definedVariable.getTextRange())) {
        data.name=name;
        nameGenerator.addExistingName(name);
        break;
      }
    }
    name=data.name + idx++;
  }
}
