{
  final boolean copyExcluded=myInstructionsBuilder.getRootsIndex().isExcluded(directory);
  SourceFileFilter fileFilter=new SourceFileFilterImpl(filter,myInstructionsBuilder.getRootsIndex(),myInstructionsBuilder.getIgnoredFileIndex(),copyExcluded);
  DestinationInfo destination=createDirectoryDestination();
  if (destination != null) {
    ArtifactRootDescriptor descriptor=myInstructionsBuilder.createFileBasedRoot(directory,fileFilter,destination,copyingHandler);
    if (myInstructionsBuilder.addDestination(descriptor)) {
      onAdded(descriptor);
    }
  }
}
