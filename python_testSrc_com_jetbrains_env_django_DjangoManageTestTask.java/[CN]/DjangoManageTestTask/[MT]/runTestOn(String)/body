{
  mySdk=createTempSdk(sdkHome,SdkCreationType.SDK_PACKAGES_ONLY);
  before();
  final Semaphore s=new Semaphore();
  s.down();
  myOutput=new StringBuilder();
  myStdErr=new StringBuilder();
  myStdOut=new StringBuilder();
  runProcess(sdkHome,s);
  try {
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      @Override public void run(){
        try {
          testing();
        }
 catch (        Exception e) {
          throw new RuntimeException(e);
        }
      }
    }
);
    Assert.assertTrue(s.waitFor(60000));
    XDebuggerTestUtil.waitForSwing();
    after();
  }
  finally {
    disposeProcess(myProcessHandler);
  }
}
