{
  HierarchyService service=HierarchyService.instance(myProject);
  service.clear();
  LOG.info("BuildHierarchy started");
  final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  LOG.info("read classes start");
  processUnits(service,false);
  indicator.setFraction(0.3);
  testMemory("0");
  LOG.info("complete classes start");
  service.connect1();
  indicator.setFraction(0.4);
  testMemory("1");
  LOG.info("read sources start");
  processUnits(service,true);
  indicator.setFraction(0.7);
  service.complete2();
  LOG.info("Complete end");
  testMemory("2");
  indicator.setFraction(0.9);
  service.connectSubtypes();
  LOG.info("Subtypes connected");
}
