{
  PluginId id=descriptor.getPluginId();
  IdeaPluginDescriptor existing=PluginManager.getPlugin(id);
  if (existing == null || (existing.isBundled() && !existing.allowBundledUpdate()) || wasUpdated(id)) {
    return;
  }
  boolean supersedes=PluginManagerCore.isCompatible(descriptor) && PluginDownloader.compareVersionsSkipBrokenAndIncompatible(existing,descriptor.getVersion()) > 0;
  String idString=id.getIdString();
synchronized (myLock) {
    if (supersedes) {
      myOutdatedPlugins.add(idString);
    }
 else {
      myOutdatedPlugins.remove(idString);
    }
  }
}
