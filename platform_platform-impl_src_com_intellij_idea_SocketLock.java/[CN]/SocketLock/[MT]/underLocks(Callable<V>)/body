{
  FileUtilRt.createDirectory(new File(myConfigPath));
  FileOutputStream lock1=new FileOutputStream(new File(myConfigPath,PORT_LOCK_FILE),true);
  try {
    FileUtilRt.createDirectory(new File(mySystemPath));
    FileOutputStream lock2=new FileOutputStream(new File(mySystemPath,PORT_LOCK_FILE),true);
    try {
      return action.call();
    }
  finally {
      lock2.close();
    }
  }
  finally {
    lock1.close();
  }
}
