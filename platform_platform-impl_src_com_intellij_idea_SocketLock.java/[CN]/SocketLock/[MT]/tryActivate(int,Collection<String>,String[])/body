{
  log("trying: port=%s",portNumber);
  try {
    Socket socket=new Socket(NetUtils.getLoopbackAddress(),portNumber);
    try {
      socket.setSoTimeout(300);
      boolean result=false;
      @SuppressWarnings("IOResourceOpenedButNotSafelyClosed") DataInputStream in=new DataInputStream(socket.getInputStream());
      while (true) {
        try {
          String path=in.readUTF();
          log("read: path=%s",path);
          if (paths.contains(path)) {
            result=true;
          }
        }
 catch (        IOException e) {
          log("read: %s",e.getMessage());
          break;
        }
      }
      if (result) {
        try {
          @SuppressWarnings("IOResourceOpenedButNotSafelyClosed") DataOutputStream out=new DataOutputStream(socket.getOutputStream());
          out.writeUTF(ACTIVATE_COMMAND + new File(".").getAbsolutePath() + "\0"+ StringUtil.join(args,"\0"));
          out.flush();
          String response=in.readUTF();
          log("read: response=%s",response);
          if (response.equals("ok")) {
            return ActivateStatus.ACTIVATED;
          }
        }
 catch (        IOException e) {
          log(e);
        }
        return ActivateStatus.CANNOT_ACTIVATE;
      }
    }
  finally {
      socket.close();
    }
  }
 catch (  IOException e) {
    log(e);
  }
  return ActivateStatus.NO_INSTANCE;
}
