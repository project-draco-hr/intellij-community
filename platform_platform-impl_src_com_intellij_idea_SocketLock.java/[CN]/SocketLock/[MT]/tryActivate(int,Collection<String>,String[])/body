{
  Socket socket=null;
  try {
    socket=new Socket(NetUtils.getLoopbackAddress(),portNumber);
    socket.setSoTimeout(300);
    boolean result=false;
    DataInputStream in=new DataInputStream(socket.getInputStream());
    while (true) {
      try {
        String path=in.readUTF();
        if (paths.contains(path)) {
          result=true;
        }
      }
 catch (      IOException ignored) {
        break;
      }
    }
    if (result) {
      try {
        DataOutputStream out=new DataOutputStream(socket.getOutputStream());
        out.writeUTF(ACTIVATE_COMMAND + new File(".").getAbsolutePath() + "\0"+ StringUtil.join(args,"\0"));
        out.flush();
        String response=in.readUTF();
        if (response.equals("ok")) {
          return ActivateStatus.ACTIVATED;
        }
      }
 catch (      IOException e) {
        LOG.info(e);
      }
      return ActivateStatus.CANNOT_ACTIVATE;
    }
  }
 catch (  IOException e) {
    LOG.debug(e);
  }
 finally {
    if (socket != null) {
      try {
        socket.close();
      }
 catch (      IOException e) {
        LOG.debug(e);
      }
    }
  }
  return ActivateStatus.NO_INSTANCE;
}
