{
  final Component editorComponent=inputComboBox.getEditor().getEditorComponent();
  if (editorComponent instanceof EditorTextField) {
    boolean isRegexp=myCbRegularExpressions.isSelectedWhenSelectable();
    FileType fileType=PlainTextFileType.INSTANCE;
    if (isRegexp) {
      FileType regexpFileType=FileTypeManager.getInstance().getFileTypeByFileName("a.regexp");
      if (regexpFileType != FileTypes.UNKNOWN) {
        fileType=regexpFileType;
      }
    }
    String fileName=isRegexp ? "a.regexp" : "a.txt";
    final PsiFile file=PsiFileFactory.getInstance(myProject).createFileFromText(fileName,fileType,((EditorTextField)editorComponent).getText(),-1,true);
    ((EditorTextField)editorComponent).setNewDocumentAndFileType(fileType,PsiDocumentManager.getInstance(myProject).getDocument(file));
  }
}
