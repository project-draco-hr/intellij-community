{
  final FilePath filePath1=ChangesUtil.getFilePath(o1);
  final FilePath filePath2=ChangesUtil.getFilePath(o2);
  if (myTreeCompare) {
    final String path1=FileUtilRt.toSystemIndependentName(filePath1.getPath());
    final String path2=FileUtilRt.toSystemIndependentName(filePath2.getPath());
    if (path1.compareToIgnoreCase(path2) == 0) {
      return 0;
    }
    final int lastSlash1=path1.lastIndexOf('/');
    final String parentPath1=lastSlash1 >= 0 && !filePath1.isDirectory() ? path1.substring(0,lastSlash1) : path1;
    final int lastSlash2=path2.lastIndexOf('/');
    final String parentPath2=lastSlash2 >= 0 && !filePath2.isDirectory() ? path2.substring(0,lastSlash2) : path2;
    if (FileUtil.isAncestor(parentPath2,parentPath1,true)) {
      return -1;
    }
 else     if (FileUtil.isAncestor(parentPath1,parentPath2,true)) {
      return 1;
    }
    int parentPathComparison=parentPath1.compareToIgnoreCase(parentPath2);
    if (parentPathComparison != 0) {
      return parentPathComparison;
    }
  }
  return filePath1.getName().compareToIgnoreCase(filePath2.getName());
}
