{
  Course course=StudyTaskManager.getInstance(project).getCourse();
  if (course == null) {
    return;
  }
  StudyState studyState=new StudyState(StudyUtils.getSelectedStudyEditor(project));
  if (!studyState.isValid()) {
    return;
  }
  PsiFile file=PsiManager.getInstance(project).findFile(studyState.getVirtualFile());
  final Editor editor=studyState.getEditor();
  int offset=editor.getCaretModel().getOffset();
  AnswerPlaceholder answerPlaceholder=studyState.getTaskFile().getAnswerPlaceholder(offset);
  if (file == null) {
    return;
  }
  EduUsagesCollector.hintShown();
  LinkedList<String> hints=new LinkedList<>();
  if (answerPlaceholder != null) {
    hints.addAll(answerPlaceholder.getHints());
  }
 else {
    hints.add(ourWarningMessage);
  }
  final StudyToolWindow hintComponent=new StudyHint(answerPlaceholder,project).getStudyToolWindow();
  showHintPopUp(project,studyState,editor,hintComponent);
}
