{
  String path;
  if (myAcceptUnescapedUrls) {
    path=url.getFile();
  }
 else {
    try {
      path=url.toURI().getSchemeSpecificPart();
    }
 catch (    URISyntaxException thisShouldNotHappen) {
      thisShouldNotHappen.printStackTrace();
      path=url.getFile();
    }
  }
  Loader loader=null;
  if (path != null && URLUtil.FILE_PROTOCOL.equals(url.getProtocol())) {
    File file=new File(path);
    if (file.isDirectory()) {
      loader=new FileLoader(url,index);
    }
 else     if (file.isFile()) {
      loader=new JarLoader(url,myCanLockJars,index);
      if (myPreloadJarContents) {
        ((JarLoader)loader).preloadClasses();
      }
    }
  }
  if (loader != null && myCanUseCache) {
    try {
      ClasspathCache.LoaderData loaderData=new ClasspathCache.LoaderData(loader);
      loader.buildCache(loaderData);
      myCache.applyLoaderData(loaderData);
    }
 catch (    Throwable e) {
    }
  }
  return loader;
}
