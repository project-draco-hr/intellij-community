{
  if (file.isDirectory()) {
    return new FileLoader(url,index,myCanHavePersistentIndex);
  }
 else   if (file.isFile()) {
    Loader loader=new JarLoader(url,myCanLockJars,index,myPreloadJarContents);
    if (processRecursively) {
      final String[] referencedJars=loadManifestClasspath(file);
      if (referencedJars != null) {
        for (        String referencedJar : referencedJars) {
          final URI uri;
          final File referencedFile;
          try {
            uri=new URI(referencedJar);
            referencedFile=new File(uri);
          }
 catch (          Exception e) {
            continue;
          }
          final URL referencedUrl=uri.toURL();
          Loader referencedLoader=createLoader(referencedUrl,index++,referencedFile,false);
          if (referencedLoader != null) {
            initLoader(referencedUrl,false,referencedLoader);
          }
        }
      }
    }
    return loader;
  }
  return null;
}
