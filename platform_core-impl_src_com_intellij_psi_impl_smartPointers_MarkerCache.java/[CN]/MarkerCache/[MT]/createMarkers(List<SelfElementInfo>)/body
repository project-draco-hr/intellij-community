{
  ManualRangeMarker[] markers=new ManualRangeMarker[infos.size()];
  int i=0;
  while (i < markers.length) {
    SelfElementInfo info=infos.get(i);
    boolean forInjected=info.isForInjected();
    ProperTextRange range=ObjectUtils.assertNotNull(info.getPsiRange());
    markers[i]=new ManualRangeMarker(range,forInjected,forInjected,!forInjected,null);
    i++;
    while (i < markers.length && rangeEquals(infos.get(i),range,forInjected)) {
      markers[i]=markers[i - 1];
      i++;
    }
  }
  return markers;
}
