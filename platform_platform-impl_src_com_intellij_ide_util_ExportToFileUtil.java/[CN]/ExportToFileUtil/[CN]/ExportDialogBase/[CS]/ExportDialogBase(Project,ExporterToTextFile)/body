{
  super(project,true);
  myProject=project;
  myExporter=exporter;
  myTfFile=new TextFieldWithBrowseButton();
  myTfFile.addBrowseFolderListener(new TextBrowseFolderListener(FileChooserDescriptorFactory.createSingleFileOrFolderDescriptor(),myProject){
    @NotNull @Override protected String chosenFileToResultingText(    @NotNull VirtualFile chosenFile){
      String res=super.chosenFileToResultingText(chosenFile);
      if (chosenFile.isDirectory()) {
        res+=File.separator + PathUtil.getFileName(myExporter.getDefaultFilePath());
      }
      return res;
    }
  }
);
  setTitle(IdeBundle.message("title.export.preview"));
  setOKButtonText(IdeBundle.message("button.save"));
  setButtonsMargin(null);
  init();
  try {
    myListener=new ChangeListener(){
      public void stateChanged(      ChangeEvent e){
        initText();
      }
    }
;
    myExporter.addSettingsChangedListener(myListener);
  }
 catch (  TooManyListenersException e) {
    LOG.error(e);
  }
  initText();
}
