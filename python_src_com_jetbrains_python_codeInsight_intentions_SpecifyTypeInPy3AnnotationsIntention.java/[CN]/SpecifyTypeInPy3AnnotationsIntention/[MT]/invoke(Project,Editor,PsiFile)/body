{
  final PsiElement elementAt=PyUtil.findNonWhitespaceAtOffset(file,editor.getCaretModel().getOffset());
  final PyExpression problemElement=getProblemElement(elementAt);
  final PsiReference reference=problemElement == null ? null : problemElement.getReference();
  final PsiElement resolved=reference != null ? reference.resolve() : null;
  final PyNamedParameter parameter=getParameter(problemElement,resolved);
  if (parameter != null) {
    annotateParameter(project,editor,parameter);
  }
 else {
    annotateReturnType(project,editor.getDocument(),elementAt);
  }
}
