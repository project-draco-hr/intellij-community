{
  final StringBuilder builder=new StringBuilder();
  escapeStringCharacters(s.length(),s,isSingleLine ? "'" : "",isSingleLine,true,builder);
  if (!forInjection) {
    unescapeCharacters(builder,isSingleLine ? "$\"" : "$'\"",true);
  }
  if (!isSingleLine)   escapeLastSymbols(builder,'\'');
  return builder.toString();
}
