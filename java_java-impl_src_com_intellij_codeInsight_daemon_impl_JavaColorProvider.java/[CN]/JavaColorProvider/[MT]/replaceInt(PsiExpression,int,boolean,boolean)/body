{
  PsiElementFactory factory=JavaPsiFacade.getElementFactory(expr.getProject());
  if (getInt(expr) != newValue) {
    final Color c=new Color(newValue,hasAlpha);
    String text;
    if (hex) {
      text="0x";
      if (hasAlpha) {
        text+=Integer.toHexString(c.getAlpha());
      }
      text+=ColorUtil.toHex(c).toUpperCase();
    }
 else {
      text=Integer.toString(newValue);
    }
    expr.replace(factory.createExpressionFromText(text,null));
  }
}
