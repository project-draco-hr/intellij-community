{
  final JsonReader in=new JsonReader(reader);
  in.setLenient(true);
  in.beginObject();
  final JsonSchemaObject object=new JsonSchemaObject();
  final JsonSchemaGeneralObjectTypeAdapter adapter=new JsonSchemaGeneralObjectTypeAdapter();
  while (in.peek() == JsonToken.NAME) {
    final String name=in.nextName();
    adapter.readSomeProperty(in,name,object);
  }
  processReferences(object,adapter.getAllObjects(),adapter.getIds(),definitions);
  final ArrayList<JsonSchemaObject> withoutDefinitions=new ArrayList<JsonSchemaObject>(adapter.getAllObjects());
  removeDefinitions(object,withoutDefinitions);
  return object;
}
