{
  PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  PyStatementList list=function.getStatementList();
  PsiWhiteSpace whitespace=PsiTreeUtil.getPrevSiblingOfType(list,PsiWhiteSpace.class);
  String ws="\n";
  if (whitespace != null) {
    String[] spaces=whitespace.getText().split("\n");
    if (spaces.length > 1)     ws=ws + whitespace.getText().split("\n")[1];
  }
  String docContent=ws + generateDocumentationContentStub(function,ws,true);
  PyExpressionStatement string=elementGenerator.createDocstring("\"\"\"" + docContent + "\"\"\"");
  if (list.getStatements().length != 0)   list.addBefore(string,list.getStatements()[0]);
  if (editor != null) {
    int offset=function.getDocStringExpression().getTextOffset();
    editor.getCaretModel().moveToOffset(offset);
    editor.getCaretModel().moveCaretRelatively(0,1,false,false,false);
  }
}
