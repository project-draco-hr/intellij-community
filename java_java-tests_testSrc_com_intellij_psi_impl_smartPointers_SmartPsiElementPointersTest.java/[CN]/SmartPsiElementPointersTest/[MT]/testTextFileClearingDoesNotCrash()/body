{
  configureByText(PlainTextFileType.INSTANCE,"foo bar goo\n");
  SmartPsiElementPointer pointer=createPointer(myFile.getFirstChild());
  PlatformTestUtil.tryGcSoftlyReachableObjects();
  assertEquals(myFile.getFirstChild(),pointer.getElement());
  Document document=myFile.getViewProvider().getDocument();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      document.deleteString(0,document.getTextLength());
    }
  }
);
  PlatformTestUtil.tryGcSoftlyReachableObjects();
  assertEquals(myFile.getFirstChild(),pointer.getElement());
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  PlatformTestUtil.tryGcSoftlyReachableObjects();
  assertEquals(myFile.getFirstChild(),pointer.getElement());
}
