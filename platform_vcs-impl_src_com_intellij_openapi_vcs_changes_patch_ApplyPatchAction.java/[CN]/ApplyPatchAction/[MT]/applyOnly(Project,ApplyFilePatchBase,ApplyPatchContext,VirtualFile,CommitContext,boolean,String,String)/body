{
  final ApplyFilePatch.Result result=tryApplyPatch(project,patch,context,file,commitContext);
  final ApplyPatchStatus status=result.getStatus();
  if (ApplyPatchStatus.ALREADY_APPLIED.equals(status) || ApplyPatchStatus.SUCCESS.equals(status)) {
    return status;
  }
  final ApplyPatchForBaseRevisionTexts mergeData=result.getMergeData();
  if (mergeData == null)   return status;
  if (mergeData.getBase() != null) {
    return showMergeDialog(project,file,mergeData.getBase(),mergeData.getPatched(),reverse,leftPanelTitle,rightPanelTitle);
  }
 else {
    return showBadMergeDialog(project,file,mergeData);
  }
}
