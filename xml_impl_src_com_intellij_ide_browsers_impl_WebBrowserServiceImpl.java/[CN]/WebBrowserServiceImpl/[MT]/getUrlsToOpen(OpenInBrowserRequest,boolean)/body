{
  boolean isHtmlOrXml=isHtmlOrXmlFile(request.getFile().getViewProvider().getBaseLanguage());
  if (!preferLocalUrl || !isHtmlOrXml) {
    DumbService dumbService=DumbService.getInstance(request.getProject());
    for (    WebBrowserUrlProvider urlProvider : WebBrowserUrlProvider.EP_NAME.getExtensions()) {
      if ((!dumbService.isDumb() || DumbService.isDumbAware(urlProvider)) && urlProvider.canHandleElement(request)) {
        Collection<Url> urls=getUrls(urlProvider,request);
        if (!urls.isEmpty()) {
          return urls;
        }
      }
    }
    if (!isHtmlOrXml) {
      return Collections.emptyList();
    }
  }
  VirtualFile file=request.getVirtualFile();
  return file instanceof LightVirtualFile || !request.getFile().getViewProvider().isPhysical() ? Collections.<Url>emptyList() : Collections.singletonList(Urls.newFromVirtualFile(file));
}
