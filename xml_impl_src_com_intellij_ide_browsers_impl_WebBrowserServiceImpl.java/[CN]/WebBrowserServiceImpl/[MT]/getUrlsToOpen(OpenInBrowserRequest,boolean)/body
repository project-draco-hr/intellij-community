{
  VirtualFile virtualFile=request.getVirtualFile();
  if (virtualFile instanceof HttpVirtualFile) {
    return Collections.singleton(Urls.newFromVirtualFile(virtualFile));
  }
  if (!preferLocalUrl || !isHtmlOrXmlFile(request.getFile())) {
    WebBrowserUrlProvider provider=getProvider(request);
    if (provider != null) {
      if (request.getResult() != null) {
        return request.getResult();
      }
      try {
        Collection<Url> urls=provider.getUrls(request);
        if (!urls.isEmpty()) {
          return urls;
        }
      }
 catch (      WebBrowserUrlProvider.BrowserException e) {
        if (!HtmlUtil.isHtmlFile(request.getFile())) {
          throw e;
        }
      }
    }
  }
  return virtualFile instanceof LightVirtualFile || !request.getFile().getViewProvider().isPhysical() ? Collections.<Url>emptySet() : Collections.singleton(Urls.newFromVirtualFile(virtualFile));
}
