{
  PsiElement paren=getLastChild();
  if (paren != null && ")".equals(paren.getText())) {
    ASTNode beforeWhat=paren.getNode();
    PyParameter[] params=getParameters();
    final boolean hasDefaultValue=param.hasDefaultValue();
    boolean isLast=true;
    for (    PyParameter p : params) {
      if (!hasDefaultValue && p.hasDefaultValue()) {
        beforeWhat=p.getNode();
        isLast=false;
        break;
      }
      if (p instanceof PyNamedParameter) {
        PyNamedParameter named=(PyNamedParameter)p;
        if (named.isKeywordContainer() || named.isPositionalContainer()) {
          beforeWhat=p.getNode();
          isLast=false;
          break;
        }
      }
    }
    final ASTNode previous=PyUtil.getPreviousNonWhitespace(beforeWhat);
    PyUtil.addListNode(this,param,beforeWhat,!isLast || params.length == 0 || previous.getElementType() == PyTokenTypes.COMMA,isLast,beforeWhat.getElementType() != PyTokenTypes.RPAR);
  }
}
