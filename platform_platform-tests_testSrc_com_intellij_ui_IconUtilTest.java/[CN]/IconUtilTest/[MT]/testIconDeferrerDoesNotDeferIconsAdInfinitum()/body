{
  VirtualFile file=createTempFile("txt",null,"hkjh",CharsetToolkit.UTF8_CHARSET);
  Icon icon=IconUtil.getIcon(file,Iconable.ICON_FLAG_VISIBILITY,getProject());
  assertTrue(icon instanceof DeferredIcon);
  Graphics g=createMockGraphics();
  icon.paintIcon(new JLabel(),g,0,0);
  TimeoutUtil.sleep(1000);
  Icon icon2=IconUtil.getIcon(file,Iconable.ICON_FLAG_VISIBILITY,getProject());
  assertSame(icon,icon2);
  FileContentUtilCore.reparseFiles(file);
  Icon icon3=IconUtil.getIcon(file,Iconable.ICON_FLAG_VISIBILITY,getProject());
  assertNotSame(icon2,icon3);
}
