{
  if (offset > 0) {
    PsiElement element=psiFile.findElementAt(offset - 1);
    if (element != null) {
      ASTNode node=element.getNode();
      if (node != null) {
        if (node.getElementType() == PyTokenTypes.FLOAT_LITERAL) {
          return ThreeState.YES;
        }
        if (PyTokenTypes.STRING_NODES.contains(node.getElementType())) {
          final PsiElement parent=element.getParent();
          if (parent instanceof PyStringLiteralExpression) {
            final List<TextRange> ranges=((PyStringLiteralExpression)parent).getStringValueTextRanges();
            int relativeOffset=offset - parent.getTextRange().getStartOffset();
            if (ranges.size() > 0 && relativeOffset < ranges.get(0).getStartOffset()) {
              return ThreeState.YES;
            }
          }
        }
      }
    }
  }
  return super.shouldSkipAutopopup(contextElement,psiFile,offset);
}
