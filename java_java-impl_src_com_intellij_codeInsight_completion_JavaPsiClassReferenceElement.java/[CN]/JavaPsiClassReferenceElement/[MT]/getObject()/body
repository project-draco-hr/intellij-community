{
  if (myClass instanceof PsiAnchor) {
    PsiClass psiClass=SoftReference.dereference(myCache);
    if (psiClass != null) {
      return psiClass;
    }
    PsiAnchor anchor=(PsiAnchor)myClass;
    final PsiClass retrieve=(PsiClass)anchor.retrieve();
    if (retrieve == null) {
      throw new AssertionError(myQualifiedName + "; anchor=" + anchor+ "; diagnostics="+ (anchor instanceof PsiAnchor.StubIndexReference ? ((PsiAnchor.StubIndexReference)anchor).diagnoseNull() : null));
    }
    myCache=new WeakReference<PsiClass>(retrieve);
    return retrieve;
  }
  return (PsiClass)myClass;
}
