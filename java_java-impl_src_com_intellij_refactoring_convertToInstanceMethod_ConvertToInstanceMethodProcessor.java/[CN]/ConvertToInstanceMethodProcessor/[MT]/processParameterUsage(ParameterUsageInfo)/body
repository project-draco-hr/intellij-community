{
  final PsiReference reference=usage.getReferenceExpression();
  if (reference instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)reference;
    PsiElement parent=referenceExpression.getParent();
    if (parent instanceof PsiReferenceExpression && sameUnqualified(parent)) {
      referenceExpression.delete();
    }
 else {
      final PsiExpression expression=JavaPsiFacade.getInstance(myMethod.getProject()).getElementFactory().createExpressionFromText("this",null);
      referenceExpression.replace(expression);
    }
  }
 else {
    final PsiElement element=reference.getElement();
    if (element instanceof PsiDocParamRef) {
      element.getParent().delete();
    }
  }
}
