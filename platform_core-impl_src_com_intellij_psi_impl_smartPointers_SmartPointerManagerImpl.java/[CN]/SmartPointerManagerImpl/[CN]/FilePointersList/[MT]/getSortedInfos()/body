{
  ensureSorted();
  final List<SelfElementInfo> infos=ContainerUtil.newArrayListWithCapacity(size);
  processAlivePointers(new Processor<SmartPsiElementPointerImpl>(){
    @Override public boolean process(    SmartPsiElementPointerImpl pointer){
      SelfElementInfo info=(SelfElementInfo)pointer.getElementInfo();
      if (!info.hasRange())       return false;
      infos.add(info);
      return true;
    }
  }
);
  return infos;
}
