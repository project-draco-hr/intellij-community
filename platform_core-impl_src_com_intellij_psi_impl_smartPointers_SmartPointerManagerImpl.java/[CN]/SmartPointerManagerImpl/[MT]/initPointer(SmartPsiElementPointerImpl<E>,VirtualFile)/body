{
synchronized (lock) {
    pointer.incrementAndGetReferenceCount(1);
    SmartPointerElementInfo info=pointer.getElementInfo();
    if (!(info instanceof SelfElementInfo))     return;
    FilePointersList pointers=getPointers(containingFile);
    if (pointers == null) {
      pointers=new FilePointersList();
      containingFile.putUserData(POINTERS_KEY,pointers);
    }
    pointers.add(new PointerReference(pointer,containingFile,ourQueue,POINTERS_KEY));
    if (((SelfElementInfo)info).hasRange()) {
      pointers.markerCache.rangeChanged();
    }
  }
}
