{
synchronized (lock) {
    PsiFile containingFile=pointer.getContainingFile();
    if (containingFile == null)     return false;
    List<SmartPointerEx> pointers=getPointers(containingFile);
    if (pointers == null)     return false;
    SmartPointerElementInfo info=((SmartPsiElementPointerImpl)pointer).getElementInfo();
    info.cleanup();
    return pointers.remove(pointer);
  }
}
