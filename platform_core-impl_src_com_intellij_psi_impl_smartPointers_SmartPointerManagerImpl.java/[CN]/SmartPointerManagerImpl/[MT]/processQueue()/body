{
  while (true) {
    PointerReference reference=(PointerReference)ourQueue.poll();
    if (reference == null)     break;
synchronized (lock) {
      Set<PointerReference> pointers=reference.file.getUserData(reference.key);
      if (pointers != null) {
        pointers.remove(reference);
        if (pointers.isEmpty()) {
          reference.file.putUserData(reference.key,null);
        }
      }
    }
  }
}
