{
  final String ext=extension != null ? extension : fileType.getDefaultExtension();
  String text1=context == PatternTreeContext.File ? text : "<QQQ>" + text + "</QQQ>";
  final PsiFile fileFromText=PsiFileFactory.getInstance(project).createFileFromText("dummy." + ext,fileType,text1,LocalTimeCounter.currentTime(),physical,true);
  final XmlDocument document=HtmlUtil.getRealXmlDocument(((XmlFile)fileFromText).getDocument());
  if (context == PatternTreeContext.File) {
    return new PsiElement[]{document};
  }
  return document.getRootTag().getValue().getChildren();
}
