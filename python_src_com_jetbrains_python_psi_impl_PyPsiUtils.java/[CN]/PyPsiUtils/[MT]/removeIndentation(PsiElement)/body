{
  final int indentLength=getElementIndentation(element);
  if (indentLength == 0 && element instanceof PyElement) {
    return (PyElement)element;
  }
  final String indentString=StringUtil.repeatSymbol(' ',indentLength);
  final String text=element.getText();
  final StringBuilder builder=new StringBuilder();
  for (  String line : StringUtil.split(text,"\n")) {
    if (builder.length() != 0) {
      builder.append("\n");
    }
    if (!StringUtil.isEmptyOrSpaces(line)) {
      if (line.startsWith(indentString)) {
        builder.append(line.substring(indentLength));
      }
 else {
        builder.append(line);
      }
    }
  }
  final PyElementGenerator elementGenerator=PyElementGenerator.getInstance(element.getProject());
  final PyElement result=elementGenerator.createFromText(PyElement.class,builder.toString());
  if (result == null) {
    throw new RuntimeException("Failed to create element from text " + builder.toString());
  }
  return result;
}
