{
  if (!PsiUtil.isLanguageLevel8OrHigher(holder.getFile())) {
    return PsiElementVisitor.EMPTY_VISITOR;
  }
  return new JavaElementVisitor(){
    @Override public void visitConditionalExpression(    PsiConditionalExpression expression){
      final ConditionInfo conditionInfo=extractConditionInfo(expression.getCondition());
      if (conditionInfo == null)       return;
      final PsiExpression thenExpression=expression.getThenExpression();
      final PsiExpression elseExpression=expression.getElseExpression();
      if (thenExpression == null || elseExpression == null)       return;
      analyzeCorrespondenceOfPutAndGet(conditionInfo.isInverted() ? thenExpression : elseExpression,conditionInfo.isInverted() ? elseExpression : thenExpression,conditionInfo.getQualifier(),conditionInfo.getContainsKey(),holder,expression,false);
    }
    @Override public void visitIfStatement(    PsiIfStatement statement){
      final PsiExpression condition=statement.getCondition();
      final ConditionInfo conditionInfo=extractConditionInfo(condition);
      if (conditionInfo == null)       return;
      PsiStatement maybeGetBranch=conditionInfo.isInverted() ? statement.getElseBranch() : statement.getThenBranch();
      if (maybeGetBranch instanceof PsiBlockStatement) {
        final PsiStatement[] getBranchStatements=((PsiBlockStatement)maybeGetBranch).getCodeBlock().getStatements();
        if (getBranchStatements.length > 1) {
          return;
        }
        maybeGetBranch=getBranchStatements.length == 0 ? null : getBranchStatements[0];
      }
      final PsiStatement branch=conditionInfo.isInverted() ? statement.getThenBranch() : statement.getElseBranch();
      final PsiStatement maybePutStatement;
      boolean isCompute=false;
      if (branch instanceof PsiBlockStatement) {
        final PsiStatement[] statements=((PsiBlockStatement)branch).getCodeBlock().getStatements();
        if (statements.length == 0)         return;
        if (statements.length != 1) {
          isCompute=true;
        }
        maybePutStatement=statements[statements.length - 1];
      }
 else {
        maybePutStatement=branch;
      }
      LOG.assertTrue(maybePutStatement != null);
      analyzeCorrespondenceOfPutAndGet(maybePutStatement,maybeGetBranch,conditionInfo.getQualifier(),conditionInfo.getContainsKey(),holder,statement,isCompute);
    }
  }
;
}
