{
  if (element instanceof PsiDeclarationStatement) {
    PsiDeclarationStatement declaration=(PsiDeclarationStatement)element;
    PsiElement[] elements=declaration.getDeclaredElements();
    if (elements.length > 0) {
      PsiElement lastDeclaration=elements[elements.length - 1];
      if (lastDeclaration instanceof PsiLocalVariable && lastDeclaration == target.resolve()) {
        PsiLocalVariable var=(PsiLocalVariable)lastDeclaration;
        PsiExpression initializer=PsiUtil.skipParenthesizedExprDown(var.getInitializer());
        if (initializer instanceof PsiMethodCallExpression && isJavaUtilMapMethodWithName((PsiMethodCallExpression)initializer,"get")) {
          return (PsiMethodCallExpression)initializer;
        }
      }
    }
  }
  PsiAssignmentExpression assignment=getAssignment(element);
  if (assignment != null) {
    PsiExpression lValue=assignment.getLExpression();
    if (lValue instanceof PsiReferenceExpression && EquivalenceChecker.getCanonicalPsiEquivalence().expressionsAreEquivalent(target,lValue)) {
      PsiExpression rValue=PsiUtil.skipParenthesizedExprDown(assignment.getRExpression());
      if (rValue instanceof PsiMethodCallExpression && isJavaUtilMapMethodWithName((PsiMethodCallExpression)rValue,"get")) {
        return (PsiMethodCallExpression)rValue;
      }
    }
  }
  return null;
}
