{
  UpdatedFiles updatedFiles=UpdatedFiles.create();
  HgCommandResultNotifier notifier=new HgCommandResultNotifier(project);
  HgMergeCommand hgMergeCommand=new HgMergeCommand(project,repo);
  hgMergeCommand.setRevision(targetValue);
  try {
    new HgHeadMerger(project,hgMergeCommand).merge(repo);
    new HgConflictResolver(project,updatedFiles).resolve(repo);
  }
 catch (  VcsException e) {
    if (e.isWarning()) {
      notifier.notifyWarning("Warning during merge",e.getMessage());
    }
 else {
      notifier.notifyError(null,"Exception during merge",e.getMessage());
    }
  }
}
