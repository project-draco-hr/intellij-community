{
  final JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(psiClass.getProject());
  final GlobalSearchScope resolveScope=psiClass.getResolveScope();
  final Set<String> names=new LinkedHashSet<>();
  final Set<String> invalid=new HashSet<>();
  for (  TemplateResource resource : templatesManager.getAllTemplates()) {
    final String templateBaseName=EqualsHashCodeTemplatesManager.getTemplateBaseName(resource);
    if (names.add(templateBaseName)) {
      final String className=resource.getClassName();
      if (className != null && psiFacade.findClass(className,resolveScope) == null) {
        invalid.add(templateBaseName);
      }
    }
  }
  comboBox.setRenderer(new ListCellRendererWrapper<String>(){
    @Override public void customize(    JList list,    String value,    int index,    boolean selected,    boolean hasFocus){
      setText(value);
      if (invalid.contains(value)) {
        setForeground(JBColor.RED);
      }
    }
  }
);
  comboBox.setModel(new DefaultComboBoxModel(ArrayUtil.toStringArray(names)));
  comboBox.setSelectedItem(templatesManager.getDefaultTemplateBaseName());
}
