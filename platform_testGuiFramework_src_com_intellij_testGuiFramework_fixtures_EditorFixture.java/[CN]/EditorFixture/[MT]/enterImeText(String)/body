{
  final Component component=getFocusedEditor();
  if (component != null && !text.isEmpty()) {
    execute(new GuiTask(){
      @Override protected void executeInEDT() throws Throwable {
        int characterCount=text.length();
        TextHitInfo caret=TextHitInfo.afterOffset(characterCount - 1);
        TextHitInfo visiblePosition=TextHitInfo.beforeOffset(0);
        AttributedCharacterIterator iterator=new AttributedString(text).getIterator();
        int id=InputMethodEvent.INPUT_METHOD_TEXT_CHANGED;
        InputMethodEvent event=new InputMethodEvent(component,id,iterator,characterCount,caret,visiblePosition);
        component.dispatchEvent(event);
      }
    }
);
  }
  return this;
}
