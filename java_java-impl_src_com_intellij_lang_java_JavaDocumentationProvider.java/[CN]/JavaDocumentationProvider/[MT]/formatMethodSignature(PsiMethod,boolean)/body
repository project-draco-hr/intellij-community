{
  int options=PsiFormatUtilBase.SHOW_NAME | PsiFormatUtilBase.SHOW_PARAMETERS;
  int parameterOptions=PsiFormatUtilBase.SHOW_TYPE | PsiFormatUtilBase.SHOW_FQ_CLASS_NAMES;
  if (raw) {
    options|=PsiFormatUtilBase.SHOW_RAW_NON_TOP_TYPE;
    parameterOptions|=PsiFormatUtilBase.SHOW_RAW_NON_TOP_TYPE;
  }
  String signature=PsiFormatUtil.formatMethod(method,PsiSubstitutor.EMPTY,options,parameterOptions,999);
  if (PsiUtil.isLanguageLevel8OrHigher(method)) {
    signature=signature.replaceAll("\\(|\\)|, ","-").replaceAll("\\[\\]",":A");
  }
  return signature;
}
