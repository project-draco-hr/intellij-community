{
  Runnable task=new Runnable(){
    @SuppressWarnings("unchecked") @Override public void run(){
      if (!SystemProperties.getBooleanProperty(ExternalSystemConstants.NEWLY_IMPORTED_PROJECT,false)) {
        for (        ExternalSystemManager manager : ExternalSystemManager.EP_NAME.getExtensions()) {
          ExternalSystemUtil.refreshProjects(project,manager.getSystemId(),false);
        }
      }
      ExternalSystemAutoImporter.letTheMagicBegin(project);
      ExternalToolWindowManager.handle(project);
    }
  }
;
  if (project.isInitialized()) {
    task.run();
  }
 else {
    StartupManager.getInstance(project).registerPostStartupActivity(task);
  }
}
