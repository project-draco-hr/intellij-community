{
  ImageDocument document=ic.getDocument();
  Dimension size=ic.getCanvasSize();
  Graphics2D g2d=(Graphics2D)g;
  RenderingHints oldHints=g2d.getRenderingHints();
  BufferedImage image=ic.getDocument().getValue();
  Image renderer=document.getValue();
  if (size.width > image.getWidth() && size.height > image.getHeight()) {
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_OFF);
    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR);
  }
 else {
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);
  }
  g.drawImage(renderer,0,0,size.width,size.height,ic);
  g2d.setRenderingHints(oldHints);
}
