{
  final Map<Key<?>,List<ProjectDataService<?,?>>> servicesByKey=myServices.getValue();
  ExternalSystemApiUtil.visit(dataNode,new Consumer<DataNode>(){
    @Override public void consume(    DataNode dataNode){
      List<ProjectDataService<?,?>> services=servicesByKey.get(dataNode.getKey());
      if (services != null) {
        try {
          dataNode.prepareData(ContainerUtil.map2Array(services,ClassLoader.class,new Function<ProjectDataService<?,?>,ClassLoader>(){
            @Override public ClassLoader fun(            ProjectDataService<?,?> service){
              return service.getClass().getClassLoader();
            }
          }
));
        }
 catch (        Exception e) {
          LOG.debug(e);
          dataNode.clear(true);
        }
      }
    }
  }
);
}
