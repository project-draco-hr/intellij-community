{
  if (DumbService.isDumb(project))   return Collections.emptyList();
  GlobalSearchScope scope=PsiUtil.isIdeaProject(project) ? GlobalSearchScopesCore.projectProductionScope(project) : GlobalSearchScope.allScope(project);
  List<DomFileElement<IdeaPlugin>> files=DomService.getInstance().getFileElements(IdeaPlugin.class,project,scope);
  return ContainerUtil.map(files,new Function<DomFileElement<IdeaPlugin>,IdeaPlugin>(){
    public IdeaPlugin fun(    DomFileElement<IdeaPlugin> ideaPluginDomFileElement){
      return ideaPluginDomFileElement.getRootElement();
    }
  }
);
}
