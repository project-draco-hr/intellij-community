{
  if (!(refWhat instanceof RefMethod))   return;
  final RefMethod refMethod=(RefMethod)refWhat;
  final PsiElement psiElement=refMethod.getElement();
  if (!(psiElement instanceof PsiMethod))   return;
  final PsiMethod psiMethod=(PsiMethod)psiElement;
  if (!PsiType.BOOLEAN.equals(psiMethod.getReturnType()))   return;
  element.accept(new JavaRecursiveElementWalkingVisitor(){
    @Override public void visitMethodCallExpression(    PsiMethodCallExpression call){
      super.visitMethodCallExpression(call);
      final PsiReferenceExpression methodExpression=call.getMethodExpression();
      if (methodExpression.isReferenceTo(psiMethod)) {
        if (isInvertedMethodCall(methodExpression))         return;
        refMethod.putUserData(ALWAYS_INVERTED,Boolean.FALSE);
      }
    }
    @Override public void visitMethodReferenceExpression(    PsiMethodReferenceExpression expression){
      super.visitMethodReferenceExpression(expression);
      if (expression.isReferenceTo(psiElement)) {
        refMethod.putUserData(ALWAYS_INVERTED,Boolean.FALSE);
      }
    }
  }
);
}
