{
  if (!opened.isProcessed()) {
    opened.setRejected();
  }
  Vm currentVm=vm;
  ActionCallback callback;
  if (currentVm == null) {
    callback=new ActionCallback.Done();
  }
 else {
    vm=null;
    callback=currentVm.detach();
  }
  close(null,ConnectionStatus.DISCONNECTED);
  return callback;
}
