{
  StringBuilder failMessage=new StringBuilder();
  Map<String,Map<String,List<String>>> knownDuplicates=getKnownDuplicates();
  for (  Keymap keymap : KeymapManagerEx.getInstanceEx().getAllKeymaps()) {
    String failure=checkDuplicatesInKeymap(keymap,knownDuplicates);
    if (failMessage.length() > 0)     failMessage.append("\n");
    failMessage.append(failure);
  }
  if (failMessage.length() > 0) {
    TestCase.fail(failMessage + "\n" + "Please specify 'use-shortcut-of' attribute for your action if it is similar to another action (but it won't appear in Settings/Keymap),\n"+ "reassign shortcut or, if absolutely must, modify the 'known duplicates list'");
  }
}
