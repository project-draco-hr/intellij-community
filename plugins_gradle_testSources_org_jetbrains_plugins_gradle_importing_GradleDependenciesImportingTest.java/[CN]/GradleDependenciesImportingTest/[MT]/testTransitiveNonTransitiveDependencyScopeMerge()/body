{
  createSettingsFile("include 'project1'\n" + "include 'project2'\n");
  importProject("project(':project1') {\n" + "  apply plugin: 'java'\n" + "  dependencies {\n"+ "    compile 'junit:junit:4.11'\n"+ "  }\n"+ "}\n"+ "\n"+ "project(':project2') {\n"+ "  apply plugin: 'java'\n"+ "  dependencies.ext.strict = { projectPath ->\n"+ "    dependencies.compile dependencies.project(path: projectPath, transitive: false)\n"+ "    dependencies.runtime dependencies.project(path: projectPath, transitive: true)\n"+ "    dependencies.testRuntime dependencies.project(path: projectPath, transitive: true)\n"+ "  }\n"+ "\n"+ "  dependencies {\n"+ "    strict ':project1'\n"+ "  }\n"+ "}\n");
  assertModules("project","project1","project1_main","project1_test","project2","project2_main","project2_test");
  assertModuleModuleDeps("project2_main","project1_main");
  assertModuleModuleDepScope("project2_main","project1_main",DependencyScope.COMPILE);
  assertModuleLibDepScope("project2_main","Gradle: org.hamcrest:hamcrest-core:1.3",DependencyScope.RUNTIME);
  assertModuleLibDepScope("project2_main","Gradle: junit:junit:4.11",DependencyScope.RUNTIME);
  if (GradleVersion.version(gradleVersion).compareTo(GradleVersion.version("2.5")) >= 0) {
    importProjectUsingSingeModulePerGradleProject();
    assertModules("project","project1","project2");
    assertModuleModuleDepScope("project2","project1",DependencyScope.COMPILE);
    assertModuleLibDepScope("project2","Gradle: org.hamcrest:hamcrest-core:1.3",DependencyScope.RUNTIME);
    assertModuleLibDepScope("project2","Gradle: junit:junit:4.11",DependencyScope.RUNTIME);
  }
}
