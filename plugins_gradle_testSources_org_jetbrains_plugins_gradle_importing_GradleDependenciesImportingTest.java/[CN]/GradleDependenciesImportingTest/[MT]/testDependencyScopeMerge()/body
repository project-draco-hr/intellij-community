{
  createSettingsFile("include 'api', 'impl' ");
  importProject("allprojects {\n" + "  apply plugin: 'java'\n" + "\n"+ "  sourceCompatibility = 1.5\n"+ "  version = '1.0'\n"+ "}\n"+ "\n"+ "dependencies {\n"+ "  compile project(':api')\n"+ "  testCompile project(':impl'), 'junit:junit:4.11'\n"+ "  runtime project(':impl')\n"+ "}");
  assertModules("project","project_main","project_test","api","api_main","api_test","impl","impl_main","impl_test");
  assertModuleModuleDepScope("project_test","project_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("api_test","api_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("impl_test","impl_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("project_main","api_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("project_main","impl_main",DependencyScope.RUNTIME);
  assertModuleModuleDepScope("project_test","impl_main",DependencyScope.COMPILE);
  assertModuleLibDepScope("project_test","Gradle: org.hamcrest:hamcrest-core:1.3",DependencyScope.COMPILE);
  assertModuleLibDepScope("project_test","Gradle: junit:junit:4.11",DependencyScope.COMPILE);
  importProjectUsingSingeModulePerGradleProject();
  assertModules("project","api","impl");
  assertModuleModuleDepScope("project","api",DependencyScope.COMPILE);
  if (GradleVersion.version(gradleVersion).compareTo(GradleVersion.version("1.12")) < 0) {
    assertModuleModuleDepScope("project","impl",DependencyScope.RUNTIME);
  }
 else {
    assertModuleModuleDepScope("project","impl",DependencyScope.RUNTIME,DependencyScope.TEST);
  }
  assertModuleLibDepScope("project","Gradle: org.hamcrest:hamcrest-core:1.3",DependencyScope.TEST);
  assertModuleLibDepScope("project","Gradle: junit:junit:4.11",DependencyScope.TEST);
}
