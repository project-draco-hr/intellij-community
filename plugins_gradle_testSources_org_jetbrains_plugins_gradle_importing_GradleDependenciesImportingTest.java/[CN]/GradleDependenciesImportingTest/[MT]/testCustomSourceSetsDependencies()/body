{
  createSettingsFile("include 'api', 'impl' ");
  importProject("allprojects {\n" + "  apply plugin: 'java'\n" + "\n"+ "  sourceCompatibility = 1.5\n"+ "  version = '1.0'\n"+ "}\n"+ "\n"+ "project(\"impl\") {\n"+ "  sourceSets {\n"+ "    myCustomSourceSet\n"+ "    myAnotherSourceSet\n"+ "  }\n"+ "  \n"+ "  dependencies {\n"+ "    myCustomSourceSetCompile sourceSets.main.output\n"+ "    myCustomSourceSetCompile project(\":api\")\n"+ "    myCustomSourceSetRuntime 'junit:junit:4.11'\n"+ "  }\n"+ "}\n");
  assertModules("project","project_main","project_test","api","api_main","api_test","impl","impl_main","impl_test","impl_myCustomSourceSet","impl_myAnotherSourceSet");
  assertModuleModuleDepScope("project_test","project_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("api_test","api_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("impl_test","impl_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("impl_myCustomSourceSet","impl_main",DependencyScope.COMPILE);
  assertModuleModuleDepScope("impl_myCustomSourceSet","api_main",DependencyScope.COMPILE);
  assertModuleLibDepScope("impl_myCustomSourceSet","Gradle: org.hamcrest:hamcrest-core:1.3",DependencyScope.RUNTIME);
  assertModuleLibDepScope("impl_myCustomSourceSet","Gradle: junit:junit:4.11",DependencyScope.RUNTIME);
}
