{
  DomInvocationHandler handler=myManager.getDomHandler(element);
  if (handler == null || handler.getAnnotation(Stubbed.class) == null && !handler.getChildDescription().isStubbed())   return;
  AbstractDomChildrenDescription description=handler.getChildDescription();
  String nsKey=description instanceof DomChildrenDescription ? ((DomChildrenDescription)description).getXmlName().getNamespaceKey() : "";
  if (element instanceof XmlTag) {
    XmlTag tag=(XmlTag)element;
    ElementStub stub=new ElementStub(parent,StringRef.fromString(tag.getName()),StringRef.fromNullableString(nsKey),description instanceof CustomDomChildrenDescription);
    for (    XmlAttribute attribute : tag.getAttributes()) {
      visitXmlElement(attribute,stub);
    }
    for (    final XmlTag subTag : tag.getSubTags()) {
      visitXmlElement(subTag,stub);
    }
  }
 else   if (element instanceof XmlAttribute) {
    new AttributeStub(parent,StringRef.fromString(((XmlAttribute)element).getLocalName()),StringRef.fromNullableString(nsKey),((XmlAttribute)element).getValue());
  }
}
