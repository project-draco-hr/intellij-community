{
  if (myChange == null) {
    File baseDir=new File(project.getBaseDir().getPath());
    File file=getAbsolutePath(baseDir,myBeforePath);
    FilePath beforePath=VcsUtil.getFilePath(file,false);
    beforePath.refresh();
    ContentRevision beforeRevision=null;
    if (myFileStatus != FileStatus.ADDED) {
      beforeRevision=new CurrentContentRevision(beforePath){
        @Override @NotNull public VcsRevisionNumber getRevisionNumber(){
          return new TextRevisionNumber(VcsBundle.message("local.version.title"));
        }
      }
;
    }
    ContentRevision afterRevision=null;
    if (myFileStatus != FileStatus.DELETED) {
      File afterFile=getAbsolutePath(baseDir,myAfterPath);
      FilePath afterPath=getFileStatus().equals(FileStatus.ADDED) ? VcsUtil.getFilePathOnNonLocal(afterFile.getAbsolutePath(),false) : VcsUtil.getFilePath(afterFile,false);
      afterRevision=new PatchedContentRevision(project,beforePath,afterPath);
    }
    myChange=new Change(beforeRevision,afterRevision,myFileStatus);
  }
  return myChange;
}
