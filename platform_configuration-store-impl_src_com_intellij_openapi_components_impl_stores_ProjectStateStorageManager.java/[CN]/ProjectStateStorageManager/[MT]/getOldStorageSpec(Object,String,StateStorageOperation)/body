{
  boolean workspace=myProject.isWorkspaceComponent(component.getClass());
  String fileSpec=workspace ? StoragePathMacros.WORKSPACE_FILE : StoragePathMacros.PROJECT_FILE;
  StateStorage storage=getStateStorage(fileSpec,workspace ? RoamingType.DISABLED : RoamingType.PER_USER);
  if (operation == StateStorageOperation.READ && storage != null && workspace && !storage.hasState(component,componentName,Element.class,false)) {
    fileSpec=StoragePathMacros.PROJECT_FILE;
  }
  return fileSpec;
}
