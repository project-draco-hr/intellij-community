{
  List<HgRevisionNumber> newHeads=new HgHeadsCommand(myProject,projectRepoVirtualFile).executeInCurrentThread();
  assertEquals(newHeads.size(),1,"After updating, there should be only one head because the remote heads should have been merged");
  HgRevisionNumber newHead=newHeads.get(0);
  HgParentsCommand parents=new HgParentsCommand(myProject);
  parents.setRevision(newHead);
  List<HgRevisionNumber> parentRevisions=parents.executeInCurrentThread(projectRepoVirtualFile);
  assertEquals(parentRevisions.size(),2);
  assertTrue(parentRevisions.contains(incomingHead));
  assertTrue(parentRevisions.contains(headBeforeUpdate));
}
