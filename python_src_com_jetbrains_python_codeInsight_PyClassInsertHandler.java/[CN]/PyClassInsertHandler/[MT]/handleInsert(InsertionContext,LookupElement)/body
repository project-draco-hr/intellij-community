{
  final Editor editor=context.getEditor();
  final Document document=editor.getDocument();
  if (context.getCompletionChar() == '(') {
    context.setAddCompletionChar(false);
    final int offset=context.getTailOffset();
    document.insertString(offset,"()");
    PyClass pyClass=(PyClass)item.getObject();
    PyFunction init=pyClass.findInitOrNew(true);
    if (init != null && PyFunctionInsertHandler.hasParams(context,init)) {
      editor.getCaretModel().moveToOffset(offset + 1);
      AutoPopupController.getInstance(context.getProject()).autoPopupParameterInfo(context.getEditor(),init);
    }
 else {
      editor.getCaretModel().moveToOffset(offset + 2);
    }
  }
 else   if (context.getCompletionChar() == Lookup.COMPLETE_STATEMENT_SELECT_CHAR) {
    TailType.SMART_COMPLETION.processTail(editor,context.getTailOffset());
  }
}
