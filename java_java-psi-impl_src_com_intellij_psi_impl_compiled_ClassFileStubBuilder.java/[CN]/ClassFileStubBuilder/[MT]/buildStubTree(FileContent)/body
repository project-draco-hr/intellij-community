{
  try {
    VirtualFile file=fileContent.getFile();
    byte[] content=fileContent.getContent();
    ClassFileDecompilers.Decompiler decompiler=ClassFileDecompilers.find(file);
    if (decompiler instanceof Full) {
      return ((Full)decompiler).getStubBuilder().buildFileStub(fileContent);
    }
    Project project=fileContent.getProject();
    for (    ClsStubBuilderFactory factory : Extensions.getExtensions(ClsStubBuilderFactory.EP_NAME)) {
      if (!factory.isInnerClass(file) && factory.canBeProcessed(file,content)) {
        PsiFileStub stub=factory.buildFileStub(file,content,project);
        if (stub != null)         return stub;
      }
    }
    PsiFileStub<?> stub=ClsFileImpl.buildFileStub(file,content);
    if (stub == null && !fileContent.getFileName().contains("$")) {
      LOG.info("No stub built for file " + fileContent);
    }
    return stub;
  }
 catch (  ClsFormatException e) {
    LOG.info(e);
    return null;
  }
}
