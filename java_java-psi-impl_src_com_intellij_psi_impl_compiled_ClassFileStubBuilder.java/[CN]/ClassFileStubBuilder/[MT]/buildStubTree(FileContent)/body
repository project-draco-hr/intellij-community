{
  VirtualFile file=fileContent.getFile();
  byte[] content=fileContent.getContent();
  try {
    file.setForcedContentHint(content);
    ClassFileDecompilers.Decompiler decompiler=ClassFileDecompilers.find(file);
    if (decompiler instanceof Full) {
      return ((Full)decompiler).getStubBuilder().buildFileStub(fileContent);
    }
  }
 catch (  ClsFormatException e) {
    LOG.debug(e);
  }
 finally {
    file.setForcedContentHint(null);
  }
  try {
    PsiFileStub<?> stub=ClsFileImpl.buildFileStub(file,content);
    if (stub == null && !fileContent.getFileName().contains("$")) {
      LOG.info("No stub built for file " + fileContent);
    }
    return stub;
  }
 catch (  ClsFormatException e) {
    LOG.debug(e);
  }
  return null;
}
