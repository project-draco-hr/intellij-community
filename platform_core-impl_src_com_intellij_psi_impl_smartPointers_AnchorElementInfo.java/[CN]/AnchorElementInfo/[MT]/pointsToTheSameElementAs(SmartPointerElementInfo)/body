{
  if (other instanceof AnchorElementInfo) {
    AnchorElementInfo otherAnchor=(AnchorElementInfo)other;
    if ((stubId == -1) != (otherAnchor.stubId == -1)) {
      return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
        @Override public Boolean compute(){
          return Comparing.equal(restoreElement(),other.restoreElement());
        }
      }
);
    }
    if (stubId != otherAnchor.stubId || myStubElementType != otherAnchor.myStubElementType)     return false;
  }
  return super.pointsToTheSameElementAs(other);
}
