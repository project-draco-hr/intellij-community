{
  PsiElement element=restoreElement();
  Document document=getDocumentToSynchronize();
  if (element != null && document != null) {
    PsiElement anchor=AnchorElementInfoFactory.getAnchor(element);
    if (anchor == null)     anchor=element;
    myType=AnchorTypeInfo.obtainInfo(anchor,myType.getFileLanguage());
    setRange(anchor.getTextRange());
    myMarkerCache.rangeChanged();
    myStubElementTypeAndId=pack(-1,null);
  }
}
