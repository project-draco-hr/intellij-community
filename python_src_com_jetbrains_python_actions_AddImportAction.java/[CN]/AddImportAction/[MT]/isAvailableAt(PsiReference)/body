{
  if (ref == null)   return false;
  final PsiElement element=ref.getElement();
  if (PsiTreeUtil.getParentOfType(element,PyImportStatement.class) != null)   return false;
  if (PsiTreeUtil.getParentOfType(element,PyFromImportStatement.class) != null)   return false;
  if (ref instanceof PyReferenceExpression) {
    final PyExpression qual=((PyReferenceExpression)ref).getQualifier();
    if (qual != null)     return false;
  }
  if (!(ref instanceof PyReferenceExpression) || (ResolveImportUtil.resolvePythonImport2((PyReferenceExpression)ref,null) == null))   return false;
  final String referenceName=getRefName(ref);
  return (ResolveImportUtil.resolveInRoots(element,referenceName) != null);
}
