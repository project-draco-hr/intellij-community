{
  String text="package foo;\n\n" + "public class Nested {\n" + "public class Inner {"+ "   public class XInner{}"+ "   public class XInner${}"+ "}\n"+ "public class Inner$ {"+ "   public class XInner{}"+ "   public class XInner${}"+ "}\n"+ "\n"+ "}";
  VirtualFile root=prepareClasses("Nested",text);
  GlobalSearchScope scope=GlobalSearchScope.allScope(getProject());
  CoreJavaFileManager manager=new CoreJavaFileManager(myPsiManager);
  manager.addToClasspath(root);
  PsiClass clazzInner=manager.findClass("foo.Nested.Inner",scope);
  assertNotNull(clazzInner);
  PsiClass clazzXInner=manager.findClass("foo.Nested.Inner.XInner",scope);
  assertNotNull(clazzXInner);
  PsiClass clazzXInner$=manager.findClass("foo.Nested.Inner.XInner$",scope);
  assertNotNull(clazzXInner$);
  PsiClass clazz$XInner=manager.findClass("foo.Nested.Inner$.XInner",scope);
  assertNotNull(clazz$XInner);
  PsiClass clazz$XInner$=manager.findClass("foo.Nested.Inner$.XInner$",scope);
  assertNotNull(clazz$XInner$);
}
