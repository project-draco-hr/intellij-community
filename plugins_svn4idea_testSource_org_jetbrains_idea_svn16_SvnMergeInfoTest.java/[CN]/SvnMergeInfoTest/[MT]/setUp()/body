{
  super.setUp();
  myBranchVcsRoot=new File(myTempDirFixture.getTempDirPath(),"branch");
  myBranchVcsRoot.mkdir();
  myProjectLevelVcsManager=(ProjectLevelVcsManagerImpl)ProjectLevelVcsManager.getInstance(myProject);
  myProjectLevelVcsManager.setDirectoryMapping(myBranchVcsRoot.getAbsolutePath(),SvnVcs.VCS_NAME);
  VirtualFile vcsRoot=LocalFileSystem.getInstance().findFileByIoFile(myBranchVcsRoot);
  Node node=new Node(vcsRoot,SVNURL.parseURIEncoded(myRepoUrl + "/branch"),SVNURL.parseURIEncoded(myRepoUrl));
  RootUrlInfo root=new RootUrlInfo(node,WorkingCopyFormat.ONE_DOT_SIX,vcsRoot,null);
  myWCInfo=new WCInfo(root,true,Depth.INFINITY);
  myMergeContext=new MergeContext(SvnVcs.getInstance(myProject),myRepoUrl + "/trunk",myWCInfo,"trunk",vcsRoot);
  myOneShotMergeInfoHelper=new OneShotMergeInfoHelper(myMergeContext);
  SvnConfiguration.getInstance(myProject).setCheckNestedForQuickMerge(true);
}
