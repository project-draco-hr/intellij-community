{
  StartupManager.getInstance(project).registerPostStartupActivity(new DumbAwareRunnable(){
    @Override public void run(){
      ApplicationManager.getApplication().invokeLater(new DumbAwareRunnable(){
        @Override public void run(){
          final MultiMap<Library,Module> libraries=collectLibraries(project);
          if (libraries.isEmpty())           return;
          Task task=new Task.Backgroundable(project,"Maven",false){
            public void run(            @NotNull ProgressIndicator indicator){
              ensureLibrariesAreDownloaded(project,libraries,indicator);
            }
          }
;
          ProgressManager.getInstance().run(task);
        }
      }
,project.getDisposed());
    }
  }
);
}
