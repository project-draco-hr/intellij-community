{
  final List<VariableData> variableDatum=variables.getInputVariables();
  final Map<PsiVariable,PsiExpression> toInline=new HashMap<PsiVariable,PsiExpression>();
  final int strongParamsCound=method.getParameterList().getParametersCount();
  for (int i=strongParamsCound; i < variableDatum.size(); i++) {
    VariableData variableData=variableDatum.get(i);
    final THashSet<PsiExpression> map=new THashSet<PsiExpression>(ourEquivalenceStrategy);
    if (!collectParamValues(duplicates,variableData,map)) {
      continue;
    }
    final PsiExpression currentExpression=copies.get(i - strongParamsCound);
    map.add(currentExpression);
    if (map.size() == 1) {
      toInline.put(variableData.variable,currentExpression);
    }
  }
  if (!toInline.isEmpty()) {
    copies.removeAll(toInline.values());
    inlineArgumentsInMethodBody(toInline);
    removeRedundantParametersFromMethodSignature(toInline);
  }
  removeUnusedStongParams(strongParamsCound);
}
