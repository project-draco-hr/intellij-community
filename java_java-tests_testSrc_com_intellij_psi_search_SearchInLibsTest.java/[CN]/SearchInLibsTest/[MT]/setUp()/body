{
  super.setUp();
  String root=JavaTestUtil.getJavaTestDataPath() + "/psi/search/searchInLibs";
  VirtualFile rootFile=PsiTestUtil.createTestProjectStructure(myProject,myModule,root,myFilesToDelete,false);
  final VirtualFile projectRoot=rootFile.findChild("project");
  assertNotNull(projectRoot);
  final VirtualFile innerSourceRoot=projectRoot.findChild("src2");
  assertNotNull(innerSourceRoot);
  VirtualFile libRoot=rootFile.findChild("lib");
  final VirtualFile libClassesRoot=libRoot.findChild("classes");
  final VirtualFile libSrcRoot=libRoot.findChild("src");
  final VirtualFile libSrc2Root=libRoot.findChild("src2");
  assertNotNull(libRoot);
  PsiTestUtil.removeAllRoots(myModule,null);
  PsiTestUtil.addSourceRoot(myModule,projectRoot);
  PsiTestUtil.addSourceRoot(myModule,innerSourceRoot);
  List<String> sourceRoots=Arrays.asList(libSrcRoot.getUrl(),libSrc2Root.getUrl());
  List<String> classesRoots=Collections.singletonList(libClassesRoot.getUrl());
  ModuleRootModificationUtil.addModuleLibrary(myModule,"lib",classesRoots,sourceRoots);
}
