{
  final PsiClass aClass=myJavaFacade.findClass(classNameToSearch);
  assertNotNull(aClass);
  PsiReference[] refs=ReferencesSearch.search(aClass,scope,false).toArray(new PsiReference[0]);
  ArrayList<PsiFile> files=new ArrayList<PsiFile>();
  for (  PsiReference ref : refs) {
    PsiFile file=ref.getElement().getContainingFile();
    if (!files.contains(file)) {
      files.add(file);
    }
  }
  assertEquals("files count",expectedFileNames.length,files.size());
  Collections.sort(files,new Comparator<PsiFile>(){
    @Override public int compare(    PsiFile o1,    PsiFile o2){
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  Arrays.sort(expectedFileNames);
  for (int i=0; i < expectedFileNames.length; i++) {
    String name=expectedFileNames[i];
    PsiFile file=files.get(i);
    assertEquals(name,file.getName());
  }
}
