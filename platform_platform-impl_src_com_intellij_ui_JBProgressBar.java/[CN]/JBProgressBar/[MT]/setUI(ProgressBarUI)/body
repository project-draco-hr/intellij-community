{
  boolean nativeLaf=UIUtil.isUnderWindowsLookAndFeel() || UIUtil.isUnderAquaLookAndFeel() || UIUtil.isUnderGTKLookAndFeel();
  if (nativeLaf) {
    ui=new DarculaProgressBarUI();
    if (UIUtil.isUnderGTKLookAndFeel()) {
      setBorder(JBUI.Borders.empty());
    }
  }
  super.setUI(ui);
  if (nativeLaf) {
    setPreferredSize(new Dimension(getPreferredSize().width,JBUI.scale(NATIVE_LAF_HEIGHT)));
  }
}
