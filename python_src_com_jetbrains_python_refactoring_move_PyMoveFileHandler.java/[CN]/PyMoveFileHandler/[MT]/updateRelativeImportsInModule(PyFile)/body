{
  final String originalLocation=module.getUserData(ORIGINAL_FILE_LOCATION);
  if (originalLocation == null) {
    return;
  }
  for (  PyFromImportStatement statement : module.getFromImports()) {
    if (!canBeRelative(statement)) {
      continue;
    }
    final int relativeLevel=Math.max(statement.getRelativeLevel(),1);
    final PsiFileSystemItem sourceElement=resolveRelativeImportFromModuleLocation(statement.getManager(),originalLocation,statement.getImportSource(),relativeLevel);
    if (sourceElement == null) {
      continue;
    }
    final QualifiedName newName=QualifiedNameFinder.findShortestImportableQName(sourceElement);
    replaceRelativeImportSourceWithQualifiedExpression(statement,newName);
  }
  for (  PyImportElement importElement : module.getImportTargets()) {
    final PyReferenceExpression referenceExpr=importElement.getImportReferenceExpression();
    if (!canBeRelative(importElement) || referenceExpr == null) {
      continue;
    }
    final PsiFileSystemItem resolved=resolveRelativeImportFromModuleLocation(importElement.getManager(),originalLocation,referenceExpr,1);
    if (resolved == null) {
      continue;
    }
    final QualifiedName newName=QualifiedNameFinder.findShortestImportableQName(resolved);
    replaceWithQualifiedExpression(referenceExpr,newName);
  }
}
