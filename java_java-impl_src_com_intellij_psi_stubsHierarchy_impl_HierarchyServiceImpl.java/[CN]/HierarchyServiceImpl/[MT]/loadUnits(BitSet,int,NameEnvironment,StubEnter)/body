{
  ProgressIndicator indicator=ProgressIndicatorProvider.getGlobalProgressIndicator();
  FileBasedIndexImpl index=(FileBasedIndexImpl)FileBasedIndex.getInstance();
  index.processAllValues(StubHierarchyIndex.INDEX_ID,indexKey,myProject,new FileBasedIndexImpl.IdValueProcessor<IndexTree.Unit>(){
    int count=0;
    @Override public boolean process(    int fileId,    IndexTree.Unit unit){
      if (indicator != null && ++count % 128 == 0)       indicator.checkCanceled();
      if (files.get(fileId)) {
        stubEnter.unitEnter(unit,fileId);
      }
      return true;
    }
  }
);
}
