{
  FileBasedIndexImpl.IdValueProcessor<SerializedUnit> processor=new FileBasedIndexImpl.IdValueProcessor<SerializedUnit>(){
    final ProgressIndicator indicator=ProgressIndicatorProvider.getGlobalProgressIndicator();
    int count=0;
    @Override public boolean process(    int fileId,    SerializedUnit unit){
      if (indicator != null && ++count % 128 == 0)       indicator.checkCanceled();
      if (files.get(fileId)) {
        unit.readUnit(stubEnter,fileId);
      }
      return true;
    }
  }
;
  for (  int indexKey : indexKeys) {
    ((FileBasedIndexImpl)FileBasedIndex.getInstance()).processAllValues(StubHierarchyIndex.INDEX_ID,indexKey,myProject,processor);
  }
}
