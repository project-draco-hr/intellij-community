{
  FileBasedIndexImpl.IdValueProcessor<IndexTree.Unit> processor=new FileBasedIndexImpl.IdValueProcessor<IndexTree.Unit>(){
    final ProgressIndicator indicator=ProgressIndicatorProvider.getGlobalProgressIndicator();
    int count=0;
    @Override public boolean process(    int fileId,    IndexTree.Unit unit){
      if (indicator != null && ++count % 128 == 0)       indicator.checkCanceled();
      if (files.get(fileId)) {
        stubEnter.unitEnter(unit,fileId);
      }
      return true;
    }
  }
;
  for (  int indexKey : indexKeys) {
    ((FileBasedIndexImpl)FileBasedIndex.getInstance()).processAllValues(StubHierarchyIndex.INDEX_ID,indexKey,myProject,processor);
  }
}
