{
  File temp=FileUtil.createTempDirectory("c",null);
  SocketLock lock1=new SocketLock(temp.getPath() + "/1",temp.getPath() + "/1-");
  SocketLock lock2=new SocketLock(temp.getPath() + "/1",temp.getPath() + "/1-");
  try {
    assertThat(lock1.lock(),equalTo(SocketLock.ActivateStatus.NO_INSTANCE));
    assertThat(lock2.lock(),equalTo(SocketLock.ActivateStatus.ACTIVATED));
    lock1.dispose();
    assertThat(lock2.lock(),equalTo(SocketLock.ActivateStatus.NO_INSTANCE));
    lock2.dispose();
  }
  finally {
    FileUtil.delete(temp);
  }
}
