{
  List<SocketLock> toClose=new ArrayList<SocketLock>();
  try {
    assertThat(createLock(toClose,myTempDir,"1","1-").lock(),equalTo(SocketLock.ActivateStatus.NO_INSTANCE));
    assertThat(createLock(toClose,myTempDir,"1.1","1-1").lock(),equalTo(SocketLock.ActivateStatus.NO_INSTANCE));
    assertThat(createLock(toClose,myTempDir,"2","2-").lock(),equalTo(SocketLock.ActivateStatus.NO_INSTANCE));
    assertThat(createLock(toClose,myTempDir,"2","2-").lock(),equalTo(SocketLock.ActivateStatus.ACTIVATED));
    assertThat(createLock(toClose,myTempDir,"1","1-").lock(),equalTo(SocketLock.ActivateStatus.ACTIVATED));
    assertThat(createLock(toClose,myTempDir,"1.1","1-1").lock(),equalTo(SocketLock.ActivateStatus.ACTIVATED));
  }
  finally {
    for (    SocketLock lock : toClose) {
      lock.dispose();
    }
  }
}
