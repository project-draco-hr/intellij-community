{
  if (SystemInfo.isFileSystemCaseSensitive)   return;
  File temp=FileUtil.createTempDirectory("c",null);
  SocketLock lock=new SocketLock(temp.getPath() + "/c",temp.getPath() + "/s");
  final String tempPathUpperCased=temp.getPath().toUpperCase(Locale.ENGLISH);
  SocketLock lock2=new SocketLock(tempPathUpperCased + "/c",tempPathUpperCased + "/s");
  try {
    lock.lock();
    assertThat(lock2.lock(),equalTo(SocketLock.ActivateStatus.ACTIVATED));
  }
  finally {
    lock.dispose();
    lock2.dispose();
    FileUtil.delete(temp);
  }
}
