{
  HttpClient client=getHttpClient();
  String entityContent;
  client.executeMethod(method);
  entityContent=StreamUtil.readText(method.getResponseBodyAsStream(),"utf-8");
  LOG.debug(entityContent);
  if (method.getStatusCode() != HttpStatus.SC_OK) {
    Header header=method.getResponseHeader("Content-Type");
    if (header != null && header.getValue().startsWith("text/plain")) {
      throw new Exception("Request failed. Reason: " + StringUtil.capitalize(entityContent));
    }
    throw new Exception("Request failed with HTTP error: " + method.getStatusText());
  }
  return entityContent;
}
