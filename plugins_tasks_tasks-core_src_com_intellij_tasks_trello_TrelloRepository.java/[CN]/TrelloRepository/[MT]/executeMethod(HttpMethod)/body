{
  final HttpClient client=getHttpClient();
  client.executeMethod(method);
  final String entityContent=ResponseUtil.getResponseContentAsString(method);
  if (method.getStatusCode() != HttpStatus.SC_OK) {
    final Header header=method.getResponseHeader("Content-Type");
    if (header != null && header.getValue().startsWith("text/plain")) {
      throw new Exception(TaskBundle.message("failure.server.message",StringUtil.capitalize(entityContent)));
    }
    throw new Exception(TaskBundle.message("failure.http.error",method.getStatusCode(),method.getStatusText()));
  }
  return entityContent;
}
