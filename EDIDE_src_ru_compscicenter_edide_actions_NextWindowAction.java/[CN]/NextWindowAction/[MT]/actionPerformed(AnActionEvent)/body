{
  Project project=e.getProject();
  Editor selectedEditor=StudyEditor.getSelectedEditor(project);
  if (selectedEditor != null) {
    FileDocumentManager fileDocumentManager=FileDocumentManager.getInstance();
    VirtualFile openedFile=fileDocumentManager.getFile(selectedEditor.getDocument());
    if (openedFile != null) {
      StudyTaskManager taskManager=StudyTaskManager.getInstance(project);
      TaskFile selectedTaskFile=taskManager.getTaskFile(openedFile);
      if (selectedTaskFile != null) {
        selectedTaskFile.updateOffsets(selectedEditor);
        Window selectedWindow=selectedTaskFile.getSelectedWindow();
        boolean ifDraw=false;
        for (        Window window : selectedTaskFile.getWindows()) {
          if (ifDraw) {
            selectedEditor.getMarkupModel().removeAllHighlighters();
            selectedTaskFile.setSelectedWindow(window);
            window.draw(selectedEditor,!window.isResolveStatus(),true);
            return;
          }
          if (window == selectedWindow) {
            ifDraw=true;
          }
        }
      }
    }
  }
}
