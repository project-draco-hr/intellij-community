{
  ApplicationManager.getApplication().assertIsDispatchThread();
  ((XDebugSessionImpl)getXdebugProcess().getSession()).reset();
  myState.set(State.INITIAL);
  getManagerThread().schedule(new DebuggerCommandImpl(){
    @Override protected void action() throws Exception {
      myRequestManager.processDetached(DebugProcessImpl.this,false);
    }
  }
);
  myConnection=environment.getRemoteConnection();
  getManagerThread().restartIfNeeded();
  createVirtualMachine(environment.getSessionName(),environment.isPollConnection());
}
