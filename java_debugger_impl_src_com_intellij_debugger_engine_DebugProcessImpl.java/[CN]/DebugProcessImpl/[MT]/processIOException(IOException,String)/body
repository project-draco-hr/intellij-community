{
  if (e instanceof UnknownHostException) {
    return DebuggerBundle.message("error.unknown.host") + (address != null ? " (" + address + ")" : "") + ":\n"+ e.getLocalizedMessage();
  }
  String message;
  final StringBuilder buf=StringBuilderSpinAllocator.alloc();
  try {
    buf.append(DebuggerBundle.message("error.cannot.open.debugger.port"));
    if (address != null) {
      buf.append(" (").append(address).append(")");
    }
    buf.append(": ");
    buf.append(e.getClass().getName()).append(" ");
    final String localizedMessage=e.getLocalizedMessage();
    if (!StringUtil.isEmpty(localizedMessage)) {
      buf.append('"');
      buf.append(localizedMessage);
      buf.append('"');
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug(e);
    }
    message=buf.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(buf);
  }
  return message;
}
