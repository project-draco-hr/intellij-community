{
  if (directory == null)   return true;
  VirtualFile vFile=directory.getVirtualFile();
  if (vFile == null)   return true;
  ProjectFileIndex fileIndex=ProjectFileIndex.SERVICE.getInstance(directory.getProject());
  return Comparing.equal(fileIndex.getClassRootForFile(vFile),vFile) || Comparing.equal(fileIndex.getContentRootForFile(vFile),vFile) || Comparing.equal(fileIndex.getSourceRootForFile(vFile),vFile);
}
