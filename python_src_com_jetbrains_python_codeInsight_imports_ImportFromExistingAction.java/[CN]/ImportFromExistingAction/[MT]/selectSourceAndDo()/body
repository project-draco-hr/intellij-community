{
  ImportCandidateHolder[] items=mySources.toArray(new ImportCandidateHolder[mySources.size()]);
  final JList list=new JBList(items);
  list.setCellRenderer(new CellRenderer(myName));
  final Runnable runnable=new Runnable(){
    public void run(){
      int index=list.getSelectedIndex();
      if (index < 0)       return;
      PsiDocumentManager.getInstance(myTarget.getProject()).commitAllDocuments();
      doWriteAction(mySources.get(index));
    }
  }
;
  DataManager.getInstance().getDataContextFromFocus().doWhenDone(new Consumer<DataContext>(){
    @Override public void consume(    DataContext dataContext){
      new PopupChooserBuilder(list).setTitle(myUseQualifiedImport ? PyBundle.message("ACT.qualify.with.module") : PyBundle.message("ACT.from.some.module.import")).setItemChoosenCallback(runnable).createPopup().showInBestPositionFor(dataContext);
    }
  }
);
}
