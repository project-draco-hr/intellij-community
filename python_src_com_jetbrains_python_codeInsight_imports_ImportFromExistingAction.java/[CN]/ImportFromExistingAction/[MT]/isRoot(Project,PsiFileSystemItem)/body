{
  if (directory == null)   return true;
  VirtualFile vFile=directory.getVirtualFile();
  if (vFile == null)   return true;
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  return fileIndex.getClassRootForFile(vFile) == vFile || fileIndex.getContentRootForFile(vFile) == vFile || fileIndex.getSourceRootForFile(vFile) == vFile;
}
