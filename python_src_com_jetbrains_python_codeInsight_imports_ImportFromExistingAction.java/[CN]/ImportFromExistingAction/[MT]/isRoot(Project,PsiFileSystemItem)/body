{
  if (directory == null)   return true;
  VirtualFile vFile=directory.getVirtualFile();
  if (vFile == null)   return true;
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  return Comparing.equal(fileIndex.getClassRootForFile(vFile),vFile) || Comparing.equal(fileIndex.getContentRootForFile(vFile),vFile) || Comparing.equal(fileIndex.getSourceRootForFile(vFile),vFile);
}
