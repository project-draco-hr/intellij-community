{
  final Ref<PsiClass> result=Ref.create();
  processDirectories(StringUtil.getPackageName(qualifiedName),scope,new Processor<VirtualFile>(){
    @Override public boolean process(    VirtualFile dir){
      VirtualFile virtualFile=findChild(dir,StringUtil.getShortName(qualifiedName),myFileExtensions);
      final PsiFile file=virtualFile == null ? null : myManager.findFile(virtualFile);
      if (file instanceof PsiClassOwner) {
        final PsiClass[] classes=((PsiClassOwner)file).getClasses();
        if (classes.length == 1) {
          result.set(classes[0]);
          return false;
        }
      }
      return true;
    }
  }
);
  return result.get();
}
