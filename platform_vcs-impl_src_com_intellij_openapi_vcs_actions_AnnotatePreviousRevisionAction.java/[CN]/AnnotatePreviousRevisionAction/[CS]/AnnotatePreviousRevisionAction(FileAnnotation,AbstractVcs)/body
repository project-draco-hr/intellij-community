{
  super("Annotate Previous Revision","Annotate successor of selected revision in new tab",AllIcons.Actions.Annotate,annotation,vcs);
  List<? extends VcsRevisionDescription> revisions=annotation.getRevisionDescriptions();
  if (revisions == null) {
    myRevisions=null;
    myLastRevision=null;
    return;
  }
  Map<VcsRevisionNumber,VcsRevisionDescription> map=new HashMap<>();
  for (int i=0; i < revisions.size(); i++) {
    VcsRevisionDescription revision=revisions.get(i);
    VcsRevisionDescription previousRevision=i + 1 < revisions.size() ? revisions.get(i + 1) : null;
    map.put(revision.getRevisionNumber(),previousRevision);
  }
  myRevisions=new ArrayList<>(annotation.getLineCount());
  for (int i=0; i < annotation.getLineCount(); i++) {
    myRevisions.add(map.get(annotation.getLineRevisionNumber(i)));
  }
  myLastRevision=ContainerUtil.getFirstItem(revisions);
}
