{
  long start=System.currentTimeMillis();
  List<Future<?>> futures=ContainerUtil.newArrayList();
  Random seedRandom=new Random();
  for (int i=0; i < threadCount; i++) {
    final Random threadRandom=new Random(seedRandom.nextInt());
    futures.add(ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
      @Override public void run(){
        for (int j=0; j < queryCount; j++) {
          FileNameCache.getVFileName(ids[threadRandom.nextInt(ids.length)]);
        }
      }
    }
));
  }
  for (  Future<?> future : futures) {
    future.get();
  }
  return System.currentTimeMillis() - start;
}
