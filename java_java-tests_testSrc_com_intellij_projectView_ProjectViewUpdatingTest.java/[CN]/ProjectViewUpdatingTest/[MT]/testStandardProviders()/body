{
  PsiFile element=JavaDirectoryService.getInstance().getClasses(getPackageDirectory())[0].getContainingFile();
  final AbstractProjectViewPSIPane pane=myStructure.createPane();
  getProjectTreeStructure().setProviders();
  pane.select(element,element.getContainingFile().getVirtualFile(),true);
  PlatformTestUtil.assertTreeEqual(pane.getTree(),"-Project\n" + " -PsiDirectory: standardProviders\n" + "  -PsiDirectory: src\n"+ "   -PsiDirectory: com\n"+ "    -PsiDirectory: package1\n"+ "     Class1.java\n"+ "     Class2.java\n"+ "     Class4.java\n"+ "     Form1.form\n"+ "     Form1.java\n"+ "     Form2.form\n" + getRootFiles() + " +External Libraries\n");
  final PsiClass[] classes=JavaDirectoryService.getInstance().getPackage(getContentDirectory().findSubdirectory("src").findSubdirectory("com").findSubdirectory("package1")).getClasses();
  sortClassesByName(classes);
  WriteCommandAction.runWriteCommandAction(new Runnable(){
    public void run(){
      classes[0].delete();
    }
  }
);
  PlatformTestUtil.waitForAlarm(600);
  PlatformTestUtil.assertTreeEqual(pane.getTree(),"-Project\n" + " -PsiDirectory: standardProviders\n" + "  -PsiDirectory: src\n"+ "   -PsiDirectory: com\n"+ "    -PsiDirectory: package1\n"+ "     Class2.java\n"+ "     Class4.java\n"+ "     Form1.form\n"+ "     Form1.java\n"+ "     Form2.form\n" + getRootFiles() + " +External Libraries\n");
}
