{
  boolean ctrl=(e.getModifiersEx() & InputEvent.CTRL_DOWN_MASK) != 0;
  boolean alt=(e.getModifiersEx() & InputEvent.ALT_DOWN_MASK) != 0;
  boolean shift=(e.getModifiersEx() & InputEvent.SHIFT_DOWN_MASK) != 0;
  if (alt && ctrl)   return Mode.INTERACTIVE;
  if (alt)   return Mode.CHERRY_PICK;
  if (ctrl)   return Mode.REBASE;
  return Mode.DEFAULT;
}
