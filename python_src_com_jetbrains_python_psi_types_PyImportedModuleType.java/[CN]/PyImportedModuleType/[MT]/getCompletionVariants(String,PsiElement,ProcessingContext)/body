{
  final List<LookupElement> result=new ArrayList<LookupElement>();
  final PsiElement resolved=myImportedModule.resolve();
  if (resolved instanceof PyFile) {
    final PyModuleType moduleType=new PyModuleType((PyFile)resolved,myImportedModule);
    result.addAll(moduleType.getCompletionVariantsAsLookupElements(location,context,false,false));
  }
 else   if (resolved instanceof PsiDirectory) {
    final PsiDirectory dir=(PsiDirectory)resolved;
    if (PyUtil.isPackage(dir,location)) {
      if (ResolveImportUtil.getPointInImport(location) != PointInImport.NONE) {
        result.addAll(PyModuleType.getSubModuleVariants(dir,location,null));
      }
 else {
        result.addAll(PyModuleType.collectImportedSubmodulesAsLookupElements(dir,location,context.get(CTX_NAMES)));
      }
    }
  }
  return ArrayUtil.toObjectArray(result);
}
