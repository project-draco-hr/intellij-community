{
  ClientFactory settingsFactory=vcs.getFactoryFromSettings();
  ClientFactory otherFactory=vcs.getOtherFactory();
  List<WorkingCopyFormat> settingsFactoryFormats=settingsFactory.createCheckoutClient().getSupportedFormats();
  List<WorkingCopyFormat> otherFactoryFormats=CheckoutFormatFromUserProvider.getOtherFactoryFormats(otherFactory);
  return settingsFactoryFormats.contains(format) || !otherFactoryFormats.contains(format) ? settingsFactory : otherFactory;
}
