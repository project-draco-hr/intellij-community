{
  final QualifiedName qualifiedName=asQualifiedName();
  if (qualifiedName == null) {
    return Collections.emptySet();
  }
  final Set<String> result=Sets.newHashSet();
  final ScopeOwner definitionScope=ScopeUtil.getScopeOwner(getReference().resolve());
  ScopeOwner scope=ScopeUtil.getScopeOwner(this);
  while (scope != null) {
    final ScopeOwner inspectedScope=scope;
    scope.accept(new PyRecursiveElementVisitor(){
      @Override public void visitPyElement(      PyElement node){
        if (node instanceof ScopeOwner && node != inspectedScope) {
          return;
        }
        if (node instanceof PyQualifiedExpression) {
          ContainerUtil.addIfNotNull(result,getAttributeOfQualifier(((PyQualifiedExpression)node),qualifiedName));
        }
        super.visitPyElement(node);
      }
    }
);
    if (scope == definitionScope) {
      break;
    }
    scope=ScopeUtil.getScopeOwner(scope);
  }
  return result;
}
