{
  final String referencedName=getReferencedName();
  if (referencedName == null)   return ResolveResult.EMPTY_ARRAY;
  List<RatedResolveResult> targets=resolveInner();
  if (targets.size() == 0)   return ResolveResult.EMPTY_ARRAY;
  if (getParent() instanceof PyCallExpression) {
    ListIterator<RatedResolveResult> it=targets.listIterator();
    while (it.hasNext()) {
      final RatedResolveResult rrr=it.next();
      final PsiElement elt=rrr.getElement();
      if (elt instanceof PyClass) {
        PyClass cls=(PyClass)elt;
        PyFunction init=cls.findMethodByName(PyNames.INIT,false);
        if (init != null) {
          final PyFunction the_init=init;
          it.set(new RatedResolveResult(){
            public int getRate(){
              return rrr.getRate();
            }
            public PsiElement getElement(){
              return the_init;
            }
            public boolean isValidResult(){
              return true;
            }
          }
);
        }
 else {
          for (          PyClass ancestor : cls.iterateAncestors()) {
            init=ancestor.findMethodByName(PyNames.INIT,false);
            if (init != null) {
              final PyFunction the_init=init;
              it.add(new RatedResolveResult(){
                public int getRate(){
                  return RATE_LOW;
                }
                public PsiElement getElement(){
                  return the_init;
                }
                public boolean isValidResult(){
                  return true;
                }
              }
);
              break;
            }
          }
        }
      }
    }
  }
  List<RatedResolveResult> ret=new SortedList<RatedResolveResult>(new Comparator<RatedResolveResult>(){
    public int compare(    final RatedResolveResult one,    final RatedResolveResult another){
      return another.getRate() - one.getRate();
    }
  }
);
  ret.addAll(targets);
  return ret.toArray(new ResolveResult[ret.size()]);
}
