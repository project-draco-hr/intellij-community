{
  final String referencedName=getReferencedName();
  if (referencedName == null)   return null;
  if (PsiTreeUtil.getParentOfType(this,PyImportElement.class,PyFromImportStatement.class) != null) {
    return ResolveImportUtil.resolveImportReference(this);
  }
  final PyExpression qualifier=getQualifier();
  if (qualifier != null) {
    PyType qualifierType=qualifier.getType();
    if (qualifierType instanceof PyClassType) {
      final PyClassType classType=(PyClassType)qualifierType;
      return PyResolveUtil.treeWalkUp(new PyResolveUtil.ResolveProcessor(referencedName),classType.getPyClass(),null,this);
    }
    if (qualifierType instanceof PyModuleType) {
      final PyModuleType moduleType=(PyModuleType)qualifierType;
      return PyResolveUtil.treeWalkUp(new PyResolveUtil.ResolveProcessor(referencedName),moduleType.getModule(),null,this);
    }
    return null;
  }
  return PyResolveUtil.treeWalkUp(new PyResolveUtil.ResolveProcessor(referencedName),this,this,null);
}
