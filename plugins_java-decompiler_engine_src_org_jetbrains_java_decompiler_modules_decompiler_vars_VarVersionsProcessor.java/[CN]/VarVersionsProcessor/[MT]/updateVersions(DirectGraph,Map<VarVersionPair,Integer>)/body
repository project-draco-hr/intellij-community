{
  graph.iterateExprents(new DirectGraph.ExprentIterator(){
    @Override public int processExprent(    Exprent exprent){
      List<Exprent> lst=exprent.getAllExprents(true);
      lst.add(exprent);
      for (      Exprent expr : lst) {
        if (expr.type == Exprent.EXPRENT_VAR) {
          VarExprent var=(VarExprent)expr;
          Integer version=versions.get(new VarVersionPair(var));
          if (version != null) {
            var.setVersion(version);
          }
        }
      }
      return 0;
    }
  }
);
}
