{
  List<Set<VarVersionPaar>> lst=new ArrayList<Set<VarVersionPaar>>();
  for (  Entry<VarVersionPaar,FastSparseSet<Integer>> ent : ssa.getPhi().entrySet()) {
    Set<VarVersionPaar> set=new HashSet<VarVersionPaar>();
    set.add(ent.getKey());
    for (    Integer version : ent.getValue()) {
      set.add(new VarVersionPaar(ent.getKey().var,version.intValue()));
    }
    for (int i=lst.size() - 1; i >= 0; i--) {
      Set<VarVersionPaar> tset=lst.get(i);
      Set<VarVersionPaar> intersection=new HashSet<VarVersionPaar>(set);
      intersection.retainAll(tset);
      if (!intersection.isEmpty()) {
        set.addAll(tset);
        lst.remove(i);
      }
    }
    lst.add(set);
  }
  Map<VarVersionPaar,Integer> phiVersions=new HashMap<VarVersionPaar,Integer>();
  for (  Set<VarVersionPaar> set : lst) {
    int min=Integer.MAX_VALUE;
    for (    VarVersionPaar paar : set) {
      if (paar.version < min) {
        min=paar.version;
      }
    }
    for (    VarVersionPaar paar : set) {
      phiVersions.put(new VarVersionPaar(paar.var,paar.version),min);
    }
  }
  updateVersions(graph,phiVersions);
}
