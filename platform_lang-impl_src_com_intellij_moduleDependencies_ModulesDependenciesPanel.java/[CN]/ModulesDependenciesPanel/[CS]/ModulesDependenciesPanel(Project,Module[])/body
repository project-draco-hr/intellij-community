{
  super(new BorderLayout());
  myProject=project;
  myModules=modules != null ? modules : ModuleManager.getInstance(project).getModules();
  myState=DependenciesAnalyzeManager.getInstance(project).getState();
  updateModuleGraph();
  myLeftTree=new Tree(new DefaultTreeModel(new DefaultMutableTreeNode("Root")));
  installLeftTreeListeners();
  installTreeActions(myLeftTree,false);
  myRightTree=new Tree(new DefaultTreeModel(new DefaultMutableTreeNode("Root")));
  installTreeActions(myRightTree,true);
  mySplitter=new Splitter();
  mySplitter.setFirstComponent(new MyTreePanel(myLeftTree,myProject));
  mySplitter.setSecondComponent(new MyTreePanel(myRightTree,myProject));
  add(mySplitter,BorderLayout.CENTER);
  myPathField=new JTextField();
  myPathField.setEditable(false);
  add(createNorthPanel(),BorderLayout.NORTH);
  project.getMessageBus().connect(this).subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    @Override public void rootsChanged(    ModuleRootEvent event){
      updateModuleGraph();
      updateSplitterProportion();
      updateLeftTree();
    }
  }
);
  updateSplitterProportion();
  updateLeftTree();
}
