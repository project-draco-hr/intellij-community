{
  List<DiffString> lines=new ArrayList<DiffString>();
  while (notAtEnd()) {
    int begin=myIndex;
    skipToEOL();
    int endIndex=myIndex;
    boolean appendNewLine=false;
    if (notAtEnd() && isAtEOL()) {
      if (myText.data(endIndex) == '\n') {
        endIndex++;
      }
 else {
        appendNewLine=true;
      }
      skipEOL();
    }
    DiffString line=myText.substring(begin,endIndex);
    if (appendNewLine) {
      line=line.append('\n');
    }
    lines.add(line);
  }
  return ContainerUtil.toArray(lines,new DiffString[lines.size()]);
}
