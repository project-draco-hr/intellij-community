{
  ProjectRootManager rootManager=ProjectRootManager.getInstance(getProject());
  VirtualFile sourceRoot=rootManager.getContentSourceRoots()[0];
  PsiManager psiManager=PsiManager.getInstance(getProject());
  PsiDirectory psiSourceRoot=psiManager.findDirectory(sourceRoot);
  PsiFile psiFile=psiSourceRoot.createFile("TestDocument.xml");
  try {
    psiFile.getVirtualFile().move(this,psiSourceRoot.createSubdirectory("com").getVirtualFile());
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  assertTrue(psiFile.isValid());
  psiFile.delete();
  assertFalse(psiFile.isValid());
}
