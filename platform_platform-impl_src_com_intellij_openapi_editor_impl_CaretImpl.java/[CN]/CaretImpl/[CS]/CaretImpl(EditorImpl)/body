{
  myEditor=editor;
  myLogicalCaret=new LogicalPosition(0,0);
  myVisibleCaret=new VisualPosition(0,0);
  myCaretInfo=new VerticalInfo(0,0);
  myPositionMarker=new PositionMarker(0);
  myVisualLineStart=0;
  Document doc=myEditor.getDocument();
  myVisualLineEnd=doc.getLineCount() > 1 ? doc.getLineStartOffset(1) : doc.getLineCount() == 0 ? 0 : doc.getLineEndOffset(0);
  myDocumentUpdateCounter=editor.getCaretModel().myDocumentUpdateCounter;
}
