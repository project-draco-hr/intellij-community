{
  if (!CodeInsightUtilBase.preparePsiElementForWrite(myElement))   return;
  PyElementGenerator elementGenerator=PyElementGenerator.getInstance(project);
  PyFunction function=elementGenerator.createFromText(LanguageLevel.forElement(myElement),PyFunction.class,"def " + myElement.getText() + "():\n  pass");
  PyFile file=(PyFile)myElement.getContainingFile();
  PyFunction parentFunction=PsiTreeUtil.getParentOfType(myElement,PyFunction.class);
  if (parentFunction != null) {
    PyStatementList statements=parentFunction.getStatementList();
    statements.addBefore(function,statements.getStatements()[0]);
  }
 else {
    PyStatement statement=PsiTreeUtil.getParentOfType(myElement,PyStatement.class);
    file.addBefore(function,statement);
  }
}
