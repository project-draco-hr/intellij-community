{
  Map<String,Long> result=new LinkedHashMap<String,Long>();
  LinkedHashSet<String> paths=Utils.collectRelativePaths(dir,myIsStrict);
  for (  String each : paths) {
    if (ignoredFiles.contains(each))     continue;
    ui.setStatus(each);
    ui.checkCancelled();
    result.put(each,digestFile(new File(dir,each),normalize));
  }
  return result;
}
