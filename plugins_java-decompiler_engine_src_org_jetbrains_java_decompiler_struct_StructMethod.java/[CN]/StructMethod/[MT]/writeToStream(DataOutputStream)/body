{
  out.writeShort(accessFlags);
  out.writeShort(name_index);
  out.writeShort(descriptor_index);
  out.writeShort(attributes.size());
  for (  StructGeneralAttribute attr : attributes) {
    if (StructGeneralAttribute.ATTRIBUTE_CODE.equals(attr.getName())) {
      out.writeShort(attr.getAttribute_name_index());
      if (lazy && !expanded) {
        out.writeInt(10 + code_content.length);
        out.writeShort(maxStack);
        out.writeShort(localVariables);
        out.writeInt(code_length);
        out.write(code_content);
      }
 else {
        ByteArrayOutputStream codeout=new ByteArrayOutputStream();
        seq.writeCodeToStream(new DataOutputStream(codeout));
        ByteArrayOutputStream excout=new ByteArrayOutputStream();
        seq.writeExceptionsToStream(new DataOutputStream(excout));
        out.writeInt(10 + codeout.size() + excout.size());
        out.writeShort(maxStack);
        out.writeShort(localVariables);
        out.writeInt(codeout.size());
        codeout.writeTo(out);
        excout.writeTo(out);
      }
      out.writeShort(0);
    }
 else {
      attr.writeToStream(out);
    }
  }
}
