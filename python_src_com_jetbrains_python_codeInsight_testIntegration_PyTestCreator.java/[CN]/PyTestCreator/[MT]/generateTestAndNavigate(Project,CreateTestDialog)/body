{
  return PostprocessReformattingAspect.getInstance(project).postponeFormattingInside(new Computable<PsiFile>(){
    public PsiFile compute(){
      return ApplicationManager.getApplication().runWriteAction(new Computable<PsiFile>(){
        public PsiFile compute(){
          try {
            final PyElement testClass=generateTest(project,dialog);
            testClass.navigate(false);
            return testClass.getContainingFile();
          }
 catch (          IncorrectOperationException e) {
            LOG.warn(e);
            return null;
          }
        }
      }
);
    }
  }
);
}
