{
  final List<String> mergedToBranches=getMergedToBranches(unmergedBranch);
  final Map<GitRepository,List<GitHeavyCommit>> history=new HashMap<GitRepository,List<GitHeavyCommit>>();
  for (  GitRepository repository : getRepositories()) {
    if (repositories.contains(repository)) {
      history.put(repository,getUnmergedCommits(repository,unmergedBranch,baseBranch));
    }
 else {
      history.put(repository,Collections.<GitHeavyCommit>emptyList());
    }
  }
  return myUiHandler.showBranchIsNotFullyMergedDialog(myProject,history,unmergedBranch,mergedToBranches,baseBranch);
}
