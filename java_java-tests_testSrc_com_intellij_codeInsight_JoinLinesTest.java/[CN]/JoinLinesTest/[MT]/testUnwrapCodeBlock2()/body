{
  CodeStyleSettings settings=CodeStyleSettingsManager.getSettings(getProject());
  boolean use_tab_character=settings.useTabCharacter(null);
  boolean smart_tabs=settings.isSmartTabs(null);
  int old=settings.IF_BRACE_FORCE;
  try {
    settings.getIndentOptions(StdFileTypes.JAVA).USE_TAB_CHARACTER=true;
    settings.getIndentOptions(StdFileTypes.JAVA).SMART_TABS=true;
    settings.getCommonSettings(JavaLanguage.INSTANCE).IF_BRACE_FORCE=CommonCodeStyleSettings.FORCE_BRACES_ALWAYS;
    doTest();
  }
  finally {
    settings.getIndentOptions(StdFileTypes.JAVA).USE_TAB_CHARACTER=use_tab_character;
    settings.getIndentOptions(StdFileTypes.JAVA).SMART_TABS=smart_tabs;
    settings.getCommonSettings(JavaLanguage.INSTANCE).IF_BRACE_FORCE=old;
  }
}
