{
  final JPanel mainPanel=new JPanel(new BorderLayout());
  final JPanel scrollPanel=new JPanel(new BorderLayout());
  final DirectoryProjectGenerator[] generators=Extensions.getExtensions(DirectoryProjectGenerator.EP_NAME);
  final int height=generators.length == 0 ? 150 : 400;
  mainPanel.setPreferredSize(new Dimension(mainPanel.getPreferredSize().width,height));
  myErrorLabel=new JLabel("");
  myErrorLabel.setForeground(JBColor.RED);
  myCreateButton=new Button(myCreateAction,myCreateAction.getTemplatePresentation());
  final JPanel panel=createBasePanel();
  scrollPanel.add(panel,BorderLayout.NORTH);
  final JPanel advancedSettings=createAdvancedSettings();
  if (advancedSettings != null) {
    scrollPanel.add(advancedSettings,BorderLayout.CENTER);
  }
  final JBScrollPane scrollPane=new JBScrollPane(scrollPanel,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
  scrollPane.setBorder(null);
  mainPanel.add(scrollPane,BorderLayout.CENTER);
  final JPanel bottomPanel=new JPanel(new BorderLayout());
  bottomPanel.add(myErrorLabel,BorderLayout.NORTH);
  bottomPanel.add(myCreateButton,BorderLayout.EAST);
  mainPanel.add(bottomPanel,BorderLayout.SOUTH);
  return mainPanel;
}
