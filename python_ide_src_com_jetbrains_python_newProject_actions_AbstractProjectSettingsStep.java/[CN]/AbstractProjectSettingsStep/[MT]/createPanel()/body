{
  initGeneratorListeners();
  final JPanel basePanel=createBasePanel();
  final JPanel mainPanel=new JPanel(new BorderLayout());
  final JPanel scrollPanel=new JPanel(new BorderLayout());
  final DirectoryProjectGenerator[] generators=Extensions.getExtensions(DirectoryProjectGenerator.EP_NAME);
  final int height=generators.length == 0 && !myIsWelcomeScreen ? 150 : 400;
  myErrorLabel=new JLabel("");
  myErrorLabel.setForeground(JBColor.RED);
  myCreateButton=new JButton("Create");
  myCreateButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      boolean isValid=checkValid();
      if (isValid && myCallback != null) {
        myCallback.consume(AbstractProjectSettingsStep.this);
      }
    }
  }
);
  myCreateButton.putClientProperty(DialogWrapper.DEFAULT_ACTION,Boolean.TRUE);
  scrollPanel.add(basePanel,BorderLayout.NORTH);
  final JPanel advancedSettings=createAdvancedSettings();
  if (advancedSettings != null) {
    scrollPanel.add(advancedSettings,BorderLayout.CENTER);
  }
  final JBScrollPane scrollPane=new JBScrollPane(scrollPanel,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
  scrollPane.setBorder(null);
  mainPanel.add(scrollPane,BorderLayout.CENTER);
  final JPanel bottomPanel=new JPanel(new BorderLayout());
  bottomPanel.add(myErrorLabel,BorderLayout.NORTH);
  bottomPanel.add(myCreateButton,BorderLayout.EAST);
  mainPanel.add(bottomPanel,BorderLayout.SOUTH);
  return mainPanel;
}
