{
  super();
  myProjectGenerator=projectGenerator;
  myCallback=callback;
  myProjectDirectory=FileUtil.findSequentNonexistentFile(new File(ProjectUtil.getBaseDir()),"untitled","");
  if (myProjectGenerator instanceof WebProjectTemplate) {
    ((WebProjectTemplate)myProjectGenerator).getPeer().addSettingsStateListener(new WebProjectGenerator.SettingsStateListener(){
      @Override public void stateChanged(      boolean validSettings){
        checkValid();
      }
    }
);
  }
 else   if (myProjectGenerator instanceof PythonProjectGenerator) {
    ((PythonProjectGenerator)myProjectGenerator).addSettingsStateListener(new PythonProjectGenerator.SettingsListener(){
      @Override public void stateChanged(){
        checkValid();
      }
    }
);
  }
  myCreateAction=new AnAction("Create","Create Project",getIcon()){
    @Override public void actionPerformed(    AnActionEvent e){
      boolean isValid=checkValid();
      if (isValid && myCallback != null)       myCallback.consume(AbstractProjectSettingsStep.this);
    }
  }
;
}
