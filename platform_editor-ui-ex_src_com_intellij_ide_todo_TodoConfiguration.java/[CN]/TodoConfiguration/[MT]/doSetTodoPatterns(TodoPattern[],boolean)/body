{
  TodoPattern[] oldTodoPatterns=myTodoPatterns;
  IndexPattern[] oldIndexPatterns=myIndexPatterns;
  myTodoPatterns=todoPatterns;
  buildIndexPatterns();
  if (shouldNotifyIndices && !Arrays.deepEquals(myIndexPatterns,oldIndexPatterns)) {
    PropertyChangeEvent event=new PropertyChangeEvent(this,IndexPatternProvider.PROP_INDEX_PATTERNS,oldTodoPatterns,todoPatterns);
    myMessageBus.syncPublisher(IndexPatternProvider.INDEX_PATTERNS_CHANGED).propertyChange(event);
  }
  if (!Arrays.deepEquals(myTodoPatterns,oldTodoPatterns)) {
    PropertyChangeListener multicaster=myPropertyChangeMulticaster.getMulticaster();
    multicaster.propertyChange(new PropertyChangeEvent(this,PROP_TODO_PATTERNS,oldTodoPatterns,todoPatterns));
  }
}
