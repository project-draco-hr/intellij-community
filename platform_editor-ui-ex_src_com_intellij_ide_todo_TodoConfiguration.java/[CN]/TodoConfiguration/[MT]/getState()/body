{
  Element element=new Element("state");
  TodoPattern[] todoPatterns=myTodoPatterns;
  if (!Arrays.equals(myTodoPatterns,getDefaultPatterns())) {
    for (    TodoPattern pattern : todoPatterns) {
      Element child=new Element(ELEMENT_PATTERN);
      try {
        pattern.writeExternal(child);
      }
 catch (      WriteExternalException e) {
        throw new RuntimeException(e);
      }
      element.addContent(child);
    }
  }
  for (  TodoFilter filter : myTodoFilters) {
    Element child=new Element(ELEMENT_FILTER);
    filter.writeExternal(child,todoPatterns);
    element.addContent(child);
  }
  return element;
}
