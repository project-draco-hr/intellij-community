{
  List<URL> urls=new ArrayList<URL>();
  File[] files=new File(info.libPath).listFiles();
  if (files == null) {
    throw new Exception(info.libPath + " wrong path");
  }
  for (  File libFile : files) {
    if (libFile.isFile() && libFile.getName().endsWith(".jar")) {
      if (libFile.getName().equalsIgnoreCase("SceneBuilderApp.jar")) {
        JarFile appJar=new JarFile(libFile);
        String version=appJar.getManifest().getMainAttributes().getValue("Implementation-Version");
        appJar.close();
        if (version != null) {
          int index=version.indexOf(" ");
          if (index != -1) {
            version=version.substring(0,index);
          }
        }
        if (StringUtil.compareVersionNumbers(version,"2.0") < 0) {
          throw new Exception(info.path + " wrong version: " + version);
        }
      }
      urls.add(libFile.toURI().toURL());
    }
  }
  if (urls.isEmpty()) {
    throw new Exception(info.libPath + " no jar found");
  }
  final String parent=new File(PathUtil.getJarPathForClass(SceneBuilderEditor.class)).getParent();
  if (SceneBuilderEditor.class.getClassLoader() instanceof PluginClassLoader) {
    urls.add(new File(new File(parent).getParent(),"embedder.jar").toURI().toURL());
  }
 else {
    urls.add(new File(parent,"FXBuilderEmbedder").toURI().toURL());
  }
  return new URLClassLoader(urls.toArray(new URL[urls.size()]));
}
