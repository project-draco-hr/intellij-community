{
  Project project=getProject();
  CodeStyleSettingsManager.getInstance(project).dropTemporarySettings();
  CodeStyleSettings oldCodeStyleSettings=myOldCodeStyleSettings;
  myOldCodeStyleSettings=null;
  List<Throwable> exceptions=new SmartList<>();
  try {
    UsefulTestCase.doCheckForSettingsDamage(oldCodeStyleSettings,getCurrentCodeStyleSettings(),exceptions);
    LightPlatformTestCase.doTearDown(project,LightPlatformTestCase.getApplication(),true,exceptions);
    super.tearDown();
    InjectedLanguageManagerImpl.checkInjectorsAreDisposed(project);
    PersistentFS.getInstance().clearIdCache();
    PlatformTestCase.cleanupApplicationCaches(project);
  }
  finally {
    CompoundRuntimeException.throwIfNotEmpty(exceptions);
  }
}
