{
  int textLength=myDocument.getTextLength();
  if (offset < 0 || textLength == 0) {
    return new LogicalPosition(0,0);
  }
  offset=Math.min(offset,textLength);
  int line=myDocument.getLineNumber(offset);
  int offsetInsideLine=offset - myDocument.getLineStartOffset(line);
  int column=line < myLines.size() ? getLineRenderer(line).offsetToColumn(offsetInsideLine,myPlainSpaceWidth) : offsetInsideLine;
  return new LogicalPosition(line,column);
}
