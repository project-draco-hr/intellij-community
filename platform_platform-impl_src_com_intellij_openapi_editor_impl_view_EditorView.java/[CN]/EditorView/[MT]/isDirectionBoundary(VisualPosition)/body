{
  assertIsDispatchThread();
  if (myDocument.getTextLength() == 0)   return false;
  LogicalPosition logicalPosition=visualToLogicalPosition(visualPosition);
  int offset=logicalPositionToOffset(logicalPosition);
  if (!visualPosition.equals(offsetToVisualPosition(offset,logicalPosition.leansForward)))   return false;
  int line=myDocument.getLineNumber(offset);
  LineLayout layout=getLineLayout(line);
  return layout.isDirectionBoundary(offset - myDocument.getLineStartOffset(line));
}
