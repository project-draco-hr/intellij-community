{
  Project project=myEditor.getProject();
  VirtualFile virtualFile=myEditor.getVirtualFile();
  if (project == null || virtualFile == null)   return;
  for (  EditorLinePainter painter : EditorLinePainter.EP_NAME.getExtensions()) {
    Collection<LineExtensionInfo> extensions=painter.getLineExtensions(project,virtualFile,line);
    if (extensions != null) {
      for (      LineExtensionInfo info : extensions) {
        TextLayout textLayout=createTextLayout(info.getText(),info.getFontType(),info.getColor());
        Graphics2D gCopy=(Graphics2D)g.create();
        try {
          paintTextLayoutWithEffect(gCopy,textLayout,info.getEffectColor(),info.getEffectType());
        }
  finally {
          gCopy.dispose();
        }
        g.translate(textLayout.getAdvance(),0);
        int currentLineWidth=(int)g.getTransform().getTranslateX();
        if (currentLineWidth > myMaxLineWithExtensionWidth) {
          myMaxLineWithExtensionWidth=currentLineWidth;
          myWidestLineWithExtension=line;
        }
      }
    }
  }
}
