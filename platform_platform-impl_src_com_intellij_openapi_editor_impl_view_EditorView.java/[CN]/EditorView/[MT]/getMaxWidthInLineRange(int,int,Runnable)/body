{
  myEditor.getSoftWrapModel().prepareToMapping();
  int maxWidth=0;
  endVisualLine=Math.min(endVisualLine,myEditor.getVisibleLineCount() - 1);
  for (int i=startVisualLine; i <= endVisualLine; i++) {
    int width=getVisualLineWidth(i,quickEvaluationListener);
    maxWidth=Math.max(maxWidth,width);
  }
  return maxWidth;
}
