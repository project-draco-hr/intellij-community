{
  if (offset <= 0) {
    return 0;
  }
  if (offset >= myDocument.getTextLength()) {
    return Math.max(0,getDocumentLineCount() - 1);
  }
  return myDocument.getLineNumber(offset);
}
