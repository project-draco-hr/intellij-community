{
  XStackFrame xFrame=getDescriptor().getXStackFrame();
  if (xFrame != null) {
    xFrame.computeChildren(node);
    return;
  }
  DebuggerContextImpl currentContext=DebuggerManagerEx.getInstanceEx(myDebugProcess.getProject()).getContext();
  DebuggerContextImpl debuggerContext=DebuggerContextImpl.createDebuggerContext(myDebugProcess.mySession,currentContext.getSuspendContext(),getStackFrameProxy().threadProxy(),getStackFrameProxy());
  debuggerContext.setPositionCache(mySourcePosition);
  if (!debuggerContext.isInitialised()) {
    debuggerContext.initCaches();
  }
  myDebugProcess.getManagerThread().schedule(new DebuggerContextCommandImpl(debuggerContext){
    @Override public void threadAction(){
      XValueChildrenList children=new XValueChildrenList();
      buildVariablesThreadAction(getDebuggerContext(),children,node);
      node.addChildren(children,true);
    }
  }
);
}
