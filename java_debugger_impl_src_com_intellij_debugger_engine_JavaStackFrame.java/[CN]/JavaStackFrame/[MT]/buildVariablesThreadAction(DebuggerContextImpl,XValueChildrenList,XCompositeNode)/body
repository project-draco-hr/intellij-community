{
  try {
    final EvaluationContextImpl evaluationContext=debuggerContext.createEvaluationContext();
    if (evaluationContext == null) {
      return;
    }
    if (!debuggerContext.isEvaluationPossible()) {
      node.setErrorMessage(MessageDescriptor.EVALUATION_NOT_POSSIBLE.getLabel());
    }
    final Location location=myDescriptor.getLocation();
    final ObjectReference thisObjectReference=myDescriptor.getThisObject();
    if (thisObjectReference != null) {
      ValueDescriptorImpl thisDescriptor=myNodeManager.getThisDescriptor(null,thisObjectReference);
      children.add(JavaValue.create(thisDescriptor,evaluationContext,myNodeManager));
    }
 else     if (location != null) {
      StaticDescriptorImpl staticDecriptor=myNodeManager.getStaticDescriptor(myDescriptor,location.declaringType());
      if (staticDecriptor.isExpandable()) {
        children.addTopGroup(new JavaStaticGroup(staticDecriptor,evaluationContext,myNodeManager));
      }
    }
    DebugProcessImpl debugProcess=debuggerContext.getDebugProcess();
    if (debugProcess == null) {
      return;
    }
    final Pair<Method,Value> methodValuePair=debugProcess.getLastExecutedMethod();
    if (methodValuePair != null) {
      ValueDescriptorImpl returnValueDescriptor=myNodeManager.getMethodReturnValueDescriptor(myDescriptor,methodValuePair.getFirst(),methodValuePair.getSecond());
      children.add(JavaValue.create(returnValueDescriptor,evaluationContext,myNodeManager));
    }
    for (    Pair<Breakpoint,Event> pair : DebuggerUtilsEx.getEventDescriptors(debuggerContext.getSuspendContext())) {
      final Event debugEvent=pair.getSecond();
      if (debugEvent instanceof ExceptionEvent) {
        final ObjectReference exception=((ExceptionEvent)debugEvent).exception();
        if (exception != null) {
          final ValueDescriptorImpl exceptionDescriptor=myNodeManager.getThrownExceptionObjectDescriptor(myDescriptor,exception);
          children.add(JavaValue.create(exceptionDescriptor,evaluationContext,myNodeManager));
        }
      }
    }
    try {
      buildVariables(debuggerContext,evaluationContext,debugProcess,children,thisObjectReference,location);
    }
 catch (    EvaluateException e) {
      node.setErrorMessage(e.getMessage());
    }
  }
 catch (  InvalidStackFrameException e) {
    LOG.info(e);
  }
catch (  InternalException e) {
    if (e.errorCode() == 35) {
      node.setErrorMessage(DebuggerBundle.message("error.corrupt.debug.info",e.getMessage()));
    }
 else {
      throw e;
    }
  }
}
