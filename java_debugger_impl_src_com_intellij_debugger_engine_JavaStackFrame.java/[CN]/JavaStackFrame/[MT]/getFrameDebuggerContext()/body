{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  DebuggerContextImpl context=myDebugProcess.getDebuggerContext();
  if (context.getFrameProxy() != getStackFrameProxy()) {
    SuspendContextImpl threadSuspendContext=SuspendManagerUtil.getSuspendContextForThread(context.getSuspendContext(),getStackFrameProxy().threadProxy());
    context=DebuggerContextImpl.createDebuggerContext(myDebugProcess.mySession,threadSuspendContext,getStackFrameProxy().threadProxy(),getStackFrameProxy());
    context.setPositionCache(myDescriptor.getSourcePosition());
    context.initCaches();
  }
  return context;
}
