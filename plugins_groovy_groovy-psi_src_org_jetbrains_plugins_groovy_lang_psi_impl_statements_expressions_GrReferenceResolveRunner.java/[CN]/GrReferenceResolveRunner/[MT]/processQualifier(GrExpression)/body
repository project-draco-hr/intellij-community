{
  PsiType qualifierType=qualifier.getType();
  ResolveState state=ResolveState.initial().put(ClassHint.RESOLVE_CONTEXT,qualifier);
  if (qualifierType == null || PsiType.VOID.equals(qualifierType)) {
    if (qualifier instanceof GrReferenceExpression) {
      PsiElement resolved=((GrReferenceExpression)qualifier).resolve();
      if (resolved instanceof PsiClass) {
        if (!ResolveUtil.processClassDeclarations((PsiClass)resolved,processor,state,null,place))         return false;
      }
 else       if (resolved != null && !resolved.processDeclarations(processor,state,null,place))       return false;
      if (!(resolved instanceof PsiPackage)) {
        PsiType objectQualifier=TypesUtil.getJavaLangObject(place);
        if (!processQualifierType(objectQualifier,state))         return false;
      }
    }
  }
 else {
    if (!processQualifierType(qualifierType,state))     return false;
    if (qualifier instanceof GrReferenceExpression && !PsiUtil.isSuperReference(qualifier) && !PsiUtil.isInstanceThisRef(qualifier)) {
      PsiElement resolved=((GrReferenceExpression)qualifier).resolve();
      if (resolved instanceof PsiClass) {
        if (!processJavaLangClass(qualifierType,state))         return false;
      }
    }
  }
  return true;
}
