{
  Runnable lastRunnable=runnable;
  for (int i=0; i < myCount; i++) {
    final Editor editor=myEditors[i];
    final Runnable finalRunnable=lastRunnable;
    lastRunnable=new Runnable(){
      @Override public void run(){
        editor.getFoldingModel().runBatchFoldingOperation(new Runnable(){
          @Override public void run(){
            finalRunnable.run();
          }
        }
);
      }
    }
;
  }
  lastRunnable.run();
}
