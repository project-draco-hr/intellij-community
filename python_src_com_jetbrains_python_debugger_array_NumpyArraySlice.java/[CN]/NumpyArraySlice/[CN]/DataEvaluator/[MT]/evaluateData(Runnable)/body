{
  final XDebuggerEvaluator.XEvaluationCallback computeChildrenCallback=new XDebuggerEvaluator.XEvaluationCallback(){
    @Override public void evaluated(    @NotNull final XValue result){
      final String name=((PyDebugValue)result).getName();
      DebuggerUIUtil.invokeLater(new Runnable(){
        @Override public void run(){
          XValueNodeImpl node=new XValueNodeImpl(myValueProvider.getTree(),null,name,result);
          node.startComputingChildren();
        }
      }
);
    }
    @Override public void errorOccurred(    @NotNull String errorMessage){
      myValueProvider.showError(errorMessage,getInstance());
    }
  }
;
  XDebuggerTreeListener treeListener=new XDebuggerTreeListener(){
    @Override public void nodeLoaded(    @NotNull RestorableStateNode node,    String name){
    }
    @Override public void childrenLoaded(    @NotNull XDebuggerTreeNode node,    @NotNull List<XValueContainerNode<?>> children,    boolean last){
      if (!(node instanceof XValueNodeImpl)) {
        return;
      }
      String fullName=((XValueNodeImpl)node).getName();
      if (fullName == null || !fullName.contains(getPresentation())) {
        return;
      }
      int row;
      if (isOneRow()) {
        row=0;
      }
 else {
        if (isOneColumn()) {
          row=Integer.parseInt(fullName.substring(fullName.lastIndexOf('[') + 1,fullName.length() - 1));
        }
 else {
          fullName=fullName.substring(0,fullName.lastIndexOf(","));
          row=Integer.parseInt(fullName.substring(fullName.lastIndexOf('[') + 1,fullName.length()));
        }
      }
      if (row > getRows()) {
        throw new IllegalStateException("Row " + row + " is out of range for "+ getPresentation()+ ".");
      }
      if (row != -1 && myData[row][0] == null) {
        for (int i=0; i < node.getChildCount() - 1; i++) {
          String rawValue=((XValueNodeImpl)node.getChildAt(i + 1)).getRawValue();
          if (rawValue == null) {
            return;
          }
          if (myValueProvider.isNumeric()) {
            rawValue=rawValue.substring(1,rawValue.length() - 1);
          }
          myData[row][i]=rawValue;
        }
        if (node.getChildCount() == 0) {
          String rawValue=((XValueNodeImpl)node).getRawValue();
          if (rawValue == null) {
            return;
          }
          if (myValueProvider.isNumeric()) {
            rawValue=rawValue.substring(1,rawValue.length() - 1);
          }
          myData[row][0]=rawValue;
        }
        myFilledRows+=1;
        if (myFilledRows == getRows()) {
          node.getTree().removeTreeListener(this);
          callback.run();
        }
 else {
          nextRow+=1;
          startEvalNextRow(computeChildrenCallback);
        }
      }
    }
  }
;
  myData=new Object[getRows()][getColumns()];
  myValueProvider.getTree().addTreeListener(treeListener);
  nextRow=0;
  myFilledRows=0;
  startEvalNextRow(computeChildrenCallback);
}
