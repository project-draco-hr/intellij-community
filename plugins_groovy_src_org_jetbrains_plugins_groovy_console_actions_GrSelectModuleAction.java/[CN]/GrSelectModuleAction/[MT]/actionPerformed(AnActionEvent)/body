{
  final Project project=e.getProject();
  if (project == null)   return;
  GroovyConsoleUtil.selectModuleAndRun(project,new Consumer<Module>(){
    @Override public void consume(    Module module){
      final Module existingModule=myProjectConsole.getSelectedModule(myFile);
      if (module.equals(existingModule))       return;
      final GroovyConsole groovyConsole=myFile.getUserData(GroovyConsole.GROOVY_CONSOLE);
      if (groovyConsole == null || groovyConsole.stop()) {
        myProjectConsole.setFileModule(myFile,module);
        myFile.putUserData(GroovyConsole.GROOVY_CONSOLE,null);
        ProjectView.getInstance(project).refresh();
      }
    }
  }
,e.getDataContext());
}
