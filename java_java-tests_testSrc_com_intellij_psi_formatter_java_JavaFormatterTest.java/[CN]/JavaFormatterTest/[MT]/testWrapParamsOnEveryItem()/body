{
  CodeStyleSettings codeStyleSettings=CodeStyleSettingsManager.getSettings(getProject());
  int oldMargin=codeStyleSettings.getCommonSettings(JavaLanguage.INSTANCE).RIGHT_MARGIN;
  boolean oldKeep=codeStyleSettings.KEEP_LINE_BREAKS;
  int oldWrap=codeStyleSettings.METHOD_PARAMETERS_WRAP;
  try {
    codeStyleSettings.setRightMargin(JavaLanguage.INSTANCE,80);
    codeStyleSettings.KEEP_LINE_BREAKS=false;
    codeStyleSettings.METHOD_PARAMETERS_WRAP=CommonCodeStyleSettings.WRAP_ON_EVERY_ITEM;
    doClassTest("public void foo(String p1,\n" + "                String p2,\n" + "                String p3,\n"+ "                String p4,\n"+ "                String p5,\n"+ "                String p6,\n"+ "                String p7) {\n"+ "    //To change body of implemented methods use File | Settings | File Templates.\n"+ "}","public void foo(String p1,\n" + "                String p2,\n" + "                String p3,\n"+ "                String p4,\n"+ "                String p5,\n"+ "                String p6,\n"+ "                String p7) {\n"+ "    //To change body of implemented methods use File | Settings | File Templates.\n"+ "}");
  }
  finally {
    codeStyleSettings.setRightMargin(JavaLanguage.INSTANCE,oldMargin);
    codeStyleSettings.KEEP_LINE_BREAKS=oldKeep;
    codeStyleSettings.METHOD_PARAMETERS_WRAP=oldWrap;
  }
}
