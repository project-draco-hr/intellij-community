{
  return new Runnable(){
    @Override public void run(){
      myFoldingModel.updateContext(myRequest,getFoldingModelSettings());
      clearDiffPresentation();
      myIsContentsEqual=data.isContentsEqual();
      if (data.isContentsEqual()) {
        boolean equalCharsets=TextDiffViewerUtil.areEqualCharsets(getContents());
        boolean equalSeparators=TextDiffViewerUtil.areEqualLineSeparators(getContents());
        myPanel.addNotification(DiffNotifications.createEqualContents(equalCharsets,equalSeparators));
      }
      if (data.getFragments() != null) {
        for (        LineFragment fragment : data.getFragments()) {
          myDiffChanges.add(new SimpleDiffChange(SimpleDiffViewer.this,fragment));
        }
      }
      myFoldingModel.install(data.getFragments(),myRequest,getFoldingModelSettings());
      myInitialScrollHelper.onRediff();
      myContentPanel.repaintDivider();
      myStatusPanel.update();
    }
  }
;
}
