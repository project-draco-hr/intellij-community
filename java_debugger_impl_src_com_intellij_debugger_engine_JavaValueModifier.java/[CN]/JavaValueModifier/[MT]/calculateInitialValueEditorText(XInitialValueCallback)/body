{
  final Value value=myJavaValue.getDescriptor().getValue();
  if (value instanceof PrimitiveValue) {
    callback.setValue(myJavaValue.getValueString());
  }
 else   if (value instanceof StringReference) {
    final EvaluationContextImpl evaluationContext=myJavaValue.getEvaluationContext();
    evaluationContext.getManagerThread().schedule(new SuspendContextCommandImpl(evaluationContext.getSuspendContext()){
      @Override public Priority getPriority(){
        return Priority.NORMAL;
      }
      @Override public void contextAction() throws Exception {
        callback.setValue(StringUtil.wrapWithDoubleQuote(DebuggerUtils.translateStringValue(DebuggerUtils.getValueAsString(evaluationContext,value))));
      }
    }
);
  }
 else {
    callback.setValue(null);
  }
}
