{
  PsiElement variableDeclaration=node.getReference().resolve();
  if (variableDeclaration == null) {
    return;
  }
  if (!PyUtil.inSameFile(node,variableDeclaration)) {
    return;
  }
  PsiElement variableFirstTimeDeclaration=variableDeclaration.getParent();
  if (variableFirstTimeDeclaration.equals(node.getParent())) {
    return;
  }
  if (PsiTreeUtil.getNonStrictParentOfType(variableFirstTimeDeclaration,PyForPart.class,PyWithStatement.class) != null) {
    registerProblem(node,MESSAGE);
  }
}
