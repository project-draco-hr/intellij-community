{
  Process ps;
  BufferedReader psOutput;
  String[] args={"/bin/ps","-a","-x","-o","pid,command"};
  try {
    ps=ProcessUtils.createProcess(args,null,null);
    psOutput=new BufferedReader(new InputStreamReader(ps.getInputStream()));
  }
 catch (  Exception e) {
    return new PyProcessInfo[0];
  }
  List<PyProcessInfo> procInfo=Lists.newArrayList();
  try {
    String lastline;
    while ((lastline=psOutput.readLine()) != null) {
      lastline=lastline.trim();
      int index=lastline.indexOf(' ');
      if (index != -1) {
        String pidString=lastline.substring(0,index).trim();
        try {
          int pid=Integer.parseInt(pidString);
          String arg=lastline.substring(index + 1);
          procInfo.add(new PyProcessInfo(pid,arg));
        }
 catch (        NumberFormatException e) {
        }
      }
    }
    psOutput.close();
  }
 catch (  Exception e) {
  }
  ps.destroy();
  return procInfo.toArray(new PyProcessInfo[procInfo.size()]);
}
