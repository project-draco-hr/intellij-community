{
  if (branchToCheckout != null) {
    GitLocalBranch branch=repository.getBranches().findLocalBranch(branchToCheckout);
    if (branch != null) {
      Hash hash=repository.getBranches().getHash(branch);
      if (hash != null) {
        return hash.asString();
      }
 else {
        LOG.warn("The hash for branch [" + branchToCheckout + "] is not known!");
      }
    }
 else {
      LOG.warn("The branch [" + branchToCheckout + "] is not known!");
    }
  }
  return repository.getCurrentRevision();
}
