{
  CachedXmlDocumentSet fileSet=EclipseClasspathStorageProvider.getFileCache(module);
  AccessToken token=ApplicationManager.getApplication().acquireWriteActionLock(DocumentRunnable.IgnoreDocumentRunnable.class);
  try {
    for (    String key : modifiedContent.keySet()) {
      Element content=modifiedContent.get(key);
      Writer writer=new OutputStreamWriter(StorageUtil.getOrCreateVirtualFile(this,fileSet.getParent(key) + '/' + key).getOutputStream(this),CharsetToolkit.UTF8_CHARSET);
      try {
        EclipseJDOMUtil.output(content,writer,module.getProject());
      }
  finally {
        writer.close();
      }
    }
    if (deletedContent.isEmpty()) {
      return;
    }
    for (    String deleted : deletedContent) {
      VirtualFile file=fileSet.getFile(deleted,false);
      if (file != null) {
        try {
          file.delete(this);
        }
 catch (        IOException ignore) {
        }
      }
    }
    deletedContent.clear();
  }
  finally {
    token.finish();
  }
}
