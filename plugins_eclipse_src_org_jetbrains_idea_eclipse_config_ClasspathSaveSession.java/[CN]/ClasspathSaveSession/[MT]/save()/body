{
  CachedXmlDocumentSet fileSet=EclipseClasspathStorageProvider.getFileCache(module);
  AccessToken token=WriteAction.start();
  try {
    for (    String key : modifiedContent.keySet()) {
      Element content=modifiedContent.get(key);
      String path=fileSet.getParent(key) + '/' + key;
      Writer writer=new OutputStreamWriter(StorageUtil.getOrCreateVirtualFile(this,new File(path)).getOutputStream(this),CharsetToolkit.UTF8_CHARSET);
      try {
        EclipseJDOMUtil.output(content,writer,module.getProject());
      }
  finally {
        writer.close();
      }
    }
    if (deletedContent.isEmpty()) {
      return;
    }
    for (    String deleted : deletedContent) {
      VirtualFile file=fileSet.getFile(deleted,false);
      if (file != null) {
        try {
          file.delete(this);
        }
 catch (        IOException ignore) {
        }
      }
    }
    deletedContent.clear();
  }
  finally {
    token.finish();
  }
}
