{
  boolean replaced=true;
  while (replaced) {
    replaced=false;
    for (    Exprent expr : exprent.getAllExprents()) {
      Exprent retexpr=processExprentRecursive(expr);
      if (retexpr != null) {
        exprent.replaceExprent(expr,retexpr);
        replaced=true;
        exprentReplaced=true;
        break;
      }
    }
  }
  if (exprent.type == Exprent.EXPRENT_ASSIGNMENT) {
    AssignmentExprent as=(AssignmentExprent)exprent;
    if (as.getRight().type == Exprent.EXPRENT_FUNCTION) {
      FunctionExprent func=(FunctionExprent)as.getRight();
      VarType midlayer=null;
      if (func.getFuncType() >= FunctionExprent.FUNCTION_I2L && func.getFuncType() <= FunctionExprent.FUNCTION_I2S) {
        midlayer=func.getSimpleCastType();
        if (func.getLstOperands().get(0).type == Exprent.EXPRENT_FUNCTION) {
          func=(FunctionExprent)func.getLstOperands().get(0);
        }
 else {
          return null;
        }
      }
      if (func.getFuncType() == FunctionExprent.FUNCTION_ADD || func.getFuncType() == FunctionExprent.FUNCTION_SUB) {
        Exprent econd=func.getLstOperands().get(0);
        Exprent econst=func.getLstOperands().get(1);
        if (econst.type != Exprent.EXPRENT_CONST && econd.type == Exprent.EXPRENT_CONST && func.getFuncType() == FunctionExprent.FUNCTION_ADD) {
          econd=econst;
          econst=func.getLstOperands().get(0);
        }
        if (econst.type == Exprent.EXPRENT_CONST && ((ConstExprent)econst).hasValueOne()) {
          Exprent left=as.getLeft();
          VarType condtype=econd.getExprType();
          if (left.equals(econd) && (midlayer == null || midlayer.equals(condtype))) {
            FunctionExprent ret=new FunctionExprent(func.getFuncType() == FunctionExprent.FUNCTION_ADD ? FunctionExprent.FUNCTION_PPI : FunctionExprent.FUNCTION_MMI,econd,func.bytecode);
            ret.setImplicitType(condtype);
            exprentReplaced=true;
            return ret;
          }
        }
      }
    }
  }
  return null;
}
