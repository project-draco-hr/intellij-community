{
  myProject=project;
  myPushSupport=pushSupport;
  myPushSpecs=pushSpecs;
  myTagMode=tagMode;
  myForce=force;
  myGit=ServiceManager.getService(Git.class);
  myProgressIndicator=ObjectUtils.notNull(ProgressManager.getInstance().getProgressIndicator(),new EmptyProgressIndicator());
  mySettings=GitVcsSettings.getInstance(myProject);
  myPushSettings=GitPushSettings.getInstance(myProject);
  myPlatformFacade=ServiceManager.getService(project,GitPlatformFacade.class);
  myRepositoryManager=ServiceManager.getService(myProject,GitRepositoryManager.class);
  Map<GitRepository,GitRevisionNumber> currentHeads=ContainerUtil.newHashMap();
  for (  GitRepository repository : pushSpecs.keySet()) {
    repository.update();
    String head=repository.getCurrentRevision();
    if (head == null) {
      LOG.error("This repository has no commits");
    }
 else {
      currentHeads.put(repository,new GitRevisionNumber(head));
    }
  }
}
