{
  boolean updateAllRoots=mySettings.shouldUpdateAllRootsIfPushRejected();
  UpdateMethod updateMethod=mySettings.getUpdateType();
  if (updateMethod == UpdateMethod.BRANCH_DEFAULT) {
    updateMethod=GitUpdater.resolveUpdateMethod(myProject,myPushSpecs.keySet().iterator().next().getRoot());
  }
  return new PushUpdateSettings(updateAllRoots,updateMethod);
}
