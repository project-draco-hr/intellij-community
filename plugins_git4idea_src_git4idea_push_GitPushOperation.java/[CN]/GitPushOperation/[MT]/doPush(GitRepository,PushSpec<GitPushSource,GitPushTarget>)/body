{
  GitPushTarget target=pushSpec.getTarget();
  GitLocalBranch sourceBranch=pushSpec.getSource().getBranch();
  GitRemoteBranch targetBranch=target.getBranch();
  GitLineHandlerListener progressListener=GitStandardProgressAnalyzer.createListener(myProgressIndicator);
  boolean setUpstream=pushSpec.getTarget().isNewBranchCreated() && !branchTrackingInfoIsSet(repository,sourceBranch);
  String tagMode=myTagMode == null ? null : myTagMode.getArgument();
  String spec=sourceBranch.getFullName() + ":" + targetBranch.getNameForRemoteOperations();
  GitCommandResult res=myGit.push(repository,targetBranch.getRemote(),spec,myForce,setUpstream,tagMode,progressListener);
  return new ResultWithOutput(res);
}
