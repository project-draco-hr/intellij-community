{
  myFactory=toCopy.myFactory;
  myEphemeral=toCopy.myEphemeral;
  myDefaultVariableStates=toCopy.myDefaultVariableStates;
  myStack=new Stack<DfaValue>(toCopy.myStack);
  myDistinctClasses=new TLongHashSet(toCopy.myDistinctClasses.toArray());
  myUnknownVariables=new THashSet<DfaVariableValue>(toCopy.myUnknownVariables);
  myOffsetStack=new TIntStack(toCopy.myOffsetStack);
  myEqClasses=ContainerUtil.newArrayListWithCapacity(toCopy.myEqClasses.size());
  for (int i=0; i < toCopy.myEqClasses.size(); i++) {
    EqClass aClass=toCopy.myEqClasses.get(i);
    myEqClasses.add(aClass != null ? new EqClass(aClass) : null);
  }
  myVariableStates=new THashMap<DfaVariableValue,DfaVariableState>(toCopy.myVariableStates);
  myCachedDistinctClassPairs=toCopy.myCachedDistinctClassPairs;
  myCachedNonTrivialEqClasses=toCopy.myCachedNonTrivialEqClasses;
}
