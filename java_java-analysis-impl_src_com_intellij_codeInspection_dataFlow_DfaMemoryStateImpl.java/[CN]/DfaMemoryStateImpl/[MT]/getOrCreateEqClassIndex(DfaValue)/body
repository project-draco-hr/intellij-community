{
  int i=getEqClassIndex(dfaValue);
  if (i != -1)   return i;
  if (!canBeInRelation(dfaValue) || !canBeReused(dfaValue) && !(((DfaBoxedValue)dfaValue).getWrappedValue() instanceof DfaConstValue)) {
    return null;
  }
  EqClass aClass=new EqClass(myFactory);
  aClass.add(dfaValue.getID());
  int freeIndex=myEqClasses.indexOf(null);
  if (freeIndex >= 0) {
    myEqClasses.set(freeIndex,aClass);
    return freeIndex;
  }
  myEqClasses.add(aClass);
  return myEqClasses.size() - 1;
}
