{
  if (myDistinctClasses.size() != that.myDistinctClasses.size())   return false;
  if (!getNonTrivialEqClasses().equals(that.getNonTrivialEqClasses()))   return false;
  if (!getDistinctClassPairs().equals(that.getDistinctClassPairs()))   return false;
  for (  DfaVariableValue var : myVariableStates.keySet()) {
    DfaVariableState thatState=that.myVariableStates.get(var);
    if (!myVariableStates.get(var).equals(thatState != null ? thatState : createVariableState(var))) {
      return false;
    }
  }
  for (  DfaVariableValue var : that.myVariableStates.keySet()) {
    if (!myVariableStates.containsKey(var) && !that.myVariableStates.get(var).equals(createVariableState(var))) {
      return false;
    }
  }
  return true;
}
