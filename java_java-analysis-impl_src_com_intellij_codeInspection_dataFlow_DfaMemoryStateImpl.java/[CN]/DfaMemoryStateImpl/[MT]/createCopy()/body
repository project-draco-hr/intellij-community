{
  DfaMemoryStateImpl newState=createNew();
  newState.myDefaultVariableStates=myDefaultVariableStates;
  newState.myEphemeral=myEphemeral;
  newState.myStack.addAll(myStack);
  newState.myDistinctClasses.addAll(myDistinctClasses.toArray());
  newState.myUnknownVariables.addAll(myUnknownVariables);
  newState.myOffsetStack=new TIntStack(myOffsetStack);
  for (int i=0; i < myEqClasses.size(); i++) {
    EqClass aClass=myEqClasses.get(i);
    newState.myEqClasses.add(aClass != null ? new EqClass(aClass) : null);
  }
  newState.myVariableStates.putAll(myVariableStates);
  return newState;
}
