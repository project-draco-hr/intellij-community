{
  if (isUnknownState(dfaLeft) || isUnknownState(dfaRight)) {
    return true;
  }
  Integer c1Index=getOrCreateEqClassIndex(dfaLeft);
  Integer c2Index=getOrCreateEqClassIndex(dfaRight);
  if (c1Index == null || c2Index == null) {
    return true;
  }
  if (!isNegated) {
    if (c1Index.equals(c2Index) || areCompatibleConstants(c1Index,c2Index))     return true;
    if (!uniteClasses(c1Index,c2Index))     return false;
    for (    long encodedPair : myDistinctClasses.toArray()) {
      EqClass c1=myEqClasses.get(low(encodedPair));
      EqClass c2=myEqClasses.get(high(encodedPair));
      DfaConstValue const1=(DfaConstValue)c1.findConstant(false);
      DfaConstValue const2=(DfaConstValue)c2.findConstant(false);
      if (const1 != null && const2 != null && !preserveConstantDistinction(const1.getValue(),const2.getValue())) {
        myDistinctClasses.remove(encodedPair);
      }
    }
    myCachedDistinctClassPairs=null;
    myCachedNonTrivialEqClasses=null;
    myCachedHash=null;
  }
 else {
    if (c1Index.equals(c2Index) || areCompatibleConstants(c1Index,c2Index))     return false;
    makeClassesDistinct(c1Index,c2Index);
    myCachedDistinctClassPairs=null;
    myCachedHash=null;
  }
  return true;
}
