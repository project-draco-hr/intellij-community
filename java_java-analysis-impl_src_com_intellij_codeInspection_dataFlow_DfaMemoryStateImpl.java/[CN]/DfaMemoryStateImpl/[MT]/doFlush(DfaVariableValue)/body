{
  DfaVariableValue varNegated=varPlain.getNegatedValue();
  final int idPlain=varPlain.getID();
  final int idNegated=varNegated == null ? -1 : varNegated.getID();
  int size=myEqClasses.size();
  int interruptCount=0;
  for (int varClassIndex=0; varClassIndex < size; varClassIndex++) {
    final SortedIntSet varClass=myEqClasses.get(varClassIndex);
    if (varClass == null)     continue;
    for (int i=0; i < varClass.size(); i++) {
      if ((++interruptCount & 0xf) == 0) {
        ProgressManager.checkCanceled();
      }
      int cl=varClass.get(i);
      DfaValue value=myFactory.getValue(cl);
      if (mine(idPlain,value) || idNegated >= 0 && mine(idNegated,value)) {
        varClass.remove(i);
        break;
      }
    }
    if (varClass.isEmpty()) {
      myEqClasses.set(varClassIndex,null);
      long[] pairs=myDistinctClasses.toArray();
      for (      long pair : pairs) {
        if (low(pair) == varClassIndex || high(pair) == varClassIndex) {
          myDistinctClasses.remove(pair);
        }
      }
    }
 else     if (containsConstantsOnly(varClassIndex)) {
      for (      long pair : myDistinctClasses.toArray()) {
        if (low(pair) == varClassIndex && containsConstantsOnly(high(pair)) || high(pair) == varClassIndex && containsConstantsOnly(low(pair))) {
          myDistinctClasses.remove(pair);
        }
      }
    }
  }
  myVariableStates.remove(varPlain);
  if (varNegated != null) {
    myVariableStates.remove(varNegated);
  }
}
