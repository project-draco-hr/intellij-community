{
  File index=new File(new File(storageRoot,INDEX_DIR),INDEX_NAME);
  if (!index.exists()) {
    Map<String,File> mapping=ContainerUtil.newHashMap();
    return new JavaModuleIndexImpl(mapping);
  }
  Properties p=new Properties();
  try {
    Reader reader=new InputStreamReader(new FileInputStream(index),CharsetToolkit.UTF8_CHARSET);
    try {
      p.load(reader);
    }
  finally {
      reader.close();
    }
  }
 catch (  IOException e) {
    throw new RuntimeException("Failed to read module index file: " + index,e);
  }
  Map<String,File> mapping=ContainerUtil.newHashMap();
  for (  String key : p.stringPropertyNames()) {
    String path=p.getProperty(key);
    mapping.put(key,NULL_PATH.equals(path) ? null : new File(path));
  }
  return new JavaModuleIndexImpl(mapping);
}
