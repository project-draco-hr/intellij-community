{
  DeployToServerRunConfiguration deployConfiguration=(DeployToServerRunConfiguration)configuration;
  if (deployConfiguration.getServerName() == null) {
    RemoteServer<?> server=ContainerUtil.getFirstItem(RemoteServersManager.getInstance().getServers(myServerType));
    if (server != null) {
      deployConfiguration.setServerName(server.getName());
    }
  }
  if (deployConfiguration.getDeploymentSource() == null) {
    List<DeploymentSource> sources=deployConfiguration.getDeploymentConfigurator().getAvailableDeploymentSources();
    DeploymentSource source=ContainerUtil.getFirstItem(sources);
    if (source != null) {
      deployConfiguration.setDeploymentSource(source);
      if (source instanceof ArtifactDeploymentSource) {
        Artifact artifact=((ArtifactDeploymentSource)source).getArtifact();
        if (artifact != null) {
          BuildArtifactsBeforeRunTaskProvider.setBuildArtifactBeforeRun(configuration.getProject(),configuration,artifact);
        }
      }
    }
  }
}
