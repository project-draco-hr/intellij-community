{
  Presentation presentation=event.getPresentation();
  ExecutionEnvironment environment=getEnvironment(event);
  if (environment != null) {
    presentation.setText(ExecutionBundle.message("rerun.configuration.action.name",environment.getRunProfile().getName()));
    RunContentDescriptor descriptor=getDescriptor(event);
    ProcessHandler processHandler=descriptor == null ? null : descriptor.getProcessHandler();
    presentation.setIcon(processHandler != null && !processHandler.isProcessTerminated() ? AllIcons.Actions.Restart : environment.getExecutor().getIcon());
    presentation.setEnabledAndVisible(isEnabled(event));
    return;
  }
  FakeRerunAction action=findActualAction(event);
  presentation.setEnabled(action != null && action.isEnabled(event));
  presentation.setVisible(false);
}
