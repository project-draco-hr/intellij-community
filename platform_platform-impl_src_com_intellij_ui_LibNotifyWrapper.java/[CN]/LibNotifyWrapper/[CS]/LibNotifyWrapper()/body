{
  myLibNotify=(LibNotify)Native.loadLibrary("libnotify.so.4",LibNotify.class);
  String appName=ApplicationNamesInfo.getInstance().getProductName();
  if (myLibNotify.notify_init(appName) == 0) {
    throw new IllegalStateException("notify_init failed");
  }
  MessageBusConnection connection=ApplicationManager.getApplication().getMessageBus().connect();
  connection.subscribe(AppLifecycleListener.TOPIC,new AppLifecycleListener.Adapter(){
    @Override public void appClosing(){
      myLibNotify.notify_uninit();
    }
  }
);
}
