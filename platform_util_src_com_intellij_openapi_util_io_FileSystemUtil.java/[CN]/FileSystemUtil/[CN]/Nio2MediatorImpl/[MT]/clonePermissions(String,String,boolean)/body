{
  if (SystemInfo.isUnix) {
    Object sourcePath=myGetPath.invoke(myDefaultFileSystem,source,ArrayUtil.EMPTY_STRING_ARRAY);
    Object targetPath=myGetPath.invoke(myDefaultFileSystem,target,ArrayUtil.EMPTY_STRING_ARRAY);
    Collection sourcePermissions=getPermissions(sourcePath);
    if (sourcePermissions != null) {
      Collection permissionsToSet;
      if (onlyPermissionsToExecute) {
        Collection targetPermissions=getPermissions(targetPath);
        permissionsToSet=new HashSet();
        for (        Object permission : targetPermissions) {
          if (!permission.toString().endsWith("_EXECUTE")) {
            permissionsToSet.add(permission);
          }
        }
        for (        Object permission : sourcePermissions) {
          if (permission.toString().endsWith("_EXECUTE")) {
            permissionsToSet.add(permission);
          }
        }
      }
 else {
        permissionsToSet=sourcePermissions;
      }
      mySetAttribute.invoke(null,targetPath,"posix:permissions",permissionsToSet,myLinkOptions);
      return true;
    }
  }
  return false;
}
