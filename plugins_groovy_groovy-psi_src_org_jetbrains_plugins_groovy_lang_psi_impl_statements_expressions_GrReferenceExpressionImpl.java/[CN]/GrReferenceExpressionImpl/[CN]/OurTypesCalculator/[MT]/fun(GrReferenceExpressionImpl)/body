{
  final Pair key=Pair.create(TypeInferenceHelper.getCurrentContext(),refExpr);
  return RecursionManager.doPreventingRecursion(key,true,new Computable<PsiType>(){
    @Override public PsiType compute(){
      return doFun(refExpr);
    }
  }
);
}
