{
  final Map<Integer,Integer> magicMap=new HashMap<Integer,Integer>();
  new GraphVisitorAlgorithm(false).visitSubgraph(graph,new GraphVisitorAlgorithm.SimpleVisitor(){
    @Override public void visitNode(    int nodeIndex){
      int layoutIndex=graphLayout.getLayoutIndex(nodeIndex);
      if (!magicMap.containsKey(layoutIndex) || magicMap.get(layoutIndex) > nodeIndex) {
        magicMap.put(layoutIndex,nodeIndex);
      }
    }
  }
,startIndex,MAGIC_MAP_DEPTH);
  return magicMap;
}
