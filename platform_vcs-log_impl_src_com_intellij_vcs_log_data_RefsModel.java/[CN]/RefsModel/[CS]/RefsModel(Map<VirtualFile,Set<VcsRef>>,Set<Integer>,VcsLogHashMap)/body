{
  myRefs=refsByRoot;
  myHashMap=hashMap;
  Iterable<VcsRef> allRefs=Iterables.concat(refsByRoot.values());
  myBranches=ContainerUtil.newSmartList();
  for (  VcsRef ref : allRefs) {
    if (ref.getType().isBranch()) {
      myBranches.add(ref);
    }
  }
  myRefsToHashes=prepareRefsToIndicesMap(allRefs,hashMap);
  myRootsToHeadIndices=prepareRootsMap(heads,hashMap);
}
