{
  myRefs=refs;
  myHashMap=hashMap;
  myRootsToHeadIndices=new TIntObjectHashMap<>();
  myHeadsMap=new TIntObjectHashMap<>();
  for (  int head : heads) {
    CommitId commitId=myHashMap.getCommitId(head);
    if (commitId != null) {
      VirtualFile root=commitId.getRoot();
      myHeadsMap.put(head,myRefs.get(root).refsToCommit(head));
      myRootsToHeadIndices.put(head,root);
    }
  }
}
