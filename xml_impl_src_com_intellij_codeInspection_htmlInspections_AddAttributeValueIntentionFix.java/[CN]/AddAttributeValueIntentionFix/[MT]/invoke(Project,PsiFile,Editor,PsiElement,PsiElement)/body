{
  final XmlAttribute attribute=PsiTreeUtil.getNonStrictParentOfType(startElement,XmlAttribute.class);
  if (attribute == null || attribute.getValue() != null) {
    return;
  }
  if (!FileModificationService.getInstance().prepareFileForWrite(attribute.getContainingFile())) {
    return;
  }
  new WriteCommandAction(project){
    @Override protected void run(    @NotNull final Result result){
      final XmlAttribute attributeWithValue=XmlElementFactory.getInstance(getProject()).createXmlAttribute(attribute.getName(),"");
      final PsiElement newAttribute=attribute.replace(attributeWithValue);
      if (editor != null && newAttribute != null && newAttribute instanceof XmlAttribute && newAttribute.isValid()) {
        final XmlAttributeValue valueElement=((XmlAttribute)newAttribute).getValueElement();
        if (valueElement != null) {
          editor.getCaretModel().moveToOffset(valueElement.getTextOffset());
          AutoPopupController.getInstance(newAttribute.getProject()).scheduleAutoPopup(editor);
        }
      }
    }
  }
.execute();
}
