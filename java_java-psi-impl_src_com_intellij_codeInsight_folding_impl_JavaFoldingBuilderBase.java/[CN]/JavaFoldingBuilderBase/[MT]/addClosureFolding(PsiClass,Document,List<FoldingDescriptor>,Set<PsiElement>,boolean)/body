{
  if (!JavaCodeFoldingSettings.getInstance().isCollapseLambdas()) {
    return false;
  }
  if (aClass instanceof PsiAnonymousClass) {
    final PsiAnonymousClass anonymousClass=(PsiAnonymousClass)aClass;
    ClosureFolding closureFolding=ClosureFolding.prepare(anonymousClass,quick,this);
    List<NamedFoldingDescriptor> descriptors=closureFolding == null ? null : closureFolding.process(document);
    if (descriptors != null) {
      foldElements.addAll(descriptors);
      addCodeBlockFolds(closureFolding.methodBody,foldElements,processedComments,document,quick);
      return true;
    }
  }
  return false;
}
