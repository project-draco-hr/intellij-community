{
  final FileEditorManagerEx editorManager=FileEditorManagerEx.getInstanceEx(project);
  EditorWindow currentWindow=EditorWindow.DATA_KEY.getData(dataContext);
  if (currentWindow == null) {
    currentWindow=editorManager.getCurrentWindow();
  }
  VirtualFile selectedFile=currentWindow.getSelectedFile();
  if (selectedFile == null) {
    selectedFile=CommonDataKeys.VIRTUAL_FILE.getData(dataContext);
  }
  final VirtualFile[] files=currentWindow.getFiles();
  int index=ArrayUtil.find(files,selectedFile);
  LOG.assertTrue(index != -1);
  editorManager.openFile(files[(index + files.length + myDir) % files.length],true);
}
