{
  final PsiElement scope=parameter.getDeclarationScope();
  if (scope instanceof PsiMethod) {
    final PsiMethod method=(PsiMethod)scope;
    final PsiParameter[] parameters=method.getParameterList().getParameters();
    final List<ParameterInfoImpl> info=new ArrayList<ParameterInfoImpl>();
    for (int i=0; i < parameters.length; i++) {
      PsiParameter psiParameter=parameters[i];
      if (psiParameter == parameter)       continue;
      info.add(new ParameterInfoImpl(i,psiParameter.getName(),psiParameter.getType()));
    }
    final ParameterInfoImpl[] newParams=info.toArray(new ParameterInfoImpl[info.size()]);
    final String visibilityModifier=VisibilityUtil.getVisibilityModifier(method.getModifierList());
    final PsiType returnType=method.getReturnType();
    final JavaChangeInfo changeInfo=new JavaChangeInfoImpl(visibilityModifier,method,method.getName(),returnType != null ? CanonicalTypes.createTypeWrapper(returnType) : null,newParams,null,false,ContainerUtil.newHashSet(),ContainerUtil.newHashSet());
    final ChangeSignatureProcessor cp=new ChangeSignatureProcessor(project,changeInfo){
      @Override protected void performRefactoring(      @NotNull UsageInfo[] usages){
        final PsiElementFactory elementFactory=JavaPsiFacade.getElementFactory(project);
        final PsiElement newDeclaration=moveDeclaration(elementFactory,localName,parameter,initializer,action,references);
        super.performRefactoring(usages);
        positionCaretToDeclaration(project,newDeclaration.getContainingFile(),newDeclaration);
      }
    }
;
    cp.run();
  }
  return null;
}
