{
  if (psi instanceof GrCodeBlock) {
    final int lineFeedCount=StringUtil.countChars(psi.getText(),'\n');
    if (lineFeedCount <= 2) {
      final PsiElement lbrace=((GrCodeBlock)psi).getLBrace();
      final PsiElement rbrace=((GrCodeBlock)psi).getRBrace();
      if (lbrace != null && rbrace != null) {
        final PsiElement next=lbrace.getNextSibling();
        final PsiElement prev=rbrace.getPrevSibling();
        if (next != null && PsiImplUtil.isWhiteSpaceOrNls(next) && prev != null && PsiImplUtil.isWhiteSpaceOrNls(prev)) {
          final FoldingGroup group=FoldingGroup.newGroup("block_group");
          descriptors.add(new NamedFoldingDescriptor(psi.getNode(),lbrace.getTextRange().getStartOffset(),next.getTextRange().getEndOffset(),group,"{"));
          descriptors.add(new NamedFoldingDescriptor(psi.getNode(),prev.getTextRange().getStartOffset(),rbrace.getTextRange().getEndOffset(),group,"}"));
          return;
        }
      }
    }
  }
  descriptors.add(new FoldingDescriptor(psi,psi.getTextRange()));
}
