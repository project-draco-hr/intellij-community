{
  PyExpression callee=us.getCallee();
  if (callee instanceof PyReferenceExpression) {
    PyReferenceExpression ref=(PyReferenceExpression)callee;
    PsiElement resolved=PyUtil.followAssignmentsChain(ref);
    if (resolved instanceof PyFunction) {
      EnumSet<PyCallExpression.Flag> flags=EnumSet.noneOf(PyCallExpression.Flag.class);
      int implicit_offset=0;
      boolean is_by_instance=isByInstance(us);
      if (is_by_instance)       implicit_offset+=1;
      PyFunction method=(PyFunction)resolved;
      if (PyNames.INIT.equals(method.getName()))       implicit_offset+=1;
      PyDecoratorList decolist=method.getDecoratorList();
      if (decolist != null) {
        PyDecorator[] decos=decolist.getDecorators();
        if (decos.length == 1) {
          PyDecorator deco=decos[0];
          String deconame=deco.getName();
          if (deco.isBuiltin()) {
            if (PyNames.STATICMETHOD.equals(deconame)) {
              flags.add(PyCallExpression.Flag.STATICMETHOD);
              if (implicit_offset > 0)               implicit_offset-=1;
            }
 else             if (PyNames.CLASSMETHOD.equals(deconame)) {
              flags.add(PyCallExpression.Flag.CLASSMETHOD);
              if (!is_by_instance)               implicit_offset+=1;
            }
          }
        }
      }
      return new PyCallExpression.PyMarkedFunction((PyFunction)resolved,flags,implicit_offset);
    }
  }
  return null;
}
