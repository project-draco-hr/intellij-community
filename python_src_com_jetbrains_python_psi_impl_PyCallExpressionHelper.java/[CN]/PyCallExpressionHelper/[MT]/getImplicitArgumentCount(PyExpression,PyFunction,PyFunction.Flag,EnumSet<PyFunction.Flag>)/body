{
  int implicit_offset=0;
  boolean is_by_instance=isByInstance(callReference);
  if (is_by_instance)   implicit_offset+=1;
  if (wrapped_flag != null) {
    if (flags != null) {
      flags.add(wrapped_flag);
      flags.add(PyFunction.Flag.WRAPPED);
    }
    if (wrapped_flag == PyFunction.Flag.STATICMETHOD && implicit_offset > 0)     implicit_offset-=1;
    if (wrapped_flag == PyFunction.Flag.CLASSMETHOD && !is_by_instance)     implicit_offset+=1;
  }
  if (!is_by_instance && PyNames.NEW.equals(method.getName()))   implicit_offset+=1;
  if (PyNames.INIT.equals(method.getName())) {
    String refName=callReference instanceof PyReferenceExpression ? ((PyReferenceExpression)callReference).getReferencedName() : null;
    if (!PyNames.INIT.equals(refName)) {
      implicit_offset+=1;
    }
  }
  PyDecoratorList decolist=method.getDecoratorList();
  if (decolist != null) {
    PyDecorator[] decos=decolist.getDecorators();
    if (decos.length == 1) {
      PyDecorator deco=decos[0];
      String deconame=deco.getName();
      if (deco.isBuiltin()) {
        if (PyNames.STATICMETHOD.equals(deconame)) {
          if (flags != null) {
            flags.add(PyFunction.Flag.STATICMETHOD);
          }
          if (is_by_instance && implicit_offset > 0)           implicit_offset-=1;
        }
 else         if (PyNames.CLASSMETHOD.equals(deconame)) {
          if (flags != null) {
            flags.add(PyFunction.Flag.CLASSMETHOD);
          }
          if (!is_by_instance)           implicit_offset+=1;
        }
      }
    }
  }
  return implicit_offset;
}
