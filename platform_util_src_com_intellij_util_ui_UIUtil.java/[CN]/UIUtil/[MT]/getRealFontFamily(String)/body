{
  if (ourRealFontFamilies != null && ourRealFontFamilies.get(genericFontFamily) != null) {
    return ourRealFontFamilies.get(genericFontFamily);
  }
  String pattern="Real Font Family";
  List<String> GENERIC=Arrays.asList(Font.DIALOG,Font.DIALOG_INPUT,Font.MONOSPACED,Font.SANS_SERIF,Font.SERIF);
  int patternSize=50;
  BufferedImage image=createImage(1,1,BufferedImage.TYPE_INT_ARGB);
  Graphics graphics=image.getGraphics();
  graphics.setFont(new Font(genericFontFamily,Font.PLAIN,patternSize));
  Object patternBounds=graphics.getFontMetrics().getStringBounds(pattern,graphics);
  for (  String family : GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames()) {
    if (GENERIC.contains(family))     continue;
    graphics.setFont(new Font(family,Font.PLAIN,patternSize));
    if (graphics.getFontMetrics().getStringBounds(pattern,graphics).equals(patternBounds)) {
      if (ourRealFontFamilies == null) {
        ourRealFontFamilies=new HashMap<String,String>();
      }
      ourRealFontFamilies.put(genericFontFamily,family);
      return family;
    }
  }
  return genericFontFamily;
}
