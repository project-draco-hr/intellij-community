{
  Font font=getLabelFont();
  @NonNls String family=!SystemInfo.isWindows && font != null ? font.getFamily() : "Tahoma";
  int size=font != null ? font.getSize() : JBUI.scale(11);
  String customCss=String.format("body, div, p { font-family: %s; font-size: %s; }",family,size);
  if (noGapsBetweenParagraphs) {
    customCss+=" p { margin-top: 0; }";
  }
  final StyleSheet style=new StyleSheet();
  style.addStyleSheet(isUnderDarcula() ? (StyleSheet)UIManager.getDefaults().get("StyledEditorKit.JBDefaultStyle") : DEFAULT_HTML_KIT_CSS);
  style.addRule(customCss);
  scaleStyleSheetFontSize(style);
  return new HTMLEditorKit(){
    @Override public Document createDefaultDocument(){
      Document document=super.createDefaultDocument();
      if (document instanceof HTMLDocument) {
        scaleStyleSheetFontSize(((HTMLDocument)document).getStyleSheet());
      }
      return document;
    }
    @Override public StyleSheet getStyleSheet(){
      return style;
    }
  }
;
}
