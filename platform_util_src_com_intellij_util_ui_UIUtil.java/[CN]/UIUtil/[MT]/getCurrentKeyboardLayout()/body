{
  InputContext instance=InputContext.getInstance();
  Class<? extends InputContext> instanceClass=instance.getClass();
  if (instanceClass.getSuperclass().getName().equals("sun.awt.im.InputContext")) {
    try {
      Field f=instanceClass.getSuperclass().getDeclaredField("inputMethodLocator");
      f.setAccessible(true);
      Object o=f.get(instance);
      f=o.getClass().getDeclaredField("locale");
      f.setAccessible(true);
      o=f.get(o);
      if (o instanceof Locale) {
        return ((Locale)o).getLanguage().toUpperCase(Locale.getDefault());
      }
    }
 catch (    Exception ignored) {
    }
  }
  return null;
}
