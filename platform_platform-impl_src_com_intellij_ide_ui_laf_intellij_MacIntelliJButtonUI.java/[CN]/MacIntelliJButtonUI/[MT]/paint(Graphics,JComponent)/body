{
  int w=c.getWidth();
  int h=c.getHeight();
  if (isHelpButton(c)) {
    ((Graphics2D)g).setPaint(UIUtil.getGradientPaint(0,0,getButtonColor1(),0,h,getButtonColor2()));
    int off=JBUI.scale(22);
    int x=(w - off) / 2;
    int y=(h - off) / 2;
    g.fillOval(x,y,off,off);
    AllIcons.Actions.Help.paintIcon(c,g,x + JBUI.scale(3),y + JBUI.scale(3));
  }
 else {
    AbstractButton b=(AbstractButton)c;
    ButtonModel model=b.getModel();
    String text=layout(b,SwingUtilities2.getFontMetrics(b,g),b.getWidth(),b.getHeight());
    final Border border=c.getBorder();
    if (b.isFocusPainted() && b.hasFocus()) {
      if (border instanceof MacIntelliJBorder) {
        border.paintBorder(b,g,1,1,b.getWidth() - 2,b.getHeight() - 4);
      }
    }
    boolean isDefault=b instanceof JButton && ((JButton)b).isDefaultButton();
    final boolean square=isSquare(c);
    int x=3;
    int y=(h - viewRect.height) / 2;
    Icon icon;
    icon=isDefault ? LEFT_SELECTED : LEFT;
    icon.paintIcon(b,g,x,y);
    x+=icon.getIconWidth();
    int stop=w - 3 - RIGHT.getIconWidth();
    Graphics gg=g.create(0,0,w,h);
    gg.setClip(x,y,stop - x,h);
    icon=isDefault ? MIDDLE_SELECTED : MIDDLE;
    while (x < stop) {
      icon.paintIcon(b,gg,x,y);
      x+=icon.getIconWidth();
    }
    gg.dispose();
    icon=isDefault ? RIGHT_SELECTED : RIGHT;
    icon.paintIcon(b,g,stop,y);
    clearTextShiftOffset();
    if (b.getIcon() != null) {
      paintIcon(g,c,iconRect);
    }
    if (text != null && !text.equals("")) {
      View v=(View)c.getClientProperty(BasicHTML.propertyKey);
      if (v != null) {
        v.paint(g,textRect);
      }
 else {
        paintText(g,b,textRect,text);
      }
    }
  }
}
