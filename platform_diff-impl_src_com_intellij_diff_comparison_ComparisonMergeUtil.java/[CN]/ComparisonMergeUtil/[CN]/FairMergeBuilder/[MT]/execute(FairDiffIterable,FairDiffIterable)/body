{
  PeekIterator<Range> unchanged1=new PeekIterator<Range>(fragments1.unchanged());
  PeekIterator<Range> unchanged2=new PeekIterator<Range>(fragments2.unchanged());
  while (!unchanged1.atEnd() && !unchanged2.atEnd()) {
    Side side=add(unchanged1.peek(),unchanged2.peek());
    side.select(unchanged1,unchanged2).advance();
  }
  return finish(fragments1,fragments2);
}
