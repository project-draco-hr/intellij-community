{
  final DefaultCodeFragmentFactory defaultFactory=DefaultCodeFragmentFactory.getInstance();
  final CodeFragmentFactory[] providers=ApplicationManager.getApplication().getExtensions(CodeFragmentFactory.EXTENSION_POINT_NAME);
  final List<CodeFragmentFactory> suitableFactories=new ArrayList<>(providers.length);
  if (providers.length > 0) {
    for (    CodeFragmentFactory factory : providers) {
      if (factory != defaultFactory && factory.isContextAccepted(context)) {
        suitableFactories.add(factory);
      }
    }
  }
  suitableFactories.add(defaultFactory);
  return suitableFactories;
}
