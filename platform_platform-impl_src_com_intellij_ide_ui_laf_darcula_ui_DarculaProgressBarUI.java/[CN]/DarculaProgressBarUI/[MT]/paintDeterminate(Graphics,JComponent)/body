{
  if (!(g instanceof Graphics2D)) {
    return;
  }
  if (progressBar.getOrientation() != SwingConstants.HORIZONTAL || !c.getComponentOrientation().isLeftToRight()) {
    super.paintDeterminate(g,c);
    return;
  }
  final GraphicsConfig config=GraphicsUtil.setupAAPainting(g);
  Insets b=progressBar.getInsets();
  final int w=progressBar.getWidth();
  final int h=progressBar.getPreferredSize().height;
  int barRectWidth=w - (b.right + b.left);
  int barRectHeight=h - (b.top + b.bottom);
  if (barRectWidth <= 0 || barRectHeight <= 0) {
    return;
  }
  int amountFull=getAmountFull(b,barRectWidth,barRectHeight);
  g.setColor(c.getParent().getBackground());
  Graphics2D g2=(Graphics2D)g;
  if (c.isOpaque()) {
    g.fillRect(0,0,w,h);
  }
  final float R=JBUI.scale(8f);
  final float R2=JBUI.scale(9f);
  final float off=JBUI.scale(1f);
  g2.translate(0,(c.getHeight() - h) / 2);
  g2.setColor(progressBar.getForeground());
  g2.fill(new RoundRectangle2D.Float(0,0,w - off,h - off,R2,R2));
  g2.setColor(c.getParent().getBackground());
  g2.fill(new RoundRectangle2D.Float(off,off,w - 2f * off - off,h - 2f * off - off,R,R));
  g2.setColor(progressBar.getForeground());
  g2.fill(new RoundRectangle2D.Float(2f * off,2f * off,amountFull - JBUI.scale(5f),h - JBUI.scale(5f),JBUI.scale(7f),JBUI.scale(7f)));
  g2.translate(0,-(c.getHeight() - h) / 2);
  if (progressBar.isStringPainted()) {
    paintString(g,b.left,b.top,barRectWidth,barRectHeight,amountFull,b);
  }
  config.restore();
}
