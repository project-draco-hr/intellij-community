{
  if (file != null && file.isInLocalFileSystem()) {
    codeStyleSettingsManager.dropTemporarySettings();
    final CodeStyleSettings currentSettings=codeStyleSettingsManager.getCurrentSettings();
    final CodeStyleSettings newSettings=new CodeStyleSettings();
    newSettings.copyFrom(currentSettings);
    final String filePath=file.getCanonicalPath();
    final SettingsProviderComponent settingsProvider=SettingsProviderComponent.getInstance();
    final List<OutPair> outPairs=settingsProvider.getOutPairs(filePath);
    applyCodeStyleSettings(outPairs,newSettings,file);
    codeStyleSettingsManager.setTemporarySettings(newSettings);
    final EditorEx currentEditor=(EditorEx)FileEditorManager.getInstance(myProject).getSelectedTextEditor();
    if (currentEditor != null) {
      currentEditor.reinitSettings();
    }
  }
}
