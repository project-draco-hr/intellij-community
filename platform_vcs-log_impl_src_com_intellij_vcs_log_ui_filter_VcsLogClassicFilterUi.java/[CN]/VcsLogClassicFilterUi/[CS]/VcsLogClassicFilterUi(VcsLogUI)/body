{
  myUi=ui;
  myTextFilter=new SearchTextFieldWithStoredHistory("Vcs.Log.Text.Filter.History");
  myTextFilter.getTextEditor().addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      applyFilters();
      myTextFilter.addCurrentTextToHistory();
    }
  }
);
  myBranchFilterComponent=new BranchFilterPopupComponent(this,ui);
  myUserFilterComponent=new UserFilterPopupComponent(this,ui.getLogDataHolder(),ui.getUiProperties());
  myDateFilterComponent=new DateFilterPopupComponent(this);
  myStructureFilterComponent=new StructureFilterPopupComponent(this,ui.getLogDataHolder().getRoots());
  myActionGroup=new DefaultActionGroup();
  myActionGroup.add(new TextFilterComponent(myTextFilter));
  myActionGroup.add(new FilterActionComponent(myBranchFilterComponent));
  myActionGroup.add(new FilterActionComponent(myUserFilterComponent));
  myActionGroup.add(new FilterActionComponent(myDateFilterComponent));
  myActionGroup.add(new FilterActionComponent(myStructureFilterComponent));
}
