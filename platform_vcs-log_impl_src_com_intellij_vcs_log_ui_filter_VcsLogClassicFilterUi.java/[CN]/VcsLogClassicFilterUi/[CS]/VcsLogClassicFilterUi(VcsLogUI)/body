{
  myUi=ui;
  JLabel filterCaption=new JLabel("Filter:");
  filterCaption.setForeground(UIUtil.isUnderDarcula() ? UIUtil.getLabelForeground() : UIUtil.getInactiveTextColor());
  myTextFilter=new SearchTextFieldWithStoredHistory("Vcs.Log.Text.Filter.History");
  myTextFilter.getTextEditor().addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      applyFilters();
      myTextFilter.addCurrentTextToHistory();
    }
  }
);
  FilterPopupComponent branchFilter=new BranchFilterPopupComponent(this,ui);
  FilterPopupComponent userFilter=new UserFilterPopupComponent(this,ui.getLogDataHolder(),ui.getUiProperties());
  myFilterPopupComponents=ContainerUtil.newArrayList();
  myFilterPopupComponents.add(branchFilter);
  myFilterPopupComponents.add(userFilter);
  myRootPanel=new JPanel();
  myRootPanel.add(filterCaption);
  myRootPanel.add(myTextFilter);
  myRootPanel.add(branchFilter);
  myRootPanel.add(userFilter);
}
