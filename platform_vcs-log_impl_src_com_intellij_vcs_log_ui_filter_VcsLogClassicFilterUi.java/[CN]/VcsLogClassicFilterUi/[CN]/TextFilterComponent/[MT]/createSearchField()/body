{
  final SearchTextFieldWithStoredHistory textFilter=new SearchTextFieldWithStoredHistory("Vcs.Log.Text.Filter.History"){
    @Override protected void onFieldCleared(){
      myFilterModel.setFilter(null);
    }
  }
;
  textFilter.getTextEditor().addActionListener(new ActionListener(){
    @Override public void actionPerformed(    @NotNull ActionEvent e){
      myFilterModel.setFilter(new VcsLogTextFilterImpl(textFilter.getText()));
      textFilter.addCurrentTextToHistory();
    }
  }
);
  resetFilterOnTextClear(textFilter);
  return textFilter;
}
