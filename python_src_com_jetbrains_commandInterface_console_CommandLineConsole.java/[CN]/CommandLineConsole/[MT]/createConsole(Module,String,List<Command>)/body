{
  final Project project=module.getProject();
  final ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(project);
  ToolWindow window=toolWindowManager.getToolWindow(consoleName);
  if (window == null) {
    window=toolWindowManager.registerToolWindow(consoleName,true,ToolWindowAnchor.BOTTOM);
  }
  window.activate(null);
  final ContentManager contentManager=window.getContentManager();
  contentManager.removeAllContents(true);
  final LanguageConsoleImpl console=new LanguageConsoleImpl(project,"",CommandLineLanguage.INSTANCE);
  console.setPrompt(consoleName + " > ");
  console.setEditable(true);
  final CommandLineFile file=PyUtil.as(console.getFile(),CommandLineFile.class);
  if (file != null && commandList != null) {
    file.setCommands(commandList);
    LanguageConsoleBuilder.registerExecuteAction(console,new CommandExecutor(commandList,module),consoleName,consoleName,null);
  }
  final Content content=new ContentImpl(console.getComponent(),"",true);
  contentManager.addContent(content);
  showHiddenCommandWorkAround(console);
  ArgumentHintLayer.attach(console);
  return console;
}
