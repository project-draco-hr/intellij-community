{
  CharSequence hintText=myPlaceholderText;
  if (myDocument.getTextLength() > 0 || hintText == null || hintText.length() == 0) {
    return false;
  }
  if (KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner() == myEditorComponent && !myShowPlaceholderWhenFocused) {
    myLastBackgroundColor=getBackgroundColor();
    myLastBackgroundPosition=new Point(0,0);
    myLastBackgroundWidth=myLastPaintedPlaceholderWidth;
    flushBackground(g,clip);
    return false;
  }
 else {
    hintText=SwingUtilities.layoutCompoundLabel(g.getFontMetrics(),hintText.toString(),null,0,0,0,0,myEditorComponent.getBounds(),new Rectangle(),new Rectangle(),0);
    myLastPaintedPlaceholderWidth=drawString(g,hintText,0,hintText.length(),new Point(0,0),clip,null,null,Font.PLAIN,myFoldingModel.getPlaceholderAttributes().getForegroundColor(),PAINT_NO_WHITESPACE);
    flushCachedChars(g);
    return true;
  }
}
