{
  String baseIndent=getBaseIndent(currPosition);
  Document document=myEditor.getDocument();
  PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
  if (file != null) {
    CodeStyleSettings codeStyleSettings=CodeStyleSettingsManager.getSettings(myProject);
    CommonCodeStyleSettings.IndentOptions options=language != null && !(language.is(file.getLanguage()) || language.is(Language.ANY)) ? codeStyleSettings.getCommonSettings(language).getIndentOptions() : codeStyleSettings.getIndentOptionsByFile(file);
    return baseIndent + new IndentInfo(0,indentTypeToSize(myIndentType,options),0,false).generateNewWhiteSpace(options);
  }
  return null;
}
