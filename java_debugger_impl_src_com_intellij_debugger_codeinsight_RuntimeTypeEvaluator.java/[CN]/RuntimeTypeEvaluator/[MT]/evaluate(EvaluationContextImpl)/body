{
  Project project=evaluationContext.getProject();
  SourcePosition position=ContextUtil.getSourcePosition(evaluationContext);
  ExpressionEvaluator evaluator=DebuggerInvocationUtil.commitAndRunReadAction(project,new EvaluatingComputable<ExpressionEvaluator>(){
    public ExpressionEvaluator compute() throws EvaluateException {
      return EvaluatorBuilderImpl.getInstance().build(myElement,position);
    }
  }
);
  final Value value=evaluator.evaluate(evaluationContext);
  if (value != null) {
    return getCastableRuntimeType(project,value);
  }
  throw EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.surrounded.expression.null"));
}
