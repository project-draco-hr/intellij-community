{
  try {
    if (!(myUpToDateHash != -1 && myUpToDateHash == hash) && _needsSave(hash)) {
      doSave();
    }
  }
  finally {
    myUpToDateHash=hash;
  }
}
