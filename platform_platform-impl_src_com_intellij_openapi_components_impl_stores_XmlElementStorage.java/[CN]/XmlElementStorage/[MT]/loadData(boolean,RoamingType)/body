{
  Document document=loadDocument();
  StorageData result=createStorageData();
  if (document != null) {
    loadState(result,document.getRootElement());
  }
  if (useProvidersData && myStreamProvider != null && myStreamProvider.isEnabled()) {
    if (roamingType == null) {
      loadDataFromStreamProvider(result,RoamingType.PER_USER);
      loadDataFromStreamProvider(result,RoamingType.PER_PLATFORM);
    }
 else     if (roamingType != RoamingType.DISABLED) {
      loadDataFromStreamProvider(result,roamingType);
    }
  }
  return result;
}
