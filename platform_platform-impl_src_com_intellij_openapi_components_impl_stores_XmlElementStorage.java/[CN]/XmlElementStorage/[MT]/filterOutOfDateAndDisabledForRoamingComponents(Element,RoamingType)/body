{
  Iterator<Element> iterator=element.getContent(new ElementFilter(StorageData.COMPONENT)).iterator();
  while (iterator.hasNext()) {
    String name=iterator.next().getAttributeValue(StorageData.NAME);
    if (myComponentRoamingManager.getRoamingType(name) != roamingType) {
      iterator.remove();
    }
    if (myRemoteVersionProvider == null) {
      continue;
    }
    long remoteVersion=myRemoteVersionProvider.getVersion(name);
    if (remoteVersion <= myLocalVersionProvider.getVersion(name)) {
      iterator.remove();
    }
 else {
      myLocalVersionProvider.changeVersion(name,remoteVersion);
    }
  }
}
