{
  PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  while (element != null && !(element.getParent() instanceof XmlTag)) {
    element=element.getParent();
  }
  if (element == null) {
    return false;
  }
  if (element.getNode().getElementType() == XmlTokenType.XML_START_TAG_START) {
    return true;
  }
 else {
    PsiElement left=element.getPrevSibling();
    while (left != null && left.getNode().getElementType() != XmlTokenType.XML_TAG_END) {
      left=left.getPrevSibling();
    }
    if (left == null) {
      return false;
    }
    PsiElement right=element.getNextSibling();
    while (right != null && right.getNode().getElementType() != XmlTokenType.XML_END_TAG_START) {
      right=right.getNextSibling();
    }
    if (right == null) {
      return false;
    }
    return true;
  }
}
