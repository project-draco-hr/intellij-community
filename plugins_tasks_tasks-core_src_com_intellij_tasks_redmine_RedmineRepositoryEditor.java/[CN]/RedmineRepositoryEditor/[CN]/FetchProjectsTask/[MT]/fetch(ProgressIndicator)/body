{
  Stack<RedmineProject> parents=new Stack<RedmineProject>();
  List<RedmineProjectItem> items=new ArrayList<RedmineProjectItem>();
  for (  RedmineProject project : myRepository.fetchProjects()) {
    RedmineProject parentProject=project.getParent();
    if (parentProject == null) {
      items.add(new RedmineProjectItem(project,0));
      parents.clear();
    }
 else {
      while (!parents.isEmpty() && !parents.peek().equals(parentProject)) {
        parents.pop();
      }
      items.add(new RedmineProjectItem(project,parents.size()));
    }
    parents.push(project);
  }
  return items;
}
