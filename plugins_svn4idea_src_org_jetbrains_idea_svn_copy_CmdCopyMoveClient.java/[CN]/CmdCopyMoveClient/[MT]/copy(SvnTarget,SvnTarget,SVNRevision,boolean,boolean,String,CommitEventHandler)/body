{
  if (!destination.isURL()) {
    throw new IllegalArgumentException("Only urls are supported as destination " + destination);
  }
  List<String> parameters=new ArrayList<String>();
  CommandUtil.put(parameters,source);
  CommandUtil.put(parameters,destination);
  CommandUtil.put(parameters,revision);
  CommandUtil.put(parameters,makeParents,"--parents");
  parameters.add("--message");
  parameters.add(message);
  CmdCheckinClient.CommandListener listener=new CmdCheckinClient.CommandListener(handler);
  if (source.isFile()) {
    listener.setBaseDirectory(source.getFile());
  }
  execute(myVcs,source,getCommandName(isMove),parameters,listener);
  return listener.getCommittedRevision();
}
