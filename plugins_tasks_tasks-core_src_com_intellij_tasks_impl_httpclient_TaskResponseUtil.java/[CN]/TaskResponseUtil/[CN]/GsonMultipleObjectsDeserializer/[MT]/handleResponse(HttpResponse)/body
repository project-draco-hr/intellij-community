{
  int statusCode=response.getStatusLine().getStatusCode();
  if (!isSuccessful(statusCode)) {
    if (statusCode == HttpStatus.SC_NOT_FOUND && myIgnoreNotFound) {
      return Collections.emptyList();
    }
    throw RequestFailedException.forStatusCode(statusCode);
  }
  try {
    if (LOG.isDebugEnabled()) {
      String content=getResponseContentAsString(response);
      TaskUtil.prettyFormatJsonToLog(LOG,content);
      return myGson.fromJson(content,myTypeToken.getType());
    }
 else {
      return myGson.fromJson(getResponseContentAsReader(response),myTypeToken.getType());
    }
  }
 catch (  JsonSyntaxException e) {
    LOG.warn("Malformed server response",e);
    return Collections.emptyList();
  }
catch (  NumberFormatException e) {
    LOG.error("NFE in response: " + getResponseContentAsString(response),e);
    throw new RequestFailedException("Malformed response");
  }
}
