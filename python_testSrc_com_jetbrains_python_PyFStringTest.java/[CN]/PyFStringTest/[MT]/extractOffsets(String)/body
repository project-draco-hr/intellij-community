{
  final StringBuilder builder=new StringBuilder();
  int lastBarOffset=-1;
  final List<Integer> offsets=new ArrayList<>();
  while (true) {
    final int nextOffset=fstringLiteral.indexOf("|",lastBarOffset + 1);
    if (nextOffset < 0) {
      builder.append(fstringLiteral.substring(lastBarOffset + 1));
      break;
    }
    builder.append(fstringLiteral.substring(lastBarOffset + 1,nextOffset));
    lastBarOffset=nextOffset;
    offsets.add(lastBarOffset - offsets.size());
  }
  return Pair.create(builder.toString(),offsets);
}
