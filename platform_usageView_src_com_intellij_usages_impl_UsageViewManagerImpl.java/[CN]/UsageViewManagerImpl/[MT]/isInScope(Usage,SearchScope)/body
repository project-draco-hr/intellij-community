{
  VirtualFile file=usage instanceof UsageInFile ? ((UsageInFile)usage).getFile() : usage instanceof PsiElementUsage ? PsiUtilCore.getVirtualFile(((PsiElementUsage)usage).getElement()) : null;
  return file != null && (searchScope instanceof LocalSearchScope ? ((LocalSearchScope)searchScope).isInScope(file) : ((GlobalSearchScope)searchScope).contains(file));
}
