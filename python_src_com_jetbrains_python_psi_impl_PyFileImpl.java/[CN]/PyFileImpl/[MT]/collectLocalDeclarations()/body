{
  Map<String,PsiElement> localDeclarations=new HashMap<String,PsiElement>();
  List<PsiElement> nameDefiners=new ArrayList<PsiElement>();
  final List<PsiElement> children=PyPsiUtils.collectAllStubChildren(this,getStub());
  final List<PyExceptPart> exceptParts=new ArrayList<PyExceptPart>();
  for (  PsiElement child : children) {
    if (child instanceof PyExceptPart) {
      exceptParts.add((PyExceptPart)child);
    }
 else {
      addDeclaration(child,localDeclarations,nameDefiners);
    }
  }
  for (  PyExceptPart part : exceptParts) {
    final List<PsiElement> exceptChildren=PyPsiUtils.collectAllStubChildren(part,part.getStub());
    for (    PsiElement child : exceptChildren) {
      addDeclaration(child,localDeclarations,nameDefiners);
    }
  }
  myLocalDeclarations=localDeclarations;
  myNameDefiners=nameDefiners;
}
