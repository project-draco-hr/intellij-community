{
  final List<String> stack=myFindExportedNameStack.get();
  if (stack.contains(name)) {
    return null;
  }
  stack.add(name);
  try {
    if (myExportedNameCache == null) {
      myExportedNameCache=new ExportedNameCache();
    }
    PsiElement result=myExportedNameCache.resolve(name);
    if (result != null) {
      return result;
    }
    List<String> allNames=getDunderAll();
    if (allNames != null && allNames.contains(name)) {
      return findExportedName(PyNames.ALL);
    }
    return null;
  }
  finally {
    stack.remove(name);
  }
}
