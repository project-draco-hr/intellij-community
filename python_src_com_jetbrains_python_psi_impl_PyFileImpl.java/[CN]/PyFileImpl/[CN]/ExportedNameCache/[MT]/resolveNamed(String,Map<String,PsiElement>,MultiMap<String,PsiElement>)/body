{
  if (ambiguousDeclarations.containsKey(name)) {
    final List<PsiElement> localAmbiguous=new ArrayList<PsiElement>(myLocalAmbiguousDeclarations.get(name));
    for (int i=localAmbiguous.size() - 1; i >= 0; i--) {
      PsiElement ambiguous=localAmbiguous.get(i);
      final PsiElement result=resolveDeclaration(name,ambiguous);
      if (result != null) {
        return result;
      }
    }
  }
 else {
    final PsiElement result=declarations.get(name);
    if (result != null) {
      return resolveDeclaration(name,result);
    }
  }
  return null;
}
