{
  SelectionModel selectionModel=editor.getSelectionModel();
  if (selectionModel.hasSelection()) {
    return Result.CONTINUE;
  }
  Document document=editor.getDocument();
  int caretOffset=editor.getCaretModel().getOffset();
  int caretLine=document.getLineNumber(caretOffset);
  if (caretLine == 0 || isLineContainsWhiteSpacesOnlyEmpty(document,caretLine)) {
    return Result.CONTINUE;
  }
  ChangeIndentContext context=new ChangeIndentContext(project,file,editor,document,caretLine);
  if (defineSoleIndentIfPossible(context)) {
    return Result.STOP;
  }
switch (tryToIndentToRight(context)) {
case STOP_SUCCESSFUL:
    return Result.STOP;
case STOP_UNSUCCESSFUL:
  return Result.CONTINUE;
case CONTINUE:
break;
}
if (tryToIndentToLeft(context)) {
return Result.STOP;
}
return Result.CONTINUE;
}
