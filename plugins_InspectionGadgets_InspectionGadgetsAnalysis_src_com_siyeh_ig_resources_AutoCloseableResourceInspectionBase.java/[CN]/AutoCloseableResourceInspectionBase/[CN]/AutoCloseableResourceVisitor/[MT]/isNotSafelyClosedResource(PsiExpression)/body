{
  if (!TypeUtils.expressionHasTypeOrSubtype(expression,"java.lang.AutoCloseable")) {
    return false;
  }
  if (TypeUtils.expressionHasTypeOrSubtype(expression,ignoredTypes)) {
    return false;
  }
  final PsiVariable variable=ResourceInspection.getVariable(expression);
  return !(variable instanceof PsiResourceVariable) && !ResourceInspection.isResourceEscapingFromMethod(variable,expression);
}
