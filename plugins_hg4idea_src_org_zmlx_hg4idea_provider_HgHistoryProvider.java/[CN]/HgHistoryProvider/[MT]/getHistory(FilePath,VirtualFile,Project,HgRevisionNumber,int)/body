{
  final HgLogCommand logCommand=new HgLogCommand(project);
  logCommand.setFollowCopies(!filePath.isDirectory());
  logCommand.setIncludeRemoved(true);
  List<String> args=new ArrayList<String>();
  String revNumberAsArg=revisionNumber == null ? "." : revisionNumber.getChangeset();
  args.add("--rev");
  args.add("reverse(0::" + revNumberAsArg + ")");
  try {
    return logCommand.execute(new HgFile(vcsRoot,filePath),limit,false,args);
  }
 catch (  HgCommandException e) {
    new HgCommandResultNotifier(project).notifyError(null,HgVcsMessages.message("hg4idea.error.log.command.execution"),e.getMessage());
    return Collections.emptyList();
  }
}
