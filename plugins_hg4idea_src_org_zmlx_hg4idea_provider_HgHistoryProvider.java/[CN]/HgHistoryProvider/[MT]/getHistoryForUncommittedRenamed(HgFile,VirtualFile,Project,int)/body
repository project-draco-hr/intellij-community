{
  final HgLogCommand logCommand=new HgLogCommand(project);
  logCommand.setIncludeRemoved(true);
  final HgVersion version=logCommand.getVersion();
  String[] templates=HgBaseLogParser.constructFullTemplateArgument(false,version);
  String template=HgChangesetUtil.makeTemplate(templates);
  List<String> argsForCmd=ContainerUtil.newArrayList();
  String relativePath=originalHgFile.getRelativePath();
  argsForCmd.add("--rev");
  argsForCmd.add("reverse(follow(" + relativePath + "))");
  HgCommandResult result=logCommand.execute(vcsRoot,template,limit,relativePath != null ? null : originalHgFile,argsForCmd);
  return HgHistoryUtil.getCommitRecords(project,result,new HgFileRevisionLogParser(project,originalHgFile,version));
}
