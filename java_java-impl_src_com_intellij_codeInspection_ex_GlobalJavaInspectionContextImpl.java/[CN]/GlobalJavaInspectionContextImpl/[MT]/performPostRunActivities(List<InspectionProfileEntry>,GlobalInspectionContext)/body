{
  JobDescriptor progress=context.getStdJobDescriptors().FIND_EXTERNAL_USAGES;
  progress.setTotalAmount(getRequestCount());
  do {
    processSearchRequests(context);
    InspectionToolWrapper[] requestors=needRepeatSearchRequest.toArray(new InspectionToolWrapper[needRepeatSearchRequest.size()]);
    for (    InspectionToolWrapper wrapper : requestors) {
      InspectionProfileEntry requestor=wrapper.getTool();
      if (requestor instanceof InspectionTool && !((InspectionTool)requestor).queryExternalUsagesRequests(InspectionManager.getInstance(context.getProject()))) {
        needRepeatSearchRequest.remove(wrapper);
      }
    }
    int oldSearchRequestCount=progress.getTotalAmount();
    int oldDoneAmount=progress.getDoneAmount();
    int totalAmount=oldSearchRequestCount + getRequestCount();
    progress.setTotalAmount(totalAmount);
    progress.setDoneAmount(oldDoneAmount);
  }
 while (!needRepeatSearchRequest.isEmpty());
}
