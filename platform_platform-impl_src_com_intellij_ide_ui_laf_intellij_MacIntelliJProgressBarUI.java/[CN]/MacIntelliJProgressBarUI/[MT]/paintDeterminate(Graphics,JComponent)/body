{
  Insets insets=progressBar.getInsets();
  int w=c.getWidth();
  int h=c.getHeight();
  int y=(h - HEIGHT) / 2;
  int x=insets.left;
  Icon icon;
  icon=MacIntelliJIconCache.getIcon("progressLeft");
  icon.paintIcon(c,g,x,y);
  x+=icon.getIconWidth();
  int stop=w - (MacIntelliJIconCache.getIcon("progressRight").getIconWidth());
  Graphics gg=g.create(0,0,w,h);
  gg.setClip(x,y,stop - x,h);
  icon=MacIntelliJIconCache.getIcon("progressMiddle");
  while (x < stop) {
    icon.paintIcon(c,gg,x,y);
    x+=icon.getIconWidth();
  }
  gg.dispose();
  icon=MacIntelliJIconCache.getIcon("progressRight");
  icon.paintIcon(c,g,stop,y);
  int barRectWidth=w - (insets.right + insets.left);
  int barRectHeight=h - (insets.top + insets.bottom);
  int amountFull=getAmountFull(insets,barRectWidth,barRectHeight);
  boolean done=amountFull == barRectWidth;
  Icon left=MacIntelliJIconCache.getIcon("progressLeft",true,false);
  Icon middle=MacIntelliJIconCache.getIcon("progressMiddle",true,false);
  Icon right=MacIntelliJIconCache.getIcon("progressRight",true,false);
  gg=g.create(0,0,barRectWidth + insets.left - right.getIconWidth(),h);
  gg.setClip(insets.left,y,amountFull - right.getIconWidth(),HEIGHT);
  int cur=left.getIconWidth() + insets.left;
  if (cur <= amountFull) {
    left.paintIcon(c,gg,insets.left,y);
  }
  while (cur < amountFull) {
    middle.paintIcon(c,gg,cur,y);
    cur+=middle.getIconWidth();
  }
  gg.dispose();
  if (done) {
    right.paintIcon(c,g,insets.left + barRectWidth - right.getIconWidth(),y);
  }
}
