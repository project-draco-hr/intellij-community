{
  Insets insets=progressBar.getInsets();
  int w=c.getWidth();
  int h=c.getHeight();
  int y=(h - HEIGHT) / 2 + insets.top;
  int x=insets.left;
  Icon icon;
  icon=MacIntelliJIconCache.getIcon("progressLeft",true,false);
  icon.paintIcon(c,g,x,y);
  x+=icon.getIconWidth();
  int stop=w - MacIntelliJIconCache.getIcon("progressRight",true,false).getIconWidth() - insets.right;
  Graphics gg=g.create(0,0,w,h);
  gg.setClip(x,y,stop - x,h);
  icon=MacIntelliJIconCache.getIcon("progressMiddle",true,false);
  while (x < stop) {
    icon.paintIcon(c,gg,x,y);
    x+=icon.getIconWidth();
  }
  gg.dispose();
  icon=MacIntelliJIconCache.getIcon("progressRight",true,false);
  icon.paintIcon(c,g,stop,y);
  Icon shadow=MacIntelliJIconCache.getIcon("progressShadow");
  int boxWidth=w - insets.left - insets.right;
  if (boxWidth <= 0)   return;
  gg=g.create(0,0,w,h);
  gg.setClip(new RoundRectangle2D.Double(insets.left,y,boxWidth,HEIGHT,HEIGHT,HEIGHT));
  shadow.paintIcon(c,gg,position,y);
  int xx=boxWidth - (position + shadow.getIconWidth());
  if (xx < 0) {
    shadow.paintIcon(c,gg,-xx - shadow.getIconWidth(),y);
  }
  position++;
  position=position % boxWidth;
  gg.dispose();
}
