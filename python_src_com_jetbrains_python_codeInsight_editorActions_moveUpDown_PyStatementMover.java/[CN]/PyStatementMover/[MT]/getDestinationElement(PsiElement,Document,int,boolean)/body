{
  PsiElement destination=elementToMove.getContainingFile().findElementAt(lineEndOffset);
  if (destination == null)   return null;
  PsiElement sibling=down ? PsiTreeUtil.getNextSiblingOfType(elementToMove,PyStatement.class) : PsiTreeUtil.getPrevSiblingOfType(elementToMove,PyStatement.class);
  if (elementToMove instanceof PyClass) {
    destination=sibling;
  }
 else   if (elementToMove instanceof PyFunction) {
    if (!(sibling instanceof PyClass))     destination=sibling;
 else     destination=null;
  }
 else {
    destination=getCommentOrStatement(document,destination);
  }
  return destination;
}
