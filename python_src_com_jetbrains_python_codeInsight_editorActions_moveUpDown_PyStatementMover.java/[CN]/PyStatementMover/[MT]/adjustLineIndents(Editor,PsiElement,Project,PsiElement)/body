{
  final CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
  final Document document=editor.getDocument();
  if (!(scope instanceof PsiFile)) {
    int line1=editor.offsetToLogicalPosition(scope.getTextRange().getStartOffset()).line;
    int line2=editor.offsetToLogicalPosition(scope.getTextRange().getEndOffset()).line;
    codeStyleManager.adjustLineIndent(scope.getContainingFile(),new TextRange(document.getLineStartOffset(line1),document.getLineStartOffset(line2)));
  }
 else {
    int line1=editor.offsetToLogicalPosition(addedElement.getTextRange().getStartOffset()).line;
    int line2=editor.offsetToLogicalPosition(addedElement.getTextRange().getEndOffset()).line;
    codeStyleManager.adjustLineIndent(scope.getContainingFile(),new TextRange(document.getLineStartOffset(line1),document.getLineStartOffset(line2)));
  }
}
