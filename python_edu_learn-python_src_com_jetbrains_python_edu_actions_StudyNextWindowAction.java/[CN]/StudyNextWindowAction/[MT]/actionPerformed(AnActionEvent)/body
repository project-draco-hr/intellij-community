{
  Project project=e.getProject();
  if (project != null) {
    Editor selectedEditor=StudyEditor.getSelectedEditor(project);
    if (selectedEditor != null) {
      FileDocumentManager fileDocumentManager=FileDocumentManager.getInstance();
      VirtualFile openedFile=fileDocumentManager.getFile(selectedEditor.getDocument());
      if (openedFile != null) {
        StudyTaskManager taskManager=StudyTaskManager.getInstance(project);
        TaskFile selectedTaskFile=taskManager.getTaskFile(openedFile);
        if (selectedTaskFile != null) {
          TaskWindow selectedTaskWindow=selectedTaskFile.getSelectedTaskWindow();
          boolean ifDraw=false;
          for (          TaskWindow taskWindow : selectedTaskFile.getTaskWindows()) {
            if (ifDraw) {
              selectedTaskFile.setSelectedTaskWindow(taskWindow);
              taskWindow.draw(selectedEditor,taskWindow.getStatus() != StudyStatus.Solved,true);
              return;
            }
            if (taskWindow == selectedTaskWindow) {
              ifDraw=true;
            }
          }
        }
      }
    }
  }
}
