{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    public void run(){
      ProgressIndicator indicator=myCurrentUpdates.remove(file);
      if (indicator != null) {
        indicator.cancel();
      }
      indicator=new ProgressIndicatorBase();
      myCurrentUpdates.put(file,indicator);
      ReadTask task=createTask(indicator,file);
      if (ApplicationManager.getApplication().isUnitTestMode()) {
        task.computeInReadAction(indicator);
      }
 else {
        ProgressIndicatorUtils.scheduleWithWriteActionPriority(indicator,task);
      }
    }
  }
);
}
