{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      ProgressIndicator indicator=getCurrentProgress(file);
      if (indicator != null) {
        indicator.cancel();
      }
      file.putUserData(CURRENT_UPDATES,null);
      if (myProject.isDisposed() || !file.isValid()) {
        return;
      }
      indicator=new ProgressIndicatorBase();
      final ReadTask task=createTask(indicator,file);
      if (task == null)       return;
      file.putUserData(CURRENT_UPDATES,new WeakReference<ProgressIndicator>(indicator));
      if (ApplicationManager.getApplication().isUnitTestMode()) {
        task.computeInReadAction(indicator);
      }
 else {
        final ProgressIndicator indicator1=indicator;
        myExecutor.execute(new Runnable(){
          @Override public void run(){
            ProgressIndicatorUtils.runWithWriteActionPriority(indicator1,task);
          }
        }
);
      }
    }
  }
);
}
