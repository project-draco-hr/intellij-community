{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    public void run(){
      ProgressIndicator indicator=myCurrentUpdates.remove(file);
      if (indicator != null) {
        indicator.cancel();
      }
      indicator=new ProgressIndicatorBase();
      myCurrentUpdates.put(file,indicator);
      final ReadTask task=createTask(indicator,file);
      if (ApplicationManager.getApplication().isUnitTestMode()) {
        task.computeInReadAction(indicator);
      }
 else {
        final ProgressIndicator indicator1=indicator;
        myExecutor.execute(new Runnable(){
          @Override public void run(){
            ProgressIndicatorUtils.runWithWriteActionPriority(indicator1,task);
          }
        }
);
      }
    }
  }
);
}
