{
  final boolean[] dialogShown=new boolean[1];
  TestDialog oldTestDialog=Messages.setTestDialog(new TestDialog(){
    @Override public int show(    String message){
      dialogShown[0]=message.contains("Successfully connected to") && message.contains("Do you want to proceed anyway?");
      return 1;
    }
  }
);
  try {
    registerDefaultShareDialogHandler();
    registerDefaultUntrackedFilesDialogHandler();
    createProjectFiles();
    GithubShareAction.shareProjectOnGithub(myProject,myProjectRoot);
    assertFalse(dialogShown[0]);
    GithubShareAction.shareProjectOnGithub(myProject,myProjectRoot);
    assertTrue(dialogShown[0]);
  }
  finally {
    Messages.setTestDialog(oldTestDialog);
  }
}
