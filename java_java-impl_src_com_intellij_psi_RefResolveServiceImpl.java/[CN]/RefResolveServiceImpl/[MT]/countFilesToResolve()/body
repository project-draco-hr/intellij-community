{
  Set<VirtualFile> set;
synchronized (filesToResolve) {
    int queuedSize=filesToResolve.size();
    set=new THashSet<VirtualFile>(queuedSize);
    for (    VirtualFile file : filesToResolve) {
      if (fileIsInQueue.clear(getAbsId(file))) {
        set.add(file);
      }
    }
    filesToResolve.clear();
  }
  return countAndMarkUnresolved(set,false);
}
