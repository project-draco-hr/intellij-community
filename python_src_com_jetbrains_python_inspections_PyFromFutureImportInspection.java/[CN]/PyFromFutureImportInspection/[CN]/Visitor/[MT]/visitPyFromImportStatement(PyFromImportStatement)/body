{
  PyReferenceExpression importSource=node.getImportSource();
  if (importSource != null && PyNames.FUTURE_MODULE.equals(importSource.getName())) {
    PsiFile file=importSource.getContainingFile();
    if (file instanceof PyFile) {
      final List<PyStatement> statementList=((PyFile)file).getStatements();
      for (      PyStatement statement : statementList) {
        if (statement instanceof PyFromImportStatement) {
          if (statement == node) {
            return;
          }
          PyReferenceExpression source=((PyFromImportStatement)statement).getImportSource();
          if (source != null && PyNames.FUTURE_MODULE.equals(source.getName())) {
            continue;
          }
        }
        registerProblem(node,"from __future__ imports must occur at the beginning of the file",new MoveFromFutureImportQuickFix());
        return;
      }
    }
  }
}
