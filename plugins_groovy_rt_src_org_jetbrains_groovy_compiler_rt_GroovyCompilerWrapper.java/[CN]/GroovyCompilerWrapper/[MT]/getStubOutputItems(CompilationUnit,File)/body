{
  final List<OutputItem> compiledFiles=new ArrayList<OutputItem>();
  compilationUnit.applyToPrimaryClassNodes(new CompilationUnit.PrimaryClassNodeOperation(){
    public void call(    SourceUnit source,    GeneratorContext context,    ClassNode classNode) throws CompilationFailedException {
      final String topLevel=classNode.getName();
      String fileName=source.getName();
      if (fileName.startsWith("file:")) {
        try {
          fileName=new URL(fileName).getFile();
        }
 catch (        MalformedURLException ignored) {
        }
      }
      OutputItem item=new OutputItem(stubDirectory,topLevel.replace('.','/') + ".java",fileName);
      if (new File(item.getOutputPath()).exists()) {
        compiledFiles.add(item);
      }
    }
  }
);
  return compiledFiles;
}
