{
  runCommand(new Runnable(){
    @Override public void run(){
      Pair<RequestFuture<PreloadedProcessMessageHandler>,OSProcessHandler> pair=takePreloadedProcess(projectPath);
      if (pair != null) {
        final RequestFuture<PreloadedProcessMessageHandler> future=pair.first;
        final OSProcessHandler processHandler=pair.second;
        myMessageDispatcher.cancelSession(future.getRequestID());
        getProjectData(projectPath).taskQueue.submit(new Runnable(){
          @Override public void run(){
            Throwable error=null;
            try {
              while (!processHandler.waitFor()) {
                LOG.info("processHandler.waitFor() returned false for session " + future.getRequestID() + ", continue waiting");
              }
            }
 catch (            Throwable e) {
              error=e;
            }
 finally {
              notifySessionTerminationIfNeeded(future.getRequestID(),error);
            }
          }
        }
);
      }
    }
  }
);
}
