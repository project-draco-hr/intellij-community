{
  final Project project=context.getProject();
  Module module=context.getModule();
  if (module == null) {
    final Collection<IdeaPlugin> plugins=IdeaPluginConverter.getAllPlugins(project);
    return processPlugins(plugins,processor);
  }
  return ModuleUtilCore.visitMeAndDependentModules(module,new ModuleUtilCore.ModuleVisitor(){
    @Override public boolean visit(    @NotNull Module module){
      final Collection<IdeaPlugin> dependenciesAndLibs=IdeaPluginConverter.getPlugins(project,module.getModuleRuntimeScope(false));
      return processPlugins(dependenciesAndLibs,processor);
    }
  }
);
}
