{
  @NonNls String text="public class Test {\n" + "    public void test() {\n" + "        int i = 1;\n"+ "        int j = 1;\n"+ "    }\n"+ "}";
  init(text,TestFileType.TEXT);
  addBookmark(2);
  addBookmark(3);
  List<Bookmark> bookmarksBefore=getManager().getValidBookmarks();
  assertEquals(2,bookmarksBefore.size());
  myEditor.getCaretModel().setCaretsAndSelections(Collections.singletonList(new CaretState(myEditor.visualToLogicalPosition(new VisualPosition(2,myEditor.getDocument().getLineEndOffset(2) + 1)),null,null)));
  delete();
  List<Bookmark> bookmarksAfter=getManager().getValidBookmarks();
  assertEquals(1,bookmarksAfter.size());
  for (  Bookmark bookmark : bookmarksAfter) {
    checkBookmarkNavigation(bookmark);
  }
  init(text,TestFileType.TEXT);
  myEditor.getCaretModel().setCaretsAndSelections(Collections.singletonList(new CaretState(myEditor.visualToLogicalPosition(new VisualPosition(2,myEditor.getDocument().getLineEndOffset(2))),null,null)));
  delete();
}
