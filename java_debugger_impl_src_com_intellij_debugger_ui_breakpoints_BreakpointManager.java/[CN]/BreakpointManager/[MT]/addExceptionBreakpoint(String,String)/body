{
  ApplicationManager.getApplication().assertIsDispatchThread();
  final JavaExceptionBreakpointType type=(JavaExceptionBreakpointType)XDebuggerUtil.getInstance().findBreakpointType(JavaExceptionBreakpointType.class);
  return ApplicationManager.getApplication().runWriteAction(new Computable<ExceptionBreakpoint>(){
    @Override public ExceptionBreakpoint compute(){
      XBreakpoint<JavaExceptionBreakpointProperties> xBreakpoint=XDebuggerManager.getInstance(myProject).getBreakpointManager().addBreakpoint(type,new JavaExceptionBreakpointProperties(exceptionClassName,packageName));
      ExceptionBreakpoint breakpoint=new ExceptionBreakpoint(myProject,exceptionClassName,packageName,xBreakpoint);
      addBreakpoint(breakpoint);
      if (LOG.isDebugEnabled()) {
        LOG.debug("ExceptionBreakpoint Added");
      }
      return breakpoint;
    }
  }
);
}
