{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (!LineBreakpoint.canAddLineBreakpoint(myProject,document,lineIndex)) {
    return null;
  }
  XLineBreakpoint xLineBreakpoint=addXLineBreakpoint(JavaLineBreakpointType.class,document,lineIndex);
  LineBreakpoint breakpoint=LineBreakpoint.create(myProject,xLineBreakpoint);
  if (breakpoint == null) {
    return null;
  }
  addBreakpoint(breakpoint);
  return breakpoint;
}
