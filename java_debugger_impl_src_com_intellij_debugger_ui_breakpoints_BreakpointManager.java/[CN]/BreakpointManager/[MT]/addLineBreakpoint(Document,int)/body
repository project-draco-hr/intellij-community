{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (!LineBreakpoint.canAddLineBreakpoint(myProject,document,lineIndex)) {
    return null;
  }
  XLineBreakpoint xLineBreakpoint=addXLineBreakpoint(JavaLineBreakpointType.class,document,lineIndex);
  Breakpoint breakpoint=getJavaBreakpoint(xLineBreakpoint);
  if (breakpoint instanceof LineBreakpoint) {
    addBreakpoint(breakpoint);
    return ((LineBreakpoint)breakpoint);
  }
  return null;
}
