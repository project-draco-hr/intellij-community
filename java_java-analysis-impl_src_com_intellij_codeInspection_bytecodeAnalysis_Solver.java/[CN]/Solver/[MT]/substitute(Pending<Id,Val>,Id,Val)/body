{
  if (value.equals(lattice.bot)) {
    HashSet<Component<Id>> delta=new HashSet<Component<Id>>();
    for (    Component<Id> component : pending.delta) {
      if (!component.ids.contains(id)) {
        delta.add(component);
      }
    }
    if (delta.isEmpty()) {
      return new Final<Id,Val>(pending.infinum);
    }
 else {
      return new Pending<Id,Val>(pending.infinum,delta);
    }
  }
 else   if (value.equals(lattice.top)) {
    HashSet<Component<Id>> delta=new HashSet<Component<Id>>();
    for (    Component<Id> component : pending.delta) {
      Component<Id> component1=component.remove(id);
      if (!component1.isEmptyAndTouched()) {
        if (component1.isEmpty()) {
          return new Final<Id,Val>(lattice.top);
        }
 else {
          delta.add(component1);
        }
      }
    }
    if (delta.isEmpty()) {
      return new Final<Id,Val>(pending.infinum);
    }
 else {
      return new Pending<Id,Val>(pending.infinum,delta);
    }
  }
 else {
    Val infinum=lattice.join(pending.infinum,value);
    if (infinum == lattice.top) {
      return new Final<Id,Val>(lattice.top);
    }
    HashSet<Component<Id>> delta=new HashSet<Component<Id>>();
    for (    Component<Id> component : pending.delta) {
      Component<Id> component1=component.removeAndTouch(id);
      if (!component1.isEmpty()) {
        delta.add(component1);
      }
    }
    if (delta.isEmpty()) {
      return new Final<Id,Val>(infinum);
    }
 else {
      return new Pending<Id,Val>(infinum,delta);
    }
  }
}
