{
  String[] extDirs=System.getProperty("java.ext.dirs","").split(File.pathSeparator);
  if (ext && extDirs.length == 0)   return;
  List<URLClassLoader> loaders=new ArrayList<URLClassLoader>(2);
  for (ClassLoader loader=BootstrapClassLoaderUtil.class.getClassLoader(); loader != null; loader=loader.getParent()) {
    if (loader instanceof URLClassLoader) {
      loaders.add(0,(URLClassLoader)loader);
    }
 else {
      getLogger().warn("Unknown class loader: " + loader.getClass().getName());
    }
  }
  for (  URLClassLoader loader : loaders) {
    URL[] urls=loader.getURLs();
    for (    URL url : urls) {
      String path=urlToPath(url);
      boolean isExt=false;
      for (      String extDir : extDirs) {
        if (path.startsWith(extDir)) {
          isExt=true;
          break;
        }
      }
      if (isExt == ext) {
        classpath.add(url);
      }
    }
  }
}
