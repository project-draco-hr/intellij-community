{
  textFieldWithHistory.addPopupMenuListener(new PopupMenuListener(){
    @Override public void popupMenuWillBecomeVisible(    PopupMenuEvent e){
      setHistory(textFieldWithHistory,historyProvider.produce(),true);
      textFieldWithHistory.removePopupMenuListener(this);
    }
    @Override public void popupMenuWillBecomeInvisible(    PopupMenuEvent e){
    }
    @Override public void popupMenuCanceled(    PopupMenuEvent e){
    }
  }
);
}
