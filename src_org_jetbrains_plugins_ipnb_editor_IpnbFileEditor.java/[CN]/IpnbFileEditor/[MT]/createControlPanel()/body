{
  final JPanel controlPanel=new JPanel();
  controlPanel.setBackground(IpnbEditorUtil.getBackground());
  final JButton saveButton=new JButton();
  saveButton.setBackground(IpnbEditorUtil.getBackground());
  saveButton.setPreferredSize(new Dimension(30,30));
  saveButton.setIcon(AllIcons.Actions.Menu_saveall);
  saveButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final IpnbSaveAction action=(IpnbSaveAction)ActionManager.getInstance().getAction("IpnbSaveAction");
      action.saveAndCheckpoint(myIpnbFilePanel.getIpnbFile());
    }
  }
);
  controlPanel.add(saveButton);
  myRunCellButton=new JButton();
  myRunCellButton.setBackground(IpnbEditorUtil.getBackground());
  myRunCellButton.setPreferredSize(new Dimension(30,30));
  myRunCellButton.setIcon(AllIcons.General.Run);
  myRunCellButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final IpnbRunCellAction action=(IpnbRunCellAction)ActionManager.getInstance().getAction("IpnbRunCellAction");
      action.runCell(myIpnbFilePanel);
    }
  }
);
  controlPanel.add(myRunCellButton);
  myCellTypeCombo=new ComboBox(ourCellTypes);
  myCellTypeCombo.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final Object selectedItem=myCellTypeCombo.getSelectedItem();
      final IpnbPanel selectedCell=myIpnbFilePanel.getSelectedCell();
      if (selectedCell != null && selectedItem instanceof String) {
        updateCellType((String)selectedItem,selectedCell);
      }
    }
  }
);
  final IpnbPanel selectedCell=myIpnbFilePanel.getSelectedCell();
  updateCellTypeCombo(selectedCell);
  controlPanel.add(myCellTypeCombo);
  final MatteBorder border=BorderFactory.createMatteBorder(0,0,1,0,JBColor.GRAY);
  controlPanel.setBorder(border);
  return controlPanel;
}
