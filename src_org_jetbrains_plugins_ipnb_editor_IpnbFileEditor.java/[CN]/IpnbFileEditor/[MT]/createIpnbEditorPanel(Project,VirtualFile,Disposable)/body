{
  try {
    return new IpnbFilePanel(project,parent,IpnbParser.parseIpnbFile(new String(vFile.contentsToByteArray(),CharsetToolkit.UTF8)),new CellSelectionListener(){
      @Override public void selectionChanged(      @NotNull IpnbPanel ipnbPanel){
        if (myCellTypeCombo == null)         return;
        updateCellTypeCombo(ipnbPanel);
      }
    }
);
  }
 catch (  IOException e) {
    Messages.showErrorDialog(project,e.getMessage(),"Can't open " + vFile.getPath());
    throw new IllegalStateException(e);
  }
}
