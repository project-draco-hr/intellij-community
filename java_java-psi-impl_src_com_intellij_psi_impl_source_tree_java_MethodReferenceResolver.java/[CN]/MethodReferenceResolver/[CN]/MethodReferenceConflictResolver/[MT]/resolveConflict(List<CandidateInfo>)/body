{
  if (mySignature == null)   return null;
  checkSameSignatures(conflicts);
  checkAccessStaticLevels(conflicts,true);
  final PsiType[] parameterTypes=mySignature.getParameterTypes();
  boolean hasReceiver=PsiMethodReferenceUtil.hasReceiver(parameterTypes,myQualifierResolveResult,myReferenceExpression);
  final List<CandidateInfo> firstCandidates=new ArrayList<CandidateInfo>();
  final List<CandidateInfo> secondCandidates=new ArrayList<CandidateInfo>();
  for (  CandidateInfo conflict : conflicts) {
    if (!(conflict instanceof MethodCandidateInfo))     continue;
    final PsiMethod psiMethod=((MethodCandidateInfo)conflict).getElement();
    final PsiSubstitutor substitutor=conflict.getSubstitutor();
    final PsiType[] signatureParameterTypes2=psiMethod.getSignature(substitutor).getParameterTypes();
    final boolean varargs=((MethodCandidateInfo)conflict).isVarargs();
    if (varargs && (!psiMethod.isVarArgs() || myFunctionalMethodVarArgs))     continue;
    if ((varargs || parameterTypes.length == signatureParameterTypes2.length) && PsiMethodReferenceUtil.isCorrectAssignment(signatureParameterTypes2,parameterTypes,substitutor,varargs,0)) {
      firstCandidates.add(conflict);
    }
    if (hasReceiver && (varargs || parameterTypes.length == signatureParameterTypes2.length + 1) && PsiMethodReferenceUtil.isCorrectAssignment(signatureParameterTypes2,parameterTypes,substitutor,varargs,1)) {
      secondCandidates.add(conflict);
    }
  }
  if (myQualifierResolveResult.isReferenceTypeQualified() && myReferenceExpression.getReferenceNameElement() instanceof PsiIdentifier) {
    CandidateInfo candidateInfo=filterStaticCorrectCandidates(firstCandidates,secondCandidates,true);
    if (candidateInfo != null) {
      return candidateInfo;
    }
    candidateInfo=filterStaticCorrectCandidates(secondCandidates,firstCandidates,false);
    if (candidateInfo != null) {
      return candidateInfo;
    }
  }
  if (resolveConflicts(firstCandidates,secondCandidates,MethodCandidateInfo.ApplicabilityLevel.FIXED_ARITY)) {
    return !firstCandidates.isEmpty() ? firstCandidates.get(0) : secondCandidates.get(0);
  }
  if (resolveConflicts(firstCandidates,secondCandidates,MethodCandidateInfo.ApplicabilityLevel.VARARGS)) {
    return !firstCandidates.isEmpty() ? firstCandidates.get(0) : secondCandidates.get(0);
  }
  conflicts.clear();
  firstCandidates.addAll(secondCandidates);
  conflicts.addAll(firstCandidates);
  return null;
}
