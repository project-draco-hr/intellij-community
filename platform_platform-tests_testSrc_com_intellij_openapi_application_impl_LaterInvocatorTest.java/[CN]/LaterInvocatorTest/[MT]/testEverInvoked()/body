{
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      LaterInvocator.enterModal(myWindow1);
      ApplicationManager.getApplication().invokeLater(ENTER_MODAL,ModalityState.NON_MODAL);
      ApplicationManager.getApplication().invokeLater(new MyRunnable("1"),ModalityState.NON_MODAL);
      LaterInvocator.leaveModal(myWindow1);
      flushSwingQueue();
      flushSwingQueue();
      checkOrder(0);
      SwingUtilities.invokeLater(LEAVE_MODAL);
      flushSwingQueue();
      flushSwingQueue();
      checkOrder(1);
    }
  }
);
}
