{
  for (int i=0; i < 100; i++) {
    final AtomicBoolean finished=new AtomicBoolean();
    final AtomicBoolean started=new AtomicBoolean();
    Job<Void> job=JobLauncher.getInstance().submitToJobThread(new Runnable(){
      @Override public void run(){
        started.set(true);
        TimeoutUtil.sleep(100);
        finished.set(true);
      }
    }
,null);
    assertFalse(job.isDone());
    while (!started.get())     ;
    job.cancel();
    job.waitForCompletion(100000);
    assertTrue(finished.get());
  }
}
