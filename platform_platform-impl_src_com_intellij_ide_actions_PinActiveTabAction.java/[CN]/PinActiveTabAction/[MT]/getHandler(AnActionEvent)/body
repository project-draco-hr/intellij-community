{
  Project project=e.getProject();
  EditorWindow currentWindow=e.getData(EditorWindow.DATA_KEY);
  Content content=currentWindow != null ? null : getContentFromEvent(e);
  if (content != null && content.isPinnable()) {
    return new Handler(content.isPinned(),content.getManager().getSelectedContent() == content){
      @Override void setPinned(      boolean value){
        content.setPinned(value);
      }
    }
;
  }
  final EditorWindow window=currentWindow != null ? currentWindow : project != null ? FileEditorManagerEx.getInstanceEx(project).getCurrentWindow() : null;
  VirtualFile selectedFile=window == null ? null : getFileFromEvent(e,window);
  if (selectedFile != null) {
    return new Handler(window.isFilePinned(selectedFile),selectedFile.equals(e.getData(CommonDataKeys.VIRTUAL_FILE))){
      @Override void setPinned(      boolean value){
        window.setFilePinned(selectedFile,value);
      }
    }
;
  }
  return null;
}
