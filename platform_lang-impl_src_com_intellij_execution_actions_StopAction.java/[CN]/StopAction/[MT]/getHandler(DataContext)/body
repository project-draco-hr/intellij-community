{
  final RunContentDescriptor contentDescriptor=LangDataKeys.RUN_CONTENT_DESCRIPTOR.getData(dataContext);
  if (contentDescriptor != null) {
    return contentDescriptor.getProcessHandler();
  }
 else {
    final Project project=CommonDataKeys.PROJECT.getData(dataContext);
    final RunContentDescriptor selectedContent=project == null ? null : ExecutionManager.getInstance(project).getContentManager().getSelectedContent();
    return selectedContent == null ? null : selectedContent.getProcessHandler();
  }
}
