{
  ProgressManager.getInstance().run(new Task.Modal(myRepository.getProject(),"Adding remote...",false){
    private GitCommandResult myResult;
    @Override public void run(    @NotNull ProgressIndicator indicator){
      indicator.setIndeterminate(true);
      myResult=myGit.addRemote(myRepository,remoteName,remoteUrl);
      myRepository.update();
    }
    @Override public void onSuccess(){
      if (myResult.success()) {
        updateComponents(myPushSupport.getDefaultTarget(myRepository));
        if (myFireOnChangeAction != null) {
          myFireOnChangeAction.run();
        }
      }
 else {
        String message="Couldn't add remote: " + myResult.getErrorOutputAsHtmlString();
        LOG.warn(message);
        Messages.showErrorDialog(myProject,message,"Add Remote");
      }
    }
  }
);
}
