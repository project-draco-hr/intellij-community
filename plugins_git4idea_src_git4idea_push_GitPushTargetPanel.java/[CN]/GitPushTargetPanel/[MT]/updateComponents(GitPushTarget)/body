{
  myCurrentTarget=target;
  String initialBranch="";
  String initialRemote="";
  boolean noRemotes=myRepository.getRemotes().isEmpty();
  if (target == null) {
    if (myRepository.getCurrentBranch() == null) {
      myError="Detached HEAD";
    }
 else     if (myRepository.isFresh()) {
      myError="Empty repository";
    }
 else     if (!noRemotes) {
      myError="Can't push";
    }
  }
 else {
    initialBranch=getTextFieldText(target);
    initialRemote=target.getBranch().getRemote().getName();
  }
  myTargetRenderer.updateLinkText(initialBranch);
  myTargetEditor.setText(initialBranch);
  myRemoteRenderer.updateLinkText(noRemotes ? "Define remote" : initialRemote);
  myTargetEditor.setVisible(!noRemotes);
}
