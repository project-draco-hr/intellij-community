{
  if (owner == null || resultType instanceof PsiPrimitiveType) {
    return Nullness.UNKNOWN;
  }
  if (owner instanceof PsiEnumConstant || PsiUtil.isAnnotationMethod(owner)) {
    return Nullness.NOT_NULL;
  }
  if (owner instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)owner;
    if ("valueOf".equals(method.getName()) && method.hasModifierProperty(PsiModifier.STATIC)) {
      PsiClass containingClass=method.getContainingClass();
      if (containingClass != null && containingClass.isEnum()) {
        return Nullness.NOT_NULL;
      }
    }
  }
  if (resultType != null) {
    NullableNotNullManager nnn=NullableNotNullManager.getInstance(owner.getProject());
    for (    PsiAnnotation annotation : resultType.getAnnotations()) {
      if (!annotation.isValid()) {
        PsiUtilCore.ensureValid(owner);
        PsiUtil.ensureValidType(resultType,owner + " of " + owner.getClass());
        PsiUtilCore.ensureValid(annotation);
      }
      String qualifiedName=annotation.getQualifiedName();
      if (nnn.getNullables().contains(qualifiedName)) {
        return Nullness.NULLABLE;
      }
      if (nnn.getNotNulls().contains(qualifiedName)) {
        return Nullness.NOT_NULL;
      }
    }
  }
  if (NullableNotNullManager.isNullable(owner)) {
    return Nullness.NULLABLE;
  }
  if (NullableNotNullManager.isNotNull(owner)) {
    return Nullness.NOT_NULL;
  }
  return Nullness.UNKNOWN;
}
