{
  final NullableNotNullManager manager=NullableNotNullManager.getInstance(field.getProject());
  final PsiAnnotation notNull=manager.copyNotNullAnnotation(field);
  if (notNull != null) {
    annotate(listOwner,notNull);
  }
 else {
    final PsiAnnotation nullable=manager.copyNullableAnnotation(field);
    if (nullable != null) {
      annotate(listOwner,nullable);
    }
  }
  final PsiModifierList modifierList=listOwner.getModifierList();
  if (modifierList.hasExplicitModifier(GrModifier.DEF)) {
    LOG.assertTrue(modifierList instanceof GrModifierList);
    if (modifierList.getAnnotations().length > 0 || ((GrModifierList)modifierList).getModifiers().length > 1) {
      ((GrModifierList)modifierList).setModifierProperty(GrModifier.DEF,false);
    }
  }
}
