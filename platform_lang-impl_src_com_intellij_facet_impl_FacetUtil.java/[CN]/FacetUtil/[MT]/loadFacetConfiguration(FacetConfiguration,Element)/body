{
  if (config != null) {
    if (configuration instanceof PersistentStateComponent) {
      Class<?> stateClass=ComponentSerializationUtil.getStateClass(((PersistentStateComponent<?>)configuration).getClass());
      ((PersistentStateComponent)configuration).loadState(XmlSerializer.deserialize(config,stateClass));
    }
 else {
      configuration.readExternal(config);
    }
  }
}
