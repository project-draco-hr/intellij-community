{
  if (content instanceof DirectoryContent) {
    return new VirtualFileDiffElement(((DirectoryContent)content).getFile());
  }
  if (content instanceof FileContent && content.getContentType() instanceof ArchiveFileType) {
    return new JarFileDiffElement(((FileContent)content).getFile());
  }
  throw new IllegalArgumentException(content.getClass() + " " + content.getContentType());
}
