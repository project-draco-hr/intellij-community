{
  MavenExecutionRequest result=new DefaultMavenExecutionRequest();
  try {
    getComponent(MavenExecutionRequestPopulator.class).populateFromSettings(result,myMavenSettings);
    result.setGoals(goals);
    result.setPom(file);
    getComponent(MavenExecutionRequestPopulator.class).populateDefaults(result);
    result.setSystemProperties(mySystemProperties);
    result.setActiveProfiles(activeProfiles);
    result.setInactiveProfiles(inactiveProfiles);
    result.setStartTime(myBuildStartTime);
    final Method setMultiModuleProjectDirectoryMethod=ReflectionUtil.findMethod(ReflectionUtil.getClassDeclaredMethods(result.getClass()),"setMultiModuleProjectDirectory",File.class);
    if (setMultiModuleProjectDirectoryMethod != null) {
      try {
        setMultiModuleProjectDirectoryMethod.invoke(result,MavenServerUtil.findMavenBasedir(file));
      }
 catch (      Exception e) {
        Maven3ServerGlobals.getLogger().error(e);
      }
    }
    return result;
  }
 catch (  MavenExecutionRequestPopulationException e) {
    throw new RuntimeException(e);
  }
}
