{
  if (urls.size() == 1) {
    return Promise.resolve(ContainerUtil.getFirstItem(urls));
  }
  final JBList list=new JBList(urls);
  list.setCellRenderer(new ColoredListCellRenderer(){
    @Override protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      setIcon(AllIcons.Nodes.Servlet);
      append(((Url)value).toDecodedForm());
    }
  }
);
  final AsyncPromise<Url> result=new AsyncPromise<Url>();
  JBPopupFactory.getInstance().createListPopupBuilder(list).setTitle("Choose Url").setItemChoosenCallback(new Runnable(){
    @Override public void run(){
      Url value=(Url)list.getSelectedValue();
      if (value == null) {
        result.setError("selected value is null");
      }
 else {
        result.setResult(value);
      }
    }
  }
).createPopup().showInFocusCenter();
  return result;
}
