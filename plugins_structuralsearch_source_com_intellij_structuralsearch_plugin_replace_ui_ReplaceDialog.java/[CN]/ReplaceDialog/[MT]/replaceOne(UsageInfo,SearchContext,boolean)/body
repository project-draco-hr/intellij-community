{
  StructuralReplaceViewDescriptor replaceDescriptor=((StructuralReplaceViewDescriptor)descriptor);
  int index=replaceDescriptor.getUsagesList().indexOf(info);
  if (index == -1)   return;
  ReplacementInfo replacementInfo=replaceDescriptor.getResultPtrList().get(index);
  boolean approved;
  if (doConfirm) {
    ReplacementPreviewDialog wrapper=new ReplacementPreviewDialog(searchContext.getProject(),info,replacementInfo.getReplacement());
    wrapper.show();
    approved=wrapper.isOK();
  }
 else {
    approved=true;
  }
  if (approved) {
    usageView.removeUsage(info);
    replaceDescriptor.getReplacer().replace(replacementInfo);
  }
}
