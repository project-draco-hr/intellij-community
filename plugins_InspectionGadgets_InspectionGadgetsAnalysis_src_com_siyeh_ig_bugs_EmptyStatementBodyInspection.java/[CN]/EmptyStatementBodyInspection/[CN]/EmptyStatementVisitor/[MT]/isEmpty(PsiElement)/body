{
  if (!commentsAreContent && element instanceof PsiComment) {
    return true;
  }
 else   if (element instanceof PsiEmptyStatement) {
    return !commentsAreContent || PsiTreeUtil.getChildOfType(element,PsiComment.class) == null && !(PsiTreeUtil.skipSiblingsBackward(element,PsiWhiteSpace.class) instanceof PsiComment);
  }
 else   if (element instanceof PsiWhiteSpace) {
    return true;
  }
 else   if (element instanceof PsiBlockStatement) {
    final PsiBlockStatement block=(PsiBlockStatement)element;
    return isEmpty(block.getCodeBlock());
  }
 else   if (m_reportEmptyBlocks && element instanceof PsiCodeBlock) {
    final PsiCodeBlock codeBlock=(PsiCodeBlock)element;
    final PsiElement[] children=codeBlock.getChildren();
    if (children.length == 2) {
      return true;
    }
    for (int i=1; i < children.length - 1; i++) {
      final PsiElement child=children[i];
      if (!isEmpty(child)) {
        return false;
      }
    }
    return true;
  }
  return false;
}
