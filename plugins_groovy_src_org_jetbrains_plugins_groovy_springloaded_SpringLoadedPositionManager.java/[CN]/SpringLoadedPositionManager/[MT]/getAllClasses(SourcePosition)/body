{
  int line;
  String className;
  AccessToken accessToken=ReadAction.start();
  try {
    className=findEnclosingName(classPosition);
    if (className == null)     throw NoDataException.INSTANCE;
    line=classPosition.getLine();
  }
  finally {
    accessToken.finish();
  }
  List<ReferenceType> referenceTypes=myDebugProcess.getVirtualMachineProxy().classesByName(className);
  if (referenceTypes.isEmpty())   throw NoDataException.INSTANCE;
  Set<ReferenceType> res=new HashSet<ReferenceType>();
  for (  ReferenceType referenceType : referenceTypes) {
    findNested(res,referenceType,line);
  }
  if (res.isEmpty()) {
    throw NoDataException.INSTANCE;
  }
  return new ArrayList<ReferenceType>(res);
}
