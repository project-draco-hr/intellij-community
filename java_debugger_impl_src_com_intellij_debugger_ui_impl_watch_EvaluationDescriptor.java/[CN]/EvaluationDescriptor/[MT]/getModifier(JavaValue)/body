{
  return new JavaValueModifier(value){
    @Override protected void setValueImpl(    @NotNull String expression,    @NotNull XModificationCallback callback){
      final EvaluationDescriptor evaluationDescriptor=EvaluationDescriptor.this;
      if (evaluationDescriptor.canSetValue()) {
        final DebuggerContextImpl debuggerContext=DebuggerManagerEx.getInstanceEx(getProject()).getContext();
        set(expression,callback,debuggerContext,new SetValueRunnable(){
          public void setValue(          EvaluationContextImpl evaluationContext,          Value newValue) throws ClassNotLoadedException, InvalidTypeException, EvaluateException {
            final Modifier modifier=evaluationDescriptor.getModifier();
            modifier.setValue(preprocessValue(evaluationContext,newValue,modifier.getExpectedType()));
            update(debuggerContext);
          }
          public ReferenceType loadClass(          EvaluationContextImpl evaluationContext,          String className) throws InvocationException, ClassNotLoadedException, IncompatibleThreadStateException, InvalidTypeException, EvaluateException {
            return evaluationContext.getDebugProcess().loadClass(evaluationContext,className,evaluationContext.getClassLoader());
          }
        }
);
      }
    }
  }
;
}
