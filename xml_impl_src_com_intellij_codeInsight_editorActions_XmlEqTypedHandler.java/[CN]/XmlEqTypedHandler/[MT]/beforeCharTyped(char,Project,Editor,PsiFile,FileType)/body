{
  if (c == '=' && WebEditorOptions.getInstance().isInsertQuotesForAttributeValue()) {
    if (XmlGtTypedHandler.fileContainsXmlLanguage(file)) {
      TypedHandler.commitDocumentIfCurrentCaretIsNotTheFirstOne(editor,project);
      PsiElement at=file.findElementAt(editor.getCaretModel().getOffset() - 1);
      PsiElement atParent=at != null ? at.getParent() : null;
      if (atParent instanceof XmlAttribute && ((XmlAttribute)atParent).getValueElement() == null) {
        needToInsertQuotes=((XmlAttribute)atParent).getValueElement() == null;
      }
    }
  }
  return super.beforeCharTyped(c,project,editor,file,fileType);
}
