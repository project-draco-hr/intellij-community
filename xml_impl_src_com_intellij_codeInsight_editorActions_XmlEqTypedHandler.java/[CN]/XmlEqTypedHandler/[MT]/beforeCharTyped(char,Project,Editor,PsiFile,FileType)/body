{
  if (WebEditorOptions.getInstance().isInsertQuotesForAttributeValue()) {
    boolean inXml=file.getLanguage() instanceof XMLLanguage || file.getViewProvider().getBaseLanguage() instanceof XMLLanguage;
    if (c == '=' && inXml) {
      TypedHandler.commitDocumentIfCurrentCaretIsNotTheFirstOne(editor,project);
      PsiElement at=file.findElementAt(editor.getCaretModel().getOffset() - 1);
      PsiElement atParent=at != null ? at.getParent() : null;
      if (atParent instanceof XmlAttribute && ((XmlAttribute)atParent).getValueElement() == null) {
        needToInsertQuotes=((XmlAttribute)atParent).getValueElement() == null;
      }
    }
  }
  return super.beforeCharTyped(c,project,editor,file,fileType);
}
