{
  if (WebEditorOptions.getInstance().isInsertQuotesForAttributeValue()) {
    boolean inXml=file.getLanguage() instanceof XMLLanguage || file.getViewProvider().getBaseLanguage() instanceof XMLLanguage;
    if (c == '=' && inXml) {
      for (      Caret caret : editor.getCaretModel().getAllCarets()) {
        PsiElement at=file.findElementAt(caret.getOffset() - 1);
        PsiElement atParent=at != null ? at.getParent() : null;
        if (atParent instanceof XmlAttribute && ((XmlAttribute)atParent).getValueElement() == null) {
          caretsForInsertingQuotes.add(caret);
        }
      }
    }
  }
  return super.beforeCharTyped(c,project,editor,file,fileType);
}
