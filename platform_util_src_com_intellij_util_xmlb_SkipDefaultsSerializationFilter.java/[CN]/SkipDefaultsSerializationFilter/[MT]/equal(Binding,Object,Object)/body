{
  if (defaultValue instanceof Element && currentValue instanceof Element) {
    return JDOMUtil.areElementsEqual((Element)currentValue,(Element)defaultValue);
  }
 else {
    if (currentValue == defaultValue) {
      return true;
    }
    if (currentValue == null || defaultValue == null) {
      return false;
    }
    if (binding instanceof BasePrimitiveBinding) {
      Binding referencedBinding=((BasePrimitiveBinding)binding).myBinding;
      if (referencedBinding instanceof BeanBinding) {
        BeanBinding classBinding=(BeanBinding)referencedBinding;
        ThreeState compareByFields=classBinding.hasEqualMethod;
        if (compareByFields == ThreeState.UNSURE) {
          compareByFields=ReflectionUtil.getDeclaredMethod(classBinding.myBeanClass,"equals",Object.class) == null ? ThreeState.YES : ThreeState.NO;
          classBinding.hasEqualMethod=compareByFields;
        }
        if (compareByFields == ThreeState.YES) {
          return classBinding.equalByFields(currentValue,defaultValue,this);
        }
      }
    }
    return Comparing.equal(currentValue,defaultValue);
  }
}
