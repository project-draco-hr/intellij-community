{
  int countArgs=argv.length;
  for (int i=argv.length - 1; i >= 0; i--) {
    if (argv[i].endsWith("com.intellij.idea.Main") || argv[i].endsWith(".exe")) {
      countArgs=i + 1;
      if (argv[i].endsWith(".exe") && argv[i].indexOf(File.separatorChar) < 0) {
        argv[i]=new File(PathManager.getBinPath(),argv[i]).getPath();
      }
      break;
    }
  }
  String[] restartArg=new String[countArgs];
  System.arraycopy(argv,0,restartArg,0,countArgs);
  return restartArg;
}
