{
  int sequence=myDebugger.getNextSequence();
  if (isResponseExpected()) {
    myDebugger.placeResponse(sequence,null);
  }
  ProtocolFrame frame=new ProtocolFrame(myCommandCode,sequence,getPayload());
  if (!myDebugger.sendFrame(frame)) {
    throw new PyDebuggerException("Couldn't send frame " + myCommandCode);
  }
  if (!isResponseExpected())   return;
  frame=myDebugger.waitForResponse(sequence);
  if (frame == null) {
    if (!myDebugger.isConnected()) {
      throw new PyDebuggerException("No connection (command:  " + myCommandCode + " )");
    }
    throw new PyDebuggerException("Timeout waiting for response on " + myCommandCode);
  }
  processResponse(frame);
}
