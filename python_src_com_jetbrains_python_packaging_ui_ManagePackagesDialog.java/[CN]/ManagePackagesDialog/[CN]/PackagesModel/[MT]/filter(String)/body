{
  final Application application=ApplicationManager.getApplication();
  application.executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        final Collection<String> toProcess=PyPIPackageUtil.INSTANCE.getPackageNames();
        application.invokeLater(new Runnable(){
          @Override public void run(){
            for (            ComparablePair name : PyPIPackageUtil.INSTANCE.getAdditionalPackageNames()) {
              toProcess.add(name.first);
            }
            removeAll();
            if (StringUtil.isEmptyOrSpaces(filter)) {
              for (              String name : toProcess) {
                add(PyPIPackageUtil.PYPI_URL,name);
              }
              return;
            }
            for (            String packageName : toProcess) {
              if (StringUtil.containsIgnoreCase(packageName,filter)) {
                add(PyPIPackageUtil.PYPI_URL,packageName);
              }
            }
          }
        }
,ModalityState.any());
      }
 catch (      final IOException e) {
        application.invokeLater(new Runnable(){
          @Override public void run(){
            Messages.showErrorDialog("IO Error occurred. Could not reach url " + e.getMessage() + ". Please, check your internet connection.","Packages");
          }
        }
,ModalityState.any());
      }
    }
  }
);
}
