{
  setDownloadStatus(true);
  final Application application=ApplicationManager.getApplication();
  application.executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        List<Pair> packages=new ArrayList<Pair>();
        final Collection<String> packageNames=PyPIPackageUtil.INSTANCE.getPackageNames();
        final boolean customRepoConfigured=!PyPackageService.getInstance().additionalRepositories.isEmpty();
        String url=customRepoConfigured ? PyPIPackageUtil.PYPI_URL : "";
        for (        String name : packageNames) {
          packages.add(new ComparablePair(name,url));
        }
        packages.addAll(PyPIPackageUtil.INSTANCE.getAdditionalPackageNames());
        myPackagesModel=new PackagesModel(packages);
        application.invokeLater(new Runnable(){
          @Override public void run(){
            myPackages.setModel(myPackagesModel);
            setDownloadStatus(false);
          }
        }
,ModalityState.any());
      }
 catch (      final IOException e) {
        application.invokeLater(new Runnable(){
          @Override public void run(){
            Messages.showErrorDialog("IO Error occurred. Could not reach url " + e.getMessage() + ". Please, check your internet connection.","Packages");
            setDownloadStatus(false);
          }
        }
,ModalityState.any());
      }
    }
  }
);
}
