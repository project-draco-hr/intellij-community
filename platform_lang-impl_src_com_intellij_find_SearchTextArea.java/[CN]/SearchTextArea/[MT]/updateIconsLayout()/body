{
  if (myIconsPanel == null) {
    return;
  }
  boolean showClearIcon=!StringUtil.isEmpty(myTextArea.getText());
  boolean showNewLine=isNewLineAvailable();
  boolean wrongVisibility=((myClearButton.getParent() != null) != showClearIcon) || ((myNewLineButton.getParent() != null) != showNewLine);
  LayoutManager layout=myIconsPanel.getLayout();
  boolean wrongLayout=!(layout instanceof GridLayout);
  boolean multiline=StringUtil.getLineBreakCount(myTextArea.getText()) > 0;
  boolean wrongPositioning=!wrongLayout && (((GridLayout)layout).getRows() > 1) != multiline;
  if (wrongLayout || wrongVisibility || wrongPositioning) {
    myIconsPanel.removeAll();
    int rows=multiline && showClearIcon && showNewLine ? 2 : 1;
    int columns=!multiline && showClearIcon && showNewLine ? 2 : 1;
    myIconsPanel.setLayout(new GridLayout(rows,columns,8,8));
    if (!multiline && showNewLine) {
      myIconsPanel.add(myNewLineButton);
    }
    if (showClearIcon) {
      myIconsPanel.add(myClearButton);
    }
    if (multiline && showNewLine) {
      myIconsPanel.add(myNewLineButton);
    }
    myScrollPane.revalidate();
    doLayout();
  }
}
