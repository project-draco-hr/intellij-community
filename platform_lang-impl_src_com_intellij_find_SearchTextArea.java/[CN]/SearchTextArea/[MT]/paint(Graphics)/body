{
  Graphics2D g=(Graphics2D)graphics.create();
  try {
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,RenderingHints.VALUE_STROKE_NORMALIZE);
    Rectangle r=new Rectangle(getSize());
    if (r.height % 2 == 1)     r.height--;
    int arcSize=Math.min(25,r.height - 1);
    boolean hasFocus=myTextArea.hasFocus();
    g.setColor(myTextArea.isEnabled() ? Gray._196 : Gray._83);
    if (SystemInfo.isMac && (UIUtil.isUnderIntelliJLaF() || UIUtil.isUnderAquaLookAndFeel())) {
      MacIntelliJTextFieldUI.paintAquaSearchFocusRing(g,r,myTextArea);
    }
 else {
      JBInsets.removeFrom(r,new Insets(3,3,3,3));
      if (hasFocus) {
        DarculaUIUtil.paintSearchFocusRing(g,r,myTextArea,arcSize + 6);
      }
 else {
        g.drawRoundRect(r.x,r.y,r.width,r.height,arcSize,arcSize);
      }
    }
  }
  finally {
    g.dispose();
  }
  super.paint(graphics);
}
