{
  assertEquals(expectedOccurences,findMatches(source,pattern,true,JavaScriptSupportLoader.JAVASCRIPT).size());
  CompiledPattern compiledPattern=PatternCompiler.compilePattern(myProject,options);
  assertTrue(TokenBasedSearcher.canProcess(compiledPattern,options.getScope()));
  TokenBasedSearcher searcher=new TokenBasedSearcher(testMatcher);
  int lexicalOccurences=searcher.search(compiledPattern);
  assertEquals(expectedLexicalOccurences,lexicalOccurences);
}
