{
  assertEquals(expectedOccurences,findMatches(source,pattern,true,patternFileType,patternFileExtension,sourceFileType,sourceFileExtension,physicalSourceFile).size());
  CompiledPattern compiledPattern=PatternCompiler.compilePattern(myProject,options);
  assertTrue(TokenBasedSearcher.canProcess(compiledPattern));
  TokenBasedSearcher searcher=new TokenBasedSearcher(testMatcher);
  int lexicalOccurences=searcher.search(compiledPattern);
  assertEquals(expectedLexicalOccurences,lexicalOccurences);
}
