{
  boolean hasSeparator=false;
  while (true) {
    while (builder.getTokenType() == GroovyTokenTypes.mSEMI || isExtendedSeparator(builder.getTokenType())) {
      hasSeparator=true;
      builder.advanceLexer();
    }
    if (builder.getTokenType() == GroovyTokenTypes.mNLS) {
      PsiBuilder.Marker beforeNls=builder.mark();
      hasSeparator=true;
      builder.advanceLexer();
      if (builder.eof() || until.contains(builder.getTokenType())) {
        beforeNls.rollbackTo();
        return true;
      }
      beforeNls.drop();
    }
 else {
      break;
    }
  }
  if (builder.eof() || until.contains(builder.getTokenType())) {
    return true;
  }
  if (requireSeparator && !hasSeparator) {
    builder.error(GroovyBundle.message("separator.or.rcurly.expected"));
  }
  return false;
}
