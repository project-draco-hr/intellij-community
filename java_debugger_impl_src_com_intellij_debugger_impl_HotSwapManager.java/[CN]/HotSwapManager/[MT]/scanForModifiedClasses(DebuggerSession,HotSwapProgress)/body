{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  final long timeStamp=getTimeStamp(session);
  final Map<String,HotSwapFile> modifiedClasses=new HashMap<>();
  final List<File> outputRoots=new ArrayList<>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final List<VirtualFile> allDirs=OrderEnumerator.orderEntries(myProject).withoutSdk().withoutLibraries().getPathsList().getRootDirs();
      for (      VirtualFile dir : allDirs) {
        outputRoots.add(new File(dir.getPath()));
      }
    }
  }
);
  for (  File root : outputRoots) {
    final String rootPath=FileUtil.toCanonicalPath(root.getPath());
    collectModifiedClasses(root,rootPath,rootPath + "/",modifiedClasses,progress,timeStamp);
  }
  return modifiedClasses;
}
