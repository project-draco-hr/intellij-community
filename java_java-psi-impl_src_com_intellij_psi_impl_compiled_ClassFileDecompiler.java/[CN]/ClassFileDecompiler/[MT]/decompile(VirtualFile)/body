{
  ClassFileDecompilers.Decompiler decompiler=ClassFileDecompilers.find(file);
  if (decompiler instanceof ClassFileDecompilers.Full) {
    PsiManager manager=PsiManager.getInstance(DefaultProjectFactory.getInstance().getDefaultProject());
    return ((ClassFileDecompilers.Full)decompiler).createFileViewProvider(file,manager,true).getContents();
  }
  @SuppressWarnings("deprecation") PlatformDecompiler platformDecompiler=ServiceManager.getService(PlatformDecompiler.class);
  if (platformDecompiler != null) {
    CharSequence result=platformDecompiler.decompile(file);
    if (result != null)     return result;
  }
  if (decompiler instanceof ClassFileDecompilers.Light) {
    try {
      return ((ClassFileDecompilers.Light)decompiler).getText(file);
    }
 catch (    ClassFileDecompilers.Light.CannotDecompileException e) {
      LOG.warn("decompiler: " + decompiler.getClass(),e);
    }
  }
  return ClsFileImpl.decompile(file);
}
