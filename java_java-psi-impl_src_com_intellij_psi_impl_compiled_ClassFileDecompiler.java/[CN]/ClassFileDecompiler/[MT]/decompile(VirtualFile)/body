{
  ClassFileDecompilers.Decompiler decompiler=ClassFileDecompilers.find(file);
  if (decompiler instanceof ClassFileDecompilers.Full) {
    PsiManager manager=PsiManager.getInstance(DefaultProjectFactory.getInstance().getDefaultProject());
    return ((ClassFileDecompilers.Full)decompiler).createFileViewProvider(file,manager,true).getContents();
  }
  @SuppressWarnings("deprecation") PlatformDecompiler platformDecompiler=ServiceManager.getService(PlatformDecompiler.class);
  if (platformDecompiler != null) {
    CharSequence result=platformDecompiler.decompile(file);
    if (result != null)     return result;
  }
  return decompileText(file);
}
